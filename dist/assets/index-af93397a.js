var dC=Object.defineProperty;var uC=(et,dt,kt)=>dt in et?dC(et,dt,{enumerable:!0,configurable:!0,writable:!0,value:kt}):et[dt]=kt;var Es=(et,dt,kt)=>(uC(et,typeof dt!="symbol"?dt+"":dt,kt),kt),H2=(et,dt,kt)=>{if(!dt.has(et))throw TypeError("Cannot "+kt)};var ar=(et,dt,kt)=>(H2(et,dt,"read from private field"),kt?kt.call(et):dt.get(et)),yr=(et,dt,kt)=>{if(dt.has(et))throw TypeError("Cannot add the same private member more than once");dt instanceof WeakSet?dt.add(et):dt.set(et,kt)},vr=(et,dt,kt,$t)=>(H2(et,dt,"write to private field"),$t?$t.call(et,kt):dt.set(et,kt),kt);var xa=(et,dt,kt,$t)=>({set _(Tt){vr(et,dt,Tt,kt)},get _(){return ar(et,dt,$t)}}),Br=(et,dt,kt)=>(H2(et,dt,"access private method"),kt);function _mergeNamespaces(et,dt){for(var kt=0;kt<dt.length;kt++){const $t=dt[kt];if(typeof $t!="string"&&!Array.isArray($t)){for(const Tt in $t)if(Tt!=="default"&&!(Tt in et)){const Dt=Object.getOwnPropertyDescriptor($t,Tt);Dt&&Object.defineProperty(et,Tt,Dt.get?Dt:{enumerable:!0,get:()=>$t[Tt]})}}}return Object.freeze(Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}))}(function(){const dt=document.createElement("link").relList;if(dt&&dt.supports&&dt.supports("modulepreload"))return;for(const Tt of document.querySelectorAll('link[rel="modulepreload"]'))$t(Tt);new MutationObserver(Tt=>{for(const Dt of Tt)if(Dt.type==="childList")for(const Ft of Dt.addedNodes)Ft.tagName==="LINK"&&Ft.rel==="modulepreload"&&$t(Ft)}).observe(document,{childList:!0,subtree:!0});function kt(Tt){const Dt={};return Tt.integrity&&(Dt.integrity=Tt.integrity),Tt.referrerPolicy&&(Dt.referrerPolicy=Tt.referrerPolicy),Tt.crossOrigin==="use-credentials"?Dt.credentials="include":Tt.crossOrigin==="anonymous"?Dt.credentials="omit":Dt.credentials="same-origin",Dt}function $t(Tt){if(Tt.ep)return;Tt.ep=!0;const Dt=kt(Tt);fetch(Tt.href,Dt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}function getAugmentedNamespace(et){if(et.__esModule)return et;var dt=et.default;if(typeof dt=="function"){var kt=function $t(){return this instanceof $t?Reflect.construct(dt,arguments,this.constructor):dt.apply(this,arguments)};kt.prototype=dt.prototype}else kt={};return Object.defineProperty(kt,"__esModule",{value:!0}),Object.keys(et).forEach(function($t){var Tt=Object.getOwnPropertyDescriptor(et,$t);Object.defineProperty(kt,$t,Tt.get?Tt:{enumerable:!0,get:function(){return et[$t]}})}),kt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$4=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$6=Symbol.for("react.forward_ref"),w$8=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$8=Symbol.iterator;function A$8(et){return et===null||typeof et!="object"?null:(et=z$8&&et[z$8]||et["@@iterator"],typeof et=="function"?et:null)}var B$6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$9=Object.assign,D$5={};function E$8(et,dt,kt){this.props=et,this.context=dt,this.refs=D$5,this.updater=kt||B$6}E$8.prototype.isReactComponent={};E$8.prototype.setState=function(et,dt){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,dt,"setState")};E$8.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$4(){}F$4.prototype=E$8.prototype;function G$4(et,dt,kt){this.props=et,this.context=dt,this.refs=D$5,this.updater=kt||B$6}var H$3=G$4.prototype=new F$4;H$3.constructor=G$4;C$9(H$3,E$8.prototype);H$3.isPureReactComponent=!0;var I$5=Array.isArray,J$3=Object.prototype.hasOwnProperty,K$5={current:null},L$a={key:!0,ref:!0,__self:!0,__source:!0};function M$7(et,dt,kt){var $t,Tt={},Dt=null,Ft=null;if(dt!=null)for($t in dt.ref!==void 0&&(Ft=dt.ref),dt.key!==void 0&&(Dt=""+dt.key),dt)J$3.call(dt,$t)&&!L$a.hasOwnProperty($t)&&(Tt[$t]=dt[$t]);var Ut=arguments.length-2;if(Ut===1)Tt.children=kt;else if(1<Ut){for(var Ht=Array(Ut),Kt=0;Kt<Ut;Kt++)Ht[Kt]=arguments[Kt+2];Tt.children=Ht}if(et&&et.defaultProps)for($t in Ut=et.defaultProps,Ut)Tt[$t]===void 0&&(Tt[$t]=Ut[$t]);return{$$typeof:l$3,type:et,key:Dt,ref:Ft,props:Tt,_owner:K$5.current}}function N$4(et,dt){return{$$typeof:l$3,type:et.type,key:dt,ref:et.ref,props:et.props,_owner:et._owner}}function O$8(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$3}function escape$1(et){var dt={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(kt){return dt[kt]})}var P$7=/\/+/g;function Q$5(et,dt){return typeof et=="object"&&et!==null&&et.key!=null?escape$1(""+et.key):dt.toString(36)}function R$5(et,dt,kt,$t,Tt){var Dt=typeof et;(Dt==="undefined"||Dt==="boolean")&&(et=null);var Ft=!1;if(et===null)Ft=!0;else switch(Dt){case"string":case"number":Ft=!0;break;case"object":switch(et.$$typeof){case l$3:case n$4:Ft=!0}}if(Ft)return Ft=et,Tt=Tt(Ft),et=$t===""?"."+Q$5(Ft,0):$t,I$5(Tt)?(kt="",et!=null&&(kt=et.replace(P$7,"$&/")+"/"),R$5(Tt,dt,kt,"",function(Kt){return Kt})):Tt!=null&&(O$8(Tt)&&(Tt=N$4(Tt,kt+(!Tt.key||Ft&&Ft.key===Tt.key?"":(""+Tt.key).replace(P$7,"$&/")+"/")+et)),dt.push(Tt)),1;if(Ft=0,$t=$t===""?".":$t+":",I$5(et))for(var Ut=0;Ut<et.length;Ut++){Dt=et[Ut];var Ht=$t+Q$5(Dt,Ut);Ft+=R$5(Dt,dt,kt,Ht,Tt)}else if(Ht=A$8(et),typeof Ht=="function")for(et=Ht.call(et),Ut=0;!(Dt=et.next()).done;)Dt=Dt.value,Ht=$t+Q$5(Dt,Ut++),Ft+=R$5(Dt,dt,kt,Ht,Tt);else if(Dt==="object")throw dt=String(et),Error("Objects are not valid as a React child (found: "+(dt==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":dt)+"). If you meant to render a collection of children, use an array instead.");return Ft}function S$5(et,dt,kt){if(et==null)return et;var $t=[],Tt=0;return R$5(et,$t,"","",function(Dt){return dt.call(kt,Dt,Tt++)}),$t}function T$6(et){if(et._status===-1){var dt=et._result;dt=dt(),dt.then(function(kt){(et._status===0||et._status===-1)&&(et._status=1,et._result=kt)},function(kt){(et._status===0||et._status===-1)&&(et._status=2,et._result=kt)}),et._status===-1&&(et._status=0,et._result=dt)}if(et._status===1)return et._result.default;throw et._result}var U$6={current:null},V$4={transition:null},W$9={ReactCurrentDispatcher:U$6,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$5};function X$8(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$5,forEach:function(et,dt,kt){S$5(et,function(){dt.apply(this,arguments)},kt)},count:function(et){var dt=0;return S$5(et,function(){dt++}),dt},toArray:function(et){return S$5(et,function(dt){return dt})||[]},only:function(et){if(!O$8(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$8;react_production_min.Fragment=p$6;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$4;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$8;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$9;react_production_min.act=X$8;react_production_min.cloneElement=function(et,dt,kt){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var $t=C$9({},et.props),Tt=et.key,Dt=et.ref,Ft=et._owner;if(dt!=null){if(dt.ref!==void 0&&(Dt=dt.ref,Ft=K$5.current),dt.key!==void 0&&(Tt=""+dt.key),et.type&&et.type.defaultProps)var Ut=et.type.defaultProps;for(Ht in dt)J$3.call(dt,Ht)&&!L$a.hasOwnProperty(Ht)&&($t[Ht]=dt[Ht]===void 0&&Ut!==void 0?Ut[Ht]:dt[Ht])}var Ht=arguments.length-2;if(Ht===1)$t.children=kt;else if(1<Ht){Ut=Array(Ht);for(var Kt=0;Kt<Ht;Kt++)Ut[Kt]=arguments[Kt+2];$t.children=Ut}return{$$typeof:l$3,type:et.type,key:Tt,ref:Dt,props:$t,_owner:Ft}};react_production_min.createContext=function(et){return et={$$typeof:u$6,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$4,_context:et},et.Consumer=et};react_production_min.createElement=M$7;react_production_min.createFactory=function(et){var dt=M$7.bind(null,et);return dt.type=et,dt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$6,render:et}};react_production_min.isValidElement=O$8;react_production_min.lazy=function(et){return{$$typeof:y$5,_payload:{_status:-1,_result:et},_init:T$6}};react_production_min.memo=function(et,dt){return{$$typeof:x$2,type:et,compare:dt===void 0?null:dt}};react_production_min.startTransition=function(et){var dt=V$4.transition;V$4.transition={};try{et()}finally{V$4.transition=dt}};react_production_min.unstable_act=X$8;react_production_min.useCallback=function(et,dt){return U$6.current.useCallback(et,dt)};react_production_min.useContext=function(et){return U$6.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$6.current.useDeferredValue(et)};react_production_min.useEffect=function(et,dt){return U$6.current.useEffect(et,dt)};react_production_min.useId=function(){return U$6.current.useId()};react_production_min.useImperativeHandle=function(et,dt,kt){return U$6.current.useImperativeHandle(et,dt,kt)};react_production_min.useInsertionEffect=function(et,dt){return U$6.current.useInsertionEffect(et,dt)};react_production_min.useLayoutEffect=function(et,dt){return U$6.current.useLayoutEffect(et,dt)};react_production_min.useMemo=function(et,dt){return U$6.current.useMemo(et,dt)};react_production_min.useReducer=function(et,dt,kt){return U$6.current.useReducer(et,dt,kt)};react_production_min.useRef=function(et){return U$6.current.useRef(et)};react_production_min.useState=function(et){return U$6.current.useState(et)};react_production_min.useSyncExternalStore=function(et,dt,kt){return U$6.current.useSyncExternalStore(et,dt,kt)};react_production_min.useTransition=function(){return U$6.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React$2=getDefaultExportFromCjs(reactExports),t$3=_mergeNamespaces({__proto__:null,default:React$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$5=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$3=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$4(et,dt,kt){var $t,Tt={},Dt=null,Ft=null;kt!==void 0&&(Dt=""+kt),dt.key!==void 0&&(Dt=""+dt.key),dt.ref!==void 0&&(Ft=dt.ref);for($t in dt)m$4.call(dt,$t)&&!p$5.hasOwnProperty($t)&&(Tt[$t]=dt[$t]);if(et&&et.defaultProps)for($t in dt=et.defaultProps,dt)Tt[$t]===void 0&&(Tt[$t]=dt[$t]);return{$$typeof:k$5,type:et,key:Dt,ref:Ft,props:Tt,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function dt(xr,wr){var zr=xr.length;xr.push(wr);e:for(;0<zr;){var Hr=zr-1>>>1,Yr=xr[Hr];if(0<Tt(Yr,wr))xr[Hr]=wr,xr[zr]=Yr,zr=Hr;else break e}}function kt(xr){return xr.length===0?null:xr[0]}function $t(xr){if(xr.length===0)return null;var wr=xr[0],zr=xr.pop();if(zr!==wr){xr[0]=zr;e:for(var Hr=0,Yr=xr.length,rs=Yr>>>1;Hr<rs;){var as=2*(Hr+1)-1,es=xr[as],Xr=as+1,Wr=xr[Xr];if(0>Tt(es,zr))Xr<Yr&&0>Tt(Wr,es)?(xr[Hr]=Wr,xr[Xr]=zr,Hr=Xr):(xr[Hr]=es,xr[as]=zr,Hr=as);else if(Xr<Yr&&0>Tt(Wr,zr))xr[Hr]=Wr,xr[Xr]=zr,Hr=Xr;else break e}}return wr}function Tt(xr,wr){var zr=xr.sortIndex-wr.sortIndex;return zr!==0?zr:xr.id-wr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Dt=performance;et.unstable_now=function(){return Dt.now()}}else{var Ft=Date,Ut=Ft.now();et.unstable_now=function(){return Ft.now()-Ut}}var Ht=[],Kt=[],Yt=1,Jt=null,Zt=3,er=!1,rr=!1,sr=!1,nr=typeof setTimeout=="function"?setTimeout:null,ir=typeof clearTimeout=="function"?clearTimeout:null,lr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function or(xr){for(var wr=kt(Kt);wr!==null;){if(wr.callback===null)$t(Kt);else if(wr.startTime<=xr)$t(Kt),wr.sortIndex=wr.expirationTime,dt(Ht,wr);else break;wr=kt(Kt)}}function cr(xr){if(sr=!1,or(xr),!rr)if(kt(Ht)!==null)rr=!0,kr(dr);else{var wr=kt(Kt);wr!==null&&Tr(cr,wr.startTime-xr)}}function dr(xr,wr){rr=!1,sr&&(sr=!1,ir(mr),mr=-1),er=!0;var zr=Zt;try{for(or(wr),Jt=kt(Ht);Jt!==null&&(!(Jt.expirationTime>wr)||xr&&!br());){var Hr=Jt.callback;if(typeof Hr=="function"){Jt.callback=null,Zt=Jt.priorityLevel;var Yr=Hr(Jt.expirationTime<=wr);wr=et.unstable_now(),typeof Yr=="function"?Jt.callback=Yr:Jt===kt(Ht)&&$t(Ht),or(wr)}else $t(Ht);Jt=kt(Ht)}if(Jt!==null)var rs=!0;else{var as=kt(Kt);as!==null&&Tr(cr,as.startTime-wr),rs=!1}return rs}finally{Jt=null,Zt=zr,er=!1}}var ur=!1,pr=null,mr=-1,jr=5,Rr=-1;function br(){return!(et.unstable_now()-Rr<jr)}function _r(){if(pr!==null){var xr=et.unstable_now();Rr=xr;var wr=!0;try{wr=pr(!0,xr)}finally{wr?Mr():(ur=!1,pr=null)}}else ur=!1}var Mr;if(typeof lr=="function")Mr=function(){lr(_r)};else if(typeof MessageChannel<"u"){var Pr=new MessageChannel,Or=Pr.port2;Pr.port1.onmessage=_r,Mr=function(){Or.postMessage(null)}}else Mr=function(){nr(_r,0)};function kr(xr){pr=xr,ur||(ur=!0,Mr())}function Tr(xr,wr){mr=nr(function(){xr(et.unstable_now())},wr)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(xr){xr.callback=null},et.unstable_continueExecution=function(){rr||er||(rr=!0,kr(dr))},et.unstable_forceFrameRate=function(xr){0>xr||125<xr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jr=0<xr?Math.floor(1e3/xr):5},et.unstable_getCurrentPriorityLevel=function(){return Zt},et.unstable_getFirstCallbackNode=function(){return kt(Ht)},et.unstable_next=function(xr){switch(Zt){case 1:case 2:case 3:var wr=3;break;default:wr=Zt}var zr=Zt;Zt=wr;try{return xr()}finally{Zt=zr}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(xr,wr){switch(xr){case 1:case 2:case 3:case 4:case 5:break;default:xr=3}var zr=Zt;Zt=xr;try{return wr()}finally{Zt=zr}},et.unstable_scheduleCallback=function(xr,wr,zr){var Hr=et.unstable_now();switch(typeof zr=="object"&&zr!==null?(zr=zr.delay,zr=typeof zr=="number"&&0<zr?Hr+zr:Hr):zr=Hr,xr){case 1:var Yr=-1;break;case 2:Yr=250;break;case 5:Yr=1073741823;break;case 4:Yr=1e4;break;default:Yr=5e3}return Yr=zr+Yr,xr={id:Yt++,callback:wr,priorityLevel:xr,startTime:zr,expirationTime:Yr,sortIndex:-1},zr>Hr?(xr.sortIndex=zr,dt(Kt,xr),kt(Ht)===null&&xr===kt(Kt)&&(sr?(ir(mr),mr=-1):sr=!0,Tr(cr,zr-Hr))):(xr.sortIndex=Yr,dt(Ht,xr),rr||er||(rr=!0,kr(dr))),xr},et.unstable_shouldYield=br,et.unstable_wrapCallback=function(xr){var wr=Zt;return function(){var zr=Zt;Zt=wr;try{return xr.apply(this,arguments)}finally{Zt=zr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$4(et){for(var dt="https://reactjs.org/docs/error-decoder.html?invariant="+et,kt=1;kt<arguments.length;kt++)dt+="&args[]="+encodeURIComponent(arguments[kt]);return"Minified React error #"+et+"; visit "+dt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,dt){ha(et,dt),ha(et+"Capture",dt)}function ha(et,dt){for(ea[et]=dt,et=0;et<dt.length;et++)da.add(dt[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,dt,kt,$t){if(kt!==null&&kt.type===0)return!1;switch(typeof dt){case"function":case"symbol":return!0;case"boolean":return $t?!1:kt!==null?!kt.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,dt,kt,$t){if(dt===null||typeof dt>"u"||pa(et,dt,kt,$t))return!0;if($t)return!1;if(kt!==null)switch(kt.type){case 3:return!dt;case 4:return dt===!1;case 5:return isNaN(dt);case 6:return isNaN(dt)||1>dt}return!1}function v$5(et,dt,kt,$t,Tt,Dt,Ft){this.acceptsBooleans=dt===2||dt===3||dt===4,this.attributeName=$t,this.attributeNamespace=Tt,this.mustUseProperty=kt,this.propertyName=et,this.type=dt,this.sanitizeURL=Dt,this.removeEmptyString=Ft}var z$7={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z$7[et]=new v$5(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var dt=et[0];z$7[dt]=new v$5(dt,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z$7[et]=new v$5(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z$7[et]=new v$5(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z$7[et]=new v$5(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z$7[et]=new v$5(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z$7[et]=new v$5(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z$7[et]=new v$5(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z$7[et]=new v$5(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var dt=et.replace(ra,sa);z$7[dt]=new v$5(dt,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var dt=et.replace(ra,sa);z$7[dt]=new v$5(dt,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var dt=et.replace(ra,sa);z$7[dt]=new v$5(dt,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z$7[et]=new v$5(et,1,!1,et.toLowerCase(),null,!1,!1)});z$7.xlinkHref=new v$5("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z$7[et]=new v$5(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta$1(et,dt,kt,$t){var Tt=z$7.hasOwnProperty(dt)?z$7[dt]:null;(Tt!==null?Tt.type!==0:$t||!(2<dt.length)||dt[0]!=="o"&&dt[0]!=="O"||dt[1]!=="n"&&dt[1]!=="N")&&(qa(dt,kt,Tt,$t)&&(kt=null),$t||Tt===null?oa(dt)&&(kt===null?et.removeAttribute(dt):et.setAttribute(dt,""+kt)):Tt.mustUseProperty?et[Tt.propertyName]=kt===null?Tt.type===3?!1:"":kt:(dt=Tt.attributeName,$t=Tt.attributeNamespace,kt===null?et.removeAttribute(dt):(Tt=Tt.type,kt=Tt===3||Tt===4&&kt===!0?"":""+kt,$t?et.setAttributeNS($t,dt,kt):et.setAttribute(dt,kt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$7=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(kt){var dt=kt.stack.trim().match(/\n( *(at )?)/);La=dt&&dt[1]||""}return`
`+La+et}var Na=!1;function Oa(et,dt){if(!et||Na)return"";Na=!0;var kt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(dt)if(dt=function(){throw Error()},Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Kt){var $t=Kt}Reflect.construct(et,[],dt)}else{try{dt.call()}catch(Kt){$t=Kt}et.call(dt.prototype)}else{try{throw Error()}catch(Kt){$t=Kt}et()}}catch(Kt){if(Kt&&$t&&typeof Kt.stack=="string"){for(var Tt=Kt.stack.split(`
`),Dt=$t.stack.split(`
`),Ft=Tt.length-1,Ut=Dt.length-1;1<=Ft&&0<=Ut&&Tt[Ft]!==Dt[Ut];)Ut--;for(;1<=Ft&&0<=Ut;Ft--,Ut--)if(Tt[Ft]!==Dt[Ut]){if(Ft!==1||Ut!==1)do if(Ft--,Ut--,0>Ut||Tt[Ft]!==Dt[Ut]){var Ht=`
`+Tt[Ft].replace(" at new "," at ");return et.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",et.displayName)),Ht}while(1<=Ft&&0<=Ut);break}}}finally{Na=!1,Error.prepareStackTrace=kt}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var dt=et.render;return et=et.displayName,et||(et=dt.displayName||dt.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return dt=et.displayName||null,dt!==null?dt:Qa(et.type)||"Memo";case Ha:dt=et._payload,et=et._init;try{return Qa(et(dt))}catch{}}return null}function Ra(et){var dt=et.type;switch(et.tag){case 24:return"Cache";case 9:return(dt.displayName||"Context")+".Consumer";case 10:return(dt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=dt.render,et=et.displayName||et.name||"",dt.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return dt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(dt);case 8:return dt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof dt=="function")return dt.displayName||dt.name||null;if(typeof dt=="string")return dt}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var dt=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(dt==="checkbox"||dt==="radio")}function Ua(et){var dt=Ta(et)?"checked":"value",kt=Object.getOwnPropertyDescriptor(et.constructor.prototype,dt),$t=""+et[dt];if(!et.hasOwnProperty(dt)&&typeof kt<"u"&&typeof kt.get=="function"&&typeof kt.set=="function"){var Tt=kt.get,Dt=kt.set;return Object.defineProperty(et,dt,{configurable:!0,get:function(){return Tt.call(this)},set:function(Ft){$t=""+Ft,Dt.call(this,Ft)}}),Object.defineProperty(et,dt,{enumerable:kt.enumerable}),{getValue:function(){return $t},setValue:function(Ft){$t=""+Ft},stopTracking:function(){et._valueTracker=null,delete et[dt]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var dt=et._valueTracker;if(!dt)return!0;var kt=dt.getValue(),$t="";return et&&($t=Ta(et)?et.checked?"true":"false":et.value),et=$t,et!==kt?(dt.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,dt){var kt=dt.checked;return A$7({},dt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:kt??et._wrapperState.initialChecked})}function Za(et,dt){var kt=dt.defaultValue==null?"":dt.defaultValue,$t=dt.checked!=null?dt.checked:dt.defaultChecked;kt=Sa(dt.value!=null?dt.value:kt),et._wrapperState={initialChecked:$t,initialValue:kt,controlled:dt.type==="checkbox"||dt.type==="radio"?dt.checked!=null:dt.value!=null}}function ab(et,dt){dt=dt.checked,dt!=null&&ta$1(et,"checked",dt,!1)}function bb(et,dt){ab(et,dt);var kt=Sa(dt.value),$t=dt.type;if(kt!=null)$t==="number"?(kt===0&&et.value===""||et.value!=kt)&&(et.value=""+kt):et.value!==""+kt&&(et.value=""+kt);else if($t==="submit"||$t==="reset"){et.removeAttribute("value");return}dt.hasOwnProperty("value")?cb(et,dt.type,kt):dt.hasOwnProperty("defaultValue")&&cb(et,dt.type,Sa(dt.defaultValue)),dt.checked==null&&dt.defaultChecked!=null&&(et.defaultChecked=!!dt.defaultChecked)}function db(et,dt,kt){if(dt.hasOwnProperty("value")||dt.hasOwnProperty("defaultValue")){var $t=dt.type;if(!($t!=="submit"&&$t!=="reset"||dt.value!==void 0&&dt.value!==null))return;dt=""+et._wrapperState.initialValue,kt||dt===et.value||(et.value=dt),et.defaultValue=dt}kt=et.name,kt!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,kt!==""&&(et.name=kt)}function cb(et,dt,kt){(dt!=="number"||Xa(et.ownerDocument)!==et)&&(kt==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+kt&&(et.defaultValue=""+kt))}var eb=Array.isArray;function fb(et,dt,kt,$t){if(et=et.options,dt){dt={};for(var Tt=0;Tt<kt.length;Tt++)dt["$"+kt[Tt]]=!0;for(kt=0;kt<et.length;kt++)Tt=dt.hasOwnProperty("$"+et[kt].value),et[kt].selected!==Tt&&(et[kt].selected=Tt),Tt&&$t&&(et[kt].defaultSelected=!0)}else{for(kt=""+Sa(kt),dt=null,Tt=0;Tt<et.length;Tt++){if(et[Tt].value===kt){et[Tt].selected=!0,$t&&(et[Tt].defaultSelected=!0);return}dt!==null||et[Tt].disabled||(dt=et[Tt])}dt!==null&&(dt.selected=!0)}}function gb(et,dt){if(dt.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$7({},dt,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,dt){var kt=dt.value;if(kt==null){if(kt=dt.children,dt=dt.defaultValue,kt!=null){if(dt!=null)throw Error(p$4(92));if(eb(kt)){if(1<kt.length)throw Error(p$4(93));kt=kt[0]}dt=kt}dt==null&&(dt=""),kt=dt}et._wrapperState={initialValue:Sa(kt)}}function ib(et,dt){var kt=Sa(dt.value),$t=Sa(dt.defaultValue);kt!=null&&(kt=""+kt,kt!==et.value&&(et.value=kt),dt.defaultValue==null&&et.defaultValue!==kt&&(et.defaultValue=kt)),$t!=null&&(et.defaultValue=""+$t)}function jb(et){var dt=et.textContent;dt===et._wrapperState.initialValue&&dt!==""&&dt!==null&&(et.value=dt)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,dt){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(dt):et==="http://www.w3.org/2000/svg"&&dt==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(dt,kt,$t,Tt){MSApp.execUnsafeLocalFunction(function(){return et(dt,kt,$t,Tt)})}:et}(function(et,dt){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=dt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+dt.valueOf().toString()+"</svg>",dt=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;dt.firstChild;)et.appendChild(dt.firstChild)}});function ob(et,dt){if(dt){var kt=et.firstChild;if(kt&&kt===et.lastChild&&kt.nodeType===3){kt.nodeValue=dt;return}}et.textContent=dt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(dt){dt=dt+et.charAt(0).toUpperCase()+et.substring(1),pb[dt]=pb[et]})});function rb(et,dt,kt){return dt==null||typeof dt=="boolean"||dt===""?"":kt||typeof dt!="number"||dt===0||pb.hasOwnProperty(et)&&pb[et]?(""+dt).trim():dt+"px"}function sb(et,dt){et=et.style;for(var kt in dt)if(dt.hasOwnProperty(kt)){var $t=kt.indexOf("--")===0,Tt=rb(kt,dt[kt],$t);kt==="float"&&(kt="cssFloat"),$t?et.setProperty(kt,Tt):et[kt]=Tt}}var tb=A$7({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,dt){if(dt){if(tb[et]&&(dt.children!=null||dt.dangerouslySetInnerHTML!=null))throw Error(p$4(137,et));if(dt.dangerouslySetInnerHTML!=null){if(dt.children!=null)throw Error(p$4(60));if(typeof dt.dangerouslySetInnerHTML!="object"||!("__html"in dt.dangerouslySetInnerHTML))throw Error(p$4(61))}if(dt.style!=null&&typeof dt.style!="object")throw Error(p$4(62))}}function vb(et,dt){if(et.indexOf("-")===-1)return typeof dt.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$4(280));var dt=et.stateNode;dt&&(dt=Db(dt),yb(et.stateNode,et.type,dt))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,dt=Ab;if(Ab=zb=null,Bb(et),dt)for(et=0;et<dt.length;et++)Bb(dt[et])}}function Gb(et,dt){return et(dt)}function Hb(){}var Ib=!1;function Jb(et,dt,kt){if(Ib)return et(dt,kt);Ib=!0;try{return Gb(et,dt,kt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,dt){var kt=et.stateNode;if(kt===null)return null;var $t=Db(kt);if($t===null)return null;kt=$t[dt];e:switch(dt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":($t=!$t.disabled)||(et=et.type,$t=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!$t;break e;default:et=!1}if(et)return null;if(kt&&typeof kt!="function")throw Error(p$4(231,dt,typeof kt));return kt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){var Kt=Array.prototype.slice.call(arguments,3);try{dt.apply(kt,Kt)}catch(Yt){this.onError(Yt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){if(Tb.apply(this,arguments),Ob){if(Ob){var Kt=Pb;Ob=!1,Pb=null}else throw Error(p$4(198));Qb||(Qb=!0,Rb=Kt)}}function Vb(et){var dt=et,kt=et;if(et.alternate)for(;dt.return;)dt=dt.return;else{et=dt;do dt=et,dt.flags&4098&&(kt=dt.return),et=dt.return;while(et)}return dt.tag===3?kt:null}function Wb(et){if(et.tag===13){var dt=et.memoizedState;if(dt===null&&(et=et.alternate,et!==null&&(dt=et.memoizedState)),dt!==null)return dt.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$4(188))}function Yb(et){var dt=et.alternate;if(!dt){if(dt=Vb(et),dt===null)throw Error(p$4(188));return dt!==et?null:et}for(var kt=et,$t=dt;;){var Tt=kt.return;if(Tt===null)break;var Dt=Tt.alternate;if(Dt===null){if($t=Tt.return,$t!==null){kt=$t;continue}break}if(Tt.child===Dt.child){for(Dt=Tt.child;Dt;){if(Dt===kt)return Xb(Tt),et;if(Dt===$t)return Xb(Tt),dt;Dt=Dt.sibling}throw Error(p$4(188))}if(kt.return!==$t.return)kt=Tt,$t=Dt;else{for(var Ft=!1,Ut=Tt.child;Ut;){if(Ut===kt){Ft=!0,kt=Tt,$t=Dt;break}if(Ut===$t){Ft=!0,$t=Tt,kt=Dt;break}Ut=Ut.sibling}if(!Ft){for(Ut=Dt.child;Ut;){if(Ut===kt){Ft=!0,kt=Dt,$t=Tt;break}if(Ut===$t){Ft=!0,$t=Dt,kt=Tt;break}Ut=Ut.sibling}if(!Ft)throw Error(p$4(189))}}if(kt.alternate!==$t)throw Error(p$4(190))}if(kt.tag!==3)throw Error(p$4(188));return kt.stateNode.current===kt?et:dt}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var dt=$b(et);if(dt!==null)return dt;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$5=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,dt){var kt=et.pendingLanes;if(kt===0)return 0;var $t=0,Tt=et.suspendedLanes,Dt=et.pingedLanes,Ft=kt&268435455;if(Ft!==0){var Ut=Ft&~Tt;Ut!==0?$t=tc(Ut):(Dt&=Ft,Dt!==0&&($t=tc(Dt)))}else Ft=kt&~Tt,Ft!==0?$t=tc(Ft):Dt!==0&&($t=tc(Dt));if($t===0)return 0;if(dt!==0&&dt!==$t&&!(dt&Tt)&&(Tt=$t&-$t,Dt=dt&-dt,Tt>=Dt||Tt===16&&(Dt&4194240)!==0))return dt;if($t&4&&($t|=kt&16),dt=et.entangledLanes,dt!==0)for(et=et.entanglements,dt&=$t;0<dt;)kt=31-oc(dt),Tt=1<<kt,$t|=et[kt],dt&=~Tt;return $t}function vc(et,dt){switch(et){case 1:case 2:case 4:return dt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return dt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,dt){for(var kt=et.suspendedLanes,$t=et.pingedLanes,Tt=et.expirationTimes,Dt=et.pendingLanes;0<Dt;){var Ft=31-oc(Dt),Ut=1<<Ft,Ht=Tt[Ft];Ht===-1?(!(Ut&kt)||Ut&$t)&&(Tt[Ft]=vc(Ut,dt)):Ht<=dt&&(et.expiredLanes|=Ut),Dt&=~Ut}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var dt=[],kt=0;31>kt;kt++)dt.push(et);return dt}function Ac(et,dt,kt){et.pendingLanes|=dt,dt!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,dt=31-oc(dt),et[dt]=kt}function Bc(et,dt){var kt=et.pendingLanes&~dt;et.pendingLanes=dt,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=dt,et.mutableReadLanes&=dt,et.entangledLanes&=dt,dt=et.entanglements;var $t=et.eventTimes;for(et=et.expirationTimes;0<kt;){var Tt=31-oc(kt),Dt=1<<Tt;dt[Tt]=0,$t[Tt]=-1,et[Tt]=-1,kt&=~Dt}}function Cc(et,dt){var kt=et.entangledLanes|=dt;for(et=et.entanglements;kt;){var $t=31-oc(kt),Tt=1<<$t;Tt&dt|et[$t]&dt&&(et[$t]|=dt),kt&=~Tt}}var C$8=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,dt){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(dt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(dt.pointerId)}}function Tc(et,dt,kt,$t,Tt,Dt){return et===null||et.nativeEvent!==Dt?(et={blockedOn:dt,domEventName:kt,eventSystemFlags:$t,nativeEvent:Dt,targetContainers:[Tt]},dt!==null&&(dt=Cb(dt),dt!==null&&Fc(dt)),et):(et.eventSystemFlags|=$t,dt=et.targetContainers,Tt!==null&&dt.indexOf(Tt)===-1&&dt.push(Tt),et)}function Uc(et,dt,kt,$t,Tt){switch(dt){case"focusin":return Lc=Tc(Lc,et,dt,kt,$t,Tt),!0;case"dragenter":return Mc=Tc(Mc,et,dt,kt,$t,Tt),!0;case"mouseover":return Nc=Tc(Nc,et,dt,kt,$t,Tt),!0;case"pointerover":var Dt=Tt.pointerId;return Oc.set(Dt,Tc(Oc.get(Dt)||null,et,dt,kt,$t,Tt)),!0;case"gotpointercapture":return Dt=Tt.pointerId,Pc.set(Dt,Tc(Pc.get(Dt)||null,et,dt,kt,$t,Tt)),!0}return!1}function Vc(et){var dt=Wc(et.target);if(dt!==null){var kt=Vb(dt);if(kt!==null){if(dt=kt.tag,dt===13){if(dt=Wb(kt),dt!==null){et.blockedOn=dt,Ic(et.priority,function(){Gc(kt)});return}}else if(dt===3&&kt.stateNode.current.memoizedState.isDehydrated){et.blockedOn=kt.tag===3?kt.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var dt=et.targetContainers;0<dt.length;){var kt=Yc(et.domEventName,et.eventSystemFlags,dt[0],et.nativeEvent);if(kt===null){kt=et.nativeEvent;var $t=new kt.constructor(kt.type,kt);wb=$t,kt.target.dispatchEvent($t),wb=null}else return dt=Cb(kt),dt!==null&&Fc(dt),et.blockedOn=kt,!1;dt.shift()}return!0}function Zc(et,dt,kt){Xc(et)&&kt.delete(dt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,dt){et.blockedOn===dt&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function dt(Tt){return ad(Tt,et)}if(0<Kc.length){ad(Kc[0],et);for(var kt=1;kt<Kc.length;kt++){var $t=Kc[kt];$t.blockedOn===et&&($t.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(dt),Pc.forEach(dt),kt=0;kt<Qc.length;kt++)$t=Qc[kt],$t.blockedOn===et&&($t.blockedOn=null);for(;0<Qc.length&&(kt=Qc[0],kt.blockedOn===null);)Vc(kt),kt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,dt,kt,$t){var Tt=C$8,Dt=cd.transition;cd.transition=null;try{C$8=1,fd(et,dt,kt,$t)}finally{C$8=Tt,cd.transition=Dt}}function gd(et,dt,kt,$t){var Tt=C$8,Dt=cd.transition;cd.transition=null;try{C$8=4,fd(et,dt,kt,$t)}finally{C$8=Tt,cd.transition=Dt}}function fd(et,dt,kt,$t){if(dd){var Tt=Yc(et,dt,kt,$t);if(Tt===null)hd(et,dt,$t,id$2,kt),Sc(et,$t);else if(Uc(Tt,et,dt,kt,$t))$t.stopPropagation();else if(Sc(et,$t),dt&4&&-1<Rc.indexOf(et)){for(;Tt!==null;){var Dt=Cb(Tt);if(Dt!==null&&Ec(Dt),Dt=Yc(et,dt,kt,$t),Dt===null&&hd(et,dt,$t,id$2,kt),Dt===Tt)break;Tt=Dt}Tt!==null&&$t.stopPropagation()}else hd(et,dt,$t,null,kt)}}var id$2=null;function Yc(et,dt,kt,$t){if(id$2=null,et=xb($t),et=Wc(et),et!==null)if(dt=Vb(et),dt===null)et=null;else if(kt=dt.tag,kt===13){if(et=Wb(dt),et!==null)return et;et=null}else if(kt===3){if(dt.stateNode.current.memoizedState.isDehydrated)return dt.tag===3?dt.stateNode.containerInfo:null;et=null}else dt!==et&&(et=null);return id$2=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,dt=ld,kt=dt.length,$t,Tt="value"in kd?kd.value:kd.textContent,Dt=Tt.length;for(et=0;et<kt&&dt[et]===Tt[et];et++);var Ft=kt-et;for($t=1;$t<=Ft&&dt[kt-$t]===Tt[Dt-$t];$t++);return md=Tt.slice(et,1<$t?1-$t:void 0)}function od(et){var dt=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&dt===13&&(et=13)):et=dt,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function dt(kt,$t,Tt,Dt,Ft){this._reactName=kt,this._targetInst=Tt,this.type=$t,this.nativeEvent=Dt,this.target=Ft,this.currentTarget=null;for(var Ut in et)et.hasOwnProperty(Ut)&&(kt=et[Ut],this[Ut]=kt?kt(Dt):Dt[Ut]);return this.isDefaultPrevented=(Dt.defaultPrevented!=null?Dt.defaultPrevented:Dt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$7(dt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var kt=this.nativeEvent;kt&&(kt.preventDefault?kt.preventDefault():typeof kt.returnValue!="unknown"&&(kt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var kt=this.nativeEvent;kt&&(kt.stopPropagation?kt.stopPropagation():typeof kt.cancelBubble!="unknown"&&(kt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),dt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$7({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$7({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$7({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$7({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$7({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$7({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$7({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var dt=this.nativeEvent;return dt.getModifierState?dt.getModifierState(et):(et=Od[et])?!!dt[et]:!1}function zd(){return Pd}var Qd=A$7({},ud,{key:function(et){if(et.key){var dt=Md[et.key]||et.key;if(dt!=="Unidentified")return dt}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$7({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$7({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$7({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$7({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$2=ia&&"TextEvent"in window&&!be$2,de$3=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$3=!1;function ge$2(et,dt){switch(et){case"keyup":return $d.indexOf(dt.keyCode)!==-1;case"keydown":return dt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie$3=!1;function je$1(et,dt){switch(et){case"compositionend":return he$2(dt);case"keypress":return dt.which!==32?null:(fe$3=!0,ee$1);case"textInput":return et=dt.data,et===ee$1&&fe$3?null:et;default:return null}}function ke$2(et,dt){if(ie$3)return et==="compositionend"||!ae$2&&ge$2(et,dt)?(et=nd(),md=ld=kd=null,ie$3=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(dt.ctrlKey||dt.altKey||dt.metaKey)||dt.ctrlKey&&dt.altKey){if(dt.char&&1<dt.char.length)return dt.char;if(dt.which)return String.fromCharCode(dt.which)}return null;case"compositionend":return de$3&&dt.locale!=="ko"?null:dt.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$3(et){var dt=et&&et.nodeName&&et.nodeName.toLowerCase();return dt==="input"?!!le$2[et.type]:dt==="textarea"}function ne$2(et,dt,kt,$t){Eb($t),dt=oe$1(dt,"onChange"),0<dt.length&&(kt=new td("onChange","change",null,kt,$t),et.push({event:kt,listeners:dt}))}var pe$2=null,qe$1=null;function re$2(et){se$2(et,0)}function te$2(et){var dt=ue$3(et);if(Wa(dt))return et}function ve$2(et,dt){if(et==="change")return dt}var we$1=!1;if(ia){var xe$1;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$1=ye$2}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$1),qe$1=pe$2=null)}function Be$1(et){if(et.propertyName==="value"&&te$2(qe$1)){var dt=[];ne$2(dt,qe$1,et,xb(et)),Jb(re$2,dt)}}function Ce$2(et,dt,kt){et==="focusin"?(Ae$2(),pe$2=dt,qe$1=kt,pe$2.attachEvent("onpropertychange",Be$1)):et==="focusout"&&Ae$2()}function De$3(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te$2(qe$1)}function Ee$1(et,dt){if(et==="click")return te$2(dt)}function Fe$3(et,dt){if(et==="input"||et==="change")return te$2(dt)}function Ge$1(et,dt){return et===dt&&(et!==0||1/et===1/dt)||et!==et&&dt!==dt}var He$3=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(et,dt){if(He$3(et,dt))return!0;if(typeof et!="object"||et===null||typeof dt!="object"||dt===null)return!1;var kt=Object.keys(et),$t=Object.keys(dt);if(kt.length!==$t.length)return!1;for($t=0;$t<kt.length;$t++){var Tt=kt[$t];if(!ja.call(dt,Tt)||!He$3(et[Tt],dt[Tt]))return!1}return!0}function Je$1(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke$1(et,dt){var kt=Je$1(et);et=0;for(var $t;kt;){if(kt.nodeType===3){if($t=et+kt.textContent.length,et<=dt&&$t>=dt)return{node:kt,offset:dt-et};et=$t}e:{for(;kt;){if(kt.nextSibling){kt=kt.nextSibling;break e}kt=kt.parentNode}kt=void 0}kt=Je$1(kt)}}function Le$2(et,dt){return et&&dt?et===dt?!0:et&&et.nodeType===3?!1:dt&&dt.nodeType===3?Le$2(et,dt.parentNode):"contains"in et?et.contains(dt):et.compareDocumentPosition?!!(et.compareDocumentPosition(dt)&16):!1:!1}function Me$2(){for(var et=window,dt=Xa();dt instanceof et.HTMLIFrameElement;){try{var kt=typeof dt.contentWindow.location.href=="string"}catch{kt=!1}if(kt)et=dt.contentWindow;else break;dt=Xa(et.document)}return dt}function Ne(et){var dt=et&&et.nodeName&&et.nodeName.toLowerCase();return dt&&(dt==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||dt==="textarea"||et.contentEditable==="true")}function Oe$1(et){var dt=Me$2(),kt=et.focusedElem,$t=et.selectionRange;if(dt!==kt&&kt&&kt.ownerDocument&&Le$2(kt.ownerDocument.documentElement,kt)){if($t!==null&&Ne(kt)){if(dt=$t.start,et=$t.end,et===void 0&&(et=dt),"selectionStart"in kt)kt.selectionStart=dt,kt.selectionEnd=Math.min(et,kt.value.length);else if(et=(dt=kt.ownerDocument||document)&&dt.defaultView||window,et.getSelection){et=et.getSelection();var Tt=kt.textContent.length,Dt=Math.min($t.start,Tt);$t=$t.end===void 0?Dt:Math.min($t.end,Tt),!et.extend&&Dt>$t&&(Tt=$t,$t=Dt,Dt=Tt),Tt=Ke$1(kt,Dt);var Ft=Ke$1(kt,$t);Tt&&Ft&&(et.rangeCount!==1||et.anchorNode!==Tt.node||et.anchorOffset!==Tt.offset||et.focusNode!==Ft.node||et.focusOffset!==Ft.offset)&&(dt=dt.createRange(),dt.setStart(Tt.node,Tt.offset),et.removeAllRanges(),Dt>$t?(et.addRange(dt),et.extend(Ft.node,Ft.offset)):(dt.setEnd(Ft.node,Ft.offset),et.addRange(dt)))}}for(dt=[],et=kt;et=et.parentNode;)et.nodeType===1&&dt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof kt.focus=="function"&&kt.focus(),kt=0;kt<dt.length;kt++)et=dt[kt],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$2=null,Se$2=null,Te$3=!1;function Ue$1(et,dt,kt){var $t=kt.window===kt?kt.document:kt.nodeType===9?kt:kt.ownerDocument;Te$3||Qe$1==null||Qe$1!==Xa($t)||($t=Qe$1,"selectionStart"in $t&&Ne($t)?$t={start:$t.selectionStart,end:$t.selectionEnd}:($t=($t.ownerDocument&&$t.ownerDocument.defaultView||window).getSelection(),$t={anchorNode:$t.anchorNode,anchorOffset:$t.anchorOffset,focusNode:$t.focusNode,focusOffset:$t.focusOffset}),Se$2&&Ie$2(Se$2,$t)||(Se$2=$t,$t=oe$1(Re$2,"onSelect"),0<$t.length&&(dt=new td("onSelect","select",null,dt,kt),et.push({event:dt,listeners:$t}),dt.target=Qe$1)))}function Ve$2(et,dt){var kt={};return kt[et.toLowerCase()]=dt.toLowerCase(),kt["Webkit"+et]="webkit"+dt,kt["Moz"+et]="moz"+dt,kt}var We$2={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$2={},Ye$2={};ia&&(Ye$2=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze(et){if(Xe$2[et])return Xe$2[et];if(!We$2[et])return et;var dt=We$2[et],kt;for(kt in dt)if(dt.hasOwnProperty(kt)&&kt in Ye$2)return Xe$2[et]=dt[kt];return et}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,dt){df.set(et,dt),fa(dt,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,dt,kt){var $t=et.type||"unknown-event";et.currentTarget=kt,Ub($t,dt,void 0,et),et.currentTarget=null}function se$2(et,dt){dt=(dt&4)!==0;for(var kt=0;kt<et.length;kt++){var $t=et[kt],Tt=$t.event;$t=$t.listeners;e:{var Dt=void 0;if(dt)for(var Ft=$t.length-1;0<=Ft;Ft--){var Ut=$t[Ft],Ht=Ut.instance,Kt=Ut.currentTarget;if(Ut=Ut.listener,Ht!==Dt&&Tt.isPropagationStopped())break e;nf(Tt,Ut,Kt),Dt=Ht}else for(Ft=0;Ft<$t.length;Ft++){if(Ut=$t[Ft],Ht=Ut.instance,Kt=Ut.currentTarget,Ut=Ut.listener,Ht!==Dt&&Tt.isPropagationStopped())break e;nf(Tt,Ut,Kt),Dt=Ht}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$4(et,dt){var kt=dt[of];kt===void 0&&(kt=dt[of]=new Set);var $t=et+"__bubble";kt.has($t)||(pf(dt,et,2,!1),kt.add($t))}function qf(et,dt,kt){var $t=0;dt&&($t|=4),pf(kt,et,$t,dt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(kt){kt!=="selectionchange"&&(mf.has(kt)||qf(kt,!1,et),qf(kt,!0,et))});var dt=et.nodeType===9?et:et.ownerDocument;dt===null||dt[rf]||(dt[rf]=!0,qf("selectionchange",!1,dt))}}function pf(et,dt,kt,$t){switch(jd(dt)){case 1:var Tt=ed;break;case 4:Tt=gd;break;default:Tt=fd}kt=Tt.bind(null,dt,kt,et),Tt=void 0,!Lb||dt!=="touchstart"&&dt!=="touchmove"&&dt!=="wheel"||(Tt=!0),$t?Tt!==void 0?et.addEventListener(dt,kt,{capture:!0,passive:Tt}):et.addEventListener(dt,kt,!0):Tt!==void 0?et.addEventListener(dt,kt,{passive:Tt}):et.addEventListener(dt,kt,!1)}function hd(et,dt,kt,$t,Tt){var Dt=$t;if(!(dt&1)&&!(dt&2)&&$t!==null)e:for(;;){if($t===null)return;var Ft=$t.tag;if(Ft===3||Ft===4){var Ut=$t.stateNode.containerInfo;if(Ut===Tt||Ut.nodeType===8&&Ut.parentNode===Tt)break;if(Ft===4)for(Ft=$t.return;Ft!==null;){var Ht=Ft.tag;if((Ht===3||Ht===4)&&(Ht=Ft.stateNode.containerInfo,Ht===Tt||Ht.nodeType===8&&Ht.parentNode===Tt))return;Ft=Ft.return}for(;Ut!==null;){if(Ft=Wc(Ut),Ft===null)return;if(Ht=Ft.tag,Ht===5||Ht===6){$t=Dt=Ft;continue e}Ut=Ut.parentNode}}$t=$t.return}Jb(function(){var Kt=Dt,Yt=xb(kt),Jt=[];e:{var Zt=df.get(et);if(Zt!==void 0){var er=td,rr=et;switch(et){case"keypress":if(od(kt)===0)break e;case"keydown":case"keyup":er=Rd;break;case"focusin":rr="focus",er=Fd;break;case"focusout":rr="blur",er=Fd;break;case"beforeblur":case"afterblur":er=Fd;break;case"click":if(kt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":er=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":er=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":er=Vd;break;case $e$1:case af:case bf:er=Hd;break;case cf:er=Xd;break;case"scroll":er=vd;break;case"wheel":er=Zd;break;case"copy":case"cut":case"paste":er=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":er=Td}var sr=(dt&4)!==0,nr=!sr&&et==="scroll",ir=sr?Zt!==null?Zt+"Capture":null:Zt;sr=[];for(var lr=Kt,or;lr!==null;){or=lr;var cr=or.stateNode;if(or.tag===5&&cr!==null&&(or=cr,ir!==null&&(cr=Kb(lr,ir),cr!=null&&sr.push(tf(lr,cr,or)))),nr)break;lr=lr.return}0<sr.length&&(Zt=new er(Zt,rr,null,kt,Yt),Jt.push({event:Zt,listeners:sr}))}}if(!(dt&7)){e:{if(Zt=et==="mouseover"||et==="pointerover",er=et==="mouseout"||et==="pointerout",Zt&&kt!==wb&&(rr=kt.relatedTarget||kt.fromElement)&&(Wc(rr)||rr[uf]))break e;if((er||Zt)&&(Zt=Yt.window===Yt?Yt:(Zt=Yt.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,er?(rr=kt.relatedTarget||kt.toElement,er=Kt,rr=rr?Wc(rr):null,rr!==null&&(nr=Vb(rr),rr!==nr||rr.tag!==5&&rr.tag!==6)&&(rr=null)):(er=null,rr=Kt),er!==rr)){if(sr=Bd,cr="onMouseLeave",ir="onMouseEnter",lr="mouse",(et==="pointerout"||et==="pointerover")&&(sr=Td,cr="onPointerLeave",ir="onPointerEnter",lr="pointer"),nr=er==null?Zt:ue$3(er),or=rr==null?Zt:ue$3(rr),Zt=new sr(cr,lr+"leave",er,kt,Yt),Zt.target=nr,Zt.relatedTarget=or,cr=null,Wc(Yt)===Kt&&(sr=new sr(ir,lr+"enter",rr,kt,Yt),sr.target=or,sr.relatedTarget=nr,cr=sr),nr=cr,er&&rr)t:{for(sr=er,ir=rr,lr=0,or=sr;or;or=vf(or))lr++;for(or=0,cr=ir;cr;cr=vf(cr))or++;for(;0<lr-or;)sr=vf(sr),lr--;for(;0<or-lr;)ir=vf(ir),or--;for(;lr--;){if(sr===ir||ir!==null&&sr===ir.alternate)break t;sr=vf(sr),ir=vf(ir)}sr=null}else sr=null;er!==null&&wf(Jt,Zt,er,sr,!1),rr!==null&&nr!==null&&wf(Jt,nr,rr,sr,!0)}}e:{if(Zt=Kt?ue$3(Kt):window,er=Zt.nodeName&&Zt.nodeName.toLowerCase(),er==="select"||er==="input"&&Zt.type==="file")var dr=ve$2;else if(me$3(Zt))if(we$1)dr=Fe$3;else{dr=De$3;var ur=Ce$2}else(er=Zt.nodeName)&&er.toLowerCase()==="input"&&(Zt.type==="checkbox"||Zt.type==="radio")&&(dr=Ee$1);if(dr&&(dr=dr(et,Kt))){ne$2(Jt,dr,kt,Yt);break e}ur&&ur(et,Zt,Kt),et==="focusout"&&(ur=Zt._wrapperState)&&ur.controlled&&Zt.type==="number"&&cb(Zt,"number",Zt.value)}switch(ur=Kt?ue$3(Kt):window,et){case"focusin":(me$3(ur)||ur.contentEditable==="true")&&(Qe$1=ur,Re$2=Kt,Se$2=null);break;case"focusout":Se$2=Re$2=Qe$1=null;break;case"mousedown":Te$3=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$3=!1,Ue$1(Jt,kt,Yt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$1(Jt,kt,Yt)}var pr;if(ae$2)e:{switch(et){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else ie$3?ge$2(et,kt)&&(mr="onCompositionEnd"):et==="keydown"&&kt.keyCode===229&&(mr="onCompositionStart");mr&&(de$3&&kt.locale!=="ko"&&(ie$3||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&ie$3&&(pr=nd()):(kd=Yt,ld="value"in kd?kd.value:kd.textContent,ie$3=!0)),ur=oe$1(Kt,mr),0<ur.length&&(mr=new Ld(mr,et,null,kt,Yt),Jt.push({event:mr,listeners:ur}),pr?mr.data=pr:(pr=he$2(kt),pr!==null&&(mr.data=pr)))),(pr=ce$2?je$1(et,kt):ke$2(et,kt))&&(Kt=oe$1(Kt,"onBeforeInput"),0<Kt.length&&(Yt=new Ld("onBeforeInput","beforeinput",null,kt,Yt),Jt.push({event:Yt,listeners:Kt}),Yt.data=pr))}se$2(Jt,dt)})}function tf(et,dt,kt){return{instance:et,listener:dt,currentTarget:kt}}function oe$1(et,dt){for(var kt=dt+"Capture",$t=[];et!==null;){var Tt=et,Dt=Tt.stateNode;Tt.tag===5&&Dt!==null&&(Tt=Dt,Dt=Kb(et,kt),Dt!=null&&$t.unshift(tf(et,Dt,Tt)),Dt=Kb(et,dt),Dt!=null&&$t.push(tf(et,Dt,Tt))),et=et.return}return $t}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,dt,kt,$t,Tt){for(var Dt=dt._reactName,Ft=[];kt!==null&&kt!==$t;){var Ut=kt,Ht=Ut.alternate,Kt=Ut.stateNode;if(Ht!==null&&Ht===$t)break;Ut.tag===5&&Kt!==null&&(Ut=Kt,Tt?(Ht=Kb(kt,Dt),Ht!=null&&Ft.unshift(tf(kt,Ht,Ut))):Tt||(Ht=Kb(kt,Dt),Ht!=null&&Ft.push(tf(kt,Ht,Ut)))),kt=kt.return}Ft.length!==0&&et.push({event:dt,listeners:Ft})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,dt,kt){if(dt=zf(dt),zf(et)!==dt&&kt)throw Error(p$4(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,dt){return et==="textarea"||et==="noscript"||typeof dt.children=="string"||typeof dt.children=="number"||typeof dt.dangerouslySetInnerHTML=="object"&&dt.dangerouslySetInnerHTML!==null&&dt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,dt){var kt=dt,$t=0;do{var Tt=kt.nextSibling;if(et.removeChild(kt),Tt&&Tt.nodeType===8)if(kt=Tt.data,kt==="/$"){if($t===0){et.removeChild(Tt),bd(dt);return}$t--}else kt!=="$"&&kt!=="$?"&&kt!=="$!"||$t++;kt=Tt}while(kt);bd(dt)}function Lf(et){for(;et!=null;et=et.nextSibling){var dt=et.nodeType;if(dt===1||dt===3)break;if(dt===8){if(dt=et.data,dt==="$"||dt==="$!"||dt==="$?")break;if(dt==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var dt=0;et;){if(et.nodeType===8){var kt=et.data;if(kt==="$"||kt==="$!"||kt==="$?"){if(dt===0)return et;dt--}else kt==="/$"&&dt++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var dt=et[Of];if(dt)return dt;for(var kt=et.parentNode;kt;){if(dt=kt[uf]||kt[Of]){if(kt=dt.alternate,dt.child!==null||kt!==null&&kt.child!==null)for(et=Mf(et);et!==null;){if(kt=et[Of])return kt;et=Mf(et)}return dt}et=kt,kt=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue$3(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$4(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E$7(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$3(et,dt){Tf++,Sf[Tf]=et.current,et.current=dt}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,dt){var kt=et.type.contextTypes;if(!kt)return Vf;var $t=et.stateNode;if($t&&$t.__reactInternalMemoizedUnmaskedChildContext===dt)return $t.__reactInternalMemoizedMaskedChildContext;var Tt={},Dt;for(Dt in kt)Tt[Dt]=dt[Dt];return $t&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=dt,et.__reactInternalMemoizedMaskedChildContext=Tt),Tt}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E$7(Wf),E$7(H$2)}function ag(et,dt,kt){if(H$2.current!==Vf)throw Error(p$4(168));G$3(H$2,dt),G$3(Wf,kt)}function bg(et,dt,kt){var $t=et.stateNode;if(dt=dt.childContextTypes,typeof $t.getChildContext!="function")return kt;$t=$t.getChildContext();for(var Tt in $t)if(!(Tt in dt))throw Error(p$4(108,Ra(et)||"Unknown",Tt));return A$7({},kt,$t)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$3(H$2,et),G$3(Wf,Wf.current),!0}function dg(et,dt,kt){var $t=et.stateNode;if(!$t)throw Error(p$4(169));kt?(et=bg(et,dt,Xf),$t.__reactInternalMemoizedMergedChildContext=et,E$7(Wf),E$7(H$2),G$3(H$2,et)):E$7(Wf),G$3(Wf,kt)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,dt=C$8;try{var kt=eg;for(C$8=1;et<kt.length;et++){var $t=kt[et];do $t=$t(!0);while($t!==null)}eg=null,fg=!1}catch(Tt){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),Tt}finally{C$8=dt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,dt){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=dt}function ug(et,dt,kt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var $t=rg;et=sg;var Tt=32-oc($t)-1;$t&=~(1<<Tt),kt+=1;var Dt=32-oc(dt)+Tt;if(30<Dt){var Ft=Tt-Tt%5;Dt=($t&(1<<Ft)-1).toString(32),$t>>=Ft,Tt-=Ft,rg=1<<32-oc(dt)+Tt|kt<<Tt|$t,sg=Dt+et}else rg=1<<Dt|kt<<Tt|$t,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(et,dt){var kt=Bg(5,null,null,0);kt.elementType="DELETED",kt.stateNode=dt,kt.return=et,dt=et.deletions,dt===null?(et.deletions=[kt],et.flags|=16):dt.push(kt)}function Cg(et,dt){switch(et.tag){case 5:var kt=et.type;return dt=dt.nodeType!==1||kt.toLowerCase()!==dt.nodeName.toLowerCase()?null:dt,dt!==null?(et.stateNode=dt,xg=et,yg=Lf(dt.firstChild),!0):!1;case 6:return dt=et.pendingProps===""||dt.nodeType!==3?null:dt,dt!==null?(et.stateNode=dt,xg=et,yg=null,!0):!1;case 13:return dt=dt.nodeType!==8?null:dt,dt!==null?(kt=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:dt,treeContext:kt,retryLane:1073741824},kt=Bg(18,null,null,0),kt.stateNode=dt,kt.return=et,et.child=kt,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$4){var dt=yg;if(dt){var kt=dt;if(!Cg(et,dt)){if(Dg(et))throw Error(p$4(418));dt=Lf(kt.nextSibling);var $t=xg;dt&&Cg(et,dt)?Ag($t,kt):(et.flags=et.flags&-4097|2,I$4=!1,xg=et)}}else{if(Dg(et))throw Error(p$4(418));et.flags=et.flags&-4097|2,I$4=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$4)return Fg(et),I$4=!0,!1;var dt;if((dt=et.tag!==3)&&!(dt=et.tag!==5)&&(dt=et.type,dt=dt!=="head"&&dt!=="body"&&!Ef(et.type,et.memoizedProps)),dt&&(dt=yg)){if(Dg(et))throw Hg(),Error(p$4(418));for(;dt;)Ag(et,dt),dt=Lf(dt.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$4(317));e:{for(et=et.nextSibling,dt=0;et;){if(et.nodeType===8){var kt=et.data;if(kt==="/$"){if(dt===0){yg=Lf(et.nextSibling);break e}dt--}else kt!=="$"&&kt!=="$!"&&kt!=="$?"||dt++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,dt,kt){if(et=kt.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(kt._owner){if(kt=kt._owner,kt){if(kt.tag!==1)throw Error(p$4(309));var $t=kt.stateNode}if(!$t)throw Error(p$4(147,et));var Tt=$t,Dt=""+et;return dt!==null&&dt.ref!==null&&typeof dt.ref=="function"&&dt.ref._stringRef===Dt?dt.ref:(dt=function(Ft){var Ut=Tt.refs;Ft===null?delete Ut[Dt]:Ut[Dt]=Ft},dt._stringRef=Dt,dt)}if(typeof et!="string")throw Error(p$4(284));if(!kt._owner)throw Error(p$4(290,et))}return et}function Mg(et,dt){throw et=Object.prototype.toString.call(dt),Error(p$4(31,et==="[object Object]"?"object with keys {"+Object.keys(dt).join(", ")+"}":et))}function Ng(et){var dt=et._init;return dt(et._payload)}function Og(et){function dt(ir,lr){if(et){var or=ir.deletions;or===null?(ir.deletions=[lr],ir.flags|=16):or.push(lr)}}function kt(ir,lr){if(!et)return null;for(;lr!==null;)dt(ir,lr),lr=lr.sibling;return null}function $t(ir,lr){for(ir=new Map;lr!==null;)lr.key!==null?ir.set(lr.key,lr):ir.set(lr.index,lr),lr=lr.sibling;return ir}function Tt(ir,lr){return ir=Pg(ir,lr),ir.index=0,ir.sibling=null,ir}function Dt(ir,lr,or){return ir.index=or,et?(or=ir.alternate,or!==null?(or=or.index,or<lr?(ir.flags|=2,lr):or):(ir.flags|=2,lr)):(ir.flags|=1048576,lr)}function Ft(ir){return et&&ir.alternate===null&&(ir.flags|=2),ir}function Ut(ir,lr,or,cr){return lr===null||lr.tag!==6?(lr=Qg(or,ir.mode,cr),lr.return=ir,lr):(lr=Tt(lr,or),lr.return=ir,lr)}function Ht(ir,lr,or,cr){var dr=or.type;return dr===ya?Yt(ir,lr,or.props.children,cr,or.key):lr!==null&&(lr.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ha&&Ng(dr)===lr.type)?(cr=Tt(lr,or.props),cr.ref=Lg(ir,lr,or),cr.return=ir,cr):(cr=Rg(or.type,or.key,or.props,null,ir.mode,cr),cr.ref=Lg(ir,lr,or),cr.return=ir,cr)}function Kt(ir,lr,or,cr){return lr===null||lr.tag!==4||lr.stateNode.containerInfo!==or.containerInfo||lr.stateNode.implementation!==or.implementation?(lr=Sg(or,ir.mode,cr),lr.return=ir,lr):(lr=Tt(lr,or.children||[]),lr.return=ir,lr)}function Yt(ir,lr,or,cr,dr){return lr===null||lr.tag!==7?(lr=Tg(or,ir.mode,cr,dr),lr.return=ir,lr):(lr=Tt(lr,or),lr.return=ir,lr)}function Jt(ir,lr,or){if(typeof lr=="string"&&lr!==""||typeof lr=="number")return lr=Qg(""+lr,ir.mode,or),lr.return=ir,lr;if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case va:return or=Rg(lr.type,lr.key,lr.props,null,ir.mode,or),or.ref=Lg(ir,null,lr),or.return=ir,or;case wa:return lr=Sg(lr,ir.mode,or),lr.return=ir,lr;case Ha:var cr=lr._init;return Jt(ir,cr(lr._payload),or)}if(eb(lr)||Ka(lr))return lr=Tg(lr,ir.mode,or,null),lr.return=ir,lr;Mg(ir,lr)}return null}function Zt(ir,lr,or,cr){var dr=lr!==null?lr.key:null;if(typeof or=="string"&&or!==""||typeof or=="number")return dr!==null?null:Ut(ir,lr,""+or,cr);if(typeof or=="object"&&or!==null){switch(or.$$typeof){case va:return or.key===dr?Ht(ir,lr,or,cr):null;case wa:return or.key===dr?Kt(ir,lr,or,cr):null;case Ha:return dr=or._init,Zt(ir,lr,dr(or._payload),cr)}if(eb(or)||Ka(or))return dr!==null?null:Yt(ir,lr,or,cr,null);Mg(ir,or)}return null}function er(ir,lr,or,cr,dr){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return ir=ir.get(or)||null,Ut(lr,ir,""+cr,dr);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case va:return ir=ir.get(cr.key===null?or:cr.key)||null,Ht(lr,ir,cr,dr);case wa:return ir=ir.get(cr.key===null?or:cr.key)||null,Kt(lr,ir,cr,dr);case Ha:var ur=cr._init;return er(ir,lr,or,ur(cr._payload),dr)}if(eb(cr)||Ka(cr))return ir=ir.get(or)||null,Yt(lr,ir,cr,dr,null);Mg(lr,cr)}return null}function rr(ir,lr,or,cr){for(var dr=null,ur=null,pr=lr,mr=lr=0,jr=null;pr!==null&&mr<or.length;mr++){pr.index>mr?(jr=pr,pr=null):jr=pr.sibling;var Rr=Zt(ir,pr,or[mr],cr);if(Rr===null){pr===null&&(pr=jr);break}et&&pr&&Rr.alternate===null&&dt(ir,pr),lr=Dt(Rr,lr,mr),ur===null?dr=Rr:ur.sibling=Rr,ur=Rr,pr=jr}if(mr===or.length)return kt(ir,pr),I$4&&tg(ir,mr),dr;if(pr===null){for(;mr<or.length;mr++)pr=Jt(ir,or[mr],cr),pr!==null&&(lr=Dt(pr,lr,mr),ur===null?dr=pr:ur.sibling=pr,ur=pr);return I$4&&tg(ir,mr),dr}for(pr=$t(ir,pr);mr<or.length;mr++)jr=er(pr,ir,mr,or[mr],cr),jr!==null&&(et&&jr.alternate!==null&&pr.delete(jr.key===null?mr:jr.key),lr=Dt(jr,lr,mr),ur===null?dr=jr:ur.sibling=jr,ur=jr);return et&&pr.forEach(function(br){return dt(ir,br)}),I$4&&tg(ir,mr),dr}function sr(ir,lr,or,cr){var dr=Ka(or);if(typeof dr!="function")throw Error(p$4(150));if(or=dr.call(or),or==null)throw Error(p$4(151));for(var ur=dr=null,pr=lr,mr=lr=0,jr=null,Rr=or.next();pr!==null&&!Rr.done;mr++,Rr=or.next()){pr.index>mr?(jr=pr,pr=null):jr=pr.sibling;var br=Zt(ir,pr,Rr.value,cr);if(br===null){pr===null&&(pr=jr);break}et&&pr&&br.alternate===null&&dt(ir,pr),lr=Dt(br,lr,mr),ur===null?dr=br:ur.sibling=br,ur=br,pr=jr}if(Rr.done)return kt(ir,pr),I$4&&tg(ir,mr),dr;if(pr===null){for(;!Rr.done;mr++,Rr=or.next())Rr=Jt(ir,Rr.value,cr),Rr!==null&&(lr=Dt(Rr,lr,mr),ur===null?dr=Rr:ur.sibling=Rr,ur=Rr);return I$4&&tg(ir,mr),dr}for(pr=$t(ir,pr);!Rr.done;mr++,Rr=or.next())Rr=er(pr,ir,mr,Rr.value,cr),Rr!==null&&(et&&Rr.alternate!==null&&pr.delete(Rr.key===null?mr:Rr.key),lr=Dt(Rr,lr,mr),ur===null?dr=Rr:ur.sibling=Rr,ur=Rr);return et&&pr.forEach(function(_r){return dt(ir,_r)}),I$4&&tg(ir,mr),dr}function nr(ir,lr,or,cr){if(typeof or=="object"&&or!==null&&or.type===ya&&or.key===null&&(or=or.props.children),typeof or=="object"&&or!==null){switch(or.$$typeof){case va:e:{for(var dr=or.key,ur=lr;ur!==null;){if(ur.key===dr){if(dr=or.type,dr===ya){if(ur.tag===7){kt(ir,ur.sibling),lr=Tt(ur,or.props.children),lr.return=ir,ir=lr;break e}}else if(ur.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ha&&Ng(dr)===ur.type){kt(ir,ur.sibling),lr=Tt(ur,or.props),lr.ref=Lg(ir,ur,or),lr.return=ir,ir=lr;break e}kt(ir,ur);break}else dt(ir,ur);ur=ur.sibling}or.type===ya?(lr=Tg(or.props.children,ir.mode,cr,or.key),lr.return=ir,ir=lr):(cr=Rg(or.type,or.key,or.props,null,ir.mode,cr),cr.ref=Lg(ir,lr,or),cr.return=ir,ir=cr)}return Ft(ir);case wa:e:{for(ur=or.key;lr!==null;){if(lr.key===ur)if(lr.tag===4&&lr.stateNode.containerInfo===or.containerInfo&&lr.stateNode.implementation===or.implementation){kt(ir,lr.sibling),lr=Tt(lr,or.children||[]),lr.return=ir,ir=lr;break e}else{kt(ir,lr);break}else dt(ir,lr);lr=lr.sibling}lr=Sg(or,ir.mode,cr),lr.return=ir,ir=lr}return Ft(ir);case Ha:return ur=or._init,nr(ir,lr,ur(or._payload),cr)}if(eb(or))return rr(ir,lr,or,cr);if(Ka(or))return sr(ir,lr,or,cr);Mg(ir,or)}return typeof or=="string"&&or!==""||typeof or=="number"?(or=""+or,lr!==null&&lr.tag===6?(kt(ir,lr.sibling),lr=Tt(lr,or),lr.return=ir,ir=lr):(kt(ir,lr),lr=Qg(or,ir.mode,cr),lr.return=ir,ir=lr),Ft(ir)):kt(ir,lr)}return nr}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(et){var dt=Wg.current;E$7(Wg),et._currentValue=dt}function bh(et,dt,kt){for(;et!==null;){var $t=et.alternate;if((et.childLanes&dt)!==dt?(et.childLanes|=dt,$t!==null&&($t.childLanes|=dt)):$t!==null&&($t.childLanes&dt)!==dt&&($t.childLanes|=dt),et===kt)break;et=et.return}}function ch(et,dt){Xg=et,Zg=Yg=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&dt&&(dh=!0),et.firstContext=null)}function eh(et){var dt=et._currentValue;if(Zg!==et)if(et={context:et,memoizedValue:dt,next:null},Yg===null){if(Xg===null)throw Error(p$4(308));Yg=et,Xg.dependencies={lanes:0,firstContext:et}}else Yg=Yg.next=et;return dt}var fh=null;function gh(et){fh===null?fh=[et]:fh.push(et)}function hh(et,dt,kt,$t){var Tt=dt.interleaved;return Tt===null?(kt.next=kt,gh(dt)):(kt.next=Tt.next,Tt.next=kt),dt.interleaved=kt,ih(et,$t)}function ih(et,dt){et.lanes|=dt;var kt=et.alternate;for(kt!==null&&(kt.lanes|=dt),kt=et,et=et.return;et!==null;)et.childLanes|=dt,kt=et.alternate,kt!==null&&(kt.childLanes|=dt),kt=et,et=et.return;return kt.tag===3?kt.stateNode:null}var jh=!1;function kh(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(et,dt){et=et.updateQueue,dt.updateQueue===et&&(dt.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function mh(et,dt){return{eventTime:et,lane:dt,tag:0,payload:null,callback:null,next:null}}function nh(et,dt,kt){var $t=et.updateQueue;if($t===null)return null;if($t=$t.shared,K$4&2){var Tt=$t.pending;return Tt===null?dt.next=dt:(dt.next=Tt.next,Tt.next=dt),$t.pending=dt,ih(et,kt)}return Tt=$t.interleaved,Tt===null?(dt.next=dt,gh($t)):(dt.next=Tt.next,Tt.next=dt),$t.interleaved=dt,ih(et,kt)}function oh(et,dt,kt){if(dt=dt.updateQueue,dt!==null&&(dt=dt.shared,(kt&4194240)!==0)){var $t=dt.lanes;$t&=et.pendingLanes,kt|=$t,dt.lanes=kt,Cc(et,kt)}}function ph(et,dt){var kt=et.updateQueue,$t=et.alternate;if($t!==null&&($t=$t.updateQueue,kt===$t)){var Tt=null,Dt=null;if(kt=kt.firstBaseUpdate,kt!==null){do{var Ft={eventTime:kt.eventTime,lane:kt.lane,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null};Dt===null?Tt=Dt=Ft:Dt=Dt.next=Ft,kt=kt.next}while(kt!==null);Dt===null?Tt=Dt=dt:Dt=Dt.next=dt}else Tt=Dt=dt;kt={baseState:$t.baseState,firstBaseUpdate:Tt,lastBaseUpdate:Dt,shared:$t.shared,effects:$t.effects},et.updateQueue=kt;return}et=kt.lastBaseUpdate,et===null?kt.firstBaseUpdate=dt:et.next=dt,kt.lastBaseUpdate=dt}function qh(et,dt,kt,$t){var Tt=et.updateQueue;jh=!1;var Dt=Tt.firstBaseUpdate,Ft=Tt.lastBaseUpdate,Ut=Tt.shared.pending;if(Ut!==null){Tt.shared.pending=null;var Ht=Ut,Kt=Ht.next;Ht.next=null,Ft===null?Dt=Kt:Ft.next=Kt,Ft=Ht;var Yt=et.alternate;Yt!==null&&(Yt=Yt.updateQueue,Ut=Yt.lastBaseUpdate,Ut!==Ft&&(Ut===null?Yt.firstBaseUpdate=Kt:Ut.next=Kt,Yt.lastBaseUpdate=Ht))}if(Dt!==null){var Jt=Tt.baseState;Ft=0,Yt=Kt=Ht=null,Ut=Dt;do{var Zt=Ut.lane,er=Ut.eventTime;if(($t&Zt)===Zt){Yt!==null&&(Yt=Yt.next={eventTime:er,lane:0,tag:Ut.tag,payload:Ut.payload,callback:Ut.callback,next:null});e:{var rr=et,sr=Ut;switch(Zt=dt,er=kt,sr.tag){case 1:if(rr=sr.payload,typeof rr=="function"){Jt=rr.call(er,Jt,Zt);break e}Jt=rr;break e;case 3:rr.flags=rr.flags&-65537|128;case 0:if(rr=sr.payload,Zt=typeof rr=="function"?rr.call(er,Jt,Zt):rr,Zt==null)break e;Jt=A$7({},Jt,Zt);break e;case 2:jh=!0}}Ut.callback!==null&&Ut.lane!==0&&(et.flags|=64,Zt=Tt.effects,Zt===null?Tt.effects=[Ut]:Zt.push(Ut))}else er={eventTime:er,lane:Zt,tag:Ut.tag,payload:Ut.payload,callback:Ut.callback,next:null},Yt===null?(Kt=Yt=er,Ht=Jt):Yt=Yt.next=er,Ft|=Zt;if(Ut=Ut.next,Ut===null){if(Ut=Tt.shared.pending,Ut===null)break;Zt=Ut,Ut=Zt.next,Zt.next=null,Tt.lastBaseUpdate=Zt,Tt.shared.pending=null}}while(1);if(Yt===null&&(Ht=Jt),Tt.baseState=Ht,Tt.firstBaseUpdate=Kt,Tt.lastBaseUpdate=Yt,dt=Tt.shared.interleaved,dt!==null){Tt=dt;do Ft|=Tt.lane,Tt=Tt.next;while(Tt!==dt)}else Dt===null&&(Tt.shared.lanes=0);rh|=Ft,et.lanes=Ft,et.memoizedState=Jt}}function sh(et,dt,kt){if(et=dt.effects,dt.effects=null,et!==null)for(dt=0;dt<et.length;dt++){var $t=et[dt],Tt=$t.callback;if(Tt!==null){if($t.callback=null,$t=kt,typeof Tt!="function")throw Error(p$4(191,Tt));Tt.call($t)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(et){if(et===th)throw Error(p$4(174));return et}function yh(et,dt){switch(G$3(wh,dt),G$3(vh$1,et),G$3(uh,th),et=dt.nodeType,et){case 9:case 11:dt=(dt=dt.documentElement)?dt.namespaceURI:lb(null,"");break;default:et=et===8?dt.parentNode:dt,dt=et.namespaceURI||null,et=et.tagName,dt=lb(dt,et)}E$7(uh),G$3(uh,dt)}function zh(){E$7(uh),E$7(vh$1),E$7(wh)}function Ah(et){xh(wh.current);var dt=xh(uh.current),kt=lb(dt,et.type);dt!==kt&&(G$3(vh$1,et),G$3(uh,kt))}function Bh(et){vh$1.current===et&&(E$7(uh),E$7(vh$1))}var L$9=Uf(0);function Ch(et){for(var dt=et;dt!==null;){if(dt.tag===13){var kt=dt.memoizedState;if(kt!==null&&(kt=kt.dehydrated,kt===null||kt.data==="$?"||kt.data==="$!"))return dt}else if(dt.tag===19&&dt.memoizedProps.revealOrder!==void 0){if(dt.flags&128)return dt}else if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===et)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===et)return null;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}return null}var Dh=[];function Eh(){for(var et=0;et<Dh.length;et++)Dh[et]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$6=null,N$3=null,O$7=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$6(){throw Error(p$4(321))}function Mh(et,dt){if(dt===null)return!1;for(var kt=0;kt<dt.length&&kt<et.length;kt++)if(!He$3(et[kt],dt[kt]))return!1;return!0}function Nh(et,dt,kt,$t,Tt,Dt){if(Hh=Dt,M$6=dt,dt.memoizedState=null,dt.updateQueue=null,dt.lanes=0,Fh.current=et===null||et.memoizedState===null?Oh:Ph,et=kt($t,Tt),Jh){Dt=0;do{if(Jh=!1,Kh=0,25<=Dt)throw Error(p$4(301));Dt+=1,O$7=N$3=null,dt.updateQueue=null,Fh.current=Qh,et=kt($t,Tt)}while(Jh)}if(Fh.current=Rh,dt=N$3!==null&&N$3.next!==null,Hh=0,O$7=N$3=M$6=null,Ih=!1,dt)throw Error(p$4(300));return et}function Sh(){var et=Kh!==0;return Kh=0,et}function Th(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$7===null?M$6.memoizedState=O$7=et:O$7=O$7.next=et,O$7}function Uh(){if(N$3===null){var et=M$6.alternate;et=et!==null?et.memoizedState:null}else et=N$3.next;var dt=O$7===null?M$6.memoizedState:O$7.next;if(dt!==null)O$7=dt,N$3=et;else{if(et===null)throw Error(p$4(310));N$3=et,et={memoizedState:N$3.memoizedState,baseState:N$3.baseState,baseQueue:N$3.baseQueue,queue:N$3.queue,next:null},O$7===null?M$6.memoizedState=O$7=et:O$7=O$7.next=et}return O$7}function Vh(et,dt){return typeof dt=="function"?dt(et):dt}function Wh(et){var dt=Uh(),kt=dt.queue;if(kt===null)throw Error(p$4(311));kt.lastRenderedReducer=et;var $t=N$3,Tt=$t.baseQueue,Dt=kt.pending;if(Dt!==null){if(Tt!==null){var Ft=Tt.next;Tt.next=Dt.next,Dt.next=Ft}$t.baseQueue=Tt=Dt,kt.pending=null}if(Tt!==null){Dt=Tt.next,$t=$t.baseState;var Ut=Ft=null,Ht=null,Kt=Dt;do{var Yt=Kt.lane;if((Hh&Yt)===Yt)Ht!==null&&(Ht=Ht.next={lane:0,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null}),$t=Kt.hasEagerState?Kt.eagerState:et($t,Kt.action);else{var Jt={lane:Yt,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null};Ht===null?(Ut=Ht=Jt,Ft=$t):Ht=Ht.next=Jt,M$6.lanes|=Yt,rh|=Yt}Kt=Kt.next}while(Kt!==null&&Kt!==Dt);Ht===null?Ft=$t:Ht.next=Ut,He$3($t,dt.memoizedState)||(dh=!0),dt.memoizedState=$t,dt.baseState=Ft,dt.baseQueue=Ht,kt.lastRenderedState=$t}if(et=kt.interleaved,et!==null){Tt=et;do Dt=Tt.lane,M$6.lanes|=Dt,rh|=Dt,Tt=Tt.next;while(Tt!==et)}else Tt===null&&(kt.lanes=0);return[dt.memoizedState,kt.dispatch]}function Xh(et){var dt=Uh(),kt=dt.queue;if(kt===null)throw Error(p$4(311));kt.lastRenderedReducer=et;var $t=kt.dispatch,Tt=kt.pending,Dt=dt.memoizedState;if(Tt!==null){kt.pending=null;var Ft=Tt=Tt.next;do Dt=et(Dt,Ft.action),Ft=Ft.next;while(Ft!==Tt);He$3(Dt,dt.memoizedState)||(dh=!0),dt.memoizedState=Dt,dt.baseQueue===null&&(dt.baseState=Dt),kt.lastRenderedState=Dt}return[Dt,$t]}function Yh(){}function Zh(et,dt){var kt=M$6,$t=Uh(),Tt=dt(),Dt=!He$3($t.memoizedState,Tt);if(Dt&&($t.memoizedState=Tt,dh=!0),$t=$t.queue,$h(ai.bind(null,kt,$t,et),[et]),$t.getSnapshot!==dt||Dt||O$7!==null&&O$7.memoizedState.tag&1){if(kt.flags|=2048,bi(9,ci.bind(null,kt,$t,Tt,dt),void 0,null),Q$4===null)throw Error(p$4(349));Hh&30||di(kt,dt,Tt)}return Tt}function di(et,dt,kt){et.flags|=16384,et={getSnapshot:dt,value:kt},dt=M$6.updateQueue,dt===null?(dt={lastEffect:null,stores:null},M$6.updateQueue=dt,dt.stores=[et]):(kt=dt.stores,kt===null?dt.stores=[et]:kt.push(et))}function ci(et,dt,kt,$t){dt.value=kt,dt.getSnapshot=$t,ei(dt)&&fi(et)}function ai(et,dt,kt){return kt(function(){ei(dt)&&fi(et)})}function ei(et){var dt=et.getSnapshot;et=et.value;try{var kt=dt();return!He$3(et,kt)}catch{return!0}}function fi(et){var dt=ih(et,1);dt!==null&&gi(dt,et,1,-1)}function hi(et){var dt=Th();return typeof et=="function"&&(et=et()),dt.memoizedState=dt.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:et},dt.queue=et,et=et.dispatch=ii.bind(null,M$6,et),[dt.memoizedState,et]}function bi(et,dt,kt,$t){return et={tag:et,create:dt,destroy:kt,deps:$t,next:null},dt=M$6.updateQueue,dt===null?(dt={lastEffect:null,stores:null},M$6.updateQueue=dt,dt.lastEffect=et.next=et):(kt=dt.lastEffect,kt===null?dt.lastEffect=et.next=et:($t=kt.next,kt.next=et,et.next=$t,dt.lastEffect=et)),et}function ji(){return Uh().memoizedState}function ki(et,dt,kt,$t){var Tt=Th();M$6.flags|=et,Tt.memoizedState=bi(1|dt,kt,void 0,$t===void 0?null:$t)}function li(et,dt,kt,$t){var Tt=Uh();$t=$t===void 0?null:$t;var Dt=void 0;if(N$3!==null){var Ft=N$3.memoizedState;if(Dt=Ft.destroy,$t!==null&&Mh($t,Ft.deps)){Tt.memoizedState=bi(dt,kt,Dt,$t);return}}M$6.flags|=et,Tt.memoizedState=bi(1|dt,kt,Dt,$t)}function mi(et,dt){return ki(8390656,8,et,dt)}function $h(et,dt){return li(2048,8,et,dt)}function ni(et,dt){return li(4,2,et,dt)}function oi(et,dt){return li(4,4,et,dt)}function pi(et,dt){if(typeof dt=="function")return et=et(),dt(et),function(){dt(null)};if(dt!=null)return et=et(),dt.current=et,function(){dt.current=null}}function qi(et,dt,kt){return kt=kt!=null?kt.concat([et]):null,li(4,4,pi.bind(null,dt,et),kt)}function ri(){}function si(et,dt){var kt=Uh();dt=dt===void 0?null:dt;var $t=kt.memoizedState;return $t!==null&&dt!==null&&Mh(dt,$t[1])?$t[0]:(kt.memoizedState=[et,dt],et)}function ti(et,dt){var kt=Uh();dt=dt===void 0?null:dt;var $t=kt.memoizedState;return $t!==null&&dt!==null&&Mh(dt,$t[1])?$t[0]:(et=et(),kt.memoizedState=[et,dt],et)}function ui(et,dt,kt){return Hh&21?(He$3(kt,dt)||(kt=yc(),M$6.lanes|=kt,rh|=kt,et.baseState=!0),dt):(et.baseState&&(et.baseState=!1,dh=!0),et.memoizedState=kt)}function vi(et,dt){var kt=C$8;C$8=kt!==0&&4>kt?kt:4,et(!0);var $t=Gh.transition;Gh.transition={};try{et(!1),dt()}finally{C$8=kt,Gh.transition=$t}}function wi(){return Uh().memoizedState}function xi(et,dt,kt){var $t=yi(et);if(kt={lane:$t,action:kt,hasEagerState:!1,eagerState:null,next:null},zi(et))Ai(dt,kt);else if(kt=hh(et,dt,kt,$t),kt!==null){var Tt=R$4();gi(kt,et,$t,Tt),Bi(kt,dt,$t)}}function ii(et,dt,kt){var $t=yi(et),Tt={lane:$t,action:kt,hasEagerState:!1,eagerState:null,next:null};if(zi(et))Ai(dt,Tt);else{var Dt=et.alternate;if(et.lanes===0&&(Dt===null||Dt.lanes===0)&&(Dt=dt.lastRenderedReducer,Dt!==null))try{var Ft=dt.lastRenderedState,Ut=Dt(Ft,kt);if(Tt.hasEagerState=!0,Tt.eagerState=Ut,He$3(Ut,Ft)){var Ht=dt.interleaved;Ht===null?(Tt.next=Tt,gh(dt)):(Tt.next=Ht.next,Ht.next=Tt),dt.interleaved=Tt;return}}catch{}finally{}kt=hh(et,dt,Tt,$t),kt!==null&&(Tt=R$4(),gi(kt,et,$t,Tt),Bi(kt,dt,$t))}}function zi(et){var dt=et.alternate;return et===M$6||dt!==null&&dt===M$6}function Ai(et,dt){Jh=Ih=!0;var kt=et.pending;kt===null?dt.next=dt:(dt.next=kt.next,kt.next=dt),et.pending=dt}function Bi(et,dt,kt){if(kt&4194240){var $t=dt.lanes;$t&=et.pendingLanes,kt|=$t,dt.lanes=kt,Cc(et,kt)}}var Rh={readContext:eh,useCallback:P$6,useContext:P$6,useEffect:P$6,useImperativeHandle:P$6,useInsertionEffect:P$6,useLayoutEffect:P$6,useMemo:P$6,useReducer:P$6,useRef:P$6,useState:P$6,useDebugValue:P$6,useDeferredValue:P$6,useTransition:P$6,useMutableSource:P$6,useSyncExternalStore:P$6,useId:P$6,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(et,dt){return Th().memoizedState=[et,dt===void 0?null:dt],et},useContext:eh,useEffect:mi,useImperativeHandle:function(et,dt,kt){return kt=kt!=null?kt.concat([et]):null,ki(4194308,4,pi.bind(null,dt,et),kt)},useLayoutEffect:function(et,dt){return ki(4194308,4,et,dt)},useInsertionEffect:function(et,dt){return ki(4,2,et,dt)},useMemo:function(et,dt){var kt=Th();return dt=dt===void 0?null:dt,et=et(),kt.memoizedState=[et,dt],et},useReducer:function(et,dt,kt){var $t=Th();return dt=kt!==void 0?kt(dt):dt,$t.memoizedState=$t.baseState=dt,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:dt},$t.queue=et,et=et.dispatch=xi.bind(null,M$6,et),[$t.memoizedState,et]},useRef:function(et){var dt=Th();return et={current:et},dt.memoizedState=et},useState:hi,useDebugValue:ri,useDeferredValue:function(et){return Th().memoizedState=et},useTransition:function(){var et=hi(!1),dt=et[0];return et=vi.bind(null,et[1]),Th().memoizedState=et,[dt,et]},useMutableSource:function(){},useSyncExternalStore:function(et,dt,kt){var $t=M$6,Tt=Th();if(I$4){if(kt===void 0)throw Error(p$4(407));kt=kt()}else{if(kt=dt(),Q$4===null)throw Error(p$4(349));Hh&30||di($t,dt,kt)}Tt.memoizedState=kt;var Dt={value:kt,getSnapshot:dt};return Tt.queue=Dt,mi(ai.bind(null,$t,Dt,et),[et]),$t.flags|=2048,bi(9,ci.bind(null,$t,Dt,kt,dt),void 0,null),kt},useId:function(){var et=Th(),dt=Q$4.identifierPrefix;if(I$4){var kt=sg,$t=rg;kt=($t&~(1<<32-oc($t)-1)).toString(32)+kt,dt=":"+dt+"R"+kt,kt=Kh++,0<kt&&(dt+="H"+kt.toString(32)),dt+=":"}else kt=Lh++,dt=":"+dt+"r"+kt.toString(32)+":";return et.memoizedState=dt},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var dt=Uh();return ui(dt,N$3.memoizedState,et)},useTransition:function(){var et=Wh(Vh)[0],dt=Uh().memoizedState;return[et,dt]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var dt=Uh();return N$3===null?dt.memoizedState=et:ui(dt,N$3.memoizedState,et)},useTransition:function(){var et=Xh(Vh)[0],dt=Uh().memoizedState;return[et,dt]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(et,dt){if(et&&et.defaultProps){dt=A$7({},dt),et=et.defaultProps;for(var kt in et)dt[kt]===void 0&&(dt[kt]=et[kt]);return dt}return dt}function Di(et,dt,kt,$t){dt=et.memoizedState,kt=kt($t,dt),kt=kt==null?dt:A$7({},dt,kt),et.memoizedState=kt,et.lanes===0&&(et.updateQueue.baseState=kt)}var Ei={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,dt,kt){et=et._reactInternals;var $t=R$4(),Tt=yi(et),Dt=mh($t,Tt);Dt.payload=dt,kt!=null&&(Dt.callback=kt),dt=nh(et,Dt,Tt),dt!==null&&(gi(dt,et,Tt,$t),oh(dt,et,Tt))},enqueueReplaceState:function(et,dt,kt){et=et._reactInternals;var $t=R$4(),Tt=yi(et),Dt=mh($t,Tt);Dt.tag=1,Dt.payload=dt,kt!=null&&(Dt.callback=kt),dt=nh(et,Dt,Tt),dt!==null&&(gi(dt,et,Tt,$t),oh(dt,et,Tt))},enqueueForceUpdate:function(et,dt){et=et._reactInternals;var kt=R$4(),$t=yi(et),Tt=mh(kt,$t);Tt.tag=2,dt!=null&&(Tt.callback=dt),dt=nh(et,Tt,$t),dt!==null&&(gi(dt,et,$t,kt),oh(dt,et,$t))}};function Fi(et,dt,kt,$t,Tt,Dt,Ft){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate($t,Dt,Ft):dt.prototype&&dt.prototype.isPureReactComponent?!Ie$2(kt,$t)||!Ie$2(Tt,Dt):!0}function Gi(et,dt,kt){var $t=!1,Tt=Vf,Dt=dt.contextType;return typeof Dt=="object"&&Dt!==null?Dt=eh(Dt):(Tt=Zf(dt)?Xf:H$2.current,$t=dt.contextTypes,Dt=($t=$t!=null)?Yf(et,Tt):Vf),dt=new dt(kt,Dt),et.memoizedState=dt.state!==null&&dt.state!==void 0?dt.state:null,dt.updater=Ei,et.stateNode=dt,dt._reactInternals=et,$t&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=Tt,et.__reactInternalMemoizedMaskedChildContext=Dt),dt}function Hi(et,dt,kt,$t){et=dt.state,typeof dt.componentWillReceiveProps=="function"&&dt.componentWillReceiveProps(kt,$t),typeof dt.UNSAFE_componentWillReceiveProps=="function"&&dt.UNSAFE_componentWillReceiveProps(kt,$t),dt.state!==et&&Ei.enqueueReplaceState(dt,dt.state,null)}function Ii(et,dt,kt,$t){var Tt=et.stateNode;Tt.props=kt,Tt.state=et.memoizedState,Tt.refs={},kh(et);var Dt=dt.contextType;typeof Dt=="object"&&Dt!==null?Tt.context=eh(Dt):(Dt=Zf(dt)?Xf:H$2.current,Tt.context=Yf(et,Dt)),Tt.state=et.memoizedState,Dt=dt.getDerivedStateFromProps,typeof Dt=="function"&&(Di(et,dt,Dt,kt),Tt.state=et.memoizedState),typeof dt.getDerivedStateFromProps=="function"||typeof Tt.getSnapshotBeforeUpdate=="function"||typeof Tt.UNSAFE_componentWillMount!="function"&&typeof Tt.componentWillMount!="function"||(dt=Tt.state,typeof Tt.componentWillMount=="function"&&Tt.componentWillMount(),typeof Tt.UNSAFE_componentWillMount=="function"&&Tt.UNSAFE_componentWillMount(),dt!==Tt.state&&Ei.enqueueReplaceState(Tt,Tt.state,null),qh(et,kt,Tt,$t),Tt.state=et.memoizedState),typeof Tt.componentDidMount=="function"&&(et.flags|=4194308)}function Ji(et,dt){try{var kt="",$t=dt;do kt+=Pa($t),$t=$t.return;while($t);var Tt=kt}catch(Dt){Tt=`
Error generating stack: `+Dt.message+`
`+Dt.stack}return{value:et,source:dt,stack:Tt,digest:null}}function Ki(et,dt,kt){return{value:et,source:null,stack:kt??null,digest:dt??null}}function Li(et,dt){try{console.error(dt.value)}catch(kt){setTimeout(function(){throw kt})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(et,dt,kt){kt=mh(-1,kt),kt.tag=3,kt.payload={element:null};var $t=dt.value;return kt.callback=function(){Oi||(Oi=!0,Pi=$t),Li(et,dt)},kt}function Qi(et,dt,kt){kt=mh(-1,kt),kt.tag=3;var $t=et.type.getDerivedStateFromError;if(typeof $t=="function"){var Tt=dt.value;kt.payload=function(){return $t(Tt)},kt.callback=function(){Li(et,dt)}}var Dt=et.stateNode;return Dt!==null&&typeof Dt.componentDidCatch=="function"&&(kt.callback=function(){Li(et,dt),typeof $t!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var Ft=dt.stack;this.componentDidCatch(dt.value,{componentStack:Ft!==null?Ft:""})}),kt}function Si(et,dt,kt){var $t=et.pingCache;if($t===null){$t=et.pingCache=new Mi;var Tt=new Set;$t.set(dt,Tt)}else Tt=$t.get(dt),Tt===void 0&&(Tt=new Set,$t.set(dt,Tt));Tt.has(kt)||(Tt.add(kt),et=Ti.bind(null,et,dt,kt),dt.then(et,et))}function Ui(et){do{var dt;if((dt=et.tag===13)&&(dt=et.memoizedState,dt=dt!==null?dt.dehydrated!==null:!0),dt)return et;et=et.return}while(et!==null);return null}function Vi(et,dt,kt,$t,Tt){return et.mode&1?(et.flags|=65536,et.lanes=Tt,et):(et===dt?et.flags|=65536:(et.flags|=128,kt.flags|=131072,kt.flags&=-52805,kt.tag===1&&(kt.alternate===null?kt.tag=17:(dt=mh(-1,1),dt.tag=2,nh(kt,dt,1))),kt.lanes|=1),et)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(et,dt,kt,$t){dt.child=et===null?Vg(dt,null,kt,$t):Ug(dt,et.child,kt,$t)}function Yi(et,dt,kt,$t,Tt){kt=kt.render;var Dt=dt.ref;return ch(dt,Tt),$t=Nh(et,dt,kt,$t,Dt,Tt),kt=Sh(),et!==null&&!dh?(dt.updateQueue=et.updateQueue,dt.flags&=-2053,et.lanes&=~Tt,Zi(et,dt,Tt)):(I$4&&kt&&vg(dt),dt.flags|=1,Xi(et,dt,$t,Tt),dt.child)}function $i(et,dt,kt,$t,Tt){if(et===null){var Dt=kt.type;return typeof Dt=="function"&&!aj(Dt)&&Dt.defaultProps===void 0&&kt.compare===null&&kt.defaultProps===void 0?(dt.tag=15,dt.type=Dt,bj(et,dt,Dt,$t,Tt)):(et=Rg(kt.type,null,$t,dt,dt.mode,Tt),et.ref=dt.ref,et.return=dt,dt.child=et)}if(Dt=et.child,!(et.lanes&Tt)){var Ft=Dt.memoizedProps;if(kt=kt.compare,kt=kt!==null?kt:Ie$2,kt(Ft,$t)&&et.ref===dt.ref)return Zi(et,dt,Tt)}return dt.flags|=1,et=Pg(Dt,$t),et.ref=dt.ref,et.return=dt,dt.child=et}function bj(et,dt,kt,$t,Tt){if(et!==null){var Dt=et.memoizedProps;if(Ie$2(Dt,$t)&&et.ref===dt.ref)if(dh=!1,dt.pendingProps=$t=Dt,(et.lanes&Tt)!==0)et.flags&131072&&(dh=!0);else return dt.lanes=et.lanes,Zi(et,dt,Tt)}return cj(et,dt,kt,$t,Tt)}function dj(et,dt,kt){var $t=dt.pendingProps,Tt=$t.children,Dt=et!==null?et.memoizedState:null;if($t.mode==="hidden")if(!(dt.mode&1))dt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$3(ej,fj),fj|=kt;else{if(!(kt&1073741824))return et=Dt!==null?Dt.baseLanes|kt:kt,dt.lanes=dt.childLanes=1073741824,dt.memoizedState={baseLanes:et,cachePool:null,transitions:null},dt.updateQueue=null,G$3(ej,fj),fj|=et,null;dt.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t=Dt!==null?Dt.baseLanes:kt,G$3(ej,fj),fj|=$t}else Dt!==null?($t=Dt.baseLanes|kt,dt.memoizedState=null):$t=kt,G$3(ej,fj),fj|=$t;return Xi(et,dt,Tt,kt),dt.child}function gj(et,dt){var kt=dt.ref;(et===null&&kt!==null||et!==null&&et.ref!==kt)&&(dt.flags|=512,dt.flags|=2097152)}function cj(et,dt,kt,$t,Tt){var Dt=Zf(kt)?Xf:H$2.current;return Dt=Yf(dt,Dt),ch(dt,Tt),kt=Nh(et,dt,kt,$t,Dt,Tt),$t=Sh(),et!==null&&!dh?(dt.updateQueue=et.updateQueue,dt.flags&=-2053,et.lanes&=~Tt,Zi(et,dt,Tt)):(I$4&&$t&&vg(dt),dt.flags|=1,Xi(et,dt,kt,Tt),dt.child)}function hj(et,dt,kt,$t,Tt){if(Zf(kt)){var Dt=!0;cg(dt)}else Dt=!1;if(ch(dt,Tt),dt.stateNode===null)ij(et,dt),Gi(dt,kt,$t),Ii(dt,kt,$t,Tt),$t=!0;else if(et===null){var Ft=dt.stateNode,Ut=dt.memoizedProps;Ft.props=Ut;var Ht=Ft.context,Kt=kt.contextType;typeof Kt=="object"&&Kt!==null?Kt=eh(Kt):(Kt=Zf(kt)?Xf:H$2.current,Kt=Yf(dt,Kt));var Yt=kt.getDerivedStateFromProps,Jt=typeof Yt=="function"||typeof Ft.getSnapshotBeforeUpdate=="function";Jt||typeof Ft.UNSAFE_componentWillReceiveProps!="function"&&typeof Ft.componentWillReceiveProps!="function"||(Ut!==$t||Ht!==Kt)&&Hi(dt,Ft,$t,Kt),jh=!1;var Zt=dt.memoizedState;Ft.state=Zt,qh(dt,$t,Ft,Tt),Ht=dt.memoizedState,Ut!==$t||Zt!==Ht||Wf.current||jh?(typeof Yt=="function"&&(Di(dt,kt,Yt,$t),Ht=dt.memoizedState),(Ut=jh||Fi(dt,kt,Ut,$t,Zt,Ht,Kt))?(Jt||typeof Ft.UNSAFE_componentWillMount!="function"&&typeof Ft.componentWillMount!="function"||(typeof Ft.componentWillMount=="function"&&Ft.componentWillMount(),typeof Ft.UNSAFE_componentWillMount=="function"&&Ft.UNSAFE_componentWillMount()),typeof Ft.componentDidMount=="function"&&(dt.flags|=4194308)):(typeof Ft.componentDidMount=="function"&&(dt.flags|=4194308),dt.memoizedProps=$t,dt.memoizedState=Ht),Ft.props=$t,Ft.state=Ht,Ft.context=Kt,$t=Ut):(typeof Ft.componentDidMount=="function"&&(dt.flags|=4194308),$t=!1)}else{Ft=dt.stateNode,lh(et,dt),Ut=dt.memoizedProps,Kt=dt.type===dt.elementType?Ut:Ci(dt.type,Ut),Ft.props=Kt,Jt=dt.pendingProps,Zt=Ft.context,Ht=kt.contextType,typeof Ht=="object"&&Ht!==null?Ht=eh(Ht):(Ht=Zf(kt)?Xf:H$2.current,Ht=Yf(dt,Ht));var er=kt.getDerivedStateFromProps;(Yt=typeof er=="function"||typeof Ft.getSnapshotBeforeUpdate=="function")||typeof Ft.UNSAFE_componentWillReceiveProps!="function"&&typeof Ft.componentWillReceiveProps!="function"||(Ut!==Jt||Zt!==Ht)&&Hi(dt,Ft,$t,Ht),jh=!1,Zt=dt.memoizedState,Ft.state=Zt,qh(dt,$t,Ft,Tt);var rr=dt.memoizedState;Ut!==Jt||Zt!==rr||Wf.current||jh?(typeof er=="function"&&(Di(dt,kt,er,$t),rr=dt.memoizedState),(Kt=jh||Fi(dt,kt,Kt,$t,Zt,rr,Ht)||!1)?(Yt||typeof Ft.UNSAFE_componentWillUpdate!="function"&&typeof Ft.componentWillUpdate!="function"||(typeof Ft.componentWillUpdate=="function"&&Ft.componentWillUpdate($t,rr,Ht),typeof Ft.UNSAFE_componentWillUpdate=="function"&&Ft.UNSAFE_componentWillUpdate($t,rr,Ht)),typeof Ft.componentDidUpdate=="function"&&(dt.flags|=4),typeof Ft.getSnapshotBeforeUpdate=="function"&&(dt.flags|=1024)):(typeof Ft.componentDidUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=4),typeof Ft.getSnapshotBeforeUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=1024),dt.memoizedProps=$t,dt.memoizedState=rr),Ft.props=$t,Ft.state=rr,Ft.context=Ht,$t=Kt):(typeof Ft.componentDidUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=4),typeof Ft.getSnapshotBeforeUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=1024),$t=!1)}return jj(et,dt,kt,$t,Dt,Tt)}function jj(et,dt,kt,$t,Tt,Dt){gj(et,dt);var Ft=(dt.flags&128)!==0;if(!$t&&!Ft)return Tt&&dg(dt,kt,!1),Zi(et,dt,Dt);$t=dt.stateNode,Wi.current=dt;var Ut=Ft&&typeof kt.getDerivedStateFromError!="function"?null:$t.render();return dt.flags|=1,et!==null&&Ft?(dt.child=Ug(dt,et.child,null,Dt),dt.child=Ug(dt,null,Ut,Dt)):Xi(et,dt,Ut,Dt),dt.memoizedState=$t.state,Tt&&dg(dt,kt,!0),dt.child}function kj(et){var dt=et.stateNode;dt.pendingContext?ag(et,dt.pendingContext,dt.pendingContext!==dt.context):dt.context&&ag(et,dt.context,!1),yh(et,dt.containerInfo)}function lj(et,dt,kt,$t,Tt){return Ig(),Jg(Tt),dt.flags|=256,Xi(et,dt,kt,$t),dt.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(et){return{baseLanes:et,cachePool:null,transitions:null}}function oj(et,dt,kt){var $t=dt.pendingProps,Tt=L$9.current,Dt=!1,Ft=(dt.flags&128)!==0,Ut;if((Ut=Ft)||(Ut=et!==null&&et.memoizedState===null?!1:(Tt&2)!==0),Ut?(Dt=!0,dt.flags&=-129):(et===null||et.memoizedState!==null)&&(Tt|=1),G$3(L$9,Tt&1),et===null)return Eg(dt),et=dt.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(dt.mode&1?et.data==="$!"?dt.lanes=8:dt.lanes=1073741824:dt.lanes=1,null):(Ft=$t.children,et=$t.fallback,Dt?($t=dt.mode,Dt=dt.child,Ft={mode:"hidden",children:Ft},!($t&1)&&Dt!==null?(Dt.childLanes=0,Dt.pendingProps=Ft):Dt=pj(Ft,$t,0,null),et=Tg(et,$t,kt,null),Dt.return=dt,et.return=dt,Dt.sibling=et,dt.child=Dt,dt.child.memoizedState=nj(kt),dt.memoizedState=mj,et):qj(dt,Ft));if(Tt=et.memoizedState,Tt!==null&&(Ut=Tt.dehydrated,Ut!==null))return rj(et,dt,Ft,$t,Ut,Tt,kt);if(Dt){Dt=$t.fallback,Ft=dt.mode,Tt=et.child,Ut=Tt.sibling;var Ht={mode:"hidden",children:$t.children};return!(Ft&1)&&dt.child!==Tt?($t=dt.child,$t.childLanes=0,$t.pendingProps=Ht,dt.deletions=null):($t=Pg(Tt,Ht),$t.subtreeFlags=Tt.subtreeFlags&14680064),Ut!==null?Dt=Pg(Ut,Dt):(Dt=Tg(Dt,Ft,kt,null),Dt.flags|=2),Dt.return=dt,$t.return=dt,$t.sibling=Dt,dt.child=$t,$t=Dt,Dt=dt.child,Ft=et.child.memoizedState,Ft=Ft===null?nj(kt):{baseLanes:Ft.baseLanes|kt,cachePool:null,transitions:Ft.transitions},Dt.memoizedState=Ft,Dt.childLanes=et.childLanes&~kt,dt.memoizedState=mj,$t}return Dt=et.child,et=Dt.sibling,$t=Pg(Dt,{mode:"visible",children:$t.children}),!(dt.mode&1)&&($t.lanes=kt),$t.return=dt,$t.sibling=null,et!==null&&(kt=dt.deletions,kt===null?(dt.deletions=[et],dt.flags|=16):kt.push(et)),dt.child=$t,dt.memoizedState=null,$t}function qj(et,dt){return dt=pj({mode:"visible",children:dt},et.mode,0,null),dt.return=et,et.child=dt}function sj(et,dt,kt,$t){return $t!==null&&Jg($t),Ug(dt,et.child,null,kt),et=qj(dt,dt.pendingProps.children),et.flags|=2,dt.memoizedState=null,et}function rj(et,dt,kt,$t,Tt,Dt,Ft){if(kt)return dt.flags&256?(dt.flags&=-257,$t=Ki(Error(p$4(422))),sj(et,dt,Ft,$t)):dt.memoizedState!==null?(dt.child=et.child,dt.flags|=128,null):(Dt=$t.fallback,Tt=dt.mode,$t=pj({mode:"visible",children:$t.children},Tt,0,null),Dt=Tg(Dt,Tt,Ft,null),Dt.flags|=2,$t.return=dt,Dt.return=dt,$t.sibling=Dt,dt.child=$t,dt.mode&1&&Ug(dt,et.child,null,Ft),dt.child.memoizedState=nj(Ft),dt.memoizedState=mj,Dt);if(!(dt.mode&1))return sj(et,dt,Ft,null);if(Tt.data==="$!"){if($t=Tt.nextSibling&&Tt.nextSibling.dataset,$t)var Ut=$t.dgst;return $t=Ut,Dt=Error(p$4(419)),$t=Ki(Dt,$t,void 0),sj(et,dt,Ft,$t)}if(Ut=(Ft&et.childLanes)!==0,dh||Ut){if($t=Q$4,$t!==null){switch(Ft&-Ft){case 4:Tt=2;break;case 16:Tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Tt=32;break;case 536870912:Tt=268435456;break;default:Tt=0}Tt=Tt&($t.suspendedLanes|Ft)?0:Tt,Tt!==0&&Tt!==Dt.retryLane&&(Dt.retryLane=Tt,ih(et,Tt),gi($t,et,Tt,-1))}return tj(),$t=Ki(Error(p$4(421))),sj(et,dt,Ft,$t)}return Tt.data==="$?"?(dt.flags|=128,dt.child=et.child,dt=uj.bind(null,et),Tt._reactRetry=dt,null):(et=Dt.treeContext,yg=Lf(Tt.nextSibling),xg=dt,I$4=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=dt),dt=qj(dt,$t.children),dt.flags|=4096,dt)}function vj(et,dt,kt){et.lanes|=dt;var $t=et.alternate;$t!==null&&($t.lanes|=dt),bh(et.return,dt,kt)}function wj(et,dt,kt,$t,Tt){var Dt=et.memoizedState;Dt===null?et.memoizedState={isBackwards:dt,rendering:null,renderingStartTime:0,last:$t,tail:kt,tailMode:Tt}:(Dt.isBackwards=dt,Dt.rendering=null,Dt.renderingStartTime=0,Dt.last=$t,Dt.tail=kt,Dt.tailMode=Tt)}function xj(et,dt,kt){var $t=dt.pendingProps,Tt=$t.revealOrder,Dt=$t.tail;if(Xi(et,dt,$t.children,kt),$t=L$9.current,$t&2)$t=$t&1|2,dt.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=dt.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&vj(et,kt,dt);else if(et.tag===19)vj(et,kt,dt);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===dt)break e;for(;et.sibling===null;){if(et.return===null||et.return===dt)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}$t&=1}if(G$3(L$9,$t),!(dt.mode&1))dt.memoizedState=null;else switch(Tt){case"forwards":for(kt=dt.child,Tt=null;kt!==null;)et=kt.alternate,et!==null&&Ch(et)===null&&(Tt=kt),kt=kt.sibling;kt=Tt,kt===null?(Tt=dt.child,dt.child=null):(Tt=kt.sibling,kt.sibling=null),wj(dt,!1,Tt,kt,Dt);break;case"backwards":for(kt=null,Tt=dt.child,dt.child=null;Tt!==null;){if(et=Tt.alternate,et!==null&&Ch(et)===null){dt.child=Tt;break}et=Tt.sibling,Tt.sibling=kt,kt=Tt,Tt=et}wj(dt,!0,kt,null,Dt);break;case"together":wj(dt,!1,null,null,void 0);break;default:dt.memoizedState=null}return dt.child}function ij(et,dt){!(dt.mode&1)&&et!==null&&(et.alternate=null,dt.alternate=null,dt.flags|=2)}function Zi(et,dt,kt){if(et!==null&&(dt.dependencies=et.dependencies),rh|=dt.lanes,!(kt&dt.childLanes))return null;if(et!==null&&dt.child!==et.child)throw Error(p$4(153));if(dt.child!==null){for(et=dt.child,kt=Pg(et,et.pendingProps),dt.child=kt,kt.return=dt;et.sibling!==null;)et=et.sibling,kt=kt.sibling=Pg(et,et.pendingProps),kt.return=dt;kt.sibling=null}return dt.child}function yj(et,dt,kt){switch(dt.tag){case 3:kj(dt),Ig();break;case 5:Ah(dt);break;case 1:Zf(dt.type)&&cg(dt);break;case 4:yh(dt,dt.stateNode.containerInfo);break;case 10:var $t=dt.type._context,Tt=dt.memoizedProps.value;G$3(Wg,$t._currentValue),$t._currentValue=Tt;break;case 13:if($t=dt.memoizedState,$t!==null)return $t.dehydrated!==null?(G$3(L$9,L$9.current&1),dt.flags|=128,null):kt&dt.child.childLanes?oj(et,dt,kt):(G$3(L$9,L$9.current&1),et=Zi(et,dt,kt),et!==null?et.sibling:null);G$3(L$9,L$9.current&1);break;case 19:if($t=(kt&dt.childLanes)!==0,et.flags&128){if($t)return xj(et,dt,kt);dt.flags|=128}if(Tt=dt.memoizedState,Tt!==null&&(Tt.rendering=null,Tt.tail=null,Tt.lastEffect=null),G$3(L$9,L$9.current),$t)break;return null;case 22:case 23:return dt.lanes=0,dj(et,dt,kt)}return Zi(et,dt,kt)}var zj,Aj,Bj,Cj;zj=function(et,dt){for(var kt=dt.child;kt!==null;){if(kt.tag===5||kt.tag===6)et.appendChild(kt.stateNode);else if(kt.tag!==4&&kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===dt)break;for(;kt.sibling===null;){if(kt.return===null||kt.return===dt)return;kt=kt.return}kt.sibling.return=kt.return,kt=kt.sibling}};Aj=function(){};Bj=function(et,dt,kt,$t){var Tt=et.memoizedProps;if(Tt!==$t){et=dt.stateNode,xh(uh.current);var Dt=null;switch(kt){case"input":Tt=Ya(et,Tt),$t=Ya(et,$t),Dt=[];break;case"select":Tt=A$7({},Tt,{value:void 0}),$t=A$7({},$t,{value:void 0}),Dt=[];break;case"textarea":Tt=gb(et,Tt),$t=gb(et,$t),Dt=[];break;default:typeof Tt.onClick!="function"&&typeof $t.onClick=="function"&&(et.onclick=Bf)}ub(kt,$t);var Ft;kt=null;for(Kt in Tt)if(!$t.hasOwnProperty(Kt)&&Tt.hasOwnProperty(Kt)&&Tt[Kt]!=null)if(Kt==="style"){var Ut=Tt[Kt];for(Ft in Ut)Ut.hasOwnProperty(Ft)&&(kt||(kt={}),kt[Ft]="")}else Kt!=="dangerouslySetInnerHTML"&&Kt!=="children"&&Kt!=="suppressContentEditableWarning"&&Kt!=="suppressHydrationWarning"&&Kt!=="autoFocus"&&(ea.hasOwnProperty(Kt)?Dt||(Dt=[]):(Dt=Dt||[]).push(Kt,null));for(Kt in $t){var Ht=$t[Kt];if(Ut=Tt!=null?Tt[Kt]:void 0,$t.hasOwnProperty(Kt)&&Ht!==Ut&&(Ht!=null||Ut!=null))if(Kt==="style")if(Ut){for(Ft in Ut)!Ut.hasOwnProperty(Ft)||Ht&&Ht.hasOwnProperty(Ft)||(kt||(kt={}),kt[Ft]="");for(Ft in Ht)Ht.hasOwnProperty(Ft)&&Ut[Ft]!==Ht[Ft]&&(kt||(kt={}),kt[Ft]=Ht[Ft])}else kt||(Dt||(Dt=[]),Dt.push(Kt,kt)),kt=Ht;else Kt==="dangerouslySetInnerHTML"?(Ht=Ht?Ht.__html:void 0,Ut=Ut?Ut.__html:void 0,Ht!=null&&Ut!==Ht&&(Dt=Dt||[]).push(Kt,Ht)):Kt==="children"?typeof Ht!="string"&&typeof Ht!="number"||(Dt=Dt||[]).push(Kt,""+Ht):Kt!=="suppressContentEditableWarning"&&Kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Kt)?(Ht!=null&&Kt==="onScroll"&&D$4("scroll",et),Dt||Ut===Ht||(Dt=[])):(Dt=Dt||[]).push(Kt,Ht))}kt&&(Dt=Dt||[]).push("style",kt);var Kt=Dt;(dt.updateQueue=Kt)&&(dt.flags|=4)}};Cj=function(et,dt,kt,$t){kt!==$t&&(dt.flags|=4)};function Dj(et,dt){if(!I$4)switch(et.tailMode){case"hidden":dt=et.tail;for(var kt=null;dt!==null;)dt.alternate!==null&&(kt=dt),dt=dt.sibling;kt===null?et.tail=null:kt.sibling=null;break;case"collapsed":kt=et.tail;for(var $t=null;kt!==null;)kt.alternate!==null&&($t=kt),kt=kt.sibling;$t===null?dt||et.tail===null?et.tail=null:et.tail.sibling=null:$t.sibling=null}}function S$4(et){var dt=et.alternate!==null&&et.alternate.child===et.child,kt=0,$t=0;if(dt)for(var Tt=et.child;Tt!==null;)kt|=Tt.lanes|Tt.childLanes,$t|=Tt.subtreeFlags&14680064,$t|=Tt.flags&14680064,Tt.return=et,Tt=Tt.sibling;else for(Tt=et.child;Tt!==null;)kt|=Tt.lanes|Tt.childLanes,$t|=Tt.subtreeFlags,$t|=Tt.flags,Tt.return=et,Tt=Tt.sibling;return et.subtreeFlags|=$t,et.childLanes=kt,dt}function Ej(et,dt,kt){var $t=dt.pendingProps;switch(wg(dt),dt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4(dt),null;case 1:return Zf(dt.type)&&$f(),S$4(dt),null;case 3:return $t=dt.stateNode,zh(),E$7(Wf),E$7(H$2),Eh(),$t.pendingContext&&($t.context=$t.pendingContext,$t.pendingContext=null),(et===null||et.child===null)&&(Gg(dt)?dt.flags|=4:et===null||et.memoizedState.isDehydrated&&!(dt.flags&256)||(dt.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(et,dt),S$4(dt),null;case 5:Bh(dt);var Tt=xh(wh.current);if(kt=dt.type,et!==null&&dt.stateNode!=null)Bj(et,dt,kt,$t,Tt),et.ref!==dt.ref&&(dt.flags|=512,dt.flags|=2097152);else{if(!$t){if(dt.stateNode===null)throw Error(p$4(166));return S$4(dt),null}if(et=xh(uh.current),Gg(dt)){$t=dt.stateNode,kt=dt.type;var Dt=dt.memoizedProps;switch($t[Of]=dt,$t[Pf]=Dt,et=(dt.mode&1)!==0,kt){case"dialog":D$4("cancel",$t),D$4("close",$t);break;case"iframe":case"object":case"embed":D$4("load",$t);break;case"video":case"audio":for(Tt=0;Tt<lf.length;Tt++)D$4(lf[Tt],$t);break;case"source":D$4("error",$t);break;case"img":case"image":case"link":D$4("error",$t),D$4("load",$t);break;case"details":D$4("toggle",$t);break;case"input":Za($t,Dt),D$4("invalid",$t);break;case"select":$t._wrapperState={wasMultiple:!!Dt.multiple},D$4("invalid",$t);break;case"textarea":hb($t,Dt),D$4("invalid",$t)}ub(kt,Dt),Tt=null;for(var Ft in Dt)if(Dt.hasOwnProperty(Ft)){var Ut=Dt[Ft];Ft==="children"?typeof Ut=="string"?$t.textContent!==Ut&&(Dt.suppressHydrationWarning!==!0&&Af($t.textContent,Ut,et),Tt=["children",Ut]):typeof Ut=="number"&&$t.textContent!==""+Ut&&(Dt.suppressHydrationWarning!==!0&&Af($t.textContent,Ut,et),Tt=["children",""+Ut]):ea.hasOwnProperty(Ft)&&Ut!=null&&Ft==="onScroll"&&D$4("scroll",$t)}switch(kt){case"input":Va($t),db($t,Dt,!0);break;case"textarea":Va($t),jb($t);break;case"select":case"option":break;default:typeof Dt.onClick=="function"&&($t.onclick=Bf)}$t=Tt,dt.updateQueue=$t,$t!==null&&(dt.flags|=4)}else{Ft=Tt.nodeType===9?Tt:Tt.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(kt)),et==="http://www.w3.org/1999/xhtml"?kt==="script"?(et=Ft.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof $t.is=="string"?et=Ft.createElement(kt,{is:$t.is}):(et=Ft.createElement(kt),kt==="select"&&(Ft=et,$t.multiple?Ft.multiple=!0:$t.size&&(Ft.size=$t.size))):et=Ft.createElementNS(et,kt),et[Of]=dt,et[Pf]=$t,zj(et,dt,!1,!1),dt.stateNode=et;e:{switch(Ft=vb(kt,$t),kt){case"dialog":D$4("cancel",et),D$4("close",et),Tt=$t;break;case"iframe":case"object":case"embed":D$4("load",et),Tt=$t;break;case"video":case"audio":for(Tt=0;Tt<lf.length;Tt++)D$4(lf[Tt],et);Tt=$t;break;case"source":D$4("error",et),Tt=$t;break;case"img":case"image":case"link":D$4("error",et),D$4("load",et),Tt=$t;break;case"details":D$4("toggle",et),Tt=$t;break;case"input":Za(et,$t),Tt=Ya(et,$t),D$4("invalid",et);break;case"option":Tt=$t;break;case"select":et._wrapperState={wasMultiple:!!$t.multiple},Tt=A$7({},$t,{value:void 0}),D$4("invalid",et);break;case"textarea":hb(et,$t),Tt=gb(et,$t),D$4("invalid",et);break;default:Tt=$t}ub(kt,Tt),Ut=Tt;for(Dt in Ut)if(Ut.hasOwnProperty(Dt)){var Ht=Ut[Dt];Dt==="style"?sb(et,Ht):Dt==="dangerouslySetInnerHTML"?(Ht=Ht?Ht.__html:void 0,Ht!=null&&nb(et,Ht)):Dt==="children"?typeof Ht=="string"?(kt!=="textarea"||Ht!=="")&&ob(et,Ht):typeof Ht=="number"&&ob(et,""+Ht):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(ea.hasOwnProperty(Dt)?Ht!=null&&Dt==="onScroll"&&D$4("scroll",et):Ht!=null&&ta$1(et,Dt,Ht,Ft))}switch(kt){case"input":Va(et),db(et,$t,!1);break;case"textarea":Va(et),jb(et);break;case"option":$t.value!=null&&et.setAttribute("value",""+Sa($t.value));break;case"select":et.multiple=!!$t.multiple,Dt=$t.value,Dt!=null?fb(et,!!$t.multiple,Dt,!1):$t.defaultValue!=null&&fb(et,!!$t.multiple,$t.defaultValue,!0);break;default:typeof Tt.onClick=="function"&&(et.onclick=Bf)}switch(kt){case"button":case"input":case"select":case"textarea":$t=!!$t.autoFocus;break e;case"img":$t=!0;break e;default:$t=!1}}$t&&(dt.flags|=4)}dt.ref!==null&&(dt.flags|=512,dt.flags|=2097152)}return S$4(dt),null;case 6:if(et&&dt.stateNode!=null)Cj(et,dt,et.memoizedProps,$t);else{if(typeof $t!="string"&&dt.stateNode===null)throw Error(p$4(166));if(kt=xh(wh.current),xh(uh.current),Gg(dt)){if($t=dt.stateNode,kt=dt.memoizedProps,$t[Of]=dt,(Dt=$t.nodeValue!==kt)&&(et=xg,et!==null))switch(et.tag){case 3:Af($t.nodeValue,kt,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af($t.nodeValue,kt,(et.mode&1)!==0)}Dt&&(dt.flags|=4)}else $t=(kt.nodeType===9?kt:kt.ownerDocument).createTextNode($t),$t[Of]=dt,dt.stateNode=$t}return S$4(dt),null;case 13:if(E$7(L$9),$t=dt.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&dt.mode&1&&!(dt.flags&128))Hg(),Ig(),dt.flags|=98560,Dt=!1;else if(Dt=Gg(dt),$t!==null&&$t.dehydrated!==null){if(et===null){if(!Dt)throw Error(p$4(318));if(Dt=dt.memoizedState,Dt=Dt!==null?Dt.dehydrated:null,!Dt)throw Error(p$4(317));Dt[Of]=dt}else Ig(),!(dt.flags&128)&&(dt.memoizedState=null),dt.flags|=4;S$4(dt),Dt=!1}else zg!==null&&(Fj(zg),zg=null),Dt=!0;if(!Dt)return dt.flags&65536?dt:null}return dt.flags&128?(dt.lanes=kt,dt):($t=$t!==null,$t!==(et!==null&&et.memoizedState!==null)&&$t&&(dt.child.flags|=8192,dt.mode&1&&(et===null||L$9.current&1?T$5===0&&(T$5=3):tj())),dt.updateQueue!==null&&(dt.flags|=4),S$4(dt),null);case 4:return zh(),Aj(et,dt),et===null&&sf(dt.stateNode.containerInfo),S$4(dt),null;case 10:return ah(dt.type._context),S$4(dt),null;case 17:return Zf(dt.type)&&$f(),S$4(dt),null;case 19:if(E$7(L$9),Dt=dt.memoizedState,Dt===null)return S$4(dt),null;if($t=(dt.flags&128)!==0,Ft=Dt.rendering,Ft===null)if($t)Dj(Dt,!1);else{if(T$5!==0||et!==null&&et.flags&128)for(et=dt.child;et!==null;){if(Ft=Ch(et),Ft!==null){for(dt.flags|=128,Dj(Dt,!1),$t=Ft.updateQueue,$t!==null&&(dt.updateQueue=$t,dt.flags|=4),dt.subtreeFlags=0,$t=kt,kt=dt.child;kt!==null;)Dt=kt,et=$t,Dt.flags&=14680066,Ft=Dt.alternate,Ft===null?(Dt.childLanes=0,Dt.lanes=et,Dt.child=null,Dt.subtreeFlags=0,Dt.memoizedProps=null,Dt.memoizedState=null,Dt.updateQueue=null,Dt.dependencies=null,Dt.stateNode=null):(Dt.childLanes=Ft.childLanes,Dt.lanes=Ft.lanes,Dt.child=Ft.child,Dt.subtreeFlags=0,Dt.deletions=null,Dt.memoizedProps=Ft.memoizedProps,Dt.memoizedState=Ft.memoizedState,Dt.updateQueue=Ft.updateQueue,Dt.type=Ft.type,et=Ft.dependencies,Dt.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),kt=kt.sibling;return G$3(L$9,L$9.current&1|2),dt.child}et=et.sibling}Dt.tail!==null&&B$5()>Gj&&(dt.flags|=128,$t=!0,Dj(Dt,!1),dt.lanes=4194304)}else{if(!$t)if(et=Ch(Ft),et!==null){if(dt.flags|=128,$t=!0,kt=et.updateQueue,kt!==null&&(dt.updateQueue=kt,dt.flags|=4),Dj(Dt,!0),Dt.tail===null&&Dt.tailMode==="hidden"&&!Ft.alternate&&!I$4)return S$4(dt),null}else 2*B$5()-Dt.renderingStartTime>Gj&&kt!==1073741824&&(dt.flags|=128,$t=!0,Dj(Dt,!1),dt.lanes=4194304);Dt.isBackwards?(Ft.sibling=dt.child,dt.child=Ft):(kt=Dt.last,kt!==null?kt.sibling=Ft:dt.child=Ft,Dt.last=Ft)}return Dt.tail!==null?(dt=Dt.tail,Dt.rendering=dt,Dt.tail=dt.sibling,Dt.renderingStartTime=B$5(),dt.sibling=null,kt=L$9.current,G$3(L$9,$t?kt&1|2:kt&1),dt):(S$4(dt),null);case 22:case 23:return Hj(),$t=dt.memoizedState!==null,et!==null&&et.memoizedState!==null!==$t&&(dt.flags|=8192),$t&&dt.mode&1?fj&1073741824&&(S$4(dt),dt.subtreeFlags&6&&(dt.flags|=8192)):S$4(dt),null;case 24:return null;case 25:return null}throw Error(p$4(156,dt.tag))}function Ij(et,dt){switch(wg(dt),dt.tag){case 1:return Zf(dt.type)&&$f(),et=dt.flags,et&65536?(dt.flags=et&-65537|128,dt):null;case 3:return zh(),E$7(Wf),E$7(H$2),Eh(),et=dt.flags,et&65536&&!(et&128)?(dt.flags=et&-65537|128,dt):null;case 5:return Bh(dt),null;case 13:if(E$7(L$9),et=dt.memoizedState,et!==null&&et.dehydrated!==null){if(dt.alternate===null)throw Error(p$4(340));Ig()}return et=dt.flags,et&65536?(dt.flags=et&-65537|128,dt):null;case 19:return E$7(L$9),null;case 4:return zh(),null;case 10:return ah(dt.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$5=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Lj(et,dt){var kt=et.ref;if(kt!==null)if(typeof kt=="function")try{kt(null)}catch($t){W$8(et,dt,$t)}else kt.current=null}function Mj(et,dt,kt){try{kt()}catch($t){W$8(et,dt,$t)}}var Nj=!1;function Oj(et,dt){if(Cf=dd,et=Me$2(),Ne(et)){if("selectionStart"in et)var kt={start:et.selectionStart,end:et.selectionEnd};else e:{kt=(kt=et.ownerDocument)&&kt.defaultView||window;var $t=kt.getSelection&&kt.getSelection();if($t&&$t.rangeCount!==0){kt=$t.anchorNode;var Tt=$t.anchorOffset,Dt=$t.focusNode;$t=$t.focusOffset;try{kt.nodeType,Dt.nodeType}catch{kt=null;break e}var Ft=0,Ut=-1,Ht=-1,Kt=0,Yt=0,Jt=et,Zt=null;t:for(;;){for(var er;Jt!==kt||Tt!==0&&Jt.nodeType!==3||(Ut=Ft+Tt),Jt!==Dt||$t!==0&&Jt.nodeType!==3||(Ht=Ft+$t),Jt.nodeType===3&&(Ft+=Jt.nodeValue.length),(er=Jt.firstChild)!==null;)Zt=Jt,Jt=er;for(;;){if(Jt===et)break t;if(Zt===kt&&++Kt===Tt&&(Ut=Ft),Zt===Dt&&++Yt===$t&&(Ht=Ft),(er=Jt.nextSibling)!==null)break;Jt=Zt,Zt=Jt.parentNode}Jt=er}kt=Ut===-1||Ht===-1?null:{start:Ut,end:Ht}}else kt=null}kt=kt||{start:0,end:0}}else kt=null;for(Df={focusedElem:et,selectionRange:kt},dd=!1,V$3=dt;V$3!==null;)if(dt=V$3,et=dt.child,(dt.subtreeFlags&1028)!==0&&et!==null)et.return=dt,V$3=et;else for(;V$3!==null;){dt=V$3;try{var rr=dt.alternate;if(dt.flags&1024)switch(dt.tag){case 0:case 11:case 15:break;case 1:if(rr!==null){var sr=rr.memoizedProps,nr=rr.memoizedState,ir=dt.stateNode,lr=ir.getSnapshotBeforeUpdate(dt.elementType===dt.type?sr:Ci(dt.type,sr),nr);ir.__reactInternalSnapshotBeforeUpdate=lr}break;case 3:var or=dt.stateNode.containerInfo;or.nodeType===1?or.textContent="":or.nodeType===9&&or.documentElement&&or.removeChild(or.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(cr){W$8(dt,dt.return,cr)}if(et=dt.sibling,et!==null){et.return=dt.return,V$3=et;break}V$3=dt.return}return rr=Nj,Nj=!1,rr}function Pj(et,dt,kt){var $t=dt.updateQueue;if($t=$t!==null?$t.lastEffect:null,$t!==null){var Tt=$t=$t.next;do{if((Tt.tag&et)===et){var Dt=Tt.destroy;Tt.destroy=void 0,Dt!==void 0&&Mj(dt,kt,Dt)}Tt=Tt.next}while(Tt!==$t)}}function Qj(et,dt){if(dt=dt.updateQueue,dt=dt!==null?dt.lastEffect:null,dt!==null){var kt=dt=dt.next;do{if((kt.tag&et)===et){var $t=kt.create;kt.destroy=$t()}kt=kt.next}while(kt!==dt)}}function Rj(et){var dt=et.ref;if(dt!==null){var kt=et.stateNode;switch(et.tag){case 5:et=kt;break;default:et=kt}typeof dt=="function"?dt(et):dt.current=et}}function Sj(et){var dt=et.alternate;dt!==null&&(et.alternate=null,Sj(dt)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(dt=et.stateNode,dt!==null&&(delete dt[Of],delete dt[Pf],delete dt[of],delete dt[Qf],delete dt[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Tj(et){return et.tag===5||et.tag===3||et.tag===4}function Uj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Tj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Vj(et,dt,kt){var $t=et.tag;if($t===5||$t===6)et=et.stateNode,dt?kt.nodeType===8?kt.parentNode.insertBefore(et,dt):kt.insertBefore(et,dt):(kt.nodeType===8?(dt=kt.parentNode,dt.insertBefore(et,kt)):(dt=kt,dt.appendChild(et)),kt=kt._reactRootContainer,kt!=null||dt.onclick!==null||(dt.onclick=Bf));else if($t!==4&&(et=et.child,et!==null))for(Vj(et,dt,kt),et=et.sibling;et!==null;)Vj(et,dt,kt),et=et.sibling}function Wj(et,dt,kt){var $t=et.tag;if($t===5||$t===6)et=et.stateNode,dt?kt.insertBefore(et,dt):kt.appendChild(et);else if($t!==4&&(et=et.child,et!==null))for(Wj(et,dt,kt),et=et.sibling;et!==null;)Wj(et,dt,kt),et=et.sibling}var X$7=null,Xj=!1;function Yj(et,dt,kt){for(kt=kt.child;kt!==null;)Zj(et,dt,kt),kt=kt.sibling}function Zj(et,dt,kt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,kt)}catch{}switch(kt.tag){case 5:U$5||Lj(kt,dt);case 6:var $t=X$7,Tt=Xj;X$7=null,Yj(et,dt,kt),X$7=$t,Xj=Tt,X$7!==null&&(Xj?(et=X$7,kt=kt.stateNode,et.nodeType===8?et.parentNode.removeChild(kt):et.removeChild(kt)):X$7.removeChild(kt.stateNode));break;case 18:X$7!==null&&(Xj?(et=X$7,kt=kt.stateNode,et.nodeType===8?Kf(et.parentNode,kt):et.nodeType===1&&Kf(et,kt),bd(et)):Kf(X$7,kt.stateNode));break;case 4:$t=X$7,Tt=Xj,X$7=kt.stateNode.containerInfo,Xj=!0,Yj(et,dt,kt),X$7=$t,Xj=Tt;break;case 0:case 11:case 14:case 15:if(!U$5&&($t=kt.updateQueue,$t!==null&&($t=$t.lastEffect,$t!==null))){Tt=$t=$t.next;do{var Dt=Tt,Ft=Dt.destroy;Dt=Dt.tag,Ft!==void 0&&(Dt&2||Dt&4)&&Mj(kt,dt,Ft),Tt=Tt.next}while(Tt!==$t)}Yj(et,dt,kt);break;case 1:if(!U$5&&(Lj(kt,dt),$t=kt.stateNode,typeof $t.componentWillUnmount=="function"))try{$t.props=kt.memoizedProps,$t.state=kt.memoizedState,$t.componentWillUnmount()}catch(Ut){W$8(kt,dt,Ut)}Yj(et,dt,kt);break;case 21:Yj(et,dt,kt);break;case 22:kt.mode&1?(U$5=($t=U$5)||kt.memoizedState!==null,Yj(et,dt,kt),U$5=$t):Yj(et,dt,kt);break;default:Yj(et,dt,kt)}}function ak(et){var dt=et.updateQueue;if(dt!==null){et.updateQueue=null;var kt=et.stateNode;kt===null&&(kt=et.stateNode=new Kj),dt.forEach(function($t){var Tt=bk.bind(null,et,$t);kt.has($t)||(kt.add($t),$t.then(Tt,Tt))})}}function ck(et,dt){var kt=dt.deletions;if(kt!==null)for(var $t=0;$t<kt.length;$t++){var Tt=kt[$t];try{var Dt=et,Ft=dt,Ut=Ft;e:for(;Ut!==null;){switch(Ut.tag){case 5:X$7=Ut.stateNode,Xj=!1;break e;case 3:X$7=Ut.stateNode.containerInfo,Xj=!0;break e;case 4:X$7=Ut.stateNode.containerInfo,Xj=!0;break e}Ut=Ut.return}if(X$7===null)throw Error(p$4(160));Zj(Dt,Ft,Tt),X$7=null,Xj=!1;var Ht=Tt.alternate;Ht!==null&&(Ht.return=null),Tt.return=null}catch(Kt){W$8(Tt,dt,Kt)}}if(dt.subtreeFlags&12854)for(dt=dt.child;dt!==null;)dk(dt,et),dt=dt.sibling}function dk(et,dt){var kt=et.alternate,$t=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(ck(dt,et),ek(et),$t&4){try{Pj(3,et,et.return),Qj(3,et)}catch(sr){W$8(et,et.return,sr)}try{Pj(5,et,et.return)}catch(sr){W$8(et,et.return,sr)}}break;case 1:ck(dt,et),ek(et),$t&512&&kt!==null&&Lj(kt,kt.return);break;case 5:if(ck(dt,et),ek(et),$t&512&&kt!==null&&Lj(kt,kt.return),et.flags&32){var Tt=et.stateNode;try{ob(Tt,"")}catch(sr){W$8(et,et.return,sr)}}if($t&4&&(Tt=et.stateNode,Tt!=null)){var Dt=et.memoizedProps,Ft=kt!==null?kt.memoizedProps:Dt,Ut=et.type,Ht=et.updateQueue;if(et.updateQueue=null,Ht!==null)try{Ut==="input"&&Dt.type==="radio"&&Dt.name!=null&&ab(Tt,Dt),vb(Ut,Ft);var Kt=vb(Ut,Dt);for(Ft=0;Ft<Ht.length;Ft+=2){var Yt=Ht[Ft],Jt=Ht[Ft+1];Yt==="style"?sb(Tt,Jt):Yt==="dangerouslySetInnerHTML"?nb(Tt,Jt):Yt==="children"?ob(Tt,Jt):ta$1(Tt,Yt,Jt,Kt)}switch(Ut){case"input":bb(Tt,Dt);break;case"textarea":ib(Tt,Dt);break;case"select":var Zt=Tt._wrapperState.wasMultiple;Tt._wrapperState.wasMultiple=!!Dt.multiple;var er=Dt.value;er!=null?fb(Tt,!!Dt.multiple,er,!1):Zt!==!!Dt.multiple&&(Dt.defaultValue!=null?fb(Tt,!!Dt.multiple,Dt.defaultValue,!0):fb(Tt,!!Dt.multiple,Dt.multiple?[]:"",!1))}Tt[Pf]=Dt}catch(sr){W$8(et,et.return,sr)}}break;case 6:if(ck(dt,et),ek(et),$t&4){if(et.stateNode===null)throw Error(p$4(162));Tt=et.stateNode,Dt=et.memoizedProps;try{Tt.nodeValue=Dt}catch(sr){W$8(et,et.return,sr)}}break;case 3:if(ck(dt,et),ek(et),$t&4&&kt!==null&&kt.memoizedState.isDehydrated)try{bd(dt.containerInfo)}catch(sr){W$8(et,et.return,sr)}break;case 4:ck(dt,et),ek(et);break;case 13:ck(dt,et),ek(et),Tt=et.child,Tt.flags&8192&&(Dt=Tt.memoizedState!==null,Tt.stateNode.isHidden=Dt,!Dt||Tt.alternate!==null&&Tt.alternate.memoizedState!==null||(fk=B$5())),$t&4&&ak(et);break;case 22:if(Yt=kt!==null&&kt.memoizedState!==null,et.mode&1?(U$5=(Kt=U$5)||Yt,ck(dt,et),U$5=Kt):ck(dt,et),ek(et),$t&8192){if(Kt=et.memoizedState!==null,(et.stateNode.isHidden=Kt)&&!Yt&&et.mode&1)for(V$3=et,Yt=et.child;Yt!==null;){for(Jt=V$3=Yt;V$3!==null;){switch(Zt=V$3,er=Zt.child,Zt.tag){case 0:case 11:case 14:case 15:Pj(4,Zt,Zt.return);break;case 1:Lj(Zt,Zt.return);var rr=Zt.stateNode;if(typeof rr.componentWillUnmount=="function"){$t=Zt,kt=Zt.return;try{dt=$t,rr.props=dt.memoizedProps,rr.state=dt.memoizedState,rr.componentWillUnmount()}catch(sr){W$8($t,kt,sr)}}break;case 5:Lj(Zt,Zt.return);break;case 22:if(Zt.memoizedState!==null){gk(Jt);continue}}er!==null?(er.return=Zt,V$3=er):gk(Jt)}Yt=Yt.sibling}e:for(Yt=null,Jt=et;;){if(Jt.tag===5){if(Yt===null){Yt=Jt;try{Tt=Jt.stateNode,Kt?(Dt=Tt.style,typeof Dt.setProperty=="function"?Dt.setProperty("display","none","important"):Dt.display="none"):(Ut=Jt.stateNode,Ht=Jt.memoizedProps.style,Ft=Ht!=null&&Ht.hasOwnProperty("display")?Ht.display:null,Ut.style.display=rb("display",Ft))}catch(sr){W$8(et,et.return,sr)}}}else if(Jt.tag===6){if(Yt===null)try{Jt.stateNode.nodeValue=Kt?"":Jt.memoizedProps}catch(sr){W$8(et,et.return,sr)}}else if((Jt.tag!==22&&Jt.tag!==23||Jt.memoizedState===null||Jt===et)&&Jt.child!==null){Jt.child.return=Jt,Jt=Jt.child;continue}if(Jt===et)break e;for(;Jt.sibling===null;){if(Jt.return===null||Jt.return===et)break e;Yt===Jt&&(Yt=null),Jt=Jt.return}Yt===Jt&&(Yt=null),Jt.sibling.return=Jt.return,Jt=Jt.sibling}}break;case 19:ck(dt,et),ek(et),$t&4&&ak(et);break;case 21:break;default:ck(dt,et),ek(et)}}function ek(et){var dt=et.flags;if(dt&2){try{e:{for(var kt=et.return;kt!==null;){if(Tj(kt)){var $t=kt;break e}kt=kt.return}throw Error(p$4(160))}switch($t.tag){case 5:var Tt=$t.stateNode;$t.flags&32&&(ob(Tt,""),$t.flags&=-33);var Dt=Uj(et);Wj(et,Dt,Tt);break;case 3:case 4:var Ft=$t.stateNode.containerInfo,Ut=Uj(et);Vj(et,Ut,Ft);break;default:throw Error(p$4(161))}}catch(Ht){W$8(et,et.return,Ht)}et.flags&=-3}dt&4096&&(et.flags&=-4097)}function hk(et,dt,kt){V$3=et,ik(et)}function ik(et,dt,kt){for(var $t=(et.mode&1)!==0;V$3!==null;){var Tt=V$3,Dt=Tt.child;if(Tt.tag===22&&$t){var Ft=Tt.memoizedState!==null||Jj;if(!Ft){var Ut=Tt.alternate,Ht=Ut!==null&&Ut.memoizedState!==null||U$5;Ut=Jj;var Kt=U$5;if(Jj=Ft,(U$5=Ht)&&!Kt)for(V$3=Tt;V$3!==null;)Ft=V$3,Ht=Ft.child,Ft.tag===22&&Ft.memoizedState!==null?jk(Tt):Ht!==null?(Ht.return=Ft,V$3=Ht):jk(Tt);for(;Dt!==null;)V$3=Dt,ik(Dt),Dt=Dt.sibling;V$3=Tt,Jj=Ut,U$5=Kt}kk(et)}else Tt.subtreeFlags&8772&&Dt!==null?(Dt.return=Tt,V$3=Dt):kk(et)}}function kk(et){for(;V$3!==null;){var dt=V$3;if(dt.flags&8772){var kt=dt.alternate;try{if(dt.flags&8772)switch(dt.tag){case 0:case 11:case 15:U$5||Qj(5,dt);break;case 1:var $t=dt.stateNode;if(dt.flags&4&&!U$5)if(kt===null)$t.componentDidMount();else{var Tt=dt.elementType===dt.type?kt.memoizedProps:Ci(dt.type,kt.memoizedProps);$t.componentDidUpdate(Tt,kt.memoizedState,$t.__reactInternalSnapshotBeforeUpdate)}var Dt=dt.updateQueue;Dt!==null&&sh(dt,Dt,$t);break;case 3:var Ft=dt.updateQueue;if(Ft!==null){if(kt=null,dt.child!==null)switch(dt.child.tag){case 5:kt=dt.child.stateNode;break;case 1:kt=dt.child.stateNode}sh(dt,Ft,kt)}break;case 5:var Ut=dt.stateNode;if(kt===null&&dt.flags&4){kt=Ut;var Ht=dt.memoizedProps;switch(dt.type){case"button":case"input":case"select":case"textarea":Ht.autoFocus&&kt.focus();break;case"img":Ht.src&&(kt.src=Ht.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(dt.memoizedState===null){var Kt=dt.alternate;if(Kt!==null){var Yt=Kt.memoizedState;if(Yt!==null){var Jt=Yt.dehydrated;Jt!==null&&bd(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$5||dt.flags&512&&Rj(dt)}catch(Zt){W$8(dt,dt.return,Zt)}}if(dt===et){V$3=null;break}if(kt=dt.sibling,kt!==null){kt.return=dt.return,V$3=kt;break}V$3=dt.return}}function gk(et){for(;V$3!==null;){var dt=V$3;if(dt===et){V$3=null;break}var kt=dt.sibling;if(kt!==null){kt.return=dt.return,V$3=kt;break}V$3=dt.return}}function jk(et){for(;V$3!==null;){var dt=V$3;try{switch(dt.tag){case 0:case 11:case 15:var kt=dt.return;try{Qj(4,dt)}catch(Ht){W$8(dt,kt,Ht)}break;case 1:var $t=dt.stateNode;if(typeof $t.componentDidMount=="function"){var Tt=dt.return;try{$t.componentDidMount()}catch(Ht){W$8(dt,Tt,Ht)}}var Dt=dt.return;try{Rj(dt)}catch(Ht){W$8(dt,Dt,Ht)}break;case 5:var Ft=dt.return;try{Rj(dt)}catch(Ht){W$8(dt,Ft,Ht)}}}catch(Ht){W$8(dt,dt.return,Ht)}if(dt===et){V$3=null;break}var Ut=dt.sibling;if(Ut!==null){Ut.return=dt.return,V$3=Ut;break}V$3=dt.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$4=0,Q$4=null,Y$4=null,Z$5=0,fj=0,ej=Uf(0),T$5=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$4(){return K$4&6?B$5():Ak!==-1?Ak:Ak=B$5()}function yi(et){return et.mode&1?K$4&2&&Z$5!==0?Z$5&-Z$5:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(et=C$8,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function gi(et,dt,kt,$t){if(50<yk)throw yk=0,zk=null,Error(p$4(185));Ac(et,kt,$t),(!(K$4&2)||et!==Q$4)&&(et===Q$4&&(!(K$4&2)&&(qk|=kt),T$5===4&&Ck(et,Z$5)),Dk(et,$t),kt===1&&K$4===0&&!(dt.mode&1)&&(Gj=B$5()+500,fg&&jg()))}function Dk(et,dt){var kt=et.callbackNode;wc(et,dt);var $t=uc(et,et===Q$4?Z$5:0);if($t===0)kt!==null&&bc(kt),et.callbackNode=null,et.callbackPriority=0;else if(dt=$t&-$t,et.callbackPriority!==dt){if(kt!=null&&bc(kt),dt===1)et.tag===0?ig(Ek.bind(null,et)):hg(Ek.bind(null,et)),Jf(function(){!(K$4&6)&&jg()}),kt=null;else{switch(Dc($t)){case 1:kt=fc;break;case 4:kt=gc;break;case 16:kt=hc;break;case 536870912:kt=jc;break;default:kt=hc}kt=Fk(kt,Gk.bind(null,et))}et.callbackPriority=dt,et.callbackNode=kt}}function Gk(et,dt){if(Ak=-1,Bk=0,K$4&6)throw Error(p$4(327));var kt=et.callbackNode;if(Hk()&&et.callbackNode!==kt)return null;var $t=uc(et,et===Q$4?Z$5:0);if($t===0)return null;if($t&30||$t&et.expiredLanes||dt)dt=Ik(et,$t);else{dt=$t;var Tt=K$4;K$4|=2;var Dt=Jk();(Q$4!==et||Z$5!==dt)&&(uk=null,Gj=B$5()+500,Kk(et,dt));do try{Lk();break}catch(Ut){Mk(et,Ut)}while(1);$g(),mk.current=Dt,K$4=Tt,Y$4!==null?dt=0:(Q$4=null,Z$5=0,dt=T$5)}if(dt!==0){if(dt===2&&(Tt=xc(et),Tt!==0&&($t=Tt,dt=Nk(et,Tt))),dt===1)throw kt=pk,Kk(et,0),Ck(et,$t),Dk(et,B$5()),kt;if(dt===6)Ck(et,$t);else{if(Tt=et.current.alternate,!($t&30)&&!Ok(Tt)&&(dt=Ik(et,$t),dt===2&&(Dt=xc(et),Dt!==0&&($t=Dt,dt=Nk(et,Dt))),dt===1))throw kt=pk,Kk(et,0),Ck(et,$t),Dk(et,B$5()),kt;switch(et.finishedWork=Tt,et.finishedLanes=$t,dt){case 0:case 1:throw Error(p$4(345));case 2:Pk(et,tk$1,uk);break;case 3:if(Ck(et,$t),($t&130023424)===$t&&(dt=fk+500-B$5(),10<dt)){if(uc(et,0)!==0)break;if(Tt=et.suspendedLanes,(Tt&$t)!==$t){R$4(),et.pingedLanes|=et.suspendedLanes&Tt;break}et.timeoutHandle=Ff(Pk.bind(null,et,tk$1,uk),dt);break}Pk(et,tk$1,uk);break;case 4:if(Ck(et,$t),($t&4194240)===$t)break;for(dt=et.eventTimes,Tt=-1;0<$t;){var Ft=31-oc($t);Dt=1<<Ft,Ft=dt[Ft],Ft>Tt&&(Tt=Ft),$t&=~Dt}if($t=Tt,$t=B$5()-$t,$t=(120>$t?120:480>$t?480:1080>$t?1080:1920>$t?1920:3e3>$t?3e3:4320>$t?4320:1960*lk($t/1960))-$t,10<$t){et.timeoutHandle=Ff(Pk.bind(null,et,tk$1,uk),$t);break}Pk(et,tk$1,uk);break;case 5:Pk(et,tk$1,uk);break;default:throw Error(p$4(329))}}}return Dk(et,B$5()),et.callbackNode===kt?Gk.bind(null,et):null}function Nk(et,dt){var kt=sk;return et.current.memoizedState.isDehydrated&&(Kk(et,dt).flags|=256),et=Ik(et,dt),et!==2&&(dt=tk$1,tk$1=kt,dt!==null&&Fj(dt)),et}function Fj(et){tk$1===null?tk$1=et:tk$1.push.apply(tk$1,et)}function Ok(et){for(var dt=et;;){if(dt.flags&16384){var kt=dt.updateQueue;if(kt!==null&&(kt=kt.stores,kt!==null))for(var $t=0;$t<kt.length;$t++){var Tt=kt[$t],Dt=Tt.getSnapshot;Tt=Tt.value;try{if(!He$3(Dt(),Tt))return!1}catch{return!1}}}if(kt=dt.child,dt.subtreeFlags&16384&&kt!==null)kt.return=dt,dt=kt;else{if(dt===et)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===et)return!0;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}}return!0}function Ck(et,dt){for(dt&=~rk,dt&=~qk,et.suspendedLanes|=dt,et.pingedLanes&=~dt,et=et.expirationTimes;0<dt;){var kt=31-oc(dt),$t=1<<kt;et[kt]=-1,dt&=~$t}}function Ek(et){if(K$4&6)throw Error(p$4(327));Hk();var dt=uc(et,0);if(!(dt&1))return Dk(et,B$5()),null;var kt=Ik(et,dt);if(et.tag!==0&&kt===2){var $t=xc(et);$t!==0&&(dt=$t,kt=Nk(et,$t))}if(kt===1)throw kt=pk,Kk(et,0),Ck(et,dt),Dk(et,B$5()),kt;if(kt===6)throw Error(p$4(345));return et.finishedWork=et.current.alternate,et.finishedLanes=dt,Pk(et,tk$1,uk),Dk(et,B$5()),null}function Qk(et,dt){var kt=K$4;K$4|=1;try{return et(dt)}finally{K$4=kt,K$4===0&&(Gj=B$5()+500,fg&&jg())}}function Rk(et){wk!==null&&wk.tag===0&&!(K$4&6)&&Hk();var dt=K$4;K$4|=1;var kt=ok.transition,$t=C$8;try{if(ok.transition=null,C$8=1,et)return et()}finally{C$8=$t,ok.transition=kt,K$4=dt,!(K$4&6)&&jg()}}function Hj(){fj=ej.current,E$7(ej)}function Kk(et,dt){et.finishedWork=null,et.finishedLanes=0;var kt=et.timeoutHandle;if(kt!==-1&&(et.timeoutHandle=-1,Gf(kt)),Y$4!==null)for(kt=Y$4.return;kt!==null;){var $t=kt;switch(wg($t),$t.tag){case 1:$t=$t.type.childContextTypes,$t!=null&&$f();break;case 3:zh(),E$7(Wf),E$7(H$2),Eh();break;case 5:Bh($t);break;case 4:zh();break;case 13:E$7(L$9);break;case 19:E$7(L$9);break;case 10:ah($t.type._context);break;case 22:case 23:Hj()}kt=kt.return}if(Q$4=et,Y$4=et=Pg(et.current,null),Z$5=fj=dt,T$5=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(dt=0;dt<fh.length;dt++)if(kt=fh[dt],$t=kt.interleaved,$t!==null){kt.interleaved=null;var Tt=$t.next,Dt=kt.pending;if(Dt!==null){var Ft=Dt.next;Dt.next=Tt,$t.next=Ft}kt.pending=$t}fh=null}return et}function Mk(et,dt){do{var kt=Y$4;try{if($g(),Fh.current=Rh,Ih){for(var $t=M$6.memoizedState;$t!==null;){var Tt=$t.queue;Tt!==null&&(Tt.pending=null),$t=$t.next}Ih=!1}if(Hh=0,O$7=N$3=M$6=null,Jh=!1,Kh=0,nk.current=null,kt===null||kt.return===null){T$5=1,pk=dt,Y$4=null;break}e:{var Dt=et,Ft=kt.return,Ut=kt,Ht=dt;if(dt=Z$5,Ut.flags|=32768,Ht!==null&&typeof Ht=="object"&&typeof Ht.then=="function"){var Kt=Ht,Yt=Ut,Jt=Yt.tag;if(!(Yt.mode&1)&&(Jt===0||Jt===11||Jt===15)){var Zt=Yt.alternate;Zt?(Yt.updateQueue=Zt.updateQueue,Yt.memoizedState=Zt.memoizedState,Yt.lanes=Zt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var er=Ui(Ft);if(er!==null){er.flags&=-257,Vi(er,Ft,Ut,Dt,dt),er.mode&1&&Si(Dt,Kt,dt),dt=er,Ht=Kt;var rr=dt.updateQueue;if(rr===null){var sr=new Set;sr.add(Ht),dt.updateQueue=sr}else rr.add(Ht);break e}else{if(!(dt&1)){Si(Dt,Kt,dt),tj();break e}Ht=Error(p$4(426))}}else if(I$4&&Ut.mode&1){var nr=Ui(Ft);if(nr!==null){!(nr.flags&65536)&&(nr.flags|=256),Vi(nr,Ft,Ut,Dt,dt),Jg(Ji(Ht,Ut));break e}}Dt=Ht=Ji(Ht,Ut),T$5!==4&&(T$5=2),sk===null?sk=[Dt]:sk.push(Dt),Dt=Ft;do{switch(Dt.tag){case 3:Dt.flags|=65536,dt&=-dt,Dt.lanes|=dt;var ir=Ni(Dt,Ht,dt);ph(Dt,ir);break e;case 1:Ut=Ht;var lr=Dt.type,or=Dt.stateNode;if(!(Dt.flags&128)&&(typeof lr.getDerivedStateFromError=="function"||or!==null&&typeof or.componentDidCatch=="function"&&(Ri===null||!Ri.has(or)))){Dt.flags|=65536,dt&=-dt,Dt.lanes|=dt;var cr=Qi(Dt,Ut,dt);ph(Dt,cr);break e}}Dt=Dt.return}while(Dt!==null)}Sk(kt)}catch(dr){dt=dr,Y$4===kt&&kt!==null&&(Y$4=kt=kt.return);continue}break}while(1)}function Jk(){var et=mk.current;return mk.current=Rh,et===null?Rh:et}function tj(){(T$5===0||T$5===3||T$5===2)&&(T$5=4),Q$4===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$4,Z$5)}function Ik(et,dt){var kt=K$4;K$4|=2;var $t=Jk();(Q$4!==et||Z$5!==dt)&&(uk=null,Kk(et,dt));do try{Tk();break}catch(Tt){Mk(et,Tt)}while(1);if($g(),K$4=kt,mk.current=$t,Y$4!==null)throw Error(p$4(261));return Q$4=null,Z$5=0,T$5}function Tk(){for(;Y$4!==null;)Uk(Y$4)}function Lk(){for(;Y$4!==null&&!cc();)Uk(Y$4)}function Uk(et){var dt=Vk(et.alternate,et,fj);et.memoizedProps=et.pendingProps,dt===null?Sk(et):Y$4=dt,nk.current=null}function Sk(et){var dt=et;do{var kt=dt.alternate;if(et=dt.return,dt.flags&32768){if(kt=Ij(kt,dt),kt!==null){kt.flags&=32767,Y$4=kt;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$5=6,Y$4=null;return}}else if(kt=Ej(kt,dt,fj),kt!==null){Y$4=kt;return}if(dt=dt.sibling,dt!==null){Y$4=dt;return}Y$4=dt=et}while(dt!==null);T$5===0&&(T$5=5)}function Pk(et,dt,kt){var $t=C$8,Tt=ok.transition;try{ok.transition=null,C$8=1,Wk(et,dt,kt,$t)}finally{ok.transition=Tt,C$8=$t}return null}function Wk(et,dt,kt,$t){do Hk();while(wk!==null);if(K$4&6)throw Error(p$4(327));kt=et.finishedWork;var Tt=et.finishedLanes;if(kt===null)return null;if(et.finishedWork=null,et.finishedLanes=0,kt===et.current)throw Error(p$4(177));et.callbackNode=null,et.callbackPriority=0;var Dt=kt.lanes|kt.childLanes;if(Bc(et,Dt),et===Q$4&&(Y$4=Q$4=null,Z$5=0),!(kt.subtreeFlags&2064)&&!(kt.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),Dt=(kt.flags&15990)!==0,kt.subtreeFlags&15990||Dt){Dt=ok.transition,ok.transition=null;var Ft=C$8;C$8=1;var Ut=K$4;K$4|=4,nk.current=null,Oj(et,kt),dk(kt,et),Oe$1(Df),dd=!!Cf,Df=Cf=null,et.current=kt,hk(kt),dc(),K$4=Ut,C$8=Ft,ok.transition=Dt}else et.current=kt;if(vk&&(vk=!1,wk=et,xk=Tt),Dt=et.pendingLanes,Dt===0&&(Ri=null),mc(kt.stateNode),Dk(et,B$5()),dt!==null)for($t=et.onRecoverableError,kt=0;kt<dt.length;kt++)Tt=dt[kt],$t(Tt.value,{componentStack:Tt.stack,digest:Tt.digest});if(Oi)throw Oi=!1,et=Pi,Pi=null,et;return xk&1&&et.tag!==0&&Hk(),Dt=et.pendingLanes,Dt&1?et===zk?yk++:(yk=0,zk=et):yk=0,jg(),null}function Hk(){if(wk!==null){var et=Dc(xk),dt=ok.transition,kt=C$8;try{if(ok.transition=null,C$8=16>et?16:et,wk===null)var $t=!1;else{if(et=wk,wk=null,xk=0,K$4&6)throw Error(p$4(331));var Tt=K$4;for(K$4|=4,V$3=et.current;V$3!==null;){var Dt=V$3,Ft=Dt.child;if(V$3.flags&16){var Ut=Dt.deletions;if(Ut!==null){for(var Ht=0;Ht<Ut.length;Ht++){var Kt=Ut[Ht];for(V$3=Kt;V$3!==null;){var Yt=V$3;switch(Yt.tag){case 0:case 11:case 15:Pj(8,Yt,Dt)}var Jt=Yt.child;if(Jt!==null)Jt.return=Yt,V$3=Jt;else for(;V$3!==null;){Yt=V$3;var Zt=Yt.sibling,er=Yt.return;if(Sj(Yt),Yt===Kt){V$3=null;break}if(Zt!==null){Zt.return=er,V$3=Zt;break}V$3=er}}}var rr=Dt.alternate;if(rr!==null){var sr=rr.child;if(sr!==null){rr.child=null;do{var nr=sr.sibling;sr.sibling=null,sr=nr}while(sr!==null)}}V$3=Dt}}if(Dt.subtreeFlags&2064&&Ft!==null)Ft.return=Dt,V$3=Ft;else e:for(;V$3!==null;){if(Dt=V$3,Dt.flags&2048)switch(Dt.tag){case 0:case 11:case 15:Pj(9,Dt,Dt.return)}var ir=Dt.sibling;if(ir!==null){ir.return=Dt.return,V$3=ir;break e}V$3=Dt.return}}var lr=et.current;for(V$3=lr;V$3!==null;){Ft=V$3;var or=Ft.child;if(Ft.subtreeFlags&2064&&or!==null)or.return=Ft,V$3=or;else e:for(Ft=lr;V$3!==null;){if(Ut=V$3,Ut.flags&2048)try{switch(Ut.tag){case 0:case 11:case 15:Qj(9,Ut)}}catch(dr){W$8(Ut,Ut.return,dr)}if(Ut===Ft){V$3=null;break e}var cr=Ut.sibling;if(cr!==null){cr.return=Ut.return,V$3=cr;break e}V$3=Ut.return}}if(K$4=Tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}$t=!0}return $t}finally{C$8=kt,ok.transition=dt}}return!1}function Xk(et,dt,kt){dt=Ji(kt,dt),dt=Ni(et,dt,1),et=nh(et,dt,1),dt=R$4(),et!==null&&(Ac(et,1,dt),Dk(et,dt))}function W$8(et,dt,kt){if(et.tag===3)Xk(et,et,kt);else for(;dt!==null;){if(dt.tag===3){Xk(dt,et,kt);break}else if(dt.tag===1){var $t=dt.stateNode;if(typeof dt.type.getDerivedStateFromError=="function"||typeof $t.componentDidCatch=="function"&&(Ri===null||!Ri.has($t))){et=Ji(kt,et),et=Qi(dt,et,1),dt=nh(dt,et,1),et=R$4(),dt!==null&&(Ac(dt,1,et),Dk(dt,et));break}}dt=dt.return}}function Ti(et,dt,kt){var $t=et.pingCache;$t!==null&&$t.delete(dt),dt=R$4(),et.pingedLanes|=et.suspendedLanes&kt,Q$4===et&&(Z$5&kt)===kt&&(T$5===4||T$5===3&&(Z$5&130023424)===Z$5&&500>B$5()-fk?Kk(et,0):rk|=kt),Dk(et,dt)}function Yk(et,dt){dt===0&&(et.mode&1?(dt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):dt=1);var kt=R$4();et=ih(et,dt),et!==null&&(Ac(et,dt,kt),Dk(et,kt))}function uj(et){var dt=et.memoizedState,kt=0;dt!==null&&(kt=dt.retryLane),Yk(et,kt)}function bk(et,dt){var kt=0;switch(et.tag){case 13:var $t=et.stateNode,Tt=et.memoizedState;Tt!==null&&(kt=Tt.retryLane);break;case 19:$t=et.stateNode;break;default:throw Error(p$4(314))}$t!==null&&$t.delete(dt),Yk(et,kt)}var Vk;Vk=function(et,dt,kt){if(et!==null)if(et.memoizedProps!==dt.pendingProps||Wf.current)dh=!0;else{if(!(et.lanes&kt)&&!(dt.flags&128))return dh=!1,yj(et,dt,kt);dh=!!(et.flags&131072)}else dh=!1,I$4&&dt.flags&1048576&&ug(dt,ng,dt.index);switch(dt.lanes=0,dt.tag){case 2:var $t=dt.type;ij(et,dt),et=dt.pendingProps;var Tt=Yf(dt,H$2.current);ch(dt,kt),Tt=Nh(null,dt,$t,et,Tt,kt);var Dt=Sh();return dt.flags|=1,typeof Tt=="object"&&Tt!==null&&typeof Tt.render=="function"&&Tt.$$typeof===void 0?(dt.tag=1,dt.memoizedState=null,dt.updateQueue=null,Zf($t)?(Dt=!0,cg(dt)):Dt=!1,dt.memoizedState=Tt.state!==null&&Tt.state!==void 0?Tt.state:null,kh(dt),Tt.updater=Ei,dt.stateNode=Tt,Tt._reactInternals=dt,Ii(dt,$t,et,kt),dt=jj(null,dt,$t,!0,Dt,kt)):(dt.tag=0,I$4&&Dt&&vg(dt),Xi(null,dt,Tt,kt),dt=dt.child),dt;case 16:$t=dt.elementType;e:{switch(ij(et,dt),et=dt.pendingProps,Tt=$t._init,$t=Tt($t._payload),dt.type=$t,Tt=dt.tag=Zk($t),et=Ci($t,et),Tt){case 0:dt=cj(null,dt,$t,et,kt);break e;case 1:dt=hj(null,dt,$t,et,kt);break e;case 11:dt=Yi(null,dt,$t,et,kt);break e;case 14:dt=$i(null,dt,$t,Ci($t.type,et),kt);break e}throw Error(p$4(306,$t,""))}return dt;case 0:return $t=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===$t?Tt:Ci($t,Tt),cj(et,dt,$t,Tt,kt);case 1:return $t=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===$t?Tt:Ci($t,Tt),hj(et,dt,$t,Tt,kt);case 3:e:{if(kj(dt),et===null)throw Error(p$4(387));$t=dt.pendingProps,Dt=dt.memoizedState,Tt=Dt.element,lh(et,dt),qh(dt,$t,null,kt);var Ft=dt.memoizedState;if($t=Ft.element,Dt.isDehydrated)if(Dt={element:$t,isDehydrated:!1,cache:Ft.cache,pendingSuspenseBoundaries:Ft.pendingSuspenseBoundaries,transitions:Ft.transitions},dt.updateQueue.baseState=Dt,dt.memoizedState=Dt,dt.flags&256){Tt=Ji(Error(p$4(423)),dt),dt=lj(et,dt,$t,kt,Tt);break e}else if($t!==Tt){Tt=Ji(Error(p$4(424)),dt),dt=lj(et,dt,$t,kt,Tt);break e}else for(yg=Lf(dt.stateNode.containerInfo.firstChild),xg=dt,I$4=!0,zg=null,kt=Vg(dt,null,$t,kt),dt.child=kt;kt;)kt.flags=kt.flags&-3|4096,kt=kt.sibling;else{if(Ig(),$t===Tt){dt=Zi(et,dt,kt);break e}Xi(et,dt,$t,kt)}dt=dt.child}return dt;case 5:return Ah(dt),et===null&&Eg(dt),$t=dt.type,Tt=dt.pendingProps,Dt=et!==null?et.memoizedProps:null,Ft=Tt.children,Ef($t,Tt)?Ft=null:Dt!==null&&Ef($t,Dt)&&(dt.flags|=32),gj(et,dt),Xi(et,dt,Ft,kt),dt.child;case 6:return et===null&&Eg(dt),null;case 13:return oj(et,dt,kt);case 4:return yh(dt,dt.stateNode.containerInfo),$t=dt.pendingProps,et===null?dt.child=Ug(dt,null,$t,kt):Xi(et,dt,$t,kt),dt.child;case 11:return $t=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===$t?Tt:Ci($t,Tt),Yi(et,dt,$t,Tt,kt);case 7:return Xi(et,dt,dt.pendingProps,kt),dt.child;case 8:return Xi(et,dt,dt.pendingProps.children,kt),dt.child;case 12:return Xi(et,dt,dt.pendingProps.children,kt),dt.child;case 10:e:{if($t=dt.type._context,Tt=dt.pendingProps,Dt=dt.memoizedProps,Ft=Tt.value,G$3(Wg,$t._currentValue),$t._currentValue=Ft,Dt!==null)if(He$3(Dt.value,Ft)){if(Dt.children===Tt.children&&!Wf.current){dt=Zi(et,dt,kt);break e}}else for(Dt=dt.child,Dt!==null&&(Dt.return=dt);Dt!==null;){var Ut=Dt.dependencies;if(Ut!==null){Ft=Dt.child;for(var Ht=Ut.firstContext;Ht!==null;){if(Ht.context===$t){if(Dt.tag===1){Ht=mh(-1,kt&-kt),Ht.tag=2;var Kt=Dt.updateQueue;if(Kt!==null){Kt=Kt.shared;var Yt=Kt.pending;Yt===null?Ht.next=Ht:(Ht.next=Yt.next,Yt.next=Ht),Kt.pending=Ht}}Dt.lanes|=kt,Ht=Dt.alternate,Ht!==null&&(Ht.lanes|=kt),bh(Dt.return,kt,dt),Ut.lanes|=kt;break}Ht=Ht.next}}else if(Dt.tag===10)Ft=Dt.type===dt.type?null:Dt.child;else if(Dt.tag===18){if(Ft=Dt.return,Ft===null)throw Error(p$4(341));Ft.lanes|=kt,Ut=Ft.alternate,Ut!==null&&(Ut.lanes|=kt),bh(Ft,kt,dt),Ft=Dt.sibling}else Ft=Dt.child;if(Ft!==null)Ft.return=Dt;else for(Ft=Dt;Ft!==null;){if(Ft===dt){Ft=null;break}if(Dt=Ft.sibling,Dt!==null){Dt.return=Ft.return,Ft=Dt;break}Ft=Ft.return}Dt=Ft}Xi(et,dt,Tt.children,kt),dt=dt.child}return dt;case 9:return Tt=dt.type,$t=dt.pendingProps.children,ch(dt,kt),Tt=eh(Tt),$t=$t(Tt),dt.flags|=1,Xi(et,dt,$t,kt),dt.child;case 14:return $t=dt.type,Tt=Ci($t,dt.pendingProps),Tt=Ci($t.type,Tt),$i(et,dt,$t,Tt,kt);case 15:return bj(et,dt,dt.type,dt.pendingProps,kt);case 17:return $t=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===$t?Tt:Ci($t,Tt),ij(et,dt),dt.tag=1,Zf($t)?(et=!0,cg(dt)):et=!1,ch(dt,kt),Gi(dt,$t,Tt),Ii(dt,$t,Tt,kt),jj(null,dt,$t,!0,et,kt);case 19:return xj(et,dt,kt);case 22:return dj(et,dt,kt)}throw Error(p$4(156,dt.tag))};function Fk(et,dt){return ac(et,dt)}function $k(et,dt,kt,$t){this.tag=et,this.key=kt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=dt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,dt,kt,$t){return new $k(et,dt,kt,$t)}function aj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function Zk(et){if(typeof et=="function")return aj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function Pg(et,dt){var kt=et.alternate;return kt===null?(kt=Bg(et.tag,dt,et.key,et.mode),kt.elementType=et.elementType,kt.type=et.type,kt.stateNode=et.stateNode,kt.alternate=et,et.alternate=kt):(kt.pendingProps=dt,kt.type=et.type,kt.flags=0,kt.subtreeFlags=0,kt.deletions=null),kt.flags=et.flags&14680064,kt.childLanes=et.childLanes,kt.lanes=et.lanes,kt.child=et.child,kt.memoizedProps=et.memoizedProps,kt.memoizedState=et.memoizedState,kt.updateQueue=et.updateQueue,dt=et.dependencies,kt.dependencies=dt===null?null:{lanes:dt.lanes,firstContext:dt.firstContext},kt.sibling=et.sibling,kt.index=et.index,kt.ref=et.ref,kt}function Rg(et,dt,kt,$t,Tt,Dt){var Ft=2;if($t=et,typeof et=="function")aj(et)&&(Ft=1);else if(typeof et=="string")Ft=5;else e:switch(et){case ya:return Tg(kt.children,Tt,Dt,dt);case za:Ft=8,Tt|=8;break;case Aa:return et=Bg(12,kt,dt,Tt|2),et.elementType=Aa,et.lanes=Dt,et;case Ea:return et=Bg(13,kt,dt,Tt),et.elementType=Ea,et.lanes=Dt,et;case Fa:return et=Bg(19,kt,dt,Tt),et.elementType=Fa,et.lanes=Dt,et;case Ia:return pj(kt,Tt,Dt,dt);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:Ft=10;break e;case Ca:Ft=9;break e;case Da:Ft=11;break e;case Ga:Ft=14;break e;case Ha:Ft=16,$t=null;break e}throw Error(p$4(130,et==null?et:typeof et,""))}return dt=Bg(Ft,kt,dt,Tt),dt.elementType=et,dt.type=$t,dt.lanes=Dt,dt}function Tg(et,dt,kt,$t){return et=Bg(7,et,$t,dt),et.lanes=kt,et}function pj(et,dt,kt,$t){return et=Bg(22,et,$t,dt),et.elementType=Ia,et.lanes=kt,et.stateNode={isHidden:!1},et}function Qg(et,dt,kt){return et=Bg(6,et,null,dt),et.lanes=kt,et}function Sg(et,dt,kt){return dt=Bg(4,et.children!==null?et.children:[],et.key,dt),dt.lanes=kt,dt.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},dt}function al(et,dt,kt,$t,Tt){this.tag=dt,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=$t,this.onRecoverableError=Tt,this.mutableSourceEagerHydrationData=null}function bl(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){return et=new al(et,dt,kt,Ut,Ht),dt===1?(dt=1,Dt===!0&&(dt|=8)):dt=0,Dt=Bg(3,null,null,dt),et.current=Dt,Dt.stateNode=et,Dt.memoizedState={element:$t,isDehydrated:kt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(Dt),et}function cl(et,dt,kt){var $t=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:$t==null?null:""+$t,children:et,containerInfo:dt,implementation:kt}}function dl(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$4(170));var dt=et;do{switch(dt.tag){case 3:dt=dt.stateNode.context;break e;case 1:if(Zf(dt.type)){dt=dt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}dt=dt.return}while(dt!==null);throw Error(p$4(171))}if(et.tag===1){var kt=et.type;if(Zf(kt))return bg(et,kt,dt)}return dt}function el(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){return et=bl(kt,$t,!0,et,Tt,Dt,Ft,Ut,Ht),et.context=dl(null),kt=et.current,$t=R$4(),Tt=yi(kt),Dt=mh($t,Tt),Dt.callback=dt??null,nh(kt,Dt,Tt),et.current.lanes=Tt,Ac(et,Tt,$t),Dk(et,$t),et}function fl(et,dt,kt,$t){var Tt=dt.current,Dt=R$4(),Ft=yi(Tt);return kt=dl(kt),dt.context===null?dt.context=kt:dt.pendingContext=kt,dt=mh(Dt,Ft),dt.payload={element:et},$t=$t===void 0?null:$t,$t!==null&&(dt.callback=$t),et=nh(Tt,dt,Ft),et!==null&&(gi(et,Tt,Ft,Dt),oh(et,Tt,Ft)),Ft}function gl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function hl(et,dt){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var kt=et.retryLane;et.retryLane=kt!==0&&kt<dt?kt:dt}}function il(et,dt){hl(et,dt),(et=et.alternate)&&hl(et,dt)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(et){console.error(et)};function ll(et){this._internalRoot=et}ml.prototype.render=ll.prototype.render=function(et){var dt=this._internalRoot;if(dt===null)throw Error(p$4(409));fl(et,dt,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var dt=et.containerInfo;Rk(function(){fl(null,et,null,null)}),dt[uf]=null}};function ml(et){this._internalRoot=et}ml.prototype.unstable_scheduleHydration=function(et){if(et){var dt=Hc();et={blockedOn:null,target:et,priority:dt};for(var kt=0;kt<Qc.length&&dt!==0&&dt<Qc[kt].priority;kt++);Qc.splice(kt,0,et),kt===0&&Vc(et)}};function nl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(et,dt,kt,$t,Tt){if(Tt){if(typeof $t=="function"){var Dt=$t;$t=function(){var Kt=gl(Ft);Dt.call(Kt)}}var Ft=el(dt,$t,et,0,null,!1,!1,"",pl);return et._reactRootContainer=Ft,et[uf]=Ft.current,sf(et.nodeType===8?et.parentNode:et),Rk(),Ft}for(;Tt=et.lastChild;)et.removeChild(Tt);if(typeof $t=="function"){var Ut=$t;$t=function(){var Kt=gl(Ht);Ut.call(Kt)}}var Ht=bl(et,0,!1,null,null,!1,!1,"",pl);return et._reactRootContainer=Ht,et[uf]=Ht.current,sf(et.nodeType===8?et.parentNode:et),Rk(function(){fl(dt,Ht,kt,$t)}),Ht}function rl(et,dt,kt,$t,Tt){var Dt=kt._reactRootContainer;if(Dt){var Ft=Dt;if(typeof Tt=="function"){var Ut=Tt;Tt=function(){var Ht=gl(Ft);Ut.call(Ht)}}fl(dt,Ft,et,Tt)}else Ft=ql(kt,dt,et,Tt,$t);return gl(Ft)}Ec=function(et){switch(et.tag){case 3:var dt=et.stateNode;if(dt.current.memoizedState.isDehydrated){var kt=tc(dt.pendingLanes);kt!==0&&(Cc(dt,kt|1),Dk(dt,B$5()),!(K$4&6)&&(Gj=B$5()+500,jg()))}break;case 13:Rk(function(){var $t=ih(et,1);if($t!==null){var Tt=R$4();gi($t,et,1,Tt)}}),il(et,1)}};Fc=function(et){if(et.tag===13){var dt=ih(et,134217728);if(dt!==null){var kt=R$4();gi(dt,et,134217728,kt)}il(et,134217728)}};Gc=function(et){if(et.tag===13){var dt=yi(et),kt=ih(et,dt);if(kt!==null){var $t=R$4();gi(kt,et,dt,$t)}il(et,dt)}};Hc=function(){return C$8};Ic=function(et,dt){var kt=C$8;try{return C$8=et,dt()}finally{C$8=kt}};yb=function(et,dt,kt){switch(dt){case"input":if(bb(et,kt),dt=kt.name,kt.type==="radio"&&dt!=null){for(kt=et;kt.parentNode;)kt=kt.parentNode;for(kt=kt.querySelectorAll("input[name="+JSON.stringify(""+dt)+'][type="radio"]'),dt=0;dt<kt.length;dt++){var $t=kt[dt];if($t!==et&&$t.form===et.form){var Tt=Db($t);if(!Tt)throw Error(p$4(90));Wa($t),bb($t,Tt)}}}break;case"textarea":ib(et,kt);break;case"select":dt=kt.value,dt!=null&&fb(et,!!kt.multiple,dt,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$3,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(et,dt){var kt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(dt))throw Error(p$4(200));return cl(et,dt,null,kt)};reactDom_production_min.createRoot=function(et,dt){if(!nl(et))throw Error(p$4(299));var kt=!1,$t="",Tt=kl;return dt!=null&&(dt.unstable_strictMode===!0&&(kt=!0),dt.identifierPrefix!==void 0&&($t=dt.identifierPrefix),dt.onRecoverableError!==void 0&&(Tt=dt.onRecoverableError)),dt=bl(et,1,!1,null,null,kt,!1,$t,Tt),et[uf]=dt.current,sf(et.nodeType===8?et.parentNode:et),new ll(dt)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var dt=et._reactInternals;if(dt===void 0)throw typeof et.render=="function"?Error(p$4(188)):(et=Object.keys(et).join(","),Error(p$4(268,et)));return et=Zb(dt),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Rk(et)};reactDom_production_min.hydrate=function(et,dt,kt){if(!ol(dt))throw Error(p$4(200));return rl(null,et,dt,!0,kt)};reactDom_production_min.hydrateRoot=function(et,dt,kt){if(!nl(et))throw Error(p$4(405));var $t=kt!=null&&kt.hydratedSources||null,Tt=!1,Dt="",Ft=kl;if(kt!=null&&(kt.unstable_strictMode===!0&&(Tt=!0),kt.identifierPrefix!==void 0&&(Dt=kt.identifierPrefix),kt.onRecoverableError!==void 0&&(Ft=kt.onRecoverableError)),dt=el(dt,null,et,1,kt??null,Tt,!1,Dt,Ft),et[uf]=dt.current,sf(et),$t)for(et=0;et<$t.length;et++)kt=$t[et],Tt=kt._getVersion,Tt=Tt(kt._source),dt.mutableSourceEagerHydrationData==null?dt.mutableSourceEagerHydrationData=[kt,Tt]:dt.mutableSourceEagerHydrationData.push(kt,Tt);return new ml(dt)};reactDom_production_min.render=function(et,dt,kt){if(!ol(dt))throw Error(p$4(200));return rl(null,et,dt,!1,kt)};reactDom_production_min.unmountComponentAtNode=function(et){if(!ol(et))throw Error(p$4(40));return et._reactRootContainer?(Rk(function(){rl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,dt,kt,$t){if(!ol(kt))throw Error(p$4(200));if(et==null||et._reactInternals===void 0)throw Error(p$4(38));return rl(et,dt,kt,!1,$t)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$3=reactDomExports;createRoot=m$3.createRoot,m$3.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)Object.prototype.hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},_extends$4.apply(this,arguments)}var Action$1;(function(et){et.Pop="POP",et.Push="PUSH",et.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createBrowserHistory(et){et===void 0&&(et={});function dt($t,Tt){let{pathname:Dt,search:Ft,hash:Ut}=$t.location;return createLocation("",{pathname:Dt,search:Ft,hash:Ut},Tt.state&&Tt.state.usr||null,Tt.state&&Tt.state.key||"default")}function kt($t,Tt){return typeof Tt=="string"?Tt:createPath(Tt)}return getUrlBasedHistory(dt,kt,null,et)}function invariant$2(et,dt){if(et===!1||et===null||typeof et>"u")throw new Error(dt)}function warning$2(et,dt){if(!et){typeof console<"u"&&console.warn(dt);try{throw new Error(dt)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(et,dt){return{usr:et.state,key:et.key,idx:dt}}function createLocation(et,dt,kt,$t){return kt===void 0&&(kt=null),_extends$4({pathname:typeof et=="string"?et:et.pathname,search:"",hash:""},typeof dt=="string"?parsePath(dt):dt,{state:kt,key:dt&&dt.key||$t||createKey$1()})}function createPath(et){let{pathname:dt="/",search:kt="",hash:$t=""}=et;return kt&&kt!=="?"&&(dt+=kt.charAt(0)==="?"?kt:"?"+kt),$t&&$t!=="#"&&(dt+=$t.charAt(0)==="#"?$t:"#"+$t),dt}function parsePath(et){let dt={};if(et){let kt=et.indexOf("#");kt>=0&&(dt.hash=et.substr(kt),et=et.substr(0,kt));let $t=et.indexOf("?");$t>=0&&(dt.search=et.substr($t),et=et.substr(0,$t)),et&&(dt.pathname=et)}return dt}function getUrlBasedHistory(et,dt,kt,$t){$t===void 0&&($t={});let{window:Tt=document.defaultView,v5Compat:Dt=!1}=$t,Ft=Tt.history,Ut=Action$1.Pop,Ht=null,Kt=Yt();Kt==null&&(Kt=0,Ft.replaceState(_extends$4({},Ft.state,{idx:Kt}),""));function Yt(){return(Ft.state||{idx:null}).idx}function Jt(){Ut=Action$1.Pop;let nr=Yt(),ir=nr==null?null:nr-Kt;Kt=nr,Ht&&Ht({action:Ut,location:sr.location,delta:ir})}function Zt(nr,ir){Ut=Action$1.Push;let lr=createLocation(sr.location,nr,ir);kt&&kt(lr,nr),Kt=Yt()+1;let or=getHistoryState(lr,Kt),cr=sr.createHref(lr);try{Ft.pushState(or,"",cr)}catch(dr){if(dr instanceof DOMException&&dr.name==="DataCloneError")throw dr;Tt.location.assign(cr)}Dt&&Ht&&Ht({action:Ut,location:sr.location,delta:1})}function er(nr,ir){Ut=Action$1.Replace;let lr=createLocation(sr.location,nr,ir);kt&&kt(lr,nr),Kt=Yt();let or=getHistoryState(lr,Kt),cr=sr.createHref(lr);Ft.replaceState(or,"",cr),Dt&&Ht&&Ht({action:Ut,location:sr.location,delta:0})}function rr(nr){let ir=Tt.location.origin!=="null"?Tt.location.origin:Tt.location.href,lr=typeof nr=="string"?nr:createPath(nr);return lr=lr.replace(/ $/,"%20"),invariant$2(ir,"No window.location.(origin|href) available to create URL for href: "+lr),new URL(lr,ir)}let sr={get action(){return Ut},get location(){return et(Tt,Ft)},listen(nr){if(Ht)throw new Error("A history only accepts one active listener");return Tt.addEventListener(PopStateEventType,Jt),Ht=nr,()=>{Tt.removeEventListener(PopStateEventType,Jt),Ht=null}},createHref(nr){return dt(Tt,nr)},createURL:rr,encodeLocation(nr){let ir=rr(nr);return{pathname:ir.pathname,search:ir.search,hash:ir.hash}},push:Zt,replace:er,go(nr){return Ft.go(nr)}};return sr}var ResultType;(function(et){et.data="data",et.deferred="deferred",et.redirect="redirect",et.error="error"})(ResultType||(ResultType={}));function matchRoutes(et,dt,kt){return kt===void 0&&(kt="/"),matchRoutesImpl(et,dt,kt,!1)}function matchRoutesImpl(et,dt,kt,$t){let Tt=typeof dt=="string"?parsePath(dt):dt,Dt=stripBasename(Tt.pathname||"/",kt);if(Dt==null)return null;let Ft=flattenRoutes(et);rankRouteBranches(Ft);let Ut=null;for(let Ht=0;Ut==null&&Ht<Ft.length;++Ht){let Kt=decodePath(Dt);Ut=matchRouteBranch(Ft[Ht],Kt,$t)}return Ut}function flattenRoutes(et,dt,kt,$t){dt===void 0&&(dt=[]),kt===void 0&&(kt=[]),$t===void 0&&($t="");let Tt=(Dt,Ft,Ut)=>{let Ht={relativePath:Ut===void 0?Dt.path||"":Ut,caseSensitive:Dt.caseSensitive===!0,childrenIndex:Ft,route:Dt};Ht.relativePath.startsWith("/")&&(invariant$2(Ht.relativePath.startsWith($t),'Absolute route path "'+Ht.relativePath+'" nested under path '+('"'+$t+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Ht.relativePath=Ht.relativePath.slice($t.length));let Kt=joinPaths([$t,Ht.relativePath]),Yt=kt.concat(Ht);Dt.children&&Dt.children.length>0&&(invariant$2(Dt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Kt+'".')),flattenRoutes(Dt.children,dt,Yt,Kt)),!(Dt.path==null&&!Dt.index)&&dt.push({path:Kt,score:computeScore(Kt,Dt.index),routesMeta:Yt})};return et.forEach((Dt,Ft)=>{var Ut;if(Dt.path===""||!((Ut=Dt.path)!=null&&Ut.includes("?")))Tt(Dt,Ft);else for(let Ht of explodeOptionalSegments(Dt.path))Tt(Dt,Ft,Ht)}),dt}function explodeOptionalSegments(et){let dt=et.split("/");if(dt.length===0)return[];let[kt,...$t]=dt,Tt=kt.endsWith("?"),Dt=kt.replace(/\?$/,"");if($t.length===0)return Tt?[Dt,""]:[Dt];let Ft=explodeOptionalSegments($t.join("/")),Ut=[];return Ut.push(...Ft.map(Ht=>Ht===""?Dt:[Dt,Ht].join("/"))),Tt&&Ut.push(...Ft),Ut.map(Ht=>et.startsWith("/")&&Ht===""?"/":Ht)}function rankRouteBranches(et){et.sort((dt,kt)=>dt.score!==kt.score?kt.score-dt.score:compareIndexes(dt.routesMeta.map($t=>$t.childrenIndex),kt.routesMeta.map($t=>$t.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=et=>et==="*";function computeScore(et,dt){let kt=et.split("/"),$t=kt.length;return kt.some(isSplat)&&($t+=splatPenalty),dt&&($t+=indexRouteValue),kt.filter(Tt=>!isSplat(Tt)).reduce((Tt,Dt)=>Tt+(paramRe.test(Dt)?dynamicSegmentValue:Dt===""?emptySegmentValue:staticSegmentValue),$t)}function compareIndexes(et,dt){return et.length===dt.length&&et.slice(0,-1).every(($t,Tt)=>$t===dt[Tt])?et[et.length-1]-dt[dt.length-1]:0}function matchRouteBranch(et,dt,kt){kt===void 0&&(kt=!1);let{routesMeta:$t}=et,Tt={},Dt="/",Ft=[];for(let Ut=0;Ut<$t.length;++Ut){let Ht=$t[Ut],Kt=Ut===$t.length-1,Yt=Dt==="/"?dt:dt.slice(Dt.length)||"/",Jt=matchPath({path:Ht.relativePath,caseSensitive:Ht.caseSensitive,end:Kt},Yt),Zt=Ht.route;if(!Jt&&Kt&&kt&&!$t[$t.length-1].route.index&&(Jt=matchPath({path:Ht.relativePath,caseSensitive:Ht.caseSensitive,end:!1},Yt)),!Jt)return null;Object.assign(Tt,Jt.params),Ft.push({params:Tt,pathname:joinPaths([Dt,Jt.pathname]),pathnameBase:normalizePathname(joinPaths([Dt,Jt.pathnameBase])),route:Zt}),Jt.pathnameBase!=="/"&&(Dt=joinPaths([Dt,Jt.pathnameBase]))}return Ft}function matchPath(et,dt){typeof et=="string"&&(et={path:et,caseSensitive:!1,end:!0});let[kt,$t]=compilePath(et.path,et.caseSensitive,et.end),Tt=dt.match(kt);if(!Tt)return null;let Dt=Tt[0],Ft=Dt.replace(/(.)\/+$/,"$1"),Ut=Tt.slice(1);return{params:$t.reduce((Kt,Yt,Jt)=>{let{paramName:Zt,isOptional:er}=Yt;if(Zt==="*"){let sr=Ut[Jt]||"";Ft=Dt.slice(0,Dt.length-sr.length).replace(/(.)\/+$/,"$1")}const rr=Ut[Jt];return er&&!rr?Kt[Zt]=void 0:Kt[Zt]=(rr||"").replace(/%2F/g,"/"),Kt},{}),pathname:Dt,pathnameBase:Ft,pattern:et}}function compilePath(et,dt,kt){dt===void 0&&(dt=!1),kt===void 0&&(kt=!0),warning$2(et==="*"||!et.endsWith("*")||et.endsWith("/*"),'Route path "'+et+'" will be treated as if it were '+('"'+et.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+et.replace(/\*$/,"/*")+'".'));let $t=[],Tt="^"+et.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Ft,Ut,Ht)=>($t.push({paramName:Ut,isOptional:Ht!=null}),Ht?"/?([^\\/]+)?":"/([^\\/]+)"));return et.endsWith("*")?($t.push({paramName:"*"}),Tt+=et==="*"||et==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):kt?Tt+="\\/*$":et!==""&&et!=="/"&&(Tt+="(?:(?=\\/|$))"),[new RegExp(Tt,dt?void 0:"i"),$t]}function decodePath(et){try{return et.split("/").map(dt=>decodeURIComponent(dt).replace(/\//g,"%2F")).join("/")}catch(dt){return warning$2(!1,'The URL path "'+et+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+dt+").")),et}}function stripBasename(et,dt){if(dt==="/")return et;if(!et.toLowerCase().startsWith(dt.toLowerCase()))return null;let kt=dt.endsWith("/")?dt.length-1:dt.length,$t=et.charAt(kt);return $t&&$t!=="/"?null:et.slice(kt)||"/"}function resolvePath(et,dt){dt===void 0&&(dt="/");let{pathname:kt,search:$t="",hash:Tt=""}=typeof et=="string"?parsePath(et):et;return{pathname:kt?kt.startsWith("/")?kt:resolvePathname(kt,dt):dt,search:normalizeSearch($t),hash:normalizeHash(Tt)}}function resolvePathname(et,dt){let kt=dt.replace(/\/+$/,"").split("/");return et.split("/").forEach(Tt=>{Tt===".."?kt.length>1&&kt.pop():Tt!=="."&&kt.push(Tt)}),kt.length>1?kt.join("/"):"/"}function getInvalidPathError(et,dt,kt,$t){return"Cannot include a '"+et+"' character in a manually specified "+("`to."+dt+"` field ["+JSON.stringify($t)+"].  Please separate it out to the ")+("`to."+kt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(et){return et.filter((dt,kt)=>kt===0||dt.route.path&&dt.route.path.length>0)}function getResolveToMatches(et,dt){let kt=getPathContributingMatches(et);return dt?kt.map(($t,Tt)=>Tt===kt.length-1?$t.pathname:$t.pathnameBase):kt.map($t=>$t.pathnameBase)}function resolveTo(et,dt,kt,$t){$t===void 0&&($t=!1);let Tt;typeof et=="string"?Tt=parsePath(et):(Tt=_extends$4({},et),invariant$2(!Tt.pathname||!Tt.pathname.includes("?"),getInvalidPathError("?","pathname","search",Tt)),invariant$2(!Tt.pathname||!Tt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Tt)),invariant$2(!Tt.search||!Tt.search.includes("#"),getInvalidPathError("#","search","hash",Tt)));let Dt=et===""||Tt.pathname==="",Ft=Dt?"/":Tt.pathname,Ut;if(Ft==null)Ut=kt;else{let Jt=dt.length-1;if(!$t&&Ft.startsWith("..")){let Zt=Ft.split("/");for(;Zt[0]==="..";)Zt.shift(),Jt-=1;Tt.pathname=Zt.join("/")}Ut=Jt>=0?dt[Jt]:"/"}let Ht=resolvePath(Tt,Ut),Kt=Ft&&Ft!=="/"&&Ft.endsWith("/"),Yt=(Dt||Ft===".")&&kt.endsWith("/");return!Ht.pathname.endsWith("/")&&(Kt||Yt)&&(Ht.pathname+="/"),Ht}const joinPaths=et=>et.join("/").replace(/\/\/+/g,"/"),normalizePathname=et=>et.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=et=>!et||et==="?"?"":et.startsWith("?")?et:"?"+et,normalizeHash=et=>!et||et==="#"?"":et.startsWith("#")?et:"#"+et;function isRouteErrorResponse(et){return et!=null&&typeof et.status=="number"&&typeof et.statusText=="string"&&typeof et.internal=="boolean"&&"data"in et}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)Object.prototype.hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},_extends$3.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(et,dt){let{relative:kt}=dt===void 0?{}:dt;useInRouterContext()||invariant$2(!1);let{basename:$t,navigator:Tt}=reactExports.useContext(NavigationContext),{hash:Dt,pathname:Ft,search:Ut}=useResolvedPath(et,{relative:kt}),Ht=Ft;return $t!=="/"&&(Ht=Ft==="/"?$t:joinPaths([$t,Ft])),Tt.createHref({pathname:Ht,search:Ut,hash:Dt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$9(et){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(et)}function useNavigate(){let{isDataRoute:et}=reactExports.useContext(RouteContext);return et?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let et=reactExports.useContext(DataRouterContext),{basename:dt,future:kt,navigator:$t}=reactExports.useContext(NavigationContext),{matches:Tt}=reactExports.useContext(RouteContext),{pathname:Dt}=useLocation(),Ft=JSON.stringify(getResolveToMatches(Tt,kt.v7_relativeSplatPath)),Ut=reactExports.useRef(!1);return useIsomorphicLayoutEffect$9(()=>{Ut.current=!0}),reactExports.useCallback(function(Kt,Yt){if(Yt===void 0&&(Yt={}),!Ut.current)return;if(typeof Kt=="number"){$t.go(Kt);return}let Jt=resolveTo(Kt,JSON.parse(Ft),Dt,Yt.relative==="path");et==null&&dt!=="/"&&(Jt.pathname=Jt.pathname==="/"?dt:joinPaths([dt,Jt.pathname])),(Yt.replace?$t.replace:$t.push)(Jt,Yt.state,Yt)},[dt,$t,Ft,Dt,et])}const OutletContext=reactExports.createContext(null);function useOutlet(et){let dt=reactExports.useContext(RouteContext).outlet;return dt&&reactExports.createElement(OutletContext.Provider,{value:et},dt)}function useParams(){let{matches:et}=reactExports.useContext(RouteContext),dt=et[et.length-1];return dt?dt.params:{}}function useResolvedPath(et,dt){let{relative:kt}=dt===void 0?{}:dt,{future:$t}=reactExports.useContext(NavigationContext),{matches:Tt}=reactExports.useContext(RouteContext),{pathname:Dt}=useLocation(),Ft=JSON.stringify(getResolveToMatches(Tt,$t.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(et,JSON.parse(Ft),Dt,kt==="path"),[et,Ft,Dt,kt])}function useRoutes(et,dt){return useRoutesImpl(et,dt)}function useRoutesImpl(et,dt,kt,$t){useInRouterContext()||invariant$2(!1);let{navigator:Tt}=reactExports.useContext(NavigationContext),{matches:Dt}=reactExports.useContext(RouteContext),Ft=Dt[Dt.length-1],Ut=Ft?Ft.params:{};Ft&&Ft.pathname;let Ht=Ft?Ft.pathnameBase:"/";Ft&&Ft.route;let Kt=useLocation(),Yt;if(dt){var Jt;let nr=typeof dt=="string"?parsePath(dt):dt;Ht==="/"||(Jt=nr.pathname)!=null&&Jt.startsWith(Ht)||invariant$2(!1),Yt=nr}else Yt=Kt;let Zt=Yt.pathname||"/",er=Zt;if(Ht!=="/"){let nr=Ht.replace(/^\//,"").split("/");er="/"+Zt.replace(/^\//,"").split("/").slice(nr.length).join("/")}let rr=matchRoutes(et,{pathname:er}),sr=_renderMatches(rr&&rr.map(nr=>Object.assign({},nr,{params:Object.assign({},Ut,nr.params),pathname:joinPaths([Ht,Tt.encodeLocation?Tt.encodeLocation(nr.pathname).pathname:nr.pathname]),pathnameBase:nr.pathnameBase==="/"?Ht:joinPaths([Ht,Tt.encodeLocation?Tt.encodeLocation(nr.pathnameBase).pathname:nr.pathnameBase])})),Dt,kt,$t);return dt&&sr?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$3({pathname:"/",search:"",hash:"",state:null,key:"default"},Yt),navigationType:Action$1.Pop}},sr):sr}function DefaultErrorComponent(){let et=useRouteError(),dt=isRouteErrorResponse(et)?et.status+" "+et.statusText:et instanceof Error?et.message:JSON.stringify(et),kt=et instanceof Error?et.stack:null,Tt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},Dt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},dt),kt?reactExports.createElement("pre",{style:Tt},kt):null,Dt)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(dt){super(dt),this.state={location:dt.location,revalidation:dt.revalidation,error:dt.error}}static getDerivedStateFromError(dt){return{error:dt}}static getDerivedStateFromProps(dt,kt){return kt.location!==dt.location||kt.revalidation!=="idle"&&dt.revalidation==="idle"?{error:dt.error,location:dt.location,revalidation:dt.revalidation}:{error:dt.error!==void 0?dt.error:kt.error,location:kt.location,revalidation:dt.revalidation||kt.revalidation}}componentDidCatch(dt,kt){console.error("React Router caught the following error during render",dt,kt)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(et){let{routeContext:dt,match:kt,children:$t}=et,Tt=reactExports.useContext(DataRouterContext);return Tt&&Tt.static&&Tt.staticContext&&(kt.route.errorElement||kt.route.ErrorBoundary)&&(Tt.staticContext._deepestRenderedBoundaryId=kt.route.id),reactExports.createElement(RouteContext.Provider,{value:dt},$t)}function _renderMatches(et,dt,kt,$t){var Tt;if(dt===void 0&&(dt=[]),kt===void 0&&(kt=null),$t===void 0&&($t=null),et==null){var Dt;if(!kt)return null;if(kt.errors)et=kt.matches;else if((Dt=$t)!=null&&Dt.v7_partialHydration&&dt.length===0&&!kt.initialized&&kt.matches.length>0)et=kt.matches;else return null}let Ft=et,Ut=(Tt=kt)==null?void 0:Tt.errors;if(Ut!=null){let Yt=Ft.findIndex(Jt=>Jt.route.id&&(Ut==null?void 0:Ut[Jt.route.id])!==void 0);Yt>=0||invariant$2(!1),Ft=Ft.slice(0,Math.min(Ft.length,Yt+1))}let Ht=!1,Kt=-1;if(kt&&$t&&$t.v7_partialHydration)for(let Yt=0;Yt<Ft.length;Yt++){let Jt=Ft[Yt];if((Jt.route.HydrateFallback||Jt.route.hydrateFallbackElement)&&(Kt=Yt),Jt.route.id){let{loaderData:Zt,errors:er}=kt,rr=Jt.route.loader&&Zt[Jt.route.id]===void 0&&(!er||er[Jt.route.id]===void 0);if(Jt.route.lazy||rr){Ht=!0,Kt>=0?Ft=Ft.slice(0,Kt+1):Ft=[Ft[0]];break}}}return Ft.reduceRight((Yt,Jt,Zt)=>{let er,rr=!1,sr=null,nr=null;kt&&(er=Ut&&Jt.route.id?Ut[Jt.route.id]:void 0,sr=Jt.route.errorElement||defaultErrorElement,Ht&&(Kt<0&&Zt===0?(warningOnce("route-fallback",!1),rr=!0,nr=null):Kt===Zt&&(rr=!0,nr=Jt.route.hydrateFallbackElement||null)));let ir=dt.concat(Ft.slice(0,Zt+1)),lr=()=>{let or;return er?or=sr:rr?or=nr:Jt.route.Component?or=reactExports.createElement(Jt.route.Component,null):Jt.route.element?or=Jt.route.element:or=Yt,reactExports.createElement(RenderedRoute,{match:Jt,routeContext:{outlet:Yt,matches:ir,isDataRoute:kt!=null},children:or})};return kt&&(Jt.route.ErrorBoundary||Jt.route.errorElement||Zt===0)?reactExports.createElement(RenderErrorBoundary,{location:kt.location,revalidation:kt.revalidation,component:sr,error:er,children:lr(),routeContext:{outlet:null,matches:ir,isDataRoute:!0}}):lr()},null)}var DataRouterHook$1=function(et){return et.UseBlocker="useBlocker",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et}(DataRouterHook$1||{}),DataRouterStateHook$1=function(et){return et.UseBlocker="useBlocker",et.UseLoaderData="useLoaderData",et.UseActionData="useActionData",et.UseRouteError="useRouteError",et.UseNavigation="useNavigation",et.UseRouteLoaderData="useRouteLoaderData",et.UseMatches="useMatches",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et.UseRouteId="useRouteId",et}(DataRouterStateHook$1||{});function useDataRouterContext(et){let dt=reactExports.useContext(DataRouterContext);return dt||invariant$2(!1),dt}function useDataRouterState(et){let dt=reactExports.useContext(DataRouterStateContext);return dt||invariant$2(!1),dt}function useRouteContext(et){let dt=reactExports.useContext(RouteContext);return dt||invariant$2(!1),dt}function useCurrentRouteId(et){let dt=useRouteContext(),kt=dt.matches[dt.matches.length-1];return kt.route.id||invariant$2(!1),kt.route.id}function useRouteError(){var et;let dt=reactExports.useContext(RouteErrorContext),kt=useDataRouterState(DataRouterStateHook$1.UseRouteError),$t=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return dt!==void 0?dt:(et=kt.errors)==null?void 0:et[$t]}function useNavigateStable(){let{router:et}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),dt=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),kt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$9(()=>{kt.current=!0}),reactExports.useCallback(function(Tt,Dt){Dt===void 0&&(Dt={}),kt.current&&(typeof Tt=="number"?et.navigate(Tt):et.navigate(Tt,_extends$3({fromRouteId:dt},Dt)))},[et,dt])}const alreadyWarned$1={};function warningOnce(et,dt,kt){!dt&&!alreadyWarned$1[et]&&(alreadyWarned$1[et]=!0)}const alreadyWarned={};function warnOnce(et,dt){alreadyWarned[dt]||(alreadyWarned[dt]=!0,console.warn(dt))}const logDeprecation=(et,dt,kt)=>warnOnce(et," React Router Future Flag Warning: "+dt+". "+("You can use the `"+et+"` future flag to opt-in early. ")+("For more information, see "+kt+"."));function logV6DeprecationWarnings(et,dt){(et==null?void 0:et.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(et==null?void 0:et.v7_relativeSplatPath)===void 0&&(!dt||!dt.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),dt&&(dt.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),dt.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),dt.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),dt.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(et){let{to:dt,replace:kt,state:$t,relative:Tt}=et;useInRouterContext()||invariant$2(!1);let{future:Dt,static:Ft}=reactExports.useContext(NavigationContext),{matches:Ut}=reactExports.useContext(RouteContext),{pathname:Ht}=useLocation(),Kt=useNavigate(),Yt=resolveTo(dt,getResolveToMatches(Ut,Dt.v7_relativeSplatPath),Ht,Tt==="path"),Jt=JSON.stringify(Yt);return reactExports.useEffect(()=>Kt(JSON.parse(Jt),{replace:kt,state:$t,relative:Tt}),[Kt,Jt,Tt,kt,$t]),null}function Outlet(et){return useOutlet(et.context)}function Route(et){invariant$2(!1)}function Router(et){let{basename:dt="/",children:kt=null,location:$t,navigationType:Tt=Action$1.Pop,navigator:Dt,static:Ft=!1,future:Ut}=et;useInRouterContext()&&invariant$2(!1);let Ht=dt.replace(/^\/*/,"/"),Kt=reactExports.useMemo(()=>({basename:Ht,navigator:Dt,static:Ft,future:_extends$3({v7_relativeSplatPath:!1},Ut)}),[Ht,Ut,Dt,Ft]);typeof $t=="string"&&($t=parsePath($t));let{pathname:Yt="/",search:Jt="",hash:Zt="",state:er=null,key:rr="default"}=$t,sr=reactExports.useMemo(()=>{let nr=stripBasename(Yt,Ht);return nr==null?null:{location:{pathname:nr,search:Jt,hash:Zt,state:er,key:rr},navigationType:Tt}},[Ht,Yt,Jt,Zt,er,rr,Tt]);return sr==null?null:reactExports.createElement(NavigationContext.Provider,{value:Kt},reactExports.createElement(LocationContext.Provider,{children:kt,value:sr}))}function Routes(et){let{children:dt,location:kt}=et;return useRoutes(createRoutesFromChildren(dt),kt)}new Promise(()=>{});function createRoutesFromChildren(et,dt){dt===void 0&&(dt=[]);let kt=[];return reactExports.Children.forEach(et,($t,Tt)=>{if(!reactExports.isValidElement($t))return;let Dt=[...dt,Tt];if($t.type===reactExports.Fragment){kt.push.apply(kt,createRoutesFromChildren($t.props.children,Dt));return}$t.type!==Route&&invariant$2(!1),!$t.props.index||!$t.props.children||invariant$2(!1);let Ft={id:$t.props.id||Dt.join("-"),caseSensitive:$t.props.caseSensitive,element:$t.props.element,Component:$t.props.Component,index:$t.props.index,path:$t.props.path,loader:$t.props.loader,action:$t.props.action,errorElement:$t.props.errorElement,ErrorBoundary:$t.props.ErrorBoundary,hasErrorBoundary:$t.props.ErrorBoundary!=null||$t.props.errorElement!=null,shouldRevalidate:$t.props.shouldRevalidate,handle:$t.props.handle,lazy:$t.props.lazy};$t.props.children&&(Ft.children=createRoutesFromChildren($t.props.children,Dt)),kt.push(Ft)}),kt}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)Object.prototype.hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(et,dt){if(et==null)return{};var kt={},$t=Object.keys(et),Tt,Dt;for(Dt=0;Dt<$t.length;Dt++)Tt=$t[Dt],!(dt.indexOf(Tt)>=0)&&(kt[Tt]=et[Tt]);return kt}function isModifiedEvent(et){return!!(et.metaKey||et.altKey||et.ctrlKey||et.shiftKey)}function shouldProcessLinkClick(et,dt){return et.button===0&&(!dt||dt==="_self")&&!isModifiedEvent(et)}function createSearchParams(et){return et===void 0&&(et=""),new URLSearchParams(typeof et=="string"||Array.isArray(et)||et instanceof URLSearchParams?et:Object.keys(et).reduce((dt,kt)=>{let $t=et[kt];return dt.concat(Array.isArray($t)?$t.map(Tt=>[kt,Tt]):[[kt,$t]])},[]))}function getSearchParamsForLocation(et,dt){let kt=createSearchParams(et);return dt&&dt.forEach(($t,Tt)=>{kt.has(Tt)||dt.getAll(Tt).forEach(Dt=>{kt.append(Tt,Dt)})}),kt}const _excluded$3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$3[START_TRANSITION];function BrowserRouter(et){let{basename:dt,children:kt,future:$t,window:Tt}=et,Dt=reactExports.useRef();Dt.current==null&&(Dt.current=createBrowserHistory({window:Tt,v5Compat:!0}));let Ft=Dt.current,[Ut,Ht]=reactExports.useState({action:Ft.action,location:Ft.location}),{v7_startTransition:Kt}=$t||{},Yt=reactExports.useCallback(Jt=>{Kt&&startTransitionImpl?startTransitionImpl(()=>Ht(Jt)):Ht(Jt)},[Ht,Kt]);return reactExports.useLayoutEffect(()=>Ft.listen(Yt),[Ft,Yt]),reactExports.useEffect(()=>logV6DeprecationWarnings($t),[$t]),reactExports.createElement(Router,{basename:dt,children:kt,location:Ut.location,navigationType:Ut.action,navigator:Ft,future:$t})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$2=reactExports.forwardRef(function(dt,kt){let{onClick:$t,relative:Tt,reloadDocument:Dt,replace:Ft,state:Ut,target:Ht,to:Kt,preventScrollReset:Yt,viewTransition:Jt}=dt,Zt=_objectWithoutPropertiesLoose$2(dt,_excluded$3),{basename:er}=reactExports.useContext(NavigationContext),rr,sr=!1;if(typeof Kt=="string"&&ABSOLUTE_URL_REGEX.test(Kt)&&(rr=Kt,isBrowser$2))try{let or=new URL(window.location.href),cr=Kt.startsWith("//")?new URL(or.protocol+Kt):new URL(Kt),dr=stripBasename(cr.pathname,er);cr.origin===or.origin&&dr!=null?Kt=dr+cr.search+cr.hash:sr=!0}catch{}let nr=useHref(Kt,{relative:Tt}),ir=useLinkClickHandler(Kt,{replace:Ft,state:Ut,target:Ht,preventScrollReset:Yt,relative:Tt,viewTransition:Jt});function lr(or){$t&&$t(or),or.defaultPrevented||ir(or)}return reactExports.createElement("a",_extends$2({},Zt,{href:rr||nr,onClick:sr||Dt?$t:lr,ref:kt,target:Ht}))});var DataRouterHook;(function(et){et.UseScrollRestoration="useScrollRestoration",et.UseSubmit="useSubmit",et.UseSubmitFetcher="useSubmitFetcher",et.UseFetcher="useFetcher",et.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(et){et.UseFetcher="useFetcher",et.UseFetchers="useFetchers",et.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(et,dt){let{target:kt,replace:$t,state:Tt,preventScrollReset:Dt,relative:Ft,viewTransition:Ut}=dt===void 0?{}:dt,Ht=useNavigate(),Kt=useLocation(),Yt=useResolvedPath(et,{relative:Ft});return reactExports.useCallback(Jt=>{if(shouldProcessLinkClick(Jt,kt)){Jt.preventDefault();let Zt=$t!==void 0?$t:createPath(Kt)===createPath(Yt);Ht(et,{replace:Zt,state:Tt,preventScrollReset:Dt,relative:Ft,viewTransition:Ut})}},[Kt,Ht,Yt,$t,Tt,kt,et,Dt,Ft,Ut])}function useSearchParams(et){let dt=reactExports.useRef(createSearchParams(et)),kt=reactExports.useRef(!1),$t=useLocation(),Tt=reactExports.useMemo(()=>getSearchParamsForLocation($t.search,kt.current?null:dt.current),[$t.search]),Dt=useNavigate(),Ft=reactExports.useCallback((Ut,Ht)=>{const Kt=createSearchParams(typeof Ut=="function"?Ut(Tt):Ut);kt.current=!0,Dt("?"+Kt,Ht)},[Dt,Tt]);return[Tt,Ft]}function createDOMMotionComponentProxy(et){if(typeof Proxy>"u")return et;const dt=new Map,kt=(...$t)=>et(...$t);return new Proxy(kt,{get:($t,Tt)=>Tt==="create"?et:(dt.has(Tt)||dt.set(Tt,et(Tt)),dt.get(Tt))})}function isAnimationControls(et){return et!==null&&typeof et=="object"&&typeof et.start=="function"}const isKeyframesTarget=et=>Array.isArray(et);function shallowCompare(et,dt){if(!Array.isArray(dt))return!1;const kt=dt.length;if(kt!==et.length)return!1;for(let $t=0;$t<kt;$t++)if(dt[$t]!==et[$t])return!1;return!0}function isVariantLabel(et){return typeof et=="string"||Array.isArray(et)}function getValueState(et){const dt=[{},{}];return et==null||et.values.forEach((kt,$t)=>{dt[0][$t]=kt.get(),dt[1][$t]=kt.getVelocity()}),dt}function resolveVariantFromProps(et,dt,kt,$t){if(typeof dt=="function"){const[Tt,Dt]=getValueState($t);dt=dt(kt!==void 0?kt:et.custom,Tt,Dt)}if(typeof dt=="string"&&(dt=et.variants&&et.variants[dt]),typeof dt=="function"){const[Tt,Dt]=getValueState($t);dt=dt(kt!==void 0?kt:et.custom,Tt,Dt)}return dt}function resolveVariant(et,dt,kt){const $t=et.getProps();return resolveVariantFromProps($t,dt,kt!==void 0?kt:$t.custom,et)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=et=>et*1e3,millisecondsToSeconds=et=>et/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=et=>({type:"spring",stiffness:550,damping:et===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(et,{keyframes:dt})=>dt.length>2?keyframesTransition:transformProps.has(et)?et.startsWith("scale")?criticallyDampedSpring(dt[1]):underDampedSpring:ease;function getValueTransition(et,dt){return et?et[dt]||et.default||et:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=et=>et!==null;function getFinalKeyframe(et,{repeat:dt,repeatType:kt="loop"},$t){const Tt=et.filter(isNotNull),Dt=dt&&kt!=="loop"&&dt%2===1?0:Tt.length-1;return!Dt||$t===void 0?Tt[Dt]:$t}const noop$c=et=>et;let invariant$1=noop$c;function createRenderStep(et){let dt=new Set,kt=new Set,$t=!1,Tt=!1;const Dt=new WeakSet;let Ft={delta:0,timestamp:0,isProcessing:!1};function Ut(Kt){Dt.has(Kt)&&(Ht.schedule(Kt),et()),Kt(Ft)}const Ht={schedule:(Kt,Yt=!1,Jt=!1)=>{const er=Jt&&$t?dt:kt;return Yt&&Dt.add(Kt),er.has(Kt)||er.add(Kt),Kt},cancel:Kt=>{kt.delete(Kt),Dt.delete(Kt)},process:Kt=>{if(Ft=Kt,$t){Tt=!0;return}$t=!0,[dt,kt]=[kt,dt],dt.forEach(Ut),dt.clear(),$t=!1,Tt&&(Tt=!1,Ht.process(Kt))}};return Ht}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(et,dt){let kt=!1,$t=!0;const Tt={delta:0,timestamp:0,isProcessing:!1},Dt=()=>kt=!0,Ft=stepsOrder.reduce((ir,lr)=>(ir[lr]=createRenderStep(Dt),ir),{}),{read:Ut,resolveKeyframes:Ht,update:Kt,preRender:Yt,render:Jt,postRender:Zt}=Ft,er=()=>{const ir=performance.now();kt=!1,Tt.delta=$t?1e3/60:Math.max(Math.min(ir-Tt.timestamp,maxElapsed),1),Tt.timestamp=ir,Tt.isProcessing=!0,Ut.process(Tt),Ht.process(Tt),Kt.process(Tt),Yt.process(Tt),Jt.process(Tt),Zt.process(Tt),Tt.isProcessing=!1,kt&&dt&&($t=!1,et(er))},rr=()=>{kt=!0,$t=!0,Tt.isProcessing||et(er)};return{schedule:stepsOrder.reduce((ir,lr)=>{const or=Ft[lr];return ir[lr]=(cr,dr=!1,ur=!1)=>(kt||rr(),or.schedule(cr,dr,ur)),ir},{}),cancel:ir=>{for(let lr=0;lr<stepsOrder.length;lr++)Ft[stepsOrder[lr]].cancel(ir)},state:Tt,steps:Ft}}const{schedule:frame,cancel:cancelFrame$1,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$c,!0),calcBezier=(et,dt,kt)=>(((1-3*kt+3*dt)*et+(3*kt-6*dt))*et+3*dt)*et,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(et,dt,kt,$t,Tt){let Dt,Ft,Ut=0;do Ft=dt+(kt-dt)/2,Dt=calcBezier(Ft,$t,Tt)-et,Dt>0?kt=Ft:dt=Ft;while(Math.abs(Dt)>subdivisionPrecision&&++Ut<subdivisionMaxIterations);return Ft}function cubicBezier(et,dt,kt,$t){if(et===dt&&kt===$t)return noop$c;const Tt=Dt=>binarySubdivide(Dt,0,1,et,kt);return Dt=>Dt===0||Dt===1?Dt:calcBezier(Tt(Dt),dt,$t)}const mirrorEasing=et=>dt=>dt<=.5?et(2*dt)/2:(2-et(2*(1-dt)))/2,reverseEasing=et=>dt=>1-et(1-dt),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=et=>(et*=2)<1?.5*backIn(et):.5*(2-Math.pow(2,-10*(et-1))),circIn=et=>1-Math.sin(Math.acos(et)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=et=>/^0[^.\s]+$/u.test(et);function isNone(et){return typeof et=="number"?et===0:et!==null?et==="none"||et==="0"||isZeroValueString(et):!0}const isNumericalString=et=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(et),checkStringStartsWith=et=>dt=>typeof dt=="string"&&dt.startsWith(et),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=et=>startsAsVariableToken(et)?singleCssVariableRegex.test(et.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable$6(et){const dt=splitCSSVariableRegex.exec(et);if(!dt)return[,];const[,kt,$t,Tt]=dt;return[`--${kt??$t}`,Tt]}function getVariableValue(et,dt,kt=1){const[$t,Tt]=parseCSSVariable$6(et);if(!$t)return;const Dt=window.getComputedStyle(dt).getPropertyValue($t);if(Dt){const Ft=Dt.trim();return isNumericalString(Ft)?parseFloat(Ft):Ft}return isCSSVariableToken(Tt)?getVariableValue(Tt,dt,kt+1):Tt}const clamp$6=(et,dt,kt)=>kt>dt?dt:kt<et?et:kt,number$3={test:et=>typeof et=="number",parse:parseFloat,transform:et=>et},alpha$1={...number$3,transform:et=>clamp$6(0,1,et)},scale={...number$3,default:1},createUnitType=et=>({test:dt=>typeof dt=="string"&&dt.endsWith(et)&&dt.split(" ").length===1,parse:parseFloat,transform:dt=>`${dt}${et}`}),degrees$1=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:et=>percent.parse(et)/100,transform:et=>percent.transform(et*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=et=>et===number$3||et===px,getPosFromMatrix=(et,dt)=>parseFloat(et.split(", ")[dt]),getTranslateFromMatrix=(et,dt)=>(kt,{transform:$t})=>{if($t==="none"||!$t)return 0;const Tt=$t.match(/^matrix3d\((.+)\)$/u);if(Tt)return getPosFromMatrix(Tt[1],dt);{const Dt=$t.match(/^matrix\((.+)\)$/u);return Dt?getPosFromMatrix(Dt[1],et):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(et=>!transformKeys.has(et));function removeNonTranslationalTransform(et){const dt=[];return nonTranslationalTransformKeys.forEach(kt=>{const $t=et.getValue(kt);$t!==void 0&&(dt.push([kt,$t.get()]),$t.set(kt.startsWith("scale")?1:0))}),dt}const positionalValues={width:({x:et},{paddingLeft:dt="0",paddingRight:kt="0"})=>et.max-et.min-parseFloat(dt)-parseFloat(kt),height:({y:et},{paddingTop:dt="0",paddingBottom:kt="0"})=>et.max-et.min-parseFloat(dt)-parseFloat(kt),top:(et,{top:dt})=>parseFloat(dt),left:(et,{left:dt})=>parseFloat(dt),bottom:({y:et},{top:dt})=>parseFloat(dt)+(et.max-et.min),right:({x:et},{left:dt})=>parseFloat(dt)+(et.max-et.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=et=>dt=>dt.test(et),auto={test:et=>et==="auto",parse:et=>et},dimensionValueTypes=[number$3,px,percent,degrees$1,vw,vh,auto],findDimensionValueType=et=>dimensionValueTypes.find(testValueType(et)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const et=Array.from(toResolve).filter($t=>$t.needsMeasurement),dt=new Set(et.map($t=>$t.element)),kt=new Map;dt.forEach($t=>{const Tt=removeNonTranslationalTransform($t);Tt.length&&(kt.set($t,Tt),$t.render())}),et.forEach($t=>$t.measureInitialState()),dt.forEach($t=>{$t.render();const Tt=kt.get($t);Tt&&Tt.forEach(([Dt,Ft])=>{var Ut;(Ut=$t.getValue(Dt))===null||Ut===void 0||Ut.set(Ft)})}),et.forEach($t=>$t.measureEndState()),et.forEach($t=>{$t.suspendedScrollY!==void 0&&window.scrollTo(0,$t.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(et=>et.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(et=>{et.readKeyframes(),et.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(dt,kt,$t,Tt,Dt,Ft=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...dt],this.onComplete=kt,this.name=$t,this.motionValue=Tt,this.element=Dt,this.isAsync=Ft}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:dt,name:kt,element:$t,motionValue:Tt}=this;for(let Dt=0;Dt<dt.length;Dt++)if(dt[Dt]===null)if(Dt===0){const Ft=Tt==null?void 0:Tt.get(),Ut=dt[dt.length-1];if(Ft!==void 0)dt[0]=Ft;else if($t&&kt){const Ht=$t.readValue(kt,Ut);Ht!=null&&(dt[0]=Ht)}dt[0]===void 0&&(dt[0]=Ut),Tt&&Ft===void 0&&Tt.set(dt[0])}else dt[Dt]=dt[Dt-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=et=>Math.round(et*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(et){return et==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(et,dt)=>kt=>!!(typeof kt=="string"&&singleColorRegex.test(kt)&&kt.startsWith(et)||dt&&!isNullish(kt)&&Object.prototype.hasOwnProperty.call(kt,dt)),splitColor=(et,dt,kt)=>$t=>{if(typeof $t!="string")return $t;const[Tt,Dt,Ft,Ut]=$t.match(floatRegex);return{[et]:parseFloat(Tt),[dt]:parseFloat(Dt),[kt]:parseFloat(Ft),alpha:Ut!==void 0?parseFloat(Ut):1}},clampRgbUnit=et=>clamp$6(0,255,et),rgbUnit={...number$3,transform:et=>Math.round(clampRgbUnit(et))},rgba$7={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:et,green:dt,blue:kt,alpha:$t=1})=>"rgba("+rgbUnit.transform(et)+", "+rgbUnit.transform(dt)+", "+rgbUnit.transform(kt)+", "+sanitize(alpha$1.transform($t))+")"};function parseHex(et){let dt="",kt="",$t="",Tt="";return et.length>5?(dt=et.substring(1,3),kt=et.substring(3,5),$t=et.substring(5,7),Tt=et.substring(7,9)):(dt=et.substring(1,2),kt=et.substring(2,3),$t=et.substring(3,4),Tt=et.substring(4,5),dt+=dt,kt+=kt,$t+=$t,Tt+=Tt),{red:parseInt(dt,16),green:parseInt(kt,16),blue:parseInt($t,16),alpha:Tt?parseInt(Tt,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba$7.transform},hsla$7={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:et,saturation:dt,lightness:kt,alpha:$t=1})=>"hsla("+Math.round(et)+", "+percent.transform(sanitize(dt))+", "+percent.transform(sanitize(kt))+", "+sanitize(alpha$1.transform($t))+")"},color$1={test:et=>rgba$7.test(et)||hex$1.test(et)||hsla$7.test(et),parse:et=>rgba$7.test(et)?rgba$7.parse(et):hsla$7.test(et)?hsla$7.parse(et):hex$1.parse(et),transform:et=>typeof et=="string"?et:et.hasOwnProperty("red")?rgba$7.transform(et):hsla$7.transform(et)},colorRegex$6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(et){var dt,kt;return isNaN(et)&&typeof et=="string"&&(((dt=et.match(floatRegex))===null||dt===void 0?void 0:dt.length)||0)+(((kt=et.match(colorRegex$6))===null||kt===void 0?void 0:kt.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(et){const dt=et.toString(),kt=[],$t={color:[],number:[],var:[]},Tt=[];let Dt=0;const Ut=dt.replace(complexRegex,Ht=>(color$1.test(Ht)?($t.color.push(Dt),Tt.push(COLOR_TOKEN),kt.push(color$1.parse(Ht))):Ht.startsWith(VAR_FUNCTION_TOKEN)?($t.var.push(Dt),Tt.push(VAR_TOKEN),kt.push(Ht)):($t.number.push(Dt),Tt.push(NUMBER_TOKEN),kt.push(parseFloat(Ht))),++Dt,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:kt,split:Ut,indexes:$t,types:Tt}}function parseComplexValue(et){return analyseComplexValue(et).values}function createTransformer(et){const{split:dt,types:kt}=analyseComplexValue(et),$t=dt.length;return Tt=>{let Dt="";for(let Ft=0;Ft<$t;Ft++)if(Dt+=dt[Ft],Tt[Ft]!==void 0){const Ut=kt[Ft];Ut===NUMBER_TOKEN?Dt+=sanitize(Tt[Ft]):Ut===COLOR_TOKEN?Dt+=color$1.transform(Tt[Ft]):Dt+=Tt[Ft]}return Dt}}const convertNumbersToZero=et=>typeof et=="number"?0:et;function getAnimatableNone$1(et){const dt=parseComplexValue(et);return createTransformer(et)(dt.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(et){const[dt,kt]=et.slice(0,-1).split("(");if(dt==="drop-shadow")return et;const[$t]=kt.match(floatRegex)||[];if(!$t)return et;const Tt=kt.replace($t,"");let Dt=maxDefaults.has(dt)?1:0;return $t!==kt&&(Dt*=100),dt+"("+Dt+Tt+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter$1={...complex,getAnimatableNone:et=>{const dt=et.match(functionRegex);return dt?dt.map(applyDefaultFilter).join(" "):et}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees$1,rotateX:degrees$1,rotateY:degrees$1,rotateZ:degrees$1,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees$1,skewX:degrees$1,skewY:degrees$1,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number$3,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=et=>defaultValueTypes[et];function getAnimatableNone(et,dt){let kt=getDefaultValueType(et);return kt!==filter$1&&(kt=complex),kt.getAnimatableNone?kt.getAnimatableNone(dt):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(et,dt,kt){let $t=0,Tt;for(;$t<et.length&&!Tt;){const Dt=et[$t];typeof Dt=="string"&&!invalidTemplates.has(Dt)&&analyseComplexValue(Dt).values.length&&(Tt=et[$t]),$t++}if(Tt&&kt)for(const Dt of dt)et[Dt]=getAnimatableNone(kt,Tt)}class DOMKeyframesResolver extends KeyframeResolver{constructor(dt,kt,$t,Tt,Dt){super(dt,kt,$t,Tt,Dt,!0)}readKeyframes(){const{unresolvedKeyframes:dt,element:kt,name:$t}=this;if(!kt||!kt.current)return;super.readKeyframes();for(let Ht=0;Ht<dt.length;Ht++){let Kt=dt[Ht];if(typeof Kt=="string"&&(Kt=Kt.trim(),isCSSVariableToken(Kt))){const Yt=getVariableValue(Kt,kt.current);Yt!==void 0&&(dt[Ht]=Yt),Ht===dt.length-1&&(this.finalKeyframe=Kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has($t)||dt.length!==2)return;const[Tt,Dt]=dt,Ft=findDimensionValueType(Tt),Ut=findDimensionValueType(Dt);if(Ft!==Ut)if(isNumOrPxType(Ft)&&isNumOrPxType(Ut))for(let Ht=0;Ht<dt.length;Ht++){const Kt=dt[Ht];typeof Kt=="string"&&(dt[Ht]=parseFloat(Kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:dt,name:kt}=this,$t=[];for(let Tt=0;Tt<dt.length;Tt++)isNone(dt[Tt])&&$t.push(Tt);$t.length&&makeNoneKeyframesAnimatable(dt,$t,kt)}measureInitialState(){const{element:dt,unresolvedKeyframes:kt,name:$t}=this;if(!dt||!dt.current)return;$t==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[$t](dt.measureViewportBox(),window.getComputedStyle(dt.current)),kt[0]=this.measuredOrigin;const Tt=kt[kt.length-1];Tt!==void 0&&dt.getValue($t,Tt).jump(Tt,!1)}measureEndState(){var dt;const{element:kt,name:$t,unresolvedKeyframes:Tt}=this;if(!kt||!kt.current)return;const Dt=kt.getValue($t);Dt&&Dt.jump(this.measuredOrigin,!1);const Ft=Tt.length-1,Ut=Tt[Ft];Tt[Ft]=positionalValues[$t](kt.measureViewportBox(),window.getComputedStyle(kt.current)),Ut!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=Ut),!((dt=this.removedTransforms)===null||dt===void 0)&&dt.length&&this.removedTransforms.forEach(([Ht,Kt])=>{kt.getValue(Ht).set(Kt)}),this.resolveNoneKeyframes()}}function isGenerator(et){return typeof et=="function"}let now;function clearTime(){now=void 0}const time$1={now:()=>(now===void 0&&time$1.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:et=>{now=et,queueMicrotask(clearTime)}},isAnimatable=(et,dt)=>dt==="zIndex"?!1:!!(typeof et=="number"||Array.isArray(et)||typeof et=="string"&&(complex.test(et)||et==="0")&&!et.startsWith("url("));function hasKeyframesChanged(et){const dt=et[0];if(et.length===1)return!0;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt)return!0}function canAnimate(et,dt,kt,$t){const Tt=et[0];if(Tt===null)return!1;if(dt==="display"||dt==="visibility")return!0;const Dt=et[et.length-1],Ft=isAnimatable(Tt,dt),Ut=isAnimatable(Dt,dt);return!Ft||!Ut?!1:hasKeyframesChanged(et)||(kt==="spring"||isGenerator(kt))&&$t}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:dt=!0,delay:kt=0,type:$t="keyframes",repeat:Tt=0,repeatDelay:Dt=0,repeatType:Ft="loop",...Ut}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time$1.now(),this.options={autoplay:dt,delay:kt,type:$t,repeat:Tt,repeatDelay:Dt,repeatType:Ft,...Ut},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(dt,kt){this.resolvedAt=time$1.now(),this.hasAttemptedResolve=!0;const{name:$t,type:Tt,velocity:Dt,delay:Ft,onComplete:Ut,onUpdate:Ht,isGenerator:Kt}=this.options;if(!Kt&&!canAnimate(dt,$t,Tt,Dt))if(Ft)this.options.duration=0;else{Ht==null||Ht(getFinalKeyframe(dt,this.options,kt)),Ut==null||Ut(),this.resolveFinishedPromise();return}const Yt=this.initPlayback(dt,kt);Yt!==!1&&(this._resolved={keyframes:dt,finalKeyframe:kt,...Yt},this.onPostResolved())}onPostResolved(){}then(dt,kt){return this.currentFinishedPromise.then(dt,kt)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(dt=>{this.resolveFinishedPromise=dt})}}const progress=(et,dt,kt)=>{const $t=dt-et;return $t===0?1:(kt-et)/$t},generateLinearEasing=(et,dt,kt=10)=>{let $t="";const Tt=Math.max(Math.round(dt/kt),2);for(let Dt=0;Dt<Tt;Dt++)$t+=et(progress(0,Tt-1,Dt))+", ";return`linear(${$t.substring(0,$t.length-2)})`};function velocityPerSecond(et,dt){return dt?et*(1e3/dt):0}const velocitySampleDuration=5;function calcGeneratorVelocity(et,dt,kt){const $t=Math.max(dt-velocitySampleDuration,0);return velocityPerSecond(kt-et($t),dt-$t)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:et=springDefaults.duration,bounce:dt=springDefaults.bounce,velocity:kt=springDefaults.velocity,mass:$t=springDefaults.mass}){let Tt,Dt,Ft=1-dt;Ft=clamp$6(springDefaults.minDamping,springDefaults.maxDamping,Ft),et=clamp$6(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(et)),Ft<1?(Tt=Kt=>{const Yt=Kt*Ft,Jt=Yt*et,Zt=Yt-kt,er=calcAngularFreq(Kt,Ft),rr=Math.exp(-Jt);return safeMin-Zt/er*rr},Dt=Kt=>{const Jt=Kt*Ft*et,Zt=Jt*kt+kt,er=Math.pow(Ft,2)*Math.pow(Kt,2)*et,rr=Math.exp(-Jt),sr=calcAngularFreq(Math.pow(Kt,2),Ft);return(-Tt(Kt)+safeMin>0?-1:1)*((Zt-er)*rr)/sr}):(Tt=Kt=>{const Yt=Math.exp(-Kt*et),Jt=(Kt-kt)*et+1;return-safeMin+Yt*Jt},Dt=Kt=>{const Yt=Math.exp(-Kt*et),Jt=(kt-Kt)*(et*et);return Yt*Jt});const Ut=5/et,Ht=approximateRoot(Tt,Dt,Ut);if(et=secondsToMilliseconds(et),isNaN(Ht))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:et};{const Kt=Math.pow(Ht,2)*$t;return{stiffness:Kt,damping:Ft*2*Math.sqrt($t*Kt),duration:et}}}const rootIterations=12;function approximateRoot(et,dt,kt){let $t=kt;for(let Tt=1;Tt<rootIterations;Tt++)$t=$t-et($t)/dt($t);return $t}function calcAngularFreq(et,dt){return et*Math.sqrt(1-dt*dt)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(et){let dt=0;const kt=50;let $t=et.next(dt);for(;!$t.done&&dt<maxGeneratorDuration;)dt+=kt,$t=et.next(dt);return dt>=maxGeneratorDuration?1/0:dt}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(et,dt){return dt.some(kt=>et[kt]!==void 0)}function getSpringOptions(et){let dt={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...et};if(!isSpringType(et,physicsKeys)&&isSpringType(et,durationKeys))if(et.visualDuration){const kt=et.visualDuration,$t=2*Math.PI/(kt*1.2),Tt=$t*$t,Dt=2*clamp$6(.05,1,1-et.bounce)*Math.sqrt(Tt);dt={...dt,mass:springDefaults.mass,stiffness:Tt,damping:Dt}}else{const kt=findSpring(et);dt={...dt,...kt,mass:springDefaults.mass},dt.isResolvedFromDuration=!0}return dt}function spring(et=springDefaults.visualDuration,dt=springDefaults.bounce){const kt=typeof et!="object"?{visualDuration:et,keyframes:[0,1],bounce:dt}:et;let{restSpeed:$t,restDelta:Tt}=kt;const Dt=kt.keyframes[0],Ft=kt.keyframes[kt.keyframes.length-1],Ut={done:!1,value:Dt},{stiffness:Ht,damping:Kt,mass:Yt,duration:Jt,velocity:Zt,isResolvedFromDuration:er}=getSpringOptions({...kt,velocity:-millisecondsToSeconds(kt.velocity||0)}),rr=Zt||0,sr=Kt/(2*Math.sqrt(Ht*Yt)),nr=Ft-Dt,ir=millisecondsToSeconds(Math.sqrt(Ht/Yt)),lr=Math.abs(nr)<5;$t||($t=lr?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),Tt||(Tt=lr?springDefaults.restDelta.granular:springDefaults.restDelta.default);let or;if(sr<1){const dr=calcAngularFreq(ir,sr);or=ur=>{const pr=Math.exp(-sr*ir*ur);return Ft-pr*((rr+sr*ir*nr)/dr*Math.sin(dr*ur)+nr*Math.cos(dr*ur))}}else if(sr===1)or=dr=>Ft-Math.exp(-ir*dr)*(nr+(rr+ir*nr)*dr);else{const dr=ir*Math.sqrt(sr*sr-1);or=ur=>{const pr=Math.exp(-sr*ir*ur),mr=Math.min(dr*ur,300);return Ft-pr*((rr+sr*ir*nr)*Math.sinh(mr)+dr*nr*Math.cosh(mr))/dr}}const cr={calculatedDuration:er&&Jt||null,next:dr=>{const ur=or(dr);if(er)Ut.done=dr>=Jt;else{let pr=0;sr<1&&(pr=dr===0?secondsToMilliseconds(rr):calcGeneratorVelocity(or,dr,ur));const mr=Math.abs(pr)<=$t,jr=Math.abs(Ft-ur)<=Tt;Ut.done=mr&&jr}return Ut.value=Ut.done?Ft:ur,Ut},toString:()=>{const dr=Math.min(calcGeneratorDuration(cr),maxGeneratorDuration),ur=generateLinearEasing(pr=>cr.next(dr*pr).value,dr,30);return dr+"ms "+ur}};return cr}function inertia({keyframes:et,velocity:dt=0,power:kt=.8,timeConstant:$t=325,bounceDamping:Tt=10,bounceStiffness:Dt=500,modifyTarget:Ft,min:Ut,max:Ht,restDelta:Kt=.5,restSpeed:Yt}){const Jt=et[0],Zt={done:!1,value:Jt},er=mr=>Ut!==void 0&&mr<Ut||Ht!==void 0&&mr>Ht,rr=mr=>Ut===void 0?Ht:Ht===void 0||Math.abs(Ut-mr)<Math.abs(Ht-mr)?Ut:Ht;let sr=kt*dt;const nr=Jt+sr,ir=Ft===void 0?nr:Ft(nr);ir!==nr&&(sr=ir-Jt);const lr=mr=>-sr*Math.exp(-mr/$t),or=mr=>ir+lr(mr),cr=mr=>{const jr=lr(mr),Rr=or(mr);Zt.done=Math.abs(jr)<=Kt,Zt.value=Zt.done?ir:Rr};let dr,ur;const pr=mr=>{er(Zt.value)&&(dr=mr,ur=spring({keyframes:[Zt.value,rr(Zt.value)],velocity:calcGeneratorVelocity(or,mr,Zt.value),damping:Tt,stiffness:Dt,restDelta:Kt,restSpeed:Yt}))};return pr(0),{calculatedDuration:null,next:mr=>{let jr=!1;return!ur&&dr===void 0&&(jr=!0,cr(mr),pr(mr)),dr!==void 0&&mr>=dr?ur.next(mr-dr):(!jr&&cr(mr),Zt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=et=>Array.isArray(et)&&typeof et[0]!="number",isBezierDefinition=et=>Array.isArray(et)&&typeof et[0]=="number",easingLookup={linear:noop$c,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=et=>{if(isBezierDefinition(et)){invariant$1(et.length===4);const[dt,kt,$t,Tt]=et;return cubicBezier(dt,kt,$t,Tt)}else if(typeof et=="string")return easingLookup[et];return et},combineFunctions=(et,dt)=>kt=>dt(et(kt)),pipe=(...et)=>et.reduce(combineFunctions),mixNumber$1=(et,dt,kt)=>et+(dt-et)*kt;function hueToRgb(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslaToRgba({hue:et,saturation:dt,lightness:kt,alpha:$t}){et/=360,dt/=100,kt/=100;let Tt=0,Dt=0,Ft=0;if(!dt)Tt=Dt=Ft=kt;else{const Ut=kt<.5?kt*(1+dt):kt+dt-kt*dt,Ht=2*kt-Ut;Tt=hueToRgb(Ht,Ut,et+1/3),Dt=hueToRgb(Ht,Ut,et),Ft=hueToRgb(Ht,Ut,et-1/3)}return{red:Math.round(Tt*255),green:Math.round(Dt*255),blue:Math.round(Ft*255),alpha:$t}}function mixImmediate(et,dt){return kt=>kt>0?dt:et}const mixLinearColor=(et,dt,kt)=>{const $t=et*et,Tt=kt*(dt*dt-$t)+$t;return Tt<0?0:Math.sqrt(Tt)},colorTypes=[hex$1,rgba$7,hsla$7],getColorType=et=>colorTypes.find(dt=>dt.test(et));function asRGBA(et){const dt=getColorType(et);if(!dt)return!1;let kt=dt.parse(et);return dt===hsla$7&&(kt=hslaToRgba(kt)),kt}const mixColor=(et,dt)=>{const kt=asRGBA(et),$t=asRGBA(dt);if(!kt||!$t)return mixImmediate(et,dt);const Tt={...kt};return Dt=>(Tt.red=mixLinearColor(kt.red,$t.red,Dt),Tt.green=mixLinearColor(kt.green,$t.green,Dt),Tt.blue=mixLinearColor(kt.blue,$t.blue,Dt),Tt.alpha=mixNumber$1(kt.alpha,$t.alpha,Dt),rgba$7.transform(Tt))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(et,dt){return invisibleValues.has(et)?kt=>kt<=0?et:dt:kt=>kt>=1?dt:et}function mixNumber(et,dt){return kt=>mixNumber$1(et,dt,kt)}function getMixer(et){return typeof et=="number"?mixNumber:typeof et=="string"?isCSSVariableToken(et)?mixImmediate:color$1.test(et)?mixColor:mixComplex:Array.isArray(et)?mixArray:typeof et=="object"?color$1.test(et)?mixColor:mixObject:mixImmediate}function mixArray(et,dt){const kt=[...et],$t=kt.length,Tt=et.map((Dt,Ft)=>getMixer(Dt)(Dt,dt[Ft]));return Dt=>{for(let Ft=0;Ft<$t;Ft++)kt[Ft]=Tt[Ft](Dt);return kt}}function mixObject(et,dt){const kt={...et,...dt},$t={};for(const Tt in kt)et[Tt]!==void 0&&dt[Tt]!==void 0&&($t[Tt]=getMixer(et[Tt])(et[Tt],dt[Tt]));return Tt=>{for(const Dt in $t)kt[Dt]=$t[Dt](Tt);return kt}}function matchOrder(et,dt){var kt;const $t=[],Tt={color:0,var:0,number:0};for(let Dt=0;Dt<dt.values.length;Dt++){const Ft=dt.types[Dt],Ut=et.indexes[Ft][Tt[Ft]],Ht=(kt=et.values[Ut])!==null&&kt!==void 0?kt:0;$t[Dt]=Ht,Tt[Ft]++}return $t}const mixComplex=(et,dt)=>{const kt=complex.createTransformer(dt),$t=analyseComplexValue(et),Tt=analyseComplexValue(dt);return $t.indexes.var.length===Tt.indexes.var.length&&$t.indexes.color.length===Tt.indexes.color.length&&$t.indexes.number.length>=Tt.indexes.number.length?invisibleValues.has(et)&&!Tt.values.length||invisibleValues.has(dt)&&!$t.values.length?mixVisibility(et,dt):pipe(mixArray(matchOrder($t,Tt),Tt.values),kt):mixImmediate(et,dt)};function mix(et,dt,kt){return typeof et=="number"&&typeof dt=="number"&&typeof kt=="number"?mixNumber$1(et,dt,kt):getMixer(et)(et,dt)}function createMixers(et,dt,kt){const $t=[],Tt=kt||mix,Dt=et.length-1;for(let Ft=0;Ft<Dt;Ft++){let Ut=Tt(et[Ft],et[Ft+1]);if(dt){const Ht=Array.isArray(dt)?dt[Ft]||noop$c:dt;Ut=pipe(Ht,Ut)}$t.push(Ut)}return $t}function interpolate$7(et,dt,{clamp:kt=!0,ease:$t,mixer:Tt}={}){const Dt=et.length;if(invariant$1(Dt===dt.length),Dt===1)return()=>dt[0];if(Dt===2&&et[0]===et[1])return()=>dt[1];et[0]>et[Dt-1]&&(et=[...et].reverse(),dt=[...dt].reverse());const Ft=createMixers(dt,$t,Tt),Ut=Ft.length,Ht=Kt=>{let Yt=0;if(Ut>1)for(;Yt<et.length-2&&!(Kt<et[Yt+1]);Yt++);const Jt=progress(et[Yt],et[Yt+1],Kt);return Ft[Yt](Jt)};return kt?Kt=>Ht(clamp$6(et[0],et[Dt-1],Kt)):Ht}function fillOffset(et,dt){const kt=et[et.length-1];for(let $t=1;$t<=dt;$t++){const Tt=progress(0,dt,$t);et.push(mixNumber$1(kt,1,Tt))}}function defaultOffset(et){const dt=[0];return fillOffset(dt,et.length-1),dt}function convertOffsetToTimes(et,dt){return et.map(kt=>kt*dt)}function defaultEasing(et,dt){return et.map(()=>dt||easeInOut).splice(0,et.length-1)}function keyframes({duration:et=300,keyframes:dt,times:kt,ease:$t="easeInOut"}){const Tt=isEasingArray($t)?$t.map(easingDefinitionToFunction):easingDefinitionToFunction($t),Dt={done:!1,value:dt[0]},Ft=convertOffsetToTimes(kt&&kt.length===dt.length?kt:defaultOffset(dt),et),Ut=interpolate$7(Ft,dt,{ease:Array.isArray(Tt)?Tt:defaultEasing(dt,Tt)});return{calculatedDuration:et,next:Ht=>(Dt.value=Ut(Ht),Dt.done=Ht>=et,Dt)}}const frameloopDriver=et=>{const dt=({timestamp:kt})=>et(kt);return{start:()=>frame.update(dt,!0),stop:()=>cancelFrame$1(dt),now:()=>frameData.isProcessing?frameData.timestamp:time$1.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=et=>et/100;class MainThreadAnimation extends BaseAnimation{constructor(dt){super(dt),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:Ht}=this.options;Ht&&Ht()};const{name:kt,motionValue:$t,element:Tt,keyframes:Dt}=this.options,Ft=(Tt==null?void 0:Tt.KeyframeResolver)||KeyframeResolver,Ut=(Ht,Kt)=>this.onKeyframesResolved(Ht,Kt);this.resolver=new Ft(Dt,Ut,kt,$t,Tt),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(dt){const{type:kt="keyframes",repeat:$t=0,repeatDelay:Tt=0,repeatType:Dt,velocity:Ft=0}=this.options,Ut=isGenerator(kt)?kt:generators[kt]||keyframes;let Ht,Kt;Ut!==keyframes&&typeof dt[0]!="number"&&(Ht=pipe(percentToProgress,mix(dt[0],dt[1])),dt=[0,100]);const Yt=Ut({...this.options,keyframes:dt});Dt==="mirror"&&(Kt=Ut({...this.options,keyframes:[...dt].reverse(),velocity:-Ft})),Yt.calculatedDuration===null&&(Yt.calculatedDuration=calcGeneratorDuration(Yt));const{calculatedDuration:Jt}=Yt,Zt=Jt+Tt,er=Zt*($t+1)-Tt;return{generator:Yt,mirroredGenerator:Kt,mapPercentToKeyframes:Ht,calculatedDuration:Jt,resolvedDuration:Zt,totalDuration:er}}onPostResolved(){const{autoplay:dt=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!dt?this.pause():this.state=this.pendingPlayState}tick(dt,kt=!1){const{resolved:$t}=this;if(!$t){const{keyframes:mr}=this.options;return{done:!0,value:mr[mr.length-1]}}const{finalKeyframe:Tt,generator:Dt,mirroredGenerator:Ft,mapPercentToKeyframes:Ut,keyframes:Ht,calculatedDuration:Kt,totalDuration:Yt,resolvedDuration:Jt}=$t;if(this.startTime===null)return Dt.next(0);const{delay:Zt,repeat:er,repeatType:rr,repeatDelay:sr,onUpdate:nr}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,dt):this.speed<0&&(this.startTime=Math.min(dt-Yt/this.speed,this.startTime)),kt?this.currentTime=dt:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(dt-this.startTime)*this.speed;const ir=this.currentTime-Zt*(this.speed>=0?1:-1),lr=this.speed>=0?ir<0:ir>Yt;this.currentTime=Math.max(ir,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Yt);let or=this.currentTime,cr=Dt;if(er){const mr=Math.min(this.currentTime,Yt)/Jt;let jr=Math.floor(mr),Rr=mr%1;!Rr&&mr>=1&&(Rr=1),Rr===1&&jr--,jr=Math.min(jr,er+1),!!(jr%2)&&(rr==="reverse"?(Rr=1-Rr,sr&&(Rr-=sr/Jt)):rr==="mirror"&&(cr=Ft)),or=clamp$6(0,1,Rr)*Jt}const dr=lr?{done:!1,value:Ht[0]}:cr.next(or);Ut&&(dr.value=Ut(dr.value));let{done:ur}=dr;!lr&&Kt!==null&&(ur=this.speed>=0?this.currentTime>=Yt:this.currentTime<=0);const pr=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ur);return pr&&Tt!==void 0&&(dr.value=getFinalKeyframe(Ht,this.options,Tt)),nr&&nr(dr.value),pr&&this.finish(),dr}get duration(){const{resolved:dt}=this;return dt?millisecondsToSeconds(dt.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(dt){dt=secondsToMilliseconds(dt),this.currentTime=dt,this.holdTime!==null||this.speed===0?this.holdTime=dt:this.driver&&(this.startTime=this.driver.now()-dt/this.speed)}get speed(){return this.playbackSpeed}set speed(dt){const kt=this.playbackSpeed!==dt;this.playbackSpeed=dt,kt&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:dt=frameloopDriver,onPlay:kt,startTime:$t}=this.options;this.driver||(this.driver=dt(Dt=>this.tick(Dt))),kt&&kt();const Tt=this.driver.now();this.holdTime!==null?this.startTime=Tt-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=Tt):this.startTime=$t??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var dt;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(dt=this.currentTime)!==null&&dt!==void 0?dt:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:dt}=this.options;dt&&dt()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(dt){return this.startTime=0,this.tick(dt,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(et){let dt;return()=>(dt===void 0&&(dt=et()),dt)}const supportsFlags={linearEasing:void 0};function memoSupports(et,dt){const kt=memo(et);return()=>{var $t;return($t=supportsFlags[dt])!==null&&$t!==void 0?$t:kt()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(et){return!!(typeof et=="function"&&supportsLinearEasing()||!et||typeof et=="string"&&(et in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(et)||Array.isArray(et)&&et.every(isWaapiSupportedEasing))}const cubicBezierAsString=([et,dt,kt,$t])=>`cubic-bezier(${et}, ${dt}, ${kt}, ${$t})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(et,dt){if(et)return typeof et=="function"&&supportsLinearEasing()?generateLinearEasing(et,dt):isBezierDefinition(et)?cubicBezierAsString(et):Array.isArray(et)?et.map(kt=>mapEasingToNativeEasing(kt,dt)||supportedWaapiEasing.easeOut):supportedWaapiEasing[et]}function startWaapiAnimation(et,dt,kt,{delay:$t=0,duration:Tt=300,repeat:Dt=0,repeatType:Ft="loop",ease:Ut="easeInOut",times:Ht}={}){const Kt={[dt]:kt};Ht&&(Kt.offset=Ht);const Yt=mapEasingToNativeEasing(Ut,Tt);return Array.isArray(Yt)&&(Kt.easing=Yt),et.animate(Kt,{delay:$t,duration:Tt,easing:Array.isArray(Yt)?"linear":Yt,fill:"both",iterations:Dt+1,direction:Ft==="reverse"?"alternate":"normal"})}function attachTimeline(et,dt){et.timeline=dt,et.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(et){return isGenerator(et.type)||et.type==="spring"||!isWaapiSupportedEasing(et.ease)}function pregenerateKeyframes(et,dt){const kt=new MainThreadAnimation({...dt,keyframes:et,repeat:0,delay:0,isGenerator:!0});let $t={done:!1,value:et[0]};const Tt=[];let Dt=0;for(;!$t.done&&Dt<maxDuration;)$t=kt.sample(Dt),Tt.push($t.value),Dt+=sampleDelta;return{times:void 0,keyframes:Tt,duration:Dt-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(et){return et in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(dt){super(dt);const{name:kt,motionValue:$t,element:Tt,keyframes:Dt}=this.options;this.resolver=new DOMKeyframesResolver(Dt,(Ft,Ut)=>this.onKeyframesResolved(Ft,Ut),kt,$t,Tt),this.resolver.scheduleResolve()}initPlayback(dt,kt){var $t;let{duration:Tt=300,times:Dt,ease:Ft,type:Ut,motionValue:Ht,name:Kt,startTime:Yt}=this.options;if(!(!(($t=Ht.owner)===null||$t===void 0)&&$t.current))return!1;if(typeof Ft=="string"&&supportsLinearEasing()&&isUnsupportedEase(Ft)&&(Ft=unsupportedEasingFunctions[Ft]),requiresPregeneratedKeyframes(this.options)){const{onComplete:Zt,onUpdate:er,motionValue:rr,element:sr,...nr}=this.options,ir=pregenerateKeyframes(dt,nr);dt=ir.keyframes,dt.length===1&&(dt[1]=dt[0]),Tt=ir.duration,Dt=ir.times,Ft=ir.ease,Ut="keyframes"}const Jt=startWaapiAnimation(Ht.owner.current,Kt,dt,{...this.options,duration:Tt,times:Dt,ease:Ft});return Jt.startTime=Yt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(Jt,this.pendingTimeline),this.pendingTimeline=void 0):Jt.onfinish=()=>{const{onComplete:Zt}=this.options;Ht.set(getFinalKeyframe(dt,this.options,kt)),Zt&&Zt(),this.cancel(),this.resolveFinishedPromise()},{animation:Jt,duration:Tt,times:Dt,type:Ut,ease:Ft,keyframes:dt}}get duration(){const{resolved:dt}=this;if(!dt)return 0;const{duration:kt}=dt;return millisecondsToSeconds(kt)}get time(){const{resolved:dt}=this;if(!dt)return 0;const{animation:kt}=dt;return millisecondsToSeconds(kt.currentTime||0)}set time(dt){const{resolved:kt}=this;if(!kt)return;const{animation:$t}=kt;$t.currentTime=secondsToMilliseconds(dt)}get speed(){const{resolved:dt}=this;if(!dt)return 1;const{animation:kt}=dt;return kt.playbackRate}set speed(dt){const{resolved:kt}=this;if(!kt)return;const{animation:$t}=kt;$t.playbackRate=dt}get state(){const{resolved:dt}=this;if(!dt)return"idle";const{animation:kt}=dt;return kt.playState}get startTime(){const{resolved:dt}=this;if(!dt)return null;const{animation:kt}=dt;return kt.startTime}attachTimeline(dt){if(!this._resolved)this.pendingTimeline=dt;else{const{resolved:kt}=this;if(!kt)return noop$c;const{animation:$t}=kt;attachTimeline($t,dt)}return noop$c}play(){if(this.isStopped)return;const{resolved:dt}=this;if(!dt)return;const{animation:kt}=dt;kt.playState==="finished"&&this.updateFinishedPromise(),kt.play()}pause(){const{resolved:dt}=this;if(!dt)return;const{animation:kt}=dt;kt.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:dt}=this;if(!dt)return;const{animation:kt,keyframes:$t,duration:Tt,type:Dt,ease:Ft,times:Ut}=dt;if(kt.playState==="idle"||kt.playState==="finished")return;if(this.time){const{motionValue:Kt,onUpdate:Yt,onComplete:Jt,element:Zt,...er}=this.options,rr=new MainThreadAnimation({...er,keyframes:$t,duration:Tt,type:Dt,ease:Ft,times:Ut,isGenerator:!0}),sr=secondsToMilliseconds(this.time);Kt.setWithVelocity(rr.sample(sr-sampleDelta).value,rr.sample(sr).value,sampleDelta)}const{onStop:Ht}=this.options;Ht&&Ht(),this.cancel()}complete(){const{resolved:dt}=this;dt&&dt.animation.finish()}cancel(){const{resolved:dt}=this;dt&&dt.animation.cancel()}static supports(dt){const{motionValue:kt,name:$t,repeatDelay:Tt,repeatType:Dt,damping:Ft,type:Ut}=dt;return supportsWaapi()&&$t&&acceleratedValues.has($t)&&kt&&kt.owner&&kt.owner.current instanceof HTMLElement&&!kt.owner.getProps().onUpdate&&!Tt&&Dt!=="mirror"&&Ft!==0&&Ut!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(dt){this.stop=()=>this.runAll("stop"),this.animations=dt.filter(Boolean)}then(dt,kt){return Promise.all(this.animations).then(dt).catch(kt)}getAll(dt){return this.animations[0][dt]}setAll(dt,kt){for(let $t=0;$t<this.animations.length;$t++)this.animations[$t][dt]=kt}attachTimeline(dt,kt){const $t=this.animations.map(Tt=>supportsScrollTimeline()&&Tt.attachTimeline?Tt.attachTimeline(dt):kt(Tt));return()=>{$t.forEach((Tt,Dt)=>{Tt&&Tt(),this.animations[Dt].stop()})}}get time(){return this.getAll("time")}set time(dt){this.setAll("time",dt)}get speed(){return this.getAll("speed")}set speed(dt){this.setAll("speed",dt)}get startTime(){return this.getAll("startTime")}get duration(){let dt=0;for(let kt=0;kt<this.animations.length;kt++)dt=Math.max(dt,this.animations[kt].duration);return dt}runAll(dt){this.animations.forEach(kt=>kt[dt]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:et,delay:dt,delayChildren:kt,staggerChildren:$t,staggerDirection:Tt,repeat:Dt,repeatType:Ft,repeatDelay:Ut,from:Ht,elapsed:Kt,...Yt}){return!!Object.keys(Yt).length}const animateMotionValue=(et,dt,kt,$t={},Tt,Dt)=>Ft=>{const Ut=getValueTransition($t,et)||{},Ht=Ut.delay||$t.delay||0;let{elapsed:Kt=0}=$t;Kt=Kt-secondsToMilliseconds(Ht);let Yt={keyframes:Array.isArray(kt)?kt:[null,kt],ease:"easeOut",velocity:dt.getVelocity(),...Ut,delay:-Kt,onUpdate:Zt=>{dt.set(Zt),Ut.onUpdate&&Ut.onUpdate(Zt)},onComplete:()=>{Ft(),Ut.onComplete&&Ut.onComplete()},name:et,motionValue:dt,element:Dt?void 0:Tt};isTransitionDefined(Ut)||(Yt={...Yt,...getDefaultTransition(et,Yt)}),Yt.duration&&(Yt.duration=secondsToMilliseconds(Yt.duration)),Yt.repeatDelay&&(Yt.repeatDelay=secondsToMilliseconds(Yt.repeatDelay)),Yt.from!==void 0&&(Yt.keyframes[0]=Yt.from);let Jt=!1;if((Yt.type===!1||Yt.duration===0&&!Yt.repeatDelay)&&(Yt.duration=0,Yt.delay===0&&(Jt=!0)),Jt&&!Dt&&dt.get()!==void 0){const Zt=getFinalKeyframe(Yt.keyframes,Ut);if(Zt!==void 0)return frame.update(()=>{Yt.onUpdate(Zt),Yt.onComplete()}),new GroupPlaybackControls([])}return!Dt&&AcceleratedAnimation.supports(Yt)?new AcceleratedAnimation(Yt):new MainThreadAnimation(Yt)},isCustomValue=et=>!!(et&&typeof et=="object"&&et.mix&&et.toValue),resolveFinalValueInKeyframes=et=>isKeyframesTarget(et)?et[et.length-1]||0:et;function addUniqueItem(et,dt){et.indexOf(dt)===-1&&et.push(dt)}function removeItem(et,dt){const kt=et.indexOf(dt);kt>-1&&et.splice(kt,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(dt){return addUniqueItem(this.subscriptions,dt),()=>removeItem(this.subscriptions,dt)}notify(dt,kt,$t){const Tt=this.subscriptions.length;if(Tt)if(Tt===1)this.subscriptions[0](dt,kt,$t);else for(let Dt=0;Dt<Tt;Dt++){const Ft=this.subscriptions[Dt];Ft&&Ft(dt,kt,$t)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=et=>!isNaN(parseFloat(et));class MotionValue{constructor(dt,kt={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=($t,Tt=!0)=>{const Dt=time$1.now();this.updatedAt!==Dt&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent($t),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),Tt&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(dt),this.owner=kt.owner}setCurrent(dt){this.current=dt,this.updatedAt=time$1.now(),this.canTrackVelocity===null&&dt!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(dt=this.current){this.prevFrameValue=dt,this.prevUpdatedAt=this.updatedAt}onChange(dt){return this.on("change",dt)}on(dt,kt){this.events[dt]||(this.events[dt]=new SubscriptionManager);const $t=this.events[dt].add(kt);return dt==="change"?()=>{$t(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:$t}clearListeners(){for(const dt in this.events)this.events[dt].clear()}attach(dt,kt){this.passiveEffect=dt,this.stopPassiveEffect=kt}set(dt,kt=!0){!kt||!this.passiveEffect?this.updateAndNotify(dt,kt):this.passiveEffect(dt,this.updateAndNotify)}setWithVelocity(dt,kt,$t){this.set(kt),this.prev=void 0,this.prevFrameValue=dt,this.prevUpdatedAt=this.updatedAt-$t}jump(dt,kt=!0){this.updateAndNotify(dt),this.prev=dt,this.prevUpdatedAt=this.prevFrameValue=void 0,kt&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const dt=time$1.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||dt-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const kt=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),kt)}start(dt){return this.stop(),new Promise(kt=>{this.hasAnimated=!0,this.animation=dt(kt),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(et,dt){return new MotionValue(et,dt)}function setMotionValue(et,dt,kt){et.hasValue(dt)?et.getValue(dt).set(kt):et.addValue(dt,motionValue(kt))}function setTarget(et,dt){const kt=resolveVariant(et,dt);let{transitionEnd:$t={},transition:Tt={},...Dt}=kt||{};Dt={...Dt,...$t};for(const Ft in Dt){const Ut=resolveFinalValueInKeyframes(Dt[Ft]);setMotionValue(et,Ft,Ut)}}const camelToDash=et=>et.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(et){return et.props[optimizedAppearDataAttribute]}const isMotionValue=et=>!!(et&&et.getVelocity);function isWillChangeMotionValue(et){return!!(isMotionValue(et)&&et.add)}function addValueToWillChange(et,dt){const kt=et.getValue("willChange");if(isWillChangeMotionValue(kt))return kt.add(dt)}function shouldBlockAnimation({protectedKeys:et,needsAnimating:dt},kt){const $t=et.hasOwnProperty(kt)&&dt[kt]!==!0;return dt[kt]=!1,$t}function animateTarget(et,dt,{delay:kt=0,transitionOverride:$t,type:Tt}={}){var Dt;let{transition:Ft=et.getDefaultTransition(),transitionEnd:Ut,...Ht}=dt;$t&&(Ft=$t);const Kt=[],Yt=Tt&&et.animationState&&et.animationState.getState()[Tt];for(const Jt in Ht){const Zt=et.getValue(Jt,(Dt=et.latestValues[Jt])!==null&&Dt!==void 0?Dt:null),er=Ht[Jt];if(er===void 0||Yt&&shouldBlockAnimation(Yt,Jt))continue;const rr={delay:kt,...getValueTransition(Ft||{},Jt)};let sr=!1;if(window.MotionHandoffAnimation){const ir=getOptimisedAppearId(et);if(ir){const lr=window.MotionHandoffAnimation(ir,Jt,frame);lr!==null&&(rr.startTime=lr,sr=!0)}}addValueToWillChange(et,Jt),Zt.start(animateMotionValue(Jt,Zt,er,et.shouldReduceMotion&&transformProps.has(Jt)?{type:!1}:rr,et,sr));const nr=Zt.animation;nr&&Kt.push(nr)}return Ut&&Promise.all(Kt).then(()=>{frame.update(()=>{Ut&&setTarget(et,Ut)})}),Kt}function animateVariant(et,dt,kt={}){var $t;const Tt=resolveVariant(et,dt,kt.type==="exit"?($t=et.presenceContext)===null||$t===void 0?void 0:$t.custom:void 0);let{transition:Dt=et.getDefaultTransition()||{}}=Tt||{};kt.transitionOverride&&(Dt=kt.transitionOverride);const Ft=Tt?()=>Promise.all(animateTarget(et,Tt,kt)):()=>Promise.resolve(),Ut=et.variantChildren&&et.variantChildren.size?(Kt=0)=>{const{delayChildren:Yt=0,staggerChildren:Jt,staggerDirection:Zt}=Dt;return animateChildren(et,dt,Yt+Kt,Jt,Zt,kt)}:()=>Promise.resolve(),{when:Ht}=Dt;if(Ht){const[Kt,Yt]=Ht==="beforeChildren"?[Ft,Ut]:[Ut,Ft];return Kt().then(()=>Yt())}else return Promise.all([Ft(),Ut(kt.delay)])}function animateChildren(et,dt,kt=0,$t=0,Tt=1,Dt){const Ft=[],Ut=(et.variantChildren.size-1)*$t,Ht=Tt===1?(Kt=0)=>Kt*$t:(Kt=0)=>Ut-Kt*$t;return Array.from(et.variantChildren).sort(sortByTreeOrder).forEach((Kt,Yt)=>{Kt.notify("AnimationStart",dt),Ft.push(animateVariant(Kt,dt,{...Dt,delay:kt+Ht(Yt)}).then(()=>Kt.notify("AnimationComplete",dt)))}),Promise.all(Ft)}function sortByTreeOrder(et,dt){return et.sortNodePosition(dt)}function animateVisualElement(et,dt,kt={}){et.notify("AnimationStart",dt);let $t;if(Array.isArray(dt)){const Tt=dt.map(Dt=>animateVariant(et,Dt,kt));$t=Promise.all(Tt)}else if(typeof dt=="string")$t=animateVariant(et,dt,kt);else{const Tt=typeof dt=="function"?resolveVariant(et,dt,kt.custom):dt;$t=Promise.all(animateTarget(et,Tt,kt))}return $t.then(()=>{et.notify("AnimationComplete",dt)})}const numVariantProps=variantProps.length;function getVariantContext(et){if(!et)return;if(!et.isControllingVariants){const kt=et.parent?getVariantContext(et.parent)||{}:{};return et.props.initial!==void 0&&(kt.initial=et.props.initial),kt}const dt={};for(let kt=0;kt<numVariantProps;kt++){const $t=variantProps[kt],Tt=et.props[$t];(isVariantLabel(Tt)||Tt===!1)&&(dt[$t]=Tt)}return dt}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(et){return dt=>Promise.all(dt.map(({animation:kt,options:$t})=>animateVisualElement(et,kt,$t)))}function createAnimationState(et){let dt=animateList(et),kt=createState(),$t=!0;const Tt=Ht=>(Kt,Yt)=>{var Jt;const Zt=resolveVariant(et,Yt,Ht==="exit"?(Jt=et.presenceContext)===null||Jt===void 0?void 0:Jt.custom:void 0);if(Zt){const{transition:er,transitionEnd:rr,...sr}=Zt;Kt={...Kt,...sr,...rr}}return Kt};function Dt(Ht){dt=Ht(et)}function Ft(Ht){const{props:Kt}=et,Yt=getVariantContext(et.parent)||{},Jt=[],Zt=new Set;let er={},rr=1/0;for(let nr=0;nr<numAnimationTypes;nr++){const ir=reversePriorityOrder[nr],lr=kt[ir],or=Kt[ir]!==void 0?Kt[ir]:Yt[ir],cr=isVariantLabel(or),dr=ir===Ht?lr.isActive:null;dr===!1&&(rr=nr);let ur=or===Yt[ir]&&or!==Kt[ir]&&cr;if(ur&&$t&&et.manuallyAnimateOnMount&&(ur=!1),lr.protectedKeys={...er},!lr.isActive&&dr===null||!or&&!lr.prevProp||isAnimationControls(or)||typeof or=="boolean")continue;const pr=checkVariantsDidChange(lr.prevProp,or);let mr=pr||ir===Ht&&lr.isActive&&!ur&&cr||nr>rr&&cr,jr=!1;const Rr=Array.isArray(or)?or:[or];let br=Rr.reduce(Tt(ir),{});dr===!1&&(br={});const{prevResolvedValues:_r={}}=lr,Mr={..._r,...br},Pr=Tr=>{mr=!0,Zt.has(Tr)&&(jr=!0,Zt.delete(Tr)),lr.needsAnimating[Tr]=!0;const xr=et.getValue(Tr);xr&&(xr.liveStyle=!1)};for(const Tr in Mr){const xr=br[Tr],wr=_r[Tr];if(er.hasOwnProperty(Tr))continue;let zr=!1;isKeyframesTarget(xr)&&isKeyframesTarget(wr)?zr=!shallowCompare(xr,wr):zr=xr!==wr,zr?xr!=null?Pr(Tr):Zt.add(Tr):xr!==void 0&&Zt.has(Tr)?Pr(Tr):lr.protectedKeys[Tr]=!0}lr.prevProp=or,lr.prevResolvedValues=br,lr.isActive&&(er={...er,...br}),$t&&et.blockInitialAnimation&&(mr=!1),mr&&(!(ur&&pr)||jr)&&Jt.push(...Rr.map(Tr=>({animation:Tr,options:{type:ir}})))}if(Zt.size){const nr={};Zt.forEach(ir=>{const lr=et.getBaseTarget(ir),or=et.getValue(ir);or&&(or.liveStyle=!0),nr[ir]=lr??null}),Jt.push({animation:nr})}let sr=!!Jt.length;return $t&&(Kt.initial===!1||Kt.initial===Kt.animate)&&!et.manuallyAnimateOnMount&&(sr=!1),$t=!1,sr?dt(Jt):Promise.resolve()}function Ut(Ht,Kt){var Yt;if(kt[Ht].isActive===Kt)return Promise.resolve();(Yt=et.variantChildren)===null||Yt===void 0||Yt.forEach(Zt=>{var er;return(er=Zt.animationState)===null||er===void 0?void 0:er.setActive(Ht,Kt)}),kt[Ht].isActive=Kt;const Jt=Ft(Ht);for(const Zt in kt)kt[Zt].protectedKeys={};return Jt}return{animateChanges:Ft,setActive:Ut,setAnimateFunction:Dt,getState:()=>kt,reset:()=>{kt=createState(),$t=!0}}}function checkVariantsDidChange(et,dt){return typeof dt=="string"?dt!==et:Array.isArray(dt)?!shallowCompare(dt,et):!1}function createTypeState(et=!1){return{isActive:et,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}let Feature$1=class{constructor(dt){this.isMounted=!1,this.node=dt}update(){}};class AnimationFeature extends Feature$1{constructor(dt){super(dt),dt.animationState||(dt.animationState=createAnimationState(dt))}updateAnimationControlsSubscription(){const{animate:dt}=this.node.getProps();isAnimationControls(dt)&&(this.unmountControls=dt.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:dt}=this.node.getProps(),{animate:kt}=this.node.prevProps||{};dt!==kt&&this.updateAnimationControlsSubscription()}unmount(){var dt;this.node.animationState.reset(),(dt=this.unmountControls)===null||dt===void 0||dt.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature$1{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:dt,onExitComplete:kt}=this.node.presenceContext,{isPresent:$t}=this.node.prevPresenceContext||{};if(!this.node.animationState||dt===$t)return;const Tt=this.node.animationState.setActive("exit",!dt);kt&&!dt&&Tt.then(()=>kt(this.id))}mount(){const{register:dt}=this.node.presenceContext||{};dt&&(this.unmount=dt(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(et,dt,kt){var $t;if(et instanceof Element)return[et];if(typeof et=="string"){let Tt=document;dt&&(Tt=dt.current);const Dt=($t=kt==null?void 0:kt[et])!==null&&$t!==void 0?$t:Tt.querySelectorAll(et);return Dt?Array.from(Dt):[]}return Array.from(et)}function setupGesture(et,dt){const kt=resolveElements(et),$t=new AbortController,Tt={passive:!0,...dt,signal:$t.signal};return[kt,Tt,()=>$t.abort()]}function filterEvents$1(et){return dt=>{dt.pointerType==="touch"||isDragActive()||et(dt)}}function hover(et,dt,kt={}){const[$t,Tt,Dt]=setupGesture(et,kt),Ft=filterEvents$1(Ut=>{const{target:Ht}=Ut,Kt=dt(Ut);if(!Kt||!Ht)return;const Yt=filterEvents$1(Jt=>{Kt(Jt),Ht.removeEventListener("pointerleave",Yt)});Ht.addEventListener("pointerleave",Yt,Tt)});return $t.forEach(Ut=>{Ut.addEventListener("pointerenter",Ft,Tt)}),Dt}const isPrimaryPointer=et=>et.pointerType==="mouse"?typeof et.button!="number"||et.button<=0:et.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(et){return dt=>{dt.key==="Enter"&&et(dt)}}function firePointerEvent(et,dt){et.dispatchEvent(new PointerEvent("pointer"+dt,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(et,dt)=>{const kt=et.currentTarget;if(!kt)return;const $t=filterEvents(()=>{if(isPressing.has(kt))return;firePointerEvent(kt,"down");const Tt=filterEvents(()=>{firePointerEvent(kt,"up")}),Dt=()=>firePointerEvent(kt,"cancel");kt.addEventListener("keyup",Tt,dt),kt.addEventListener("blur",Dt,dt)});kt.addEventListener("keydown",$t,dt),kt.addEventListener("blur",()=>kt.removeEventListener("keydown",$t),dt)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(et){return focusableElements.has(et.tagName)||et.tabIndex!==-1}const isNodeOrChild=(et,dt)=>dt?et===dt?!0:isNodeOrChild(et,dt.parentElement):!1;function isValidPressEvent(et){return isPrimaryPointer(et)&&!isDragActive()}function press(et,dt,kt={}){const[$t,Tt,Dt]=setupGesture(et,kt),Ft=Ut=>{const Ht=Ut.currentTarget;if(!isValidPressEvent(Ut)||isPressing.has(Ht))return;isPressing.add(Ht);const Kt=dt(Ut),Yt=(er,rr)=>{window.removeEventListener("pointerup",Jt),window.removeEventListener("pointercancel",Zt),!(!isValidPressEvent(er)||!isPressing.has(Ht))&&(isPressing.delete(Ht),Kt&&Kt(er,{success:rr}))},Jt=er=>{Yt(er,kt.useGlobalTarget||isNodeOrChild(Ht,er.target))},Zt=er=>{Yt(er,!1)};window.addEventListener("pointerup",Jt,Tt),window.addEventListener("pointercancel",Zt,Tt)};return $t.forEach(Ut=>{isElementKeyboardAccessible(Ut)||(Ut.tabIndex=0),(kt.useGlobalTarget?window:Ut).addEventListener("pointerdown",Ft,Tt),Ut.addEventListener("focus",Kt=>enableKeyboardPress(Kt,Tt),Tt)}),Dt}function setDragLock(et){return et==="x"||et==="y"?isDragging[et]?null:(isDragging[et]=!0,()=>{isDragging[et]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(et){return{point:{x:et.pageX,y:et.pageY}}}const addPointerInfo=et=>dt=>isPrimaryPointer(dt)&&et(dt,extractEventInfo(dt));function addDomEvent(et,dt,kt,$t={passive:!0}){return et.addEventListener(dt,kt,$t),()=>et.removeEventListener(dt,kt)}function addPointerEvent(et,dt,kt,$t){return addDomEvent(et,dt,addPointerInfo(kt),$t)}const distance=(et,dt)=>Math.abs(et-dt);function distance2D(et,dt){const kt=distance(et.x,dt.x),$t=distance(et.y,dt.y);return Math.sqrt(kt**2+$t**2)}class PanSession{constructor(dt,kt,{transformPagePoint:$t,contextWindow:Tt,dragSnapToOrigin:Dt=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Jt=getPanInfo(this.lastMoveEventInfo,this.history),Zt=this.startEvent!==null,er=distance2D(Jt.offset,{x:0,y:0})>=3;if(!Zt&&!er)return;const{point:rr}=Jt,{timestamp:sr}=frameData;this.history.push({...rr,timestamp:sr});const{onStart:nr,onMove:ir}=this.handlers;Zt||(nr&&nr(this.lastMoveEvent,Jt),this.startEvent=this.lastMoveEvent),ir&&ir(this.lastMoveEvent,Jt)},this.handlePointerMove=(Jt,Zt)=>{this.lastMoveEvent=Jt,this.lastMoveEventInfo=transformPoint(Zt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Jt,Zt)=>{this.end();const{onEnd:er,onSessionEnd:rr,resumeAnimation:sr}=this.handlers;if(this.dragSnapToOrigin&&sr&&sr(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const nr=getPanInfo(Jt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Zt,this.transformPagePoint),this.history);this.startEvent&&er&&er(Jt,nr),rr&&rr(Jt,nr)},!isPrimaryPointer(dt))return;this.dragSnapToOrigin=Dt,this.handlers=kt,this.transformPagePoint=$t,this.contextWindow=Tt||window;const Ft=extractEventInfo(dt),Ut=transformPoint(Ft,this.transformPagePoint),{point:Ht}=Ut,{timestamp:Kt}=frameData;this.history=[{...Ht,timestamp:Kt}];const{onSessionStart:Yt}=kt;Yt&&Yt(dt,getPanInfo(Ut,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(dt){this.handlers=dt}end(){this.removeListeners&&this.removeListeners(),cancelFrame$1(this.updatePoint)}}function transformPoint(et,dt){return dt?{point:dt(et.point)}:et}function subtractPoint(et,dt){return{x:et.x-dt.x,y:et.y-dt.y}}function getPanInfo({point:et},dt){return{point:et,delta:subtractPoint(et,lastDevicePoint(dt)),offset:subtractPoint(et,startDevicePoint(dt)),velocity:getVelocity(dt,.1)}}function startDevicePoint(et){return et[0]}function lastDevicePoint(et){return et[et.length-1]}function getVelocity(et,dt){if(et.length<2)return{x:0,y:0};let kt=et.length-1,$t=null;const Tt=lastDevicePoint(et);for(;kt>=0&&($t=et[kt],!(Tt.timestamp-$t.timestamp>secondsToMilliseconds(dt)));)kt--;if(!$t)return{x:0,y:0};const Dt=millisecondsToSeconds(Tt.timestamp-$t.timestamp);if(Dt===0)return{x:0,y:0};const Ft={x:(Tt.x-$t.x)/Dt,y:(Tt.y-$t.y)/Dt};return Ft.x===1/0&&(Ft.x=0),Ft.y===1/0&&(Ft.y=0),Ft}function isRefObject(et){return et&&typeof et=="object"&&Object.prototype.hasOwnProperty.call(et,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(et){return et.max-et.min}function isNear$1(et,dt,kt){return Math.abs(et-dt)<=kt}function calcAxisDelta(et,dt,kt,$t=.5){et.origin=$t,et.originPoint=mixNumber$1(dt.min,dt.max,et.origin),et.scale=calcLength(kt)/calcLength(dt),et.translate=mixNumber$1(kt.min,kt.max,et.origin)-et.originPoint,(et.scale>=SCALE_MIN&&et.scale<=SCALE_MAX||isNaN(et.scale))&&(et.scale=1),(et.translate>=TRANSLATE_MIN&&et.translate<=TRANSLATE_MAX||isNaN(et.translate))&&(et.translate=0)}function calcBoxDelta(et,dt,kt,$t){calcAxisDelta(et.x,dt.x,kt.x,$t?$t.originX:void 0),calcAxisDelta(et.y,dt.y,kt.y,$t?$t.originY:void 0)}function calcRelativeAxis(et,dt,kt){et.min=kt.min+dt.min,et.max=et.min+calcLength(dt)}function calcRelativeBox(et,dt,kt){calcRelativeAxis(et.x,dt.x,kt.x),calcRelativeAxis(et.y,dt.y,kt.y)}function calcRelativeAxisPosition(et,dt,kt){et.min=dt.min-kt.min,et.max=et.min+calcLength(dt)}function calcRelativePosition(et,dt,kt){calcRelativeAxisPosition(et.x,dt.x,kt.x),calcRelativeAxisPosition(et.y,dt.y,kt.y)}function applyConstraints(et,{min:dt,max:kt},$t){return dt!==void 0&&et<dt?et=$t?mixNumber$1(dt,et,$t.min):Math.max(et,dt):kt!==void 0&&et>kt&&(et=$t?mixNumber$1(kt,et,$t.max):Math.min(et,kt)),et}function calcRelativeAxisConstraints(et,dt,kt){return{min:dt!==void 0?et.min+dt:void 0,max:kt!==void 0?et.max+kt-(et.max-et.min):void 0}}function calcRelativeConstraints(et,{top:dt,left:kt,bottom:$t,right:Tt}){return{x:calcRelativeAxisConstraints(et.x,kt,Tt),y:calcRelativeAxisConstraints(et.y,dt,$t)}}function calcViewportAxisConstraints(et,dt){let kt=dt.min-et.min,$t=dt.max-et.max;return dt.max-dt.min<et.max-et.min&&([kt,$t]=[$t,kt]),{min:kt,max:$t}}function calcViewportConstraints(et,dt){return{x:calcViewportAxisConstraints(et.x,dt.x),y:calcViewportAxisConstraints(et.y,dt.y)}}function calcOrigin$1(et,dt){let kt=.5;const $t=calcLength(et),Tt=calcLength(dt);return Tt>$t?kt=progress(dt.min,dt.max-$t,et.min):$t>Tt&&(kt=progress(et.min,et.max-Tt,dt.min)),clamp$6(0,1,kt)}function rebaseAxisConstraints(et,dt){const kt={};return dt.min!==void 0&&(kt.min=dt.min-et.min),dt.max!==void 0&&(kt.max=dt.max-et.min),kt}const defaultElastic=.35;function resolveDragElastic(et=defaultElastic){return et===!1?et=0:et===!0&&(et=defaultElastic),{x:resolveAxisElastic(et,"left","right"),y:resolveAxisElastic(et,"top","bottom")}}function resolveAxisElastic(et,dt,kt){return{min:resolvePointElastic(et,dt),max:resolvePointElastic(et,kt)}}function resolvePointElastic(et,dt){return typeof et=="number"?et:et[dt]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(et){return[et("x"),et("y")]}function convertBoundingBoxToBox({top:et,left:dt,right:kt,bottom:$t}){return{x:{min:dt,max:kt},y:{min:et,max:$t}}}function convertBoxToBoundingBox({x:et,y:dt}){return{top:dt.min,right:et.max,bottom:dt.max,left:et.min}}function transformBoxPoints(et,dt){if(!dt)return et;const kt=dt({x:et.left,y:et.top}),$t=dt({x:et.right,y:et.bottom});return{top:kt.y,left:kt.x,bottom:$t.y,right:$t.x}}function isIdentityScale(et){return et===void 0||et===1}function hasScale({scale:et,scaleX:dt,scaleY:kt}){return!isIdentityScale(et)||!isIdentityScale(dt)||!isIdentityScale(kt)}function hasTransform(et){return hasScale(et)||has2DTranslate(et)||et.z||et.rotate||et.rotateX||et.rotateY||et.skewX||et.skewY}function has2DTranslate(et){return is2DTranslate(et.x)||is2DTranslate(et.y)}function is2DTranslate(et){return et&&et!=="0%"}function scalePoint(et,dt,kt){const $t=et-kt,Tt=dt*$t;return kt+Tt}function applyPointDelta(et,dt,kt,$t,Tt){return Tt!==void 0&&(et=scalePoint(et,Tt,$t)),scalePoint(et,kt,$t)+dt}function applyAxisDelta(et,dt=0,kt=1,$t,Tt){et.min=applyPointDelta(et.min,dt,kt,$t,Tt),et.max=applyPointDelta(et.max,dt,kt,$t,Tt)}function applyBoxDelta(et,{x:dt,y:kt}){applyAxisDelta(et.x,dt.translate,dt.scale,dt.originPoint),applyAxisDelta(et.y,kt.translate,kt.scale,kt.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(et,dt,kt,$t=!1){const Tt=kt.length;if(!Tt)return;dt.x=dt.y=1;let Dt,Ft;for(let Ut=0;Ut<Tt;Ut++){Dt=kt[Ut],Ft=Dt.projectionDelta;const{visualElement:Ht}=Dt.options;Ht&&Ht.props.style&&Ht.props.style.display==="contents"||($t&&Dt.options.layoutScroll&&Dt.scroll&&Dt!==Dt.root&&transformBox(et,{x:-Dt.scroll.offset.x,y:-Dt.scroll.offset.y}),Ft&&(dt.x*=Ft.x.scale,dt.y*=Ft.y.scale,applyBoxDelta(et,Ft)),$t&&hasTransform(Dt.latestValues)&&transformBox(et,Dt.latestValues))}dt.x<TREE_SCALE_SNAP_MAX&&dt.x>TREE_SCALE_SNAP_MIN&&(dt.x=1),dt.y<TREE_SCALE_SNAP_MAX&&dt.y>TREE_SCALE_SNAP_MIN&&(dt.y=1)}function translateAxis(et,dt){et.min=et.min+dt,et.max=et.max+dt}function transformAxis(et,dt,kt,$t,Tt=.5){const Dt=mixNumber$1(et.min,et.max,Tt);applyAxisDelta(et,dt,kt,Dt,$t)}function transformBox(et,dt){transformAxis(et.x,dt.x,dt.scaleX,dt.scale,dt.originX),transformAxis(et.y,dt.y,dt.scaleY,dt.scale,dt.originY)}function measureViewportBox(et,dt){return convertBoundingBoxToBox(transformBoxPoints(et.getBoundingClientRect(),dt))}function measurePageBox(et,dt,kt){const $t=measureViewportBox(et,kt),{scroll:Tt}=dt;return Tt&&(translateAxis($t.x,Tt.offset.x),translateAxis($t.y,Tt.offset.y)),$t}const getContextWindow=({current:et})=>et?et.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(dt){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=dt}start(dt,{snapToCursor:kt=!1}={}){const{presenceContext:$t}=this.visualElement;if($t&&$t.isPresent===!1)return;const Tt=Yt=>{const{dragSnapToOrigin:Jt}=this.getProps();Jt?this.pauseAnimation():this.stopAnimation(),kt&&this.snapToCursor(extractEventInfo(Yt).point)},Dt=(Yt,Jt)=>{const{drag:Zt,dragPropagation:er,onDragStart:rr}=this.getProps();if(Zt&&!er&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Zt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(nr=>{let ir=this.getAxisMotionValue(nr).get()||0;if(percent.test(ir)){const{projection:lr}=this.visualElement;if(lr&&lr.layout){const or=lr.layout.layoutBox[nr];or&&(ir=calcLength(or)*(parseFloat(ir)/100))}}this.originPoint[nr]=ir}),rr&&frame.postRender(()=>rr(Yt,Jt)),addValueToWillChange(this.visualElement,"transform");const{animationState:sr}=this.visualElement;sr&&sr.setActive("whileDrag",!0)},Ft=(Yt,Jt)=>{const{dragPropagation:Zt,dragDirectionLock:er,onDirectionLock:rr,onDrag:sr}=this.getProps();if(!Zt&&!this.openDragLock)return;const{offset:nr}=Jt;if(er&&this.currentDirection===null){this.currentDirection=getCurrentDirection(nr),this.currentDirection!==null&&rr&&rr(this.currentDirection);return}this.updateAxis("x",Jt.point,nr),this.updateAxis("y",Jt.point,nr),this.visualElement.render(),sr&&sr(Yt,Jt)},Ut=(Yt,Jt)=>this.stop(Yt,Jt),Ht=()=>eachAxis(Yt=>{var Jt;return this.getAnimationState(Yt)==="paused"&&((Jt=this.getAxisMotionValue(Yt).animation)===null||Jt===void 0?void 0:Jt.play())}),{dragSnapToOrigin:Kt}=this.getProps();this.panSession=new PanSession(dt,{onSessionStart:Tt,onStart:Dt,onMove:Ft,onSessionEnd:Ut,resumeAnimation:Ht},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Kt,contextWindow:getContextWindow(this.visualElement)})}stop(dt,kt){const $t=this.isDragging;if(this.cancel(),!$t)return;const{velocity:Tt}=kt;this.startAnimation(Tt);const{onDragEnd:Dt}=this.getProps();Dt&&frame.postRender(()=>Dt(dt,kt))}cancel(){this.isDragging=!1;const{projection:dt,animationState:kt}=this.visualElement;dt&&(dt.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:$t}=this.getProps();!$t&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),kt&&kt.setActive("whileDrag",!1)}updateAxis(dt,kt,$t){const{drag:Tt}=this.getProps();if(!$t||!shouldDrag(dt,Tt,this.currentDirection))return;const Dt=this.getAxisMotionValue(dt);let Ft=this.originPoint[dt]+$t[dt];this.constraints&&this.constraints[dt]&&(Ft=applyConstraints(Ft,this.constraints[dt],this.elastic[dt])),Dt.set(Ft)}resolveConstraints(){var dt;const{dragConstraints:kt,dragElastic:$t}=this.getProps(),Tt=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(dt=this.visualElement.projection)===null||dt===void 0?void 0:dt.layout,Dt=this.constraints;kt&&isRefObject(kt)?this.constraints||(this.constraints=this.resolveRefConstraints()):kt&&Tt?this.constraints=calcRelativeConstraints(Tt.layoutBox,kt):this.constraints=!1,this.elastic=resolveDragElastic($t),Dt!==this.constraints&&Tt&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(Ft=>{this.constraints!==!1&&this.getAxisMotionValue(Ft)&&(this.constraints[Ft]=rebaseAxisConstraints(Tt.layoutBox[Ft],this.constraints[Ft]))})}resolveRefConstraints(){const{dragConstraints:dt,onMeasureDragConstraints:kt}=this.getProps();if(!dt||!isRefObject(dt))return!1;const $t=dt.current,{projection:Tt}=this.visualElement;if(!Tt||!Tt.layout)return!1;const Dt=measurePageBox($t,Tt.root,this.visualElement.getTransformPagePoint());let Ft=calcViewportConstraints(Tt.layout.layoutBox,Dt);if(kt){const Ut=kt(convertBoxToBoundingBox(Ft));this.hasMutatedConstraints=!!Ut,Ut&&(Ft=convertBoundingBoxToBox(Ut))}return Ft}startAnimation(dt){const{drag:kt,dragMomentum:$t,dragElastic:Tt,dragTransition:Dt,dragSnapToOrigin:Ft,onDragTransitionEnd:Ut}=this.getProps(),Ht=this.constraints||{},Kt=eachAxis(Yt=>{if(!shouldDrag(Yt,kt,this.currentDirection))return;let Jt=Ht&&Ht[Yt]||{};Ft&&(Jt={min:0,max:0});const Zt=Tt?200:1e6,er=Tt?40:1e7,rr={type:"inertia",velocity:$t?dt[Yt]:0,bounceStiffness:Zt,bounceDamping:er,timeConstant:750,restDelta:1,restSpeed:10,...Dt,...Jt};return this.startAxisValueAnimation(Yt,rr)});return Promise.all(Kt).then(Ut)}startAxisValueAnimation(dt,kt){const $t=this.getAxisMotionValue(dt);return addValueToWillChange(this.visualElement,dt),$t.start(animateMotionValue(dt,$t,0,kt,this.visualElement,!1))}stopAnimation(){eachAxis(dt=>this.getAxisMotionValue(dt).stop())}pauseAnimation(){eachAxis(dt=>{var kt;return(kt=this.getAxisMotionValue(dt).animation)===null||kt===void 0?void 0:kt.pause()})}getAnimationState(dt){var kt;return(kt=this.getAxisMotionValue(dt).animation)===null||kt===void 0?void 0:kt.state}getAxisMotionValue(dt){const kt=`_drag${dt.toUpperCase()}`,$t=this.visualElement.getProps(),Tt=$t[kt];return Tt||this.visualElement.getValue(dt,($t.initial?$t.initial[dt]:void 0)||0)}snapToCursor(dt){eachAxis(kt=>{const{drag:$t}=this.getProps();if(!shouldDrag(kt,$t,this.currentDirection))return;const{projection:Tt}=this.visualElement,Dt=this.getAxisMotionValue(kt);if(Tt&&Tt.layout){const{min:Ft,max:Ut}=Tt.layout.layoutBox[kt];Dt.set(dt[kt]-mixNumber$1(Ft,Ut,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:dt,dragConstraints:kt}=this.getProps(),{projection:$t}=this.visualElement;if(!isRefObject(kt)||!$t||!this.constraints)return;this.stopAnimation();const Tt={x:0,y:0};eachAxis(Ft=>{const Ut=this.getAxisMotionValue(Ft);if(Ut&&this.constraints!==!1){const Ht=Ut.get();Tt[Ft]=calcOrigin$1({min:Ht,max:Ht},this.constraints[Ft])}});const{transformTemplate:Dt}=this.visualElement.getProps();this.visualElement.current.style.transform=Dt?Dt({},""):"none",$t.root&&$t.root.updateScroll(),$t.updateLayout(),this.resolveConstraints(),eachAxis(Ft=>{if(!shouldDrag(Ft,dt,null))return;const Ut=this.getAxisMotionValue(Ft),{min:Ht,max:Kt}=this.constraints[Ft];Ut.set(mixNumber$1(Ht,Kt,Tt[Ft]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const dt=this.visualElement.current,kt=addPointerEvent(dt,"pointerdown",Ht=>{const{drag:Kt,dragListener:Yt=!0}=this.getProps();Kt&&Yt&&this.start(Ht)}),$t=()=>{const{dragConstraints:Ht}=this.getProps();isRefObject(Ht)&&Ht.current&&(this.constraints=this.resolveRefConstraints())},{projection:Tt}=this.visualElement,Dt=Tt.addEventListener("measure",$t);Tt&&!Tt.layout&&(Tt.root&&Tt.root.updateScroll(),Tt.updateLayout()),frame.read($t);const Ft=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),Ut=Tt.addEventListener("didUpdate",({delta:Ht,hasLayoutChanged:Kt})=>{this.isDragging&&Kt&&(eachAxis(Yt=>{const Jt=this.getAxisMotionValue(Yt);Jt&&(this.originPoint[Yt]+=Ht[Yt].translate,Jt.set(Jt.get()+Ht[Yt].translate))}),this.visualElement.render())});return()=>{Ft(),kt(),Dt(),Ut&&Ut()}}getProps(){const dt=this.visualElement.getProps(),{drag:kt=!1,dragDirectionLock:$t=!1,dragPropagation:Tt=!1,dragConstraints:Dt=!1,dragElastic:Ft=defaultElastic,dragMomentum:Ut=!0}=dt;return{...dt,drag:kt,dragDirectionLock:$t,dragPropagation:Tt,dragConstraints:Dt,dragElastic:Ft,dragMomentum:Ut}}}function shouldDrag(et,dt,kt){return(dt===!0||dt===et)&&(kt===null||kt===et)}function getCurrentDirection(et,dt=10){let kt=null;return Math.abs(et.y)>dt?kt="y":Math.abs(et.x)>dt&&(kt="x"),kt}class DragGesture extends Feature$1{constructor(dt){super(dt),this.removeGroupControls=noop$c,this.removeListeners=noop$c,this.controls=new VisualElementDragControls(dt)}mount(){const{dragControls:dt}=this.node.getProps();dt&&(this.removeGroupControls=dt.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$c}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=et=>(dt,kt)=>{et&&frame.postRender(()=>et(dt,kt))};class PanGesture extends Feature$1{constructor(){super(...arguments),this.removePointerDownListener=noop$c}onPointerDown(dt){this.session=new PanSession(dt,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:dt,onPanStart:kt,onPan:$t,onPanEnd:Tt}=this.node.getProps();return{onSessionStart:asyncHandler(dt),onStart:asyncHandler(kt),onMove:$t,onEnd:(Dt,Ft)=>{delete this.session,Tt&&frame.postRender(()=>Tt(Dt,Ft))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",dt=>this.onPointerDown(dt))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const et=reactExports.useContext(PresenceContext);if(et===null)return[!0,null];const{isPresent:dt,onExitComplete:kt,register:$t}=et,Tt=reactExports.useId();reactExports.useEffect(()=>$t(Tt),[]);const Dt=reactExports.useCallback(()=>kt&&kt(Tt),[Tt,kt]);return!dt&&kt?[!1,Dt]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(et,dt){return dt.max===dt.min?0:et/(dt.max-dt.min)*100}const correctBorderRadius={correct:(et,dt)=>{if(!dt.target)return et;if(typeof et=="string")if(px.test(et))et=parseFloat(et);else return et;const kt=pixelsToPercent(et,dt.target.x),$t=pixelsToPercent(et,dt.target.y);return`${kt}% ${$t}%`}},correctBoxShadow={correct:(et,{treeScale:dt,projectionDelta:kt})=>{const $t=et,Tt=complex.parse(et);if(Tt.length>5)return $t;const Dt=complex.createTransformer(et),Ft=typeof Tt[0]!="number"?1:0,Ut=kt.x.scale*dt.x,Ht=kt.y.scale*dt.y;Tt[0+Ft]/=Ut,Tt[1+Ft]/=Ht;const Kt=mixNumber$1(Ut,Ht,.5);return typeof Tt[2+Ft]=="number"&&(Tt[2+Ft]/=Kt),typeof Tt[3+Ft]=="number"&&(Tt[3+Ft]/=Kt),Dt(Tt)}},scaleCorrectors={};function addScaleCorrector(et){Object.assign(scaleCorrectors,et)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:dt,layoutGroup:kt,switchLayoutGroup:$t,layoutId:Tt}=this.props,{projection:Dt}=dt;addScaleCorrector(defaultScaleCorrectors),Dt&&(kt.group&&kt.group.add(Dt),$t&&$t.register&&Tt&&$t.register(Dt),Dt.root.didUpdate(),Dt.addEventListener("animationComplete",()=>{this.safeToRemove()}),Dt.setOptions({...Dt.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(dt){const{layoutDependency:kt,visualElement:$t,drag:Tt,isPresent:Dt}=this.props,Ft=$t.projection;return Ft&&(Ft.isPresent=Dt,Tt||dt.layoutDependency!==kt||kt===void 0?Ft.willUpdate():this.safeToRemove(),dt.isPresent!==Dt&&(Dt?Ft.promote():Ft.relegate()||frame.postRender(()=>{const Ut=Ft.getStack();(!Ut||!Ut.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:dt}=this.props.visualElement;dt&&(dt.root.didUpdate(),microtask.postRender(()=>{!dt.currentAnimation&&dt.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:dt,layoutGroup:kt,switchLayoutGroup:$t}=this.props,{projection:Tt}=dt;Tt&&(Tt.scheduleCheckAfterUnmount(),kt&&kt.group&&kt.group.remove(Tt),$t&&$t.deregister&&$t.deregister(Tt))}safeToRemove(){const{safeToRemove:dt}=this.props;dt&&dt()}render(){return null}}function MeasureLayout(et){const[dt,kt]=usePresence(),$t=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...et,layoutGroup:$t,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:dt,safeToRemove:kt})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=et=>typeof et=="string"?parseFloat(et):et,isPx=et=>typeof et=="number"||px.test(et);function mixValues(et,dt,kt,$t,Tt,Dt){Tt?(et.opacity=mixNumber$1(0,kt.opacity!==void 0?kt.opacity:1,easeCrossfadeIn($t)),et.opacityExit=mixNumber$1(dt.opacity!==void 0?dt.opacity:1,0,easeCrossfadeOut($t))):Dt&&(et.opacity=mixNumber$1(dt.opacity!==void 0?dt.opacity:1,kt.opacity!==void 0?kt.opacity:1,$t));for(let Ft=0;Ft<numBorders;Ft++){const Ut=`border${borders[Ft]}Radius`;let Ht=getRadius(dt,Ut),Kt=getRadius(kt,Ut);if(Ht===void 0&&Kt===void 0)continue;Ht||(Ht=0),Kt||(Kt=0),Ht===0||Kt===0||isPx(Ht)===isPx(Kt)?(et[Ut]=Math.max(mixNumber$1(asNumber(Ht),asNumber(Kt),$t),0),(percent.test(Kt)||percent.test(Ht))&&(et[Ut]+="%")):et[Ut]=Kt}(dt.rotate||kt.rotate)&&(et.rotate=mixNumber$1(dt.rotate||0,kt.rotate||0,$t))}function getRadius(et,dt){return et[dt]!==void 0?et[dt]:et.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$c);function compress(et,dt,kt){return $t=>$t<et?0:$t>dt?1:kt(progress(et,dt,$t))}function copyAxisInto(et,dt){et.min=dt.min,et.max=dt.max}function copyBoxInto(et,dt){copyAxisInto(et.x,dt.x),copyAxisInto(et.y,dt.y)}function copyAxisDeltaInto(et,dt){et.translate=dt.translate,et.scale=dt.scale,et.originPoint=dt.originPoint,et.origin=dt.origin}function removePointDelta(et,dt,kt,$t,Tt){return et-=dt,et=scalePoint(et,1/kt,$t),Tt!==void 0&&(et=scalePoint(et,1/Tt,$t)),et}function removeAxisDelta(et,dt=0,kt=1,$t=.5,Tt,Dt=et,Ft=et){if(percent.test(dt)&&(dt=parseFloat(dt),dt=mixNumber$1(Ft.min,Ft.max,dt/100)-Ft.min),typeof dt!="number")return;let Ut=mixNumber$1(Dt.min,Dt.max,$t);et===Dt&&(Ut-=dt),et.min=removePointDelta(et.min,dt,kt,Ut,Tt),et.max=removePointDelta(et.max,dt,kt,Ut,Tt)}function removeAxisTransforms(et,dt,[kt,$t,Tt],Dt,Ft){removeAxisDelta(et,dt[kt],dt[$t],dt[Tt],dt.scale,Dt,Ft)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(et,dt,kt,$t){removeAxisTransforms(et.x,dt,xKeys,kt?kt.x:void 0,$t?$t.x:void 0),removeAxisTransforms(et.y,dt,yKeys,kt?kt.y:void 0,$t?$t.y:void 0)}function isAxisDeltaZero(et){return et.translate===0&&et.scale===1}function isDeltaZero(et){return isAxisDeltaZero(et.x)&&isAxisDeltaZero(et.y)}function axisEquals(et,dt){return et.min===dt.min&&et.max===dt.max}function boxEquals(et,dt){return axisEquals(et.x,dt.x)&&axisEquals(et.y,dt.y)}function axisEqualsRounded(et,dt){return Math.round(et.min)===Math.round(dt.min)&&Math.round(et.max)===Math.round(dt.max)}function boxEqualsRounded(et,dt){return axisEqualsRounded(et.x,dt.x)&&axisEqualsRounded(et.y,dt.y)}function aspectRatio(et){return calcLength(et.x)/calcLength(et.y)}function axisDeltaEquals(et,dt){return et.translate===dt.translate&&et.scale===dt.scale&&et.originPoint===dt.originPoint}class NodeStack{constructor(){this.members=[]}add(dt){addUniqueItem(this.members,dt),dt.scheduleRender()}remove(dt){if(removeItem(this.members,dt),dt===this.prevLead&&(this.prevLead=void 0),dt===this.lead){const kt=this.members[this.members.length-1];kt&&this.promote(kt)}}relegate(dt){const kt=this.members.findIndex(Tt=>dt===Tt);if(kt===0)return!1;let $t;for(let Tt=kt;Tt>=0;Tt--){const Dt=this.members[Tt];if(Dt.isPresent!==!1){$t=Dt;break}}return $t?(this.promote($t),!0):!1}promote(dt,kt){const $t=this.lead;if(dt!==$t&&(this.prevLead=$t,this.lead=dt,dt.show(),$t)){$t.instance&&$t.scheduleRender(),dt.scheduleRender(),dt.resumeFrom=$t,kt&&(dt.resumeFrom.preserveOpacity=!0),$t.snapshot&&(dt.snapshot=$t.snapshot,dt.snapshot.latestValues=$t.animationValues||$t.latestValues),dt.root&&dt.root.isUpdating&&(dt.isLayoutDirty=!0);const{crossfade:Tt}=dt.options;Tt===!1&&$t.hide()}}exitAnimationComplete(){this.members.forEach(dt=>{const{options:kt,resumingFrom:$t}=dt;kt.onExitComplete&&kt.onExitComplete(),$t&&$t.options.onExitComplete&&$t.options.onExitComplete()})}scheduleRender(){this.members.forEach(dt=>{dt.instance&&dt.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(et,dt,kt){let $t="";const Tt=et.x.translate/dt.x,Dt=et.y.translate/dt.y,Ft=(kt==null?void 0:kt.z)||0;if((Tt||Dt||Ft)&&($t=`translate3d(${Tt}px, ${Dt}px, ${Ft}px) `),(dt.x!==1||dt.y!==1)&&($t+=`scale(${1/dt.x}, ${1/dt.y}) `),kt){const{transformPerspective:Kt,rotate:Yt,rotateX:Jt,rotateY:Zt,skewX:er,skewY:rr}=kt;Kt&&($t=`perspective(${Kt}px) ${$t}`),Yt&&($t+=`rotate(${Yt}deg) `),Jt&&($t+=`rotateX(${Jt}deg) `),Zt&&($t+=`rotateY(${Zt}deg) `),er&&($t+=`skewX(${er}deg) `),rr&&($t+=`skewY(${rr}deg) `)}const Ut=et.x.scale*dt.x,Ht=et.y.scale*dt.y;return(Ut!==1||Ht!==1)&&($t+=`scale(${Ut}, ${Ht})`),$t||"none"}const compareByDepth=(et,dt)=>et.depth-dt.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(dt){addUniqueItem(this.children,dt),this.isDirty=!0}remove(dt){removeItem(this.children,dt),this.isDirty=!0}forEach(dt){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(dt)}}function resolveMotionValue(et){const dt=isMotionValue(et)?et.get():et;return isCustomValue(dt)?dt.toValue():dt}function delay(et,dt){const kt=time$1.now(),$t=({timestamp:Tt})=>{const Dt=Tt-kt;Dt>=dt&&(cancelFrame$1($t),et(Dt-dt))};return frame.read($t,!0),()=>cancelFrame$1($t)}function isSVGElement$1(et){return et instanceof SVGElement&&et.tagName!=="svg"}function animateSingleValue(et,dt,kt){const $t=isMotionValue(et)?et:motionValue(et);return $t.start(animateMotionValue("",$t,dt,kt)),$t.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(et,dt,kt,$t){const{latestValues:Tt}=dt;Tt[et]&&(kt[et]=Tt[et],dt.setStaticValue(et,0),$t&&($t[et]=0))}function cancelTreeOptimisedTransformAnimations(et){if(et.hasCheckedOptimisedAppear=!0,et.root===et)return;const{visualElement:dt}=et.options;if(!dt)return;const kt=getOptimisedAppearId(dt);if(window.MotionHasOptimisedAnimation(kt,"transform")){const{layout:Tt,layoutId:Dt}=et.options;window.MotionCancelOptimisedAnimation(kt,"transform",frame,!(Tt||Dt))}const{parent:$t}=et;$t&&!$t.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations($t)}function createProjectionNode$1({attachResizeListener:et,defaultParent:dt,measureScroll:kt,checkIsScrollRoot:$t,resetTransform:Tt}){return class{constructor(Ft={},Ut=dt==null?void 0:dt()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=Ft,this.root=Ut?Ut.root||Ut:this,this.path=Ut?[...Ut.path,Ut]:[],this.parent=Ut,this.depth=Ut?Ut.depth+1:0;for(let Ht=0;Ht<this.path.length;Ht++)this.path[Ht].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(Ft,Ut){return this.eventHandlers.has(Ft)||this.eventHandlers.set(Ft,new SubscriptionManager),this.eventHandlers.get(Ft).add(Ut)}notifyListeners(Ft,...Ut){const Ht=this.eventHandlers.get(Ft);Ht&&Ht.notify(...Ut)}hasListeners(Ft){return this.eventHandlers.has(Ft)}mount(Ft,Ut=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement$1(Ft),this.instance=Ft;const{layoutId:Ht,layout:Kt,visualElement:Yt}=this.options;if(Yt&&!Yt.current&&Yt.mount(Ft),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),Ut&&(Kt||Ht)&&(this.isLayoutDirty=!0),et){let Jt;const Zt=()=>this.root.updateBlockedByResize=!1;et(Ft,()=>{this.root.updateBlockedByResize=!0,Jt&&Jt(),Jt=delay(Zt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}Ht&&this.root.registerSharedNode(Ht,this),this.options.animate!==!1&&Yt&&(Ht||Kt)&&this.addEventListener("didUpdate",({delta:Jt,hasLayoutChanged:Zt,hasRelativeTargetChanged:er,layout:rr})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const sr=this.options.transition||Yt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:nr,onLayoutAnimationComplete:ir}=Yt.getProps(),lr=!this.targetLayout||!boxEqualsRounded(this.targetLayout,rr)||er,or=!Zt&&er;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||or||Zt&&(lr||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Jt,or);const cr={...getValueTransition(sr,"layout"),onPlay:nr,onComplete:ir};(Yt.shouldReduceMotion||this.options.layoutRoot)&&(cr.delay=0,cr.type=!1),this.startAnimation(cr)}else Zt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=rr})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const Ft=this.getStack();Ft&&Ft.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame$1(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:Ft}=this.options;return Ft&&Ft.getProps().transformTemplate}willUpdate(Ft=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Yt=0;Yt<this.path.length;Yt++){const Jt=this.path[Yt];Jt.shouldResetTransform=!0,Jt.updateScroll("snapshot"),Jt.options.layoutRoot&&Jt.willUpdate(!1)}const{layoutId:Ut,layout:Ht}=this.options;if(Ut===void 0&&!Ht)return;const Kt=this.getTransformTemplate();this.prevTransformTemplateValue=Kt?Kt(this.latestValues,""):void 0,this.updateSnapshot(),Ft&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const Ut=time$1.now();frameData.delta=clamp$6(0,1e3/60,Ut-frameData.timestamp),frameData.timestamp=Ut,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Ht=0;Ht<this.path.length;Ht++)this.path[Ht].updateScroll();const Ft=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:Ut}=this.options;Ut&&Ut.notify("LayoutMeasure",this.layout.layoutBox,Ft?Ft.layoutBox:void 0)}updateScroll(Ft="measure"){let Ut=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===Ft&&(Ut=!1),Ut){const Ht=$t(this.instance);this.scroll={animationId:this.root.animationId,phase:Ft,isRoot:Ht,offset:kt(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Ht}}}resetTransform(){if(!Tt)return;const Ft=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,Ut=this.projectionDelta&&!isDeltaZero(this.projectionDelta),Ht=this.getTransformTemplate(),Kt=Ht?Ht(this.latestValues,""):void 0,Yt=Kt!==this.prevTransformTemplateValue;Ft&&(Ut||hasTransform(this.latestValues)||Yt)&&(Tt(this.instance,Kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(Ft=!0){const Ut=this.measurePageBox();let Ht=this.removeElementScroll(Ut);return Ft&&(Ht=this.removeTransform(Ht)),roundBox(Ht),{animationId:this.root.animationId,measuredBox:Ut,layoutBox:Ht,latestValues:{},source:this.id}}measurePageBox(){var Ft;const{visualElement:Ut}=this.options;if(!Ut)return createBox();const Ht=Ut.measureViewportBox();if(!(((Ft=this.scroll)===null||Ft===void 0?void 0:Ft.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Yt}=this.root;Yt&&(translateAxis(Ht.x,Yt.offset.x),translateAxis(Ht.y,Yt.offset.y))}return Ht}removeElementScroll(Ft){var Ut;const Ht=createBox();if(copyBoxInto(Ht,Ft),!((Ut=this.scroll)===null||Ut===void 0)&&Ut.wasRoot)return Ht;for(let Kt=0;Kt<this.path.length;Kt++){const Yt=this.path[Kt],{scroll:Jt,options:Zt}=Yt;Yt!==this.root&&Jt&&Zt.layoutScroll&&(Jt.wasRoot&&copyBoxInto(Ht,Ft),translateAxis(Ht.x,Jt.offset.x),translateAxis(Ht.y,Jt.offset.y))}return Ht}applyTransform(Ft,Ut=!1){const Ht=createBox();copyBoxInto(Ht,Ft);for(let Kt=0;Kt<this.path.length;Kt++){const Yt=this.path[Kt];!Ut&&Yt.options.layoutScroll&&Yt.scroll&&Yt!==Yt.root&&transformBox(Ht,{x:-Yt.scroll.offset.x,y:-Yt.scroll.offset.y}),hasTransform(Yt.latestValues)&&transformBox(Ht,Yt.latestValues)}return hasTransform(this.latestValues)&&transformBox(Ht,this.latestValues),Ht}removeTransform(Ft){const Ut=createBox();copyBoxInto(Ut,Ft);for(let Ht=0;Ht<this.path.length;Ht++){const Kt=this.path[Ht];if(!Kt.instance||!hasTransform(Kt.latestValues))continue;hasScale(Kt.latestValues)&&Kt.updateSnapshot();const Yt=createBox(),Jt=Kt.measurePageBox();copyBoxInto(Yt,Jt),removeBoxTransforms(Ut,Kt.latestValues,Kt.snapshot?Kt.snapshot.layoutBox:void 0,Yt)}return hasTransform(this.latestValues)&&removeBoxTransforms(Ut,this.latestValues),Ut}setTargetDelta(Ft){this.targetDelta=Ft,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(Ft){this.options={...this.options,...Ft,crossfade:Ft.crossfade!==void 0?Ft.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(Ft=!1){var Ut;const Ht=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=Ht.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=Ht.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=Ht.isSharedProjectionDirty);const Kt=!!this.resumingFrom||this!==Ht;if(!(Ft||Kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((Ut=this.parent)===null||Ut===void 0)&&Ut.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Jt,layoutId:Zt}=this.options;if(!(!this.layout||!(Jt||Zt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const er=this.getClosestProjectingParent();er&&er.layout&&this.animationProgress!==1?(this.relativeParent=er,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,er.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const er=this.getClosestProjectingParent();er&&!!er.resumingFrom==!!this.resumingFrom&&!er.options.layoutScroll&&er.target&&this.animationProgress!==1?(this.relativeParent=er,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,er.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var Ft;const Ut=this.getLead(),Ht=!!this.resumingFrom||this!==Ut;let Kt=!0;if((this.isProjectionDirty||!((Ft=this.parent)===null||Ft===void 0)&&Ft.isProjectionDirty)&&(Kt=!1),Ht&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(Kt=!1),Kt)return;const{layout:Yt,layoutId:Jt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Yt||Jt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Zt=this.treeScale.x,er=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,Ht),Ut.layout&&!Ut.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(Ut.target=Ut.layout.layoutBox,Ut.targetWithTransforms=createBox());const{target:rr}=Ut;if(!rr){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,rr,this.latestValues),(this.treeScale.x!==Zt||this.treeScale.y!==er||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",rr)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(Ft=!0){var Ut;if((Ut=this.options.visualElement)===null||Ut===void 0||Ut.scheduleRender(),Ft){const Ht=this.getStack();Ht&&Ht.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(Ft,Ut=!1){const Ht=this.snapshot,Kt=Ht?Ht.latestValues:{},Yt={...this.latestValues},Jt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!Ut;const Zt=createBox(),er=Ht?Ht.source:void 0,rr=this.layout?this.layout.source:void 0,sr=er!==rr,nr=this.getStack(),ir=!nr||nr.members.length<=1,lr=!!(sr&&!ir&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let or;this.mixTargetDelta=cr=>{const dr=cr/1e3;mixAxisDelta(Jt.x,Ft.x,dr),mixAxisDelta(Jt.y,Ft.y,dr),this.setTargetDelta(Jt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Zt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Zt,dr),or&&boxEquals(this.relativeTarget,or)&&(this.isProjectionDirty=!1),or||(or=createBox()),copyBoxInto(or,this.relativeTarget)),sr&&(this.animationValues=Yt,mixValues(Yt,Kt,this.latestValues,dr,lr,ir)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=dr},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(Ft){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame$1(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...Ft,onUpdate:Ut=>{this.mixTargetDelta(Ut),Ft.onUpdate&&Ft.onUpdate(Ut)},onComplete:()=>{Ft.onComplete&&Ft.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const Ft=this.getStack();Ft&&Ft.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const Ft=this.getLead();let{targetWithTransforms:Ut,target:Ht,layout:Kt,latestValues:Yt}=Ft;if(!(!Ut||!Ht||!Kt)){if(this!==Ft&&this.layout&&Kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,Kt.layoutBox)){Ht=this.target||createBox();const Jt=calcLength(this.layout.layoutBox.x);Ht.x.min=Ft.target.x.min,Ht.x.max=Ht.x.min+Jt;const Zt=calcLength(this.layout.layoutBox.y);Ht.y.min=Ft.target.y.min,Ht.y.max=Ht.y.min+Zt}copyBoxInto(Ut,Ht),transformBox(Ut,Yt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,Ut,Yt)}}registerSharedNode(Ft,Ut){this.sharedNodes.has(Ft)||this.sharedNodes.set(Ft,new NodeStack),this.sharedNodes.get(Ft).add(Ut);const Kt=Ut.options.initialPromotionConfig;Ut.promote({transition:Kt?Kt.transition:void 0,preserveFollowOpacity:Kt&&Kt.shouldPreserveFollowOpacity?Kt.shouldPreserveFollowOpacity(Ut):void 0})}isLead(){const Ft=this.getStack();return Ft?Ft.lead===this:!0}getLead(){var Ft;const{layoutId:Ut}=this.options;return Ut?((Ft=this.getStack())===null||Ft===void 0?void 0:Ft.lead)||this:this}getPrevLead(){var Ft;const{layoutId:Ut}=this.options;return Ut?(Ft=this.getStack())===null||Ft===void 0?void 0:Ft.prevLead:void 0}getStack(){const{layoutId:Ft}=this.options;if(Ft)return this.root.sharedNodes.get(Ft)}promote({needsReset:Ft,transition:Ut,preserveFollowOpacity:Ht}={}){const Kt=this.getStack();Kt&&Kt.promote(this,Ht),Ft&&(this.projectionDelta=void 0,this.needsReset=!0),Ut&&this.setOptions({transition:Ut})}relegate(){const Ft=this.getStack();return Ft?Ft.relegate(this):!1}resetSkewAndRotation(){const{visualElement:Ft}=this.options;if(!Ft)return;let Ut=!1;const{latestValues:Ht}=Ft;if((Ht.z||Ht.rotate||Ht.rotateX||Ht.rotateY||Ht.rotateZ||Ht.skewX||Ht.skewY)&&(Ut=!0),!Ut)return;const Kt={};Ht.z&&resetDistortingTransform("z",Ft,Kt,this.animationValues);for(let Yt=0;Yt<transformAxes.length;Yt++)resetDistortingTransform(`rotate${transformAxes[Yt]}`,Ft,Kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Yt]}`,Ft,Kt,this.animationValues);Ft.render();for(const Yt in Kt)Ft.setStaticValue(Yt,Kt[Yt]),this.animationValues&&(this.animationValues[Yt]=Kt[Yt]);Ft.scheduleRender()}getProjectionStyles(Ft){var Ut,Ht;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const Kt={visibility:""},Yt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,Kt.opacity="",Kt.pointerEvents=resolveMotionValue(Ft==null?void 0:Ft.pointerEvents)||"",Kt.transform=Yt?Yt(this.latestValues,""):"none",Kt;const Jt=this.getLead();if(!this.projectionDelta||!this.layout||!Jt.target){const sr={};return this.options.layoutId&&(sr.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,sr.pointerEvents=resolveMotionValue(Ft==null?void 0:Ft.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(sr.transform=Yt?Yt({},""):"none",this.hasProjected=!1),sr}const Zt=Jt.animationValues||Jt.latestValues;this.applyTransformsToTarget(),Kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Zt),Yt&&(Kt.transform=Yt(Zt,Kt.transform));const{x:er,y:rr}=this.projectionDelta;Kt.transformOrigin=`${er.origin*100}% ${rr.origin*100}% 0`,Jt.animationValues?Kt.opacity=Jt===this?(Ht=(Ut=Zt.opacity)!==null&&Ut!==void 0?Ut:this.latestValues.opacity)!==null&&Ht!==void 0?Ht:1:this.preserveOpacity?this.latestValues.opacity:Zt.opacityExit:Kt.opacity=Jt===this?Zt.opacity!==void 0?Zt.opacity:"":Zt.opacityExit!==void 0?Zt.opacityExit:0;for(const sr in scaleCorrectors){if(Zt[sr]===void 0)continue;const{correct:nr,applyTo:ir}=scaleCorrectors[sr],lr=Kt.transform==="none"?Zt[sr]:nr(Zt[sr],Jt);if(ir){const or=ir.length;for(let cr=0;cr<or;cr++)Kt[ir[cr]]=lr}else Kt[sr]=lr}return this.options.layoutId&&(Kt.pointerEvents=Jt===this?resolveMotionValue(Ft==null?void 0:Ft.pointerEvents)||"":"none"),Kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(Ft=>{var Ut;return(Ut=Ft.currentAnimation)===null||Ut===void 0?void 0:Ut.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(et){et.updateLayout()}function notifyLayoutUpdate(et){var dt;const kt=((dt=et.resumeFrom)===null||dt===void 0?void 0:dt.snapshot)||et.snapshot;if(et.isLead()&&et.layout&&kt&&et.hasListeners("didUpdate")){const{layoutBox:$t,measuredBox:Tt}=et.layout,{animationType:Dt}=et.options,Ft=kt.source!==et.layout.source;Dt==="size"?eachAxis(Jt=>{const Zt=Ft?kt.measuredBox[Jt]:kt.layoutBox[Jt],er=calcLength(Zt);Zt.min=$t[Jt].min,Zt.max=Zt.min+er}):shouldAnimatePositionOnly(Dt,kt.layoutBox,$t)&&eachAxis(Jt=>{const Zt=Ft?kt.measuredBox[Jt]:kt.layoutBox[Jt],er=calcLength($t[Jt]);Zt.max=Zt.min+er,et.relativeTarget&&!et.currentAnimation&&(et.isProjectionDirty=!0,et.relativeTarget[Jt].max=et.relativeTarget[Jt].min+er)});const Ut=createDelta();calcBoxDelta(Ut,$t,kt.layoutBox);const Ht=createDelta();Ft?calcBoxDelta(Ht,et.applyTransform(Tt,!0),kt.measuredBox):calcBoxDelta(Ht,$t,kt.layoutBox);const Kt=!isDeltaZero(Ut);let Yt=!1;if(!et.resumeFrom){const Jt=et.getClosestProjectingParent();if(Jt&&!Jt.resumeFrom){const{snapshot:Zt,layout:er}=Jt;if(Zt&&er){const rr=createBox();calcRelativePosition(rr,kt.layoutBox,Zt.layoutBox);const sr=createBox();calcRelativePosition(sr,$t,er.layoutBox),boxEqualsRounded(rr,sr)||(Yt=!0),Jt.options.layoutRoot&&(et.relativeTarget=sr,et.relativeTargetOrigin=rr,et.relativeParent=Jt)}}}et.notifyListeners("didUpdate",{layout:$t,snapshot:kt,delta:Ht,layoutDelta:Ut,hasLayoutChanged:Kt,hasRelativeTargetChanged:Yt})}else if(et.isLead()){const{onExitComplete:$t}=et.options;$t&&$t()}et.options.transition=void 0}function propagateDirtyNodes(et){isDebug&&metrics.totalNodes++,et.parent&&(et.isProjecting()||(et.isProjectionDirty=et.parent.isProjectionDirty),et.isSharedProjectionDirty||(et.isSharedProjectionDirty=!!(et.isProjectionDirty||et.parent.isProjectionDirty||et.parent.isSharedProjectionDirty)),et.isTransformDirty||(et.isTransformDirty=et.parent.isTransformDirty))}function cleanDirtyNodes(et){et.isProjectionDirty=et.isSharedProjectionDirty=et.isTransformDirty=!1}function clearSnapshot(et){et.clearSnapshot()}function clearMeasurements(et){et.clearMeasurements()}function clearIsLayoutDirty(et){et.isLayoutDirty=!1}function resetTransformStyle(et){const{visualElement:dt}=et.options;dt&&dt.getProps().onBeforeLayoutMeasure&&dt.notify("BeforeLayoutMeasure"),et.resetTransform()}function finishAnimation(et){et.finishAnimation(),et.targetDelta=et.relativeTarget=et.target=void 0,et.isProjectionDirty=!0}function resolveTargetDelta(et){et.resolveTargetDelta()}function calcProjection(et){et.calcProjection()}function resetSkewAndRotation(et){et.resetSkewAndRotation()}function removeLeadSnapshots(et){et.removeLeadSnapshot()}function mixAxisDelta(et,dt,kt){et.translate=mixNumber$1(dt.translate,0,kt),et.scale=mixNumber$1(dt.scale,1,kt),et.origin=dt.origin,et.originPoint=dt.originPoint}function mixAxis(et,dt,kt,$t){et.min=mixNumber$1(dt.min,kt.min,$t),et.max=mixNumber$1(dt.max,kt.max,$t)}function mixBox(et,dt,kt,$t){mixAxis(et.x,dt.x,kt.x,$t),mixAxis(et.y,dt.y,kt.y,$t)}function hasOpacityCrossfade(et){return et.animationValues&&et.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=et=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(et),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$c;function roundAxis(et){et.min=roundPoint(et.min),et.max=roundPoint(et.max)}function roundBox(et){roundAxis(et.x),roundAxis(et.y)}function shouldAnimatePositionOnly(et,dt,kt){return et==="position"||et==="preserve-aspect"&&!isNear$1(aspectRatio(dt),aspectRatio(kt),.2)}function checkNodeWasScrollRoot(et){var dt;return et!==et.root&&((dt=et.scroll)===null||dt===void 0?void 0:dt.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(et,dt)=>addDomEvent(et,"resize",dt),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:et=>({x:et.scrollLeft,y:et.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const et=new DocumentProjectionNode({});et.mount(window),et.setOptions({layoutScroll:!0}),rootProjectionNode.current=et}return rootProjectionNode.current},resetTransform:(et,dt)=>{et.style.transform=dt!==void 0?dt:"none"},checkIsScrollRoot:et=>window.getComputedStyle(et).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(et,dt,kt){const{props:$t}=et;et.animationState&&$t.whileHover&&et.animationState.setActive("whileHover",kt==="Start");const Tt="onHover"+kt,Dt=$t[Tt];Dt&&frame.postRender(()=>Dt(dt,extractEventInfo(dt)))}class HoverGesture extends Feature$1{mount(){const{current:dt}=this.node;dt&&(this.unmount=hover(dt,kt=>(handleHoverEvent(this.node,kt,"Start"),$t=>handleHoverEvent(this.node,$t,"End"))))}unmount(){}}class FocusGesture extends Feature$1{constructor(){super(...arguments),this.isActive=!1}onFocus(){let dt=!1;try{dt=this.node.current.matches(":focus-visible")}catch{dt=!0}!dt||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(et,dt,kt){const{props:$t}=et;et.animationState&&$t.whileTap&&et.animationState.setActive("whileTap",kt==="Start");const Tt="onTap"+(kt==="End"?"":kt),Dt=$t[Tt];Dt&&frame.postRender(()=>Dt(dt,extractEventInfo(dt)))}class PressGesture extends Feature$1{mount(){const{current:dt}=this.node;dt&&(this.unmount=press(dt,kt=>(handlePressEvent(this.node,kt,"Start"),($t,{success:Tt})=>handlePressEvent(this.node,$t,Tt?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=et=>{const dt=observerCallbacks.get(et.target);dt&&dt(et)},fireAllObserverCallbacks=et=>{et.forEach(fireObserverCallback)};function initIntersectionObserver({root:et,...dt}){const kt=et||document;observers.has(kt)||observers.set(kt,{});const $t=observers.get(kt),Tt=JSON.stringify(dt);return $t[Tt]||($t[Tt]=new IntersectionObserver(fireAllObserverCallbacks,{root:et,...dt})),$t[Tt]}function observeIntersection(et,dt,kt){const $t=initIntersectionObserver(dt);return observerCallbacks.set(et,kt),$t.observe(et),()=>{observerCallbacks.delete(et),$t.unobserve(et)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature$1{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:dt={}}=this.node.getProps(),{root:kt,margin:$t,amount:Tt="some",once:Dt}=dt,Ft={root:kt?kt.current:void 0,rootMargin:$t,threshold:typeof Tt=="number"?Tt:thresholdNames[Tt]},Ut=Ht=>{const{isIntersecting:Kt}=Ht;if(this.isInView===Kt||(this.isInView=Kt,Dt&&!Kt&&this.hasEnteredView))return;Kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",Kt);const{onViewportEnter:Yt,onViewportLeave:Jt}=this.node.getProps(),Zt=Kt?Yt:Jt;Zt&&Zt(Ht)};return observeIntersection(this.node.current,Ft,Ut)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:dt,prevProps:kt}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(dt,kt))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:et={}},{viewport:dt={}}={}){return kt=>et[kt]!==dt[kt]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:et=>et,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$8=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(et,dt,kt,$t,Tt){var Dt,Ft;const{visualElement:Ut}=reactExports.useContext(MotionContext),Ht=reactExports.useContext(LazyContext),Kt=reactExports.useContext(PresenceContext),Yt=reactExports.useContext(MotionConfigContext).reducedMotion,Jt=reactExports.useRef(null);$t=$t||Ht.renderer,!Jt.current&&$t&&(Jt.current=$t(et,{visualState:dt,parent:Ut,props:kt,presenceContext:Kt,blockInitialAnimation:Kt?Kt.initial===!1:!1,reducedMotionConfig:Yt}));const Zt=Jt.current,er=reactExports.useContext(SwitchLayoutGroupContext);Zt&&!Zt.projection&&Tt&&(Zt.type==="html"||Zt.type==="svg")&&createProjectionNode(Jt.current,kt,Tt,er);const rr=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Zt&&rr.current&&Zt.update(kt,Kt)});const sr=kt[optimizedAppearDataAttribute],nr=reactExports.useRef(!!sr&&!(!((Dt=window.MotionHandoffIsComplete)===null||Dt===void 0)&&Dt.call(window,sr))&&((Ft=window.MotionHasOptimisedAnimation)===null||Ft===void 0?void 0:Ft.call(window,sr)));return useIsomorphicLayoutEffect$8(()=>{Zt&&(rr.current=!0,window.MotionIsMounted=!0,Zt.updateFeatures(),microtask.render(Zt.render),nr.current&&Zt.animationState&&Zt.animationState.animateChanges())}),reactExports.useEffect(()=>{Zt&&(!nr.current&&Zt.animationState&&Zt.animationState.animateChanges(),nr.current&&(queueMicrotask(()=>{var ir;(ir=window.MotionHandoffMarkAsComplete)===null||ir===void 0||ir.call(window,sr)}),nr.current=!1))}),Zt}function createProjectionNode(et,dt,kt,$t){const{layoutId:Tt,layout:Dt,drag:Ft,dragConstraints:Ut,layoutScroll:Ht,layoutRoot:Kt}=dt;et.projection=new kt(et.latestValues,dt["data-framer-portal-id"]?void 0:getClosestProjectingNode(et.parent)),et.projection.setOptions({layoutId:Tt,layout:Dt,alwaysMeasureLayout:!!Ft||Ut&&isRefObject(Ut),visualElement:et,animationType:typeof Dt=="string"?Dt:"both",initialPromotionConfig:$t,layoutScroll:Ht,layoutRoot:Kt})}function getClosestProjectingNode(et){if(et)return et.options.allowProjection!==!1?et.projection:getClosestProjectingNode(et.parent)}function useMotionRef(et,dt,kt){return reactExports.useCallback($t=>{$t&&et.mount&&et.mount($t),dt&&($t?dt.mount($t):dt.unmount()),kt&&(typeof kt=="function"?kt($t):isRefObject(kt)&&(kt.current=$t))},[dt])}function isControllingVariants(et){return isAnimationControls(et.animate)||variantProps.some(dt=>isVariantLabel(et[dt]))}function isVariantNode(et){return!!(isControllingVariants(et)||et.variants)}function getCurrentTreeVariants(et,dt){if(isControllingVariants(et)){const{initial:kt,animate:$t}=et;return{initial:kt===!1||isVariantLabel(kt)?kt:void 0,animate:isVariantLabel($t)?$t:void 0}}return et.inherit!==!1?dt:{}}function useCreateMotionContext(et){const{initial:dt,animate:kt}=getCurrentTreeVariants(et,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:dt,animate:kt}),[variantLabelsAsDependency(dt),variantLabelsAsDependency(kt)])}function variantLabelsAsDependency(et){return Array.isArray(et)?et.join(" "):et}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const et in featureProps)featureDefinitions[et]={isEnabled:dt=>featureProps[et].some(kt=>!!dt[kt])};function loadFeatures(et){for(const dt in et)featureDefinitions[dt]={...featureDefinitions[dt],...et[dt]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:et,createVisualElement:dt,useRender:kt,useVisualState:$t,Component:Tt}){et&&loadFeatures(et);function Dt(Ut,Ht){let Kt;const Yt={...reactExports.useContext(MotionConfigContext),...Ut,layoutId:useLayoutId(Ut)},{isStatic:Jt}=Yt,Zt=useCreateMotionContext(Ut),er=$t(Ut,Jt);if(!Jt&&isBrowser$1){useStrictMode();const rr=getProjectionFunctionality(Yt);Kt=rr.MeasureLayout,Zt.visualElement=useVisualElement(Tt,er,Yt,dt,rr.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Zt,children:[Kt&&Zt.visualElement?jsxRuntimeExports.jsx(Kt,{visualElement:Zt.visualElement,...Yt}):null,kt(Tt,Ut,useMotionRef(er,Zt.visualElement,Ht),er,Jt,Zt.visualElement)]})}const Ft=reactExports.forwardRef(Dt);return Ft[motionComponentSymbol]=Tt,Ft}function useLayoutId({layoutId:et}){const dt=reactExports.useContext(LayoutGroupContext).id;return dt&&et!==void 0?dt+"-"+et:et}function useStrictMode(et,dt){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(et){const{drag:dt,layout:kt}=featureDefinitions;if(!dt&&!kt)return{};const $t={...dt,...kt};return{MeasureLayout:dt!=null&&dt.isEnabled(et)||kt!=null&&kt.isEnabled(et)?$t.MeasureLayout:void 0,ProjectionNode:$t.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(et){return typeof et!="string"||et.includes("-")?!1:!!(lowercaseSVGElements.indexOf(et)>-1||/[A-Z]/u.test(et))}function renderHTML(et,{style:dt,vars:kt},$t,Tt){Object.assign(et.style,dt,Tt&&Tt.getProjectionStyles($t));for(const Dt in kt)et.style.setProperty(Dt,kt[Dt])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(et,dt,kt,$t){renderHTML(et,dt,void 0,$t);for(const Tt in dt.attrs)et.setAttribute(camelCaseAttributes.has(Tt)?Tt:camelToDash(Tt),dt.attrs[Tt])}function isForcedMotionValue(et,{layout:dt,layoutId:kt}){return transformProps.has(et)||et.startsWith("origin")||(dt||kt!==void 0)&&(!!scaleCorrectors[et]||et==="opacity")}function scrapeMotionValuesFromProps$1(et,dt,kt){var $t;const{style:Tt}=et,Dt={};for(const Ft in Tt)(isMotionValue(Tt[Ft])||dt.style&&isMotionValue(dt.style[Ft])||isForcedMotionValue(Ft,et)||(($t=kt==null?void 0:kt.getValue(Ft))===null||$t===void 0?void 0:$t.liveStyle)!==void 0)&&(Dt[Ft]=Tt[Ft]);return Dt}function scrapeMotionValuesFromProps(et,dt,kt){const $t=scrapeMotionValuesFromProps$1(et,dt,kt);for(const Tt in et)if(isMotionValue(et[Tt])||isMotionValue(dt[Tt])){const Dt=transformPropOrder.indexOf(Tt)!==-1?"attr"+Tt.charAt(0).toUpperCase()+Tt.substring(1):Tt;$t[Dt]=et[Tt]}return $t}function useConstant(et){const dt=reactExports.useRef(null);return dt.current===null&&(dt.current=et()),dt.current}function makeState$1({scrapeMotionValuesFromProps:et,createRenderState:dt,onMount:kt},$t,Tt,Dt){const Ft={latestValues:makeLatestValues($t,Tt,Dt,et),renderState:dt()};return kt&&(Ft.mount=Ut=>kt($t,Ut,Ft)),Ft}const makeUseVisualState=et=>(dt,kt)=>{const $t=reactExports.useContext(MotionContext),Tt=reactExports.useContext(PresenceContext),Dt=()=>makeState$1(et,dt,$t,Tt);return kt?Dt():useConstant(Dt)};function makeLatestValues(et,dt,kt,$t){const Tt={},Dt=$t(et,{});for(const Zt in Dt)Tt[Zt]=resolveMotionValue(Dt[Zt]);let{initial:Ft,animate:Ut}=et;const Ht=isControllingVariants(et),Kt=isVariantNode(et);dt&&Kt&&!Ht&&et.inherit!==!1&&(Ft===void 0&&(Ft=dt.initial),Ut===void 0&&(Ut=dt.animate));let Yt=kt?kt.initial===!1:!1;Yt=Yt||Ft===!1;const Jt=Yt?Ut:Ft;if(Jt&&typeof Jt!="boolean"&&!isAnimationControls(Jt)){const Zt=Array.isArray(Jt)?Jt:[Jt];for(let er=0;er<Zt.length;er++){const rr=resolveVariantFromProps(et,Zt[er]);if(rr){const{transitionEnd:sr,transition:nr,...ir}=rr;for(const lr in ir){let or=ir[lr];if(Array.isArray(or)){const cr=Yt?or.length-1:0;or=or[cr]}or!==null&&(Tt[lr]=or)}for(const lr in sr)Tt[lr]=sr[lr]}}}return Tt}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(et,dt)=>dt&&typeof et=="number"?dt.transform(et):et,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(et,dt,kt){let $t="",Tt=!0;for(let Dt=0;Dt<numTransforms;Dt++){const Ft=transformPropOrder[Dt],Ut=et[Ft];if(Ut===void 0)continue;let Ht=!0;if(typeof Ut=="number"?Ht=Ut===(Ft.startsWith("scale")?1:0):Ht=parseFloat(Ut)===0,!Ht||kt){const Kt=getValueAsType(Ut,numberValueTypes[Ft]);if(!Ht){Tt=!1;const Yt=translateAlias[Ft]||Ft;$t+=`${Yt}(${Kt}) `}kt&&(dt[Ft]=Kt)}}return $t=$t.trim(),kt?$t=kt(dt,Tt?"":$t):Tt&&($t="none"),$t}function buildHTMLStyles(et,dt,kt){const{style:$t,vars:Tt,transformOrigin:Dt}=et;let Ft=!1,Ut=!1;for(const Ht in dt){const Kt=dt[Ht];if(transformProps.has(Ht)){Ft=!0;continue}else if(isCSSVariableName(Ht)){Tt[Ht]=Kt;continue}else{const Yt=getValueAsType(Kt,numberValueTypes[Ht]);Ht.startsWith("origin")?(Ut=!0,Dt[Ht]=Yt):$t[Ht]=Yt}}if(dt.transform||(Ft||kt?$t.transform=buildTransform(dt,et.transform,kt):$t.transform&&($t.transform="none")),Ut){const{originX:Ht="50%",originY:Kt="50%",originZ:Yt=0}=Dt;$t.transformOrigin=`${Ht} ${Kt} ${Yt}`}}function calcOrigin(et,dt,kt){return typeof et=="string"?et:px.transform(dt+kt*et)}function calcSVGTransformOrigin(et,dt,kt){const $t=calcOrigin(dt,et.x,et.width),Tt=calcOrigin(kt,et.y,et.height);return`${$t} ${Tt}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(et,dt,kt=1,$t=0,Tt=!0){et.pathLength=1;const Dt=Tt?dashKeys:camelKeys;et[Dt.offset]=px.transform(-$t);const Ft=px.transform(dt),Ut=px.transform(kt);et[Dt.array]=`${Ft} ${Ut}`}function buildSVGAttrs(et,{attrX:dt,attrY:kt,attrScale:$t,originX:Tt,originY:Dt,pathLength:Ft,pathSpacing:Ut=1,pathOffset:Ht=0,...Kt},Yt,Jt){if(buildHTMLStyles(et,Kt,Jt),Yt){et.style.viewBox&&(et.attrs.viewBox=et.style.viewBox);return}et.attrs=et.style,et.style={};const{attrs:Zt,style:er,dimensions:rr}=et;Zt.transform&&(rr&&(er.transform=Zt.transform),delete Zt.transform),rr&&(Tt!==void 0||Dt!==void 0||er.transform)&&(er.transformOrigin=calcSVGTransformOrigin(rr,Tt!==void 0?Tt:.5,Dt!==void 0?Dt:.5)),dt!==void 0&&(Zt.x=dt),kt!==void 0&&(Zt.y=kt),$t!==void 0&&(Zt.scale=$t),Ft!==void 0&&buildSVGPath(Zt,Ft,Ut,Ht,!1)}const isSVGTag=et=>typeof et=="string"&&et.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(et,dt,{renderState:kt,latestValues:$t})=>{frame.read(()=>{try{kt.dimensions=typeof dt.getBBox=="function"?dt.getBBox():dt.getBoundingClientRect()}catch{kt.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(kt,$t,isSVGTag(dt.tagName),et.transformTemplate),renderSVG(dt,kt)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(et,dt,kt){for(const $t in dt)!isMotionValue(dt[$t])&&!isForcedMotionValue($t,kt)&&(et[$t]=dt[$t])}function useInitialMotionValues({transformTemplate:et},dt){return reactExports.useMemo(()=>{const kt=createHtmlRenderState();return buildHTMLStyles(kt,dt,et),Object.assign({},kt.vars,kt.style)},[dt])}function useStyle(et,dt){const kt=et.style||{},$t={};return copyRawValuesOnly($t,kt,et),Object.assign($t,useInitialMotionValues(et,dt)),$t}function useHTMLProps(et,dt){const kt={},$t=useStyle(et,dt);return et.drag&&et.dragListener!==!1&&(kt.draggable=!1,$t.userSelect=$t.WebkitUserSelect=$t.WebkitTouchCallout="none",$t.touchAction=et.drag===!0?"none":`pan-${et.drag==="x"?"y":"x"}`),et.tabIndex===void 0&&(et.onTap||et.onTapStart||et.whileTap)&&(kt.tabIndex=0),kt.style=$t,kt}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(et){return et.startsWith("while")||et.startsWith("drag")&&et!=="draggable"||et.startsWith("layout")||et.startsWith("onTap")||et.startsWith("onPan")||et.startsWith("onLayout")||validMotionProps.has(et)}let shouldForward=et=>!isValidMotionProp(et);function loadExternalIsValidProp(et){et&&(shouldForward=dt=>dt.startsWith("on")?!isValidMotionProp(dt):et(dt))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(et,dt,kt){const $t={};for(const Tt in et)Tt==="values"&&typeof et.values=="object"||(shouldForward(Tt)||kt===!0&&isValidMotionProp(Tt)||!dt&&!isValidMotionProp(Tt)||et.draggable&&Tt.startsWith("onDrag"))&&($t[Tt]=et[Tt]);return $t}function useSVGProps(et,dt,kt,$t){const Tt=reactExports.useMemo(()=>{const Dt=createSvgRenderState();return buildSVGAttrs(Dt,dt,isSVGTag($t),et.transformTemplate),{...Dt.attrs,style:{...Dt.style}}},[dt]);if(et.style){const Dt={};copyRawValuesOnly(Dt,et.style,et),Tt.style={...Dt,...Tt.style}}return Tt}function createUseRender(et=!1){return(kt,$t,Tt,{latestValues:Dt},Ft)=>{const Ht=(isSVGComponent(kt)?useSVGProps:useHTMLProps)($t,Dt,Ft,kt),Kt=filterProps($t,typeof kt=="string",et),Yt=kt!==reactExports.Fragment?{...Kt,...Ht,ref:Tt}:{},{children:Jt}=$t,Zt=reactExports.useMemo(()=>isMotionValue(Jt)?Jt.get():Jt,[Jt]);return reactExports.createElement(kt,{...Yt,children:Zt})}}function createMotionComponentFactory(et,dt){return function($t,{forwardMotionProps:Tt}={forwardMotionProps:!1}){const Ft={...isSVGComponent($t)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:et,useRender:createUseRender(Tt),createVisualElement:dt,Component:$t};return createRendererMotionComponent(Ft)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const et=window.matchMedia("(prefers-reduced-motion)"),dt=()=>prefersReducedMotion.current=et.matches;et.addListener(dt),dt()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(et,dt,kt){for(const $t in dt){const Tt=dt[$t],Dt=kt[$t];if(isMotionValue(Tt))et.addValue($t,Tt);else if(isMotionValue(Dt))et.addValue($t,motionValue(Tt,{owner:et}));else if(Dt!==Tt)if(et.hasValue($t)){const Ft=et.getValue($t);Ft.liveStyle===!0?Ft.jump(Tt):Ft.hasAnimated||Ft.set(Tt)}else{const Ft=et.getStaticValue($t);et.addValue($t,motionValue(Ft!==void 0?Ft:Tt,{owner:et}))}}for(const $t in kt)dt[$t]===void 0&&et.removeValue($t);return dt}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=et=>valueTypes.find(testValueType(et)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(dt,kt,$t){return{}}constructor({parent:dt,props:kt,presenceContext:$t,reducedMotionConfig:Tt,blockInitialAnimation:Dt,visualState:Ft},Ut={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Zt=time$1.now();this.renderScheduledAt<Zt&&(this.renderScheduledAt=Zt,frame.render(this.render,!1,!0))};const{latestValues:Ht,renderState:Kt}=Ft;this.latestValues=Ht,this.baseTarget={...Ht},this.initialValues=kt.initial?{...Ht}:{},this.renderState=Kt,this.parent=dt,this.props=kt,this.presenceContext=$t,this.depth=dt?dt.depth+1:0,this.reducedMotionConfig=Tt,this.options=Ut,this.blockInitialAnimation=!!Dt,this.isControllingVariants=isControllingVariants(kt),this.isVariantNode=isVariantNode(kt),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(dt&&dt.current);const{willChange:Yt,...Jt}=this.scrapeMotionValuesFromProps(kt,{},this);for(const Zt in Jt){const er=Jt[Zt];Ht[Zt]!==void 0&&isMotionValue(er)&&er.set(Ht[Zt],!1)}}mount(dt){this.current=dt,visualElementStore.set(dt,this),this.projection&&!this.projection.instance&&this.projection.mount(dt),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((kt,$t)=>this.bindToMotionValue($t,kt)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame$1(this.notifyUpdate),cancelFrame$1(this.render),this.valueSubscriptions.forEach(dt=>dt()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const dt in this.events)this.events[dt].clear();for(const dt in this.features){const kt=this.features[dt];kt&&(kt.unmount(),kt.isMounted=!1)}this.current=null}bindToMotionValue(dt,kt){this.valueSubscriptions.has(dt)&&this.valueSubscriptions.get(dt)();const $t=transformProps.has(dt),Tt=kt.on("change",Ut=>{this.latestValues[dt]=Ut,this.props.onUpdate&&frame.preRender(this.notifyUpdate),$t&&this.projection&&(this.projection.isTransformDirty=!0)}),Dt=kt.on("renderRequest",this.scheduleRender);let Ft;window.MotionCheckAppearSync&&(Ft=window.MotionCheckAppearSync(this,dt,kt)),this.valueSubscriptions.set(dt,()=>{Tt(),Dt(),Ft&&Ft(),kt.owner&&kt.stop()})}sortNodePosition(dt){return!this.current||!this.sortInstanceNodePosition||this.type!==dt.type?0:this.sortInstanceNodePosition(this.current,dt.current)}updateFeatures(){let dt="animation";for(dt in featureDefinitions){const kt=featureDefinitions[dt];if(!kt)continue;const{isEnabled:$t,Feature:Tt}=kt;if(!this.features[dt]&&Tt&&$t(this.props)&&(this.features[dt]=new Tt(this)),this.features[dt]){const Dt=this.features[dt];Dt.isMounted?Dt.update():(Dt.mount(),Dt.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(dt){return this.latestValues[dt]}setStaticValue(dt,kt){this.latestValues[dt]=kt}update(dt,kt){(dt.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=dt,this.prevPresenceContext=this.presenceContext,this.presenceContext=kt;for(let $t=0;$t<propEventHandlers.length;$t++){const Tt=propEventHandlers[$t];this.propEventSubscriptions[Tt]&&(this.propEventSubscriptions[Tt](),delete this.propEventSubscriptions[Tt]);const Dt="on"+Tt,Ft=dt[Dt];Ft&&(this.propEventSubscriptions[Tt]=this.on(Tt,Ft))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(dt,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(dt){return this.props.variants?this.props.variants[dt]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(dt){const kt=this.getClosestVariantNode();if(kt)return kt.variantChildren&&kt.variantChildren.add(dt),()=>kt.variantChildren.delete(dt)}addValue(dt,kt){const $t=this.values.get(dt);kt!==$t&&($t&&this.removeValue(dt),this.bindToMotionValue(dt,kt),this.values.set(dt,kt),this.latestValues[dt]=kt.get())}removeValue(dt){this.values.delete(dt);const kt=this.valueSubscriptions.get(dt);kt&&(kt(),this.valueSubscriptions.delete(dt)),delete this.latestValues[dt],this.removeValueFromRenderState(dt,this.renderState)}hasValue(dt){return this.values.has(dt)}getValue(dt,kt){if(this.props.values&&this.props.values[dt])return this.props.values[dt];let $t=this.values.get(dt);return $t===void 0&&kt!==void 0&&($t=motionValue(kt===null?void 0:kt,{owner:this}),this.addValue(dt,$t)),$t}readValue(dt,kt){var $t;let Tt=this.latestValues[dt]!==void 0||!this.current?this.latestValues[dt]:($t=this.getBaseTargetFromProps(this.props,dt))!==null&&$t!==void 0?$t:this.readValueFromInstance(this.current,dt,this.options);return Tt!=null&&(typeof Tt=="string"&&(isNumericalString(Tt)||isZeroValueString(Tt))?Tt=parseFloat(Tt):!findValueType(Tt)&&complex.test(kt)&&(Tt=getAnimatableNone(dt,kt)),this.setBaseTarget(dt,isMotionValue(Tt)?Tt.get():Tt)),isMotionValue(Tt)?Tt.get():Tt}setBaseTarget(dt,kt){this.baseTarget[dt]=kt}getBaseTarget(dt){var kt;const{initial:$t}=this.props;let Tt;if(typeof $t=="string"||typeof $t=="object"){const Ft=resolveVariantFromProps(this.props,$t,(kt=this.presenceContext)===null||kt===void 0?void 0:kt.custom);Ft&&(Tt=Ft[dt])}if($t&&Tt!==void 0)return Tt;const Dt=this.getBaseTargetFromProps(this.props,dt);return Dt!==void 0&&!isMotionValue(Dt)?Dt:this.initialValues[dt]!==void 0&&Tt===void 0?void 0:this.baseTarget[dt]}on(dt,kt){return this.events[dt]||(this.events[dt]=new SubscriptionManager),this.events[dt].add(kt)}notify(dt,...kt){this.events[dt]&&this.events[dt].notify(...kt)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(dt,kt){return dt.compareDocumentPosition(kt)&2?1:-1}getBaseTargetFromProps(dt,kt){return dt.style?dt.style[kt]:void 0}removeValueFromRenderState(dt,{vars:kt,style:$t}){delete kt[dt],delete $t[dt]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:dt}=this.props;isMotionValue(dt)&&(this.childSubscription=dt.on("change",kt=>{this.current&&(this.current.textContent=`${kt}`)}))}}function getComputedStyle$1(et){return window.getComputedStyle(et)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(dt,kt){if(transformProps.has(kt)){const $t=getDefaultValueType(kt);return $t&&$t.default||0}else{const $t=getComputedStyle$1(dt),Tt=(isCSSVariableName(kt)?$t.getPropertyValue(kt):$t[kt])||0;return typeof Tt=="string"?Tt.trim():Tt}}measureInstanceViewportBox(dt,{transformPagePoint:kt}){return measureViewportBox(dt,kt)}build(dt,kt,$t){buildHTMLStyles(dt,kt,$t.transformTemplate)}scrapeMotionValuesFromProps(dt,kt,$t){return scrapeMotionValuesFromProps$1(dt,kt,$t)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(dt,kt){return dt[kt]}readValueFromInstance(dt,kt){if(transformProps.has(kt)){const $t=getDefaultValueType(kt);return $t&&$t.default||0}return kt=camelCaseAttributes.has(kt)?kt:camelToDash(kt),dt.getAttribute(kt)}scrapeMotionValuesFromProps(dt,kt,$t){return scrapeMotionValuesFromProps(dt,kt,$t)}build(dt,kt,$t){buildSVGAttrs(dt,kt,this.isSVGTag,$t.transformTemplate)}renderInstance(dt,kt,$t,Tt){renderSVG(dt,kt,$t,Tt)}mount(dt){this.isSVGTag=isSVGTag(dt.tagName),super.mount(dt)}}const createDomVisualElement=(et,dt)=>isSVGComponent(et)?new SVGVisualElement(dt):new HTMLVisualElement(dt,{allowProjection:et!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(dt){const kt=this.props.childRef.current;if(kt&&dt.isPresent&&!this.props.isPresent){const $t=this.props.sizeRef.current;$t.height=kt.offsetHeight||0,$t.width=kt.offsetWidth||0,$t.top=kt.offsetTop,$t.left=kt.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:et,isPresent:dt}){const kt=reactExports.useId(),$t=reactExports.useRef(null),Tt=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:Dt}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:Ft,height:Ut,top:Ht,left:Kt}=Tt.current;if(dt||!$t.current||!Ft||!Ut)return;$t.current.dataset.motionPopId=kt;const Yt=document.createElement("style");return Dt&&(Yt.nonce=Dt),document.head.appendChild(Yt),Yt.sheet&&Yt.sheet.insertRule(`
          [data-motion-pop-id="${kt}"] {
            position: absolute !important;
            width: ${Ft}px !important;
            height: ${Ut}px !important;
            top: ${Ht}px !important;
            left: ${Kt}px !important;
          }
        `),()=>{document.head.removeChild(Yt)}},[dt]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:dt,childRef:$t,sizeRef:Tt,children:reactExports.cloneElement(et,{ref:$t})})}const PresenceChild=({children:et,initial:dt,isPresent:kt,onExitComplete:$t,custom:Tt,presenceAffectsLayout:Dt,mode:Ft})=>{const Ut=useConstant(newChildrenMap),Ht=reactExports.useId(),Kt=reactExports.useCallback(Jt=>{Ut.set(Jt,!0);for(const Zt of Ut.values())if(!Zt)return;$t&&$t()},[Ut,$t]),Yt=reactExports.useMemo(()=>({id:Ht,initial:dt,isPresent:kt,custom:Tt,onExitComplete:Kt,register:Jt=>(Ut.set(Jt,!1),()=>Ut.delete(Jt))}),Dt?[Math.random(),Kt]:[kt,Kt]);return reactExports.useMemo(()=>{Ut.forEach((Jt,Zt)=>Ut.set(Zt,!1))},[kt]),reactExports.useEffect(()=>{!kt&&!Ut.size&&$t&&$t()},[kt]),Ft==="popLayout"&&(et=jsxRuntimeExports.jsx(PopChild,{isPresent:kt,children:et})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Yt,children:et})};function newChildrenMap(){return new Map}const getChildKey=et=>et.key||"";function onlyElements(et){const dt=[];return reactExports.Children.forEach(et,kt=>{reactExports.isValidElement(kt)&&dt.push(kt)}),dt}const AnimatePresence=({children:et,exitBeforeEnter:dt,custom:kt,initial:$t=!0,onExitComplete:Tt,presenceAffectsLayout:Dt=!0,mode:Ft="sync"})=>{const Ut=reactExports.useMemo(()=>onlyElements(et),[et]),Ht=Ut.map(getChildKey),Kt=reactExports.useRef(!0),Yt=reactExports.useRef(Ut),Jt=useConstant(()=>new Map),[Zt,er]=reactExports.useState(Ut),[rr,sr]=reactExports.useState(Ut);useIsomorphicLayoutEffect$8(()=>{Kt.current=!1,Yt.current=Ut;for(let lr=0;lr<rr.length;lr++){const or=getChildKey(rr[lr]);Ht.includes(or)?Jt.delete(or):Jt.get(or)!==!0&&Jt.set(or,!1)}},[rr,Ht.length,Ht.join("-")]);const nr=[];if(Ut!==Zt){let lr=[...Ut];for(let or=0;or<rr.length;or++){const cr=rr[or],dr=getChildKey(cr);Ht.includes(dr)||(lr.splice(or,0,cr),nr.push(cr))}Ft==="wait"&&nr.length&&(lr=nr),sr(onlyElements(lr)),er(Ut);return}const{forceRender:ir}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rr.map(lr=>{const or=getChildKey(lr),cr=Ut===rr||Ht.includes(or),dr=()=>{if(Jt.has(or))Jt.set(or,!0);else return;let ur=!0;Jt.forEach(pr=>{pr||(ur=!1)}),ur&&(ir==null||ir(),sr(Yt.current),Tt&&Tt())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:cr,initial:!Kt.current||$t?void 0:!1,custom:cr?void 0:kt,presenceAffectsLayout:Dt,mode:Ft,onExitComplete:cr?void 0:dr,children:lr},or)})})};function bind$1(et,dt){return function(){return et.apply(dt,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(et=>dt=>{const kt=toString$2.call(dt);return et[kt]||(et[kt]=kt.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=et=>(et=et.toLowerCase(),dt=>kindOf(dt)===et),typeOfTest=et=>dt=>typeof dt===et,{isArray:isArray$f}=Array,isUndefined=typeOfTest("undefined");function isBuffer$5(et){return et!==null&&!isUndefined(et)&&et.constructor!==null&&!isUndefined(et.constructor)&&isFunction$5(et.constructor.isBuffer)&&et.constructor.isBuffer(et)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(et){let dt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?dt=ArrayBuffer.isView(et):dt=et&&et.buffer&&isArrayBuffer$1(et.buffer),dt}const isString$2=typeOfTest("string"),isFunction$5=typeOfTest("function"),isNumber$2=typeOfTest("number"),isObject$b=et=>et!==null&&typeof et=="object",isBoolean=et=>et===!0||et===!1,isPlainObject$4=et=>{if(kindOf(et)!=="object")return!1;const dt=getPrototypeOf(et);return(dt===null||dt===Object.prototype||Object.getPrototypeOf(dt)===null)&&!(Symbol.toStringTag in et)&&!(Symbol.iterator in et)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=et=>isObject$b(et)&&isFunction$5(et.pipe),isFormData=et=>{let dt;return et&&(typeof FormData=="function"&&et instanceof FormData||isFunction$5(et.append)&&((dt=kindOf(et))==="formdata"||dt==="object"&&isFunction$5(et.toString)&&et.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=et=>et.trim?et.trim():et.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(et,dt,{allOwnKeys:kt=!1}={}){if(et===null||typeof et>"u")return;let $t,Tt;if(typeof et!="object"&&(et=[et]),isArray$f(et))for($t=0,Tt=et.length;$t<Tt;$t++)dt.call(null,et[$t],$t,et);else{const Dt=kt?Object.getOwnPropertyNames(et):Object.keys(et),Ft=Dt.length;let Ut;for($t=0;$t<Ft;$t++)Ut=Dt[$t],dt.call(null,et[Ut],Ut,et)}}function findKey(et,dt){dt=dt.toLowerCase();const kt=Object.keys(et);let $t=kt.length,Tt;for(;$t-- >0;)if(Tt=kt[$t],dt===Tt.toLowerCase())return Tt;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=et=>!isUndefined(et)&&et!==_global;function merge$1(){const{caseless:et}=isContextDefined(this)&&this||{},dt={},kt=($t,Tt)=>{const Dt=et&&findKey(dt,Tt)||Tt;isPlainObject$4(dt[Dt])&&isPlainObject$4($t)?dt[Dt]=merge$1(dt[Dt],$t):isPlainObject$4($t)?dt[Dt]=merge$1({},$t):isArray$f($t)?dt[Dt]=$t.slice():dt[Dt]=$t};for(let $t=0,Tt=arguments.length;$t<Tt;$t++)arguments[$t]&&forEach$1(arguments[$t],kt);return dt}const extend$1=(et,dt,kt,{allOwnKeys:$t}={})=>(forEach$1(dt,(Tt,Dt)=>{kt&&isFunction$5(Tt)?et[Dt]=bind$1(Tt,kt):et[Dt]=Tt},{allOwnKeys:$t}),et),stripBOM=et=>(et.charCodeAt(0)===65279&&(et=et.slice(1)),et),inherits=(et,dt,kt,$t)=>{et.prototype=Object.create(dt.prototype,$t),et.prototype.constructor=et,Object.defineProperty(et,"super",{value:dt.prototype}),kt&&Object.assign(et.prototype,kt)},toFlatObject=(et,dt,kt,$t)=>{let Tt,Dt,Ft;const Ut={};if(dt=dt||{},et==null)return dt;do{for(Tt=Object.getOwnPropertyNames(et),Dt=Tt.length;Dt-- >0;)Ft=Tt[Dt],(!$t||$t(Ft,et,dt))&&!Ut[Ft]&&(dt[Ft]=et[Ft],Ut[Ft]=!0);et=kt!==!1&&getPrototypeOf(et)}while(et&&(!kt||kt(et,dt))&&et!==Object.prototype);return dt},endsWith=(et,dt,kt)=>{et=String(et),(kt===void 0||kt>et.length)&&(kt=et.length),kt-=dt.length;const $t=et.indexOf(dt,kt);return $t!==-1&&$t===kt},toArray$6=et=>{if(!et)return null;if(isArray$f(et))return et;let dt=et.length;if(!isNumber$2(dt))return null;const kt=new Array(dt);for(;dt-- >0;)kt[dt]=et[dt];return kt},isTypedArray$4=(et=>dt=>et&&dt instanceof et)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(et,dt)=>{const $t=(et&&et[Symbol.iterator]).call(et);let Tt;for(;(Tt=$t.next())&&!Tt.done;){const Dt=Tt.value;dt.call(et,Dt[0],Dt[1])}},matchAll=(et,dt)=>{let kt;const $t=[];for(;(kt=et.exec(dt))!==null;)$t.push(kt);return $t},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=et=>et.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(kt,$t,Tt){return $t.toUpperCase()+Tt}),hasOwnProperty$d=(({hasOwnProperty:et})=>(dt,kt)=>et.call(dt,kt))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(et,dt)=>{const kt=Object.getOwnPropertyDescriptors(et),$t={};forEach$1(kt,(Tt,Dt)=>{let Ft;(Ft=dt(Tt,Dt,et))!==!1&&($t[Dt]=Ft||Tt)}),Object.defineProperties(et,$t)},freezeMethods=et=>{reduceDescriptors(et,(dt,kt)=>{if(isFunction$5(et)&&["arguments","caller","callee"].indexOf(kt)!==-1)return!1;const $t=et[kt];if(isFunction$5($t)){if(dt.enumerable=!1,"writable"in dt){dt.writable=!1;return}dt.set||(dt.set=()=>{throw Error("Can not rewrite read-only method '"+kt+"'")})}})},toObjectSet=(et,dt)=>{const kt={},$t=Tt=>{Tt.forEach(Dt=>{kt[Dt]=!0})};return isArray$f(et)?$t(et):$t(String(et).split(dt)),kt},noop$b=()=>{},toFiniteNumber=(et,dt)=>et!=null&&Number.isFinite(et=+et)?et:dt,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(et=16,dt=ALPHABET.ALPHA_DIGIT)=>{let kt="";const{length:$t}=dt;for(;et--;)kt+=dt[Math.random()*$t|0];return kt};function isSpecCompliantForm(et){return!!(et&&isFunction$5(et.append)&&et[Symbol.toStringTag]==="FormData"&&et[Symbol.iterator])}const toJSONObject=et=>{const dt=new Array(10),kt=($t,Tt)=>{if(isObject$b($t)){if(dt.indexOf($t)>=0)return;if(!("toJSON"in $t)){dt[Tt]=$t;const Dt=isArray$f($t)?[]:{};return forEach$1($t,(Ft,Ut)=>{const Ht=kt(Ft,Tt+1);!isUndefined(Ht)&&(Dt[Ut]=Ht)}),dt[Tt]=void 0,Dt}}return $t};return kt(et,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=et=>et&&(isObject$b(et)||isFunction$5(et))&&isFunction$5(et.then)&&isFunction$5(et.catch),_setImmediate=((et,dt)=>et?setImmediate:dt?((kt,$t)=>(_global.addEventListener("message",({source:Tt,data:Dt})=>{Tt===_global&&Dt===kt&&$t.length&&$t.shift()()},!1),Tt=>{$t.push(Tt),_global.postMessage(kt,"*")}))(`axios@${Math.random()}`,[]):kt=>setTimeout(kt))(typeof setImmediate=="function",isFunction$5(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$f,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$5,isFormData,isArrayBufferView,isString:isString$2,isNumber:isNumber$2,isBoolean,isObject:isObject$b,isPlainObject:isPlainObject$4,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$5,isStream,isURLSearchParams,isTypedArray:isTypedArray$4,isFileList,forEach:forEach$1,merge:merge$1,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$6,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$d,hasOwnProp:hasOwnProperty$d,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$b,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(et,dt,kt,$t,Tt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=et,this.name="AxiosError",dt&&(this.code=dt),kt&&(this.config=kt),$t&&(this.request=$t),Tt&&(this.response=Tt,this.status=Tt.status?Tt.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(et=>{descriptors[et]={value:et}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(et,dt,kt,$t,Tt,Dt)=>{const Ft=Object.create(prototype$1);return utils$1.toFlatObject(et,Ft,function(Ht){return Ht!==Error.prototype},Ut=>Ut!=="isAxiosError"),AxiosError.call(Ft,et.message,dt,kt,$t,Tt),Ft.cause=et,Ft.name=et.name,Dt&&Object.assign(Ft,Dt),Ft};const httpAdapter=null;function isVisitable(et){return utils$1.isPlainObject(et)||utils$1.isArray(et)}function removeBrackets(et){return utils$1.endsWith(et,"[]")?et.slice(0,-2):et}function renderKey(et,dt,kt){return et?et.concat(dt).map(function(Tt,Dt){return Tt=removeBrackets(Tt),!kt&&Dt?"["+Tt+"]":Tt}).join(kt?".":""):dt}function isFlatArray(et){return utils$1.isArray(et)&&!et.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(dt){return/^is[A-Z]/.test(dt)});function toFormData(et,dt,kt){if(!utils$1.isObject(et))throw new TypeError("target must be an object");dt=dt||new FormData,kt=utils$1.toFlatObject(kt,{metaTokens:!0,dots:!1,indexes:!1},!1,function(sr,nr){return!utils$1.isUndefined(nr[sr])});const $t=kt.metaTokens,Tt=kt.visitor||Yt,Dt=kt.dots,Ft=kt.indexes,Ht=(kt.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(dt);if(!utils$1.isFunction(Tt))throw new TypeError("visitor must be a function");function Kt(rr){if(rr===null)return"";if(utils$1.isDate(rr))return rr.toISOString();if(!Ht&&utils$1.isBlob(rr))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(rr)||utils$1.isTypedArray(rr)?Ht&&typeof Blob=="function"?new Blob([rr]):Buffer.from(rr):rr}function Yt(rr,sr,nr){let ir=rr;if(rr&&!nr&&typeof rr=="object"){if(utils$1.endsWith(sr,"{}"))sr=$t?sr:sr.slice(0,-2),rr=JSON.stringify(rr);else if(utils$1.isArray(rr)&&isFlatArray(rr)||(utils$1.isFileList(rr)||utils$1.endsWith(sr,"[]"))&&(ir=utils$1.toArray(rr)))return sr=removeBrackets(sr),ir.forEach(function(or,cr){!(utils$1.isUndefined(or)||or===null)&&dt.append(Ft===!0?renderKey([sr],cr,Dt):Ft===null?sr:sr+"[]",Kt(or))}),!1}return isVisitable(rr)?!0:(dt.append(renderKey(nr,sr,Dt),Kt(rr)),!1)}const Jt=[],Zt=Object.assign(predicates,{defaultVisitor:Yt,convertValue:Kt,isVisitable});function er(rr,sr){if(!utils$1.isUndefined(rr)){if(Jt.indexOf(rr)!==-1)throw Error("Circular reference detected in "+sr.join("."));Jt.push(rr),utils$1.forEach(rr,function(ir,lr){(!(utils$1.isUndefined(ir)||ir===null)&&Tt.call(dt,ir,utils$1.isString(lr)?lr.trim():lr,sr,Zt))===!0&&er(ir,sr?sr.concat(lr):[lr])}),Jt.pop()}}if(!utils$1.isObject(et))throw new TypeError("data must be an object");return er(et),dt}function encode$1(et){const dt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(et).replace(/[!'()~]|%20|%00/g,function($t){return dt[$t]})}function AxiosURLSearchParams(et,dt){this._pairs=[],et&&toFormData(et,this,dt)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(dt,kt){this._pairs.push([dt,kt])};prototype.toString=function(dt){const kt=dt?function($t){return dt.call(this,$t,encode$1)}:encode$1;return this._pairs.map(function(Tt){return kt(Tt[0])+"="+kt(Tt[1])},"").join("&")};function encode(et){return encodeURIComponent(et).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(et,dt,kt){if(!dt)return et;const $t=kt&&kt.encode||encode;utils$1.isFunction(kt)&&(kt={serialize:kt});const Tt=kt&&kt.serialize;let Dt;if(Tt?Dt=Tt(dt,kt):Dt=utils$1.isURLSearchParams(dt)?dt.toString():new AxiosURLSearchParams(dt,kt).toString($t),Dt){const Ft=et.indexOf("#");Ft!==-1&&(et=et.slice(0,Ft)),et+=(et.indexOf("?")===-1?"?":"&")+Dt}return et}class InterceptorManager{constructor(){this.handlers=[]}use(dt,kt,$t){return this.handlers.push({fulfilled:dt,rejected:kt,synchronous:$t?$t.synchronous:!1,runWhen:$t?$t.runWhen:null}),this.handlers.length-1}eject(dt){this.handlers[dt]&&(this.handlers[dt]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(dt){utils$1.forEach(this.handlers,function($t){$t!==null&&dt($t)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(et,dt){return toFormData(et,new platform.classes.URLSearchParams,Object.assign({visitor:function(kt,$t,Tt,Dt){return platform.isNode&&utils$1.isBuffer(kt)?(this.append($t,kt.toString("base64")),!1):Dt.defaultVisitor.apply(this,arguments)}},dt))}function parsePropPath(et){return utils$1.matchAll(/\w+|\[(\w*)]/g,et).map(dt=>dt[0]==="[]"?"":dt[1]||dt[0])}function arrayToObject(et){const dt={},kt=Object.keys(et);let $t;const Tt=kt.length;let Dt;for($t=0;$t<Tt;$t++)Dt=kt[$t],dt[Dt]=et[Dt];return dt}function formDataToJSON(et){function dt(kt,$t,Tt,Dt){let Ft=kt[Dt++];if(Ft==="__proto__")return!0;const Ut=Number.isFinite(+Ft),Ht=Dt>=kt.length;return Ft=!Ft&&utils$1.isArray(Tt)?Tt.length:Ft,Ht?(utils$1.hasOwnProp(Tt,Ft)?Tt[Ft]=[Tt[Ft],$t]:Tt[Ft]=$t,!Ut):((!Tt[Ft]||!utils$1.isObject(Tt[Ft]))&&(Tt[Ft]=[]),dt(kt,$t,Tt[Ft],Dt)&&utils$1.isArray(Tt[Ft])&&(Tt[Ft]=arrayToObject(Tt[Ft])),!Ut)}if(utils$1.isFormData(et)&&utils$1.isFunction(et.entries)){const kt={};return utils$1.forEachEntry(et,($t,Tt)=>{dt(parsePropPath($t),Tt,kt,0)}),kt}return null}function stringifySafely(et,dt,kt){if(utils$1.isString(et))try{return(dt||JSON.parse)(et),utils$1.trim(et)}catch($t){if($t.name!=="SyntaxError")throw $t}return(kt||JSON.stringify)(et)}const defaults$6={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(dt,kt){const $t=kt.getContentType()||"",Tt=$t.indexOf("application/json")>-1,Dt=utils$1.isObject(dt);if(Dt&&utils$1.isHTMLForm(dt)&&(dt=new FormData(dt)),utils$1.isFormData(dt))return Tt?JSON.stringify(formDataToJSON(dt)):dt;if(utils$1.isArrayBuffer(dt)||utils$1.isBuffer(dt)||utils$1.isStream(dt)||utils$1.isFile(dt)||utils$1.isBlob(dt)||utils$1.isReadableStream(dt))return dt;if(utils$1.isArrayBufferView(dt))return dt.buffer;if(utils$1.isURLSearchParams(dt))return kt.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),dt.toString();let Ut;if(Dt){if($t.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(dt,this.formSerializer).toString();if((Ut=utils$1.isFileList(dt))||$t.indexOf("multipart/form-data")>-1){const Ht=this.env&&this.env.FormData;return toFormData(Ut?{"files[]":dt}:dt,Ht&&new Ht,this.formSerializer)}}return Dt||Tt?(kt.setContentType("application/json",!1),stringifySafely(dt)):dt}],transformResponse:[function(dt){const kt=this.transitional||defaults$6.transitional,$t=kt&&kt.forcedJSONParsing,Tt=this.responseType==="json";if(utils$1.isResponse(dt)||utils$1.isReadableStream(dt))return dt;if(dt&&utils$1.isString(dt)&&($t&&!this.responseType||Tt)){const Ft=!(kt&&kt.silentJSONParsing)&&Tt;try{return JSON.parse(dt)}catch(Ut){if(Ft)throw Ut.name==="SyntaxError"?AxiosError.from(Ut,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):Ut}}return dt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(dt){return dt>=200&&dt<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],et=>{defaults$6.headers[et]={}});const defaults$7=defaults$6,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=et=>{const dt={};let kt,$t,Tt;return et&&et.split(`
`).forEach(function(Ft){Tt=Ft.indexOf(":"),kt=Ft.substring(0,Tt).trim().toLowerCase(),$t=Ft.substring(Tt+1).trim(),!(!kt||dt[kt]&&ignoreDuplicateOf[kt])&&(kt==="set-cookie"?dt[kt]?dt[kt].push($t):dt[kt]=[$t]:dt[kt]=dt[kt]?dt[kt]+", "+$t:$t)}),dt},$internals=Symbol("internals");function normalizeHeader(et){return et&&String(et).trim().toLowerCase()}function normalizeValue(et){return et===!1||et==null?et:utils$1.isArray(et)?et.map(normalizeValue):String(et)}function parseTokens(et){const dt=Object.create(null),kt=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let $t;for(;$t=kt.exec(et);)dt[$t[1]]=$t[2];return dt}const isValidHeaderName=et=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(et.trim());function matchHeaderValue(et,dt,kt,$t,Tt){if(utils$1.isFunction($t))return $t.call(this,dt,kt);if(Tt&&(dt=kt),!!utils$1.isString(dt)){if(utils$1.isString($t))return dt.indexOf($t)!==-1;if(utils$1.isRegExp($t))return $t.test(dt)}}function formatHeader(et){return et.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(dt,kt,$t)=>kt.toUpperCase()+$t)}function buildAccessors(et,dt){const kt=utils$1.toCamelCase(" "+dt);["get","set","has"].forEach($t=>{Object.defineProperty(et,$t+kt,{value:function(Tt,Dt,Ft){return this[$t].call(this,dt,Tt,Dt,Ft)},configurable:!0})})}class AxiosHeaders{constructor(dt){dt&&this.set(dt)}set(dt,kt,$t){const Tt=this;function Dt(Ut,Ht,Kt){const Yt=normalizeHeader(Ht);if(!Yt)throw new Error("header name must be a non-empty string");const Jt=utils$1.findKey(Tt,Yt);(!Jt||Tt[Jt]===void 0||Kt===!0||Kt===void 0&&Tt[Jt]!==!1)&&(Tt[Jt||Ht]=normalizeValue(Ut))}const Ft=(Ut,Ht)=>utils$1.forEach(Ut,(Kt,Yt)=>Dt(Kt,Yt,Ht));if(utils$1.isPlainObject(dt)||dt instanceof this.constructor)Ft(dt,kt);else if(utils$1.isString(dt)&&(dt=dt.trim())&&!isValidHeaderName(dt))Ft(parseHeaders(dt),kt);else if(utils$1.isHeaders(dt))for(const[Ut,Ht]of dt.entries())Dt(Ht,Ut,$t);else dt!=null&&Dt(kt,dt,$t);return this}get(dt,kt){if(dt=normalizeHeader(dt),dt){const $t=utils$1.findKey(this,dt);if($t){const Tt=this[$t];if(!kt)return Tt;if(kt===!0)return parseTokens(Tt);if(utils$1.isFunction(kt))return kt.call(this,Tt,$t);if(utils$1.isRegExp(kt))return kt.exec(Tt);throw new TypeError("parser must be boolean|regexp|function")}}}has(dt,kt){if(dt=normalizeHeader(dt),dt){const $t=utils$1.findKey(this,dt);return!!($t&&this[$t]!==void 0&&(!kt||matchHeaderValue(this,this[$t],$t,kt)))}return!1}delete(dt,kt){const $t=this;let Tt=!1;function Dt(Ft){if(Ft=normalizeHeader(Ft),Ft){const Ut=utils$1.findKey($t,Ft);Ut&&(!kt||matchHeaderValue($t,$t[Ut],Ut,kt))&&(delete $t[Ut],Tt=!0)}}return utils$1.isArray(dt)?dt.forEach(Dt):Dt(dt),Tt}clear(dt){const kt=Object.keys(this);let $t=kt.length,Tt=!1;for(;$t--;){const Dt=kt[$t];(!dt||matchHeaderValue(this,this[Dt],Dt,dt,!0))&&(delete this[Dt],Tt=!0)}return Tt}normalize(dt){const kt=this,$t={};return utils$1.forEach(this,(Tt,Dt)=>{const Ft=utils$1.findKey($t,Dt);if(Ft){kt[Ft]=normalizeValue(Tt),delete kt[Dt];return}const Ut=dt?formatHeader(Dt):String(Dt).trim();Ut!==Dt&&delete kt[Dt],kt[Ut]=normalizeValue(Tt),$t[Ut]=!0}),this}concat(...dt){return this.constructor.concat(this,...dt)}toJSON(dt){const kt=Object.create(null);return utils$1.forEach(this,($t,Tt)=>{$t!=null&&$t!==!1&&(kt[Tt]=dt&&utils$1.isArray($t)?$t.join(", "):$t)}),kt}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([dt,kt])=>dt+": "+kt).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(dt){return dt instanceof this?dt:new this(dt)}static concat(dt,...kt){const $t=new this(dt);return kt.forEach(Tt=>$t.set(Tt)),$t}static accessor(dt){const $t=(this[$internals]=this[$internals]={accessors:{}}).accessors,Tt=this.prototype;function Dt(Ft){const Ut=normalizeHeader(Ft);$t[Ut]||(buildAccessors(Tt,Ft),$t[Ut]=!0)}return utils$1.isArray(dt)?dt.forEach(Dt):Dt(dt),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:et},dt)=>{let kt=dt[0].toUpperCase()+dt.slice(1);return{get:()=>et,set($t){this[kt]=$t}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(et,dt){const kt=this||defaults$7,$t=dt||kt,Tt=AxiosHeaders$1.from($t.headers);let Dt=$t.data;return utils$1.forEach(et,function(Ut){Dt=Ut.call(kt,Dt,Tt.normalize(),dt?dt.status:void 0)}),Tt.normalize(),Dt}function isCancel(et){return!!(et&&et.__CANCEL__)}function CanceledError(et,dt,kt){AxiosError.call(this,et??"canceled",AxiosError.ERR_CANCELED,dt,kt),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(et,dt,kt){const $t=kt.config.validateStatus;!kt.status||!$t||$t(kt.status)?et(kt):dt(new AxiosError("Request failed with status code "+kt.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(kt.status/100)-4],kt.config,kt.request,kt))}function parseProtocol(et){const dt=/^([-+\w]{1,25})(:?\/\/|:)/.exec(et);return dt&&dt[1]||""}function speedometer(et,dt){et=et||10;const kt=new Array(et),$t=new Array(et);let Tt=0,Dt=0,Ft;return dt=dt!==void 0?dt:1e3,function(Ht){const Kt=Date.now(),Yt=$t[Dt];Ft||(Ft=Kt),kt[Tt]=Ht,$t[Tt]=Kt;let Jt=Dt,Zt=0;for(;Jt!==Tt;)Zt+=kt[Jt++],Jt=Jt%et;if(Tt=(Tt+1)%et,Tt===Dt&&(Dt=(Dt+1)%et),Kt-Ft<dt)return;const er=Yt&&Kt-Yt;return er?Math.round(Zt*1e3/er):void 0}}function throttle(et,dt){let kt=0,$t=1e3/dt,Tt,Dt;const Ft=(Kt,Yt=Date.now())=>{kt=Yt,Tt=null,Dt&&(clearTimeout(Dt),Dt=null),et.apply(null,Kt)};return[(...Kt)=>{const Yt=Date.now(),Jt=Yt-kt;Jt>=$t?Ft(Kt,Yt):(Tt=Kt,Dt||(Dt=setTimeout(()=>{Dt=null,Ft(Tt)},$t-Jt)))},()=>Tt&&Ft(Tt)]}const progressEventReducer=(et,dt,kt=3)=>{let $t=0;const Tt=speedometer(50,250);return throttle(Dt=>{const Ft=Dt.loaded,Ut=Dt.lengthComputable?Dt.total:void 0,Ht=Ft-$t,Kt=Tt(Ht),Yt=Ft<=Ut;$t=Ft;const Jt={loaded:Ft,total:Ut,progress:Ut?Ft/Ut:void 0,bytes:Ht,rate:Kt||void 0,estimated:Kt&&Ut&&Yt?(Ut-Ft)/Kt:void 0,event:Dt,lengthComputable:Ut!=null,[dt?"download":"upload"]:!0};et(Jt)},kt)},progressEventDecorator=(et,dt)=>{const kt=et!=null;return[$t=>dt[0]({lengthComputable:kt,total:et,loaded:$t}),dt[1]]},asyncDecorator=et=>(...dt)=>utils$1.asap(()=>et(...dt)),isURLSameOrigin=platform.hasStandardBrowserEnv?((et,dt)=>kt=>(kt=new URL(kt,platform.origin),et.protocol===kt.protocol&&et.host===kt.host&&(dt||et.port===kt.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(et,dt,kt,$t,Tt,Dt){const Ft=[et+"="+encodeURIComponent(dt)];utils$1.isNumber(kt)&&Ft.push("expires="+new Date(kt).toGMTString()),utils$1.isString($t)&&Ft.push("path="+$t),utils$1.isString(Tt)&&Ft.push("domain="+Tt),Dt===!0&&Ft.push("secure"),document.cookie=Ft.join("; ")},read(et){const dt=document.cookie.match(new RegExp("(^|;\\s*)("+et+")=([^;]*)"));return dt?decodeURIComponent(dt[3]):null},remove(et){this.write(et,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(et){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(et)}function combineURLs(et,dt){return dt?et.replace(/\/?\/$/,"")+"/"+dt.replace(/^\/+/,""):et}function buildFullPath(et,dt){return et&&!isAbsoluteURL(dt)?combineURLs(et,dt):dt}const headersToObject=et=>et instanceof AxiosHeaders$1?{...et}:et;function mergeConfig$5(et,dt){dt=dt||{};const kt={};function $t(Kt,Yt,Jt,Zt){return utils$1.isPlainObject(Kt)&&utils$1.isPlainObject(Yt)?utils$1.merge.call({caseless:Zt},Kt,Yt):utils$1.isPlainObject(Yt)?utils$1.merge({},Yt):utils$1.isArray(Yt)?Yt.slice():Yt}function Tt(Kt,Yt,Jt,Zt){if(utils$1.isUndefined(Yt)){if(!utils$1.isUndefined(Kt))return $t(void 0,Kt,Jt,Zt)}else return $t(Kt,Yt,Jt,Zt)}function Dt(Kt,Yt){if(!utils$1.isUndefined(Yt))return $t(void 0,Yt)}function Ft(Kt,Yt){if(utils$1.isUndefined(Yt)){if(!utils$1.isUndefined(Kt))return $t(void 0,Kt)}else return $t(void 0,Yt)}function Ut(Kt,Yt,Jt){if(Jt in dt)return $t(Kt,Yt);if(Jt in et)return $t(void 0,Kt)}const Ht={url:Dt,method:Dt,data:Dt,baseURL:Ft,transformRequest:Ft,transformResponse:Ft,paramsSerializer:Ft,timeout:Ft,timeoutMessage:Ft,withCredentials:Ft,withXSRFToken:Ft,adapter:Ft,responseType:Ft,xsrfCookieName:Ft,xsrfHeaderName:Ft,onUploadProgress:Ft,onDownloadProgress:Ft,decompress:Ft,maxContentLength:Ft,maxBodyLength:Ft,beforeRedirect:Ft,transport:Ft,httpAgent:Ft,httpsAgent:Ft,cancelToken:Ft,socketPath:Ft,responseEncoding:Ft,validateStatus:Ut,headers:(Kt,Yt,Jt)=>Tt(headersToObject(Kt),headersToObject(Yt),Jt,!0)};return utils$1.forEach(Object.keys(Object.assign({},et,dt)),function(Yt){const Jt=Ht[Yt]||Tt,Zt=Jt(et[Yt],dt[Yt],Yt);utils$1.isUndefined(Zt)&&Jt!==Ut||(kt[Yt]=Zt)}),kt}const resolveConfig=et=>{const dt=mergeConfig$5({},et);let{data:kt,withXSRFToken:$t,xsrfHeaderName:Tt,xsrfCookieName:Dt,headers:Ft,auth:Ut}=dt;dt.headers=Ft=AxiosHeaders$1.from(Ft),dt.url=buildURL(buildFullPath(dt.baseURL,dt.url),et.params,et.paramsSerializer),Ut&&Ft.set("Authorization","Basic "+btoa((Ut.username||"")+":"+(Ut.password?unescape(encodeURIComponent(Ut.password)):"")));let Ht;if(utils$1.isFormData(kt)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Ft.setContentType(void 0);else if((Ht=Ft.getContentType())!==!1){const[Kt,...Yt]=Ht?Ht.split(";").map(Jt=>Jt.trim()).filter(Boolean):[];Ft.setContentType([Kt||"multipart/form-data",...Yt].join("; "))}}if(platform.hasStandardBrowserEnv&&($t&&utils$1.isFunction($t)&&($t=$t(dt)),$t||$t!==!1&&isURLSameOrigin(dt.url))){const Kt=Tt&&Dt&&cookies.read(Dt);Kt&&Ft.set(Tt,Kt)}return dt},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(et){return new Promise(function(kt,$t){const Tt=resolveConfig(et);let Dt=Tt.data;const Ft=AxiosHeaders$1.from(Tt.headers).normalize();let{responseType:Ut,onUploadProgress:Ht,onDownloadProgress:Kt}=Tt,Yt,Jt,Zt,er,rr;function sr(){er&&er(),rr&&rr(),Tt.cancelToken&&Tt.cancelToken.unsubscribe(Yt),Tt.signal&&Tt.signal.removeEventListener("abort",Yt)}let nr=new XMLHttpRequest;nr.open(Tt.method.toUpperCase(),Tt.url,!0),nr.timeout=Tt.timeout;function ir(){if(!nr)return;const or=AxiosHeaders$1.from("getAllResponseHeaders"in nr&&nr.getAllResponseHeaders()),dr={data:!Ut||Ut==="text"||Ut==="json"?nr.responseText:nr.response,status:nr.status,statusText:nr.statusText,headers:or,config:et,request:nr};settle(function(pr){kt(pr),sr()},function(pr){$t(pr),sr()},dr),nr=null}"onloadend"in nr?nr.onloadend=ir:nr.onreadystatechange=function(){!nr||nr.readyState!==4||nr.status===0&&!(nr.responseURL&&nr.responseURL.indexOf("file:")===0)||setTimeout(ir)},nr.onabort=function(){nr&&($t(new AxiosError("Request aborted",AxiosError.ECONNABORTED,et,nr)),nr=null)},nr.onerror=function(){$t(new AxiosError("Network Error",AxiosError.ERR_NETWORK,et,nr)),nr=null},nr.ontimeout=function(){let cr=Tt.timeout?"timeout of "+Tt.timeout+"ms exceeded":"timeout exceeded";const dr=Tt.transitional||transitionalDefaults;Tt.timeoutErrorMessage&&(cr=Tt.timeoutErrorMessage),$t(new AxiosError(cr,dr.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,et,nr)),nr=null},Dt===void 0&&Ft.setContentType(null),"setRequestHeader"in nr&&utils$1.forEach(Ft.toJSON(),function(cr,dr){nr.setRequestHeader(dr,cr)}),utils$1.isUndefined(Tt.withCredentials)||(nr.withCredentials=!!Tt.withCredentials),Ut&&Ut!=="json"&&(nr.responseType=Tt.responseType),Kt&&([Zt,rr]=progressEventReducer(Kt,!0),nr.addEventListener("progress",Zt)),Ht&&nr.upload&&([Jt,er]=progressEventReducer(Ht),nr.upload.addEventListener("progress",Jt),nr.upload.addEventListener("loadend",er)),(Tt.cancelToken||Tt.signal)&&(Yt=or=>{nr&&($t(!or||or.type?new CanceledError(null,et,nr):or),nr.abort(),nr=null)},Tt.cancelToken&&Tt.cancelToken.subscribe(Yt),Tt.signal&&(Tt.signal.aborted?Yt():Tt.signal.addEventListener("abort",Yt)));const lr=parseProtocol(Tt.url);if(lr&&platform.protocols.indexOf(lr)===-1){$t(new AxiosError("Unsupported protocol "+lr+":",AxiosError.ERR_BAD_REQUEST,et));return}nr.send(Dt||null)})},composeSignals=(et,dt)=>{const{length:kt}=et=et?et.filter(Boolean):[];if(dt||kt){let $t=new AbortController,Tt;const Dt=function(Kt){if(!Tt){Tt=!0,Ut();const Yt=Kt instanceof Error?Kt:this.reason;$t.abort(Yt instanceof AxiosError?Yt:new CanceledError(Yt instanceof Error?Yt.message:Yt))}};let Ft=dt&&setTimeout(()=>{Ft=null,Dt(new AxiosError(`timeout ${dt} of ms exceeded`,AxiosError.ETIMEDOUT))},dt);const Ut=()=>{et&&(Ft&&clearTimeout(Ft),Ft=null,et.forEach(Kt=>{Kt.unsubscribe?Kt.unsubscribe(Dt):Kt.removeEventListener("abort",Dt)}),et=null)};et.forEach(Kt=>Kt.addEventListener("abort",Dt));const{signal:Ht}=$t;return Ht.unsubscribe=()=>utils$1.asap(Ut),Ht}},composeSignals$1=composeSignals,streamChunk=function*(et,dt){let kt=et.byteLength;if(!dt||kt<dt){yield et;return}let $t=0,Tt;for(;$t<kt;)Tt=$t+dt,yield et.slice($t,Tt),$t=Tt},readBytes=async function*(et,dt){for await(const kt of readStream(et))yield*streamChunk(kt,dt)},readStream=async function*(et){if(et[Symbol.asyncIterator]){yield*et;return}const dt=et.getReader();try{for(;;){const{done:kt,value:$t}=await dt.read();if(kt)break;yield $t}}finally{await dt.cancel()}},trackStream=(et,dt,kt,$t)=>{const Tt=readBytes(et,dt);let Dt=0,Ft,Ut=Ht=>{Ft||(Ft=!0,$t&&$t(Ht))};return new ReadableStream({async pull(Ht){try{const{done:Kt,value:Yt}=await Tt.next();if(Kt){Ut(),Ht.close();return}let Jt=Yt.byteLength;if(kt){let Zt=Dt+=Jt;kt(Zt)}Ht.enqueue(new Uint8Array(Yt))}catch(Kt){throw Ut(Kt),Kt}},cancel(Ht){return Ut(Ht),Tt.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(et=>dt=>et.encode(dt))(new TextEncoder):async et=>new Uint8Array(await new Response(et).arrayBuffer())),test=(et,...dt)=>{try{return!!et(...dt)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let et=!1;const dt=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return et=!0,"half"}}).headers.has("Content-Type");return et&&!dt}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(et=>et.body)};isFetchSupported&&(et=>{["text","arrayBuffer","blob","formData","stream"].forEach(dt=>{!resolvers[dt]&&(resolvers[dt]=utils$1.isFunction(et[dt])?kt=>kt[dt]():(kt,$t)=>{throw new AxiosError(`Response type '${dt}' is not supported`,AxiosError.ERR_NOT_SUPPORT,$t)})})})(new Response);const getBodyLength=async et=>{if(et==null)return 0;if(utils$1.isBlob(et))return et.size;if(utils$1.isSpecCompliantForm(et))return(await new Request(platform.origin,{method:"POST",body:et}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(et)||utils$1.isArrayBuffer(et))return et.byteLength;if(utils$1.isURLSearchParams(et)&&(et=et+""),utils$1.isString(et))return(await encodeText(et)).byteLength},resolveBodyLength=async(et,dt)=>{const kt=utils$1.toFiniteNumber(et.getContentLength());return kt??getBodyLength(dt)},fetchAdapter=isFetchSupported&&(async et=>{let{url:dt,method:kt,data:$t,signal:Tt,cancelToken:Dt,timeout:Ft,onDownloadProgress:Ut,onUploadProgress:Ht,responseType:Kt,headers:Yt,withCredentials:Jt="same-origin",fetchOptions:Zt}=resolveConfig(et);Kt=Kt?(Kt+"").toLowerCase():"text";let er=composeSignals$1([Tt,Dt&&Dt.toAbortSignal()],Ft),rr;const sr=er&&er.unsubscribe&&(()=>{er.unsubscribe()});let nr;try{if(Ht&&supportsRequestStream&&kt!=="get"&&kt!=="head"&&(nr=await resolveBodyLength(Yt,$t))!==0){let dr=new Request(dt,{method:"POST",body:$t,duplex:"half"}),ur;if(utils$1.isFormData($t)&&(ur=dr.headers.get("content-type"))&&Yt.setContentType(ur),dr.body){const[pr,mr]=progressEventDecorator(nr,progressEventReducer(asyncDecorator(Ht)));$t=trackStream(dr.body,DEFAULT_CHUNK_SIZE,pr,mr)}}utils$1.isString(Jt)||(Jt=Jt?"include":"omit");const ir="credentials"in Request.prototype;rr=new Request(dt,{...Zt,signal:er,method:kt.toUpperCase(),headers:Yt.normalize().toJSON(),body:$t,duplex:"half",credentials:ir?Jt:void 0});let lr=await fetch(rr);const or=supportsResponseStream&&(Kt==="stream"||Kt==="response");if(supportsResponseStream&&(Ut||or&&sr)){const dr={};["status","statusText","headers"].forEach(jr=>{dr[jr]=lr[jr]});const ur=utils$1.toFiniteNumber(lr.headers.get("content-length")),[pr,mr]=Ut&&progressEventDecorator(ur,progressEventReducer(asyncDecorator(Ut),!0))||[];lr=new Response(trackStream(lr.body,DEFAULT_CHUNK_SIZE,pr,()=>{mr&&mr(),sr&&sr()}),dr)}Kt=Kt||"text";let cr=await resolvers[utils$1.findKey(resolvers,Kt)||"text"](lr,et);return!or&&sr&&sr(),await new Promise((dr,ur)=>{settle(dr,ur,{data:cr,headers:AxiosHeaders$1.from(lr.headers),status:lr.status,statusText:lr.statusText,config:et,request:rr})})}catch(ir){throw sr&&sr(),ir&&ir.name==="TypeError"&&/fetch/i.test(ir.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,et,rr),{cause:ir.cause||ir}):AxiosError.from(ir,ir&&ir.code,et,rr)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(et,dt)=>{if(et){try{Object.defineProperty(et,"name",{value:dt})}catch{}Object.defineProperty(et,"adapterName",{value:dt})}});const renderReason=et=>`- ${et}`,isResolvedHandle=et=>utils$1.isFunction(et)||et===null||et===!1,adapters={getAdapter:et=>{et=utils$1.isArray(et)?et:[et];const{length:dt}=et;let kt,$t;const Tt={};for(let Dt=0;Dt<dt;Dt++){kt=et[Dt];let Ft;if($t=kt,!isResolvedHandle(kt)&&($t=knownAdapters[(Ft=String(kt)).toLowerCase()],$t===void 0))throw new AxiosError(`Unknown adapter '${Ft}'`);if($t)break;Tt[Ft||"#"+Dt]=$t}if(!$t){const Dt=Object.entries(Tt).map(([Ut,Ht])=>`adapter ${Ut} `+(Ht===!1?"is not supported by the environment":"is not available in the build"));let Ft=dt?Dt.length>1?`since :
`+Dt.map(renderReason).join(`
`):" "+renderReason(Dt[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+Ft,"ERR_NOT_SUPPORT")}return $t},adapters:knownAdapters};function throwIfCancellationRequested(et){if(et.cancelToken&&et.cancelToken.throwIfRequested(),et.signal&&et.signal.aborted)throw new CanceledError(null,et)}function dispatchRequest(et){return throwIfCancellationRequested(et),et.headers=AxiosHeaders$1.from(et.headers),et.data=transformData.call(et,et.transformRequest),["post","put","patch"].indexOf(et.method)!==-1&&et.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(et.adapter||defaults$7.adapter)(et).then(function($t){return throwIfCancellationRequested(et),$t.data=transformData.call(et,et.transformResponse,$t),$t.headers=AxiosHeaders$1.from($t.headers),$t},function($t){return isCancel($t)||(throwIfCancellationRequested(et),$t&&$t.response&&($t.response.data=transformData.call(et,et.transformResponse,$t.response),$t.response.headers=AxiosHeaders$1.from($t.response.headers))),Promise.reject($t)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((et,dt)=>{validators$1[et]=function($t){return typeof $t===et||"a"+(dt<1?"n ":" ")+et}});const deprecatedWarnings={};validators$1.transitional=function(dt,kt,$t){function Tt(Dt,Ft){return"[Axios v"+VERSION+"] Transitional option '"+Dt+"'"+Ft+($t?". "+$t:"")}return(Dt,Ft,Ut)=>{if(dt===!1)throw new AxiosError(Tt(Ft," has been removed"+(kt?" in "+kt:"")),AxiosError.ERR_DEPRECATED);return kt&&!deprecatedWarnings[Ft]&&(deprecatedWarnings[Ft]=!0,console.warn(Tt(Ft," has been deprecated since v"+kt+" and will be removed in the near future"))),dt?dt(Dt,Ft,Ut):!0}};validators$1.spelling=function(dt){return(kt,$t)=>(console.warn(`${$t} is likely a misspelling of ${dt}`),!0)};function assertOptions(et,dt,kt){if(typeof et!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const $t=Object.keys(et);let Tt=$t.length;for(;Tt-- >0;){const Dt=$t[Tt],Ft=dt[Dt];if(Ft){const Ut=et[Dt],Ht=Ut===void 0||Ft(Ut,Dt,et);if(Ht!==!0)throw new AxiosError("option "+Dt+" must be "+Ht,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(kt!==!0)throw new AxiosError("Unknown option "+Dt,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(dt){this.defaults=dt,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(dt,kt){try{return await this._request(dt,kt)}catch($t){if($t instanceof Error){let Tt={};Error.captureStackTrace?Error.captureStackTrace(Tt):Tt=new Error;const Dt=Tt.stack?Tt.stack.replace(/^.+\n/,""):"";try{$t.stack?Dt&&!String($t.stack).endsWith(Dt.replace(/^.+\n.+\n/,""))&&($t.stack+=`
`+Dt):$t.stack=Dt}catch{}}throw $t}}_request(dt,kt){typeof dt=="string"?(kt=kt||{},kt.url=dt):kt=dt||{},kt=mergeConfig$5(this.defaults,kt);const{transitional:$t,paramsSerializer:Tt,headers:Dt}=kt;$t!==void 0&&validator.assertOptions($t,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Tt!=null&&(utils$1.isFunction(Tt)?kt.paramsSerializer={serialize:Tt}:validator.assertOptions(Tt,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(kt,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),kt.method=(kt.method||this.defaults.method||"get").toLowerCase();let Ft=Dt&&utils$1.merge(Dt.common,Dt[kt.method]);Dt&&utils$1.forEach(["delete","get","head","post","put","patch","common"],rr=>{delete Dt[rr]}),kt.headers=AxiosHeaders$1.concat(Ft,Dt);const Ut=[];let Ht=!0;this.interceptors.request.forEach(function(sr){typeof sr.runWhen=="function"&&sr.runWhen(kt)===!1||(Ht=Ht&&sr.synchronous,Ut.unshift(sr.fulfilled,sr.rejected))});const Kt=[];this.interceptors.response.forEach(function(sr){Kt.push(sr.fulfilled,sr.rejected)});let Yt,Jt=0,Zt;if(!Ht){const rr=[dispatchRequest.bind(this),void 0];for(rr.unshift.apply(rr,Ut),rr.push.apply(rr,Kt),Zt=rr.length,Yt=Promise.resolve(kt);Jt<Zt;)Yt=Yt.then(rr[Jt++],rr[Jt++]);return Yt}Zt=Ut.length;let er=kt;for(Jt=0;Jt<Zt;){const rr=Ut[Jt++],sr=Ut[Jt++];try{er=rr(er)}catch(nr){sr.call(this,nr);break}}try{Yt=dispatchRequest.call(this,er)}catch(rr){return Promise.reject(rr)}for(Jt=0,Zt=Kt.length;Jt<Zt;)Yt=Yt.then(Kt[Jt++],Kt[Jt++]);return Yt}getUri(dt){dt=mergeConfig$5(this.defaults,dt);const kt=buildFullPath(dt.baseURL,dt.url);return buildURL(kt,dt.params,dt.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(dt){Axios.prototype[dt]=function(kt,$t){return this.request(mergeConfig$5($t||{},{method:dt,url:kt,data:($t||{}).data}))}});utils$1.forEach(["post","put","patch"],function(dt){function kt($t){return function(Dt,Ft,Ut){return this.request(mergeConfig$5(Ut||{},{method:dt,headers:$t?{"Content-Type":"multipart/form-data"}:{},url:Dt,data:Ft}))}}Axios.prototype[dt]=kt(),Axios.prototype[dt+"Form"]=kt(!0)});const Axios$1=Axios;class CancelToken{constructor(dt){if(typeof dt!="function")throw new TypeError("executor must be a function.");let kt;this.promise=new Promise(function(Dt){kt=Dt});const $t=this;this.promise.then(Tt=>{if(!$t._listeners)return;let Dt=$t._listeners.length;for(;Dt-- >0;)$t._listeners[Dt](Tt);$t._listeners=null}),this.promise.then=Tt=>{let Dt;const Ft=new Promise(Ut=>{$t.subscribe(Ut),Dt=Ut}).then(Tt);return Ft.cancel=function(){$t.unsubscribe(Dt)},Ft},dt(function(Dt,Ft,Ut){$t.reason||($t.reason=new CanceledError(Dt,Ft,Ut),kt($t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(dt){if(this.reason){dt(this.reason);return}this._listeners?this._listeners.push(dt):this._listeners=[dt]}unsubscribe(dt){if(!this._listeners)return;const kt=this._listeners.indexOf(dt);kt!==-1&&this._listeners.splice(kt,1)}toAbortSignal(){const dt=new AbortController,kt=$t=>{dt.abort($t)};return this.subscribe(kt),dt.signal.unsubscribe=()=>this.unsubscribe(kt),dt.signal}static source(){let dt;return{token:new CancelToken(function(Tt){dt=Tt}),cancel:dt}}}const CancelToken$1=CancelToken;function spread(et){return function(kt){return et.apply(null,kt)}}function isAxiosError(et){return utils$1.isObject(et)&&et.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([et,dt])=>{HttpStatusCode[dt]=et});const HttpStatusCode$1=HttpStatusCode;function createInstance(et){const dt=new Axios$1(et),kt=bind$1(Axios$1.prototype.request,dt);return utils$1.extend(kt,Axios$1.prototype,dt,{allOwnKeys:!0}),utils$1.extend(kt,dt,null,{allOwnKeys:!0}),kt.create=function(Tt){return createInstance(mergeConfig$5(et,Tt))},kt}const axios=createInstance(defaults$7);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(dt){return Promise.all(dt)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig$5;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=et=>formDataToJSON(utils$1.isHTMLForm(et)?new FormData(et):et);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(et){var dt,kt,$t="";if(typeof et=="string"||typeof et=="number")$t+=et;else if(typeof et=="object")if(Array.isArray(et)){var Tt=et.length;for(dt=0;dt<Tt;dt++)et[dt]&&(kt=r$3(et[dt]))&&($t&&($t+=" "),$t+=kt)}else for(kt in et)et[kt]&&($t&&($t+=" "),$t+=kt);return $t}function clsx(){for(var et,dt,kt=0,$t="",Tt=arguments.length;kt<Tt;kt++)(et=arguments[kt])&&(dt=r$3(et))&&($t&&($t+=" "),$t+=dt);return $t}function Mt$1(et){if(!et||typeof document>"u")return;let dt=document.head||document.getElementsByTagName("head")[0],kt=document.createElement("style");kt.type="text/css",dt.firstChild?dt.insertBefore(kt,dt.firstChild):dt.appendChild(kt),kt.styleSheet?kt.styleSheet.cssText=et:kt.appendChild(document.createTextNode(et))}Mt$1(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$8=et=>typeof et=="number"&&!isNaN(et),N$2=et=>typeof et=="string",P$5=et=>typeof et=="function",mt$1=et=>N$2(et)||L$8(et),B$4=et=>N$2(et)||P$5(et)?et:null,pt=(et,dt)=>et===!1||L$8(et)&&et>0?et:dt,z$6=et=>reactExports.isValidElement(et)||N$2(et)||P$5(et)||L$8(et);function Z$4(et,dt,kt=300){let{scrollHeight:$t,style:Tt}=et;requestAnimationFrame(()=>{Tt.minHeight="initial",Tt.height=$t+"px",Tt.transition=`all ${kt}ms`,requestAnimationFrame(()=>{Tt.height="0",Tt.padding="0",Tt.margin="0",setTimeout(dt,kt)})})}function $$3({enter:et,exit:dt,appendPosition:kt=!1,collapse:$t=!0,collapseDuration:Tt=300}){return function({children:Dt,position:Ft,preventExitTransition:Ut,done:Ht,nodeRef:Kt,isIn:Yt,playToast:Jt}){let Zt=kt?`${et}--${Ft}`:et,er=kt?`${dt}--${Ft}`:dt,rr=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let sr=Kt.current,nr=Zt.split(" "),ir=lr=>{lr.target===Kt.current&&(Jt(),sr.removeEventListener("animationend",ir),sr.removeEventListener("animationcancel",ir),rr.current===0&&lr.type!=="animationcancel"&&sr.classList.remove(...nr))};sr.classList.add(...nr),sr.addEventListener("animationend",ir),sr.addEventListener("animationcancel",ir)},[]),reactExports.useEffect(()=>{let sr=Kt.current,nr=()=>{sr.removeEventListener("animationend",nr),$t?Z$4(sr,Ht,Tt):Ht()};Yt||(Ut?nr():(rr.current=1,sr.className+=` ${er}`,sr.addEventListener("animationend",nr)))},[Yt]),React$2.createElement(React$2.Fragment,null,Dt)}}function J$2(et,dt){return{content:tt$2(et.content,et.props),containerId:et.props.containerId,id:et.props.toastId,theme:et.props.theme,type:et.props.type,data:et.props.data||{},isLoading:et.props.isLoading,icon:et.props.icon,reason:et.removalReason,status:dt}}function tt$2(et,dt,kt=!1){return reactExports.isValidElement(et)&&!N$2(et.type)?reactExports.cloneElement(et,{closeToast:dt.closeToast,toastProps:dt,data:dt.data,isPaused:kt}):P$5(et)?et({closeToast:dt.closeToast,toastProps:dt,data:dt.data,isPaused:kt}):et}function yt({closeToast:et,theme:dt,ariaLabel:kt="close"}){return React$2.createElement("button",{className:`Toastify__close-button Toastify__close-button--${dt}`,type:"button",onClick:$t=>{$t.stopPropagation(),et(!0)},"aria-label":kt},React$2.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React$2.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt$1({delay:et,isRunning:dt,closeToast:kt,type:$t="default",hide:Tt,className:Dt,controlledProgress:Ft,progress:Ut,rtl:Ht,isIn:Kt,theme:Yt}){let Jt=Tt||Ft&&Ut===0,Zt={animationDuration:`${et}ms`,animationPlayState:dt?"running":"paused"};Ft&&(Zt.transform=`scaleX(${Ut})`);let er=clsx("Toastify__progress-bar",Ft?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Yt}`,`Toastify__progress-bar--${$t}`,{"Toastify__progress-bar--rtl":Ht}),rr=P$5(Dt)?Dt({rtl:Ht,type:$t,defaultClassName:er}):clsx(er,Dt),sr={[Ft&&Ut>=1?"onTransitionEnd":"onAnimationEnd"]:Ft&&Ut<1?null:()=>{Kt&&kt()}};return React$2.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Jt},React$2.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Yt} Toastify__progress-bar--${$t}`}),React$2.createElement("div",{role:"progressbar","aria-hidden":Jt?"true":"false","aria-label":"notification timer",className:rr,style:Zt,...sr}))}var Xt=1,at$1=()=>`${Xt++}`;function _t$1(et,dt,kt){let $t=1,Tt=0,Dt=[],Ft=[],Ut=dt,Ht=new Map,Kt=new Set,Yt=lr=>(Kt.add(lr),()=>Kt.delete(lr)),Jt=()=>{Ft=Array.from(Ht.values()),Kt.forEach(lr=>lr())},Zt=({containerId:lr,toastId:or,updateId:cr})=>{let dr=lr?lr!==et:et!==1,ur=Ht.has(or)&&cr==null;return dr||ur},er=(lr,or)=>{Ht.forEach(cr=>{var dr;(or==null||or===cr.props.toastId)&&((dr=cr.toggle)==null||dr.call(cr,lr))})},rr=lr=>{var or,cr;(cr=(or=lr.props)==null?void 0:or.onClose)==null||cr.call(or,lr.removalReason),lr.isActive=!1},sr=lr=>{if(lr==null)Ht.forEach(rr);else{let or=Ht.get(lr);or&&rr(or)}Jt()},nr=()=>{Tt-=Dt.length,Dt=[]},ir=lr=>{var or,cr;let{toastId:dr,updateId:ur}=lr.props,pr=ur==null;lr.staleId&&Ht.delete(lr.staleId),lr.isActive=!0,Ht.set(dr,lr),Jt(),kt(J$2(lr,pr?"added":"updated")),pr&&((cr=(or=lr.props).onOpen)==null||cr.call(or))};return{id:et,props:Ut,observe:Yt,toggle:er,removeToast:sr,toasts:Ht,clearQueue:nr,buildToast:(lr,or)=>{if(Zt(or))return;let{toastId:cr,updateId:dr,data:ur,staleId:pr,delay:mr}=or,jr=dr==null;jr&&Tt++;let Rr={...Ut,style:Ut.toastStyle,key:$t++,...Object.fromEntries(Object.entries(or).filter(([_r,Mr])=>Mr!=null)),toastId:cr,updateId:dr,data:ur,isIn:!1,className:B$4(or.className||Ut.toastClassName),progressClassName:B$4(or.progressClassName||Ut.progressClassName),autoClose:or.isLoading?!1:pt(or.autoClose,Ut.autoClose),closeToast(_r){Ht.get(cr).removalReason=_r,sr(cr)},deleteToast(){let _r=Ht.get(cr);if(_r!=null){if(kt(J$2(_r,"removed")),Ht.delete(cr),Tt--,Tt<0&&(Tt=0),Dt.length>0){ir(Dt.shift());return}Jt()}}};Rr.closeButton=Ut.closeButton,or.closeButton===!1||z$6(or.closeButton)?Rr.closeButton=or.closeButton:or.closeButton===!0&&(Rr.closeButton=z$6(Ut.closeButton)?Ut.closeButton:!0);let br={content:lr,props:Rr,staleId:pr};Ut.limit&&Ut.limit>0&&Tt>Ut.limit&&jr?Dt.push(br):L$8(mr)?setTimeout(()=>{ir(br)},mr):ir(br)},setProps(lr){Ut=lr},setToggle:(lr,or)=>{let cr=Ht.get(lr);cr&&(cr.toggle=or)},isToastActive:lr=>{var or;return(or=Ht.get(lr))==null?void 0:or.isActive},getSnapshot:()=>Ft}}var I$3=new Map,F$3=[],st=new Set,Vt=et=>st.forEach(dt=>dt(et)),bt=()=>I$3.size>0;function Qt(){F$3.forEach(et=>nt(et.content,et.options)),F$3=[]}var vt$1=(et,{containerId:dt})=>{var kt;return(kt=I$3.get(dt||1))==null?void 0:kt.toasts.get(et)};function X$6(et,dt){var kt;if(dt)return!!((kt=I$3.get(dt))!=null&&kt.isToastActive(et));let $t=!1;return I$3.forEach(Tt=>{Tt.isToastActive(et)&&($t=!0)}),$t}function ht$1(et){if(!bt()){F$3=F$3.filter(dt=>et!=null&&dt.options.toastId!==et);return}if(et==null||mt$1(et))I$3.forEach(dt=>{dt.removeToast(et)});else if(et&&("containerId"in et||"id"in et)){let dt=I$3.get(et.containerId);dt?dt.removeToast(et.id):I$3.forEach(kt=>{kt.removeToast(et.id)})}}var Ct=(et={})=>{I$3.forEach(dt=>{dt.props.limit&&(!et.containerId||dt.id===et.containerId)&&dt.clearQueue()})};function nt(et,dt){z$6(et)&&(bt()||F$3.push({content:et,options:dt}),I$3.forEach(kt=>{kt.buildToast(et,dt)}))}function xt$1(et){var dt;(dt=I$3.get(et.containerId||1))==null||dt.setToggle(et.id,et.fn)}function rt$1(et,dt){I$3.forEach(kt=>{(dt==null||!(dt!=null&&dt.containerId)||(dt==null?void 0:dt.containerId)===kt.id)&&kt.toggle(et,dt==null?void 0:dt.id)})}function Et(et){let dt=et.containerId||1;return{subscribe(kt){let $t=_t$1(dt,et,Vt);I$3.set(dt,$t);let Tt=$t.observe(kt);return Qt(),()=>{Tt(),I$3.delete(dt)}},setProps(kt){var $t;($t=I$3.get(dt))==null||$t.setProps(kt)},getSnapshot(){var kt;return(kt=I$3.get(dt))==null?void 0:kt.getSnapshot()}}}function Pt$1(et){return st.add(et),()=>{st.delete(et)}}function Wt(et){return et&&(N$2(et.toastId)||L$8(et.toastId))?et.toastId:at$1()}function U$4(et,dt){return nt(et,dt),dt.toastId}function V$2(et,dt){return{...dt,type:dt&&dt.type||et,toastId:Wt(dt)}}function Q$3(et){return(dt,kt)=>U$4(dt,V$2(et,kt))}function y$4(et,dt){return U$4(et,V$2("default",dt))}y$4.loading=(et,dt)=>U$4(et,V$2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...dt}));function Gt(et,{pending:dt,error:kt,success:$t},Tt){let Dt;dt&&(Dt=N$2(dt)?y$4.loading(dt,Tt):y$4.loading(dt.render,{...Tt,...dt}));let Ft={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},Ut=(Kt,Yt,Jt)=>{if(Yt==null){y$4.dismiss(Dt);return}let Zt={type:Kt,...Ft,...Tt,data:Jt},er=N$2(Yt)?{render:Yt}:Yt;return Dt?y$4.update(Dt,{...Zt,...er}):y$4(er.render,{...Zt,...er}),Jt},Ht=P$5(et)?et():et;return Ht.then(Kt=>Ut("success",$t,Kt)).catch(Kt=>Ut("error",kt,Kt)),Ht}y$4.promise=Gt;y$4.success=Q$3("success");y$4.info=Q$3("info");y$4.error=Q$3("error");y$4.warning=Q$3("warning");y$4.warn=y$4.warning;y$4.dark=(et,dt)=>U$4(et,V$2("default",{theme:"dark",...dt}));function qt(et){ht$1(et)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$6;y$4.update=(et,dt={})=>{let kt=vt$1(et,dt);if(kt){let{props:$t,content:Tt}=kt,Dt={delay:100,...$t,...dt,toastId:dt.toastId||et,updateId:at$1()};Dt.toastId!==et&&(Dt.staleId=et);let Ft=Dt.render||Tt;delete Dt.render,U$4(Ft,Dt)}};y$4.done=et=>{y$4.update(et,{progress:1})};y$4.onChange=Pt$1;y$4.play=et=>rt$1(!0,et);y$4.pause=et=>rt$1(!1,et);function It$1(et){var dt;let{subscribe:kt,getSnapshot:$t,setProps:Tt}=reactExports.useRef(Et(et)).current;Tt(et);let Dt=(dt=reactExports.useSyncExternalStore(kt,$t,$t))==null?void 0:dt.slice();function Ft(Ut){if(!Dt)return[];let Ht=new Map;return et.newestOnTop&&Dt.reverse(),Dt.forEach(Kt=>{let{position:Yt}=Kt.props;Ht.has(Yt)||Ht.set(Yt,[]),Ht.get(Yt).push(Kt)}),Array.from(Ht,Kt=>Ut(Kt[0],Kt[1]))}return{getToastToRender:Ft,isToastActive:X$6,count:Dt==null?void 0:Dt.length}}function At(et){let[dt,kt]=reactExports.useState(!1),[$t,Tt]=reactExports.useState(!1),Dt=reactExports.useRef(null),Ft=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:Ut,pauseOnHover:Ht,closeToast:Kt,onClick:Yt,closeOnClick:Jt}=et;xt$1({id:et.toastId,containerId:et.containerId,fn:kt}),reactExports.useEffect(()=>{if(et.pauseOnFocusLoss)return Zt(),()=>{er()}},[et.pauseOnFocusLoss]);function Zt(){document.hasFocus()||ir(),window.addEventListener("focus",nr),window.addEventListener("blur",ir)}function er(){window.removeEventListener("focus",nr),window.removeEventListener("blur",ir)}function rr(pr){if(et.draggable===!0||et.draggable===pr.pointerType){lr();let mr=Dt.current;Ft.canCloseOnClick=!0,Ft.canDrag=!0,mr.style.transition="none",et.draggableDirection==="x"?(Ft.start=pr.clientX,Ft.removalDistance=mr.offsetWidth*(et.draggablePercent/100)):(Ft.start=pr.clientY,Ft.removalDistance=mr.offsetHeight*(et.draggablePercent===80?et.draggablePercent*1.5:et.draggablePercent)/100)}}function sr(pr){let{top:mr,bottom:jr,left:Rr,right:br}=Dt.current.getBoundingClientRect();pr.nativeEvent.type!=="touchend"&&et.pauseOnHover&&pr.clientX>=Rr&&pr.clientX<=br&&pr.clientY>=mr&&pr.clientY<=jr?ir():nr()}function nr(){kt(!0)}function ir(){kt(!1)}function lr(){Ft.didMove=!1,document.addEventListener("pointermove",cr),document.addEventListener("pointerup",dr)}function or(){document.removeEventListener("pointermove",cr),document.removeEventListener("pointerup",dr)}function cr(pr){let mr=Dt.current;if(Ft.canDrag&&mr){Ft.didMove=!0,dt&&ir(),et.draggableDirection==="x"?Ft.delta=pr.clientX-Ft.start:Ft.delta=pr.clientY-Ft.start,Ft.start!==pr.clientX&&(Ft.canCloseOnClick=!1);let jr=et.draggableDirection==="x"?`${Ft.delta}px, var(--y)`:`0, calc(${Ft.delta}px + var(--y))`;mr.style.transform=`translate3d(${jr},0)`,mr.style.opacity=`${1-Math.abs(Ft.delta/Ft.removalDistance)}`}}function dr(){or();let pr=Dt.current;if(Ft.canDrag&&Ft.didMove&&pr){if(Ft.canDrag=!1,Math.abs(Ft.delta)>Ft.removalDistance){Tt(!0),et.closeToast(!0),et.collapseAll();return}pr.style.transition="transform 0.2s, opacity 0.2s",pr.style.removeProperty("transform"),pr.style.removeProperty("opacity")}}let ur={onPointerDown:rr,onPointerUp:sr};return Ut&&Ht&&(ur.onMouseEnter=ir,et.stacked||(ur.onMouseLeave=nr)),Jt&&(ur.onClick=pr=>{Yt&&Yt(pr),Ft.canCloseOnClick&&Kt(!0)}),{playToast:nr,pauseToast:ir,isRunning:dt,preventExitTransition:$t,toastRef:Dt,eventHandlers:ur}}var Ot$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G$2=({theme:et,type:dt,isLoading:kt,...$t})=>React$2.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:et==="colored"?"currentColor":`var(--toastify-icon-color-${dt})`,...$t});function ao(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React$2.createElement("div",{className:"Toastify__spinner"})}var W$7={info:so,warning:ao,success:no,error:ro,spinner:io},lo=et=>et in W$7;function Nt({theme:et,type:dt,isLoading:kt,icon:$t}){let Tt=null,Dt={theme:et,type:dt};return $t===!1||(P$5($t)?Tt=$t({...Dt,isLoading:kt}):reactExports.isValidElement($t)?Tt=reactExports.cloneElement($t,Dt):kt?Tt=W$7.spinner():lo(dt)&&(Tt=W$7[dt](Dt))),Tt}var wt$1=et=>{let{isRunning:dt,preventExitTransition:kt,toastRef:$t,eventHandlers:Tt,playToast:Dt}=At(et),{closeButton:Ft,children:Ut,autoClose:Ht,onClick:Kt,type:Yt,hideProgressBar:Jt,closeToast:Zt,transition:er,position:rr,className:sr,style:nr,progressClassName:ir,updateId:lr,role:or,progress:cr,rtl:dr,toastId:ur,deleteToast:pr,isIn:mr,isLoading:jr,closeOnClick:Rr,theme:br,ariaLabel:_r}=et,Mr=clsx("Toastify__toast",`Toastify__toast-theme--${br}`,`Toastify__toast--${Yt}`,{"Toastify__toast--rtl":dr},{"Toastify__toast--close-on-click":Rr}),Pr=P$5(sr)?sr({rtl:dr,position:rr,type:Yt,defaultClassName:Mr}):clsx(Mr,sr),Or=Nt(et),kr=!!cr||!Ht,Tr={closeToast:Zt,type:Yt,theme:br},xr=null;return Ft===!1||(P$5(Ft)?xr=Ft(Tr):reactExports.isValidElement(Ft)?xr=reactExports.cloneElement(Ft,Tr):xr=yt(Tr)),React$2.createElement(er,{isIn:mr,done:pr,position:rr,preventExitTransition:kt,nodeRef:$t,playToast:Dt},React$2.createElement("div",{id:ur,tabIndex:0,onClick:Kt,"data-in":mr,className:Pr,...Tt,style:nr,ref:$t,...mr&&{role:or,"aria-label":_r}},Or!=null&&React$2.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!jr})},Or),tt$2(Ut,et,!dt),xr,!et.customProgressBar&&React$2.createElement(gt$1,{...lr&&!kr?{key:`p-${lr}`}:{},rtl:dr,theme:br,delay:Ht,isRunning:dt,isIn:mr,closeToast:Zt,hide:Jt,type:Yt,className:ir,controlledProgress:kr,progress:cr||0})))},K$3=(et,dt=!1)=>({enter:`Toastify--animate Toastify__${et}-enter`,exit:`Toastify--animate Toastify__${et}-exit`,appendPosition:dt}),lt=$$3(K$3("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:et=>et.altKey&&et.code==="KeyT"};function Lt$1(et){let dt={..._o,...et},kt=et.stacked,[$t,Tt]=reactExports.useState(!0),Dt=reactExports.useRef(null),{getToastToRender:Ft,isToastActive:Ut,count:Ht}=It$1(dt),{className:Kt,style:Yt,rtl:Jt,containerId:Zt,hotKeys:er}=dt;function rr(nr){let ir=clsx("Toastify__toast-container",`Toastify__toast-container--${nr}`,{"Toastify__toast-container--rtl":Jt});return P$5(Kt)?Kt({position:nr,rtl:Jt,defaultClassName:ir}):clsx(ir,B$4(Kt))}function sr(){kt&&(Tt(!0),y$4.play())}return Ot$1(()=>{var nr;if(kt){let ir=Dt.current.querySelectorAll('[data-in="true"]'),lr=12,or=(nr=dt.position)==null?void 0:nr.includes("top"),cr=0,dr=0;Array.from(ir).reverse().forEach((ur,pr)=>{let mr=ur;mr.classList.add("Toastify__toast--stacked"),pr>0&&(mr.dataset.collapsed=`${$t}`),mr.dataset.pos||(mr.dataset.pos=or?"top":"bot");let jr=cr*($t?.2:1)+($t?0:lr*pr);mr.style.setProperty("--y",`${or?jr:jr*-1}px`),mr.style.setProperty("--g",`${lr}`),mr.style.setProperty("--s",`${1-($t?dr:0)}`),cr+=mr.offsetHeight,dr+=.025})}},[$t,Ht,kt]),reactExports.useEffect(()=>{function nr(ir){var lr;let or=Dt.current;er(ir)&&((lr=or.querySelector('[tabIndex="0"]'))==null||lr.focus(),Tt(!1),y$4.pause()),ir.key==="Escape"&&(document.activeElement===or||or!=null&&or.contains(document.activeElement))&&(Tt(!0),y$4.play())}return document.addEventListener("keydown",nr),()=>{document.removeEventListener("keydown",nr)}},[er]),React$2.createElement("section",{ref:Dt,className:"Toastify",id:Zt,onMouseEnter:()=>{kt&&(Tt(!1),y$4.pause())},onMouseLeave:sr,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":dt["aria-label"]},Ft((nr,ir)=>{let lr=ir.length?{...Yt}:{...Yt,pointerEvents:"none"};return React$2.createElement("div",{tabIndex:-1,className:rr(nr),"data-stacked":kt,style:lr,key:`c-${nr}`},ir.map(({content:or,props:cr})=>React$2.createElement(wt$1,{...cr,stacked:kt,collapseAll:sr,isIn:Ut(cr.toastId,cr.containerId),key:`t-${cr.key}`},or)))}))}const BASE_URL$1="https://themessyattic.com/api";let refreshInFlight=!1,refreshPromise=null;function isTokenExpired(et){try{return JSON.parse(atob(et.split(".")[1])).exp*1e3<Date.now()}catch{return!0}}async function refreshAccessToken(){if(refreshInFlight)return refreshPromise;const et=localStorage.getItem("refreshToken");return et?(refreshInFlight=!0,refreshPromise=(async()=>{try{const dt=await axios$1.post(`${BASE_URL$1}/auth/refresh`,{token:et}),{accessToken:kt,refreshToken:$t}=dt.data;return localStorage.setItem("accessToken",kt),$t&&localStorage.setItem("refreshToken",$t),kt}catch(dt){throw localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),dt}finally{refreshInFlight=!1,refreshPromise=null}})(),refreshPromise):null}const BASE_URL="https://themessyattic.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,withCredentials:!0});axiosInstance.interceptors.request.use(async et=>{let dt=localStorage.getItem("accessToken");return dt&&isTokenExpired(dt)&&(dt=await refreshAccessToken()),dt&&(et.headers.Authorization=`Bearer ${dt}`),et});axiosInstance.interceptors.response.use(et=>et,et=>{var dt,kt;return(((dt=et.response)==null?void 0:dt.status)===401||((kt=et.response)==null?void 0:kt.status)===403)&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(et)});axiosInstance.interceptors.response.use(et=>et,async et=>{var dt;if(((dt=et.response)==null?void 0:dt.status)===401)try{await refreshAccessToken(),window.location.reload()}catch{localStorage.clear(),window.location.href="/"}return Promise.reject(et)});const AuthContext=reactExports.createContext();function applyTheme(et){et&&(document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(et),localStorage.setItem("theme",et))}function AuthProvider({children:et}){const dt=useNavigate(),[kt,$t]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(null),[Ft,Ut]=reactExports.useState(!0);function Ht(rr){if(!rr)return null;const sr=new Date,nr=rr.free_trial_expires_at&&new Date(rr.free_trial_expires_at)<sr;return{...rr,theme:rr.theme||"dark",isFreeTier:rr.has_free_magnet===1&&rr.magnet_slots===1,trialExpired:nr}}function Kt(rr,sr,nr){const ir=Ht(rr);$t(ir),Dt(sr),applyTheme(ir.theme),localStorage.setItem("user",JSON.stringify(ir)),localStorage.setItem("accessToken",sr),nr&&localStorage.setItem("refreshToken",nr)}async function Yt(rr,sr){try{const ir=(await axiosInstance.post("/auth/login",{email:rr,password:sr})).data;if(ir.requires2FA&&ir.twofaToken)return{requires2FA:!0,twofaToken:ir.twofaToken,message:ir.message};const lr=ir.accessToken,or=ir.refreshToken;if(!lr)throw new Error("Missing access token from login");Dt(lr),localStorage.setItem("accessToken",lr),or&&localStorage.setItem("refreshToken",or);const cr=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${lr}`}}),dr=Ht(cr.data);return $t(dr),applyTheme(dr.theme),localStorage.setItem("user",JSON.stringify(dr)),{requires2FA:!1}}catch(nr){throw console.error("Login failed:",nr),nr}}function Jt(){try{axiosInstance.post("/auth/logout")}catch{}$t(null),Dt(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),dt("/login",{replace:!0})}async function Zt(rr){try{applyTheme(rr),await axiosInstance.post("/auth/theme",{theme:rr}),$t(sr=>{if(!sr)return sr;const nr={...sr,theme:rr};return localStorage.setItem("user",JSON.stringify(nr)),nr})}catch(sr){console.error("Failed to save theme:",sr)}}reactExports.useEffect(()=>{async function rr(){try{const sr=localStorage.getItem("user"),nr=localStorage.getItem("accessToken");if(sr){const ir=JSON.parse(sr);$t(ir),applyTheme(ir.theme)}if(nr&&Dt(nr),nr){const ir=await axiosInstance.get("/auth/me"),lr=Ht(ir.data);$t(lr),localStorage.setItem("user",JSON.stringify(lr)),applyTheme(lr.theme)}}catch(sr){console.error("Failed to restore user:",sr)}finally{Ut(!1)}}rr()},[]);async function er(){if(!localStorage.getItem("accessToken"))return null;try{const sr=await axiosInstance.get("/auth/me"),nr=Ht(sr.data);return $t(nr),localStorage.setItem("user",JSON.stringify(nr)),nr}catch(sr){return console.error("Failed to refresh user data:",sr),null}}return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:kt,setUser:$t,accessToken:Tt,authLoading:Ft,login:Yt,logout:Jt,refreshUser:er,saveAuth:Kt,updateTheme:Zt},children:et})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:et}){const dt=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:dt,children:et})}function PrivateRoute({children:et,role:dt}){const{user:kt,authLoading:$t}=useAuth();return $t?null:kt?dt&&!(Array.isArray(dt)?dt:[dt]).includes(kt.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):et:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(et,dt){module.exports=dt()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(dt){_useWebWorker=!!dt},getWebWorker=function(){return _useWebWorker},setLocationHref=function(dt){locationHref=dt},getLocationHref=function(){return locationHref};function createTag(et){return document.createElement(et)}function extendPrototype(et,dt){var kt,$t=et.length,Tt;for(kt=0;kt<$t;kt+=1){Tt=et[kt].prototype;for(var Dt in Tt)Object.prototype.hasOwnProperty.call(Tt,Dt)&&(dt.prototype[Dt]=Tt[Dt])}}function getDescriptor(et,dt){return Object.getOwnPropertyDescriptor(et,dt)}function createProxyFunction(et){function dt(){}return dt.prototype=et,dt}var audioControllerFactory=function(){function et(dt){this.audios=[],this.audioFactory=dt,this._volume=1,this._isMuted=!1}return et.prototype={addAudio:function(kt){this.audios.push(kt)},pause:function(){var kt,$t=this.audios.length;for(kt=0;kt<$t;kt+=1)this.audios[kt].pause()},resume:function(){var kt,$t=this.audios.length;for(kt=0;kt<$t;kt+=1)this.audios[kt].resume()},setRate:function(kt){var $t,Tt=this.audios.length;for($t=0;$t<Tt;$t+=1)this.audios[$t].setRate(kt)},createAudio:function(kt){return this.audioFactory?this.audioFactory(kt):window.Howl?new window.Howl({src:[kt]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(kt){this.audioFactory=kt},setVolume:function(kt){this._volume=kt,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var kt,$t=this.audios.length;for(kt=0;kt<$t;kt+=1)this.audios[kt].volume(this._volume*(this._isMuted?0:1))}},function(){return new et}}(),createTypedArray=function(){function et(kt,$t){var Tt=0,Dt=[],Ft;switch(kt){case"int16":case"uint8c":Ft=1;break;default:Ft=1.1;break}for(Tt=0;Tt<$t;Tt+=1)Dt.push(Ft);return Dt}function dt(kt,$t){return kt==="float32"?new Float32Array($t):kt==="int16"?new Int16Array($t):kt==="uint8c"?new Uint8ClampedArray($t):et(kt,$t)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?dt:et}();function createSizedArray(et){return Array.apply(null,{length:et})}function _typeof$6(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(kt){return typeof kt}:_typeof$6=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof$6(et)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var et=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],dt,kt=et.length;for(dt=0;dt<kt;dt+=1)BMMath[et[dt]]=Math[et[dt]]})(),BMMath.random=Math.random,BMMath.abs=function(et){var dt=_typeof$6(et);if(dt==="object"&&et.length){var kt=createSizedArray(et.length),$t,Tt=et.length;for($t=0;$t<Tt;$t+=1)kt[$t]=Math.abs(et[$t]);return kt}return Math.abs(et)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(et){et.style.position="absolute",et.style.top=0,et.style.left=0,et.style.display="block",et.style.transformOrigin="0 0",et.style.webkitTransformOrigin="0 0",et.style.backfaceVisibility="visible",et.style.webkitBackfaceVisibility="visible",et.style.transformStyle="preserve-3d",et.style.webkitTransformStyle="preserve-3d",et.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(et,dt,kt,$t){this.type=et,this.currentTime=dt,this.totalTime=kt,this.direction=$t<0?-1:1}function BMCompleteEvent(et,dt){this.type=et,this.direction=dt<0?-1:1}function BMCompleteLoopEvent(et,dt,kt,$t){this.type=et,this.currentLoop=kt,this.totalLoops=dt,this.direction=$t<0?-1:1}function BMSegmentStartEvent(et,dt,kt){this.type=et,this.firstFrame=dt,this.totalFrames=kt}function BMDestroyEvent(et,dt){this.type=et,this.target=dt}function BMRenderFrameErrorEvent(et,dt){this.type="renderFrameError",this.nativeError=et,this.currentTime=dt}function BMConfigErrorEvent(et){this.type="configError",this.nativeError=et}var createElementID=function(){var et=0;return function(){return et+=1,idPrefix$1+"__lottie_element_"+et}}();function HSVtoRGB(et,dt,kt){var $t,Tt,Dt,Ft,Ut,Ht,Kt,Yt;switch(Ft=Math.floor(et*6),Ut=et*6-Ft,Ht=kt*(1-dt),Kt=kt*(1-Ut*dt),Yt=kt*(1-(1-Ut)*dt),Ft%6){case 0:$t=kt,Tt=Yt,Dt=Ht;break;case 1:$t=Kt,Tt=kt,Dt=Ht;break;case 2:$t=Ht,Tt=kt,Dt=Yt;break;case 3:$t=Ht,Tt=Kt,Dt=kt;break;case 4:$t=Yt,Tt=Ht,Dt=kt;break;case 5:$t=kt,Tt=Ht,Dt=Kt;break}return[$t,Tt,Dt]}function RGBtoHSV(et,dt,kt){var $t=Math.max(et,dt,kt),Tt=Math.min(et,dt,kt),Dt=$t-Tt,Ft,Ut=$t===0?0:Dt/$t,Ht=$t/255;switch($t){case Tt:Ft=0;break;case et:Ft=dt-kt+Dt*(dt<kt?6:0),Ft/=6*Dt;break;case dt:Ft=kt-et+Dt*2,Ft/=6*Dt;break;case kt:Ft=et-dt+Dt*4,Ft/=6*Dt;break}return[Ft,Ut,Ht]}function addSaturationToRGB(et,dt){var kt=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return kt[1]+=dt,kt[1]>1?kt[1]=1:kt[1]<=0&&(kt[1]=0),HSVtoRGB(kt[0],kt[1],kt[2])}function addBrightnessToRGB(et,dt){var kt=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return kt[2]+=dt,kt[2]>1?kt[2]=1:kt[2]<0&&(kt[2]=0),HSVtoRGB(kt[0],kt[1],kt[2])}function addHueToRGB(et,dt){var kt=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return kt[0]+=dt/360,kt[0]>1?kt[0]-=1:kt[0]<0&&(kt[0]+=1),HSVtoRGB(kt[0],kt[1],kt[2])}var rgbToHex=function(){var et=[],dt,kt;for(dt=0;dt<256;dt+=1)kt=dt.toString(16),et[dt]=kt.length===1?"0"+kt:kt;return function($t,Tt,Dt){return $t<0&&($t=0),Tt<0&&(Tt=0),Dt<0&&(Dt=0),"#"+et[$t]+et[Tt]+et[Dt]}}(),setSubframeEnabled=function(dt){subframeEnabled=!!dt},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(dt){expressionsPlugin=dt},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(dt){expressionsInterfaces=dt},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(dt){defaultCurveSegments=dt},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(dt){idPrefix$1=dt};function createNS(et){return document.createElementNS(svgNS,et)}function _typeof$5(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(kt){return typeof kt}:_typeof$5=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof$5(et)}var dataManager=function(){var et=1,dt=[],kt,$t,Tt={onmessage:function(){},postMessage:function(er){kt({data:er})}},Dt={postMessage:function(er){Tt.onmessage({data:er})}};function Ft(Zt){if(window.Worker&&window.Blob&&getWebWorker()){var er=new Blob(["var _workerSelf = self; self.onmessage = ",Zt.toString()],{type:"text/javascript"}),rr=URL.createObjectURL(er);return new Worker(rr)}return kt=Zt,Tt}function Ut(){$t||($t=Ft(function(er){function rr(){function nr(Or,kr){var Tr,xr,wr=Or.length,zr,Hr,Yr,rs;for(xr=0;xr<wr;xr+=1)if(Tr=Or[xr],"ks"in Tr&&!Tr.completed){if(Tr.completed=!0,Tr.hasMask){var as=Tr.masksProperties;for(Hr=as.length,zr=0;zr<Hr;zr+=1)if(as[zr].pt.k.i)dr(as[zr].pt.k);else for(rs=as[zr].pt.k.length,Yr=0;Yr<rs;Yr+=1)as[zr].pt.k[Yr].s&&dr(as[zr].pt.k[Yr].s[0]),as[zr].pt.k[Yr].e&&dr(as[zr].pt.k[Yr].e[0])}Tr.ty===0?(Tr.layers=or(Tr.refId,kr),nr(Tr.layers,kr)):Tr.ty===4?cr(Tr.shapes):Tr.ty===5&&Mr(Tr)}}function ir(Or,kr){if(Or){var Tr=0,xr=Or.length;for(Tr=0;Tr<xr;Tr+=1)Or[Tr].t===1&&(Or[Tr].data.layers=or(Or[Tr].data.refId,kr),nr(Or[Tr].data.layers,kr))}}function lr(Or,kr){for(var Tr=0,xr=kr.length;Tr<xr;){if(kr[Tr].id===Or)return kr[Tr];Tr+=1}return null}function or(Or,kr){var Tr=lr(Or,kr);return Tr?Tr.layers.__used?JSON.parse(JSON.stringify(Tr.layers)):(Tr.layers.__used=!0,Tr.layers):null}function cr(Or){var kr,Tr=Or.length,xr,wr;for(kr=Tr-1;kr>=0;kr-=1)if(Or[kr].ty==="sh")if(Or[kr].ks.k.i)dr(Or[kr].ks.k);else for(wr=Or[kr].ks.k.length,xr=0;xr<wr;xr+=1)Or[kr].ks.k[xr].s&&dr(Or[kr].ks.k[xr].s[0]),Or[kr].ks.k[xr].e&&dr(Or[kr].ks.k[xr].e[0]);else Or[kr].ty==="gr"&&cr(Or[kr].it)}function dr(Or){var kr,Tr=Or.i.length;for(kr=0;kr<Tr;kr+=1)Or.i[kr][0]+=Or.v[kr][0],Or.i[kr][1]+=Or.v[kr][1],Or.o[kr][0]+=Or.v[kr][0],Or.o[kr][1]+=Or.v[kr][1]}function ur(Or,kr){var Tr=kr?kr.split("."):[100,100,100];return Or[0]>Tr[0]?!0:Tr[0]>Or[0]?!1:Or[1]>Tr[1]?!0:Tr[1]>Or[1]?!1:Or[2]>Tr[2]?!0:Tr[2]>Or[2]?!1:null}var pr=function(){var Or=[4,4,14];function kr(xr){var wr=xr.t.d;xr.t.d={k:[{s:wr,t:0}]}}function Tr(xr){var wr,zr=xr.length;for(wr=0;wr<zr;wr+=1)xr[wr].ty===5&&kr(xr[wr])}return function(xr){if(ur(Or,xr.v)&&(Tr(xr.layers),xr.assets)){var wr,zr=xr.assets.length;for(wr=0;wr<zr;wr+=1)xr.assets[wr].layers&&Tr(xr.assets[wr].layers)}}}(),mr=function(){var Or=[4,7,99];return function(kr){if(kr.chars&&!ur(Or,kr.v)){var Tr,xr=kr.chars.length;for(Tr=0;Tr<xr;Tr+=1){var wr=kr.chars[Tr];wr.data&&wr.data.shapes&&(cr(wr.data.shapes),wr.data.ip=0,wr.data.op=99999,wr.data.st=0,wr.data.sr=1,wr.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},kr.chars[Tr].t||(wr.data.shapes.push({ty:"no"}),wr.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),jr=function(){var Or=[5,7,15];function kr(xr){var wr=xr.t.p;typeof wr.a=="number"&&(wr.a={a:0,k:wr.a}),typeof wr.p=="number"&&(wr.p={a:0,k:wr.p}),typeof wr.r=="number"&&(wr.r={a:0,k:wr.r})}function Tr(xr){var wr,zr=xr.length;for(wr=0;wr<zr;wr+=1)xr[wr].ty===5&&kr(xr[wr])}return function(xr){if(ur(Or,xr.v)&&(Tr(xr.layers),xr.assets)){var wr,zr=xr.assets.length;for(wr=0;wr<zr;wr+=1)xr.assets[wr].layers&&Tr(xr.assets[wr].layers)}}}(),Rr=function(){var Or=[4,1,9];function kr(xr){var wr,zr=xr.length,Hr,Yr;for(wr=0;wr<zr;wr+=1)if(xr[wr].ty==="gr")kr(xr[wr].it);else if(xr[wr].ty==="fl"||xr[wr].ty==="st")if(xr[wr].c.k&&xr[wr].c.k[0].i)for(Yr=xr[wr].c.k.length,Hr=0;Hr<Yr;Hr+=1)xr[wr].c.k[Hr].s&&(xr[wr].c.k[Hr].s[0]/=255,xr[wr].c.k[Hr].s[1]/=255,xr[wr].c.k[Hr].s[2]/=255,xr[wr].c.k[Hr].s[3]/=255),xr[wr].c.k[Hr].e&&(xr[wr].c.k[Hr].e[0]/=255,xr[wr].c.k[Hr].e[1]/=255,xr[wr].c.k[Hr].e[2]/=255,xr[wr].c.k[Hr].e[3]/=255);else xr[wr].c.k[0]/=255,xr[wr].c.k[1]/=255,xr[wr].c.k[2]/=255,xr[wr].c.k[3]/=255}function Tr(xr){var wr,zr=xr.length;for(wr=0;wr<zr;wr+=1)xr[wr].ty===4&&kr(xr[wr].shapes)}return function(xr){if(ur(Or,xr.v)&&(Tr(xr.layers),xr.assets)){var wr,zr=xr.assets.length;for(wr=0;wr<zr;wr+=1)xr.assets[wr].layers&&Tr(xr.assets[wr].layers)}}}(),br=function(){var Or=[4,4,18];function kr(xr){var wr,zr=xr.length,Hr,Yr;for(wr=zr-1;wr>=0;wr-=1)if(xr[wr].ty==="sh")if(xr[wr].ks.k.i)xr[wr].ks.k.c=xr[wr].closed;else for(Yr=xr[wr].ks.k.length,Hr=0;Hr<Yr;Hr+=1)xr[wr].ks.k[Hr].s&&(xr[wr].ks.k[Hr].s[0].c=xr[wr].closed),xr[wr].ks.k[Hr].e&&(xr[wr].ks.k[Hr].e[0].c=xr[wr].closed);else xr[wr].ty==="gr"&&kr(xr[wr].it)}function Tr(xr){var wr,zr,Hr=xr.length,Yr,rs,as,es;for(zr=0;zr<Hr;zr+=1){if(wr=xr[zr],wr.hasMask){var Xr=wr.masksProperties;for(rs=Xr.length,Yr=0;Yr<rs;Yr+=1)if(Xr[Yr].pt.k.i)Xr[Yr].pt.k.c=Xr[Yr].cl;else for(es=Xr[Yr].pt.k.length,as=0;as<es;as+=1)Xr[Yr].pt.k[as].s&&(Xr[Yr].pt.k[as].s[0].c=Xr[Yr].cl),Xr[Yr].pt.k[as].e&&(Xr[Yr].pt.k[as].e[0].c=Xr[Yr].cl)}wr.ty===4&&kr(wr.shapes)}}return function(xr){if(ur(Or,xr.v)&&(Tr(xr.layers),xr.assets)){var wr,zr=xr.assets.length;for(wr=0;wr<zr;wr+=1)xr.assets[wr].layers&&Tr(xr.assets[wr].layers)}}}();function _r(Or){Or.__complete||(Rr(Or),pr(Or),mr(Or),jr(Or),br(Or),nr(Or.layers,Or.assets),ir(Or.chars,Or.assets),Or.__complete=!0)}function Mr(Or){Or.t.a.length===0&&"m"in Or.t.p}var Pr={};return Pr.completeData=_r,Pr.checkColors=Rr,Pr.checkChars=mr,Pr.checkPathProperties=jr,Pr.checkShapes=br,Pr.completeLayers=nr,Pr}if(Dt.dataManager||(Dt.dataManager=rr()),Dt.assetLoader||(Dt.assetLoader=function(){function nr(lr){var or=lr.getResponseHeader("content-type");return or&&lr.responseType==="json"&&or.indexOf("json")!==-1||lr.response&&_typeof$5(lr.response)==="object"?lr.response:lr.response&&typeof lr.response=="string"?JSON.parse(lr.response):lr.responseText?JSON.parse(lr.responseText):null}function ir(lr,or,cr,dr){var ur,pr=new XMLHttpRequest;try{pr.responseType="json"}catch{}pr.onreadystatechange=function(){if(pr.readyState===4)if(pr.status===200)ur=nr(pr),cr(ur);else try{ur=nr(pr),cr(ur)}catch(mr){dr&&dr(mr)}};try{pr.open(["G","E","T"].join(""),lr,!0)}catch{pr.open(["G","E","T"].join(""),or+"/"+lr,!0)}pr.send()}return{load:ir}}()),er.data.type==="loadAnimation")Dt.assetLoader.load(er.data.path,er.data.fullPath,function(nr){Dt.dataManager.completeData(nr),Dt.postMessage({id:er.data.id,payload:nr,status:"success"})},function(){Dt.postMessage({id:er.data.id,status:"error"})});else if(er.data.type==="complete"){var sr=er.data.animation;Dt.dataManager.completeData(sr),Dt.postMessage({id:er.data.id,payload:sr,status:"success"})}else er.data.type==="loadData"&&Dt.assetLoader.load(er.data.path,er.data.fullPath,function(nr){Dt.postMessage({id:er.data.id,payload:nr,status:"success"})},function(){Dt.postMessage({id:er.data.id,status:"error"})})}),$t.onmessage=function(Zt){var er=Zt.data,rr=er.id,sr=dt[rr];dt[rr]=null,er.status==="success"?sr.onComplete(er.payload):sr.onError&&sr.onError()})}function Ht(Zt,er){et+=1;var rr="processId_"+et;return dt[rr]={onComplete:Zt,onError:er},rr}function Kt(Zt,er,rr){Ut();var sr=Ht(er,rr);$t.postMessage({type:"loadAnimation",path:Zt,fullPath:window.location.origin+window.location.pathname,id:sr})}function Yt(Zt,er,rr){Ut();var sr=Ht(er,rr);$t.postMessage({type:"loadData",path:Zt,fullPath:window.location.origin+window.location.pathname,id:sr})}function Jt(Zt,er,rr){Ut();var sr=Ht(er,rr);$t.postMessage({type:"complete",animation:Zt,id:sr})}return{loadAnimation:Kt,loadData:Yt,completeAnimation:Jt}}(),ImagePreloader=function(){var et=function(){var ir=createTag("canvas");ir.width=1,ir.height=1;var lr=ir.getContext("2d");return lr.fillStyle="rgba(0,0,0,0)",lr.fillRect(0,0,1,1),ir}();function dt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function kt(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function $t(ir,lr,or){var cr="";if(ir.e)cr=ir.p;else if(lr){var dr=ir.p;dr.indexOf("images/")!==-1&&(dr=dr.split("/")[1]),cr=lr+dr}else cr=or,cr+=ir.u?ir.u:"",cr+=ir.p;return cr}function Tt(ir){var lr=0,or=setInterval((function(){var cr=ir.getBBox();(cr.width||lr>500)&&(this._imageLoaded(),clearInterval(or)),lr+=1}).bind(this),50)}function Dt(ir){var lr=$t(ir,this.assetsPath,this.path),or=createNS("image");isSafari?this.testImageLoaded(or):or.addEventListener("load",this._imageLoaded,!1),or.addEventListener("error",(function(){cr.img=et,this._imageLoaded()}).bind(this),!1),or.setAttributeNS("http://www.w3.org/1999/xlink","href",lr),this._elementHelper.append?this._elementHelper.append(or):this._elementHelper.appendChild(or);var cr={img:or,assetData:ir};return cr}function Ft(ir){var lr=$t(ir,this.assetsPath,this.path),or=createTag("img");or.crossOrigin="anonymous",or.addEventListener("load",this._imageLoaded,!1),or.addEventListener("error",(function(){cr.img=et,this._imageLoaded()}).bind(this),!1),or.src=lr;var cr={img:or,assetData:ir};return cr}function Ut(ir){var lr={assetData:ir},or=$t(ir,this.assetsPath,this.path);return dataManager.loadData(or,(function(cr){lr.img=cr,this._footageLoaded()}).bind(this),(function(){lr.img={},this._footageLoaded()}).bind(this)),lr}function Ht(ir,lr){this.imagesLoadedCb=lr;var or,cr=ir.length;for(or=0;or<cr;or+=1)ir[or].layers||(!ir[or].t||ir[or].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(ir[or]))):ir[or].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(ir[or]))))}function Kt(ir){this.path=ir||""}function Yt(ir){this.assetsPath=ir||""}function Jt(ir){for(var lr=0,or=this.images.length;lr<or;){if(this.images[lr].assetData===ir)return this.images[lr].img;lr+=1}return null}function Zt(){this.imagesLoadedCb=null,this.images.length=0}function er(){return this.totalImages===this.loadedAssets}function rr(){return this.totalFootages===this.loadedFootagesCount}function sr(ir,lr){ir==="svg"?(this._elementHelper=lr,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function nr(){this._imageLoaded=dt.bind(this),this._footageLoaded=kt.bind(this),this.testImageLoaded=Tt.bind(this),this.createFootageData=Ut.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return nr.prototype={loadAssets:Ht,setAssetsPath:Yt,setPath:Kt,loadedImages:er,loadedFootages:rr,destroy:Zt,getAsset:Jt,createImgData:Ft,createImageData:Dt,imageLoaded:dt,footageLoaded:kt,setCacheType:sr},nr}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(dt,kt){if(this._cbs[dt])for(var $t=this._cbs[dt],Tt=0;Tt<$t.length;Tt+=1)$t[Tt](kt)},addEventListener:function(dt,kt){return this._cbs[dt]||(this._cbs[dt]=[]),this._cbs[dt].push(kt),(function(){this.removeEventListener(dt,kt)}).bind(this)},removeEventListener:function(dt,kt){if(!kt)this._cbs[dt]=null;else if(this._cbs[dt]){for(var $t=0,Tt=this._cbs[dt].length;$t<Tt;)this._cbs[dt][$t]===kt&&(this._cbs[dt].splice($t,1),$t-=1,Tt-=1),$t+=1;this._cbs[dt].length||(this._cbs[dt]=null)}}};var markerParser=function(){function et(dt){for(var kt=dt.split(`\r
`),$t={},Tt,Dt=0,Ft=0;Ft<kt.length;Ft+=1)Tt=kt[Ft].split(":"),Tt.length===2&&($t[Tt[0]]=Tt[1].trim(),Dt+=1);if(Dt===0)throw new Error;return $t}return function(dt){for(var kt=[],$t=0;$t<dt.length;$t+=1){var Tt=dt[$t],Dt={time:Tt.tm,duration:Tt.dr};try{Dt.payload=JSON.parse(dt[$t].cm)}catch{try{Dt.payload=et(dt[$t].cm)}catch{Dt.payload={name:dt[$t].cm}}}kt.push(Dt)}return kt}}(),ProjectInterface=function(){function et(dt){this.compositions.push(dt)}return function(){function dt(kt){for(var $t=0,Tt=this.compositions.length;$t<Tt;){if(this.compositions[$t].data&&this.compositions[$t].data.nm===kt)return this.compositions[$t].prepareFrame&&this.compositions[$t].data.xt&&this.compositions[$t].prepareFrame(this.currentFrame),this.compositions[$t].compInterface;$t+=1}return null}return dt.compositions=[],dt.currentFrame=0,dt.registerComposition=et,dt}}(),renderers={},registerRenderer=function(dt,kt){renderers[dt]=kt};function getRenderer(et){return renderers[et]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var et in renderers)if(renderers[et])return et;return""}function _typeof$4(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(kt){return typeof kt}:_typeof$4=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof$4(et)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(et){(et.wrapper||et.container)&&(this.wrapper=et.wrapper||et.container);var dt="svg";et.animType?dt=et.animType:et.renderer&&(dt=et.renderer);var kt=getRenderer(dt);this.renderer=new kt(this,et.rendererSettings),this.imagePreloader.setCacheType(dt,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=dt,et.loop===""||et.loop===null||et.loop===void 0||et.loop===!0?this.loop=!0:et.loop===!1?this.loop=!1:this.loop=parseInt(et.loop,10),this.autoplay="autoplay"in et?et.autoplay:!0,this.name=et.name?et.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(et,"autoloadSegments")?et.autoloadSegments:!0,this.assetsPath=et.assetsPath,this.initialSegment=et.initialSegment,et.audioFactory&&this.audioController.setAudioFactory(et.audioFactory),et.animationData?this.setupAnimation(et.animationData):et.path&&(et.path.lastIndexOf("\\")!==-1?this.path=et.path.substr(0,et.path.lastIndexOf("\\")+1):this.path=et.path.substr(0,et.path.lastIndexOf("/")+1),this.fileName=et.path.substr(et.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(et.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(et){dataManager.completeAnimation(et,this.configAnimation)},AnimationItem.prototype.setData=function(et,dt){dt&&_typeof$4(dt)!=="object"&&(dt=JSON.parse(dt));var kt={wrapper:et,animationData:dt},$t=et.attributes;kt.path=$t.getNamedItem("data-animation-path")?$t.getNamedItem("data-animation-path").value:$t.getNamedItem("data-bm-path")?$t.getNamedItem("data-bm-path").value:$t.getNamedItem("bm-path")?$t.getNamedItem("bm-path").value:"",kt.animType=$t.getNamedItem("data-anim-type")?$t.getNamedItem("data-anim-type").value:$t.getNamedItem("data-bm-type")?$t.getNamedItem("data-bm-type").value:$t.getNamedItem("bm-type")?$t.getNamedItem("bm-type").value:$t.getNamedItem("data-bm-renderer")?$t.getNamedItem("data-bm-renderer").value:$t.getNamedItem("bm-renderer")?$t.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var Tt=$t.getNamedItem("data-anim-loop")?$t.getNamedItem("data-anim-loop").value:$t.getNamedItem("data-bm-loop")?$t.getNamedItem("data-bm-loop").value:$t.getNamedItem("bm-loop")?$t.getNamedItem("bm-loop").value:"";Tt==="false"?kt.loop=!1:Tt==="true"?kt.loop=!0:Tt!==""&&(kt.loop=parseInt(Tt,10));var Dt=$t.getNamedItem("data-anim-autoplay")?$t.getNamedItem("data-anim-autoplay").value:$t.getNamedItem("data-bm-autoplay")?$t.getNamedItem("data-bm-autoplay").value:$t.getNamedItem("bm-autoplay")?$t.getNamedItem("bm-autoplay").value:!0;kt.autoplay=Dt!=="false",kt.name=$t.getNamedItem("data-name")?$t.getNamedItem("data-name").value:$t.getNamedItem("data-bm-name")?$t.getNamedItem("data-bm-name").value:$t.getNamedItem("bm-name")?$t.getNamedItem("bm-name").value:"";var Ft=$t.getNamedItem("data-anim-prerender")?$t.getNamedItem("data-anim-prerender").value:$t.getNamedItem("data-bm-prerender")?$t.getNamedItem("data-bm-prerender").value:$t.getNamedItem("bm-prerender")?$t.getNamedItem("bm-prerender").value:"";Ft==="false"&&(kt.prerender=!1),kt.path?this.setParams(kt):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(et){et.op>this.animationData.op&&(this.animationData.op=et.op,this.totalFrames=Math.floor(et.op-this.animationData.ip));var dt=this.animationData.layers,kt,$t=dt.length,Tt=et.layers,Dt,Ft=Tt.length;for(Dt=0;Dt<Ft;Dt+=1)for(kt=0;kt<$t;){if(dt[kt].id===Tt[Dt].id){dt[kt]=Tt[Dt];break}kt+=1}if((et.chars||et.fonts)&&(this.renderer.globalData.fontManager.addChars(et.chars),this.renderer.globalData.fontManager.addFonts(et.fonts,this.renderer.globalData.defs)),et.assets)for($t=et.assets.length,kt=0;kt<$t;kt+=1)this.animationData.assets.push(et.assets[kt]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(et){this.animationData=et;var dt=getExpressionsPlugin();dt&&dt.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var et=this.animationData.segments;if(!et||et.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var dt=et.shift();this.timeCompleted=dt.time*this.frameRate;var kt=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(kt,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var et=this.animationData.segments;et||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(et){if(this.renderer)try{this.animationData=et,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(et),et.assets||(et.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(et.assets),this.markers=markerParser(et.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(dt){this.triggerConfigError(dt)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var et=getExpressionsPlugin();et&&et.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(et,dt){var kt=typeof et=="number"?et:void 0,$t=typeof dt=="number"?dt:void 0;this.renderer.updateContainerSize(kt,$t)},AnimationItem.prototype.setSubframe=function(et){this.isSubframeEnabled=!!et},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(et){this.triggerRenderFrameError(et)}},AnimationItem.prototype.play=function(et){et&&this.name!==et||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(et){et&&this.name!==et||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(et){et&&this.name!==et||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(et){et&&this.name!==et||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(et){for(var dt,kt=0;kt<this.markers.length;kt+=1)if(dt=this.markers[kt],dt.payload&&dt.payload.name===et)return dt;return null},AnimationItem.prototype.goToAndStop=function(et,dt,kt){if(!(kt&&this.name!==kt)){var $t=Number(et);if(isNaN($t)){var Tt=this.getMarkerData(et);Tt&&this.goToAndStop(Tt.time,!0)}else dt?this.setCurrentRawFrameValue(et):this.setCurrentRawFrameValue(et*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(et,dt,kt){if(!(kt&&this.name!==kt)){var $t=Number(et);if(isNaN($t)){var Tt=this.getMarkerData(et);Tt&&(Tt.duration?this.playSegments([Tt.time,Tt.time+Tt.duration],!0):this.goToAndStop(Tt.time,!0))}else this.goToAndStop($t,dt,kt);this.play()}},AnimationItem.prototype.advanceTime=function(et){if(!(this.isPaused===!0||this.isLoaded===!1)){var dt=this.currentRawFrame+et*this.frameModifier,kt=!1;dt>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(dt>this.totalFrames?dt%this.totalFrames:0)||(kt=!0,dt=this.totalFrames-1):dt>=this.totalFrames?(this.playCount+=1,this.checkSegments(dt%this.totalFrames)||(this.setCurrentRawFrameValue(dt%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(dt):dt<0?this.checkSegments(dt%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+dt%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(kt=!0,dt=0)):this.setCurrentRawFrameValue(dt),kt&&(this.setCurrentRawFrameValue(dt),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(et,dt){this.playCount=0,et[1]<et[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=et[0]-et[1],this.timeCompleted=this.totalFrames,this.firstFrame=et[1],this.setCurrentRawFrameValue(this.totalFrames-.001-dt)):et[1]>et[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=et[1]-et[0],this.timeCompleted=this.totalFrames,this.firstFrame=et[0],this.setCurrentRawFrameValue(.001+dt)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(et,dt){var kt=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<et?kt=et:this.currentRawFrame+this.firstFrame>dt&&(kt=dt-et)),this.firstFrame=et,this.totalFrames=dt-et,this.timeCompleted=this.totalFrames,kt!==-1&&this.goToAndStop(kt,!0)},AnimationItem.prototype.playSegments=function(et,dt){if(dt&&(this.segments.length=0),_typeof$4(et[0])==="object"){var kt,$t=et.length;for(kt=0;kt<$t;kt+=1)this.segments.push(et[kt])}else this.segments.push(et);this.segments.length&&dt&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(et){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),et&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(et){return this.segments.length?(this.adjustSegment(this.segments.shift(),et),!0):!1},AnimationItem.prototype.destroy=function(et){et&&this.name!==et||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(et){this.currentRawFrame=et,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(et){this.playSpeed=et,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(et){this.playDirection=et<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(et){this.loop=et},AnimationItem.prototype.setVolume=function(et,dt){dt&&this.name!==dt||this.audioController.setVolume(et)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(et){et&&this.name!==et||this.audioController.mute()},AnimationItem.prototype.unmute=function(et){et&&this.name!==et||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(et){var dt="";if(et.e)dt=et.p;else if(this.assetsPath){var kt=et.p;kt.indexOf("images/")!==-1&&(kt=kt.split("/")[1]),dt=this.assetsPath+kt}else dt=this.path,dt+=et.u?et.u:"",dt+=et.p;return dt},AnimationItem.prototype.getAssetData=function(et){for(var dt=0,kt=this.assets.length;dt<kt;){if(et===this.assets[dt].id)return this.assets[dt];dt+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(et){return et?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(et,dt,kt){try{var $t=this.renderer.getElementByPath(et);$t.updateDocumentData(dt,kt)}catch{}},AnimationItem.prototype.trigger=function(et){if(this._cbs&&this._cbs[et])switch(et){case"enterFrame":this.triggerEvent(et,new BMEnterFrameEvent(et,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(et,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(et,new BMCompleteLoopEvent(et,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(et,new BMCompleteEvent(et,this.frameMult));break;case"segmentStart":this.triggerEvent(et,new BMSegmentStartEvent(et,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(et,new BMDestroyEvent(et,this));break;default:this.triggerEvent(et)}et==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(et,this.currentFrame,this.totalFrames,this.frameMult)),et==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(et,this.loop,this.playCount,this.frameMult)),et==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(et,this.frameMult)),et==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(et,this.firstFrame,this.totalFrames)),et==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(et,this))},AnimationItem.prototype.triggerRenderFrameError=function(et){var dt=new BMRenderFrameErrorEvent(et,this.currentFrame);this.triggerEvent("error",dt),this.onError&&this.onError.call(this,dt)},AnimationItem.prototype.triggerConfigError=function(et){var dt=new BMConfigErrorEvent(et,this.currentFrame);this.triggerEvent("error",dt),this.onError&&this.onError.call(this,dt)};var animationManager=function(){var et={},dt=[],kt=0,$t=0,Tt=0,Dt=!0,Ft=!1;function Ut(kr){for(var Tr=0,xr=kr.target;Tr<$t;)dt[Tr].animation===xr&&(dt.splice(Tr,1),Tr-=1,$t-=1,xr.isPaused||Jt()),Tr+=1}function Ht(kr,Tr){if(!kr)return null;for(var xr=0;xr<$t;){if(dt[xr].elem===kr&&dt[xr].elem!==null)return dt[xr].animation;xr+=1}var wr=new AnimationItem;return Zt(wr,kr),wr.setData(kr,Tr),wr}function Kt(){var kr,Tr=dt.length,xr=[];for(kr=0;kr<Tr;kr+=1)xr.push(dt[kr].animation);return xr}function Yt(){Tt+=1,Rr()}function Jt(){Tt-=1}function Zt(kr,Tr){kr.addEventListener("destroy",Ut),kr.addEventListener("_active",Yt),kr.addEventListener("_idle",Jt),dt.push({elem:Tr,animation:kr}),$t+=1}function er(kr){var Tr=new AnimationItem;return Zt(Tr,null),Tr.setParams(kr),Tr}function rr(kr,Tr){var xr;for(xr=0;xr<$t;xr+=1)dt[xr].animation.setSpeed(kr,Tr)}function sr(kr,Tr){var xr;for(xr=0;xr<$t;xr+=1)dt[xr].animation.setDirection(kr,Tr)}function nr(kr){var Tr;for(Tr=0;Tr<$t;Tr+=1)dt[Tr].animation.play(kr)}function ir(kr){var Tr=kr-kt,xr;for(xr=0;xr<$t;xr+=1)dt[xr].animation.advanceTime(Tr);kt=kr,Tt&&!Ft?window.requestAnimationFrame(ir):Dt=!0}function lr(kr){kt=kr,window.requestAnimationFrame(ir)}function or(kr){var Tr;for(Tr=0;Tr<$t;Tr+=1)dt[Tr].animation.pause(kr)}function cr(kr,Tr,xr){var wr;for(wr=0;wr<$t;wr+=1)dt[wr].animation.goToAndStop(kr,Tr,xr)}function dr(kr){var Tr;for(Tr=0;Tr<$t;Tr+=1)dt[Tr].animation.stop(kr)}function ur(kr){var Tr;for(Tr=0;Tr<$t;Tr+=1)dt[Tr].animation.togglePause(kr)}function pr(kr){var Tr;for(Tr=$t-1;Tr>=0;Tr-=1)dt[Tr].animation.destroy(kr)}function mr(kr,Tr,xr){var wr=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),zr,Hr=wr.length;for(zr=0;zr<Hr;zr+=1)xr&&wr[zr].setAttribute("data-bm-type",xr),Ht(wr[zr],kr);if(Tr&&Hr===0){xr||(xr="svg");var Yr=document.getElementsByTagName("body")[0];Yr.innerText="";var rs=createTag("div");rs.style.width="100%",rs.style.height="100%",rs.setAttribute("data-bm-type",xr),Yr.appendChild(rs),Ht(rs,kr)}}function jr(){var kr;for(kr=0;kr<$t;kr+=1)dt[kr].animation.resize()}function Rr(){!Ft&&Tt&&Dt&&(window.requestAnimationFrame(lr),Dt=!1)}function br(){Ft=!0}function _r(){Ft=!1,Rr()}function Mr(kr,Tr){var xr;for(xr=0;xr<$t;xr+=1)dt[xr].animation.setVolume(kr,Tr)}function Pr(kr){var Tr;for(Tr=0;Tr<$t;Tr+=1)dt[Tr].animation.mute(kr)}function Or(kr){var Tr;for(Tr=0;Tr<$t;Tr+=1)dt[Tr].animation.unmute(kr)}return et.registerAnimation=Ht,et.loadAnimation=er,et.setSpeed=rr,et.setDirection=sr,et.play=nr,et.pause=or,et.stop=dr,et.togglePause=ur,et.searchAnimations=mr,et.resize=jr,et.goToAndStop=cr,et.destroy=pr,et.freeze=br,et.unfreeze=_r,et.setVolume=Mr,et.mute=Pr,et.unmute=Or,et.getRegisteredAnimations=Kt,et}(),BezierFactory=function(){var et={};et.getBezierEasing=kt;var dt={};function kt(lr,or,cr,dr,ur){var pr=ur||("bez_"+lr+"_"+or+"_"+cr+"_"+dr).replace(/\./g,"p");if(dt[pr])return dt[pr];var mr=new ir([lr,or,cr,dr]);return dt[pr]=mr,mr}var $t=4,Tt=.001,Dt=1e-7,Ft=10,Ut=11,Ht=1/(Ut-1),Kt=typeof Float32Array=="function";function Yt(lr,or){return 1-3*or+3*lr}function Jt(lr,or){return 3*or-6*lr}function Zt(lr){return 3*lr}function er(lr,or,cr){return((Yt(or,cr)*lr+Jt(or,cr))*lr+Zt(or))*lr}function rr(lr,or,cr){return 3*Yt(or,cr)*lr*lr+2*Jt(or,cr)*lr+Zt(or)}function sr(lr,or,cr,dr,ur){var pr,mr,jr=0;do mr=or+(cr-or)/2,pr=er(mr,dr,ur)-lr,pr>0?cr=mr:or=mr;while(Math.abs(pr)>Dt&&++jr<Ft);return mr}function nr(lr,or,cr,dr){for(var ur=0;ur<$t;++ur){var pr=rr(or,cr,dr);if(pr===0)return or;var mr=er(or,cr,dr)-lr;or-=mr/pr}return or}function ir(lr){this._p=lr,this._mSampleValues=Kt?new Float32Array(Ut):new Array(Ut),this._precomputed=!1,this.get=this.get.bind(this)}return ir.prototype={get:function(or){var cr=this._p[0],dr=this._p[1],ur=this._p[2],pr=this._p[3];return this._precomputed||this._precompute(),cr===dr&&ur===pr?or:or===0?0:or===1?1:er(this._getTForX(or),dr,pr)},_precompute:function(){var or=this._p[0],cr=this._p[1],dr=this._p[2],ur=this._p[3];this._precomputed=!0,(or!==cr||dr!==ur)&&this._calcSampleValues()},_calcSampleValues:function(){for(var or=this._p[0],cr=this._p[2],dr=0;dr<Ut;++dr)this._mSampleValues[dr]=er(dr*Ht,or,cr)},_getTForX:function(or){for(var cr=this._p[0],dr=this._p[2],ur=this._mSampleValues,pr=0,mr=1,jr=Ut-1;mr!==jr&&ur[mr]<=or;++mr)pr+=Ht;--mr;var Rr=(or-ur[mr])/(ur[mr+1]-ur[mr]),br=pr+Rr*Ht,_r=rr(br,cr,dr);return _r>=Tt?nr(or,br,cr,dr):_r===0?br:sr(or,pr,pr+Ht,cr,dr)}},et}(),pooling=function(){function et(dt){return dt.concat(createSizedArray(dt.length))}return{double:et}}(),poolFactory=function(){return function(et,dt,kt){var $t=0,Tt=et,Dt=createSizedArray(Tt),Ft={newElement:Ut,release:Ht};function Ut(){var Kt;return $t?($t-=1,Kt=Dt[$t]):Kt=dt(),Kt}function Ht(Kt){$t===Tt&&(Dt=pooling.double(Dt),Tt*=2),kt&&kt(Kt),Dt[$t]=Kt,$t+=1}return Ft}}(),bezierLengthPool=function(){function et(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,et)}(),segmentsLengthPool=function(){function et(){return{lengths:[],totalLength:0}}function dt(kt){var $t,Tt=kt.lengths.length;for($t=0;$t<Tt;$t+=1)bezierLengthPool.release(kt.lengths[$t]);kt.lengths.length=0}return poolFactory(8,et,dt)}();function bezFunction(){var et=Math;function dt(Zt,er,rr,sr,nr,ir){var lr=Zt*sr+er*nr+rr*ir-nr*sr-ir*Zt-rr*er;return lr>-.001&&lr<.001}function kt(Zt,er,rr,sr,nr,ir,lr,or,cr){if(rr===0&&ir===0&&cr===0)return dt(Zt,er,sr,nr,lr,or);var dr=et.sqrt(et.pow(sr-Zt,2)+et.pow(nr-er,2)+et.pow(ir-rr,2)),ur=et.sqrt(et.pow(lr-Zt,2)+et.pow(or-er,2)+et.pow(cr-rr,2)),pr=et.sqrt(et.pow(lr-sr,2)+et.pow(or-nr,2)+et.pow(cr-ir,2)),mr;return dr>ur?dr>pr?mr=dr-ur-pr:mr=pr-ur-dr:pr>ur?mr=pr-ur-dr:mr=ur-dr-pr,mr>-1e-4&&mr<1e-4}var $t=function(){return function(Zt,er,rr,sr){var nr=getDefaultCurveSegments(),ir,lr,or,cr,dr,ur=0,pr,mr=[],jr=[],Rr=bezierLengthPool.newElement();for(or=rr.length,ir=0;ir<nr;ir+=1){for(dr=ir/(nr-1),pr=0,lr=0;lr<or;lr+=1)cr=bmPow(1-dr,3)*Zt[lr]+3*bmPow(1-dr,2)*dr*rr[lr]+3*(1-dr)*bmPow(dr,2)*sr[lr]+bmPow(dr,3)*er[lr],mr[lr]=cr,jr[lr]!==null&&(pr+=bmPow(mr[lr]-jr[lr],2)),jr[lr]=mr[lr];pr&&(pr=bmSqrt(pr),ur+=pr),Rr.percents[ir]=dr,Rr.lengths[ir]=ur}return Rr.addedLength=ur,Rr}}();function Tt(Zt){var er=segmentsLengthPool.newElement(),rr=Zt.c,sr=Zt.v,nr=Zt.o,ir=Zt.i,lr,or=Zt._length,cr=er.lengths,dr=0;for(lr=0;lr<or-1;lr+=1)cr[lr]=$t(sr[lr],sr[lr+1],nr[lr],ir[lr+1]),dr+=cr[lr].addedLength;return rr&&or&&(cr[lr]=$t(sr[lr],sr[0],nr[lr],ir[0]),dr+=cr[lr].addedLength),er.totalLength=dr,er}function Dt(Zt){this.segmentLength=0,this.points=new Array(Zt)}function Ft(Zt,er){this.partialLength=Zt,this.point=er}var Ut=function(){var Zt={};return function(er,rr,sr,nr){var ir=(er[0]+"_"+er[1]+"_"+rr[0]+"_"+rr[1]+"_"+sr[0]+"_"+sr[1]+"_"+nr[0]+"_"+nr[1]).replace(/\./g,"p");if(!Zt[ir]){var lr=getDefaultCurveSegments(),or,cr,dr,ur,pr,mr=0,jr,Rr,br=null;er.length===2&&(er[0]!==rr[0]||er[1]!==rr[1])&&dt(er[0],er[1],rr[0],rr[1],er[0]+sr[0],er[1]+sr[1])&&dt(er[0],er[1],rr[0],rr[1],rr[0]+nr[0],rr[1]+nr[1])&&(lr=2);var _r=new Dt(lr);for(dr=sr.length,or=0;or<lr;or+=1){for(Rr=createSizedArray(dr),pr=or/(lr-1),jr=0,cr=0;cr<dr;cr+=1)ur=bmPow(1-pr,3)*er[cr]+3*bmPow(1-pr,2)*pr*(er[cr]+sr[cr])+3*(1-pr)*bmPow(pr,2)*(rr[cr]+nr[cr])+bmPow(pr,3)*rr[cr],Rr[cr]=ur,br!==null&&(jr+=bmPow(Rr[cr]-br[cr],2));jr=bmSqrt(jr),mr+=jr,_r.points[or]=new Ft(jr,Rr),br=Rr}_r.segmentLength=mr,Zt[ir]=_r}return Zt[ir]}}();function Ht(Zt,er){var rr=er.percents,sr=er.lengths,nr=rr.length,ir=bmFloor((nr-1)*Zt),lr=Zt*er.addedLength,or=0;if(ir===nr-1||ir===0||lr===sr[ir])return rr[ir];for(var cr=sr[ir]>lr?-1:1,dr=!0;dr;)if(sr[ir]<=lr&&sr[ir+1]>lr?(or=(lr-sr[ir])/(sr[ir+1]-sr[ir]),dr=!1):ir+=cr,ir<0||ir>=nr-1){if(ir===nr-1)return rr[ir];dr=!1}return rr[ir]+(rr[ir+1]-rr[ir])*or}function Kt(Zt,er,rr,sr,nr,ir){var lr=Ht(nr,ir),or=1-lr,cr=et.round((or*or*or*Zt[0]+(lr*or*or+or*lr*or+or*or*lr)*rr[0]+(lr*lr*or+or*lr*lr+lr*or*lr)*sr[0]+lr*lr*lr*er[0])*1e3)/1e3,dr=et.round((or*or*or*Zt[1]+(lr*or*or+or*lr*or+or*or*lr)*rr[1]+(lr*lr*or+or*lr*lr+lr*or*lr)*sr[1]+lr*lr*lr*er[1])*1e3)/1e3;return[cr,dr]}var Yt=createTypedArray("float32",8);function Jt(Zt,er,rr,sr,nr,ir,lr){nr<0?nr=0:nr>1&&(nr=1);var or=Ht(nr,lr);ir=ir>1?1:ir;var cr=Ht(ir,lr),dr,ur=Zt.length,pr=1-or,mr=1-cr,jr=pr*pr*pr,Rr=or*pr*pr*3,br=or*or*pr*3,_r=or*or*or,Mr=pr*pr*mr,Pr=or*pr*mr+pr*or*mr+pr*pr*cr,Or=or*or*mr+pr*or*cr+or*pr*cr,kr=or*or*cr,Tr=pr*mr*mr,xr=or*mr*mr+pr*cr*mr+pr*mr*cr,wr=or*cr*mr+pr*cr*cr+or*mr*cr,zr=or*cr*cr,Hr=mr*mr*mr,Yr=cr*mr*mr+mr*cr*mr+mr*mr*cr,rs=cr*cr*mr+mr*cr*cr+cr*mr*cr,as=cr*cr*cr;for(dr=0;dr<ur;dr+=1)Yt[dr*4]=et.round((jr*Zt[dr]+Rr*rr[dr]+br*sr[dr]+_r*er[dr])*1e3)/1e3,Yt[dr*4+1]=et.round((Mr*Zt[dr]+Pr*rr[dr]+Or*sr[dr]+kr*er[dr])*1e3)/1e3,Yt[dr*4+2]=et.round((Tr*Zt[dr]+xr*rr[dr]+wr*sr[dr]+zr*er[dr])*1e3)/1e3,Yt[dr*4+3]=et.round((Hr*Zt[dr]+Yr*rr[dr]+rs*sr[dr]+as*er[dr])*1e3)/1e3;return Yt}return{getSegmentsLength:Tt,getNewSegment:Jt,getPointInSegment:Kt,buildBezierData:Ut,pointOnLine2D:dt,pointOnLine3D:kt}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(et,dt){var kt=this.offsetTime,$t;this.propType==="multidimensional"&&($t=createTypedArray("float32",this.pv.length));for(var Tt=dt.lastIndex,Dt=Tt,Ft=this.keyframes.length-1,Ut=!0,Ht,Kt,Yt;Ut;){if(Ht=this.keyframes[Dt],Kt=this.keyframes[Dt+1],Dt===Ft-1&&et>=Kt.t-kt){Ht.h&&(Ht=Kt),Tt=0;break}if(Kt.t-kt>et){Tt=Dt;break}Dt<Ft-1?Dt+=1:(Tt=0,Ut=!1)}Yt=this.keyframesMetadata[Dt]||{};var Jt,Zt,er,rr,sr,nr,ir=Kt.t-kt,lr=Ht.t-kt,or;if(Ht.to){Yt.bezierData||(Yt.bezierData=bez.buildBezierData(Ht.s,Kt.s||Ht.e,Ht.to,Ht.ti));var cr=Yt.bezierData;if(et>=ir||et<lr){var dr=et>=ir?cr.points.length-1:0;for(Zt=cr.points[dr].point.length,Jt=0;Jt<Zt;Jt+=1)$t[Jt]=cr.points[dr].point[Jt]}else{Yt.__fnct?nr=Yt.__fnct:(nr=BezierFactory.getBezierEasing(Ht.o.x,Ht.o.y,Ht.i.x,Ht.i.y,Ht.n).get,Yt.__fnct=nr),er=nr((et-lr)/(ir-lr));var ur=cr.segmentLength*er,pr,mr=dt.lastFrame<et&&dt._lastKeyframeIndex===Dt?dt._lastAddedLength:0;for(sr=dt.lastFrame<et&&dt._lastKeyframeIndex===Dt?dt._lastPoint:0,Ut=!0,rr=cr.points.length;Ut;){if(mr+=cr.points[sr].partialLength,ur===0||er===0||sr===cr.points.length-1){for(Zt=cr.points[sr].point.length,Jt=0;Jt<Zt;Jt+=1)$t[Jt]=cr.points[sr].point[Jt];break}else if(ur>=mr&&ur<mr+cr.points[sr+1].partialLength){for(pr=(ur-mr)/cr.points[sr+1].partialLength,Zt=cr.points[sr].point.length,Jt=0;Jt<Zt;Jt+=1)$t[Jt]=cr.points[sr].point[Jt]+(cr.points[sr+1].point[Jt]-cr.points[sr].point[Jt])*pr;break}sr<rr-1?sr+=1:Ut=!1}dt._lastPoint=sr,dt._lastAddedLength=mr-cr.points[sr].partialLength,dt._lastKeyframeIndex=Dt}}else{var jr,Rr,br,_r,Mr;if(Ft=Ht.s.length,or=Kt.s||Ht.e,this.sh&&Ht.h!==1)if(et>=ir)$t[0]=or[0],$t[1]=or[1],$t[2]=or[2];else if(et<=lr)$t[0]=Ht.s[0],$t[1]=Ht.s[1],$t[2]=Ht.s[2];else{var Pr=createQuaternion(Ht.s),Or=createQuaternion(or),kr=(et-lr)/(ir-lr);quaternionToEuler($t,slerp(Pr,Or,kr))}else for(Dt=0;Dt<Ft;Dt+=1)Ht.h!==1&&(et>=ir?er=1:et<lr?er=0:(Ht.o.x.constructor===Array?(Yt.__fnct||(Yt.__fnct=[]),Yt.__fnct[Dt]?nr=Yt.__fnct[Dt]:(jr=Ht.o.x[Dt]===void 0?Ht.o.x[0]:Ht.o.x[Dt],Rr=Ht.o.y[Dt]===void 0?Ht.o.y[0]:Ht.o.y[Dt],br=Ht.i.x[Dt]===void 0?Ht.i.x[0]:Ht.i.x[Dt],_r=Ht.i.y[Dt]===void 0?Ht.i.y[0]:Ht.i.y[Dt],nr=BezierFactory.getBezierEasing(jr,Rr,br,_r).get,Yt.__fnct[Dt]=nr)):Yt.__fnct?nr=Yt.__fnct:(jr=Ht.o.x,Rr=Ht.o.y,br=Ht.i.x,_r=Ht.i.y,nr=BezierFactory.getBezierEasing(jr,Rr,br,_r).get,Ht.keyframeMetadata=nr),er=nr((et-lr)/(ir-lr)))),or=Kt.s||Ht.e,Mr=Ht.h===1?Ht.s[Dt]:Ht.s[Dt]+(or[Dt]-Ht.s[Dt])*er,this.propType==="multidimensional"?$t[Dt]=Mr:$t=Mr}return dt.lastIndex=Tt,$t}function slerp(et,dt,kt){var $t=[],Tt=et[0],Dt=et[1],Ft=et[2],Ut=et[3],Ht=dt[0],Kt=dt[1],Yt=dt[2],Jt=dt[3],Zt,er,rr,sr,nr;return er=Tt*Ht+Dt*Kt+Ft*Yt+Ut*Jt,er<0&&(er=-er,Ht=-Ht,Kt=-Kt,Yt=-Yt,Jt=-Jt),1-er>1e-6?(Zt=Math.acos(er),rr=Math.sin(Zt),sr=Math.sin((1-kt)*Zt)/rr,nr=Math.sin(kt*Zt)/rr):(sr=1-kt,nr=kt),$t[0]=sr*Tt+nr*Ht,$t[1]=sr*Dt+nr*Kt,$t[2]=sr*Ft+nr*Yt,$t[3]=sr*Ut+nr*Jt,$t}function quaternionToEuler(et,dt){var kt=dt[0],$t=dt[1],Tt=dt[2],Dt=dt[3],Ft=Math.atan2(2*$t*Dt-2*kt*Tt,1-2*$t*$t-2*Tt*Tt),Ut=Math.asin(2*kt*$t+2*Tt*Dt),Ht=Math.atan2(2*kt*Dt-2*$t*Tt,1-2*kt*kt-2*Tt*Tt);et[0]=Ft/degToRads,et[1]=Ut/degToRads,et[2]=Ht/degToRads}function createQuaternion(et){var dt=et[0]*degToRads,kt=et[1]*degToRads,$t=et[2]*degToRads,Tt=Math.cos(dt/2),Dt=Math.cos(kt/2),Ft=Math.cos($t/2),Ut=Math.sin(dt/2),Ht=Math.sin(kt/2),Kt=Math.sin($t/2),Yt=Tt*Dt*Ft-Ut*Ht*Kt,Jt=Ut*Ht*Ft+Tt*Dt*Kt,Zt=Ut*Dt*Ft+Tt*Ht*Kt,er=Tt*Ht*Ft-Ut*Dt*Kt;return[Jt,Zt,er,Yt]}function getValueAtCurrentTime(){var et=this.comp.renderedFrame-this.offsetTime,dt=this.keyframes[0].t-this.offsetTime,kt=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(et===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=kt&&et>=kt||this._caching.lastFrame<dt&&et<dt))){this._caching.lastFrame>=et&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var $t=this.interpolateValue(et,this._caching);this.pv=$t}return this._caching.lastFrame=et,this.pv}function setVValue(et){var dt;if(this.propType==="unidimensional")dt=et*this.mult,mathAbs(this.v-dt)>1e-5&&(this.v=dt,this._mdf=!0);else for(var kt=0,$t=this.v.length;kt<$t;)dt=et[kt]*this.mult,mathAbs(this.v[kt]-dt)>1e-5&&(this.v[kt]=dt,this._mdf=!0),kt+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var et,dt=this.effectsSequence.length,kt=this.kf?this.pv:this.data.k;for(et=0;et<dt;et+=1)kt=this.effectsSequence[et](kt);this.setVValue(kt),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(et){this.effectsSequence.push(et),this.container.addDynamicProperty(this)}function ValueProperty(et,dt,kt,$t){this.propType="unidimensional",this.mult=kt||1,this.data=dt,this.v=kt?dt.k*kt:dt.k,this.pv=dt.k,this._mdf=!1,this.elem=et,this.container=$t,this.comp=et.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(et,dt,kt,$t){this.propType="multidimensional",this.mult=kt||1,this.data=dt,this._mdf=!1,this.elem=et,this.container=$t,this.comp=et.comp,this.k=!1,this.kf=!1,this.frameId=-1;var Tt,Dt=dt.k.length;for(this.v=createTypedArray("float32",Dt),this.pv=createTypedArray("float32",Dt),this.vel=createTypedArray("float32",Dt),Tt=0;Tt<Dt;Tt+=1)this.v[Tt]=dt.k[Tt]*this.mult,this.pv[Tt]=dt.k[Tt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(et,dt,kt,$t){this.propType="unidimensional",this.keyframes=dt.k,this.keyframesMetadata=[],this.offsetTime=et.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=dt,this.mult=kt||1,this.elem=et,this.container=$t,this.comp=et.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(et,dt,kt,$t){this.propType="multidimensional";var Tt,Dt=dt.k.length,Ft,Ut,Ht,Kt;for(Tt=0;Tt<Dt-1;Tt+=1)dt.k[Tt].to&&dt.k[Tt].s&&dt.k[Tt+1]&&dt.k[Tt+1].s&&(Ft=dt.k[Tt].s,Ut=dt.k[Tt+1].s,Ht=dt.k[Tt].to,Kt=dt.k[Tt].ti,(Ft.length===2&&!(Ft[0]===Ut[0]&&Ft[1]===Ut[1])&&bez.pointOnLine2D(Ft[0],Ft[1],Ut[0],Ut[1],Ft[0]+Ht[0],Ft[1]+Ht[1])&&bez.pointOnLine2D(Ft[0],Ft[1],Ut[0],Ut[1],Ut[0]+Kt[0],Ut[1]+Kt[1])||Ft.length===3&&!(Ft[0]===Ut[0]&&Ft[1]===Ut[1]&&Ft[2]===Ut[2])&&bez.pointOnLine3D(Ft[0],Ft[1],Ft[2],Ut[0],Ut[1],Ut[2],Ft[0]+Ht[0],Ft[1]+Ht[1],Ft[2]+Ht[2])&&bez.pointOnLine3D(Ft[0],Ft[1],Ft[2],Ut[0],Ut[1],Ut[2],Ut[0]+Kt[0],Ut[1]+Kt[1],Ut[2]+Kt[2]))&&(dt.k[Tt].to=null,dt.k[Tt].ti=null),Ft[0]===Ut[0]&&Ft[1]===Ut[1]&&Ht[0]===0&&Ht[1]===0&&Kt[0]===0&&Kt[1]===0&&(Ft.length===2||Ft[2]===Ut[2]&&Ht[2]===0&&Kt[2]===0)&&(dt.k[Tt].to=null,dt.k[Tt].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=dt,this.keyframes=dt.k,this.keyframesMetadata=[],this.offsetTime=et.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=kt||1,this.elem=et,this.container=$t,this.comp=et.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Yt=dt.k[0].s.length;for(this.v=createTypedArray("float32",Yt),this.pv=createTypedArray("float32",Yt),Tt=0;Tt<Yt;Tt+=1)this.v[Tt]=initFrame,this.pv[Tt]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Yt)},this.addEffect=addEffect}var PropertyFactory=function(){function et(kt,$t,Tt,Dt,Ft){$t.sid&&($t=kt.globalData.slotManager.getProp($t));var Ut;if(!$t.k.length)Ut=new ValueProperty(kt,$t,Dt,Ft);else if(typeof $t.k[0]=="number")Ut=new MultiDimensionalProperty(kt,$t,Dt,Ft);else switch(Tt){case 0:Ut=new KeyframedValueProperty(kt,$t,Dt,Ft);break;case 1:Ut=new KeyframedMultidimensionalProperty(kt,$t,Dt,Ft);break}return Ut.effectsSequence.length&&Ft.addDynamicProperty(Ut),Ut}var dt={getProp:et};return dt}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(dt){this.dynamicProperties.indexOf(dt)===-1&&(this.dynamicProperties.push(dt),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var dt,kt=this.dynamicProperties.length;for(dt=0;dt<kt;dt+=1)this.dynamicProperties[dt].getValue(),this.dynamicProperties[dt]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(dt){this.container=dt,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function et(){return createTypedArray("float32",2)}return poolFactory(8,et)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(et,dt){this.c=et,this.setLength(dt);for(var kt=0;kt<dt;)this.v[kt]=pointPool.newElement(),this.o[kt]=pointPool.newElement(),this.i[kt]=pointPool.newElement(),kt+=1},ShapePath.prototype.setLength=function(et){for(;this._maxLength<et;)this.doubleArrayLength();this._length=et},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(et,dt,kt,$t,Tt){var Dt;switch(this._length=Math.max(this._length,$t+1),this._length>=this._maxLength&&this.doubleArrayLength(),kt){case"v":Dt=this.v;break;case"i":Dt=this.i;break;case"o":Dt=this.o;break;default:Dt=[];break}(!Dt[$t]||Dt[$t]&&!Tt)&&(Dt[$t]=pointPool.newElement()),Dt[$t][0]=et,Dt[$t][1]=dt},ShapePath.prototype.setTripleAt=function(et,dt,kt,$t,Tt,Dt,Ft,Ut){this.setXYAt(et,dt,"v",Ft,Ut),this.setXYAt(kt,$t,"o",Ft,Ut),this.setXYAt(Tt,Dt,"i",Ft,Ut)},ShapePath.prototype.reverse=function(){var et=new ShapePath;et.setPathData(this.c,this._length);var dt=this.v,kt=this.o,$t=this.i,Tt=0;this.c&&(et.setTripleAt(dt[0][0],dt[0][1],$t[0][0],$t[0][1],kt[0][0],kt[0][1],0,!1),Tt=1);var Dt=this._length-1,Ft=this._length,Ut;for(Ut=Tt;Ut<Ft;Ut+=1)et.setTripleAt(dt[Dt][0],dt[Dt][1],$t[Dt][0],$t[Dt][1],kt[Dt][0],kt[Dt][1],Ut,!1),Dt-=1;return et},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function et(){return new ShapePath}function dt(Tt){var Dt=Tt._length,Ft;for(Ft=0;Ft<Dt;Ft+=1)pointPool.release(Tt.v[Ft]),pointPool.release(Tt.i[Ft]),pointPool.release(Tt.o[Ft]),Tt.v[Ft]=null,Tt.i[Ft]=null,Tt.o[Ft]=null;Tt._length=0,Tt.c=!1}function kt(Tt){var Dt=$t.newElement(),Ft,Ut=Tt._length===void 0?Tt.v.length:Tt._length;for(Dt.setLength(Ut),Dt.c=Tt.c,Ft=0;Ft<Ut;Ft+=1)Dt.setTripleAt(Tt.v[Ft][0],Tt.v[Ft][1],Tt.o[Ft][0],Tt.o[Ft][1],Tt.i[Ft][0],Tt.i[Ft][1],Ft);return Dt}var $t=poolFactory(4,et,dt);return $t.clone=kt,$t}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(et){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=et,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var et;for(et=0;et<this._length;et+=1)shapePool.release(this.shapes[et]);this._length=0};var shapeCollectionPool=function(){var et={newShapeCollection:Tt,release:Dt},dt=0,kt=4,$t=createSizedArray(kt);function Tt(){var Ft;return dt?(dt-=1,Ft=$t[dt]):Ft=new ShapeCollection,Ft}function Dt(Ft){var Ut,Ht=Ft._length;for(Ut=0;Ut<Ht;Ut+=1)shapePool.release(Ft.shapes[Ut]);Ft._length=0,dt===kt&&($t=pooling.double($t),kt*=2),$t[dt]=Ft,dt+=1}return et}(),ShapePropertyFactory=function(){var et=-999999;function dt(ir,lr,or){var cr=or.lastIndex,dr,ur,pr,mr,jr,Rr,br,_r,Mr,Pr=this.keyframes;if(ir<Pr[0].t-this.offsetTime)dr=Pr[0].s[0],pr=!0,cr=0;else if(ir>=Pr[Pr.length-1].t-this.offsetTime)dr=Pr[Pr.length-1].s?Pr[Pr.length-1].s[0]:Pr[Pr.length-2].e[0],pr=!0;else{for(var Or=cr,kr=Pr.length-1,Tr=!0,xr,wr,zr;Tr&&(xr=Pr[Or],wr=Pr[Or+1],!(wr.t-this.offsetTime>ir));)Or<kr-1?Or+=1:Tr=!1;if(zr=this.keyframesMetadata[Or]||{},pr=xr.h===1,cr=Or,!pr){if(ir>=wr.t-this.offsetTime)_r=1;else if(ir<xr.t-this.offsetTime)_r=0;else{var Hr;zr.__fnct?Hr=zr.__fnct:(Hr=BezierFactory.getBezierEasing(xr.o.x,xr.o.y,xr.i.x,xr.i.y).get,zr.__fnct=Hr),_r=Hr((ir-(xr.t-this.offsetTime))/(wr.t-this.offsetTime-(xr.t-this.offsetTime)))}ur=wr.s?wr.s[0]:xr.e[0]}dr=xr.s[0]}for(Rr=lr._length,br=dr.i[0].length,or.lastIndex=cr,mr=0;mr<Rr;mr+=1)for(jr=0;jr<br;jr+=1)Mr=pr?dr.i[mr][jr]:dr.i[mr][jr]+(ur.i[mr][jr]-dr.i[mr][jr])*_r,lr.i[mr][jr]=Mr,Mr=pr?dr.o[mr][jr]:dr.o[mr][jr]+(ur.o[mr][jr]-dr.o[mr][jr])*_r,lr.o[mr][jr]=Mr,Mr=pr?dr.v[mr][jr]:dr.v[mr][jr]+(ur.v[mr][jr]-dr.v[mr][jr])*_r,lr.v[mr][jr]=Mr}function kt(){var ir=this.comp.renderedFrame-this.offsetTime,lr=this.keyframes[0].t-this.offsetTime,or=this.keyframes[this.keyframes.length-1].t-this.offsetTime,cr=this._caching.lastFrame;return cr!==et&&(cr<lr&&ir<lr||cr>or&&ir>or)||(this._caching.lastIndex=cr<ir?this._caching.lastIndex:0,this.interpolateShape(ir,this.pv,this._caching)),this._caching.lastFrame=ir,this.pv}function $t(){this.paths=this.localShapeCollection}function Tt(ir,lr){if(ir._length!==lr._length||ir.c!==lr.c)return!1;var or,cr=ir._length;for(or=0;or<cr;or+=1)if(ir.v[or][0]!==lr.v[or][0]||ir.v[or][1]!==lr.v[or][1]||ir.o[or][0]!==lr.o[or][0]||ir.o[or][1]!==lr.o[or][1]||ir.i[or][0]!==lr.i[or][0]||ir.i[or][1]!==lr.i[or][1])return!1;return!0}function Dt(ir){Tt(this.v,ir)||(this.v=shapePool.clone(ir),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function Ft(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var ir;this.kf?ir=this.pv:this.data.ks?ir=this.data.ks.k:ir=this.data.pt.k;var lr,or=this.effectsSequence.length;for(lr=0;lr<or;lr+=1)ir=this.effectsSequence[lr](ir);this.setVValue(ir),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function Ut(ir,lr,or){this.propType="shape",this.comp=ir.comp,this.container=ir,this.elem=ir,this.data=lr,this.k=!1,this.kf=!1,this._mdf=!1;var cr=or===3?lr.pt.k:lr.ks.k;this.v=shapePool.clone(cr),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=$t,this.effectsSequence=[]}function Ht(ir){this.effectsSequence.push(ir),this.container.addDynamicProperty(this)}Ut.prototype.interpolateShape=dt,Ut.prototype.getValue=Ft,Ut.prototype.setVValue=Dt,Ut.prototype.addEffect=Ht;function Kt(ir,lr,or){this.propType="shape",this.comp=ir.comp,this.elem=ir,this.container=ir,this.offsetTime=ir.data.st,this.keyframes=or===3?lr.pt.k:lr.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var cr=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,cr),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=et,this.reset=$t,this._caching={lastFrame:et,lastIndex:0},this.effectsSequence=[kt.bind(this)]}Kt.prototype.getValue=Ft,Kt.prototype.interpolateShape=dt,Kt.prototype.setVValue=Dt,Kt.prototype.addEffect=Ht;var Yt=function(){var ir=roundCorner;function lr(or,cr){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=cr.d,this.elem=or,this.comp=or.comp,this.frameId=-1,this.initDynamicPropertyContainer(or),this.p=PropertyFactory.getProp(or,cr.p,1,0,this),this.s=PropertyFactory.getProp(or,cr.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return lr.prototype={reset:$t,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var cr=this.p.v[0],dr=this.p.v[1],ur=this.s.v[0]/2,pr=this.s.v[1]/2,mr=this.d!==3,jr=this.v;jr.v[0][0]=cr,jr.v[0][1]=dr-pr,jr.v[1][0]=mr?cr+ur:cr-ur,jr.v[1][1]=dr,jr.v[2][0]=cr,jr.v[2][1]=dr+pr,jr.v[3][0]=mr?cr-ur:cr+ur,jr.v[3][1]=dr,jr.i[0][0]=mr?cr-ur*ir:cr+ur*ir,jr.i[0][1]=dr-pr,jr.i[1][0]=mr?cr+ur:cr-ur,jr.i[1][1]=dr-pr*ir,jr.i[2][0]=mr?cr+ur*ir:cr-ur*ir,jr.i[2][1]=dr+pr,jr.i[3][0]=mr?cr-ur:cr+ur,jr.i[3][1]=dr+pr*ir,jr.o[0][0]=mr?cr+ur*ir:cr-ur*ir,jr.o[0][1]=dr-pr,jr.o[1][0]=mr?cr+ur:cr-ur,jr.o[1][1]=dr+pr*ir,jr.o[2][0]=mr?cr-ur*ir:cr+ur*ir,jr.o[2][1]=dr+pr,jr.o[3][0]=mr?cr-ur:cr+ur,jr.o[3][1]=dr-pr*ir}},extendPrototype([DynamicPropertyContainer],lr),lr}(),Jt=function(){function ir(lr,or){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=lr,this.comp=lr.comp,this.data=or,this.frameId=-1,this.d=or.d,this.initDynamicPropertyContainer(lr),or.sy===1?(this.ir=PropertyFactory.getProp(lr,or.ir,0,0,this),this.is=PropertyFactory.getProp(lr,or.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(lr,or.pt,0,0,this),this.p=PropertyFactory.getProp(lr,or.p,1,0,this),this.r=PropertyFactory.getProp(lr,or.r,0,degToRads,this),this.or=PropertyFactory.getProp(lr,or.or,0,0,this),this.os=PropertyFactory.getProp(lr,or.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return ir.prototype={reset:$t,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var or=Math.floor(this.pt.v)*2,cr=Math.PI*2/or,dr=!0,ur=this.or.v,pr=this.ir.v,mr=this.os.v,jr=this.is.v,Rr=2*Math.PI*ur/(or*2),br=2*Math.PI*pr/(or*2),_r,Mr,Pr,Or,kr=-Math.PI/2;kr+=this.r.v;var Tr=this.data.d===3?-1:1;for(this.v._length=0,_r=0;_r<or;_r+=1){Mr=dr?ur:pr,Pr=dr?mr:jr,Or=dr?Rr:br;var xr=Mr*Math.cos(kr),wr=Mr*Math.sin(kr),zr=xr===0&&wr===0?0:wr/Math.sqrt(xr*xr+wr*wr),Hr=xr===0&&wr===0?0:-xr/Math.sqrt(xr*xr+wr*wr);xr+=+this.p.v[0],wr+=+this.p.v[1],this.v.setTripleAt(xr,wr,xr-zr*Or*Pr*Tr,wr-Hr*Or*Pr*Tr,xr+zr*Or*Pr*Tr,wr+Hr*Or*Pr*Tr,_r,!0),dr=!dr,kr+=cr*Tr}},convertPolygonToPath:function(){var or=Math.floor(this.pt.v),cr=Math.PI*2/or,dr=this.or.v,ur=this.os.v,pr=2*Math.PI*dr/(or*4),mr,jr=-Math.PI*.5,Rr=this.data.d===3?-1:1;for(jr+=this.r.v,this.v._length=0,mr=0;mr<or;mr+=1){var br=dr*Math.cos(jr),_r=dr*Math.sin(jr),Mr=br===0&&_r===0?0:_r/Math.sqrt(br*br+_r*_r),Pr=br===0&&_r===0?0:-br/Math.sqrt(br*br+_r*_r);br+=+this.p.v[0],_r+=+this.p.v[1],this.v.setTripleAt(br,_r,br-Mr*pr*ur*Rr,_r-Pr*pr*ur*Rr,br+Mr*pr*ur*Rr,_r+Pr*pr*ur*Rr,mr,!0),jr+=cr*Rr}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],ir),ir}(),Zt=function(){function ir(lr,or){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=lr,this.comp=lr.comp,this.frameId=-1,this.d=or.d,this.initDynamicPropertyContainer(lr),this.p=PropertyFactory.getProp(lr,or.p,1,0,this),this.s=PropertyFactory.getProp(lr,or.s,1,0,this),this.r=PropertyFactory.getProp(lr,or.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return ir.prototype={convertRectToPath:function(){var or=this.p.v[0],cr=this.p.v[1],dr=this.s.v[0]/2,ur=this.s.v[1]/2,pr=bmMin(dr,ur,this.r.v),mr=pr*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(or+dr,cr-ur+pr,or+dr,cr-ur+pr,or+dr,cr-ur+mr,0,!0),this.v.setTripleAt(or+dr,cr+ur-pr,or+dr,cr+ur-mr,or+dr,cr+ur-pr,1,!0),pr!==0?(this.v.setTripleAt(or+dr-pr,cr+ur,or+dr-pr,cr+ur,or+dr-mr,cr+ur,2,!0),this.v.setTripleAt(or-dr+pr,cr+ur,or-dr+mr,cr+ur,or-dr+pr,cr+ur,3,!0),this.v.setTripleAt(or-dr,cr+ur-pr,or-dr,cr+ur-pr,or-dr,cr+ur-mr,4,!0),this.v.setTripleAt(or-dr,cr-ur+pr,or-dr,cr-ur+mr,or-dr,cr-ur+pr,5,!0),this.v.setTripleAt(or-dr+pr,cr-ur,or-dr+pr,cr-ur,or-dr+mr,cr-ur,6,!0),this.v.setTripleAt(or+dr-pr,cr-ur,or+dr-mr,cr-ur,or+dr-pr,cr-ur,7,!0)):(this.v.setTripleAt(or-dr,cr+ur,or-dr+mr,cr+ur,or-dr,cr+ur,2),this.v.setTripleAt(or-dr,cr-ur,or-dr,cr-ur+mr,or-dr,cr-ur,3))):(this.v.setTripleAt(or+dr,cr-ur+pr,or+dr,cr-ur+mr,or+dr,cr-ur+pr,0,!0),pr!==0?(this.v.setTripleAt(or+dr-pr,cr-ur,or+dr-pr,cr-ur,or+dr-mr,cr-ur,1,!0),this.v.setTripleAt(or-dr+pr,cr-ur,or-dr+mr,cr-ur,or-dr+pr,cr-ur,2,!0),this.v.setTripleAt(or-dr,cr-ur+pr,or-dr,cr-ur+pr,or-dr,cr-ur+mr,3,!0),this.v.setTripleAt(or-dr,cr+ur-pr,or-dr,cr+ur-mr,or-dr,cr+ur-pr,4,!0),this.v.setTripleAt(or-dr+pr,cr+ur,or-dr+pr,cr+ur,or-dr+mr,cr+ur,5,!0),this.v.setTripleAt(or+dr-pr,cr+ur,or+dr-mr,cr+ur,or+dr-pr,cr+ur,6,!0),this.v.setTripleAt(or+dr,cr+ur-pr,or+dr,cr+ur-pr,or+dr,cr+ur-mr,7,!0)):(this.v.setTripleAt(or-dr,cr-ur,or-dr+mr,cr-ur,or-dr,cr-ur,1,!0),this.v.setTripleAt(or-dr,cr+ur,or-dr,cr+ur-mr,or-dr,cr+ur,2,!0),this.v.setTripleAt(or+dr,cr+ur,or+dr-mr,cr+ur,or+dr,cr+ur,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:$t},extendPrototype([DynamicPropertyContainer],ir),ir}();function er(ir,lr,or){var cr;if(or===3||or===4){var dr=or===3?lr.pt:lr.ks,ur=dr.k;ur.length?cr=new Kt(ir,lr,or):cr=new Ut(ir,lr,or)}else or===5?cr=new Zt(ir,lr):or===6?cr=new Yt(ir,lr):or===7&&(cr=new Jt(ir,lr));return cr.k&&ir.addDynamicProperty(cr),cr}function rr(){return Ut}function sr(){return Kt}var nr={};return nr.getShapeProp=er,nr.getConstructorFunction=rr,nr.getKeyframedConstructorFunction=sr,nr}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var et=Math.cos,dt=Math.sin,kt=Math.tan,$t=Math.round;function Tt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Dt(xr){if(xr===0)return this;var wr=et(xr),zr=dt(xr);return this._t(wr,-zr,0,0,zr,wr,0,0,0,0,1,0,0,0,0,1)}function Ft(xr){if(xr===0)return this;var wr=et(xr),zr=dt(xr);return this._t(1,0,0,0,0,wr,-zr,0,0,zr,wr,0,0,0,0,1)}function Ut(xr){if(xr===0)return this;var wr=et(xr),zr=dt(xr);return this._t(wr,0,zr,0,0,1,0,0,-zr,0,wr,0,0,0,0,1)}function Ht(xr){if(xr===0)return this;var wr=et(xr),zr=dt(xr);return this._t(wr,-zr,0,0,zr,wr,0,0,0,0,1,0,0,0,0,1)}function Kt(xr,wr){return this._t(1,wr,xr,1,0,0)}function Yt(xr,wr){return this.shear(kt(xr),kt(wr))}function Jt(xr,wr){var zr=et(wr),Hr=dt(wr);return this._t(zr,Hr,0,0,-Hr,zr,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,kt(xr),1,0,0,0,0,1,0,0,0,0,1)._t(zr,-Hr,0,0,Hr,zr,0,0,0,0,1,0,0,0,0,1)}function Zt(xr,wr,zr){return!zr&&zr!==0&&(zr=1),xr===1&&wr===1&&zr===1?this:this._t(xr,0,0,0,0,wr,0,0,0,0,zr,0,0,0,0,1)}function er(xr,wr,zr,Hr,Yr,rs,as,es,Xr,Wr,cs,ns,us,fs,ss,ps){return this.props[0]=xr,this.props[1]=wr,this.props[2]=zr,this.props[3]=Hr,this.props[4]=Yr,this.props[5]=rs,this.props[6]=as,this.props[7]=es,this.props[8]=Xr,this.props[9]=Wr,this.props[10]=cs,this.props[11]=ns,this.props[12]=us,this.props[13]=fs,this.props[14]=ss,this.props[15]=ps,this}function rr(xr,wr,zr){return zr=zr||0,xr!==0||wr!==0||zr!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,xr,wr,zr,1):this}function sr(xr,wr,zr,Hr,Yr,rs,as,es,Xr,Wr,cs,ns,us,fs,ss,ps){var ls=this.props;if(xr===1&&wr===0&&zr===0&&Hr===0&&Yr===0&&rs===1&&as===0&&es===0&&Xr===0&&Wr===0&&cs===1&&ns===0)return ls[12]=ls[12]*xr+ls[15]*us,ls[13]=ls[13]*rs+ls[15]*fs,ls[14]=ls[14]*cs+ls[15]*ss,ls[15]*=ps,this._identityCalculated=!1,this;var js=ls[0],$s=ls[1],Ds=ls[2],Ts=ls[3],As=ls[4],_s=ls[5],Ms=ls[6],Vs=ls[7],Gs=ls[8],Ws=ls[9],Xs=ls[10],Qs=ls[11],Bs=ls[12],qs=ls[13],Ks=ls[14],yn=ls[15];return ls[0]=js*xr+$s*Yr+Ds*Xr+Ts*us,ls[1]=js*wr+$s*rs+Ds*Wr+Ts*fs,ls[2]=js*zr+$s*as+Ds*cs+Ts*ss,ls[3]=js*Hr+$s*es+Ds*ns+Ts*ps,ls[4]=As*xr+_s*Yr+Ms*Xr+Vs*us,ls[5]=As*wr+_s*rs+Ms*Wr+Vs*fs,ls[6]=As*zr+_s*as+Ms*cs+Vs*ss,ls[7]=As*Hr+_s*es+Ms*ns+Vs*ps,ls[8]=Gs*xr+Ws*Yr+Xs*Xr+Qs*us,ls[9]=Gs*wr+Ws*rs+Xs*Wr+Qs*fs,ls[10]=Gs*zr+Ws*as+Xs*cs+Qs*ss,ls[11]=Gs*Hr+Ws*es+Xs*ns+Qs*ps,ls[12]=Bs*xr+qs*Yr+Ks*Xr+yn*us,ls[13]=Bs*wr+qs*rs+Ks*Wr+yn*fs,ls[14]=Bs*zr+qs*as+Ks*cs+yn*ss,ls[15]=Bs*Hr+qs*es+Ks*ns+yn*ps,this._identityCalculated=!1,this}function nr(xr){var wr=xr.props;return this.transform(wr[0],wr[1],wr[2],wr[3],wr[4],wr[5],wr[6],wr[7],wr[8],wr[9],wr[10],wr[11],wr[12],wr[13],wr[14],wr[15])}function ir(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function lr(xr){for(var wr=0;wr<16;){if(xr.props[wr]!==this.props[wr])return!1;wr+=1}return!0}function or(xr){var wr;for(wr=0;wr<16;wr+=1)xr.props[wr]=this.props[wr];return xr}function cr(xr){var wr;for(wr=0;wr<16;wr+=1)this.props[wr]=xr[wr]}function dr(xr,wr,zr){return{x:xr*this.props[0]+wr*this.props[4]+zr*this.props[8]+this.props[12],y:xr*this.props[1]+wr*this.props[5]+zr*this.props[9]+this.props[13],z:xr*this.props[2]+wr*this.props[6]+zr*this.props[10]+this.props[14]}}function ur(xr,wr,zr){return xr*this.props[0]+wr*this.props[4]+zr*this.props[8]+this.props[12]}function pr(xr,wr,zr){return xr*this.props[1]+wr*this.props[5]+zr*this.props[9]+this.props[13]}function mr(xr,wr,zr){return xr*this.props[2]+wr*this.props[6]+zr*this.props[10]+this.props[14]}function jr(){var xr=this.props[0]*this.props[5]-this.props[1]*this.props[4],wr=this.props[5]/xr,zr=-this.props[1]/xr,Hr=-this.props[4]/xr,Yr=this.props[0]/xr,rs=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/xr,as=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/xr,es=new Matrix;return es.props[0]=wr,es.props[1]=zr,es.props[4]=Hr,es.props[5]=Yr,es.props[12]=rs,es.props[13]=as,es}function Rr(xr){var wr=this.getInverseMatrix();return wr.applyToPointArray(xr[0],xr[1],xr[2]||0)}function br(xr){var wr,zr=xr.length,Hr=[];for(wr=0;wr<zr;wr+=1)Hr[wr]=Rr(xr[wr]);return Hr}function _r(xr,wr,zr){var Hr=createTypedArray("float32",6);if(this.isIdentity())Hr[0]=xr[0],Hr[1]=xr[1],Hr[2]=wr[0],Hr[3]=wr[1],Hr[4]=zr[0],Hr[5]=zr[1];else{var Yr=this.props[0],rs=this.props[1],as=this.props[4],es=this.props[5],Xr=this.props[12],Wr=this.props[13];Hr[0]=xr[0]*Yr+xr[1]*as+Xr,Hr[1]=xr[0]*rs+xr[1]*es+Wr,Hr[2]=wr[0]*Yr+wr[1]*as+Xr,Hr[3]=wr[0]*rs+wr[1]*es+Wr,Hr[4]=zr[0]*Yr+zr[1]*as+Xr,Hr[5]=zr[0]*rs+zr[1]*es+Wr}return Hr}function Mr(xr,wr,zr){var Hr;return this.isIdentity()?Hr=[xr,wr,zr]:Hr=[xr*this.props[0]+wr*this.props[4]+zr*this.props[8]+this.props[12],xr*this.props[1]+wr*this.props[5]+zr*this.props[9]+this.props[13],xr*this.props[2]+wr*this.props[6]+zr*this.props[10]+this.props[14]],Hr}function Pr(xr,wr){if(this.isIdentity())return xr+","+wr;var zr=this.props;return Math.round((xr*zr[0]+wr*zr[4]+zr[12])*100)/100+","+Math.round((xr*zr[1]+wr*zr[5]+zr[13])*100)/100}function Or(){for(var xr=0,wr=this.props,zr="matrix3d(",Hr=1e4;xr<16;)zr+=$t(wr[xr]*Hr)/Hr,zr+=xr===15?")":",",xr+=1;return zr}function kr(xr){var wr=1e4;return xr<1e-6&&xr>0||xr>-1e-6&&xr<0?$t(xr*wr)/wr:xr}function Tr(){var xr=this.props,wr=kr(xr[0]),zr=kr(xr[1]),Hr=kr(xr[4]),Yr=kr(xr[5]),rs=kr(xr[12]),as=kr(xr[13]);return"matrix("+wr+","+zr+","+Hr+","+Yr+","+rs+","+as+")"}return function(){this.reset=Tt,this.rotate=Dt,this.rotateX=Ft,this.rotateY=Ut,this.rotateZ=Ht,this.skew=Yt,this.skewFromAxis=Jt,this.shear=Kt,this.scale=Zt,this.setTransform=er,this.translate=rr,this.transform=sr,this.multiply=nr,this.applyToPoint=dr,this.applyToX=ur,this.applyToY=pr,this.applyToZ=mr,this.applyToPointArray=Mr,this.applyToTriplePoints=_r,this.applyToPointStringified=Pr,this.toCSS=Or,this.to2dCSS=Tr,this.clone=or,this.cloneFromProps=cr,this.equals=lr,this.inversePoints=br,this.inversePoint=Rr,this.getInverseMatrix=jr,this._t=this.transform,this.isIdentity=ir,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(kt){return typeof kt}:_typeof$3=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof$3(et)}var lottie={};function setLocation(et){setLocationHref(et)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(et){setSubframeEnabled(et)}function setPrefix(et){setIdPrefix(et)}function loadAnimation(et){return animationManager.loadAnimation(et)}function setQuality(et){if(typeof et=="string")switch(et){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(et)&&et>1&&setDefaultCurveSegments(et)}function inBrowser(){return typeof navigator<"u"}function installPlugin(et,dt){et==="expressions"&&setExpressionsPlugin(dt)}function getFactory(et){switch(et){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(et){for(var dt=queryString.split("&"),kt=0;kt<dt.length;kt+=1){var $t=dt[kt].split("=");if(decodeURIComponent($t[0])==et)return decodeURIComponent($t[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(et){}var ShapeModifiers=function(){var et={},dt={};et.registerModifier=kt,et.getModifier=$t;function kt(Tt,Dt){dt[Tt]||(dt[Tt]=Dt)}function $t(Tt,Dt,Ft){return new dt[Tt](Dt,Ft)}return et}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(et){if(!this.closed){et.sh.container.addDynamicProperty(et.sh);var dt={shape:et.sh,data:et,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(dt),this.addShapeToModifier(dt),this._isAnimated&&et.setAsAnimated()}},ShapeModifier.prototype.init=function(et,dt){this.shapes=[],this.elem=et,this.initDynamicPropertyContainer(et),this.initModifierProperties(et,dt),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(et,dt){this.s=PropertyFactory.getProp(et,dt.s,0,.01,this),this.e=PropertyFactory.getProp(et,dt.e,0,.01,this),this.o=PropertyFactory.getProp(et,dt.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=dt.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(et){et.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(et,dt,kt,$t,Tt){var Dt=[];dt<=1?Dt.push({s:et,e:dt}):et>=1?Dt.push({s:et-1,e:dt-1}):(Dt.push({s:et,e:1}),Dt.push({s:0,e:dt-1}));var Ft=[],Ut,Ht=Dt.length,Kt;for(Ut=0;Ut<Ht;Ut+=1)if(Kt=Dt[Ut],!(Kt.e*Tt<$t||Kt.s*Tt>$t+kt)){var Yt,Jt;Kt.s*Tt<=$t?Yt=0:Yt=(Kt.s*Tt-$t)/kt,Kt.e*Tt>=$t+kt?Jt=1:Jt=(Kt.e*Tt-$t)/kt,Ft.push([Yt,Jt])}return Ft.length||Ft.push([0,0]),Ft},TrimModifier.prototype.releasePathsData=function(et){var dt,kt=et.length;for(dt=0;dt<kt;dt+=1)segmentsLengthPool.release(et[dt]);return et.length=0,et},TrimModifier.prototype.processShapes=function(et){var dt,kt;if(this._mdf||et){var $t=this.o.v%360/360;if($t<0&&($t+=1),this.s.v>1?dt=1+$t:this.s.v<0?dt=0+$t:dt=this.s.v+$t,this.e.v>1?kt=1+$t:this.e.v<0?kt=0+$t:kt=this.e.v+$t,dt>kt){var Tt=dt;dt=kt,kt=Tt}dt=Math.round(dt*1e4)*1e-4,kt=Math.round(kt*1e4)*1e-4,this.sValue=dt,this.eValue=kt}else dt=this.sValue,kt=this.eValue;var Dt,Ft,Ut=this.shapes.length,Ht,Kt,Yt,Jt,Zt,er=0;if(kt===dt)for(Ft=0;Ft<Ut;Ft+=1)this.shapes[Ft].localShapeCollection.releaseShapes(),this.shapes[Ft].shape._mdf=!0,this.shapes[Ft].shape.paths=this.shapes[Ft].localShapeCollection,this._mdf&&(this.shapes[Ft].pathsData.length=0);else if(kt===1&&dt===0||kt===0&&dt===1){if(this._mdf)for(Ft=0;Ft<Ut;Ft+=1)this.shapes[Ft].pathsData.length=0,this.shapes[Ft].shape._mdf=!0}else{var rr=[],sr,nr;for(Ft=0;Ft<Ut;Ft+=1)if(sr=this.shapes[Ft],!sr.shape._mdf&&!this._mdf&&!et&&this.m!==2)sr.shape.paths=sr.localShapeCollection;else{if(Dt=sr.shape.paths,Kt=Dt._length,Zt=0,!sr.shape._mdf&&sr.pathsData.length)Zt=sr.totalShapeLength;else{for(Yt=this.releasePathsData(sr.pathsData),Ht=0;Ht<Kt;Ht+=1)Jt=bez.getSegmentsLength(Dt.shapes[Ht]),Yt.push(Jt),Zt+=Jt.totalLength;sr.totalShapeLength=Zt,sr.pathsData=Yt}er+=Zt,sr.shape._mdf=!0}var ir=dt,lr=kt,or=0,cr;for(Ft=Ut-1;Ft>=0;Ft-=1)if(sr=this.shapes[Ft],sr.shape._mdf){for(nr=sr.localShapeCollection,nr.releaseShapes(),this.m===2&&Ut>1?(cr=this.calculateShapeEdges(dt,kt,sr.totalShapeLength,or,er),or+=sr.totalShapeLength):cr=[[ir,lr]],Kt=cr.length,Ht=0;Ht<Kt;Ht+=1){ir=cr[Ht][0],lr=cr[Ht][1],rr.length=0,lr<=1?rr.push({s:sr.totalShapeLength*ir,e:sr.totalShapeLength*lr}):ir>=1?rr.push({s:sr.totalShapeLength*(ir-1),e:sr.totalShapeLength*(lr-1)}):(rr.push({s:sr.totalShapeLength*ir,e:sr.totalShapeLength}),rr.push({s:0,e:sr.totalShapeLength*(lr-1)}));var dr=this.addShapes(sr,rr[0]);if(rr[0].s!==rr[0].e){if(rr.length>1){var ur=sr.shape.paths.shapes[sr.shape.paths._length-1];if(ur.c){var pr=dr.pop();this.addPaths(dr,nr),dr=this.addShapes(sr,rr[1],pr)}else this.addPaths(dr,nr),dr=this.addShapes(sr,rr[1])}this.addPaths(dr,nr)}}sr.shape.paths=nr}}},TrimModifier.prototype.addPaths=function(et,dt){var kt,$t=et.length;for(kt=0;kt<$t;kt+=1)dt.addShape(et[kt])},TrimModifier.prototype.addSegment=function(et,dt,kt,$t,Tt,Dt,Ft){Tt.setXYAt(dt[0],dt[1],"o",Dt),Tt.setXYAt(kt[0],kt[1],"i",Dt+1),Ft&&Tt.setXYAt(et[0],et[1],"v",Dt),Tt.setXYAt($t[0],$t[1],"v",Dt+1)},TrimModifier.prototype.addSegmentFromArray=function(et,dt,kt,$t){dt.setXYAt(et[1],et[5],"o",kt),dt.setXYAt(et[2],et[6],"i",kt+1),$t&&dt.setXYAt(et[0],et[4],"v",kt),dt.setXYAt(et[3],et[7],"v",kt+1)},TrimModifier.prototype.addShapes=function(et,dt,kt){var $t=et.pathsData,Tt=et.shape.paths.shapes,Dt,Ft=et.shape.paths._length,Ut,Ht,Kt=0,Yt,Jt,Zt,er,rr=[],sr,nr=!0;for(kt?(Jt=kt._length,sr=kt._length):(kt=shapePool.newElement(),Jt=0,sr=0),rr.push(kt),Dt=0;Dt<Ft;Dt+=1){for(Zt=$t[Dt].lengths,kt.c=Tt[Dt].c,Ht=Tt[Dt].c?Zt.length:Zt.length+1,Ut=1;Ut<Ht;Ut+=1)if(Yt=Zt[Ut-1],Kt+Yt.addedLength<dt.s)Kt+=Yt.addedLength,kt.c=!1;else if(Kt>dt.e){kt.c=!1;break}else dt.s<=Kt&&dt.e>=Kt+Yt.addedLength?(this.addSegment(Tt[Dt].v[Ut-1],Tt[Dt].o[Ut-1],Tt[Dt].i[Ut],Tt[Dt].v[Ut],kt,Jt,nr),nr=!1):(er=bez.getNewSegment(Tt[Dt].v[Ut-1],Tt[Dt].v[Ut],Tt[Dt].o[Ut-1],Tt[Dt].i[Ut],(dt.s-Kt)/Yt.addedLength,(dt.e-Kt)/Yt.addedLength,Zt[Ut-1]),this.addSegmentFromArray(er,kt,Jt,nr),nr=!1,kt.c=!1),Kt+=Yt.addedLength,Jt+=1;if(Tt[Dt].c&&Zt.length){if(Yt=Zt[Ut-1],Kt<=dt.e){var ir=Zt[Ut-1].addedLength;dt.s<=Kt&&dt.e>=Kt+ir?(this.addSegment(Tt[Dt].v[Ut-1],Tt[Dt].o[Ut-1],Tt[Dt].i[0],Tt[Dt].v[0],kt,Jt,nr),nr=!1):(er=bez.getNewSegment(Tt[Dt].v[Ut-1],Tt[Dt].v[0],Tt[Dt].o[Ut-1],Tt[Dt].i[0],(dt.s-Kt)/ir,(dt.e-Kt)/ir,Zt[Ut-1]),this.addSegmentFromArray(er,kt,Jt,nr),nr=!1,kt.c=!1)}else kt.c=!1;Kt+=Yt.addedLength,Jt+=1}if(kt._length&&(kt.setXYAt(kt.v[sr][0],kt.v[sr][1],"i",sr),kt.setXYAt(kt.v[kt._length-1][0],kt.v[kt._length-1][1],"o",kt._length-1)),Kt>dt.e)break;Dt<Ft-1&&(kt=shapePool.newElement(),nr=!0,rr.push(kt),Jt=0)}return rr};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(et,dt.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(et,dt){var kt=dt/100,$t=[0,0],Tt=et._length,Dt=0;for(Dt=0;Dt<Tt;Dt+=1)$t[0]+=et.v[Dt][0],$t[1]+=et.v[Dt][1];$t[0]/=Tt,$t[1]/=Tt;var Ft=shapePool.newElement();Ft.c=et.c;var Ut,Ht,Kt,Yt,Jt,Zt;for(Dt=0;Dt<Tt;Dt+=1)Ut=et.v[Dt][0]+($t[0]-et.v[Dt][0])*kt,Ht=et.v[Dt][1]+($t[1]-et.v[Dt][1])*kt,Kt=et.o[Dt][0]+($t[0]-et.o[Dt][0])*-kt,Yt=et.o[Dt][1]+($t[1]-et.o[Dt][1])*-kt,Jt=et.i[Dt][0]+($t[0]-et.i[Dt][0])*-kt,Zt=et.i[Dt][1]+($t[1]-et.i[Dt][1])*-kt,Ft.setTripleAt(Ut,Ht,Kt,Yt,Jt,Zt,Dt);return Ft},PuckerAndBloatModifier.prototype.processShapes=function(et){var dt,kt,$t=this.shapes.length,Tt,Dt,Ft=this.amount.v;if(Ft!==0){var Ut,Ht;for(kt=0;kt<$t;kt+=1){if(Ut=this.shapes[kt],Ht=Ut.localShapeCollection,!(!Ut.shape._mdf&&!this._mdf&&!et))for(Ht.releaseShapes(),Ut.shape._mdf=!0,dt=Ut.shape.paths.shapes,Dt=Ut.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Ht.addShape(this.processPath(dt[Tt],Ft));Ut.shape.paths=Ut.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var et=[0,0];function dt(Ht){var Kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||Kt,this.a&&Ht.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&Ht.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&Ht.skewFromAxis(-this.sk.v,this.sa.v),this.r?Ht.rotate(-this.r.v):Ht.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?Ht.translate(this.px.v,this.py.v,-this.pz.v):Ht.translate(this.px.v,this.py.v,0):Ht.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function kt(Ht){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||Ht){var Kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Yt,Jt;if(Kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Yt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/Kt,0),Jt=this.p.getValueAtTime(this.p.keyframes[0].t/Kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Yt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Kt,0),Jt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/Kt,0)):(Yt=this.p.pv,Jt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/Kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Yt=[],Jt=[];var Zt=this.px,er=this.py;Zt._caching.lastFrame+Zt.offsetTime<=Zt.keyframes[0].t?(Yt[0]=Zt.getValueAtTime((Zt.keyframes[0].t+.01)/Kt,0),Yt[1]=er.getValueAtTime((er.keyframes[0].t+.01)/Kt,0),Jt[0]=Zt.getValueAtTime(Zt.keyframes[0].t/Kt,0),Jt[1]=er.getValueAtTime(er.keyframes[0].t/Kt,0)):Zt._caching.lastFrame+Zt.offsetTime>=Zt.keyframes[Zt.keyframes.length-1].t?(Yt[0]=Zt.getValueAtTime(Zt.keyframes[Zt.keyframes.length-1].t/Kt,0),Yt[1]=er.getValueAtTime(er.keyframes[er.keyframes.length-1].t/Kt,0),Jt[0]=Zt.getValueAtTime((Zt.keyframes[Zt.keyframes.length-1].t-.01)/Kt,0),Jt[1]=er.getValueAtTime((er.keyframes[er.keyframes.length-1].t-.01)/Kt,0)):(Yt=[Zt.pv,er.pv],Jt[0]=Zt.getValueAtTime((Zt._caching.lastFrame+Zt.offsetTime-.01)/Kt,Zt.offsetTime),Jt[1]=er.getValueAtTime((er._caching.lastFrame+er.offsetTime-.01)/Kt,er.offsetTime))}else Jt=et,Yt=Jt;this.v.rotate(-Math.atan2(Yt[1]-Jt[1],Yt[0]-Jt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function $t(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function Tt(){}function Dt(Ht){this._addDynamicProperty(Ht),this.elem.addDynamicProperty(Ht),this._isDirty=!0}function Ft(Ht,Kt,Yt){if(this.elem=Ht,this.frameId=-1,this.propType="transform",this.data=Kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Yt||Ht),Kt.p&&Kt.p.s?(this.px=PropertyFactory.getProp(Ht,Kt.p.x,0,0,this),this.py=PropertyFactory.getProp(Ht,Kt.p.y,0,0,this),Kt.p.z&&(this.pz=PropertyFactory.getProp(Ht,Kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(Ht,Kt.p||{k:[0,0,0]},1,0,this),Kt.rx){if(this.rx=PropertyFactory.getProp(Ht,Kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(Ht,Kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(Ht,Kt.rz,0,degToRads,this),Kt.or.k[0].ti){var Jt,Zt=Kt.or.k.length;for(Jt=0;Jt<Zt;Jt+=1)Kt.or.k[Jt].to=null,Kt.or.k[Jt].ti=null}this.or=PropertyFactory.getProp(Ht,Kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(Ht,Kt.r||{k:0},0,degToRads,this);Kt.sk&&(this.sk=PropertyFactory.getProp(Ht,Kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(Ht,Kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(Ht,Kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(Ht,Kt.s||{k:[100,100,100]},1,.01,this),Kt.o?this.o=PropertyFactory.getProp(Ht,Kt.o,0,.01,Ht):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}Ft.prototype={applyToMatrix:dt,getValue:kt,precalculateMatrix:$t,autoOrient:Tt},extendPrototype([DynamicPropertyContainer],Ft),Ft.prototype.addDynamicProperty=Dt,Ft.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function Ut(Ht,Kt,Yt){return new Ft(Ht,Kt,Yt)}return{getTransformProperty:Ut}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(et,dt.c,0,null,this),this.o=PropertyFactory.getProp(et,dt.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(et,dt.tr,this),this.so=PropertyFactory.getProp(et,dt.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(et,dt.tr.eo,0,.01,this),this.data=dt,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(et,dt,kt,$t,Tt,Dt){var Ft=Dt?-1:1,Ut=$t.s.v[0]+(1-$t.s.v[0])*(1-Tt),Ht=$t.s.v[1]+(1-$t.s.v[1])*(1-Tt);et.translate($t.p.v[0]*Ft*Tt,$t.p.v[1]*Ft*Tt,$t.p.v[2]),dt.translate(-$t.a.v[0],-$t.a.v[1],$t.a.v[2]),dt.rotate(-$t.r.v*Ft*Tt),dt.translate($t.a.v[0],$t.a.v[1],$t.a.v[2]),kt.translate(-$t.a.v[0],-$t.a.v[1],$t.a.v[2]),kt.scale(Dt?1/Ut:Ut,Dt?1/Ht:Ht),kt.translate($t.a.v[0],$t.a.v[1],$t.a.v[2])},RepeaterModifier.prototype.init=function(et,dt,kt,$t){for(this.elem=et,this.arr=dt,this.pos=kt,this.elemsData=$t,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(et),this.initModifierProperties(et,dt[kt]);kt>0;)kt-=1,this._elements.unshift(dt[kt]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(et){var dt,kt=et.length;for(dt=0;dt<kt;dt+=1)et[dt]._processed=!1,et[dt].ty==="gr"&&this.resetElements(et[dt].it)},RepeaterModifier.prototype.cloneElements=function(et){var dt=JSON.parse(JSON.stringify(et));return this.resetElements(dt),dt},RepeaterModifier.prototype.changeGroupRender=function(et,dt){var kt,$t=et.length;for(kt=0;kt<$t;kt+=1)et[kt]._render=dt,et[kt].ty==="gr"&&this.changeGroupRender(et[kt].it,dt)},RepeaterModifier.prototype.processShapes=function(et){var dt,kt,$t,Tt,Dt,Ft=!1;if(this._mdf||et){var Ut=Math.ceil(this.c.v);if(this._groups.length<Ut){for(;this._groups.length<Ut;){var Ht={it:this.cloneElements(this._elements),ty:"gr"};Ht.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Ht),this._groups.splice(0,0,Ht),this._currentCopies+=1}this.elem.reloadShapes(),Ft=!0}Dt=0;var Kt;for($t=0;$t<=this._groups.length-1;$t+=1){if(Kt=Dt<Ut,this._groups[$t]._render=Kt,this.changeGroupRender(this._groups[$t].it,Kt),!Kt){var Yt=this.elemsData[$t].it,Jt=Yt[Yt.length-1];Jt.transform.op.v!==0?(Jt.transform.op._mdf=!0,Jt.transform.op.v=0):Jt.transform.op._mdf=!1}Dt+=1}this._currentCopies=Ut;var Zt=this.o.v,er=Zt%1,rr=Zt>0?Math.floor(Zt):Math.ceil(Zt),sr=this.pMatrix.props,nr=this.rMatrix.props,ir=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var lr=0;if(Zt>0){for(;lr<rr;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),lr+=1;er&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,er,!1),lr+=er)}else if(Zt<0){for(;lr>rr;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),lr-=1;er&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-er,!0),lr-=er)}$t=this.data.m===1?0:this._currentCopies-1,Tt=this.data.m===1?1:-1,Dt=this._currentCopies;for(var or,cr;Dt;){if(dt=this.elemsData[$t].it,kt=dt[dt.length-1].transform.mProps.v.props,cr=kt.length,dt[dt.length-1].transform.mProps._mdf=!0,dt[dt.length-1].transform.op._mdf=!0,dt[dt.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*($t/(this._currentCopies-1)),lr!==0){for(($t!==0&&Tt===1||$t!==this._currentCopies-1&&Tt===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(nr[0],nr[1],nr[2],nr[3],nr[4],nr[5],nr[6],nr[7],nr[8],nr[9],nr[10],nr[11],nr[12],nr[13],nr[14],nr[15]),this.matrix.transform(ir[0],ir[1],ir[2],ir[3],ir[4],ir[5],ir[6],ir[7],ir[8],ir[9],ir[10],ir[11],ir[12],ir[13],ir[14],ir[15]),this.matrix.transform(sr[0],sr[1],sr[2],sr[3],sr[4],sr[5],sr[6],sr[7],sr[8],sr[9],sr[10],sr[11],sr[12],sr[13],sr[14],sr[15]),or=0;or<cr;or+=1)kt[or]=this.matrix.props[or];this.matrix.reset()}else for(this.matrix.reset(),or=0;or<cr;or+=1)kt[or]=this.matrix.props[or];lr+=1,Dt-=1,$t+=Tt}}else for(Dt=this._currentCopies,$t=0,Tt=1;Dt;)dt=this.elemsData[$t].it,kt=dt[dt.length-1].transform.mProps.v.props,dt[dt.length-1].transform.mProps._mdf=!1,dt[dt.length-1].transform.op._mdf=!1,Dt-=1,$t+=Tt;return Ft},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(et,dt.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(et,dt){var kt=shapePool.newElement();kt.c=et.c;var $t,Tt=et._length,Dt,Ft,Ut,Ht,Kt,Yt,Jt=0,Zt,er,rr,sr,nr,ir;for($t=0;$t<Tt;$t+=1)Dt=et.v[$t],Ut=et.o[$t],Ft=et.i[$t],Dt[0]===Ut[0]&&Dt[1]===Ut[1]&&Dt[0]===Ft[0]&&Dt[1]===Ft[1]?($t===0||$t===Tt-1)&&!et.c?(kt.setTripleAt(Dt[0],Dt[1],Ut[0],Ut[1],Ft[0],Ft[1],Jt),Jt+=1):($t===0?Ht=et.v[Tt-1]:Ht=et.v[$t-1],Kt=Math.sqrt(Math.pow(Dt[0]-Ht[0],2)+Math.pow(Dt[1]-Ht[1],2)),Yt=Kt?Math.min(Kt/2,dt)/Kt:0,nr=Dt[0]+(Ht[0]-Dt[0])*Yt,Zt=nr,ir=Dt[1]-(Dt[1]-Ht[1])*Yt,er=ir,rr=Zt-(Zt-Dt[0])*roundCorner,sr=er-(er-Dt[1])*roundCorner,kt.setTripleAt(Zt,er,rr,sr,nr,ir,Jt),Jt+=1,$t===Tt-1?Ht=et.v[0]:Ht=et.v[$t+1],Kt=Math.sqrt(Math.pow(Dt[0]-Ht[0],2)+Math.pow(Dt[1]-Ht[1],2)),Yt=Kt?Math.min(Kt/2,dt)/Kt:0,rr=Dt[0]+(Ht[0]-Dt[0])*Yt,Zt=rr,sr=Dt[1]+(Ht[1]-Dt[1])*Yt,er=sr,nr=Zt-(Zt-Dt[0])*roundCorner,ir=er-(er-Dt[1])*roundCorner,kt.setTripleAt(Zt,er,rr,sr,nr,ir,Jt),Jt+=1):(kt.setTripleAt(et.v[$t][0],et.v[$t][1],et.o[$t][0],et.o[$t][1],et.i[$t][0],et.i[$t][1],Jt),Jt+=1);return kt},RoundCornersModifier.prototype.processShapes=function(et){var dt,kt,$t=this.shapes.length,Tt,Dt,Ft=this.rd.v;if(Ft!==0){var Ut,Ht;for(kt=0;kt<$t;kt+=1){if(Ut=this.shapes[kt],Ht=Ut.localShapeCollection,!(!Ut.shape._mdf&&!this._mdf&&!et))for(Ht.releaseShapes(),Ut.shape._mdf=!0,dt=Ut.shape.paths.shapes,Dt=Ut.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Ht.addShape(this.processPath(dt[Tt],Ft));Ut.shape.paths=Ut.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(et,dt){return Math.abs(et-dt)*1e5<=Math.min(Math.abs(et),Math.abs(dt))}function floatZero(et){return Math.abs(et)<=1e-5}function lerp(et,dt,kt){return et*(1-kt)+dt*kt}function lerpPoint(et,dt,kt){return[lerp(et[0],dt[0],kt),lerp(et[1],dt[1],kt)]}function quadRoots(et,dt,kt){if(et===0)return[];var $t=dt*dt-4*et*kt;if($t<0)return[];var Tt=-dt/(2*et);if($t===0)return[Tt];var Dt=Math.sqrt($t)/(2*et);return[Tt-Dt,Tt+Dt]}function polynomialCoefficients(et,dt,kt,$t){return[-et+3*dt-3*kt+$t,3*et-6*dt+3*kt,-3*et+3*dt,et]}function singlePoint(et){return new PolynomialBezier(et,et,et,et,!1)}function PolynomialBezier(et,dt,kt,$t,Tt){Tt&&pointEqual(et,dt)&&(dt=lerpPoint(et,$t,1/3)),Tt&&pointEqual(kt,$t)&&(kt=lerpPoint(et,$t,2/3));var Dt=polynomialCoefficients(et[0],dt[0],kt[0],$t[0]),Ft=polynomialCoefficients(et[1],dt[1],kt[1],$t[1]);this.a=[Dt[0],Ft[0]],this.b=[Dt[1],Ft[1]],this.c=[Dt[2],Ft[2]],this.d=[Dt[3],Ft[3]],this.points=[et,dt,kt,$t]}PolynomialBezier.prototype.point=function(et){return[((this.a[0]*et+this.b[0])*et+this.c[0])*et+this.d[0],((this.a[1]*et+this.b[1])*et+this.c[1])*et+this.d[1]]},PolynomialBezier.prototype.derivative=function(et){return[(3*et*this.a[0]+2*this.b[0])*et+this.c[0],(3*et*this.a[1]+2*this.b[1])*et+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(et){var dt=this.derivative(et);return Math.atan2(dt[1],dt[0])},PolynomialBezier.prototype.normalAngle=function(et){var dt=this.derivative(et);return Math.atan2(dt[0],dt[1])},PolynomialBezier.prototype.inflectionPoints=function(){var et=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(et))return[];var dt=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/et,kt=dt*dt-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/et;if(kt<0)return[];var $t=Math.sqrt(kt);return floatZero($t)?$t>0&&$t<1?[dt]:[]:[dt-$t,dt+$t].filter(function(Tt){return Tt>0&&Tt<1})},PolynomialBezier.prototype.split=function(et){if(et<=0)return[singlePoint(this.points[0]),this];if(et>=1)return[this,singlePoint(this.points[this.points.length-1])];var dt=lerpPoint(this.points[0],this.points[1],et),kt=lerpPoint(this.points[1],this.points[2],et),$t=lerpPoint(this.points[2],this.points[3],et),Tt=lerpPoint(dt,kt,et),Dt=lerpPoint(kt,$t,et),Ft=lerpPoint(Tt,Dt,et);return[new PolynomialBezier(this.points[0],dt,Tt,Ft,!0),new PolynomialBezier(Ft,Dt,$t,this.points[3],!0)]};function extrema(et,dt){var kt=et.points[0][dt],$t=et.points[et.points.length-1][dt];if(kt>$t){var Tt=$t;$t=kt,kt=Tt}for(var Dt=quadRoots(3*et.a[dt],2*et.b[dt],et.c[dt]),Ft=0;Ft<Dt.length;Ft+=1)if(Dt[Ft]>0&&Dt[Ft]<1){var Ut=et.point(Dt[Ft])[dt];Ut<kt?kt=Ut:Ut>$t&&($t=Ut)}return{min:kt,max:$t}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var et=this.bounds();return{left:et.x.min,right:et.x.max,top:et.y.min,bottom:et.y.max,width:et.x.max-et.x.min,height:et.y.max-et.y.min,cx:(et.x.max+et.x.min)/2,cy:(et.y.max+et.y.min)/2}};function intersectData(et,dt,kt){var $t=et.boundingBox();return{cx:$t.cx,cy:$t.cy,width:$t.width,height:$t.height,bez:et,t:(dt+kt)/2,t1:dt,t2:kt}}function splitData(et){var dt=et.bez.split(.5);return[intersectData(dt[0],et.t1,et.t),intersectData(dt[1],et.t,et.t2)]}function boxIntersect(et,dt){return Math.abs(et.cx-dt.cx)*2<et.width+dt.width&&Math.abs(et.cy-dt.cy)*2<et.height+dt.height}function intersectsImpl(et,dt,kt,$t,Tt,Dt){if(boxIntersect(et,dt)){if(kt>=Dt||et.width<=$t&&et.height<=$t&&dt.width<=$t&&dt.height<=$t){Tt.push([et.t,dt.t]);return}var Ft=splitData(et),Ut=splitData(dt);intersectsImpl(Ft[0],Ut[0],kt+1,$t,Tt,Dt),intersectsImpl(Ft[0],Ut[1],kt+1,$t,Tt,Dt),intersectsImpl(Ft[1],Ut[0],kt+1,$t,Tt,Dt),intersectsImpl(Ft[1],Ut[1],kt+1,$t,Tt,Dt)}}PolynomialBezier.prototype.intersections=function(et,dt,kt){dt===void 0&&(dt=2),kt===void 0&&(kt=7);var $t=[];return intersectsImpl(intersectData(this,0,1),intersectData(et,0,1),0,dt,$t,kt),$t},PolynomialBezier.shapeSegment=function(et,dt){var kt=(dt+1)%et.length();return new PolynomialBezier(et.v[dt],et.o[dt],et.i[kt],et.v[kt],!0)},PolynomialBezier.shapeSegmentInverted=function(et,dt){var kt=(dt+1)%et.length();return new PolynomialBezier(et.v[kt],et.i[kt],et.o[dt],et.v[dt],!0)};function crossProduct(et,dt){return[et[1]*dt[2]-et[2]*dt[1],et[2]*dt[0]-et[0]*dt[2],et[0]*dt[1]-et[1]*dt[0]]}function lineIntersection(et,dt,kt,$t){var Tt=[et[0],et[1],1],Dt=[dt[0],dt[1],1],Ft=[kt[0],kt[1],1],Ut=[$t[0],$t[1],1],Ht=crossProduct(crossProduct(Tt,Dt),crossProduct(Ft,Ut));return floatZero(Ht[2])?null:[Ht[0]/Ht[2],Ht[1]/Ht[2]]}function polarOffset(et,dt,kt){return[et[0]+Math.cos(dt)*kt,et[1]-Math.sin(dt)*kt]}function pointDistance(et,dt){return Math.hypot(et[0]-dt[0],et[1]-dt[1])}function pointEqual(et,dt){return floatEqual(et[0],dt[0])&&floatEqual(et[1],dt[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(et,dt.s,0,null,this),this.frequency=PropertyFactory.getProp(et,dt.r,0,null,this),this.pointsType=PropertyFactory.getProp(et,dt.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(et,dt,kt,$t,Tt,Dt,Ft){var Ut=kt-Math.PI/2,Ht=kt+Math.PI/2,Kt=dt[0]+Math.cos(kt)*$t*Tt,Yt=dt[1]-Math.sin(kt)*$t*Tt;et.setTripleAt(Kt,Yt,Kt+Math.cos(Ut)*Dt,Yt-Math.sin(Ut)*Dt,Kt+Math.cos(Ht)*Ft,Yt-Math.sin(Ht)*Ft,et.length())}function getPerpendicularVector(et,dt){var kt=[dt[0]-et[0],dt[1]-et[1]],$t=-Math.PI*.5,Tt=[Math.cos($t)*kt[0]-Math.sin($t)*kt[1],Math.sin($t)*kt[0]+Math.cos($t)*kt[1]];return Tt}function getProjectingAngle(et,dt){var kt=dt===0?et.length()-1:dt-1,$t=(dt+1)%et.length(),Tt=et.v[kt],Dt=et.v[$t],Ft=getPerpendicularVector(Tt,Dt);return Math.atan2(0,1)-Math.atan2(Ft[1],Ft[0])}function zigZagCorner(et,dt,kt,$t,Tt,Dt,Ft){var Ut=getProjectingAngle(dt,kt),Ht=dt.v[kt%dt._length],Kt=dt.v[kt===0?dt._length-1:kt-1],Yt=dt.v[(kt+1)%dt._length],Jt=Dt===2?Math.sqrt(Math.pow(Ht[0]-Kt[0],2)+Math.pow(Ht[1]-Kt[1],2)):0,Zt=Dt===2?Math.sqrt(Math.pow(Ht[0]-Yt[0],2)+Math.pow(Ht[1]-Yt[1],2)):0;setPoint(et,dt.v[kt%dt._length],Ut,Ft,$t,Zt/((Tt+1)*2),Jt/((Tt+1)*2))}function zigZagSegment(et,dt,kt,$t,Tt,Dt){for(var Ft=0;Ft<$t;Ft+=1){var Ut=(Ft+1)/($t+1),Ht=Tt===2?Math.sqrt(Math.pow(dt.points[3][0]-dt.points[0][0],2)+Math.pow(dt.points[3][1]-dt.points[0][1],2)):0,Kt=dt.normalAngle(Ut),Yt=dt.point(Ut);setPoint(et,Yt,Kt,Dt,kt,Ht/(($t+1)*2),Ht/(($t+1)*2)),Dt=-Dt}return Dt}ZigZagModifier.prototype.processPath=function(et,dt,kt,$t){var Tt=et._length,Dt=shapePool.newElement();if(Dt.c=et.c,et.c||(Tt-=1),Tt===0)return Dt;var Ft=-1,Ut=PolynomialBezier.shapeSegment(et,0);zigZagCorner(Dt,et,0,dt,kt,$t,Ft);for(var Ht=0;Ht<Tt;Ht+=1)Ft=zigZagSegment(Dt,Ut,dt,kt,$t,-Ft),Ht===Tt-1&&!et.c?Ut=null:Ut=PolynomialBezier.shapeSegment(et,(Ht+1)%Tt),zigZagCorner(Dt,et,Ht+1,dt,kt,$t,Ft);return Dt},ZigZagModifier.prototype.processShapes=function(et){var dt,kt,$t=this.shapes.length,Tt,Dt,Ft=this.amplitude.v,Ut=Math.max(0,Math.round(this.frequency.v)),Ht=this.pointsType.v;if(Ft!==0){var Kt,Yt;for(kt=0;kt<$t;kt+=1){if(Kt=this.shapes[kt],Yt=Kt.localShapeCollection,!(!Kt.shape._mdf&&!this._mdf&&!et))for(Yt.releaseShapes(),Kt.shape._mdf=!0,dt=Kt.shape.paths.shapes,Dt=Kt.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Yt.addShape(this.processPath(dt[Tt],Ft,Ut,Ht));Kt.shape.paths=Kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(et,dt,kt){var $t=Math.atan2(dt[0]-et[0],dt[1]-et[1]);return[polarOffset(et,$t,kt),polarOffset(dt,$t,kt)]}function offsetSegment(et,dt){var kt,$t,Tt,Dt,Ft,Ut,Ht;Ht=linearOffset(et.points[0],et.points[1],dt),kt=Ht[0],$t=Ht[1],Ht=linearOffset(et.points[1],et.points[2],dt),Tt=Ht[0],Dt=Ht[1],Ht=linearOffset(et.points[2],et.points[3],dt),Ft=Ht[0],Ut=Ht[1];var Kt=lineIntersection(kt,$t,Tt,Dt);Kt===null&&(Kt=$t);var Yt=lineIntersection(Ft,Ut,Tt,Dt);return Yt===null&&(Yt=Ft),new PolynomialBezier(kt,Kt,Yt,Ut)}function joinLines(et,dt,kt,$t,Tt){var Dt=dt.points[3],Ft=kt.points[0];if($t===3||pointEqual(Dt,Ft))return Dt;if($t===2){var Ut=-dt.tangentAngle(1),Ht=-kt.tangentAngle(0)+Math.PI,Kt=lineIntersection(Dt,polarOffset(Dt,Ut+Math.PI/2,100),Ft,polarOffset(Ft,Ut+Math.PI/2,100)),Yt=Kt?pointDistance(Kt,Dt):pointDistance(Dt,Ft)/2,Jt=polarOffset(Dt,Ut,2*Yt*roundCorner);return et.setXYAt(Jt[0],Jt[1],"o",et.length()-1),Jt=polarOffset(Ft,Ht,2*Yt*roundCorner),et.setTripleAt(Ft[0],Ft[1],Ft[0],Ft[1],Jt[0],Jt[1],et.length()),Ft}var Zt=pointEqual(Dt,dt.points[2])?dt.points[0]:dt.points[2],er=pointEqual(Ft,kt.points[1])?kt.points[3]:kt.points[1],rr=lineIntersection(Zt,Dt,Ft,er);return rr&&pointDistance(rr,Dt)<Tt?(et.setTripleAt(rr[0],rr[1],rr[0],rr[1],rr[0],rr[1],et.length()),rr):Dt}function getIntersection(et,dt){var kt=et.intersections(dt);return kt.length&&floatEqual(kt[0][0],1)&&kt.shift(),kt.length?kt[0]:null}function pruneSegmentIntersection(et,dt){var kt=et.slice(),$t=dt.slice(),Tt=getIntersection(et[et.length-1],dt[0]);return Tt&&(kt[et.length-1]=et[et.length-1].split(Tt[0])[0],$t[0]=dt[0].split(Tt[1])[1]),et.length>1&&dt.length>1&&(Tt=getIntersection(et[0],dt[dt.length-1]),Tt)?[[et[0].split(Tt[0])[0]],[dt[dt.length-1].split(Tt[1])[1]]]:[kt,$t]}function pruneIntersections(et){for(var dt,kt=1;kt<et.length;kt+=1)dt=pruneSegmentIntersection(et[kt-1],et[kt]),et[kt-1]=dt[0],et[kt]=dt[1];return et.length>1&&(dt=pruneSegmentIntersection(et[et.length-1],et[0]),et[et.length-1]=dt[0],et[0]=dt[1]),et}function offsetSegmentSplit(et,dt){var kt=et.inflectionPoints(),$t,Tt,Dt,Ft;if(kt.length===0)return[offsetSegment(et,dt)];if(kt.length===1||floatEqual(kt[1],1))return Dt=et.split(kt[0]),$t=Dt[0],Tt=Dt[1],[offsetSegment($t,dt),offsetSegment(Tt,dt)];Dt=et.split(kt[0]),$t=Dt[0];var Ut=(kt[1]-kt[0])/(1-kt[0]);return Dt=Dt[1].split(Ut),Ft=Dt[0],Tt=Dt[1],[offsetSegment($t,dt),offsetSegment(Ft,dt),offsetSegment(Tt,dt)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(et,dt.a,0,null,this),this.miterLimit=PropertyFactory.getProp(et,dt.ml,0,null,this),this.lineJoin=dt.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(et,dt,kt,$t){var Tt=shapePool.newElement();Tt.c=et.c;var Dt=et.length();et.c||(Dt-=1);var Ft,Ut,Ht,Kt=[];for(Ft=0;Ft<Dt;Ft+=1)Ht=PolynomialBezier.shapeSegment(et,Ft),Kt.push(offsetSegmentSplit(Ht,dt));if(!et.c)for(Ft=Dt-1;Ft>=0;Ft-=1)Ht=PolynomialBezier.shapeSegmentInverted(et,Ft),Kt.push(offsetSegmentSplit(Ht,dt));Kt=pruneIntersections(Kt);var Yt=null,Jt=null;for(Ft=0;Ft<Kt.length;Ft+=1){var Zt=Kt[Ft];for(Jt&&(Yt=joinLines(Tt,Jt,Zt[0],kt,$t)),Jt=Zt[Zt.length-1],Ut=0;Ut<Zt.length;Ut+=1)Ht=Zt[Ut],Yt&&pointEqual(Ht.points[0],Yt)?Tt.setXYAt(Ht.points[1][0],Ht.points[1][1],"o",Tt.length()-1):Tt.setTripleAt(Ht.points[0][0],Ht.points[0][1],Ht.points[1][0],Ht.points[1][1],Ht.points[0][0],Ht.points[0][1],Tt.length()),Tt.setTripleAt(Ht.points[3][0],Ht.points[3][1],Ht.points[3][0],Ht.points[3][1],Ht.points[2][0],Ht.points[2][1],Tt.length()),Yt=Ht.points[3]}return Kt.length&&joinLines(Tt,Jt,Kt[0][0],kt,$t),Tt},OffsetPathModifier.prototype.processShapes=function(et){var dt,kt,$t=this.shapes.length,Tt,Dt,Ft=this.amount.v,Ut=this.miterLimit.v,Ht=this.lineJoin;if(Ft!==0){var Kt,Yt;for(kt=0;kt<$t;kt+=1){if(Kt=this.shapes[kt],Yt=Kt.localShapeCollection,!(!Kt.shape._mdf&&!this._mdf&&!et))for(Yt.releaseShapes(),Kt.shape._mdf=!0,dt=Kt.shape.paths.shapes,Dt=Kt.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Yt.addShape(this.processPath(dt[Tt],Ft,Ht,Ut));Kt.shape.paths=Kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(et){for(var dt=et.fStyle?et.fStyle.split(" "):[],kt="normal",$t="normal",Tt=dt.length,Dt,Ft=0;Ft<Tt;Ft+=1)switch(Dt=dt[Ft].toLowerCase(),Dt){case"italic":$t="italic";break;case"bold":kt="700";break;case"black":kt="900";break;case"medium":kt="500";break;case"regular":case"normal":kt="400";break;case"light":case"thin":kt="200";break}return{style:$t,weight:et.fWeight||kt}}var FontManager=function(){var et=5e3,dt={w:0,size:0,shapes:[],data:{shapes:[]}},kt=[];kt=kt.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var $t=127988,Tt=917631,Dt=917601,Ft=917626,Ut=65039,Ht=8205,Kt=127462,Yt=127487,Jt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function Zt(kr){var Tr=kr.split(","),xr,wr=Tr.length,zr=[];for(xr=0;xr<wr;xr+=1)Tr[xr]!=="sans-serif"&&Tr[xr]!=="monospace"&&zr.push(Tr[xr]);return zr.join(",")}function er(kr,Tr){var xr=createTag("span");xr.setAttribute("aria-hidden",!0),xr.style.fontFamily=Tr;var wr=createTag("span");wr.innerText="giItT1WQy@!-/#",xr.style.position="absolute",xr.style.left="-10000px",xr.style.top="-10000px",xr.style.fontSize="300px",xr.style.fontVariant="normal",xr.style.fontStyle="normal",xr.style.fontWeight="normal",xr.style.letterSpacing="0",xr.appendChild(wr),document.body.appendChild(xr);var zr=wr.offsetWidth;return wr.style.fontFamily=Zt(kr)+", "+Tr,{node:wr,w:zr,parent:xr}}function rr(){var kr,Tr=this.fonts.length,xr,wr,zr=Tr;for(kr=0;kr<Tr;kr+=1)this.fonts[kr].loaded?zr-=1:this.fonts[kr].fOrigin==="n"||this.fonts[kr].origin===0?this.fonts[kr].loaded=!0:(xr=this.fonts[kr].monoCase.node,wr=this.fonts[kr].monoCase.w,xr.offsetWidth!==wr?(zr-=1,this.fonts[kr].loaded=!0):(xr=this.fonts[kr].sansCase.node,wr=this.fonts[kr].sansCase.w,xr.offsetWidth!==wr&&(zr-=1,this.fonts[kr].loaded=!0)),this.fonts[kr].loaded&&(this.fonts[kr].sansCase.parent.parentNode.removeChild(this.fonts[kr].sansCase.parent),this.fonts[kr].monoCase.parent.parentNode.removeChild(this.fonts[kr].monoCase.parent)));zr!==0&&Date.now()-this.initTime<et?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function sr(kr,Tr){var xr=document.body&&Tr?"svg":"canvas",wr,zr=getFontProperties(kr);if(xr==="svg"){var Hr=createNS("text");Hr.style.fontSize="100px",Hr.setAttribute("font-family",kr.fFamily),Hr.setAttribute("font-style",zr.style),Hr.setAttribute("font-weight",zr.weight),Hr.textContent="1",kr.fClass?(Hr.style.fontFamily="inherit",Hr.setAttribute("class",kr.fClass)):Hr.style.fontFamily=kr.fFamily,Tr.appendChild(Hr),wr=Hr}else{var Yr=new OffscreenCanvas(500,500).getContext("2d");Yr.font=zr.style+" "+zr.weight+" 100px "+kr.fFamily,wr=Yr}function rs(as){return xr==="svg"?(wr.textContent=as,wr.getComputedTextLength()):wr.measureText(as).width}return{measureText:rs}}function nr(kr,Tr){if(!kr){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=kr.list;return}if(!document.body){this.isLoaded=!0,kr.list.forEach(function(cs){cs.helper=sr(cs),cs.cache={}}),this.fonts=kr.list;return}var xr=kr.list,wr,zr=xr.length,Hr=zr;for(wr=0;wr<zr;wr+=1){var Yr=!0,rs,as;if(xr[wr].loaded=!1,xr[wr].monoCase=er(xr[wr].fFamily,"monospace"),xr[wr].sansCase=er(xr[wr].fFamily,"sans-serif"),!xr[wr].fPath)xr[wr].loaded=!0,Hr-=1;else if(xr[wr].fOrigin==="p"||xr[wr].origin===3){if(rs=document.querySelectorAll('style[f-forigin="p"][f-family="'+xr[wr].fFamily+'"], style[f-origin="3"][f-family="'+xr[wr].fFamily+'"]'),rs.length>0&&(Yr=!1),Yr){var es=createTag("style");es.setAttribute("f-forigin",xr[wr].fOrigin),es.setAttribute("f-origin",xr[wr].origin),es.setAttribute("f-family",xr[wr].fFamily),es.type="text/css",es.innerText="@font-face {font-family: "+xr[wr].fFamily+"; font-style: normal; src: url('"+xr[wr].fPath+"');}",Tr.appendChild(es)}}else if(xr[wr].fOrigin==="g"||xr[wr].origin===1){for(rs=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),as=0;as<rs.length;as+=1)rs[as].href.indexOf(xr[wr].fPath)!==-1&&(Yr=!1);if(Yr){var Xr=createTag("link");Xr.setAttribute("f-forigin",xr[wr].fOrigin),Xr.setAttribute("f-origin",xr[wr].origin),Xr.type="text/css",Xr.rel="stylesheet",Xr.href=xr[wr].fPath,document.body.appendChild(Xr)}}else if(xr[wr].fOrigin==="t"||xr[wr].origin===2){for(rs=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),as=0;as<rs.length;as+=1)xr[wr].fPath===rs[as].src&&(Yr=!1);if(Yr){var Wr=createTag("link");Wr.setAttribute("f-forigin",xr[wr].fOrigin),Wr.setAttribute("f-origin",xr[wr].origin),Wr.setAttribute("rel","stylesheet"),Wr.setAttribute("href",xr[wr].fPath),Tr.appendChild(Wr)}}xr[wr].helper=sr(xr[wr],Tr),xr[wr].cache={},this.fonts.push(xr[wr])}Hr===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function ir(kr){if(kr){this.chars||(this.chars=[]);var Tr,xr=kr.length,wr,zr=this.chars.length,Hr;for(Tr=0;Tr<xr;Tr+=1){for(wr=0,Hr=!1;wr<zr;)this.chars[wr].style===kr[Tr].style&&this.chars[wr].fFamily===kr[Tr].fFamily&&this.chars[wr].ch===kr[Tr].ch&&(Hr=!0),wr+=1;Hr||(this.chars.push(kr[Tr]),zr+=1)}}}function lr(kr,Tr,xr){for(var wr=0,zr=this.chars.length;wr<zr;){if(this.chars[wr].ch===kr&&this.chars[wr].style===Tr&&this.chars[wr].fFamily===xr)return this.chars[wr];wr+=1}return(typeof kr=="string"&&kr.charCodeAt(0)!==13||!kr)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",kr,Tr,xr)),dt}function or(kr,Tr,xr){var wr=this.getFontByName(Tr),zr=kr;if(!wr.cache[zr]){var Hr=wr.helper;if(kr===" "){var Yr=Hr.measureText("|"+kr+"|"),rs=Hr.measureText("||");wr.cache[zr]=(Yr-rs)/100}else wr.cache[zr]=Hr.measureText(kr)/100}return wr.cache[zr]*xr}function cr(kr){for(var Tr=0,xr=this.fonts.length;Tr<xr;){if(this.fonts[Tr].fName===kr)return this.fonts[Tr];Tr+=1}return this.fonts[0]}function dr(kr){var Tr=0,xr=kr.charCodeAt(0);if(xr>=55296&&xr<=56319){var wr=kr.charCodeAt(1);wr>=56320&&wr<=57343&&(Tr=(xr-55296)*1024+wr-56320+65536)}return Tr}function ur(kr,Tr){var xr=kr.toString(16)+Tr.toString(16);return Jt.indexOf(xr)!==-1}function pr(kr){return kr===Ht}function mr(kr){return kr===Ut}function jr(kr){var Tr=dr(kr);return Tr>=Kt&&Tr<=Yt}function Rr(kr){return jr(kr.substr(0,2))&&jr(kr.substr(2,2))}function br(kr){return kt.indexOf(kr)!==-1}function _r(kr,Tr){var xr=dr(kr.substr(Tr,2));if(xr!==$t)return!1;var wr=0;for(Tr+=2;wr<5;){if(xr=dr(kr.substr(Tr,2)),xr<Dt||xr>Ft)return!1;wr+=1,Tr+=2}return dr(kr.substr(Tr,2))===Tt}function Mr(){this.isLoaded=!0}var Pr=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Pr.isModifier=ur,Pr.isZeroWidthJoiner=pr,Pr.isFlagEmoji=Rr,Pr.isRegionalCode=jr,Pr.isCombinedCharacter=br,Pr.isRegionalFlag=_r,Pr.isVariationSelector=mr,Pr.BLACK_FLAG_CODE_POINT=$t;var Or={addChars:ir,addFonts:nr,getCharData:lr,getFontByName:cr,measureText:or,checkLoadedFonts:rr,setIsLoaded:Mr};return Pr.prototype=Or,Pr}();function SlotManager(et){this.animationData=et}SlotManager.prototype.getProp=function(et){return this.animationData.slots&&this.animationData.slots[et.sid]?Object.assign(et,this.animationData.slots[et.sid].p):et};function slotFactory(et){return new SlotManager(et)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(dt){this.renderableComponents.indexOf(dt)===-1&&this.renderableComponents.push(dt)},removeRenderableComponent:function(dt){this.renderableComponents.indexOf(dt)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(dt),1)},prepareRenderableFrame:function(dt){this.checkLayerLimits(dt)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(dt){this.data.ip-this.data.st<=dt&&this.data.op-this.data.st>dt?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var dt,kt=this.renderableComponents.length;for(dt=0;dt<kt;dt+=1)this.renderableComponents[dt].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var et={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(dt){return et[dt]||""}}();function SliderEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,0,0,kt)}function AngleEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,0,0,kt)}function ColorEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,1,0,kt)}function PointEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,1,0,kt)}function LayerIndexEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,0,0,kt)}function MaskIndexEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,0,0,kt)}function CheckboxEffect(et,dt,kt){this.p=PropertyFactory.getProp(dt,et.v,0,0,kt)}function NoValueEffect(){this.p={}}function EffectsManager(et,dt){var kt=et.ef||[];this.effectElements=[];var $t,Tt=kt.length,Dt;for($t=0;$t<Tt;$t+=1)Dt=new GroupEffect(kt[$t],dt),this.effectElements.push(Dt)}function GroupEffect(et,dt){this.init(et,dt)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(et,dt){this.data=et,this.effectElements=[],this.initDynamicPropertyContainer(dt);var kt,$t=this.data.ef.length,Tt,Dt=this.data.ef;for(kt=0;kt<$t;kt+=1){switch(Tt=null,Dt[kt].ty){case 0:Tt=new SliderEffect(Dt[kt],dt,this);break;case 1:Tt=new AngleEffect(Dt[kt],dt,this);break;case 2:Tt=new ColorEffect(Dt[kt],dt,this);break;case 3:Tt=new PointEffect(Dt[kt],dt,this);break;case 4:case 7:Tt=new CheckboxEffect(Dt[kt],dt,this);break;case 10:Tt=new LayerIndexEffect(Dt[kt],dt,this);break;case 11:Tt=new MaskIndexEffect(Dt[kt],dt,this);break;case 5:Tt=new EffectsManager(Dt[kt],dt);break;default:Tt=new NoValueEffect(Dt[kt]);break}Tt&&this.effectElements.push(Tt)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var dt=0,kt=this.data.masksProperties.length;dt<kt;){if(this.data.masksProperties[dt].mode!=="n"&&this.data.masksProperties[dt].cl!==!1)return!0;dt+=1}return!1},initExpressions:function(){var dt=getExpressionInterfaces();if(dt){var kt=dt("layer"),$t=dt("effects"),Tt=dt("shape"),Dt=dt("text"),Ft=dt("comp");this.layerInterface=kt(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var Ut=$t.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(Ut),this.data.ty===0||this.data.xt?this.compInterface=Ft(this):this.data.ty===4?(this.layerInterface.shapeInterface=Tt(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=Dt(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var dt=getBlendMode(this.data.bm),kt=this.baseElement||this.layerElement;kt.style["mix-blend-mode"]=dt},initBaseData:function(dt,kt,$t){this.globalData=kt,this.comp=$t,this.data=dt,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(dt,kt){var $t,Tt=this.dynamicProperties.length;for($t=0;$t<Tt;$t+=1)(kt||this._isParent&&this.dynamicProperties[$t].propType==="transform")&&(this.dynamicProperties[$t].getValue(),this.dynamicProperties[$t]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(dt){this.dynamicProperties.indexOf(dt)===-1&&this.dynamicProperties.push(dt)}};function FootageElement(et,dt,kt){this.initFrame(),this.initRenderable(),this.assetData=dt.getAssetData(et.refId),this.footageData=dt.imageLoader.getAsset(this.assetData),this.initBaseData(et,dt,kt)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var et=getExpressionInterfaces();if(et){var dt=et("footage");this.layerInterface=dt(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(et,dt,kt){this.initFrame(),this.initRenderable(),this.assetData=dt.getAssetData(et.refId),this.initBaseData(et,dt,kt),this._isPlaying=!1,this._canPlay=!1;var $t=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio($t),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,et.au&&et.au.lv?et.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(et){if(this.prepareRenderableFrame(et,!0),this.prepareProperties(et,!0),this.tm._placeholder)this._currentTime=et/this.data.sr;else{var dt=this.tm.v;this._currentTime=dt}this._volume=this.lv.v[0];var kt=this._volume*this._volumeMultiplier;this._previousVolume!==kt&&(this._previousVolume=kt,this.audio.volume(kt))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(et){this.audio.rate(et)},AudioElement.prototype.volume=function(et){this._volumeMultiplier=et,this._previousVolume=et*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(et){var dt,kt=this.layers.length,$t;for(this.completeLayers=!0,dt=kt-1;dt>=0;dt-=1)this.elements[dt]||($t=this.layers[dt],$t.ip-$t.st<=et-this.layers[dt].st&&$t.op-$t.st>et-this.layers[dt].st&&this.buildItem(dt)),this.completeLayers=this.elements[dt]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(et){switch(et.ty){case 2:return this.createImage(et);case 0:return this.createComp(et);case 1:return this.createSolid(et);case 3:return this.createNull(et);case 4:return this.createShape(et);case 5:return this.createText(et);case 6:return this.createAudio(et);case 13:return this.createCamera(et);case 15:return this.createFootage(et);default:return this.createNull(et)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(et){return new AudioElement(et,this.globalData,this)},BaseRenderer.prototype.createFootage=function(et){return new FootageElement(et,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var et,dt=this.layers.length;for(et=0;et<dt;et+=1)this.buildItem(et);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(et){this.completeLayers=!1;var dt,kt=et.length,$t,Tt=this.layers.length;for(dt=0;dt<kt;dt+=1)for($t=0;$t<Tt;){if(this.layers[$t].id===et[dt].id){this.layers[$t]=et[dt];break}$t+=1}},BaseRenderer.prototype.setProjectInterface=function(et){this.globalData.projectInterface=et},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(et,dt,kt){for(var $t=this.elements,Tt=this.layers,Dt=0,Ft=Tt.length;Dt<Ft;)Tt[Dt].ind==dt&&(!$t[Dt]||$t[Dt]===!0?(this.buildItem(Dt),this.addPendingElement(et)):(kt.push($t[Dt]),$t[Dt].setAsParent(),Tt[Dt].parent!==void 0?this.buildElementParenting(et,Tt[Dt].parent,kt):et.setHierarchy(kt))),Dt+=1},BaseRenderer.prototype.addPendingElement=function(et){this.pendingElements.push(et)},BaseRenderer.prototype.searchExtraCompositions=function(et){var dt,kt=et.length;for(dt=0;dt<kt;dt+=1)if(et[dt].xt){var $t=this.createComp(et[dt]);$t.initExpressions(),this.globalData.projectInterface.registerComposition($t)}},BaseRenderer.prototype.getElementById=function(et){var dt,kt=this.elements.length;for(dt=0;dt<kt;dt+=1)if(this.elements[dt].data.ind===et)return this.elements[dt];return null},BaseRenderer.prototype.getElementByPath=function(et){var dt=et.shift(),kt;if(typeof dt=="number")kt=this.elements[dt];else{var $t,Tt=this.elements.length;for($t=0;$t<Tt;$t+=1)if(this.elements[$t].data.nm===dt){kt=this.elements[$t];break}}return et.length===0?kt:kt.getElementByPath(et)},BaseRenderer.prototype.setupGlobalData=function(et,dt){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(et),this.globalData.fontManager.addChars(et.chars),this.globalData.fontManager.addFonts(et.fonts,dt),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=et.fr,this.globalData.nm=et.nm,this.globalData.compSize={w:et.w,h:et.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var dt=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:dt,localMat:dt,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var dt,kt=this.finalTransform.mat,$t=0,Tt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;$t<Tt;){if(this.hierarchy[$t].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}$t+=1}if(this.finalTransform._matMdf)for(dt=this.finalTransform.mProp.v.props,kt.cloneFromProps(dt),$t=0;$t<Tt;$t+=1)kt.multiply(this.hierarchy[$t].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var dt=0,kt=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;dt<kt;)this.localTransforms[dt]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[dt]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),dt+=1;if(this.finalTransform._localMatMdf){var $t=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone($t),dt=1;dt<kt;dt+=1){var Tt=this.localTransforms[dt].matrix;$t.multiply(Tt)}$t.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var Dt=this.finalTransform.localOpacity;for(dt=0;dt<kt;dt+=1)Dt*=this.localTransforms[dt].opacity*.01;this.finalTransform.localOpacity=Dt}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var dt=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(dt.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var kt=0,$t=dt.length;for(kt=0;kt<$t;kt+=1)this.localTransforms.push(dt[kt])}}},globalToLocal:function(dt){var kt=[];kt.push(this.finalTransform);for(var $t=!0,Tt=this.comp;$t;)Tt.finalTransform?(Tt.data.hasMask&&kt.splice(0,0,Tt.finalTransform),Tt=Tt.comp):$t=!1;var Dt,Ft=kt.length,Ut;for(Dt=0;Dt<Ft;Dt+=1)Ut=kt[Dt].mat.applyToPointArray(0,0,0),dt=[dt[0]-Ut[0],dt[1]-Ut[1],0];return dt},mHelper:new Matrix};function MaskElement(et,dt,kt){this.data=et,this.element=dt,this.globalData=kt,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var $t=this.globalData.defs,Tt,Dt=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Dt),this.solidPath="";var Ft,Ut=this.masksProperties,Ht=0,Kt=[],Yt,Jt,Zt=createElementID(),er,rr,sr,nr,ir="clipPath",lr="clip-path";for(Tt=0;Tt<Dt;Tt+=1)if((Ut[Tt].mode!=="a"&&Ut[Tt].mode!=="n"||Ut[Tt].inv||Ut[Tt].o.k!==100||Ut[Tt].o.x)&&(ir="mask",lr="mask"),(Ut[Tt].mode==="s"||Ut[Tt].mode==="i")&&Ht===0?(er=createNS("rect"),er.setAttribute("fill","#ffffff"),er.setAttribute("width",this.element.comp.data.w||0),er.setAttribute("height",this.element.comp.data.h||0),Kt.push(er)):er=null,Ft=createNS("path"),Ut[Tt].mode==="n")this.viewData[Tt]={op:PropertyFactory.getProp(this.element,Ut[Tt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Ut[Tt],3),elem:Ft,lastPath:""},$t.appendChild(Ft);else{Ht+=1,Ft.setAttribute("fill",Ut[Tt].mode==="s"?"#000000":"#ffffff"),Ft.setAttribute("clip-rule","nonzero");var or;if(Ut[Tt].x.k!==0?(ir="mask",lr="mask",nr=PropertyFactory.getProp(this.element,Ut[Tt].x,0,null,this.element),or=createElementID(),rr=createNS("filter"),rr.setAttribute("id",or),sr=createNS("feMorphology"),sr.setAttribute("operator","erode"),sr.setAttribute("in","SourceGraphic"),sr.setAttribute("radius","0"),rr.appendChild(sr),$t.appendChild(rr),Ft.setAttribute("stroke",Ut[Tt].mode==="s"?"#000000":"#ffffff")):(sr=null,nr=null),this.storedData[Tt]={elem:Ft,x:nr,expan:sr,lastPath:"",lastOperator:"",filterId:or,lastRadius:0},Ut[Tt].mode==="i"){Jt=Kt.length;var cr=createNS("g");for(Yt=0;Yt<Jt;Yt+=1)cr.appendChild(Kt[Yt]);var dr=createNS("mask");dr.setAttribute("mask-type","alpha"),dr.setAttribute("id",Zt+"_"+Ht),dr.appendChild(Ft),$t.appendChild(dr),cr.setAttribute("mask","url("+getLocationHref()+"#"+Zt+"_"+Ht+")"),Kt.length=0,Kt.push(cr)}else Kt.push(Ft);Ut[Tt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[Tt]={elem:Ft,lastPath:"",op:PropertyFactory.getProp(this.element,Ut[Tt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Ut[Tt],3),invRect:er},this.viewData[Tt].prop.k||this.drawPath(Ut[Tt],this.viewData[Tt].prop.v,this.viewData[Tt])}for(this.maskElement=createNS(ir),Dt=Kt.length,Tt=0;Tt<Dt;Tt+=1)this.maskElement.appendChild(Kt[Tt]);Ht>0&&(this.maskElement.setAttribute("id",Zt),this.element.maskedElement.setAttribute(lr,"url("+getLocationHref()+"#"+Zt+")"),$t.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(et){return this.viewData[et].prop},MaskElement.prototype.renderFrame=function(et){var dt=this.element.finalTransform.mat,kt,$t=this.masksProperties.length;for(kt=0;kt<$t;kt+=1)if((this.viewData[kt].prop._mdf||et)&&this.drawPath(this.masksProperties[kt],this.viewData[kt].prop.v,this.viewData[kt]),(this.viewData[kt].op._mdf||et)&&this.viewData[kt].elem.setAttribute("fill-opacity",this.viewData[kt].op.v),this.masksProperties[kt].mode!=="n"&&(this.viewData[kt].invRect&&(this.element.finalTransform.mProp._mdf||et)&&this.viewData[kt].invRect.setAttribute("transform",dt.getInverseMatrix().to2dCSS()),this.storedData[kt].x&&(this.storedData[kt].x._mdf||et))){var Tt=this.storedData[kt].expan;this.storedData[kt].x.v<0?(this.storedData[kt].lastOperator!=="erode"&&(this.storedData[kt].lastOperator="erode",this.storedData[kt].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[kt].filterId+")")),Tt.setAttribute("radius",-this.storedData[kt].x.v)):(this.storedData[kt].lastOperator!=="dilate"&&(this.storedData[kt].lastOperator="dilate",this.storedData[kt].elem.setAttribute("filter",null)),this.storedData[kt].elem.setAttribute("stroke-width",this.storedData[kt].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var et="M0,0 ";return et+=" h"+this.globalData.compSize.w,et+=" v"+this.globalData.compSize.h,et+=" h-"+this.globalData.compSize.w,et+=" v-"+this.globalData.compSize.h+" ",et},MaskElement.prototype.drawPath=function(et,dt,kt){var $t=" M"+dt.v[0][0]+","+dt.v[0][1],Tt,Dt;for(Dt=dt._length,Tt=1;Tt<Dt;Tt+=1)$t+=" C"+dt.o[Tt-1][0]+","+dt.o[Tt-1][1]+" "+dt.i[Tt][0]+","+dt.i[Tt][1]+" "+dt.v[Tt][0]+","+dt.v[Tt][1];if(dt.c&&Dt>1&&($t+=" C"+dt.o[Tt-1][0]+","+dt.o[Tt-1][1]+" "+dt.i[0][0]+","+dt.i[0][1]+" "+dt.v[0][0]+","+dt.v[0][1]),kt.lastPath!==$t){var Ft="";kt.elem&&(dt.c&&(Ft=et.inv?this.solidPath+$t:$t),kt.elem.setAttribute("d",Ft)),kt.lastPath=$t}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var et={};et.createFilter=dt,et.createAlphaToLuminanceFilter=kt;function dt($t,Tt){var Dt=createNS("filter");return Dt.setAttribute("id",$t),Tt!==!0&&(Dt.setAttribute("filterUnits","objectBoundingBox"),Dt.setAttribute("x","0%"),Dt.setAttribute("y","0%"),Dt.setAttribute("width","100%"),Dt.setAttribute("height","100%")),Dt}function kt(){var $t=createNS("feColorMatrix");return $t.setAttribute("type","matrix"),$t.setAttribute("color-interpolation-filters","sRGB"),$t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),$t}return et}(),featureSupport=function(){var et={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(et.maskType=!1),/firefox/i.test(navigator.userAgent)&&(et.svgLumaHidden=!1),et}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(et){var dt,kt="SourceGraphic",$t=et.data.ef?et.data.ef.length:0,Tt=createElementID(),Dt=filtersFactory.createFilter(Tt,!0),Ft=0;this.filters=[];var Ut;for(dt=0;dt<$t;dt+=1){Ut=null;var Ht=et.data.ef[dt].ty;if(registeredEffects$1[Ht]){var Kt=registeredEffects$1[Ht].effect;Ut=new Kt(Dt,et.effectsManager.effectElements[dt],et,idPrefix+Ft,kt),kt=idPrefix+Ft,registeredEffects$1[Ht].countsAsEffect&&(Ft+=1)}Ut&&this.filters.push(Ut)}Ft&&(et.globalData.defs.appendChild(Dt),et.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+Tt+")")),this.filters.length&&et.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(et){var dt,kt=this.filters.length;for(dt=0;dt<kt;dt+=1)this.filters[dt].renderFrame(et)},SVGEffects.prototype.getEffects=function(et){var dt,kt=this.filters.length,$t=[];for(dt=0;dt<kt;dt+=1)this.filters[dt].type===et&&$t.push(this.filters[dt]);return $t};function registerEffect$1(et,dt,kt){registeredEffects$1[et]={effect:dt,countsAsEffect:kt}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var dt=null;if(this.data.td){this.matteMasks={};var kt=createNS("g");kt.setAttribute("id",this.layerId),kt.appendChild(this.layerElement),dt=kt,this.globalData.defs.appendChild(kt)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),dt=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var $t=createNS("clipPath"),Tt=createNS("path");Tt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var Dt=createElementID();if($t.setAttribute("id",Dt),$t.appendChild(Tt),this.globalData.defs.appendChild($t),this.checkMasks()){var Ft=createNS("g");Ft.setAttribute("clip-path","url("+getLocationHref()+"#"+Dt+")"),Ft.appendChild(this.layerElement),this.transformedElement=Ft,dt?dt.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Dt+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(dt){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[dt]){var kt=this.layerId+"_"+dt,$t,Tt,Dt,Ft;if(dt===1||dt===3){var Ut=createNS("mask");Ut.setAttribute("id",kt),Ut.setAttribute("mask-type",dt===3?"luminance":"alpha"),Dt=createNS("use"),Dt.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Ut.appendChild(Dt),this.globalData.defs.appendChild(Ut),!featureSupport.maskType&&dt===1&&(Ut.setAttribute("mask-type","luminance"),$t=createElementID(),Tt=filtersFactory.createFilter($t),this.globalData.defs.appendChild(Tt),Tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Ft=createNS("g"),Ft.appendChild(Dt),Ut.appendChild(Ft),Ft.setAttribute("filter","url("+getLocationHref()+"#"+$t+")"))}else if(dt===2){var Ht=createNS("mask");Ht.setAttribute("id",kt),Ht.setAttribute("mask-type","alpha");var Kt=createNS("g");Ht.appendChild(Kt),$t=createElementID(),Tt=filtersFactory.createFilter($t);var Yt=createNS("feComponentTransfer");Yt.setAttribute("in","SourceGraphic"),Tt.appendChild(Yt);var Jt=createNS("feFuncA");Jt.setAttribute("type","table"),Jt.setAttribute("tableValues","1.0 0.0"),Yt.appendChild(Jt),this.globalData.defs.appendChild(Tt);var Zt=createNS("rect");Zt.setAttribute("width",this.comp.data.w),Zt.setAttribute("height",this.comp.data.h),Zt.setAttribute("x","0"),Zt.setAttribute("y","0"),Zt.setAttribute("fill","#ffffff"),Zt.setAttribute("opacity","0"),Kt.setAttribute("filter","url("+getLocationHref()+"#"+$t+")"),Kt.appendChild(Zt),Dt=createNS("use"),Dt.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Kt.appendChild(Dt),featureSupport.maskType||(Ht.setAttribute("mask-type","luminance"),Tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Ft=createNS("g"),Kt.appendChild(Zt),Ft.appendChild(this.layerElement),Kt.appendChild(Ft)),this.globalData.defs.appendChild(Ht)}this.matteMasks[dt]=kt}return this.matteMasks[dt]},setMatte:function(dt){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+dt+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(dt){this.hierarchy=dt},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var et={initElement:function(kt,$t,Tt){this.initFrame(),this.initBaseData(kt,$t,Tt),this.initTransform(kt,$t,Tt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var kt=this.baseElement||this.layerElement;kt.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var kt=this.baseElement||this.layerElement;kt.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(kt){this._mdf=!1,this.prepareRenderableFrame(kt),this.prepareProperties(kt,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(et)],RenderableDOMElement)})();function IImageElement(et,dt,kt){this.assetData=dt.getAssetData(et.refId),this.assetData&&this.assetData.sid&&(this.assetData=dt.slotManager.getProp(this.assetData)),this.initElement(et,dt,kt),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var et=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",et),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(et,dt){this.elem=et,this.pos=dt}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(dt){var kt,$t=this.shapeModifiers.length;for(kt=0;kt<$t;kt+=1)this.shapeModifiers[kt].addShape(dt)},isShapeInAnimatedModifiers:function(dt){for(var kt=0,$t=this.shapeModifiers.length;kt<$t;)if(this.shapeModifiers[kt].isAnimatedWithShape(dt))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var dt,kt=this.shapes.length;for(dt=0;dt<kt;dt+=1)this.shapes[dt].sh.reset();kt=this.shapeModifiers.length;var $t;for(dt=kt-1;dt>=0&&($t=this.shapeModifiers[dt].processShapes(this._isFirstFrame),!$t);dt-=1);}},searchProcessedElement:function(dt){for(var kt=this.processedElements,$t=0,Tt=kt.length;$t<Tt;){if(kt[$t].elem===dt)return kt[$t].pos;$t+=1}return 0},addProcessedElement:function(dt,kt){for(var $t=this.processedElements,Tt=$t.length;Tt;)if(Tt-=1,$t[Tt].elem===dt){$t[Tt].pos=kt;return}$t.push(new ProcessedElement(dt,kt))},prepareFrame:function(dt){this.prepareRenderableFrame(dt),this.prepareProperties(dt,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(et,dt,kt){this.caches=[],this.styles=[],this.transformers=et,this.lStr="",this.sh=kt,this.lvl=dt,this._isAnimated=!!kt.k;for(var $t=0,Tt=et.length;$t<Tt;){if(et[$t].mProps.dynamicProperties.length){this._isAnimated=!0;break}$t+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(et,dt){this.data=et,this.type=et.ty,this.d="",this.lvl=dt,this._mdf=!1,this.closed=et.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(et,dt,kt,$t){this.elem=et,this.frameId=-1,this.dataProps=createSizedArray(dt.length),this.renderer=kt,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",dt.length?dt.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer($t);var Tt,Dt=dt.length||0,Ft;for(Tt=0;Tt<Dt;Tt+=1)Ft=PropertyFactory.getProp(et,dt[Tt].v,0,0,this),this.k=Ft.k||this.k,this.dataProps[Tt]={n:dt[Tt].n,p:Ft};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(et){if(!(this.elem.globalData.frameId===this.frameId&&!et)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||et,this._mdf)){var dt=0,kt=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),dt=0;dt<kt;dt+=1)this.dataProps[dt].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[dt].p.v:this.dashArray[dt]=this.dataProps[dt].p.v:this.dashoffset[0]=this.dataProps[dt].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(et,dt,kt){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(et,dt.o,0,.01,this),this.w=PropertyFactory.getProp(et,dt.w,0,null,this),this.d=new DashProperty(et,dt.d||{},"svg",this),this.c=PropertyFactory.getProp(et,dt.c,1,255,this),this.style=kt,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(et,dt,kt){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(et,dt.o,0,.01,this),this.c=PropertyFactory.getProp(et,dt.c,1,255,this),this.style=kt}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(et,dt,kt){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.style=kt}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(et,dt,kt){this.data=dt,this.c=createTypedArray("uint8c",dt.p*4);var $t=dt.k.k[0].s?dt.k.k[0].s.length-dt.p*4:dt.k.k.length-dt.p*4;this.o=createTypedArray("float32",$t),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=$t,this.initDynamicPropertyContainer(kt),this.prop=PropertyFactory.getProp(et,dt.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(et,dt){for(var kt=0,$t=this.o.length/2,Tt;kt<$t;){if(Tt=Math.abs(et[kt*4]-et[dt*4+kt*2]),Tt>.01)return!1;kt+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var et=0,dt=this.data.k.k.length;et<dt;){if(!this.comparePoints(this.data.k.k[et].s,this.data.p))return!1;et+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(et){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||et){var dt,kt=this.data.p*4,$t,Tt;for(dt=0;dt<kt;dt+=1)$t=dt%4===0?100:255,Tt=Math.round(this.prop.v[dt]*$t),this.c[dt]!==Tt&&(this.c[dt]=Tt,this._cmdf=!et);if(this.o.length)for(kt=this.prop.v.length,dt=this.data.p*4;dt<kt;dt+=1)$t=dt%2===0?100:1,Tt=dt%2===0?Math.round(this.prop.v[dt]*100):this.prop.v[dt],this.o[dt-this.data.p*4]!==Tt&&(this.o[dt-this.data.p*4]=Tt,this._omdf=!et);this._mdf=!et}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(et,dt,kt){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.initGradientData(et,dt,kt)}SVGGradientFillStyleData.prototype.initGradientData=function(et,dt,kt){this.o=PropertyFactory.getProp(et,dt.o,0,.01,this),this.s=PropertyFactory.getProp(et,dt.s,1,null,this),this.e=PropertyFactory.getProp(et,dt.e,1,null,this),this.h=PropertyFactory.getProp(et,dt.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(et,dt.a||{k:0},0,degToRads,this),this.g=new GradientProperty(et,dt.g,this),this.style=kt,this.stops=[],this.setGradientData(kt.pElem,dt),this.setGradientOpacity(dt,kt),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(et,dt){var kt=createElementID(),$t=createNS(dt.t===1?"linearGradient":"radialGradient");$t.setAttribute("id",kt),$t.setAttribute("spreadMethod","pad"),$t.setAttribute("gradientUnits","userSpaceOnUse");var Tt=[],Dt,Ft,Ut;for(Ut=dt.g.p*4,Ft=0;Ft<Ut;Ft+=4)Dt=createNS("stop"),$t.appendChild(Dt),Tt.push(Dt);et.setAttribute(dt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+kt+")"),this.gf=$t,this.cst=Tt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(et,dt){if(this.g._hasOpacity&&!this.g._collapsable){var kt,$t,Tt,Dt=createNS("mask"),Ft=createNS("path");Dt.appendChild(Ft);var Ut=createElementID(),Ht=createElementID();Dt.setAttribute("id",Ht);var Kt=createNS(et.t===1?"linearGradient":"radialGradient");Kt.setAttribute("id",Ut),Kt.setAttribute("spreadMethod","pad"),Kt.setAttribute("gradientUnits","userSpaceOnUse"),Tt=et.g.k.k[0].s?et.g.k.k[0].s.length:et.g.k.k.length;var Yt=this.stops;for($t=et.g.p*4;$t<Tt;$t+=2)kt=createNS("stop"),kt.setAttribute("stop-color","rgb(255,255,255)"),Kt.appendChild(kt),Yt.push(kt);Ft.setAttribute(et.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Ut+")"),et.ty==="gs"&&(Ft.setAttribute("stroke-linecap",lineCapEnum[et.lc||2]),Ft.setAttribute("stroke-linejoin",lineJoinEnum[et.lj||2]),et.lj===1&&Ft.setAttribute("stroke-miterlimit",et.ml)),this.of=Kt,this.ms=Dt,this.ost=Yt,this.maskId=Ht,dt.msElem=Ft}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(et,dt,kt){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(et,dt.w,0,null,this),this.d=new DashProperty(et,dt.d||{},"svg",this),this.initGradientData(et,dt,kt),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(et,dt,kt){this.transform={mProps:et,op:dt,container:kt},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(dt,kt,$t,Tt){if(kt===0)return"";var Dt=dt.o,Ft=dt.i,Ut=dt.v,Ht,Kt=" M"+Tt.applyToPointStringified(Ut[0][0],Ut[0][1]);for(Ht=1;Ht<kt;Ht+=1)Kt+=" C"+Tt.applyToPointStringified(Dt[Ht-1][0],Dt[Ht-1][1])+" "+Tt.applyToPointStringified(Ft[Ht][0],Ft[Ht][1])+" "+Tt.applyToPointStringified(Ut[Ht][0],Ut[Ht][1]);return $t&&kt&&(Kt+=" C"+Tt.applyToPointStringified(Dt[Ht-1][0],Dt[Ht-1][1])+" "+Tt.applyToPointStringified(Ft[0][0],Ft[0][1])+" "+Tt.applyToPointStringified(Ut[0][0],Ut[0][1]),Kt+="z"),Kt},SVGElementsRenderer=function(){var et=new Matrix,dt=new Matrix,kt={createRenderFunction:$t};function $t(Jt){switch(Jt.ty){case"fl":return Ut;case"gf":return Kt;case"gs":return Ht;case"st":return Yt;case"sh":case"el":case"rc":case"sr":return Ft;case"tr":return Tt;case"no":return Dt;default:return null}}function Tt(Jt,Zt,er){(er||Zt.transform.op._mdf)&&Zt.transform.container.setAttribute("opacity",Zt.transform.op.v),(er||Zt.transform.mProps._mdf)&&Zt.transform.container.setAttribute("transform",Zt.transform.mProps.v.to2dCSS())}function Dt(){}function Ft(Jt,Zt,er){var rr,sr,nr,ir,lr,or,cr=Zt.styles.length,dr=Zt.lvl,ur,pr,mr,jr;for(or=0;or<cr;or+=1){if(ir=Zt.sh._mdf||er,Zt.styles[or].lvl<dr){for(pr=dt.reset(),mr=dr-Zt.styles[or].lvl,jr=Zt.transformers.length-1;!ir&&mr>0;)ir=Zt.transformers[jr].mProps._mdf||ir,mr-=1,jr-=1;if(ir)for(mr=dr-Zt.styles[or].lvl,jr=Zt.transformers.length-1;mr>0;)pr.multiply(Zt.transformers[jr].mProps.v),mr-=1,jr-=1}else pr=et;if(ur=Zt.sh.paths,sr=ur._length,ir){for(nr="",rr=0;rr<sr;rr+=1)lr=ur.shapes[rr],lr&&lr._length&&(nr+=buildShapeString(lr,lr._length,lr.c,pr));Zt.caches[or]=nr}else nr=Zt.caches[or];Zt.styles[or].d+=Jt.hd===!0?"":nr,Zt.styles[or]._mdf=ir||Zt.styles[or]._mdf}}function Ut(Jt,Zt,er){var rr=Zt.style;(Zt.c._mdf||er)&&rr.pElem.setAttribute("fill","rgb("+bmFloor(Zt.c.v[0])+","+bmFloor(Zt.c.v[1])+","+bmFloor(Zt.c.v[2])+")"),(Zt.o._mdf||er)&&rr.pElem.setAttribute("fill-opacity",Zt.o.v)}function Ht(Jt,Zt,er){Kt(Jt,Zt,er),Yt(Jt,Zt,er)}function Kt(Jt,Zt,er){var rr=Zt.gf,sr=Zt.g._hasOpacity,nr=Zt.s.v,ir=Zt.e.v;if(Zt.o._mdf||er){var lr=Jt.ty==="gf"?"fill-opacity":"stroke-opacity";Zt.style.pElem.setAttribute(lr,Zt.o.v)}if(Zt.s._mdf||er){var or=Jt.t===1?"x1":"cx",cr=or==="x1"?"y1":"cy";rr.setAttribute(or,nr[0]),rr.setAttribute(cr,nr[1]),sr&&!Zt.g._collapsable&&(Zt.of.setAttribute(or,nr[0]),Zt.of.setAttribute(cr,nr[1]))}var dr,ur,pr,mr;if(Zt.g._cmdf||er){dr=Zt.cst;var jr=Zt.g.c;for(pr=dr.length,ur=0;ur<pr;ur+=1)mr=dr[ur],mr.setAttribute("offset",jr[ur*4]+"%"),mr.setAttribute("stop-color","rgb("+jr[ur*4+1]+","+jr[ur*4+2]+","+jr[ur*4+3]+")")}if(sr&&(Zt.g._omdf||er)){var Rr=Zt.g.o;for(Zt.g._collapsable?dr=Zt.cst:dr=Zt.ost,pr=dr.length,ur=0;ur<pr;ur+=1)mr=dr[ur],Zt.g._collapsable||mr.setAttribute("offset",Rr[ur*2]+"%"),mr.setAttribute("stop-opacity",Rr[ur*2+1])}if(Jt.t===1)(Zt.e._mdf||er)&&(rr.setAttribute("x2",ir[0]),rr.setAttribute("y2",ir[1]),sr&&!Zt.g._collapsable&&(Zt.of.setAttribute("x2",ir[0]),Zt.of.setAttribute("y2",ir[1])));else{var br;if((Zt.s._mdf||Zt.e._mdf||er)&&(br=Math.sqrt(Math.pow(nr[0]-ir[0],2)+Math.pow(nr[1]-ir[1],2)),rr.setAttribute("r",br),sr&&!Zt.g._collapsable&&Zt.of.setAttribute("r",br)),Zt.e._mdf||Zt.h._mdf||Zt.a._mdf||er){br||(br=Math.sqrt(Math.pow(nr[0]-ir[0],2)+Math.pow(nr[1]-ir[1],2)));var _r=Math.atan2(ir[1]-nr[1],ir[0]-nr[0]),Mr=Zt.h.v;Mr>=1?Mr=.99:Mr<=-1&&(Mr=-.99);var Pr=br*Mr,Or=Math.cos(_r+Zt.a.v)*Pr+nr[0],kr=Math.sin(_r+Zt.a.v)*Pr+nr[1];rr.setAttribute("fx",Or),rr.setAttribute("fy",kr),sr&&!Zt.g._collapsable&&(Zt.of.setAttribute("fx",Or),Zt.of.setAttribute("fy",kr))}}}function Yt(Jt,Zt,er){var rr=Zt.style,sr=Zt.d;sr&&(sr._mdf||er)&&sr.dashStr&&(rr.pElem.setAttribute("stroke-dasharray",sr.dashStr),rr.pElem.setAttribute("stroke-dashoffset",sr.dashoffset[0])),Zt.c&&(Zt.c._mdf||er)&&rr.pElem.setAttribute("stroke","rgb("+bmFloor(Zt.c.v[0])+","+bmFloor(Zt.c.v[1])+","+bmFloor(Zt.c.v[2])+")"),(Zt.o._mdf||er)&&rr.pElem.setAttribute("stroke-opacity",Zt.o.v),(Zt.w._mdf||er)&&(rr.pElem.setAttribute("stroke-width",Zt.w.v),rr.msElem&&rr.msElem.setAttribute("stroke-width",Zt.w.v))}return kt}();function SVGShapeElement(et,dt,kt){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(et,dt,kt),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var et,dt=this.shapes.length,kt,$t,Tt=this.stylesList.length,Dt,Ft=[],Ut=!1;for($t=0;$t<Tt;$t+=1){for(Dt=this.stylesList[$t],Ut=!1,Ft.length=0,et=0;et<dt;et+=1)kt=this.shapes[et],kt.styles.indexOf(Dt)!==-1&&(Ft.push(kt),Ut=kt._isAnimated||Ut);Ft.length>1&&Ut&&this.setShapesAsAnimated(Ft)}},SVGShapeElement.prototype.setShapesAsAnimated=function(et){var dt,kt=et.length;for(dt=0;dt<kt;dt+=1)et[dt].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(et,dt){var kt,$t=new SVGStyleData(et,dt),Tt=$t.pElem;if(et.ty==="st")kt=new SVGStrokeStyleData(this,et,$t);else if(et.ty==="fl")kt=new SVGFillStyleData(this,et,$t);else if(et.ty==="gf"||et.ty==="gs"){var Dt=et.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;kt=new Dt(this,et,$t),this.globalData.defs.appendChild(kt.gf),kt.maskId&&(this.globalData.defs.appendChild(kt.ms),this.globalData.defs.appendChild(kt.of),Tt.setAttribute("mask","url("+getLocationHref()+"#"+kt.maskId+")"))}else et.ty==="no"&&(kt=new SVGNoStyleData(this,et,$t));return(et.ty==="st"||et.ty==="gs")&&(Tt.setAttribute("stroke-linecap",lineCapEnum[et.lc||2]),Tt.setAttribute("stroke-linejoin",lineJoinEnum[et.lj||2]),Tt.setAttribute("fill-opacity","0"),et.lj===1&&Tt.setAttribute("stroke-miterlimit",et.ml)),et.r===2&&Tt.setAttribute("fill-rule","evenodd"),et.ln&&Tt.setAttribute("id",et.ln),et.cl&&Tt.setAttribute("class",et.cl),et.bm&&(Tt.style["mix-blend-mode"]=getBlendMode(et.bm)),this.stylesList.push($t),this.addToAnimatedContents(et,kt),kt},SVGShapeElement.prototype.createGroupElement=function(et){var dt=new ShapeGroupData;return et.ln&&dt.gr.setAttribute("id",et.ln),et.cl&&dt.gr.setAttribute("class",et.cl),et.bm&&(dt.gr.style["mix-blend-mode"]=getBlendMode(et.bm)),dt},SVGShapeElement.prototype.createTransformElement=function(et,dt){var kt=TransformPropertyFactory.getTransformProperty(this,et,this),$t=new SVGTransformData(kt,kt.o,dt);return this.addToAnimatedContents(et,$t),$t},SVGShapeElement.prototype.createShapeElement=function(et,dt,kt){var $t=4;et.ty==="rc"?$t=5:et.ty==="el"?$t=6:et.ty==="sr"&&($t=7);var Tt=ShapePropertyFactory.getShapeProp(this,et,$t,this),Dt=new SVGShapeData(dt,kt,Tt);return this.shapes.push(Dt),this.addShapeToModifiers(Dt),this.addToAnimatedContents(et,Dt),Dt},SVGShapeElement.prototype.addToAnimatedContents=function(et,dt){for(var kt=0,$t=this.animatedContents.length;kt<$t;){if(this.animatedContents[kt].element===dt)return;kt+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(et),element:dt,data:et})},SVGShapeElement.prototype.setElementStyles=function(et){var dt=et.styles,kt,$t=this.stylesList.length;for(kt=0;kt<$t;kt+=1)this.stylesList[kt].closed||dt.push(this.stylesList[kt])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var et,dt=this.itemsData.length;for(et=0;et<dt;et+=1)this.prevViewData[et]=this.itemsData[et];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),dt=this.dynamicProperties.length,et=0;et<dt;et+=1)this.dynamicProperties[et].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(et,dt,kt,$t,Tt,Dt,Ft){var Ut=[].concat(Dt),Ht,Kt=et.length-1,Yt,Jt,Zt=[],er=[],rr,sr,nr;for(Ht=Kt;Ht>=0;Ht-=1){if(nr=this.searchProcessedElement(et[Ht]),nr?dt[Ht]=kt[nr-1]:et[Ht]._render=Ft,et[Ht].ty==="fl"||et[Ht].ty==="st"||et[Ht].ty==="gf"||et[Ht].ty==="gs"||et[Ht].ty==="no")nr?dt[Ht].style.closed=!1:dt[Ht]=this.createStyleElement(et[Ht],Tt),et[Ht]._render&&dt[Ht].style.pElem.parentNode!==$t&&$t.appendChild(dt[Ht].style.pElem),Zt.push(dt[Ht].style);else if(et[Ht].ty==="gr"){if(!nr)dt[Ht]=this.createGroupElement(et[Ht]);else for(Jt=dt[Ht].it.length,Yt=0;Yt<Jt;Yt+=1)dt[Ht].prevViewData[Yt]=dt[Ht].it[Yt];this.searchShapes(et[Ht].it,dt[Ht].it,dt[Ht].prevViewData,dt[Ht].gr,Tt+1,Ut,Ft),et[Ht]._render&&dt[Ht].gr.parentNode!==$t&&$t.appendChild(dt[Ht].gr)}else et[Ht].ty==="tr"?(nr||(dt[Ht]=this.createTransformElement(et[Ht],$t)),rr=dt[Ht].transform,Ut.push(rr)):et[Ht].ty==="sh"||et[Ht].ty==="rc"||et[Ht].ty==="el"||et[Ht].ty==="sr"?(nr||(dt[Ht]=this.createShapeElement(et[Ht],Ut,Tt)),this.setElementStyles(dt[Ht])):et[Ht].ty==="tm"||et[Ht].ty==="rd"||et[Ht].ty==="ms"||et[Ht].ty==="pb"||et[Ht].ty==="zz"||et[Ht].ty==="op"?(nr?(sr=dt[Ht],sr.closed=!1):(sr=ShapeModifiers.getModifier(et[Ht].ty),sr.init(this,et[Ht]),dt[Ht]=sr,this.shapeModifiers.push(sr)),er.push(sr)):et[Ht].ty==="rp"&&(nr?(sr=dt[Ht],sr.closed=!0):(sr=ShapeModifiers.getModifier(et[Ht].ty),dt[Ht]=sr,sr.init(this,et,Ht,dt),this.shapeModifiers.push(sr),Ft=!1),er.push(sr));this.addProcessedElement(et[Ht],Ht+1)}for(Kt=Zt.length,Ht=0;Ht<Kt;Ht+=1)Zt[Ht].closed=!0;for(Kt=er.length,Ht=0;Ht<Kt;Ht+=1)er[Ht].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var et,dt=this.stylesList.length;for(et=0;et<dt;et+=1)this.stylesList[et].reset();for(this.renderShape(),et=0;et<dt;et+=1)(this.stylesList[et]._mdf||this._isFirstFrame)&&(this.stylesList[et].msElem&&(this.stylesList[et].msElem.setAttribute("d",this.stylesList[et].d),this.stylesList[et].d="M0 0"+this.stylesList[et].d),this.stylesList[et].pElem.setAttribute("d",this.stylesList[et].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var et,dt=this.animatedContents.length,kt;for(et=0;et<dt;et+=1)kt=this.animatedContents[et],(this._isFirstFrame||kt.element._isAnimated)&&kt.data!==!0&&kt.fn(kt.data,kt.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(et,dt,kt,$t,Tt,Dt){this.o=et,this.sw=dt,this.sc=kt,this.fc=$t,this.m=Tt,this.p=Dt,this._mdf={o:!0,sw:!!dt,sc:!!kt,fc:!!$t,m:!0,p:!0}}LetterProps.prototype.update=function(et,dt,kt,$t,Tt,Dt){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Ft=!1;return this.o!==et&&(this.o=et,this._mdf.o=!0,Ft=!0),this.sw!==dt&&(this.sw=dt,this._mdf.sw=!0,Ft=!0),this.sc!==kt&&(this.sc=kt,this._mdf.sc=!0,Ft=!0),this.fc!==$t&&(this.fc=$t,this._mdf.fc=!0,Ft=!0),this.m!==Tt&&(this.m=Tt,this._mdf.m=!0,Ft=!0),Dt.length&&(this.p[0]!==Dt[0]||this.p[1]!==Dt[1]||this.p[4]!==Dt[4]||this.p[5]!==Dt[5]||this.p[12]!==Dt[12]||this.p[13]!==Dt[13])&&(this.p=Dt,this._mdf.p=!0,Ft=!0),Ft};function TextProperty(et,dt){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,dt.d&&dt.d.sid&&(dt.d=et.globalData.slotManager.getProp(dt.d)),this.data=dt,this.elem=et,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(et,dt){for(var kt in dt)Object.prototype.hasOwnProperty.call(dt,kt)&&(et[kt]=dt[kt]);return et},TextProperty.prototype.setCurrentData=function(et){et.__complete||this.completeTextData(et),this.currentData=et,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(et){this.effectsSequence.push(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(et){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!et)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var dt=this.currentData,kt=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var $t,Tt=this.effectsSequence.length,Dt=et||this.data.d.k[this.keysIndex].s;for($t=0;$t<Tt;$t+=1)kt!==this.keysIndex?Dt=this.effectsSequence[$t](Dt,Dt.t):Dt=this.effectsSequence[$t](this.currentData,Dt.t);dt!==Dt&&this.setCurrentData(Dt),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var et=this.data.d.k,dt=this.elem.comp.renderedFrame,kt=0,$t=et.length;kt<=$t-1&&!(kt===$t-1||et[kt+1].t>dt);)kt+=1;return this.keysIndex!==kt&&(this.keysIndex=kt),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(et){for(var dt=[],kt=0,$t=et.length,Tt,Dt,Ft=!1,Ut=!1,Ht="";kt<$t;)Ft=Ut,Ut=!1,Tt=et.charCodeAt(kt),Ht=et.charAt(kt),FontManager.isCombinedCharacter(Tt)?Ft=!0:Tt>=55296&&Tt<=56319?FontManager.isRegionalFlag(et,kt)?Ht=et.substr(kt,14):(Dt=et.charCodeAt(kt+1),Dt>=56320&&Dt<=57343&&(FontManager.isModifier(Tt,Dt)?(Ht=et.substr(kt,2),Ft=!0):FontManager.isFlagEmoji(et.substr(kt,4))?Ht=et.substr(kt,4):Ht=et.substr(kt,2))):Tt>56319?(Dt=et.charCodeAt(kt+1),FontManager.isVariationSelector(Tt)&&(Ft=!0)):FontManager.isZeroWidthJoiner(Tt)&&(Ft=!0,Ut=!0),Ft?(dt[dt.length-1]+=Ht,Ft=!1):dt.push(Ht),kt+=Ht.length;return dt},TextProperty.prototype.completeTextData=function(et){et.__complete=!0;var dt=this.elem.globalData.fontManager,kt=this.data,$t=[],Tt,Dt,Ft,Ut=0,Ht,Kt=kt.m.g,Yt=0,Jt=0,Zt=0,er=[],rr=0,sr=0,nr,ir,lr=dt.getFontByName(et.f),or,cr=0,dr=getFontProperties(lr);et.fWeight=dr.weight,et.fStyle=dr.style,et.finalSize=et.s,et.finalText=this.buildFinalText(et.t),Dt=et.finalText.length,et.finalLineHeight=et.lh;var ur=et.tr/1e3*et.finalSize,pr;if(et.sz)for(var mr=!0,jr=et.sz[0],Rr=et.sz[1],br,_r;mr;){_r=this.buildFinalText(et.t),br=0,rr=0,Dt=_r.length,ur=et.tr/1e3*et.finalSize;var Mr=-1;for(Tt=0;Tt<Dt;Tt+=1)pr=_r[Tt].charCodeAt(0),Ft=!1,_r[Tt]===" "?Mr=Tt:(pr===13||pr===3)&&(rr=0,Ft=!0,br+=et.finalLineHeight||et.finalSize*1.2),dt.chars?(or=dt.getCharData(_r[Tt],lr.fStyle,lr.fFamily),cr=Ft?0:or.w*et.finalSize/100):cr=dt.measureText(_r[Tt],et.f,et.finalSize),rr+cr>jr&&_r[Tt]!==" "?(Mr===-1?Dt+=1:Tt=Mr,br+=et.finalLineHeight||et.finalSize*1.2,_r.splice(Tt,Mr===Tt?1:0,"\r"),Mr=-1,rr=0):(rr+=cr,rr+=ur);br+=lr.ascent*et.finalSize/100,this.canResize&&et.finalSize>this.minimumFontSize&&Rr<br?(et.finalSize-=1,et.finalLineHeight=et.finalSize*et.lh/et.s):(et.finalText=_r,Dt=et.finalText.length,mr=!1)}rr=-ur,cr=0;var Pr=0,Or;for(Tt=0;Tt<Dt;Tt+=1)if(Ft=!1,Or=et.finalText[Tt],pr=Or.charCodeAt(0),pr===13||pr===3?(Pr=0,er.push(rr),sr=rr>sr?rr:sr,rr=-2*ur,Ht="",Ft=!0,Zt+=1):Ht=Or,dt.chars?(or=dt.getCharData(Or,lr.fStyle,dt.getFontByName(et.f).fFamily),cr=Ft?0:or.w*et.finalSize/100):cr=dt.measureText(Ht,et.f,et.finalSize),Or===" "?Pr+=cr+ur:(rr+=cr+ur+Pr,Pr=0),$t.push({l:cr,an:cr,add:Yt,n:Ft,anIndexes:[],val:Ht,line:Zt,animatorJustifyOffset:0}),Kt==2){if(Yt+=cr,Ht===""||Ht===" "||Tt===Dt-1){for((Ht===""||Ht===" ")&&(Yt-=cr);Jt<=Tt;)$t[Jt].an=Yt,$t[Jt].ind=Ut,$t[Jt].extra=cr,Jt+=1;Ut+=1,Yt=0}}else if(Kt==3){if(Yt+=cr,Ht===""||Tt===Dt-1){for(Ht===""&&(Yt-=cr);Jt<=Tt;)$t[Jt].an=Yt,$t[Jt].ind=Ut,$t[Jt].extra=cr,Jt+=1;Yt=0,Ut+=1}}else $t[Ut].ind=Ut,$t[Ut].extra=0,Ut+=1;if(et.l=$t,sr=rr>sr?rr:sr,er.push(rr),et.sz)et.boxWidth=et.sz[0],et.justifyOffset=0;else switch(et.boxWidth=sr,et.j){case 1:et.justifyOffset=-et.boxWidth;break;case 2:et.justifyOffset=-et.boxWidth/2;break;default:et.justifyOffset=0}et.lineWidths=er;var kr=kt.a,Tr,xr;ir=kr.length;var wr,zr,Hr=[];for(nr=0;nr<ir;nr+=1){for(Tr=kr[nr],Tr.a.sc&&(et.strokeColorAnim=!0),Tr.a.sw&&(et.strokeWidthAnim=!0),(Tr.a.fc||Tr.a.fh||Tr.a.fs||Tr.a.fb)&&(et.fillColorAnim=!0),zr=0,wr=Tr.s.b,Tt=0;Tt<Dt;Tt+=1)xr=$t[Tt],xr.anIndexes[nr]=zr,(wr==1&&xr.val!==""||wr==2&&xr.val!==""&&xr.val!==" "||wr==3&&(xr.n||xr.val==" "||Tt==Dt-1)||wr==4&&(xr.n||Tt==Dt-1))&&(Tr.s.rn===1&&Hr.push(zr),zr+=1);kt.a[nr].s.totalChars=zr;var Yr=-1,rs;if(Tr.s.rn===1)for(Tt=0;Tt<Dt;Tt+=1)xr=$t[Tt],Yr!=xr.anIndexes[nr]&&(Yr=xr.anIndexes[nr],rs=Hr.splice(Math.floor(Math.random()*Hr.length),1)[0]),xr.anIndexes[nr]=rs}et.yOffset=et.finalLineHeight||et.finalSize*1.2,et.ls=et.ls||0,et.ascent=lr.ascent*et.finalSize/100},TextProperty.prototype.updateDocumentData=function(et,dt){dt=dt===void 0?this.keysIndex:dt;var kt=this.copyData({},this.data.d.k[dt].s);kt=this.copyData(kt,et),this.data.d.k[dt].s=kt,this.recalculate(dt),this.setCurrentData(kt),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(et){var dt=this.data.d.k[et].s;dt.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(dt)},TextProperty.prototype.canResizeFont=function(et){this.canResize=et,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(et){this.minimumFontSize=Math.floor(et)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var et=Math.max,dt=Math.min,kt=Math.floor;function $t(Dt,Ft){this._currentTextLength=-1,this.k=!1,this.data=Ft,this.elem=Dt,this.comp=Dt.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(Dt),this.s=PropertyFactory.getProp(Dt,Ft.s||{k:0},0,0,this),"e"in Ft?this.e=PropertyFactory.getProp(Dt,Ft.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(Dt,Ft.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(Dt,Ft.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(Dt,Ft.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(Dt,Ft.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(Dt,Ft.a,0,.01,this),this.dynamicProperties.length||this.getValue()}$t.prototype={getMult:function(Ft){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var Ut=0,Ht=0,Kt=1,Yt=1;this.ne.v>0?Ut=this.ne.v/100:Ht=-this.ne.v/100,this.xe.v>0?Kt=1-this.xe.v/100:Yt=1+this.xe.v/100;var Jt=BezierFactory.getBezierEasing(Ut,Ht,Kt,Yt).get,Zt=0,er=this.finalS,rr=this.finalE,sr=this.data.sh;if(sr===2)rr===er?Zt=Ft>=rr?1:0:Zt=et(0,dt(.5/(rr-er)+(Ft-er)/(rr-er),1)),Zt=Jt(Zt);else if(sr===3)rr===er?Zt=Ft>=rr?0:1:Zt=1-et(0,dt(.5/(rr-er)+(Ft-er)/(rr-er),1)),Zt=Jt(Zt);else if(sr===4)rr===er?Zt=0:(Zt=et(0,dt(.5/(rr-er)+(Ft-er)/(rr-er),1)),Zt<.5?Zt*=2:Zt=1-2*(Zt-.5)),Zt=Jt(Zt);else if(sr===5){if(rr===er)Zt=0;else{var nr=rr-er;Ft=dt(et(0,Ft+.5-er),rr-er);var ir=-nr/2+Ft,lr=nr/2;Zt=Math.sqrt(1-ir*ir/(lr*lr))}Zt=Jt(Zt)}else sr===6?(rr===er?Zt=0:(Ft=dt(et(0,Ft+.5-er),rr-er),Zt=(1+Math.cos(Math.PI+Math.PI*2*Ft/(rr-er)))/2),Zt=Jt(Zt)):(Ft>=kt(er)&&(Ft-er<0?Zt=et(0,dt(dt(rr,1)-(er-Ft),1)):Zt=et(0,dt(rr-Ft,1))),Zt=Jt(Zt));if(this.sm.v!==100){var or=this.sm.v*.01;or===0&&(or=1e-8);var cr=.5-or*.5;Zt<cr?Zt=0:(Zt=(Zt-cr)/or,Zt>1&&(Zt=1))}return Zt*this.a.v},getValue:function(Ft){this.iterateDynamicProperties(),this._mdf=Ft||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,Ft&&this.data.r===2&&(this.e.v=this._currentTextLength);var Ut=this.data.r===2?1:100/this.data.totalChars,Ht=this.o.v/Ut,Kt=this.s.v/Ut+Ht,Yt=this.e.v/Ut+Ht;if(Kt>Yt){var Jt=Kt;Kt=Yt,Yt=Jt}this.finalS=Kt,this.finalE=Yt}},extendPrototype([DynamicPropertyContainer],$t);function Tt(Dt,Ft,Ut){return new $t(Dt,Ft)}return{getTextSelectorProp:Tt}}();function TextAnimatorDataProperty(et,dt,kt){var $t={propType:!1},Tt=PropertyFactory.getProp,Dt=dt.a;this.a={r:Dt.r?Tt(et,Dt.r,0,degToRads,kt):$t,rx:Dt.rx?Tt(et,Dt.rx,0,degToRads,kt):$t,ry:Dt.ry?Tt(et,Dt.ry,0,degToRads,kt):$t,sk:Dt.sk?Tt(et,Dt.sk,0,degToRads,kt):$t,sa:Dt.sa?Tt(et,Dt.sa,0,degToRads,kt):$t,s:Dt.s?Tt(et,Dt.s,1,.01,kt):$t,a:Dt.a?Tt(et,Dt.a,1,0,kt):$t,o:Dt.o?Tt(et,Dt.o,0,.01,kt):$t,p:Dt.p?Tt(et,Dt.p,1,0,kt):$t,sw:Dt.sw?Tt(et,Dt.sw,0,0,kt):$t,sc:Dt.sc?Tt(et,Dt.sc,1,0,kt):$t,fc:Dt.fc?Tt(et,Dt.fc,1,0,kt):$t,fh:Dt.fh?Tt(et,Dt.fh,0,0,kt):$t,fs:Dt.fs?Tt(et,Dt.fs,0,.01,kt):$t,fb:Dt.fb?Tt(et,Dt.fb,0,.01,kt):$t,t:Dt.t?Tt(et,Dt.t,0,0,kt):$t},this.s=TextSelectorProp.getTextSelectorProp(et,dt.s,kt),this.s.t=dt.s.t}function TextAnimatorProperty(et,dt,kt){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=et,this._renderType=dt,this._elem=kt,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(kt)}TextAnimatorProperty.prototype.searchProperties=function(){var et,dt=this._textData.a.length,kt,$t=PropertyFactory.getProp;for(et=0;et<dt;et+=1)kt=this._textData.a[et],this._animatorsData[et]=new TextAnimatorDataProperty(this._elem,kt,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:$t(this._elem,this._textData.p.a,0,0,this),f:$t(this._elem,this._textData.p.f,0,0,this),l:$t(this._elem,this._textData.p.l,0,0,this),r:$t(this._elem,this._textData.p.r,0,0,this),p:$t(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=$t(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(et,dt){if(this.lettersChangedFlag=dt,!(!this._mdf&&!this._isFirstFrame&&!dt&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var kt=this._moreOptions.alignment.v,$t=this._animatorsData,Tt=this._textData,Dt=this.mHelper,Ft=this._renderType,Ut=this.renderedLetters.length,Ht,Kt,Yt,Jt,Zt=et.l,er,rr,sr,nr,ir,lr,or,cr,dr,ur,pr,mr,jr,Rr,br;if(this._hasMaskedPath){if(br=this._pathData.m,!this._pathData.n||this._pathData._mdf){var _r=br.v;this._pathData.r.v&&(_r=_r.reverse()),er={tLength:0,segments:[]},Jt=_r._length-1;var Mr;for(mr=0,Yt=0;Yt<Jt;Yt+=1)Mr=bez.buildBezierData(_r.v[Yt],_r.v[Yt+1],[_r.o[Yt][0]-_r.v[Yt][0],_r.o[Yt][1]-_r.v[Yt][1]],[_r.i[Yt+1][0]-_r.v[Yt+1][0],_r.i[Yt+1][1]-_r.v[Yt+1][1]]),er.tLength+=Mr.segmentLength,er.segments.push(Mr),mr+=Mr.segmentLength;Yt=Jt,br.v.c&&(Mr=bez.buildBezierData(_r.v[Yt],_r.v[0],[_r.o[Yt][0]-_r.v[Yt][0],_r.o[Yt][1]-_r.v[Yt][1]],[_r.i[0][0]-_r.v[0][0],_r.i[0][1]-_r.v[0][1]]),er.tLength+=Mr.segmentLength,er.segments.push(Mr),mr+=Mr.segmentLength),this._pathData.pi=er}if(er=this._pathData.pi,rr=this._pathData.f.v,or=0,lr=1,nr=0,ir=!0,ur=er.segments,rr<0&&br.v.c)for(er.tLength<Math.abs(rr)&&(rr=-Math.abs(rr)%er.tLength),or=ur.length-1,dr=ur[or].points,lr=dr.length-1;rr<0;)rr+=dr[lr].partialLength,lr-=1,lr<0&&(or-=1,dr=ur[or].points,lr=dr.length-1);dr=ur[or].points,cr=dr[lr-1],sr=dr[lr],pr=sr.partialLength}Jt=Zt.length,Ht=0,Kt=0;var Pr=et.finalSize*1.2*.714,Or=!0,kr,Tr,xr,wr,zr;wr=$t.length;var Hr,Yr=-1,rs,as,es,Xr=rr,Wr=or,cs=lr,ns=-1,us,fs,ss,ps,ls,js,$s,Ds,Ts="",As=this.defaultPropsArray,_s;if(et.j===2||et.j===1){var Ms=0,Vs=0,Gs=et.j===2?-.5:-1,Ws=0,Xs=!0;for(Yt=0;Yt<Jt;Yt+=1)if(Zt[Yt].n){for(Ms&&(Ms+=Vs);Ws<Yt;)Zt[Ws].animatorJustifyOffset=Ms,Ws+=1;Ms=0,Xs=!0}else{for(xr=0;xr<wr;xr+=1)kr=$t[xr].a,kr.t.propType&&(Xs&&et.j===2&&(Vs+=kr.t.v*Gs),Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),Hr.length?Ms+=kr.t.v*Hr[0]*Gs:Ms+=kr.t.v*Hr*Gs);Xs=!1}for(Ms&&(Ms+=Vs);Ws<Yt;)Zt[Ws].animatorJustifyOffset=Ms,Ws+=1}for(Yt=0;Yt<Jt;Yt+=1){if(Dt.reset(),us=1,Zt[Yt].n)Ht=0,Kt+=et.yOffset,Kt+=Or?1:0,rr=Xr,Or=!1,this._hasMaskedPath&&(or=Wr,lr=cs,dr=ur[or].points,cr=dr[lr-1],sr=dr[lr],pr=sr.partialLength,nr=0),Ts="",Ds="",js="",_s="",As=this.defaultPropsArray;else{if(this._hasMaskedPath){if(ns!==Zt[Yt].line){switch(et.j){case 1:rr+=mr-et.lineWidths[Zt[Yt].line];break;case 2:rr+=(mr-et.lineWidths[Zt[Yt].line])/2;break}ns=Zt[Yt].line}Yr!==Zt[Yt].ind&&(Zt[Yr]&&(rr+=Zt[Yr].extra),rr+=Zt[Yt].an/2,Yr=Zt[Yt].ind),rr+=kt[0]*Zt[Yt].an*.005;var Qs=0;for(xr=0;xr<wr;xr+=1)kr=$t[xr].a,kr.p.propType&&(Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),Hr.length?Qs+=kr.p.v[0]*Hr[0]:Qs+=kr.p.v[0]*Hr),kr.a.propType&&(Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),Hr.length?Qs+=kr.a.v[0]*Hr[0]:Qs+=kr.a.v[0]*Hr);for(ir=!0,this._pathData.a.v&&(rr=Zt[0].an*.5+(mr-this._pathData.f.v-Zt[0].an*.5-Zt[Zt.length-1].an*.5)*Yr/(Jt-1),rr+=this._pathData.f.v);ir;)nr+pr>=rr+Qs||!dr?(jr=(rr+Qs-nr)/sr.partialLength,as=cr.point[0]+(sr.point[0]-cr.point[0])*jr,es=cr.point[1]+(sr.point[1]-cr.point[1])*jr,Dt.translate(-kt[0]*Zt[Yt].an*.005,-(kt[1]*Pr)*.01),ir=!1):dr&&(nr+=sr.partialLength,lr+=1,lr>=dr.length&&(lr=0,or+=1,ur[or]?dr=ur[or].points:br.v.c?(lr=0,or=0,dr=ur[or].points):(nr-=sr.partialLength,dr=null)),dr&&(cr=sr,sr=dr[lr],pr=sr.partialLength));rs=Zt[Yt].an/2-Zt[Yt].add,Dt.translate(-rs,0,0)}else rs=Zt[Yt].an/2-Zt[Yt].add,Dt.translate(-rs,0,0),Dt.translate(-kt[0]*Zt[Yt].an*.005,-kt[1]*Pr*.01,0);for(xr=0;xr<wr;xr+=1)kr=$t[xr].a,kr.t.propType&&(Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),(Ht!==0||et.j!==0)&&(this._hasMaskedPath?Hr.length?rr+=kr.t.v*Hr[0]:rr+=kr.t.v*Hr:Hr.length?Ht+=kr.t.v*Hr[0]:Ht+=kr.t.v*Hr));for(et.strokeWidthAnim&&(ss=et.sw||0),et.strokeColorAnim&&(et.sc?fs=[et.sc[0],et.sc[1],et.sc[2]]:fs=[0,0,0]),et.fillColorAnim&&et.fc&&(ps=[et.fc[0],et.fc[1],et.fc[2]]),xr=0;xr<wr;xr+=1)kr=$t[xr].a,kr.a.propType&&(Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),Hr.length?Dt.translate(-kr.a.v[0]*Hr[0],-kr.a.v[1]*Hr[1],kr.a.v[2]*Hr[2]):Dt.translate(-kr.a.v[0]*Hr,-kr.a.v[1]*Hr,kr.a.v[2]*Hr));for(xr=0;xr<wr;xr+=1)kr=$t[xr].a,kr.s.propType&&(Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),Hr.length?Dt.scale(1+(kr.s.v[0]-1)*Hr[0],1+(kr.s.v[1]-1)*Hr[1],1):Dt.scale(1+(kr.s.v[0]-1)*Hr,1+(kr.s.v[1]-1)*Hr,1));for(xr=0;xr<wr;xr+=1){if(kr=$t[xr].a,Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),kr.sk.propType&&(Hr.length?Dt.skewFromAxis(-kr.sk.v*Hr[0],kr.sa.v*Hr[1]):Dt.skewFromAxis(-kr.sk.v*Hr,kr.sa.v*Hr)),kr.r.propType&&(Hr.length?Dt.rotateZ(-kr.r.v*Hr[2]):Dt.rotateZ(-kr.r.v*Hr)),kr.ry.propType&&(Hr.length?Dt.rotateY(kr.ry.v*Hr[1]):Dt.rotateY(kr.ry.v*Hr)),kr.rx.propType&&(Hr.length?Dt.rotateX(kr.rx.v*Hr[0]):Dt.rotateX(kr.rx.v*Hr)),kr.o.propType&&(Hr.length?us+=(kr.o.v*Hr[0]-us)*Hr[0]:us+=(kr.o.v*Hr-us)*Hr),et.strokeWidthAnim&&kr.sw.propType&&(Hr.length?ss+=kr.sw.v*Hr[0]:ss+=kr.sw.v*Hr),et.strokeColorAnim&&kr.sc.propType)for(ls=0;ls<3;ls+=1)Hr.length?fs[ls]+=(kr.sc.v[ls]-fs[ls])*Hr[0]:fs[ls]+=(kr.sc.v[ls]-fs[ls])*Hr;if(et.fillColorAnim&&et.fc){if(kr.fc.propType)for(ls=0;ls<3;ls+=1)Hr.length?ps[ls]+=(kr.fc.v[ls]-ps[ls])*Hr[0]:ps[ls]+=(kr.fc.v[ls]-ps[ls])*Hr;kr.fh.propType&&(Hr.length?ps=addHueToRGB(ps,kr.fh.v*Hr[0]):ps=addHueToRGB(ps,kr.fh.v*Hr)),kr.fs.propType&&(Hr.length?ps=addSaturationToRGB(ps,kr.fs.v*Hr[0]):ps=addSaturationToRGB(ps,kr.fs.v*Hr)),kr.fb.propType&&(Hr.length?ps=addBrightnessToRGB(ps,kr.fb.v*Hr[0]):ps=addBrightnessToRGB(ps,kr.fb.v*Hr))}}for(xr=0;xr<wr;xr+=1)kr=$t[xr].a,kr.p.propType&&(Tr=$t[xr].s,Hr=Tr.getMult(Zt[Yt].anIndexes[xr],Tt.a[xr].s.totalChars),this._hasMaskedPath?Hr.length?Dt.translate(0,kr.p.v[1]*Hr[0],-kr.p.v[2]*Hr[1]):Dt.translate(0,kr.p.v[1]*Hr,-kr.p.v[2]*Hr):Hr.length?Dt.translate(kr.p.v[0]*Hr[0],kr.p.v[1]*Hr[1],-kr.p.v[2]*Hr[2]):Dt.translate(kr.p.v[0]*Hr,kr.p.v[1]*Hr,-kr.p.v[2]*Hr));if(et.strokeWidthAnim&&(js=ss<0?0:ss),et.strokeColorAnim&&($s="rgb("+Math.round(fs[0]*255)+","+Math.round(fs[1]*255)+","+Math.round(fs[2]*255)+")"),et.fillColorAnim&&et.fc&&(Ds="rgb("+Math.round(ps[0]*255)+","+Math.round(ps[1]*255)+","+Math.round(ps[2]*255)+")"),this._hasMaskedPath){if(Dt.translate(0,-et.ls),Dt.translate(0,kt[1]*Pr*.01+Kt,0),this._pathData.p.v){Rr=(sr.point[1]-cr.point[1])/(sr.point[0]-cr.point[0]);var Bs=Math.atan(Rr)*180/Math.PI;sr.point[0]<cr.point[0]&&(Bs+=180),Dt.rotate(-Bs*Math.PI/180)}Dt.translate(as,es,0),rr-=kt[0]*Zt[Yt].an*.005,Zt[Yt+1]&&Yr!==Zt[Yt+1].ind&&(rr+=Zt[Yt].an/2,rr+=et.tr*.001*et.finalSize)}else{switch(Dt.translate(Ht,Kt,0),et.ps&&Dt.translate(et.ps[0],et.ps[1]+et.ascent,0),et.j){case 1:Dt.translate(Zt[Yt].animatorJustifyOffset+et.justifyOffset+(et.boxWidth-et.lineWidths[Zt[Yt].line]),0,0);break;case 2:Dt.translate(Zt[Yt].animatorJustifyOffset+et.justifyOffset+(et.boxWidth-et.lineWidths[Zt[Yt].line])/2,0,0);break}Dt.translate(0,-et.ls),Dt.translate(rs,0,0),Dt.translate(kt[0]*Zt[Yt].an*.005,kt[1]*Pr*.01,0),Ht+=Zt[Yt].l+et.tr*.001*et.finalSize}Ft==="html"?Ts=Dt.toCSS():Ft==="svg"?Ts=Dt.to2dCSS():As=[Dt.props[0],Dt.props[1],Dt.props[2],Dt.props[3],Dt.props[4],Dt.props[5],Dt.props[6],Dt.props[7],Dt.props[8],Dt.props[9],Dt.props[10],Dt.props[11],Dt.props[12],Dt.props[13],Dt.props[14],Dt.props[15]],_s=us}Ut<=Yt?(zr=new LetterProps(_s,js,$s,Ds,Ts,As),this.renderedLetters.push(zr),Ut+=1,this.lettersChangedFlag=!0):(zr=this.renderedLetters[Yt],this.lettersChangedFlag=zr.update(_s,js,$s,Ds,Ts,As)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(et,dt,kt){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(et,dt,kt),this.textProperty=new TextProperty(this,et.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(et.t,this.renderType,this),this.initTransform(et,dt,kt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange)},ITextElement.prototype.createPathShape=function(et,dt){var kt,$t=dt.length,Tt,Dt="";for(kt=0;kt<$t;kt+=1)dt[kt].ty==="sh"&&(Tt=dt[kt].ks.k,Dt+=buildShapeString(Tt,Tt.i.length,!0,et));return Dt},ITextElement.prototype.updateDocumentData=function(et,dt){this.textProperty.updateDocumentData(et,dt)},ITextElement.prototype.canResizeFont=function(et){this.textProperty.canResizeFont(et)},ITextElement.prototype.setMinimumFontSize=function(et){this.textProperty.setMinimumFontSize(et)},ITextElement.prototype.applyTextPropertiesToMatrix=function(et,dt,kt,$t,Tt){switch(et.ps&&dt.translate(et.ps[0],et.ps[1]+et.ascent,0),dt.translate(0,-et.ls,0),et.j){case 1:dt.translate(et.justifyOffset+(et.boxWidth-et.lineWidths[kt]),0,0);break;case 2:dt.translate(et.justifyOffset+(et.boxWidth-et.lineWidths[kt])/2,0,0);break}dt.translate($t,Tt,0)},ITextElement.prototype.buildColor=function(et){return"rgb("+Math.round(et[0]*255)+","+Math.round(et[1]*255)+","+Math.round(et[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(et,dt,kt){this.textSpans=[],this.renderType="svg",this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(et){for(var dt=0,kt=et.length,$t=[],Tt="";dt<kt;)et[dt]===String.fromCharCode(13)||et[dt]===String.fromCharCode(3)?($t.push(Tt),Tt=""):Tt+=et[dt],dt+=1;return $t.push(Tt),$t},SVGTextLottieElement.prototype.buildShapeData=function(et,dt){if(et.shapes&&et.shapes.length){var kt=et.shapes[0];if(kt.it){var $t=kt.it[kt.it.length-1];$t.s&&($t.s.k[0]=dt,$t.s.k[1]=dt)}}return et},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var et,dt,kt=this.textProperty.currentData;this.renderedLetters=createSizedArray(kt?kt.l.length:0),kt.fc?this.layerElement.setAttribute("fill",this.buildColor(kt.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),kt.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(kt.sc)),this.layerElement.setAttribute("stroke-width",kt.sw)),this.layerElement.setAttribute("font-size",kt.finalSize);var $t=this.globalData.fontManager.getFontByName(kt.f);if($t.fClass)this.layerElement.setAttribute("class",$t.fClass);else{this.layerElement.setAttribute("font-family",$t.fFamily);var Tt=kt.fWeight,Dt=kt.fStyle;this.layerElement.setAttribute("font-style",Dt),this.layerElement.setAttribute("font-weight",Tt)}this.layerElement.setAttribute("aria-label",kt.t);var Ft=kt.l||[],Ut=!!this.globalData.fontManager.chars;dt=Ft.length;var Ht,Kt=this.mHelper,Yt="",Jt=this.data.singleShape,Zt=0,er=0,rr=!0,sr=kt.tr*.001*kt.finalSize;if(Jt&&!Ut&&!kt.sz){var nr=this.textContainer,ir="start";switch(kt.j){case 1:ir="end";break;case 2:ir="middle";break;default:ir="start";break}nr.setAttribute("text-anchor",ir),nr.setAttribute("letter-spacing",sr);var lr=this.buildTextContents(kt.finalText);for(dt=lr.length,er=kt.ps?kt.ps[1]+kt.ascent:0,et=0;et<dt;et+=1)Ht=this.textSpans[et].span||createNS("tspan"),Ht.textContent=lr[et],Ht.setAttribute("x",0),Ht.setAttribute("y",er),Ht.style.display="inherit",nr.appendChild(Ht),this.textSpans[et]||(this.textSpans[et]={span:null,glyph:null}),this.textSpans[et].span=Ht,er+=kt.finalLineHeight;this.layerElement.appendChild(nr)}else{var or=this.textSpans.length,cr;for(et=0;et<dt;et+=1){if(this.textSpans[et]||(this.textSpans[et]={span:null,childSpan:null,glyph:null}),!Ut||!Jt||et===0){if(Ht=or>et?this.textSpans[et].span:createNS(Ut?"g":"text"),or<=et){if(Ht.setAttribute("stroke-linecap","butt"),Ht.setAttribute("stroke-linejoin","round"),Ht.setAttribute("stroke-miterlimit","4"),this.textSpans[et].span=Ht,Ut){var dr=createNS("g");Ht.appendChild(dr),this.textSpans[et].childSpan=dr}this.textSpans[et].span=Ht,this.layerElement.appendChild(Ht)}Ht.style.display="inherit"}if(Kt.reset(),Jt&&(Ft[et].n&&(Zt=-sr,er+=kt.yOffset,er+=rr?1:0,rr=!1),this.applyTextPropertiesToMatrix(kt,Kt,Ft[et].line,Zt,er),Zt+=Ft[et].l||0,Zt+=sr),Ut){cr=this.globalData.fontManager.getCharData(kt.finalText[et],$t.fStyle,this.globalData.fontManager.getFontByName(kt.f).fFamily);var ur;if(cr.t===1)ur=new SVGCompElement(cr.data,this.globalData,this);else{var pr=emptyShapeData;cr.data&&cr.data.shapes&&(pr=this.buildShapeData(cr.data,kt.finalSize)),ur=new SVGShapeElement(pr,this.globalData,this)}if(this.textSpans[et].glyph){var mr=this.textSpans[et].glyph;this.textSpans[et].childSpan.removeChild(mr.layerElement),mr.destroy()}this.textSpans[et].glyph=ur,ur._debug=!0,ur.prepareFrame(0),ur.renderFrame(),this.textSpans[et].childSpan.appendChild(ur.layerElement),cr.t===1&&this.textSpans[et].childSpan.setAttribute("transform","scale("+kt.finalSize/100+","+kt.finalSize/100+")")}else Jt&&Ht.setAttribute("transform","translate("+Kt.props[12]+","+Kt.props[13]+")"),Ht.textContent=Ft[et].val,Ht.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Jt&&Ht&&Ht.setAttribute("d",Yt)}for(;et<this.textSpans.length;)this.textSpans[et].span.style.display="none",et+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var et=this.layerElement.getBBox();this.bbox={top:et.y,left:et.x,width:et.width,height:et.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var et,dt=this.textSpans.length,kt;for(this.renderedFrame=this.comp.renderedFrame,et=0;et<dt;et+=1)kt=this.textSpans[et].glyph,kt&&(kt.prepareFrame(this.comp.renderedFrame-this.data.st),kt._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var et,dt,kt=this.textAnimator.renderedLetters,$t=this.textProperty.currentData.l;dt=$t.length;var Tt,Dt,Ft;for(et=0;et<dt;et+=1)$t[et].n||(Tt=kt[et],Dt=this.textSpans[et].span,Ft=this.textSpans[et].glyph,Ft&&Ft.renderFrame(),Tt._mdf.m&&Dt.setAttribute("transform",Tt.m),Tt._mdf.o&&Dt.setAttribute("opacity",Tt.o),Tt._mdf.sw&&Dt.setAttribute("stroke-width",Tt.sw),Tt._mdf.sc&&Dt.setAttribute("stroke",Tt.sc),Tt._mdf.fc&&Dt.setAttribute("fill",Tt.fc))}};function ISolidElement(et,dt,kt){this.initElement(et,dt,kt)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var et=createNS("rect");et.setAttribute("width",this.data.sw),et.setAttribute("height",this.data.sh),et.setAttribute("fill",this.data.sc),this.layerElement.appendChild(et)};function NullElement(et,dt,kt){this.initFrame(),this.initBaseData(et,dt,kt),this.initFrame(),this.initTransform(et,dt,kt),this.initHierarchy()}NullElement.prototype.prepareFrame=function(et){this.prepareProperties(et,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(et){return new NullElement(et,this.globalData,this)},SVGRendererBase.prototype.createShape=function(et){return new SVGShapeElement(et,this.globalData,this)},SVGRendererBase.prototype.createText=function(et){return new SVGTextLottieElement(et,this.globalData,this)},SVGRendererBase.prototype.createImage=function(et){return new IImageElement(et,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(et){return new ISolidElement(et,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(et){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+et.w+" "+et.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",et.w),this.svgElement.setAttribute("height",et.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var dt=this.globalData.defs;this.setupGlobalData(et,dt),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=et;var kt=createNS("clipPath"),$t=createNS("rect");$t.setAttribute("width",et.w),$t.setAttribute("height",et.h),$t.setAttribute("x",0),$t.setAttribute("y",0);var Tt=createElementID();kt.setAttribute("id",Tt),kt.appendChild($t),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Tt+")"),dt.appendChild(kt),this.layers=et.layers,this.elements=createSizedArray(et.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var et,dt=this.layers?this.layers.length:0;for(et=0;et<dt;et+=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(et){var dt=0,kt=this.layers.length;for(dt=0;dt<kt;dt+=1)if(this.layers[dt].ind===et)return dt;return-1},SVGRendererBase.prototype.buildItem=function(et){var dt=this.elements;if(!(dt[et]||this.layers[et].ty===99)){dt[et]=!0;var kt=this.createItem(this.layers[et]);if(dt[et]=kt,getExpressionsPlugin()&&(this.layers[et].ty===0&&this.globalData.projectInterface.registerComposition(kt),kt.initExpressions()),this.appendElementInPos(kt,et),this.layers[et].tt){var $t="tp"in this.layers[et]?this.findIndexByInd(this.layers[et].tp):et-1;if($t===-1)return;if(!this.elements[$t]||this.elements[$t]===!0)this.buildItem($t),this.addPendingElement(kt);else{var Tt=dt[$t],Dt=Tt.getMatte(this.layers[et].tt);kt.setMatte(Dt)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();if(et.checkParenting(),et.data.tt)for(var dt=0,kt=this.elements.length;dt<kt;){if(this.elements[dt]===et){var $t="tp"in et.data?this.findIndexByInd(et.data.tp):dt-1,Tt=this.elements[$t],Dt=Tt.getMatte(this.layers[dt].tt);et.setMatte(Dt);break}dt+=1}}},SVGRendererBase.prototype.renderFrame=function(et){if(!(this.renderedFrame===et||this.destroyed)){et===null?et=this.renderedFrame:this.renderedFrame=et,this.globalData.frameNum=et,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=et,this.globalData._mdf=!1;var dt,kt=this.layers.length;for(this.completeLayers||this.checkLayers(et),dt=kt-1;dt>=0;dt-=1)(this.completeLayers||this.elements[dt])&&this.elements[dt].prepareFrame(et-this.layers[dt].st);if(this.globalData._mdf)for(dt=0;dt<kt;dt+=1)(this.completeLayers||this.elements[dt])&&this.elements[dt].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(et,dt){var kt=et.getBaseElement();if(kt){for(var $t=0,Tt;$t<dt;)this.elements[$t]&&this.elements[$t]!==!0&&this.elements[$t].getBaseElement()&&(Tt=this.elements[$t].getBaseElement()),$t+=1;Tt?this.layerElement.insertBefore(kt,Tt):this.layerElement.appendChild(kt)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(et,dt,kt){this.initFrame(),this.initBaseData(et,dt,kt),this.initTransform(et,dt,kt),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!dt.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(et){if(this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=et/this.data.sr;else{var dt=this.tm.v;dt===this.data.op&&(dt=this.data.op-1),this.renderedFrame=dt}var kt,$t=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),kt=$t-1;kt>=0;kt-=1)(this.completeLayers||this.elements[kt])&&(this.elements[kt].prepareFrame(this.renderedFrame-this.layers[kt].st),this.elements[kt]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var et,dt=this.layers.length;for(et=0;et<dt;et+=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame()},ICompElement.prototype.setElements=function(et){this.elements=et},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var et,dt=this.layers.length;for(et=0;et<dt;et+=1)this.elements[et]&&this.elements[et].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(et,dt,kt){this.layers=et.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(et,dt,kt),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(et){return new SVGCompElement(et,this.globalData,this)};function SVGRenderer(et,dt){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var kt="";if(dt&&dt.title){var $t=createNS("title"),Tt=createElementID();$t.setAttribute("id",Tt),$t.textContent=dt.title,this.svgElement.appendChild($t),kt+=Tt}if(dt&&dt.description){var Dt=createNS("desc"),Ft=createElementID();Dt.setAttribute("id",Ft),Dt.textContent=dt.description,this.svgElement.appendChild(Dt),kt+=" "+Ft}kt&&this.svgElement.setAttribute("aria-labelledby",kt);var Ut=createNS("defs");this.svgElement.appendChild(Ut);var Ht=createNS("g");this.svgElement.appendChild(Ht),this.layerElement=Ht,this.renderConfig={preserveAspectRatio:dt&&dt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:dt&&dt.contentVisibility||"visible",progressiveLoad:dt&&dt.progressiveLoad||!1,hideOnTransparent:!(dt&&dt.hideOnTransparent===!1),viewBoxOnly:dt&&dt.viewBoxOnly||!1,viewBoxSize:dt&&dt.viewBoxSize||!1,className:dt&&dt.className||"",id:dt&&dt.id||"",focusable:dt&&dt.focusable,filterSize:{width:dt&&dt.filterSize&&dt.filterSize.width||"100%",height:dt&&dt.filterSize&&dt.filterSize.height||"100%",x:dt&&dt.filterSize&&dt.filterSize.x||"0%",y:dt&&dt.filterSize&&dt.filterSize.y||"0%"},width:dt&&dt.width,height:dt&&dt.height,runExpressions:!dt||dt.runExpressions===void 0||dt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:Ut,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(et){return new SVGCompElement(et,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(dt){var kt,$t=dt.length,Tt="_";for(kt=0;kt<$t;kt+=1)Tt+=dt[kt].transform.key+"_";var Dt=this.sequences[Tt];return Dt||(Dt={transforms:[].concat(dt),finalTransform:new Matrix,_mdf:!1},this.sequences[Tt]=Dt,this.sequenceList.push(Dt)),Dt},processSequence:function(dt,kt){for(var $t=0,Tt=dt.transforms.length,Dt=kt;$t<Tt&&!kt;){if(dt.transforms[$t].transform.mProps._mdf){Dt=!0;break}$t+=1}if(Dt)for(dt.finalTransform.reset(),$t=Tt-1;$t>=0;$t-=1)dt.finalTransform.multiply(dt.transforms[$t].transform.mProps.v);dt._mdf=Dt},processSequences:function(dt){var kt,$t=this.sequenceList.length;for(kt=0;kt<$t;kt+=1)this.processSequence(this.sequenceList[kt],dt)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var dt="__lottie_element_luma_buffer",kt=null,$t=null,Tt=null;function Dt(){var Ht=createNS("svg"),Kt=createNS("filter"),Yt=createNS("feColorMatrix");return Kt.setAttribute("id",dt),Yt.setAttribute("type","matrix"),Yt.setAttribute("color-interpolation-filters","sRGB"),Yt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),Kt.appendChild(Yt),Ht.appendChild(Kt),Ht.setAttribute("id",dt+"_svg"),featureSupport.svgLumaHidden&&(Ht.style.display="none"),Ht}function Ft(){kt||(Tt=Dt(),document.body.appendChild(Tt),kt=createTag("canvas"),$t=kt.getContext("2d"),$t.filter="url(#"+dt+")",$t.fillStyle="rgba(0,0,0,0)",$t.fillRect(0,0,1,1))}function Ut(Ht){return kt||Ft(),kt.width=Ht.width,kt.height=Ht.height,$t.filter="url(#"+dt+")",kt}return{load:Ft,get:Ut}};function createCanvas(et,dt){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(et,dt);var kt=createTag("canvas");return kt.width=et,kt.height=dt,kt}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(et){var dt,kt=et.data.ef?et.data.ef.length:0;this.filters=[];var $t;for(dt=0;dt<kt;dt+=1){$t=null;var Tt=et.data.ef[dt].ty;if(registeredEffects[Tt]){var Dt=registeredEffects[Tt].effect;$t=new Dt(et.effectsManager.effectElements[dt],et)}$t&&this.filters.push($t)}this.filters.length&&et.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(et){var dt,kt=this.filters.length;for(dt=0;dt<kt;dt+=1)this.filters[dt].renderFrame(et)},CVEffects.prototype.getEffects=function(et){var dt,kt=this.filters.length,$t=[];for(dt=0;dt<kt;dt+=1)this.filters[dt].type===et&&$t.push(this.filters[dt]);return $t};function registerEffect(et,dt){registeredEffects[et]={effect:dt}}function CVMaskElement(et,dt){this.data=et,this.element=dt,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var kt,$t=this.masksProperties.length,Tt=!1;for(kt=0;kt<$t;kt+=1)this.masksProperties[kt].mode!=="n"&&(Tt=!0),this.viewData[kt]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[kt],3);this.hasMasks=Tt,Tt&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var et=this.element.finalTransform.mat,dt=this.element.canvasContext,kt,$t=this.masksProperties.length,Tt,Dt,Ft;for(dt.beginPath(),kt=0;kt<$t;kt+=1)if(this.masksProperties[kt].mode!=="n"){this.masksProperties[kt].inv&&(dt.moveTo(0,0),dt.lineTo(this.element.globalData.compSize.w,0),dt.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),dt.lineTo(0,this.element.globalData.compSize.h),dt.lineTo(0,0)),Ft=this.viewData[kt].v,Tt=et.applyToPointArray(Ft.v[0][0],Ft.v[0][1],0),dt.moveTo(Tt[0],Tt[1]);var Ut,Ht=Ft._length;for(Ut=1;Ut<Ht;Ut+=1)Dt=et.applyToTriplePoints(Ft.o[Ut-1],Ft.i[Ut],Ft.v[Ut]),dt.bezierCurveTo(Dt[0],Dt[1],Dt[2],Dt[3],Dt[4],Dt[5]);Dt=et.applyToTriplePoints(Ft.o[Ut-1],Ft.i[0],Ft.v[0]),dt.bezierCurveTo(Dt[0],Dt[1],Dt[2],Dt[3],Dt[4],Dt[5])}this.element.globalData.renderer.save(!0),dt.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var dt=this.globalData.canvasContext,kt=assetLoader.createCanvas(dt.canvas.width,dt.canvas.height);this.buffers.push(kt);var $t=assetLoader.createCanvas(dt.canvas.width,dt.canvas.height);this.buffers.push($t),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var dt=this.globalData;if(dt.blendMode!==this.data.bm){dt.blendMode=this.data.bm;var kt=getBlendMode(this.data.bm);dt.canvasContext.globalCompositeOperation=kt}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(dt){dt.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var dt=this.buffers[0],kt=dt.getContext("2d");this.clearCanvas(kt),kt.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var dt=this.buffers[1],kt=dt.getContext("2d");this.clearCanvas(kt),kt.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var $t=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if($t.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var Tt=assetLoader.getLumaCanvas(this.canvasContext.canvas),Dt=Tt.getContext("2d");Dt.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(Tt,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(dt,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(dt){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!dt)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var kt=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(kt),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(kt),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(et,dt,kt,$t){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var Tt=4;dt.ty==="rc"?Tt=5:dt.ty==="el"?Tt=6:dt.ty==="sr"&&(Tt=7),this.sh=ShapePropertyFactory.getShapeProp(et,dt,Tt,et);var Dt,Ft=kt.length,Ut;for(Dt=0;Dt<Ft;Dt+=1)kt[Dt].closed||(Ut={transforms:$t.addTransformSequence(kt[Dt].transforms),trNodes:[]},this.styledShapes.push(Ut),kt[Dt].elements.push(Ut))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(et,dt,kt){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(et,dt){var kt={data:et,type:et.ty,preTransforms:this.transformsManager.addTransformSequence(dt),transforms:[],elements:[],closed:et.hd===!0},$t={};if(et.ty==="fl"||et.ty==="st"?($t.c=PropertyFactory.getProp(this,et.c,1,255,this),$t.c.k||(kt.co="rgb("+bmFloor($t.c.v[0])+","+bmFloor($t.c.v[1])+","+bmFloor($t.c.v[2])+")")):(et.ty==="gf"||et.ty==="gs")&&($t.s=PropertyFactory.getProp(this,et.s,1,null,this),$t.e=PropertyFactory.getProp(this,et.e,1,null,this),$t.h=PropertyFactory.getProp(this,et.h||{k:0},0,.01,this),$t.a=PropertyFactory.getProp(this,et.a||{k:0},0,degToRads,this),$t.g=new GradientProperty(this,et.g,this)),$t.o=PropertyFactory.getProp(this,et.o,0,.01,this),et.ty==="st"||et.ty==="gs"){if(kt.lc=lineCapEnum[et.lc||2],kt.lj=lineJoinEnum[et.lj||2],et.lj==1&&(kt.ml=et.ml),$t.w=PropertyFactory.getProp(this,et.w,0,null,this),$t.w.k||(kt.wi=$t.w.v),et.d){var Tt=new DashProperty(this,et.d,"canvas",this);$t.d=Tt,$t.d.k||(kt.da=$t.d.dashArray,kt.do=$t.d.dashoffset[0])}}else kt.r=et.r===2?"evenodd":"nonzero";return this.stylesList.push(kt),$t.style=kt,$t},CVShapeElement.prototype.createGroupElement=function(){var et={it:[],prevViewData:[]};return et},CVShapeElement.prototype.createTransformElement=function(et){var dt={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,et.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,et,this)}};return dt},CVShapeElement.prototype.createShapeElement=function(et){var dt=new CVShapeData(this,et,this.stylesList,this.transformsManager);return this.shapes.push(dt),this.addShapeToModifiers(dt),dt},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var et,dt=this.itemsData.length;for(et=0;et<dt;et+=1)this.prevViewData[et]=this.itemsData[et];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),dt=this.dynamicProperties.length,et=0;et<dt;et+=1)this.dynamicProperties[et].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(et){var dt,kt=this.stylesList.length;for(dt=0;dt<kt;dt+=1)this.stylesList[dt].closed||this.stylesList[dt].transforms.push(et)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var et,dt=this.stylesList.length;for(et=0;et<dt;et+=1)this.stylesList[et].closed||this.stylesList[et].transforms.pop()},CVShapeElement.prototype.closeStyles=function(et){var dt,kt=et.length;for(dt=0;dt<kt;dt+=1)et[dt].closed=!0},CVShapeElement.prototype.searchShapes=function(et,dt,kt,$t,Tt){var Dt,Ft=et.length-1,Ut,Ht,Kt=[],Yt=[],Jt,Zt,er,rr=[].concat(Tt);for(Dt=Ft;Dt>=0;Dt-=1){if(Jt=this.searchProcessedElement(et[Dt]),Jt?dt[Dt]=kt[Jt-1]:et[Dt]._shouldRender=$t,et[Dt].ty==="fl"||et[Dt].ty==="st"||et[Dt].ty==="gf"||et[Dt].ty==="gs")Jt?dt[Dt].style.closed=!1:dt[Dt]=this.createStyleElement(et[Dt],rr),Kt.push(dt[Dt].style);else if(et[Dt].ty==="gr"){if(!Jt)dt[Dt]=this.createGroupElement(et[Dt]);else for(Ht=dt[Dt].it.length,Ut=0;Ut<Ht;Ut+=1)dt[Dt].prevViewData[Ut]=dt[Dt].it[Ut];this.searchShapes(et[Dt].it,dt[Dt].it,dt[Dt].prevViewData,$t,rr)}else et[Dt].ty==="tr"?(Jt||(er=this.createTransformElement(et[Dt]),dt[Dt]=er),rr.push(dt[Dt]),this.addTransformToStyleList(dt[Dt])):et[Dt].ty==="sh"||et[Dt].ty==="rc"||et[Dt].ty==="el"||et[Dt].ty==="sr"?Jt||(dt[Dt]=this.createShapeElement(et[Dt])):et[Dt].ty==="tm"||et[Dt].ty==="rd"||et[Dt].ty==="pb"||et[Dt].ty==="zz"||et[Dt].ty==="op"?(Jt?(Zt=dt[Dt],Zt.closed=!1):(Zt=ShapeModifiers.getModifier(et[Dt].ty),Zt.init(this,et[Dt]),dt[Dt]=Zt,this.shapeModifiers.push(Zt)),Yt.push(Zt)):et[Dt].ty==="rp"&&(Jt?(Zt=dt[Dt],Zt.closed=!0):(Zt=ShapeModifiers.getModifier(et[Dt].ty),dt[Dt]=Zt,Zt.init(this,et,Dt,dt),this.shapeModifiers.push(Zt),$t=!1),Yt.push(Zt));this.addProcessedElement(et[Dt],Dt+1)}for(this.removeTransformFromStyleList(),this.closeStyles(Kt),Ft=Yt.length,Dt=0;Dt<Ft;Dt+=1)Yt[Dt].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(et,dt){(et._opMdf||dt.op._mdf||this._isFirstFrame)&&(dt.opacity=et.opacity,dt.opacity*=dt.op.v,dt._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var et,dt=this.stylesList.length,kt,$t,Tt,Dt,Ft,Ut,Ht=this.globalData.renderer,Kt=this.globalData.canvasContext,Yt,Jt;for(et=0;et<dt;et+=1)if(Jt=this.stylesList[et],Yt=Jt.type,!((Yt==="st"||Yt==="gs")&&Jt.wi===0||!Jt.data._shouldRender||Jt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(Ht.save(),Ft=Jt.elements,Yt==="st"||Yt==="gs"?(Ht.ctxStrokeStyle(Yt==="st"?Jt.co:Jt.grd),Ht.ctxLineWidth(Jt.wi),Ht.ctxLineCap(Jt.lc),Ht.ctxLineJoin(Jt.lj),Ht.ctxMiterLimit(Jt.ml||0)):Ht.ctxFillStyle(Yt==="fl"?Jt.co:Jt.grd),Ht.ctxOpacity(Jt.coOp),Yt!=="st"&&Yt!=="gs"&&Kt.beginPath(),Ht.ctxTransform(Jt.preTransforms.finalTransform.props),$t=Ft.length,kt=0;kt<$t;kt+=1){for((Yt==="st"||Yt==="gs")&&(Kt.beginPath(),Jt.da&&(Kt.setLineDash(Jt.da),Kt.lineDashOffset=Jt.do)),Ut=Ft[kt].trNodes,Dt=Ut.length,Tt=0;Tt<Dt;Tt+=1)Ut[Tt].t==="m"?Kt.moveTo(Ut[Tt].p[0],Ut[Tt].p[1]):Ut[Tt].t==="c"?Kt.bezierCurveTo(Ut[Tt].pts[0],Ut[Tt].pts[1],Ut[Tt].pts[2],Ut[Tt].pts[3],Ut[Tt].pts[4],Ut[Tt].pts[5]):Kt.closePath();(Yt==="st"||Yt==="gs")&&(Ht.ctxStroke(),Jt.da&&Kt.setLineDash(this.dashResetter))}Yt!=="st"&&Yt!=="gs"&&this.globalData.renderer.ctxFill(Jt.r),Ht.restore()}},CVShapeElement.prototype.renderShape=function(et,dt,kt,$t){var Tt,Dt=dt.length-1,Ft;for(Ft=et,Tt=Dt;Tt>=0;Tt-=1)dt[Tt].ty==="tr"?(Ft=kt[Tt].transform,this.renderShapeTransform(et,Ft)):dt[Tt].ty==="sh"||dt[Tt].ty==="el"||dt[Tt].ty==="rc"||dt[Tt].ty==="sr"?this.renderPath(dt[Tt],kt[Tt]):dt[Tt].ty==="fl"?this.renderFill(dt[Tt],kt[Tt],Ft):dt[Tt].ty==="st"?this.renderStroke(dt[Tt],kt[Tt],Ft):dt[Tt].ty==="gf"||dt[Tt].ty==="gs"?this.renderGradientFill(dt[Tt],kt[Tt],Ft):dt[Tt].ty==="gr"?this.renderShape(Ft,dt[Tt].it,kt[Tt].it):dt[Tt].ty;$t&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(et,dt){if(this._isFirstFrame||dt._mdf||et.transforms._mdf){var kt=et.trNodes,$t=dt.paths,Tt,Dt,Ft,Ut=$t._length;kt.length=0;var Ht=et.transforms.finalTransform;for(Ft=0;Ft<Ut;Ft+=1){var Kt=$t.shapes[Ft];if(Kt&&Kt.v){for(Dt=Kt._length,Tt=1;Tt<Dt;Tt+=1)Tt===1&&kt.push({t:"m",p:Ht.applyToPointArray(Kt.v[0][0],Kt.v[0][1],0)}),kt.push({t:"c",pts:Ht.applyToTriplePoints(Kt.o[Tt-1],Kt.i[Tt],Kt.v[Tt])});Dt===1&&kt.push({t:"m",p:Ht.applyToPointArray(Kt.v[0][0],Kt.v[0][1],0)}),Kt.c&&Dt&&(kt.push({t:"c",pts:Ht.applyToTriplePoints(Kt.o[Tt-1],Kt.i[0],Kt.v[0])}),kt.push({t:"z"}))}}et.trNodes=kt}},CVShapeElement.prototype.renderPath=function(et,dt){if(et.hd!==!0&&et._shouldRender){var kt,$t=dt.styledShapes.length;for(kt=0;kt<$t;kt+=1)this.renderStyledShape(dt.styledShapes[kt],dt.sh)}},CVShapeElement.prototype.renderFill=function(et,dt,kt){var $t=dt.style;(dt.c._mdf||this._isFirstFrame)&&($t.co="rgb("+bmFloor(dt.c.v[0])+","+bmFloor(dt.c.v[1])+","+bmFloor(dt.c.v[2])+")"),(dt.o._mdf||kt._opMdf||this._isFirstFrame)&&($t.coOp=dt.o.v*kt.opacity)},CVShapeElement.prototype.renderGradientFill=function(et,dt,kt){var $t=dt.style,Tt;if(!$t.grd||dt.g._mdf||dt.s._mdf||dt.e._mdf||et.t!==1&&(dt.h._mdf||dt.a._mdf)){var Dt=this.globalData.canvasContext,Ft=dt.s.v,Ut=dt.e.v;if(et.t===1)Tt=Dt.createLinearGradient(Ft[0],Ft[1],Ut[0],Ut[1]);else{var Ht=Math.sqrt(Math.pow(Ft[0]-Ut[0],2)+Math.pow(Ft[1]-Ut[1],2)),Kt=Math.atan2(Ut[1]-Ft[1],Ut[0]-Ft[0]),Yt=dt.h.v;Yt>=1?Yt=.99:Yt<=-1&&(Yt=-.99);var Jt=Ht*Yt,Zt=Math.cos(Kt+dt.a.v)*Jt+Ft[0],er=Math.sin(Kt+dt.a.v)*Jt+Ft[1];Tt=Dt.createRadialGradient(Zt,er,0,Ft[0],Ft[1],Ht)}var rr,sr=et.g.p,nr=dt.g.c,ir=1;for(rr=0;rr<sr;rr+=1)dt.g._hasOpacity&&dt.g._collapsable&&(ir=dt.g.o[rr*2+1]),Tt.addColorStop(nr[rr*4]/100,"rgba("+nr[rr*4+1]+","+nr[rr*4+2]+","+nr[rr*4+3]+","+ir+")");$t.grd=Tt}$t.coOp=dt.o.v*kt.opacity},CVShapeElement.prototype.renderStroke=function(et,dt,kt){var $t=dt.style,Tt=dt.d;Tt&&(Tt._mdf||this._isFirstFrame)&&($t.da=Tt.dashArray,$t.do=Tt.dashoffset[0]),(dt.c._mdf||this._isFirstFrame)&&($t.co="rgb("+bmFloor(dt.c.v[0])+","+bmFloor(dt.c.v[1])+","+bmFloor(dt.c.v[2])+")"),(dt.o._mdf||kt._opMdf||this._isFirstFrame)&&($t.coOp=dt.o.v*kt.opacity),(dt.w._mdf||this._isFirstFrame)&&($t.wi=dt.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(et,dt,kt){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et.l?et.l.length:0);var dt=!1;et.fc?(dt=!0,this.values.fill=this.buildColor(et.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=dt;var kt=!1;et.sc&&(kt=!0,this.values.stroke=this.buildColor(et.sc),this.values.sWidth=et.sw);var $t=this.globalData.fontManager.getFontByName(et.f),Tt,Dt,Ft=et.l,Ut=this.mHelper;this.stroke=kt,this.values.fValue=et.finalSize+"px "+this.globalData.fontManager.getFontByName(et.f).fFamily,Dt=et.finalText.length;var Ht,Kt,Yt,Jt,Zt,er,rr,sr,nr,ir,lr=this.data.singleShape,or=et.tr*.001*et.finalSize,cr=0,dr=0,ur=!0,pr=0;for(Tt=0;Tt<Dt;Tt+=1){Ht=this.globalData.fontManager.getCharData(et.finalText[Tt],$t.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily),Kt=Ht&&Ht.data||{},Ut.reset(),lr&&Ft[Tt].n&&(cr=-or,dr+=et.yOffset,dr+=ur?1:0,ur=!1),Zt=Kt.shapes?Kt.shapes[0].it:[],rr=Zt.length,Ut.scale(et.finalSize/100,et.finalSize/100),lr&&this.applyTextPropertiesToMatrix(et,Ut,Ft[Tt].line,cr,dr),nr=createSizedArray(rr-1);var mr=0;for(er=0;er<rr;er+=1)if(Zt[er].ty==="sh"){for(Jt=Zt[er].ks.k.i.length,sr=Zt[er].ks.k,ir=[],Yt=1;Yt<Jt;Yt+=1)Yt===1&&ir.push(Ut.applyToX(sr.v[0][0],sr.v[0][1],0),Ut.applyToY(sr.v[0][0],sr.v[0][1],0)),ir.push(Ut.applyToX(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToY(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToX(sr.i[Yt][0],sr.i[Yt][1],0),Ut.applyToY(sr.i[Yt][0],sr.i[Yt][1],0),Ut.applyToX(sr.v[Yt][0],sr.v[Yt][1],0),Ut.applyToY(sr.v[Yt][0],sr.v[Yt][1],0));ir.push(Ut.applyToX(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToY(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToX(sr.i[0][0],sr.i[0][1],0),Ut.applyToY(sr.i[0][0],sr.i[0][1],0),Ut.applyToX(sr.v[0][0],sr.v[0][1],0),Ut.applyToY(sr.v[0][0],sr.v[0][1],0)),nr[mr]=ir,mr+=1}lr&&(cr+=Ft[Tt].l,cr+=or),this.textSpans[pr]?this.textSpans[pr].elem=nr:this.textSpans[pr]={elem:nr},pr+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var et=this.canvasContext;et.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var dt,kt,$t,Tt,Dt,Ft,Ut=this.textAnimator.renderedLetters,Ht=this.textProperty.currentData.l;kt=Ht.length;var Kt,Yt=null,Jt=null,Zt=null,er,rr,sr=this.globalData.renderer;for(dt=0;dt<kt;dt+=1)if(!Ht[dt].n){if(Kt=Ut[dt],Kt&&(sr.save(),sr.ctxTransform(Kt.p),sr.ctxOpacity(Kt.o)),this.fill){for(Kt&&Kt.fc?Yt!==Kt.fc&&(sr.ctxFillStyle(Kt.fc),Yt=Kt.fc):Yt!==this.values.fill&&(Yt=this.values.fill,sr.ctxFillStyle(this.values.fill)),er=this.textSpans[dt].elem,Tt=er.length,this.globalData.canvasContext.beginPath(),$t=0;$t<Tt;$t+=1)for(rr=er[$t],Ft=rr.length,this.globalData.canvasContext.moveTo(rr[0],rr[1]),Dt=2;Dt<Ft;Dt+=6)this.globalData.canvasContext.bezierCurveTo(rr[Dt],rr[Dt+1],rr[Dt+2],rr[Dt+3],rr[Dt+4],rr[Dt+5]);this.globalData.canvasContext.closePath(),sr.ctxFill()}if(this.stroke){for(Kt&&Kt.sw?Zt!==Kt.sw&&(Zt=Kt.sw,sr.ctxLineWidth(Kt.sw)):Zt!==this.values.sWidth&&(Zt=this.values.sWidth,sr.ctxLineWidth(this.values.sWidth)),Kt&&Kt.sc?Jt!==Kt.sc&&(Jt=Kt.sc,sr.ctxStrokeStyle(Kt.sc)):Jt!==this.values.stroke&&(Jt=this.values.stroke,sr.ctxStrokeStyle(this.values.stroke)),er=this.textSpans[dt].elem,Tt=er.length,this.globalData.canvasContext.beginPath(),$t=0;$t<Tt;$t+=1)for(rr=er[$t],Ft=rr.length,this.globalData.canvasContext.moveTo(rr[0],rr[1]),Dt=2;Dt<Ft;Dt+=6)this.globalData.canvasContext.bezierCurveTo(rr[Dt],rr[Dt+1],rr[Dt+2],rr[Dt+3],rr[Dt+4],rr[Dt+5]);this.globalData.canvasContext.closePath(),sr.ctxStroke()}Kt&&this.globalData.renderer.restore()}};function CVImageElement(et,dt,kt){this.assetData=dt.getAssetData(et.refId),this.img=dt.imageLoader.getAsset(this.assetData),this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var et=createTag("canvas");et.width=this.assetData.w,et.height=this.assetData.h;var dt=et.getContext("2d"),kt=this.img.width,$t=this.img.height,Tt=kt/$t,Dt=this.assetData.w/this.assetData.h,Ft,Ut,Ht=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;Tt>Dt&&Ht==="xMidYMid slice"||Tt<Dt&&Ht!=="xMidYMid slice"?(Ut=$t,Ft=Ut*Dt):(Ft=kt,Ut=Ft/Dt),dt.drawImage(this.img,(kt-Ft)/2,($t-Ut)/2,Ft,Ut,0,0,this.assetData.w,this.assetData.h),this.img=et}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(et,dt,kt){this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(et){return new CVShapeElement(et,this.globalData,this)},CanvasRendererBase.prototype.createText=function(et){return new CVTextElement(et,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(et){return new CVImageElement(et,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(et){return new CVSolidElement(et,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(et){et[0]===1&&et[1]===0&&et[4]===0&&et[5]===1&&et[12]===0&&et[13]===0||this.canvasContext.transform(et[0],et[1],et[4],et[5],et[12],et[13])},CanvasRendererBase.prototype.ctxOpacity=function(et){this.canvasContext.globalAlpha*=et<0?0:et},CanvasRendererBase.prototype.ctxFillStyle=function(et){this.canvasContext.fillStyle=et},CanvasRendererBase.prototype.ctxStrokeStyle=function(et){this.canvasContext.strokeStyle=et},CanvasRendererBase.prototype.ctxLineWidth=function(et){this.canvasContext.lineWidth=et},CanvasRendererBase.prototype.ctxLineCap=function(et){this.canvasContext.lineCap=et},CanvasRendererBase.prototype.ctxLineJoin=function(et){this.canvasContext.lineJoin=et},CanvasRendererBase.prototype.ctxMiterLimit=function(et){this.canvasContext.miterLimit=et},CanvasRendererBase.prototype.ctxFill=function(et){this.canvasContext.fill(et)},CanvasRendererBase.prototype.ctxFillRect=function(et,dt,kt,$t){this.canvasContext.fillRect(et,dt,kt,$t)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(et){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}et&&(this.globalData.blendMode="source-over"),this.contextData.restore(et)},CanvasRendererBase.prototype.configAnimation=function(et){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var dt=this.animationItem.container.style;dt.width="100%",dt.height="100%";var kt="0px 0px 0px";dt.transformOrigin=kt,dt.mozTransformOrigin=kt,dt.webkitTransformOrigin=kt,dt["-webkit-transform"]=kt,dt.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=et,this.layers=et.layers,this.transformCanvas={w:et.w,h:et.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(et,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(et.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(et,dt){this.reset();var kt,$t;et?(kt=et,$t=dt,this.canvasContext.canvas.width=kt,this.canvasContext.canvas.height=$t):(this.animationItem.wrapper&&this.animationItem.container?(kt=this.animationItem.wrapper.offsetWidth,$t=this.animationItem.wrapper.offsetHeight):(kt=this.canvasContext.canvas.width,$t=this.canvasContext.canvas.height),this.canvasContext.canvas.width=kt*this.renderConfig.dpr,this.canvasContext.canvas.height=$t*this.renderConfig.dpr);var Tt,Dt;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var Ft=this.renderConfig.preserveAspectRatio.split(" "),Ut=Ft[1]||"meet",Ht=Ft[0]||"xMidYMid",Kt=Ht.substr(0,4),Yt=Ht.substr(4);Tt=kt/$t,Dt=this.transformCanvas.w/this.transformCanvas.h,Dt>Tt&&Ut==="meet"||Dt<Tt&&Ut==="slice"?(this.transformCanvas.sx=kt/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=kt/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=$t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=$t/(this.transformCanvas.h/this.renderConfig.dpr)),Kt==="xMid"&&(Dt<Tt&&Ut==="meet"||Dt>Tt&&Ut==="slice")?this.transformCanvas.tx=(kt-this.transformCanvas.w*($t/this.transformCanvas.h))/2*this.renderConfig.dpr:Kt==="xMax"&&(Dt<Tt&&Ut==="meet"||Dt>Tt&&Ut==="slice")?this.transformCanvas.tx=(kt-this.transformCanvas.w*($t/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Yt==="YMid"&&(Dt>Tt&&Ut==="meet"||Dt<Tt&&Ut==="slice")?this.transformCanvas.ty=($t-this.transformCanvas.h*(kt/this.transformCanvas.w))/2*this.renderConfig.dpr:Yt==="YMax"&&(Dt>Tt&&Ut==="meet"||Dt<Tt&&Ut==="slice")?this.transformCanvas.ty=($t-this.transformCanvas.h*(kt/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=kt/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=$t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var et,dt=this.layers?this.layers.length:0;for(et=dt-1;et>=0;et-=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(et,dt){if(!(this.renderedFrame===et&&this.renderConfig.clearCanvas===!0&&!dt||this.destroyed||et===-1)){this.renderedFrame=et,this.globalData.frameNum=et-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||dt,this.globalData.projectInterface.currentFrame=et;var kt,$t=this.layers.length;for(this.completeLayers||this.checkLayers(et),kt=$t-1;kt>=0;kt-=1)(this.completeLayers||this.elements[kt])&&this.elements[kt].prepareFrame(et-this.layers[kt].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),kt=$t-1;kt>=0;kt-=1)(this.completeLayers||this.elements[kt])&&this.elements[kt].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(et){var dt=this.elements;if(!(dt[et]||this.layers[et].ty===99)){var kt=this.createItem(this.layers[et],this,this.globalData);dt[et]=kt,kt.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();et.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var et,dt=15;for(et=0;et<dt;et+=1){var kt=new CanvasContext;this.stack[et]=kt}this._length=dt,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var et=this._length*2,dt=0;for(dt=this._length;dt<et;dt+=1)this.stack[dt]=new CanvasContext;this._length=et},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(et){this.cArrPos-=1;var dt=this.stack[this.cArrPos],kt=dt.transform,$t,Tt=this.cTr.props;for($t=0;$t<16;$t+=1)Tt[$t]=kt[$t];if(et){this.nativeContext.restore();var Dt=this.stack[this.cArrPos+1];this.appliedFillStyle=Dt.fillStyle,this.appliedStrokeStyle=Dt.strokeStyle,this.appliedLineWidth=Dt.lineWidth,this.appliedLineCap=Dt.lineCap,this.appliedLineJoin=Dt.lineJoin,this.appliedMiterLimit=Dt.miterLimit}this.nativeContext.setTransform(kt[0],kt[1],kt[4],kt[5],kt[12],kt[13]),(et||dt.opacity!==-1&&this.currentOpacity!==dt.opacity)&&(this.nativeContext.globalAlpha=dt.opacity,this.currentOpacity=dt.opacity),this.currentFillStyle=dt.fillStyle,this.currentStrokeStyle=dt.strokeStyle,this.currentLineWidth=dt.lineWidth,this.currentLineCap=dt.lineCap,this.currentLineJoin=dt.lineJoin,this.currentMiterLimit=dt.miterLimit},CVContextData.prototype.save=function(et){et&&this.nativeContext.save();var dt=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var kt=this.stack[this.cArrPos],$t;for($t=0;$t<16;$t+=1)kt.transform[$t]=dt[$t];this.cArrPos+=1;var Tt=this.stack[this.cArrPos];Tt.opacity=kt.opacity,Tt.fillStyle=kt.fillStyle,Tt.strokeStyle=kt.strokeStyle,Tt.lineWidth=kt.lineWidth,Tt.lineCap=kt.lineCap,Tt.lineJoin=kt.lineJoin,Tt.miterLimit=kt.miterLimit},CVContextData.prototype.setOpacity=function(et){this.stack[this.cArrPos].opacity=et},CVContextData.prototype.setContext=function(et){this.nativeContext=et},CVContextData.prototype.fillStyle=function(et){this.stack[this.cArrPos].fillStyle!==et&&(this.currentFillStyle=et,this.stack[this.cArrPos].fillStyle=et)},CVContextData.prototype.strokeStyle=function(et){this.stack[this.cArrPos].strokeStyle!==et&&(this.currentStrokeStyle=et,this.stack[this.cArrPos].strokeStyle=et)},CVContextData.prototype.lineWidth=function(et){this.stack[this.cArrPos].lineWidth!==et&&(this.currentLineWidth=et,this.stack[this.cArrPos].lineWidth=et)},CVContextData.prototype.lineCap=function(et){this.stack[this.cArrPos].lineCap!==et&&(this.currentLineCap=et,this.stack[this.cArrPos].lineCap=et)},CVContextData.prototype.lineJoin=function(et){this.stack[this.cArrPos].lineJoin!==et&&(this.currentLineJoin=et,this.stack[this.cArrPos].lineJoin=et)},CVContextData.prototype.miterLimit=function(et){this.stack[this.cArrPos].miterLimit!==et&&(this.currentMiterLimit=et,this.stack[this.cArrPos].miterLimit=et)},CVContextData.prototype.transform=function(et){this.transformMat.cloneFromProps(et);var dt=this.cTr;this.transformMat.multiply(dt),dt.cloneFromProps(this.transformMat.props);var kt=dt.props;this.nativeContext.setTransform(kt[0],kt[1],kt[4],kt[5],kt[12],kt[13])},CVContextData.prototype.opacity=function(et){var dt=this.stack[this.cArrPos].opacity;dt*=et<0?0:et,this.stack[this.cArrPos].opacity!==dt&&(this.currentOpacity!==et&&(this.nativeContext.globalAlpha=et,this.currentOpacity=et),this.stack[this.cArrPos].opacity=dt)},CVContextData.prototype.fill=function(et){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(et)},CVContextData.prototype.fillRect=function(et,dt,kt,$t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(et,dt,kt,$t)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(et,dt,kt){this.completeLayers=!1,this.layers=et.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(et,dt,kt),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var et=this.canvasContext;et.beginPath(),et.moveTo(0,0),et.lineTo(this.data.w,0),et.lineTo(this.data.w,this.data.h),et.lineTo(0,this.data.h),et.lineTo(0,0),et.clip();var dt,kt=this.layers.length;for(dt=kt-1;dt>=0;dt-=1)(this.completeLayers||this.elements[dt])&&this.elements[dt].renderFrame()},CVCompElement.prototype.destroy=function(){var et,dt=this.layers.length;for(et=dt-1;et>=0;et-=1)this.elements[et]&&this.elements[et].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(et){return new CVCompElement(et,this.globalData,this)};function CanvasRenderer(et,dt){this.animationItem=et,this.renderConfig={clearCanvas:dt&&dt.clearCanvas!==void 0?dt.clearCanvas:!0,context:dt&&dt.context||null,progressiveLoad:dt&&dt.progressiveLoad||!1,preserveAspectRatio:dt&&dt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:dt&&dt.contentVisibility||"visible",className:dt&&dt.className||"",id:dt&&dt.id||"",runExpressions:!dt||dt.runExpressions===void 0||dt.runExpressions},this.renderConfig.dpr=dt&&dt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=dt&&dt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(et){return new CVCompElement(et,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var dt=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var kt=this.finalTransform.mat.toCSS();dt.transform=kt,dt.webkitTransform=kt}this.finalTransform._opMdf&&(dt.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(et,dt,kt){this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var et;this.data.hasMask?(et=createNS("rect"),et.setAttribute("width",this.data.sw),et.setAttribute("height",this.data.sh),et.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(et=createTag("div"),et.style.width=this.data.sw+"px",et.style.height=this.data.sh+"px",et.style.backgroundColor=this.data.sc),this.layerElement.appendChild(et)};function HShapeElement(et,dt,kt){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(et,dt,kt),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var et;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),et=this.svgElement;else{et=createNS("svg");var dt=this.comp.data?this.comp.data:this.globalData.compSize;et.setAttribute("width",dt.w),et.setAttribute("height",dt.h),et.appendChild(this.shapesContainer),this.layerElement.appendChild(et)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=et},HShapeElement.prototype.getTransformedPoint=function(et,dt){var kt,$t=et.length;for(kt=0;kt<$t;kt+=1)dt=et[kt].mProps.v.applyToPointArray(dt[0],dt[1],0);return dt},HShapeElement.prototype.calculateShapeBoundingBox=function(et,dt){var kt=et.sh.v,$t=et.transformers,Tt,Dt=kt._length,Ft,Ut,Ht,Kt;if(!(Dt<=1)){for(Tt=0;Tt<Dt-1;Tt+=1)Ft=this.getTransformedPoint($t,kt.v[Tt]),Ut=this.getTransformedPoint($t,kt.o[Tt]),Ht=this.getTransformedPoint($t,kt.i[Tt+1]),Kt=this.getTransformedPoint($t,kt.v[Tt+1]),this.checkBounds(Ft,Ut,Ht,Kt,dt);kt.c&&(Ft=this.getTransformedPoint($t,kt.v[Tt]),Ut=this.getTransformedPoint($t,kt.o[Tt]),Ht=this.getTransformedPoint($t,kt.i[0]),Kt=this.getTransformedPoint($t,kt.v[0]),this.checkBounds(Ft,Ut,Ht,Kt,dt))}},HShapeElement.prototype.checkBounds=function(et,dt,kt,$t,Tt){this.getBoundsOfCurve(et,dt,kt,$t);var Dt=this.shapeBoundingBox;Tt.x=bmMin(Dt.left,Tt.x),Tt.xMax=bmMax(Dt.right,Tt.xMax),Tt.y=bmMin(Dt.top,Tt.y),Tt.yMax=bmMax(Dt.bottom,Tt.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(et,dt,kt,$t){for(var Tt=[[et[0],$t[0]],[et[1],$t[1]]],Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt=0;Zt<2;++Zt)Ft=6*et[Zt]-12*dt[Zt]+6*kt[Zt],Dt=-3*et[Zt]+9*dt[Zt]-9*kt[Zt]+3*$t[Zt],Ut=3*dt[Zt]-3*et[Zt],Ft|=0,Dt|=0,Ut|=0,Dt===0&&Ft===0||(Dt===0?(Ht=-Ut/Ft,Ht>0&&Ht<1&&Tt[Zt].push(this.calculateF(Ht,et,dt,kt,$t,Zt))):(Kt=Ft*Ft-4*Ut*Dt,Kt>=0&&(Yt=(-Ft+bmSqrt(Kt))/(2*Dt),Yt>0&&Yt<1&&Tt[Zt].push(this.calculateF(Yt,et,dt,kt,$t,Zt)),Jt=(-Ft-bmSqrt(Kt))/(2*Dt),Jt>0&&Jt<1&&Tt[Zt].push(this.calculateF(Jt,et,dt,kt,$t,Zt)))));this.shapeBoundingBox.left=bmMin.apply(null,Tt[0]),this.shapeBoundingBox.top=bmMin.apply(null,Tt[1]),this.shapeBoundingBox.right=bmMax.apply(null,Tt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,Tt[1])},HShapeElement.prototype.calculateF=function(et,dt,kt,$t,Tt,Dt){return bmPow(1-et,3)*dt[Dt]+3*bmPow(1-et,2)*et*kt[Dt]+3*(1-et)*bmPow(et,2)*$t[Dt]+bmPow(et,3)*Tt[Dt]},HShapeElement.prototype.calculateBoundingBox=function(et,dt){var kt,$t=et.length;for(kt=0;kt<$t;kt+=1)et[kt]&&et[kt].sh?this.calculateShapeBoundingBox(et[kt],dt):et[kt]&&et[kt].it?this.calculateBoundingBox(et[kt].it,dt):et[kt]&&et[kt].style&&et[kt].w&&this.expandStrokeBoundingBox(et[kt].w,dt)},HShapeElement.prototype.expandStrokeBoundingBox=function(et,dt){var kt=0;if(et.keyframes){for(var $t=0;$t<et.keyframes.length;$t+=1){var Tt=et.keyframes[$t].s;Tt>kt&&(kt=Tt)}kt*=et.mult}else kt=et.v*et.mult;dt.x-=kt,dt.xMax+=kt,dt.y-=kt,dt.yMax+=kt},HShapeElement.prototype.currentBoxContains=function(et){return this.currentBBox.x<=et.x&&this.currentBBox.y<=et.y&&this.currentBBox.width+this.currentBBox.x>=et.x+et.width&&this.currentBBox.height+this.currentBBox.y>=et.y+et.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var et=this.tempBoundingBox,dt=999999;if(et.x=dt,et.xMax=-dt,et.y=dt,et.yMax=-dt,this.calculateBoundingBox(this.itemsData,et),et.width=et.xMax<et.x?0:et.xMax-et.x,et.height=et.yMax<et.y?0:et.yMax-et.y,this.currentBoxContains(et))return;var kt=!1;if(this.currentBBox.w!==et.width&&(this.currentBBox.w=et.width,this.shapeCont.setAttribute("width",et.width),kt=!0),this.currentBBox.h!==et.height&&(this.currentBBox.h=et.height,this.shapeCont.setAttribute("height",et.height),kt=!0),kt||this.currentBBox.x!==et.x||this.currentBBox.y!==et.y){this.currentBBox.w=et.width,this.currentBBox.h=et.height,this.currentBBox.x=et.x,this.currentBBox.y=et.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var $t=this.shapeCont.style,Tt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";$t.transform=Tt,$t.webkitTransform=Tt}}};function HTextElement(et,dt,kt){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var et=createNS("g");this.maskedElement.appendChild(et),this.innerElem=et}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et.l?et.l.length:0);var dt=this.innerElem.style,kt=et.fc?this.buildColor(et.fc):"rgba(0,0,0,0)";dt.fill=kt,dt.color=kt,et.sc&&(dt.stroke=this.buildColor(et.sc),dt.strokeWidth=et.sw+"px");var $t=this.globalData.fontManager.getFontByName(et.f);if(!this.globalData.fontManager.chars)if(dt.fontSize=et.finalSize+"px",dt.lineHeight=et.finalSize+"px",$t.fClass)this.innerElem.className=$t.fClass;else{dt.fontFamily=$t.fFamily;var Tt=et.fWeight,Dt=et.fStyle;dt.fontStyle=Dt,dt.fontWeight=Tt}var Ft,Ut,Ht=et.l;Ut=Ht.length;var Kt,Yt,Jt,Zt=this.mHelper,er,rr="",sr=0;for(Ft=0;Ft<Ut;Ft+=1){if(this.globalData.fontManager.chars?(this.textPaths[sr]?Kt=this.textPaths[sr]:(Kt=createNS("path"),Kt.setAttribute("stroke-linecap",lineCapEnum[1]),Kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),Kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[sr]?(Yt=this.textSpans[sr],Jt=Yt.children[0]):(Yt=createTag("div"),Yt.style.lineHeight=0,Jt=createNS("svg"),Jt.appendChild(Kt),styleDiv(Yt)))):this.isMasked?Kt=this.textPaths[sr]?this.textPaths[sr]:createNS("text"):this.textSpans[sr]?(Yt=this.textSpans[sr],Kt=this.textPaths[sr]):(Yt=createTag("span"),styleDiv(Yt),Kt=createTag("span"),styleDiv(Kt),Yt.appendChild(Kt)),this.globalData.fontManager.chars){var nr=this.globalData.fontManager.getCharData(et.finalText[Ft],$t.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily),ir;if(nr?ir=nr.data:ir=null,Zt.reset(),ir&&ir.shapes&&ir.shapes.length&&(er=ir.shapes[0].it,Zt.scale(et.finalSize/100,et.finalSize/100),rr=this.createPathShape(Zt,er),Kt.setAttribute("d",rr)),this.isMasked)this.innerElem.appendChild(Kt);else{if(this.innerElem.appendChild(Yt),ir&&ir.shapes){document.body.appendChild(Jt);var lr=Jt.getBBox();Jt.setAttribute("width",lr.width+2),Jt.setAttribute("height",lr.height+2),Jt.setAttribute("viewBox",lr.x-1+" "+(lr.y-1)+" "+(lr.width+2)+" "+(lr.height+2));var or=Jt.style,cr="translate("+(lr.x-1)+"px,"+(lr.y-1)+"px)";or.transform=cr,or.webkitTransform=cr,Ht[Ft].yOffset=lr.y-1}else Jt.setAttribute("width",1),Jt.setAttribute("height",1);Yt.appendChild(Jt)}}else if(Kt.textContent=Ht[Ft].val,Kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Kt);else{this.innerElem.appendChild(Yt);var dr=Kt.style,ur="translate3d(0,"+-et.finalSize/1.2+"px,0)";dr.transform=ur,dr.webkitTransform=ur}this.isMasked?this.textSpans[sr]=Kt:this.textSpans[sr]=Yt,this.textSpans[sr].style.display="block",this.textPaths[sr]=Kt,sr+=1}for(;sr<this.textSpans.length;)this.textSpans[sr].style.display="none",sr+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var et;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),et=this.svgElement.style;var dt="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";et.transform=dt,et.webkitTransform=dt}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var kt,$t,Tt=0,Dt=this.textAnimator.renderedLetters,Ft=this.textProperty.currentData.l;$t=Ft.length;var Ut,Ht,Kt;for(kt=0;kt<$t;kt+=1)Ft[kt].n?Tt+=1:(Ht=this.textSpans[kt],Kt=this.textPaths[kt],Ut=Dt[Tt],Tt+=1,Ut._mdf.m&&(this.isMasked?Ht.setAttribute("transform",Ut.m):(Ht.style.webkitTransform=Ut.m,Ht.style.transform=Ut.m)),Ht.style.opacity=Ut.o,Ut.sw&&Ut._mdf.sw&&Kt.setAttribute("stroke-width",Ut.sw),Ut.sc&&Ut._mdf.sc&&Kt.setAttribute("stroke",Ut.sc),Ut.fc&&Ut._mdf.fc&&(Kt.setAttribute("fill",Ut.fc),Kt.style.color=Ut.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Yt=this.innerElem.getBBox();this.currentBBox.w!==Yt.width&&(this.currentBBox.w=Yt.width,this.svgElement.setAttribute("width",Yt.width)),this.currentBBox.h!==Yt.height&&(this.currentBBox.h=Yt.height,this.svgElement.setAttribute("height",Yt.height));var Jt=1;if(this.currentBBox.w!==Yt.width+Jt*2||this.currentBBox.h!==Yt.height+Jt*2||this.currentBBox.x!==Yt.x-Jt||this.currentBBox.y!==Yt.y-Jt){this.currentBBox.w=Yt.width+Jt*2,this.currentBBox.h=Yt.height+Jt*2,this.currentBBox.x=Yt.x-Jt,this.currentBBox.y=Yt.y-Jt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),et=this.svgElement.style;var Zt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";et.transform=Zt,et.webkitTransform=Zt}}}};function HCameraElement(et,dt,kt){this.initFrame(),this.initBaseData(et,dt,kt),this.initHierarchy();var $t=PropertyFactory.getProp;if(this.pe=$t(this,et.pe,0,0,this),et.ks.p.s?(this.px=$t(this,et.ks.p.x,1,0,this),this.py=$t(this,et.ks.p.y,1,0,this),this.pz=$t(this,et.ks.p.z,1,0,this)):this.p=$t(this,et.ks.p,1,0,this),et.ks.a&&(this.a=$t(this,et.ks.a,1,0,this)),et.ks.or.k.length&&et.ks.or.k[0].to){var Tt,Dt=et.ks.or.k.length;for(Tt=0;Tt<Dt;Tt+=1)et.ks.or.k[Tt].to=null,et.ks.or.k[Tt].ti=null}this.or=$t(this,et.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=$t(this,et.ks.rx,0,degToRads,this),this.ry=$t(this,et.ks.ry,0,degToRads,this),this.rz=$t(this,et.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var et,dt=this.comp.threeDElements.length,kt,$t,Tt;for(et=0;et<dt;et+=1)if(kt=this.comp.threeDElements[et],kt.type==="3d"){$t=kt.perspectiveElem.style,Tt=kt.container.style;var Dt=this.pe.v+"px",Ft="0px 0px 0px",Ut="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";$t.perspective=Dt,$t.webkitPerspective=Dt,Tt.transformOrigin=Ft,Tt.mozTransformOrigin=Ft,Tt.webkitTransformOrigin=Ft,$t.transform=Ut,$t.webkitTransform=Ut}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var et=this._isFirstFrame,dt,kt;if(this.hierarchy)for(kt=this.hierarchy.length,dt=0;dt<kt;dt+=1)et=this.hierarchy[dt].finalTransform.mProp._mdf||et;if(et||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(kt=this.hierarchy.length-1,dt=kt;dt>=0;dt-=1){var $t=this.hierarchy[dt].finalTransform.mProp;this.mat.translate(-$t.p.v[0],-$t.p.v[1],$t.p.v[2]),this.mat.rotateX(-$t.or.v[0]).rotateY(-$t.or.v[1]).rotateZ($t.or.v[2]),this.mat.rotateX(-$t.rx.v).rotateY(-$t.ry.v).rotateZ($t.rz.v),this.mat.scale(1/$t.s.v[0],1/$t.s.v[1],1/$t.s.v[2]),this.mat.translate($t.a.v[0],$t.a.v[1],$t.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var Tt;this.p?Tt=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:Tt=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var Dt=Math.sqrt(Math.pow(Tt[0],2)+Math.pow(Tt[1],2)+Math.pow(Tt[2],2)),Ft=[Tt[0]/Dt,Tt[1]/Dt,Tt[2]/Dt],Ut=Math.sqrt(Ft[2]*Ft[2]+Ft[0]*Ft[0]),Ht=Math.atan2(Ft[1],Ut),Kt=Math.atan2(Ft[0],-Ft[2]);this.mat.rotateY(Kt).rotateX(-Ht)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Yt=!this._prevMat.equals(this.mat);if((Yt||this.pe._mdf)&&this.comp.threeDElements){kt=this.comp.threeDElements.length;var Jt,Zt,er;for(dt=0;dt<kt;dt+=1)if(Jt=this.comp.threeDElements[dt],Jt.type==="3d"){if(Yt){var rr=this.mat.toCSS();er=Jt.container.style,er.transform=rr,er.webkitTransform=rr}this.pe._mdf&&(Zt=Jt.perspectiveElem.style,Zt.perspective=this.pe.v+"px",Zt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(et){this.prepareProperties(et,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(et,dt,kt){this.assetData=dt.getAssetData(et.refId),this.initElement(et,dt,kt)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var et=this.globalData.getAssetsPath(this.assetData),dt=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",et),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(dt),dt.crossOrigin="anonymous",dt.src=et,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(et,dt){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:dt&&dt.className||"",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(dt&&dt.hideOnTransparent===!1),filterSize:{width:dt&&dt.filterSize&&dt.filterSize.width||"400%",height:dt&&dt.filterSize&&dt.filterSize.height||"400%",x:dt&&dt.filterSize&&dt.filterSize.x||"-100%",y:dt&&dt.filterSize&&dt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();et.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(et,dt){var kt=et.getBaseElement();if(kt){var $t=this.layers[dt];if(!$t.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(kt,dt);else{for(var Tt=0,Dt,Ft,Ut;Tt<dt;)this.elements[Tt]&&this.elements[Tt]!==!0&&this.elements[Tt].getBaseElement&&(Ft=this.elements[Tt],Ut=this.layers[Tt].ddd?this.getThreeDContainerByPos(Tt):Ft.getBaseElement(),Dt=Ut||Dt),Tt+=1;Dt?(!$t.ddd||!this.supports3d)&&this.layerElement.insertBefore(kt,Dt):(!$t.ddd||!this.supports3d)&&this.layerElement.appendChild(kt)}else this.addTo3dContainer(kt,dt)}},HybridRendererBase.prototype.createShape=function(et){return this.supports3d?new HShapeElement(et,this.globalData,this):new SVGShapeElement(et,this.globalData,this)},HybridRendererBase.prototype.createText=function(et){return this.supports3d?new HTextElement(et,this.globalData,this):new SVGTextLottieElement(et,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(et){return this.camera=new HCameraElement(et,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(et){return this.supports3d?new HImageElement(et,this.globalData,this):new IImageElement(et,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(et){return this.supports3d?new HSolidElement(et,this.globalData,this):new ISolidElement(et,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(et){for(var dt=0,kt=this.threeDElements.length;dt<kt;){if(this.threeDElements[dt].startPos<=et&&this.threeDElements[dt].endPos>=et)return this.threeDElements[dt].perspectiveElem;dt+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(et,dt){var kt=createTag("div"),$t,Tt;styleDiv(kt);var Dt=createTag("div");if(styleDiv(Dt),dt==="3d"){$t=kt.style,$t.width=this.globalData.compSize.w+"px",$t.height=this.globalData.compSize.h+"px";var Ft="50% 50%";$t.webkitTransformOrigin=Ft,$t.mozTransformOrigin=Ft,$t.transformOrigin=Ft,Tt=Dt.style;var Ut="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";Tt.transform=Ut,Tt.webkitTransform=Ut}kt.appendChild(Dt);var Ht={container:Dt,perspectiveElem:kt,startPos:et,endPos:et,type:dt};return this.threeDElements.push(Ht),Ht},HybridRendererBase.prototype.build3dContainers=function(){var et,dt=this.layers.length,kt,$t="";for(et=0;et<dt;et+=1)this.layers[et].ddd&&this.layers[et].ty!==3?($t!=="3d"&&($t="3d",kt=this.createThreeDContainer(et,"3d")),kt.endPos=Math.max(kt.endPos,et)):($t!=="2d"&&($t="2d",kt=this.createThreeDContainer(et,"2d")),kt.endPos=Math.max(kt.endPos,et));for(dt=this.threeDElements.length,et=dt-1;et>=0;et-=1)this.resizerElem.appendChild(this.threeDElements[et].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(et,dt){for(var kt=0,$t=this.threeDElements.length;kt<$t;){if(dt<=this.threeDElements[kt].endPos){for(var Tt=this.threeDElements[kt].startPos,Dt;Tt<dt;)this.elements[Tt]&&this.elements[Tt].getBaseElement&&(Dt=this.elements[Tt].getBaseElement()),Tt+=1;Dt?this.threeDElements[kt].container.insertBefore(et,Dt):this.threeDElements[kt].container.appendChild(et);break}kt+=1}},HybridRendererBase.prototype.configAnimation=function(et){var dt=createTag("div"),kt=this.animationItem.wrapper,$t=dt.style;$t.width=et.w+"px",$t.height=et.h+"px",this.resizerElem=dt,styleDiv(dt),$t.transformStyle="flat",$t.mozTransformStyle="flat",$t.webkitTransformStyle="flat",this.renderConfig.className&&dt.setAttribute("class",this.renderConfig.className),kt.appendChild(dt),$t.overflow="hidden";var Tt=createNS("svg");Tt.setAttribute("width","1"),Tt.setAttribute("height","1"),styleDiv(Tt),this.resizerElem.appendChild(Tt);var Dt=createNS("defs");Tt.appendChild(Dt),this.data=et,this.setupGlobalData(et,Tt),this.globalData.defs=Dt,this.layers=et.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var et,dt=this.layers?this.layers.length:0;for(et=0;et<dt;et+=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var et=this.animationItem.wrapper.offsetWidth,dt=this.animationItem.wrapper.offsetHeight,kt=et/dt,$t=this.globalData.compSize.w/this.globalData.compSize.h,Tt,Dt,Ft,Ut;$t>kt?(Tt=et/this.globalData.compSize.w,Dt=et/this.globalData.compSize.w,Ft=0,Ut=(dt-this.globalData.compSize.h*(et/this.globalData.compSize.w))/2):(Tt=dt/this.globalData.compSize.h,Dt=dt/this.globalData.compSize.h,Ft=(et-this.globalData.compSize.w*(dt/this.globalData.compSize.h))/2,Ut=0);var Ht=this.resizerElem.style;Ht.webkitTransform="matrix3d("+Tt+",0,0,0,0,"+Dt+",0,0,0,0,1,0,"+Ft+","+Ut+",0,1)",Ht.transform=Ht.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var et=this.globalData.compSize.w,dt=this.globalData.compSize.h,kt,$t=this.threeDElements.length;for(kt=0;kt<$t;kt+=1){var Tt=this.threeDElements[kt].perspectiveElem.style;Tt.webkitPerspective=Math.sqrt(Math.pow(et,2)+Math.pow(dt,2))+"px",Tt.perspective=Tt.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(et){var dt,kt=et.length,$t=createTag("div");for(dt=0;dt<kt;dt+=1)if(et[dt].xt){var Tt=this.createComp(et[dt],$t,this.globalData.comp,null);Tt.initExpressions(),this.globalData.projectInterface.registerComposition(Tt)}};function HCompElement(et,dt,kt){this.layers=et.layers,this.supports3d=!et.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(et,dt,kt),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(et,dt){for(var kt=0,$t;kt<dt;)this.elements[kt]&&this.elements[kt].getBaseElement&&($t=this.elements[kt].getBaseElement()),kt+=1;$t?this.layerElement.insertBefore(et,$t):this.layerElement.appendChild(et)},HCompElement.prototype.createComp=function(et){return this.supports3d?new HCompElement(et,this.globalData,this):new SVGCompElement(et,this.globalData,this)};function HybridRenderer(et,dt){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:dt&&dt.className||"",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(dt&&dt.hideOnTransparent===!1),filterSize:{width:dt&&dt.filterSize&&dt.filterSize.width||"400%",height:dt&&dt.filterSize&&dt.filterSize.height||"400%",x:dt&&dt.filterSize&&dt.filterSize.x||"-100%",y:dt&&dt.filterSize&&dt.filterSize.y||"-100%"},runExpressions:!dt||dt.runExpressions===void 0||dt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(et){return this.supports3d?new HCompElement(et,this.globalData,this):new SVGCompElement(et,this.globalData,this)};var CompExpressionInterface=function(){return function(et){function dt(kt){for(var $t=0,Tt=et.layers.length;$t<Tt;){if(et.layers[$t].nm===kt||et.layers[$t].ind===kt)return et.elements[$t].layerInterface;$t+=1}return null}return Object.defineProperty(dt,"_name",{value:et.data.nm}),dt.layer=dt,dt.pixelAspect=1,dt.height=et.data.h||et.globalData.compSize.h,dt.width=et.data.w||et.globalData.compSize.w,dt.pixelAspect=1,dt.frameDuration=1/et.globalData.frameRate,dt.displayStartTime=0,dt.numLayers=et.layers.length,dt}}();function _typeof$2(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(kt){return typeof kt}:_typeof$2=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof$2(et)}function seedRandom(et,dt){var kt=this,$t=256,Tt=6,Dt=52,Ft="random",Ut=dt.pow($t,Tt),Ht=dt.pow(2,Dt),Kt=Ht*2,Yt=$t-1,Jt;function Zt(or,cr,dr){var ur=[];cr=cr===!0?{entropy:!0}:cr||{};var pr=nr(sr(cr.entropy?[or,lr(et)]:or===null?ir():or,3),ur),mr=new er(ur),jr=function(){for(var br=mr.g(Tt),_r=Ut,Mr=0;br<Ht;)br=(br+Mr)*$t,_r*=$t,Mr=mr.g(1);for(;br>=Kt;)br/=2,_r/=2,Mr>>>=1;return(br+Mr)/_r};return jr.int32=function(){return mr.g(4)|0},jr.quick=function(){return mr.g(4)/4294967296},jr.double=jr,nr(lr(mr.S),et),(cr.pass||dr||function(Rr,br,_r,Mr){return Mr&&(Mr.S&&rr(Mr,mr),Rr.state=function(){return rr(mr,{})}),_r?(dt[Ft]=Rr,br):Rr})(jr,pr,"global"in cr?cr.global:this==dt,cr.state)}dt["seed"+Ft]=Zt;function er(or){var cr,dr=or.length,ur=this,pr=0,mr=ur.i=ur.j=0,jr=ur.S=[];for(dr||(or=[dr++]);pr<$t;)jr[pr]=pr++;for(pr=0;pr<$t;pr++)jr[pr]=jr[mr=Yt&mr+or[pr%dr]+(cr=jr[pr])],jr[mr]=cr;ur.g=function(Rr){for(var br,_r=0,Mr=ur.i,Pr=ur.j,Or=ur.S;Rr--;)br=Or[Mr=Yt&Mr+1],_r=_r*$t+Or[Yt&(Or[Mr]=Or[Pr=Yt&Pr+br])+(Or[Pr]=br)];return ur.i=Mr,ur.j=Pr,_r}}function rr(or,cr){return cr.i=or.i,cr.j=or.j,cr.S=or.S.slice(),cr}function sr(or,cr){var dr=[],ur=_typeof$2(or),pr;if(cr&&ur=="object")for(pr in or)try{dr.push(sr(or[pr],cr-1))}catch{}return dr.length?dr:ur=="string"?or:or+"\0"}function nr(or,cr){for(var dr=or+"",ur,pr=0;pr<dr.length;)cr[Yt&pr]=Yt&(ur^=cr[Yt&pr]*19)+dr.charCodeAt(pr++);return lr(cr)}function ir(){try{var or=new Uint8Array($t);return(kt.crypto||kt.msCrypto).getRandomValues(or),lr(or)}catch{var cr=kt.navigator,dr=cr&&cr.plugins;return[+new Date,kt,dr,kt.screen,lr(et)]}}function lr(or){return String.fromCharCode.apply(0,or)}nr(dt.random(),et)}function initialize$2(et){seedRandom([],et)}var propTypes={SHAPE:"shape"};function _typeof$1(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(kt){return typeof kt}:_typeof$1=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof$1(et)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(et){return et.constructor===Array||et.constructor===Float32Array}function isNumerable(et,dt){return et==="number"||dt instanceof Number||et==="boolean"||et==="string"}function $bm_neg(et){var dt=_typeof$1(et);if(dt==="number"||et instanceof Number||dt==="boolean")return-et;if($bm_isInstanceOfArray(et)){var kt,$t=et.length,Tt=[];for(kt=0;kt<$t;kt+=1)Tt[kt]=-et[kt];return Tt}return et.propType?et.v:-et}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(et,dt){var kt=_typeof$1(et),$t=_typeof$1(dt);if(isNumerable(kt,et)&&isNumerable($t,dt)||kt==="string"||$t==="string")return et+dt;if($bm_isInstanceOfArray(et)&&isNumerable($t,dt))return et=et.slice(0),et[0]+=dt,et;if(isNumerable(kt,et)&&$bm_isInstanceOfArray(dt))return dt=dt.slice(0),dt[0]=et+dt[0],dt;if($bm_isInstanceOfArray(et)&&$bm_isInstanceOfArray(dt)){for(var Tt=0,Dt=et.length,Ft=dt.length,Ut=[];Tt<Dt||Tt<Ft;)(typeof et[Tt]=="number"||et[Tt]instanceof Number)&&(typeof dt[Tt]=="number"||dt[Tt]instanceof Number)?Ut[Tt]=et[Tt]+dt[Tt]:Ut[Tt]=dt[Tt]===void 0?et[Tt]:et[Tt]||dt[Tt],Tt+=1;return Ut}return 0}var add=sum;function sub(et,dt){var kt=_typeof$1(et),$t=_typeof$1(dt);if(isNumerable(kt,et)&&isNumerable($t,dt))return kt==="string"&&(et=parseInt(et,10)),$t==="string"&&(dt=parseInt(dt,10)),et-dt;if($bm_isInstanceOfArray(et)&&isNumerable($t,dt))return et=et.slice(0),et[0]-=dt,et;if(isNumerable(kt,et)&&$bm_isInstanceOfArray(dt))return dt=dt.slice(0),dt[0]=et-dt[0],dt;if($bm_isInstanceOfArray(et)&&$bm_isInstanceOfArray(dt)){for(var Tt=0,Dt=et.length,Ft=dt.length,Ut=[];Tt<Dt||Tt<Ft;)(typeof et[Tt]=="number"||et[Tt]instanceof Number)&&(typeof dt[Tt]=="number"||dt[Tt]instanceof Number)?Ut[Tt]=et[Tt]-dt[Tt]:Ut[Tt]=dt[Tt]===void 0?et[Tt]:et[Tt]||dt[Tt],Tt+=1;return Ut}return 0}function mul(et,dt){var kt=_typeof$1(et),$t=_typeof$1(dt),Tt;if(isNumerable(kt,et)&&isNumerable($t,dt))return et*dt;var Dt,Ft;if($bm_isInstanceOfArray(et)&&isNumerable($t,dt)){for(Ft=et.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et[Dt]*dt;return Tt}if(isNumerable(kt,et)&&$bm_isInstanceOfArray(dt)){for(Ft=dt.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et*dt[Dt];return Tt}return 0}function div(et,dt){var kt=_typeof$1(et),$t=_typeof$1(dt),Tt;if(isNumerable(kt,et)&&isNumerable($t,dt))return et/dt;var Dt,Ft;if($bm_isInstanceOfArray(et)&&isNumerable($t,dt)){for(Ft=et.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et[Dt]/dt;return Tt}if(isNumerable(kt,et)&&$bm_isInstanceOfArray(dt)){for(Ft=dt.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et/dt[Dt];return Tt}return 0}function mod(et,dt){return typeof et=="string"&&(et=parseInt(et,10)),typeof dt=="string"&&(dt=parseInt(dt,10)),et%dt}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(et,dt,kt){if(dt>kt){var $t=kt;kt=dt,dt=$t}return Math.min(Math.max(et,dt),kt)}function radiansToDegrees(et){return et/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(et){return et*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(et,dt){if(typeof et=="number"||et instanceof Number)return dt=dt||0,Math.abs(et-dt);dt||(dt=helperLengthArray);var kt,$t=Math.min(et.length,dt.length),Tt=0;for(kt=0;kt<$t;kt+=1)Tt+=Math.pow(dt[kt]-et[kt],2);return Math.sqrt(Tt)}function normalize(et){return div(et,length(et))}function rgbToHsl(et){var dt=et[0],kt=et[1],$t=et[2],Tt=Math.max(dt,kt,$t),Dt=Math.min(dt,kt,$t),Ft,Ut,Ht=(Tt+Dt)/2;if(Tt===Dt)Ft=0,Ut=0;else{var Kt=Tt-Dt;switch(Ut=Ht>.5?Kt/(2-Tt-Dt):Kt/(Tt+Dt),Tt){case dt:Ft=(kt-$t)/Kt+(kt<$t?6:0);break;case kt:Ft=($t-dt)/Kt+2;break;case $t:Ft=(dt-kt)/Kt+4;break}Ft/=6}return[Ft,Ut,Ht,et[3]]}function hue2rgb(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb(et){var dt=et[0],kt=et[1],$t=et[2],Tt,Dt,Ft;if(kt===0)Tt=$t,Ft=$t,Dt=$t;else{var Ut=$t<.5?$t*(1+kt):$t+kt-$t*kt,Ht=2*$t-Ut;Tt=hue2rgb(Ht,Ut,dt+1/3),Dt=hue2rgb(Ht,Ut,dt),Ft=hue2rgb(Ht,Ut,dt-1/3)}return[Tt,Dt,Ft,et[3]]}function linear(et,dt,kt,$t,Tt){if(($t===void 0||Tt===void 0)&&($t=dt,Tt=kt,dt=0,kt=1),kt<dt){var Dt=kt;kt=dt,dt=Dt}if(et<=dt)return $t;if(et>=kt)return Tt;var Ft=kt===dt?0:(et-dt)/(kt-dt);if(!$t.length)return $t+(Tt-$t)*Ft;var Ut,Ht=$t.length,Kt=createTypedArray("float32",Ht);for(Ut=0;Ut<Ht;Ut+=1)Kt[Ut]=$t[Ut]+(Tt[Ut]-$t[Ut])*Ft;return Kt}function random(et,dt){if(dt===void 0&&(et===void 0?(et=0,dt=1):(dt=et,et=void 0)),dt.length){var kt,$t=dt.length;et||(et=createTypedArray("float32",$t));var Tt=createTypedArray("float32",$t),Dt=BMMath.random();for(kt=0;kt<$t;kt+=1)Tt[kt]=et[kt]+Dt*(dt[kt]-et[kt]);return Tt}et===void 0&&(et=0);var Ft=BMMath.random();return et+Ft*(dt-et)}function createPath(et,dt,kt,$t){var Tt,Dt=et.length,Ft=shapePool.newElement();Ft.setPathData(!!$t,Dt);var Ut=[0,0],Ht,Kt;for(Tt=0;Tt<Dt;Tt+=1)Ht=dt&&dt[Tt]?dt[Tt]:Ut,Kt=kt&&kt[Tt]?kt[Tt]:Ut,Ft.setTripleAt(et[Tt][0],et[Tt][1],Kt[0]+et[Tt][0],Kt[1]+et[Tt][1],Ht[0]+et[Tt][0],Ht[1]+et[Tt][1],Tt,!0);return Ft}function initiateExpression(elem,data,property){function noOp(et){return et}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function et(dt,kt){var $t,Tt,Dt=this.pv.length?this.pv.length:1,Ft=createTypedArray("float32",Dt);dt=5;var Ut=Math.floor(time*dt);for($t=0,Tt=0;$t<Ut;){for(Tt=0;Tt<Dt;Tt+=1)Ft[Tt]+=-kt+kt*2*BMMath.random();$t+=1}var Ht=time*dt,Kt=Ht-Math.floor(Ht),Yt=createTypedArray("float32",Dt);if(Dt>1){for(Tt=0;Tt<Dt;Tt+=1)Yt[Tt]=this.pv[Tt]+Ft[Tt]+(-kt+kt*2*BMMath.random())*Kt;return Yt}return this.pv+Ft[0]+(-kt+kt*2*BMMath.random())*Kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(et,dt){return loopIn(et,dt,!0)}function loopOutDuration(et,dt){return loopOut(et,dt,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(et,dt){var kt=[dt[0]-et[0],dt[1]-et[1],dt[2]-et[2]],$t=Math.atan2(kt[0],Math.sqrt(kt[1]*kt[1]+kt[2]*kt[2]))/degToRads,Tt=-Math.atan2(kt[1],kt[2])/degToRads;return[Tt,$t,0]}function easeOut(et,dt,kt,$t,Tt){return applyEase(easeOutBez,et,dt,kt,$t,Tt)}function easeIn(et,dt,kt,$t,Tt){return applyEase(easeInBez,et,dt,kt,$t,Tt)}function ease(et,dt,kt,$t,Tt){return applyEase(easeInOutBez,et,dt,kt,$t,Tt)}function applyEase(et,dt,kt,$t,Tt,Dt){Tt===void 0?(Tt=kt,Dt=$t):dt=(dt-kt)/($t-kt),dt>1?dt=1:dt<0&&(dt=0);var Ft=et(dt);if($bm_isInstanceOfArray(Tt)){var Ut,Ht=Tt.length,Kt=createTypedArray("float32",Ht);for(Ut=0;Ut<Ht;Ut+=1)Kt[Ut]=(Dt[Ut]-Tt[Ut])*Ft+Tt[Ut];return Kt}return(Dt-Tt)*Ft+Tt}function nearestKey(et){var dt,kt=data.k.length,$t,Tt;if(!data.k.length||typeof data.k[0]=="number")$t=0,Tt=0;else if($t=-1,et*=elem.comp.globalData.frameRate,et<data.k[0].t)$t=1,Tt=data.k[0].t;else{for(dt=0;dt<kt-1;dt+=1)if(et===data.k[dt].t){$t=dt+1,Tt=data.k[dt].t;break}else if(et>data.k[dt].t&&et<data.k[dt+1].t){et-data.k[dt].t>data.k[dt+1].t-et?($t=dt+2,Tt=data.k[dt+1].t):($t=dt+1,Tt=data.k[dt].t);break}$t===-1&&($t=dt+1,Tt=data.k[dt].t)}var Dt={};return Dt.index=$t,Dt.time=Tt/elem.comp.globalData.frameRate,Dt}function key(et){var dt,kt,$t;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+et);et-=1,dt={time:data.k[et].t/elem.comp.globalData.frameRate,value:[]};var Tt=Object.prototype.hasOwnProperty.call(data.k[et],"s")?data.k[et].s:data.k[et-1].e;for($t=Tt.length,kt=0;kt<$t;kt+=1)dt[kt]=Tt[kt],dt.value[kt]=Tt[kt];return dt}function framesToTime(et,dt){return dt||(dt=elem.comp.globalData.frameRate),et/dt}function timeToFrames(et,dt){return!et&&et!==0&&(et=time),dt||(dt=elem.comp.globalData.frameRate),et*dt}function seedRandom(et){BMMath.seedrandom(randSeed+et)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(et,dt){return typeof value=="string"?dt===void 0?value.substring(et):value.substring(et,dt):""}function substr(et,dt){return typeof value=="string"?dt===void 0?value.substr(et):value.substr(et,dt):""}function posterizeTime(et){time=et===0?0:Math.floor(time*et)/et,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(et){return value=et,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var et={};et.initExpressions=dt,et.resetFrame=ExpressionManager.resetFrame;function dt(kt){var $t=0,Tt=[];function Dt(){$t+=1}function Ft(){$t-=1,$t===0&&Ht()}function Ut(Kt){Tt.indexOf(Kt)===-1&&Tt.push(Kt)}function Ht(){var Kt,Yt=Tt.length;for(Kt=0;Kt<Yt;Kt+=1)Tt[Kt].release();Tt.length=0}kt.renderer.compInterface=CompExpressionInterface(kt.renderer),kt.renderer.globalData.projectInterface.registerComposition(kt.renderer),kt.renderer.globalData.pushExpression=Dt,kt.renderer.globalData.popExpression=Ft,kt.renderer.globalData.registerExpressionProperty=Ut}return et}(),MaskManagerInterface=function(){function et(kt,$t){this._mask=kt,this._data=$t}Object.defineProperty(et.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(et.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var dt=function($t){var Tt=createSizedArray($t.viewData.length),Dt,Ft=$t.viewData.length;for(Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=new et($t.viewData[Dt],$t.masksProperties[Dt]);var Ut=function(Kt){for(Dt=0;Dt<Ft;){if($t.masksProperties[Dt].nm===Kt)return Tt[Dt];Dt+=1}return null};return Ut};return dt}(),ExpressionPropertyInterface=function(){var et={pv:0,v:0,mult:1},dt={pv:[0,0,0],v:[0,0,0],mult:1};function kt(Ft,Ut,Ht){Object.defineProperty(Ft,"velocity",{get:function(){return Ut.getVelocityAtTime(Ut.comp.currentFrame)}}),Ft.numKeys=Ut.keyframes?Ut.keyframes.length:0,Ft.key=function(Kt){if(!Ft.numKeys)return 0;var Yt="";"s"in Ut.keyframes[Kt-1]?Yt=Ut.keyframes[Kt-1].s:"e"in Ut.keyframes[Kt-2]?Yt=Ut.keyframes[Kt-2].e:Yt=Ut.keyframes[Kt-2].s;var Jt=Ht==="unidimensional"?new Number(Yt):Object.assign({},Yt);return Jt.time=Ut.keyframes[Kt-1].t/Ut.elem.comp.globalData.frameRate,Jt.value=Ht==="unidimensional"?Yt[0]:Yt,Jt},Ft.valueAtTime=Ut.getValueAtTime,Ft.speedAtTime=Ut.getSpeedAtTime,Ft.velocityAtTime=Ut.getVelocityAtTime,Ft.propertyGroup=Ut.propertyGroup}function $t(Ft){(!Ft||!("pv"in Ft))&&(Ft=et);var Ut=1/Ft.mult,Ht=Ft.pv*Ut,Kt=new Number(Ht);return Kt.value=Ht,kt(Kt,Ft,"unidimensional"),function(){return Ft.k&&Ft.getValue(),Ht=Ft.v*Ut,Kt.value!==Ht&&(Kt=new Number(Ht),Kt.value=Ht,kt(Kt,Ft,"unidimensional")),Kt}}function Tt(Ft){(!Ft||!("pv"in Ft))&&(Ft=dt);var Ut=1/Ft.mult,Ht=Ft.data&&Ft.data.l||Ft.pv.length,Kt=createTypedArray("float32",Ht),Yt=createTypedArray("float32",Ht);return Kt.value=Yt,kt(Kt,Ft,"multidimensional"),function(){Ft.k&&Ft.getValue();for(var Jt=0;Jt<Ht;Jt+=1)Yt[Jt]=Ft.v[Jt]*Ut,Kt[Jt]=Yt[Jt];return Kt}}function Dt(){return et}return function(Ft){return Ft?Ft.propType==="unidimensional"?$t(Ft):Tt(Ft):Dt}}(),TransformExpressionInterface=function(){return function(et){function dt(Ft){switch(Ft){case"scale":case"Scale":case"ADBE Scale":case 6:return dt.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return dt.rotation;case"ADBE Rotate X":return dt.xRotation;case"ADBE Rotate Y":return dt.yRotation;case"position":case"Position":case"ADBE Position":case 2:return dt.position;case"ADBE Position_0":return dt.xPosition;case"ADBE Position_1":return dt.yPosition;case"ADBE Position_2":return dt.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return dt.anchorPoint;case"opacity":case"Opacity":case 11:return dt.opacity;default:return null}}Object.defineProperty(dt,"rotation",{get:ExpressionPropertyInterface(et.r||et.rz)}),Object.defineProperty(dt,"zRotation",{get:ExpressionPropertyInterface(et.rz||et.r)}),Object.defineProperty(dt,"xRotation",{get:ExpressionPropertyInterface(et.rx)}),Object.defineProperty(dt,"yRotation",{get:ExpressionPropertyInterface(et.ry)}),Object.defineProperty(dt,"scale",{get:ExpressionPropertyInterface(et.s)});var kt,$t,Tt,Dt;return et.p?Dt=ExpressionPropertyInterface(et.p):(kt=ExpressionPropertyInterface(et.px),$t=ExpressionPropertyInterface(et.py),et.pz&&(Tt=ExpressionPropertyInterface(et.pz))),Object.defineProperty(dt,"position",{get:function(){return et.p?Dt():[kt(),$t(),Tt?Tt():0]}}),Object.defineProperty(dt,"xPosition",{get:ExpressionPropertyInterface(et.px)}),Object.defineProperty(dt,"yPosition",{get:ExpressionPropertyInterface(et.py)}),Object.defineProperty(dt,"zPosition",{get:ExpressionPropertyInterface(et.pz)}),Object.defineProperty(dt,"anchorPoint",{get:ExpressionPropertyInterface(et.a)}),Object.defineProperty(dt,"opacity",{get:ExpressionPropertyInterface(et.o)}),Object.defineProperty(dt,"skew",{get:ExpressionPropertyInterface(et.sk)}),Object.defineProperty(dt,"skewAxis",{get:ExpressionPropertyInterface(et.sa)}),Object.defineProperty(dt,"orientation",{get:ExpressionPropertyInterface(et.or)}),dt}}(),LayerExpressionInterface=function(){function et(Kt){var Yt=new Matrix;if(Kt!==void 0){var Jt=this._elem.finalTransform.mProp.getValueAtTime(Kt);Jt.clone(Yt)}else{var Zt=this._elem.finalTransform.mProp;Zt.applyToMatrix(Yt)}return Yt}function dt(Kt,Yt){var Jt=this.getMatrix(Yt);return Jt.props[12]=0,Jt.props[13]=0,Jt.props[14]=0,this.applyPoint(Jt,Kt)}function kt(Kt,Yt){var Jt=this.getMatrix(Yt);return this.applyPoint(Jt,Kt)}function $t(Kt,Yt){var Jt=this.getMatrix(Yt);return Jt.props[12]=0,Jt.props[13]=0,Jt.props[14]=0,this.invertPoint(Jt,Kt)}function Tt(Kt,Yt){var Jt=this.getMatrix(Yt);return this.invertPoint(Jt,Kt)}function Dt(Kt,Yt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Jt,Zt=this._elem.hierarchy.length;for(Jt=0;Jt<Zt;Jt+=1)this._elem.hierarchy[Jt].finalTransform.mProp.applyToMatrix(Kt)}return Kt.applyToPointArray(Yt[0],Yt[1],Yt[2]||0)}function Ft(Kt,Yt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Jt,Zt=this._elem.hierarchy.length;for(Jt=0;Jt<Zt;Jt+=1)this._elem.hierarchy[Jt].finalTransform.mProp.applyToMatrix(Kt)}return Kt.inversePoint(Yt)}function Ut(Kt){var Yt=new Matrix;if(Yt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Yt),this._elem.hierarchy&&this._elem.hierarchy.length){var Jt,Zt=this._elem.hierarchy.length;for(Jt=0;Jt<Zt;Jt+=1)this._elem.hierarchy[Jt].finalTransform.mProp.applyToMatrix(Yt);return Yt.inversePoint(Kt)}return Yt.inversePoint(Kt)}function Ht(){return[1,1,1,1]}return function(Kt){var Yt;function Jt(sr){er.mask=new MaskManagerInterface(sr,Kt)}function Zt(sr){er.effect=sr}function er(sr){switch(sr){case"ADBE Root Vectors Group":case"Contents":case 2:return er.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Yt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return er.effect;case"ADBE Text Properties":return er.textInterface;default:return null}}er.getMatrix=et,er.invertPoint=Ft,er.applyPoint=Dt,er.toWorld=kt,er.toWorldVec=dt,er.fromWorld=Tt,er.fromWorldVec=$t,er.toComp=kt,er.fromComp=Ut,er.sampleImage=Ht,er.sourceRectAtTime=Kt.sourceRectAtTime.bind(Kt),er._elem=Kt,Yt=TransformExpressionInterface(Kt.finalTransform.mProp);var rr=getDescriptor(Yt,"anchorPoint");return Object.defineProperties(er,{hasParent:{get:function(){return Kt.hierarchy.length}},parent:{get:function(){return Kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Yt,"rotation"),scale:getDescriptor(Yt,"scale"),position:getDescriptor(Yt,"position"),opacity:getDescriptor(Yt,"opacity"),anchorPoint:rr,anchor_point:rr,transform:{get:function(){return Yt}},active:{get:function(){return Kt.isInRange}}}),er.startTime=Kt.data.st,er.index=Kt.data.ind,er.source=Kt.data.refId,er.height=Kt.data.ty===0?Kt.data.h:100,er.width=Kt.data.ty===0?Kt.data.w:100,er.inPoint=Kt.data.ip/Kt.comp.globalData.frameRate,er.outPoint=Kt.data.op/Kt.comp.globalData.frameRate,er._name=Kt.data.nm,er.registerMaskInterface=Jt,er.registerEffectsInterface=Zt,er}}(),propertyGroupFactory=function(){return function(et,dt){return function(kt){return kt=kt===void 0?1:kt,kt<=0?et:dt(kt-1)}}}(),PropertyInterface=function(){return function(et,dt){var kt={_name:et};function $t(Tt){return Tt=Tt===void 0?1:Tt,Tt<=0?kt:dt(Tt-1)}return $t}}(),EffectsExpressionInterface=function(){var et={createEffectsInterface:dt};function dt(Tt,Dt){if(Tt.effectsManager){var Ft=[],Ut=Tt.data.ef,Ht,Kt=Tt.effectsManager.effectElements.length;for(Ht=0;Ht<Kt;Ht+=1)Ft.push(kt(Ut[Ht],Tt.effectsManager.effectElements[Ht],Dt,Tt));var Yt=Tt.data.ef||[],Jt=function(er){for(Ht=0,Kt=Yt.length;Ht<Kt;){if(er===Yt[Ht].nm||er===Yt[Ht].mn||er===Yt[Ht].ix)return Ft[Ht];Ht+=1}return null};return Object.defineProperty(Jt,"numProperties",{get:function(){return Yt.length}}),Jt}return null}function kt(Tt,Dt,Ft,Ut){function Ht(er){for(var rr=Tt.ef,sr=0,nr=rr.length;sr<nr;){if(er===rr[sr].nm||er===rr[sr].mn||er===rr[sr].ix)return rr[sr].ty===5?Yt[sr]:Yt[sr]();sr+=1}throw new Error}var Kt=propertyGroupFactory(Ht,Ft),Yt=[],Jt,Zt=Tt.ef.length;for(Jt=0;Jt<Zt;Jt+=1)Tt.ef[Jt].ty===5?Yt.push(kt(Tt.ef[Jt],Dt.effectElements[Jt],Dt.effectElements[Jt].propertyGroup,Ut)):Yt.push($t(Dt.effectElements[Jt],Tt.ef[Jt].ty,Ut,Kt));return Tt.mn==="ADBE Color Control"&&Object.defineProperty(Ht,"color",{get:function(){return Yt[0]()}}),Object.defineProperties(Ht,{numProperties:{get:function(){return Tt.np}},_name:{value:Tt.nm},propertyGroup:{value:Kt}}),Ht.enabled=Tt.en!==0,Ht.active=Ht.enabled,Ht}function $t(Tt,Dt,Ft,Ut){var Ht=ExpressionPropertyInterface(Tt.p);function Kt(){return Dt===10?Ft.comp.compInterface(Tt.p.v):Ht()}return Tt.p.setGroupProperty&&Tt.p.setGroupProperty(PropertyInterface("",Ut)),Kt}return et}(),ShapePathInterface=function(){return function(dt,kt,$t){var Tt=kt.sh;function Dt(Ut){return Ut==="Shape"||Ut==="shape"||Ut==="Path"||Ut==="path"||Ut==="ADBE Vector Shape"||Ut===2?Dt.path:null}var Ft=propertyGroupFactory(Dt,$t);return Tt.setGroupProperty(PropertyInterface("Path",Ft)),Object.defineProperties(Dt,{path:{get:function(){return Tt.k&&Tt.getValue(),Tt}},shape:{get:function(){return Tt.k&&Tt.getValue(),Tt}},_name:{value:dt.nm},ix:{value:dt.ix},propertyIndex:{value:dt.ix},mn:{value:dt.mn},propertyGroup:{value:$t}}),Dt}}(),ShapeExpressionInterface=function(){function et(rr,sr,nr){var ir=[],lr,or=rr?rr.length:0;for(lr=0;lr<or;lr+=1)rr[lr].ty==="gr"?ir.push(kt(rr[lr],sr[lr],nr)):rr[lr].ty==="fl"?ir.push($t(rr[lr],sr[lr],nr)):rr[lr].ty==="st"?ir.push(Ft(rr[lr],sr[lr],nr)):rr[lr].ty==="tm"?ir.push(Ut(rr[lr],sr[lr],nr)):rr[lr].ty==="tr"||(rr[lr].ty==="el"?ir.push(Kt(rr[lr],sr[lr],nr)):rr[lr].ty==="sr"?ir.push(Yt(rr[lr],sr[lr],nr)):rr[lr].ty==="sh"?ir.push(ShapePathInterface(rr[lr],sr[lr],nr)):rr[lr].ty==="rc"?ir.push(Jt(rr[lr],sr[lr],nr)):rr[lr].ty==="rd"?ir.push(Zt(rr[lr],sr[lr],nr)):rr[lr].ty==="rp"?ir.push(er(rr[lr],sr[lr],nr)):rr[lr].ty==="gf"?ir.push(Tt(rr[lr],sr[lr],nr)):ir.push(Dt(rr[lr],sr[lr])));return ir}function dt(rr,sr,nr){var ir,lr=function(dr){for(var ur=0,pr=ir.length;ur<pr;){if(ir[ur]._name===dr||ir[ur].mn===dr||ir[ur].propertyIndex===dr||ir[ur].ix===dr||ir[ur].ind===dr)return ir[ur];ur+=1}return typeof dr=="number"?ir[dr-1]:null};lr.propertyGroup=propertyGroupFactory(lr,nr),ir=et(rr.it,sr.it,lr.propertyGroup),lr.numProperties=ir.length;var or=Ht(rr.it[rr.it.length-1],sr.it[sr.it.length-1],lr.propertyGroup);return lr.transform=or,lr.propertyIndex=rr.cix,lr._name=rr.nm,lr}function kt(rr,sr,nr){var ir=function(dr){switch(dr){case"ADBE Vectors Group":case"Contents":case 2:return ir.content;default:return ir.transform}};ir.propertyGroup=propertyGroupFactory(ir,nr);var lr=dt(rr,sr,ir.propertyGroup),or=Ht(rr.it[rr.it.length-1],sr.it[sr.it.length-1],ir.propertyGroup);return ir.content=lr,ir.transform=or,Object.defineProperty(ir,"_name",{get:function(){return rr.nm}}),ir.numProperties=rr.np,ir.propertyIndex=rr.ix,ir.nm=rr.nm,ir.mn=rr.mn,ir}function $t(rr,sr,nr){function ir(lr){return lr==="Color"||lr==="color"?ir.color:lr==="Opacity"||lr==="opacity"?ir.opacity:null}return Object.defineProperties(ir,{color:{get:ExpressionPropertyInterface(sr.c)},opacity:{get:ExpressionPropertyInterface(sr.o)},_name:{value:rr.nm},mn:{value:rr.mn}}),sr.c.setGroupProperty(PropertyInterface("Color",nr)),sr.o.setGroupProperty(PropertyInterface("Opacity",nr)),ir}function Tt(rr,sr,nr){function ir(lr){return lr==="Start Point"||lr==="start point"?ir.startPoint:lr==="End Point"||lr==="end point"?ir.endPoint:lr==="Opacity"||lr==="opacity"?ir.opacity:null}return Object.defineProperties(ir,{startPoint:{get:ExpressionPropertyInterface(sr.s)},endPoint:{get:ExpressionPropertyInterface(sr.e)},opacity:{get:ExpressionPropertyInterface(sr.o)},type:{get:function(){return"a"}},_name:{value:rr.nm},mn:{value:rr.mn}}),sr.s.setGroupProperty(PropertyInterface("Start Point",nr)),sr.e.setGroupProperty(PropertyInterface("End Point",nr)),sr.o.setGroupProperty(PropertyInterface("Opacity",nr)),ir}function Dt(){function rr(){return null}return rr}function Ft(rr,sr,nr){var ir=propertyGroupFactory(pr,nr),lr=propertyGroupFactory(ur,ir);function or(mr){Object.defineProperty(ur,rr.d[mr].nm,{get:ExpressionPropertyInterface(sr.d.dataProps[mr].p)})}var cr,dr=rr.d?rr.d.length:0,ur={};for(cr=0;cr<dr;cr+=1)or(cr),sr.d.dataProps[cr].p.setGroupProperty(lr);function pr(mr){return mr==="Color"||mr==="color"?pr.color:mr==="Opacity"||mr==="opacity"?pr.opacity:mr==="Stroke Width"||mr==="stroke width"?pr.strokeWidth:null}return Object.defineProperties(pr,{color:{get:ExpressionPropertyInterface(sr.c)},opacity:{get:ExpressionPropertyInterface(sr.o)},strokeWidth:{get:ExpressionPropertyInterface(sr.w)},dash:{get:function(){return ur}},_name:{value:rr.nm},mn:{value:rr.mn}}),sr.c.setGroupProperty(PropertyInterface("Color",ir)),sr.o.setGroupProperty(PropertyInterface("Opacity",ir)),sr.w.setGroupProperty(PropertyInterface("Stroke Width",ir)),pr}function Ut(rr,sr,nr){function ir(or){return or===rr.e.ix||or==="End"||or==="end"?ir.end:or===rr.s.ix?ir.start:or===rr.o.ix?ir.offset:null}var lr=propertyGroupFactory(ir,nr);return ir.propertyIndex=rr.ix,sr.s.setGroupProperty(PropertyInterface("Start",lr)),sr.e.setGroupProperty(PropertyInterface("End",lr)),sr.o.setGroupProperty(PropertyInterface("Offset",lr)),ir.propertyIndex=rr.ix,ir.propertyGroup=nr,Object.defineProperties(ir,{start:{get:ExpressionPropertyInterface(sr.s)},end:{get:ExpressionPropertyInterface(sr.e)},offset:{get:ExpressionPropertyInterface(sr.o)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Ht(rr,sr,nr){function ir(or){return rr.a.ix===or||or==="Anchor Point"?ir.anchorPoint:rr.o.ix===or||or==="Opacity"?ir.opacity:rr.p.ix===or||or==="Position"?ir.position:rr.r.ix===or||or==="Rotation"||or==="ADBE Vector Rotation"?ir.rotation:rr.s.ix===or||or==="Scale"?ir.scale:rr.sk&&rr.sk.ix===or||or==="Skew"?ir.skew:rr.sa&&rr.sa.ix===or||or==="Skew Axis"?ir.skewAxis:null}var lr=propertyGroupFactory(ir,nr);return sr.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",lr)),sr.transform.mProps.p.setGroupProperty(PropertyInterface("Position",lr)),sr.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",lr)),sr.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",lr)),sr.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",lr)),sr.transform.mProps.sk&&(sr.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",lr)),sr.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",lr))),sr.transform.op.setGroupProperty(PropertyInterface("Opacity",lr)),Object.defineProperties(ir,{opacity:{get:ExpressionPropertyInterface(sr.transform.mProps.o)},position:{get:ExpressionPropertyInterface(sr.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(sr.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(sr.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(sr.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(sr.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(sr.transform.mProps.sa)},_name:{value:rr.nm}}),ir.ty="tr",ir.mn=rr.mn,ir.propertyGroup=nr,ir}function Kt(rr,sr,nr){function ir(cr){return rr.p.ix===cr?ir.position:rr.s.ix===cr?ir.size:null}var lr=propertyGroupFactory(ir,nr);ir.propertyIndex=rr.ix;var or=sr.sh.ty==="tm"?sr.sh.prop:sr.sh;return or.s.setGroupProperty(PropertyInterface("Size",lr)),or.p.setGroupProperty(PropertyInterface("Position",lr)),Object.defineProperties(ir,{size:{get:ExpressionPropertyInterface(or.s)},position:{get:ExpressionPropertyInterface(or.p)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Yt(rr,sr,nr){function ir(cr){return rr.p.ix===cr?ir.position:rr.r.ix===cr?ir.rotation:rr.pt.ix===cr?ir.points:rr.or.ix===cr||cr==="ADBE Vector Star Outer Radius"?ir.outerRadius:rr.os.ix===cr?ir.outerRoundness:rr.ir&&(rr.ir.ix===cr||cr==="ADBE Vector Star Inner Radius")?ir.innerRadius:rr.is&&rr.is.ix===cr?ir.innerRoundness:null}var lr=propertyGroupFactory(ir,nr),or=sr.sh.ty==="tm"?sr.sh.prop:sr.sh;return ir.propertyIndex=rr.ix,or.or.setGroupProperty(PropertyInterface("Outer Radius",lr)),or.os.setGroupProperty(PropertyInterface("Outer Roundness",lr)),or.pt.setGroupProperty(PropertyInterface("Points",lr)),or.p.setGroupProperty(PropertyInterface("Position",lr)),or.r.setGroupProperty(PropertyInterface("Rotation",lr)),rr.ir&&(or.ir.setGroupProperty(PropertyInterface("Inner Radius",lr)),or.is.setGroupProperty(PropertyInterface("Inner Roundness",lr))),Object.defineProperties(ir,{position:{get:ExpressionPropertyInterface(or.p)},rotation:{get:ExpressionPropertyInterface(or.r)},points:{get:ExpressionPropertyInterface(or.pt)},outerRadius:{get:ExpressionPropertyInterface(or.or)},outerRoundness:{get:ExpressionPropertyInterface(or.os)},innerRadius:{get:ExpressionPropertyInterface(or.ir)},innerRoundness:{get:ExpressionPropertyInterface(or.is)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Jt(rr,sr,nr){function ir(cr){return rr.p.ix===cr?ir.position:rr.r.ix===cr?ir.roundness:rr.s.ix===cr||cr==="Size"||cr==="ADBE Vector Rect Size"?ir.size:null}var lr=propertyGroupFactory(ir,nr),or=sr.sh.ty==="tm"?sr.sh.prop:sr.sh;return ir.propertyIndex=rr.ix,or.p.setGroupProperty(PropertyInterface("Position",lr)),or.s.setGroupProperty(PropertyInterface("Size",lr)),or.r.setGroupProperty(PropertyInterface("Rotation",lr)),Object.defineProperties(ir,{position:{get:ExpressionPropertyInterface(or.p)},roundness:{get:ExpressionPropertyInterface(or.r)},size:{get:ExpressionPropertyInterface(or.s)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Zt(rr,sr,nr){function ir(cr){return rr.r.ix===cr||cr==="Round Corners 1"?ir.radius:null}var lr=propertyGroupFactory(ir,nr),or=sr;return ir.propertyIndex=rr.ix,or.rd.setGroupProperty(PropertyInterface("Radius",lr)),Object.defineProperties(ir,{radius:{get:ExpressionPropertyInterface(or.rd)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function er(rr,sr,nr){function ir(cr){return rr.c.ix===cr||cr==="Copies"?ir.copies:rr.o.ix===cr||cr==="Offset"?ir.offset:null}var lr=propertyGroupFactory(ir,nr),or=sr;return ir.propertyIndex=rr.ix,or.c.setGroupProperty(PropertyInterface("Copies",lr)),or.o.setGroupProperty(PropertyInterface("Offset",lr)),Object.defineProperties(ir,{copies:{get:ExpressionPropertyInterface(or.c)},offset:{get:ExpressionPropertyInterface(or.o)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}return function(rr,sr,nr){var ir;function lr(cr){if(typeof cr=="number")return cr=cr===void 0?1:cr,cr===0?nr:ir[cr-1];for(var dr=0,ur=ir.length;dr<ur;){if(ir[dr]._name===cr)return ir[dr];dr+=1}return null}function or(){return nr}return lr.propertyGroup=propertyGroupFactory(lr,or),ir=et(rr,sr,lr.propertyGroup),lr.numProperties=ir.length,lr._name="Contents",lr}}(),TextExpressionInterface=function(){return function(et){var dt;function kt($t){switch($t){case"ADBE Text Document":return kt.sourceText;default:return null}}return Object.defineProperty(kt,"sourceText",{get:function(){et.textProperty.getValue();var Tt=et.textProperty.currentData.t;return(!dt||Tt!==dt.value)&&(dt=new String(Tt),dt.value=Tt||new String(Tt),Object.defineProperty(dt,"style",{get:function(){return{fillColor:et.textProperty.currentData.fc}}})),dt}}),kt}}();function _typeof(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(kt){return typeof kt}:_typeof=function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},_typeof(et)}var FootageInterface=function(){var et=function($t){var Tt="",Dt=$t.getFootageData();function Ft(){return Tt="",Dt=$t.getFootageData(),Ut}function Ut(Ht){if(Dt[Ht])return Tt=Ht,Dt=Dt[Ht],_typeof(Dt)==="object"?Ut:Dt;var Kt=Ht.indexOf(Tt);if(Kt!==-1){var Yt=parseInt(Ht.substr(Kt+Tt.length),10);return Dt=Dt[Yt],_typeof(Dt)==="object"?Ut:Dt}return""}return Ft},dt=function($t){function Tt(Dt){return Dt==="Outline"?Tt.outlineInterface():null}return Tt._name="Outline",Tt.outlineInterface=et($t),Tt};return function(kt){function $t(Tt){return Tt==="Data"?$t.dataInterface:null}return $t._name="Data",$t.dataInterface=dt(kt),$t}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(et){return interfaces[et]||null}var expressionHelpers=function(){function et(Ft,Ut,Ht){Ut.x&&(Ht.k=!0,Ht.x=!0,Ht.initiateExpression=ExpressionManager.initiateExpression,Ht.effectsSequence.push(Ht.initiateExpression(Ft,Ut,Ht).bind(Ht)))}function dt(Ft){return Ft*=this.elem.globalData.frameRate,Ft-=this.offsetTime,Ft!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<Ft?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(Ft,this._cachingAtTime),this._cachingAtTime.lastFrame=Ft),this._cachingAtTime.value}function kt(Ft){var Ut=-.01,Ht=this.getValueAtTime(Ft),Kt=this.getValueAtTime(Ft+Ut),Yt=0;if(Ht.length){var Jt;for(Jt=0;Jt<Ht.length;Jt+=1)Yt+=Math.pow(Kt[Jt]-Ht[Jt],2);Yt=Math.sqrt(Yt)*100}else Yt=0;return Yt}function $t(Ft){if(this.vel!==void 0)return this.vel;var Ut=-.001,Ht=this.getValueAtTime(Ft),Kt=this.getValueAtTime(Ft+Ut),Yt;if(Ht.length){Yt=createTypedArray("float32",Ht.length);var Jt;for(Jt=0;Jt<Ht.length;Jt+=1)Yt[Jt]=(Kt[Jt]-Ht[Jt])/Ut}else Yt=(Kt-Ht)/Ut;return Yt}function Tt(){return this.pv}function Dt(Ft){this.propertyGroup=Ft}return{searchExpressions:et,getSpeedAtTime:kt,getVelocityAtTime:$t,getValueAtTime:dt,getStaticValueAtTime:Tt,setGroupProperty:Dt}}();function addPropertyDecorator(){function et(Zt,er,rr){if(!this.k||!this.keyframes)return this.pv;Zt=Zt?Zt.toLowerCase():"";var sr=this.comp.renderedFrame,nr=this.keyframes,ir=nr[nr.length-1].t;if(sr<=ir)return this.pv;var lr,or;rr?(er?lr=Math.abs(ir-this.elem.comp.globalData.frameRate*er):lr=Math.max(0,ir-this.elem.data.ip),or=ir-lr):((!er||er>nr.length-1)&&(er=nr.length-1),or=nr[nr.length-1-er].t,lr=ir-or);var cr,dr,ur;if(Zt==="pingpong"){var pr=Math.floor((sr-or)/lr);if(pr%2!==0)return this.getValueAtTime((lr-(sr-or)%lr+or)/this.comp.globalData.frameRate,0)}else if(Zt==="offset"){var mr=this.getValueAtTime(or/this.comp.globalData.frameRate,0),jr=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),Rr=this.getValueAtTime(((sr-or)%lr+or)/this.comp.globalData.frameRate,0),br=Math.floor((sr-or)/lr);if(this.pv.length){for(ur=new Array(mr.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=(jr[cr]-mr[cr])*br+Rr[cr];return ur}return(jr-mr)*br+Rr}else if(Zt==="continue"){var _r=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),Mr=this.getValueAtTime((ir-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ur=new Array(_r.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=_r[cr]+(_r[cr]-Mr[cr])*((sr-ir)/this.comp.globalData.frameRate)/5e-4;return ur}return _r+(_r-Mr)*((sr-ir)/.001)}return this.getValueAtTime(((sr-or)%lr+or)/this.comp.globalData.frameRate,0)}function dt(Zt,er,rr){if(!this.k)return this.pv;Zt=Zt?Zt.toLowerCase():"";var sr=this.comp.renderedFrame,nr=this.keyframes,ir=nr[0].t;if(sr>=ir)return this.pv;var lr,or;rr?(er?lr=Math.abs(this.elem.comp.globalData.frameRate*er):lr=Math.max(0,this.elem.data.op-ir),or=ir+lr):((!er||er>nr.length-1)&&(er=nr.length-1),or=nr[er].t,lr=or-ir);var cr,dr,ur;if(Zt==="pingpong"){var pr=Math.floor((ir-sr)/lr);if(pr%2===0)return this.getValueAtTime(((ir-sr)%lr+ir)/this.comp.globalData.frameRate,0)}else if(Zt==="offset"){var mr=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),jr=this.getValueAtTime(or/this.comp.globalData.frameRate,0),Rr=this.getValueAtTime((lr-(ir-sr)%lr+ir)/this.comp.globalData.frameRate,0),br=Math.floor((ir-sr)/lr)+1;if(this.pv.length){for(ur=new Array(mr.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=Rr[cr]-(jr[cr]-mr[cr])*br;return ur}return Rr-(jr-mr)*br}else if(Zt==="continue"){var _r=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),Mr=this.getValueAtTime((ir+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ur=new Array(_r.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=_r[cr]+(_r[cr]-Mr[cr])*(ir-sr)/.001;return ur}return _r+(_r-Mr)*(ir-sr)/.001}return this.getValueAtTime((lr-((ir-sr)%lr+ir))/this.comp.globalData.frameRate,0)}function kt(Zt,er){if(!this.k)return this.pv;if(Zt=(Zt||.4)*.5,er=Math.floor(er||5),er<=1)return this.pv;var rr=this.comp.renderedFrame/this.comp.globalData.frameRate,sr=rr-Zt,nr=rr+Zt,ir=er>1?(nr-sr)/(er-1):1,lr=0,or=0,cr;this.pv.length?cr=createTypedArray("float32",this.pv.length):cr=0;for(var dr;lr<er;){if(dr=this.getValueAtTime(sr+lr*ir),this.pv.length)for(or=0;or<this.pv.length;or+=1)cr[or]+=dr[or];else cr+=dr;lr+=1}if(this.pv.length)for(or=0;or<this.pv.length;or+=1)cr[or]/=er;else cr/=er;return cr}function $t(Zt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var er=this._transformCachingAtTime.v;if(er.cloneFromProps(this.pre.props),this.appliedTransformations<1){var rr=this.a.getValueAtTime(Zt);er.translate(-rr[0]*this.a.mult,-rr[1]*this.a.mult,rr[2]*this.a.mult)}if(this.appliedTransformations<2){var sr=this.s.getValueAtTime(Zt);er.scale(sr[0]*this.s.mult,sr[1]*this.s.mult,sr[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var nr=this.sk.getValueAtTime(Zt),ir=this.sa.getValueAtTime(Zt);er.skewFromAxis(-nr*this.sk.mult,ir*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var lr=this.r.getValueAtTime(Zt);er.rotate(-lr*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var or=this.rz.getValueAtTime(Zt),cr=this.ry.getValueAtTime(Zt),dr=this.rx.getValueAtTime(Zt),ur=this.or.getValueAtTime(Zt);er.rotateZ(-or*this.rz.mult).rotateY(cr*this.ry.mult).rotateX(dr*this.rx.mult).rotateZ(-ur[2]*this.or.mult).rotateY(ur[1]*this.or.mult).rotateX(ur[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var pr=this.px.getValueAtTime(Zt),mr=this.py.getValueAtTime(Zt);if(this.data.p.z){var jr=this.pz.getValueAtTime(Zt);er.translate(pr*this.px.mult,mr*this.py.mult,-jr*this.pz.mult)}else er.translate(pr*this.px.mult,mr*this.py.mult,0)}else{var Rr=this.p.getValueAtTime(Zt);er.translate(Rr[0]*this.p.mult,Rr[1]*this.p.mult,-Rr[2]*this.p.mult)}return er}function Tt(){return this.v.clone(new Matrix)}var Dt=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(Zt,er,rr){var sr=Dt(Zt,er,rr);return sr.dynamicProperties.length?sr.getValueAtTime=$t.bind(sr):sr.getValueAtTime=Tt.bind(sr),sr.setGroupProperty=expressionHelpers.setGroupProperty,sr};var Ft=PropertyFactory.getProp;PropertyFactory.getProp=function(Zt,er,rr,sr,nr){var ir=Ft(Zt,er,rr,sr,nr);ir.kf?ir.getValueAtTime=expressionHelpers.getValueAtTime.bind(ir):ir.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(ir),ir.setGroupProperty=expressionHelpers.setGroupProperty,ir.loopOut=et,ir.loopIn=dt,ir.smooth=kt,ir.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(ir),ir.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(ir),ir.numKeys=er.a===1?er.k.length:0,ir.propertyIndex=er.ix;var lr=0;return rr!==0&&(lr=createTypedArray("float32",er.a===1?er.k[0].s.length:er.k.length)),ir._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:lr},expressionHelpers.searchExpressions(Zt,er,ir),ir.k&&nr.addDynamicProperty(ir),ir};function Ut(Zt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),Zt*=this.elem.globalData.frameRate,Zt-=this.offsetTime,Zt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<Zt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=Zt,this.interpolateShape(Zt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var Ht=ShapePropertyFactory.getConstructorFunction(),Kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Yt(){}Yt.prototype={vertices:function(er,rr){this.k&&this.getValue();var sr=this.v;rr!==void 0&&(sr=this.getValueAtTime(rr,0));var nr,ir=sr._length,lr=sr[er],or=sr.v,cr=createSizedArray(ir);for(nr=0;nr<ir;nr+=1)er==="i"||er==="o"?cr[nr]=[lr[nr][0]-or[nr][0],lr[nr][1]-or[nr][1]]:cr[nr]=[lr[nr][0],lr[nr][1]];return cr},points:function(er){return this.vertices("v",er)},inTangents:function(er){return this.vertices("i",er)},outTangents:function(er){return this.vertices("o",er)},isClosed:function(){return this.v.c},pointOnPath:function(er,rr){var sr=this.v;rr!==void 0&&(sr=this.getValueAtTime(rr,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(sr));for(var nr=this._segmentsLength,ir=nr.lengths,lr=nr.totalLength*er,or=0,cr=ir.length,dr=0,ur;or<cr;){if(dr+ir[or].addedLength>lr){var pr=or,mr=sr.c&&or===cr-1?0:or+1,jr=(lr-dr)/ir[or].addedLength;ur=bez.getPointInSegment(sr.v[pr],sr.v[mr],sr.o[pr],sr.i[mr],jr,ir[or]);break}else dr+=ir[or].addedLength;or+=1}return ur||(ur=sr.c?[sr.v[0][0],sr.v[0][1]]:[sr.v[sr._length-1][0],sr.v[sr._length-1][1]]),ur},vectorOnPath:function(er,rr,sr){er==1?er=this.v.c:er==0&&(er=.999);var nr=this.pointOnPath(er,rr),ir=this.pointOnPath(er+.001,rr),lr=ir[0]-nr[0],or=ir[1]-nr[1],cr=Math.sqrt(Math.pow(lr,2)+Math.pow(or,2));if(cr===0)return[0,0];var dr=sr==="tangent"?[lr/cr,or/cr]:[-or/cr,lr/cr];return dr},tangentOnPath:function(er,rr){return this.vectorOnPath(er,rr,"tangent")},normalOnPath:function(er,rr){return this.vectorOnPath(er,rr,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Yt],Ht),extendPrototype([Yt],Kt),Kt.prototype.getValueAtTime=Ut,Kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Jt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(Zt,er,rr,sr,nr){var ir=Jt(Zt,er,rr,sr,nr);return ir.propertyIndex=er.ix,ir.lock=!1,rr===3?expressionHelpers.searchExpressions(Zt,er.pt,ir):rr===4&&expressionHelpers.searchExpressions(Zt,er.ks,ir),ir.k&&Zt.addDynamicProperty(ir),ir}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function et(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(dt,kt){var $t=this.calculateExpression(kt);if(dt.t!==$t){var Tt={};return this.copyData(Tt,dt),Tt.t=$t.toString(),Tt.__complete=!1,Tt}return dt},TextProperty.prototype.searchProperty=function(){var dt=this.searchKeyframes(),kt=this.searchExpressions();return this.kf=dt||kt,this.kf},TextProperty.prototype.searchExpressions=et}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function et(dt,kt){var $t=createNS("feMerge");$t.setAttribute("result",dt);var Tt,Dt;for(Dt=0;Dt<kt.length;Dt+=1)Tt=createNS("feMergeNode"),Tt.setAttribute("in",kt[Dt]),$t.appendChild(Tt),$t.appendChild(Tt);return $t}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(et,dt,kt,$t,Tt){this.filterManager=dt;var Dt=createNS("feColorMatrix");Dt.setAttribute("type","matrix"),Dt.setAttribute("color-interpolation-filters","linearRGB"),Dt.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=Dt,Dt.setAttribute("result",$t+"_tint_1"),et.appendChild(Dt),Dt=createNS("feColorMatrix"),Dt.setAttribute("type","matrix"),Dt.setAttribute("color-interpolation-filters","sRGB"),Dt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Dt.setAttribute("result",$t+"_tint_2"),et.appendChild(Dt),this.matrixFilter=Dt;var Ft=this.createMergeNode($t,[Tt,$t+"_tint_1",$t+"_tint_2"]);et.appendChild(Ft)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=this.filterManager.effectElements[0].p.v,kt=this.filterManager.effectElements[1].p.v,$t=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+$t+" 0"),this.matrixFilter.setAttribute("values",kt[0]-dt[0]+" 0 0 0 "+dt[0]+" "+(kt[1]-dt[1])+" 0 0 0 "+dt[1]+" "+(kt[2]-dt[2])+" 0 0 0 "+dt[2]+" 0 0 0 1 0")}};function SVGFillFilter(et,dt,kt,$t){this.filterManager=dt;var Tt=createNS("feColorMatrix");Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Tt.setAttribute("result",$t),et.appendChild(Tt),this.matrixFilter=Tt}SVGFillFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=this.filterManager.effectElements[2].p.v,kt=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+dt[0]+" 0 0 0 0 "+dt[1]+" 0 0 0 0 "+dt[2]+" 0 0 0 "+kt+" 0")}};function SVGStrokeEffect(et,dt,kt){this.initialized=!1,this.filterManager=dt,this.elem=kt,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var et=this.elem.layerElement.children||this.elem.layerElement.childNodes,dt,kt,$t,Tt;for(this.filterManager.effectElements[1].p.v===1?(Tt=this.elem.maskManager.masksProperties.length,$t=0):($t=this.filterManager.effectElements[0].p.v-1,Tt=$t+1),kt=createNS("g"),kt.setAttribute("fill","none"),kt.setAttribute("stroke-linecap","round"),kt.setAttribute("stroke-dashoffset",1),$t;$t<Tt;$t+=1)dt=createNS("path"),kt.appendChild(dt),this.paths.push({p:dt,m:$t});if(this.filterManager.effectElements[10].p.v===3){var Dt=createNS("mask"),Ft=createElementID();Dt.setAttribute("id",Ft),Dt.setAttribute("mask-type","alpha"),Dt.appendChild(kt),this.elem.globalData.defs.appendChild(Dt);var Ut=createNS("g");for(Ut.setAttribute("mask","url("+getLocationHref()+"#"+Ft+")");et[0];)Ut.appendChild(et[0]);this.elem.layerElement.appendChild(Ut),this.masker=Dt,kt.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(et=this.elem.layerElement.children||this.elem.layerElement.childNodes;et.length;)this.elem.layerElement.removeChild(et[0]);this.elem.layerElement.appendChild(kt),this.elem.layerElement.removeAttribute("mask"),kt.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=kt},SVGStrokeEffect.prototype.renderFrame=function(et){this.initialized||this.initialize();var dt,kt=this.paths.length,$t,Tt;for(dt=0;dt<kt;dt+=1)if(this.paths[dt].m!==-1&&($t=this.elem.maskManager.viewData[this.paths[dt].m],Tt=this.paths[dt].p,(et||this.filterManager._mdf||$t.prop._mdf)&&Tt.setAttribute("d",$t.lastPath),et||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||$t.prop._mdf)){var Dt;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var Ft=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Ut=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Ht=Tt.getTotalLength();Dt="0 0 0 "+Ht*Ft+" ";var Kt=Ht*(Ut-Ft),Yt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Jt=Math.floor(Kt/Yt),Zt;for(Zt=0;Zt<Jt;Zt+=1)Dt+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";Dt+="0 "+Ht*10+" 0 0"}else Dt="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;Tt.setAttribute("stroke-dasharray",Dt)}if((et||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(et||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(et||this.filterManager.effectElements[3].p._mdf)){var er=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(er[0]*255)+","+bmFloor(er[1]*255)+","+bmFloor(er[2]*255)+")")}};function SVGTritoneFilter(et,dt,kt,$t){this.filterManager=dt;var Tt=createNS("feColorMatrix");Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","linearRGB"),Tt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),et.appendChild(Tt);var Dt=createNS("feComponentTransfer");Dt.setAttribute("color-interpolation-filters","sRGB"),Dt.setAttribute("result",$t),this.matrixFilter=Dt;var Ft=createNS("feFuncR");Ft.setAttribute("type","table"),Dt.appendChild(Ft),this.feFuncR=Ft;var Ut=createNS("feFuncG");Ut.setAttribute("type","table"),Dt.appendChild(Ut),this.feFuncG=Ut;var Ht=createNS("feFuncB");Ht.setAttribute("type","table"),Dt.appendChild(Ht),this.feFuncB=Ht,et.appendChild(Dt)}SVGTritoneFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=this.filterManager.effectElements[0].p.v,kt=this.filterManager.effectElements[1].p.v,$t=this.filterManager.effectElements[2].p.v,Tt=$t[0]+" "+kt[0]+" "+dt[0],Dt=$t[1]+" "+kt[1]+" "+dt[1],Ft=$t[2]+" "+kt[2]+" "+dt[2];this.feFuncR.setAttribute("tableValues",Tt),this.feFuncG.setAttribute("tableValues",Dt),this.feFuncB.setAttribute("tableValues",Ft)}};function SVGProLevelsFilter(et,dt,kt,$t){this.filterManager=dt;var Tt=this.filterManager.effectElements,Dt=createNS("feComponentTransfer");(Tt[10].p.k||Tt[10].p.v!==0||Tt[11].p.k||Tt[11].p.v!==1||Tt[12].p.k||Tt[12].p.v!==1||Tt[13].p.k||Tt[13].p.v!==0||Tt[14].p.k||Tt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",Dt)),(Tt[17].p.k||Tt[17].p.v!==0||Tt[18].p.k||Tt[18].p.v!==1||Tt[19].p.k||Tt[19].p.v!==1||Tt[20].p.k||Tt[20].p.v!==0||Tt[21].p.k||Tt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",Dt)),(Tt[24].p.k||Tt[24].p.v!==0||Tt[25].p.k||Tt[25].p.v!==1||Tt[26].p.k||Tt[26].p.v!==1||Tt[27].p.k||Tt[27].p.v!==0||Tt[28].p.k||Tt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",Dt)),(Tt[31].p.k||Tt[31].p.v!==0||Tt[32].p.k||Tt[32].p.v!==1||Tt[33].p.k||Tt[33].p.v!==1||Tt[34].p.k||Tt[34].p.v!==0||Tt[35].p.k||Tt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",Dt)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(Dt.setAttribute("color-interpolation-filters","sRGB"),et.appendChild(Dt)),(Tt[3].p.k||Tt[3].p.v!==0||Tt[4].p.k||Tt[4].p.v!==1||Tt[5].p.k||Tt[5].p.v!==1||Tt[6].p.k||Tt[6].p.v!==0||Tt[7].p.k||Tt[7].p.v!==1)&&(Dt=createNS("feComponentTransfer"),Dt.setAttribute("color-interpolation-filters","sRGB"),Dt.setAttribute("result",$t),et.appendChild(Dt),this.feFuncRComposed=this.createFeFunc("feFuncR",Dt),this.feFuncGComposed=this.createFeFunc("feFuncG",Dt),this.feFuncBComposed=this.createFeFunc("feFuncB",Dt))}SVGProLevelsFilter.prototype.createFeFunc=function(et,dt){var kt=createNS(et);return kt.setAttribute("type","table"),dt.appendChild(kt),kt},SVGProLevelsFilter.prototype.getTableValue=function(et,dt,kt,$t,Tt){for(var Dt=0,Ft=256,Ut,Ht=Math.min(et,dt),Kt=Math.max(et,dt),Yt=Array.call(null,{length:Ft}),Jt,Zt=0,er=Tt-$t,rr=dt-et;Dt<=256;)Ut=Dt/256,Ut<=Ht?Jt=rr<0?Tt:$t:Ut>=Kt?Jt=rr<0?$t:Tt:Jt=$t+er*Math.pow((Ut-et)/rr,1/kt),Yt[Zt]=Jt,Zt+=1,Dt+=256/(Ft-1);return Yt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt,kt=this.filterManager.effectElements;this.feFuncRComposed&&(et||kt[3].p._mdf||kt[4].p._mdf||kt[5].p._mdf||kt[6].p._mdf||kt[7].p._mdf)&&(dt=this.getTableValue(kt[3].p.v,kt[4].p.v,kt[5].p.v,kt[6].p.v,kt[7].p.v),this.feFuncRComposed.setAttribute("tableValues",dt),this.feFuncGComposed.setAttribute("tableValues",dt),this.feFuncBComposed.setAttribute("tableValues",dt)),this.feFuncR&&(et||kt[10].p._mdf||kt[11].p._mdf||kt[12].p._mdf||kt[13].p._mdf||kt[14].p._mdf)&&(dt=this.getTableValue(kt[10].p.v,kt[11].p.v,kt[12].p.v,kt[13].p.v,kt[14].p.v),this.feFuncR.setAttribute("tableValues",dt)),this.feFuncG&&(et||kt[17].p._mdf||kt[18].p._mdf||kt[19].p._mdf||kt[20].p._mdf||kt[21].p._mdf)&&(dt=this.getTableValue(kt[17].p.v,kt[18].p.v,kt[19].p.v,kt[20].p.v,kt[21].p.v),this.feFuncG.setAttribute("tableValues",dt)),this.feFuncB&&(et||kt[24].p._mdf||kt[25].p._mdf||kt[26].p._mdf||kt[27].p._mdf||kt[28].p._mdf)&&(dt=this.getTableValue(kt[24].p.v,kt[25].p.v,kt[26].p.v,kt[27].p.v,kt[28].p.v),this.feFuncB.setAttribute("tableValues",dt)),this.feFuncA&&(et||kt[31].p._mdf||kt[32].p._mdf||kt[33].p._mdf||kt[34].p._mdf||kt[35].p._mdf)&&(dt=this.getTableValue(kt[31].p.v,kt[32].p.v,kt[33].p.v,kt[34].p.v,kt[35].p.v),this.feFuncA.setAttribute("tableValues",dt))}};function SVGDropShadowEffect(et,dt,kt,$t,Tt){var Dt=dt.container.globalData.renderConfig.filterSize,Ft=dt.data.fs||Dt;et.setAttribute("x",Ft.x||Dt.x),et.setAttribute("y",Ft.y||Dt.y),et.setAttribute("width",Ft.width||Dt.width),et.setAttribute("height",Ft.height||Dt.height),this.filterManager=dt;var Ut=createNS("feGaussianBlur");Ut.setAttribute("in","SourceAlpha"),Ut.setAttribute("result",$t+"_drop_shadow_1"),Ut.setAttribute("stdDeviation","0"),this.feGaussianBlur=Ut,et.appendChild(Ut);var Ht=createNS("feOffset");Ht.setAttribute("dx","25"),Ht.setAttribute("dy","0"),Ht.setAttribute("in",$t+"_drop_shadow_1"),Ht.setAttribute("result",$t+"_drop_shadow_2"),this.feOffset=Ht,et.appendChild(Ht);var Kt=createNS("feFlood");Kt.setAttribute("flood-color","#00ff00"),Kt.setAttribute("flood-opacity","1"),Kt.setAttribute("result",$t+"_drop_shadow_3"),this.feFlood=Kt,et.appendChild(Kt);var Yt=createNS("feComposite");Yt.setAttribute("in",$t+"_drop_shadow_3"),Yt.setAttribute("in2",$t+"_drop_shadow_2"),Yt.setAttribute("operator","in"),Yt.setAttribute("result",$t+"_drop_shadow_4"),et.appendChild(Yt);var Jt=this.createMergeNode($t,[$t+"_drop_shadow_4",Tt]);et.appendChild(Jt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){if((et||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),et||this.filterManager.effectElements[0].p._mdf){var dt=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(dt[0]*255),Math.round(dt[1]*255),Math.round(dt[2]*255)))}if((et||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),et||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var kt=this.filterManager.effectElements[3].p.v,$t=(this.filterManager.effectElements[2].p.v-90)*degToRads,Tt=kt*Math.cos($t),Dt=kt*Math.sin($t);this.feOffset.setAttribute("dx",Tt),this.feOffset.setAttribute("dy",Dt)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(et,dt,kt){this.initialized=!1,this.filterManager=dt,this.filterElem=et,this.elem=kt,kt.matteElement=createNS("g"),kt.matteElement.appendChild(kt.layerElement),kt.matteElement.appendChild(kt.transformedElement),kt.baseElement=kt.matteElement}SVGMatte3Effect.prototype.findSymbol=function(et){for(var dt=0,kt=_svgMatteSymbols.length;dt<kt;){if(_svgMatteSymbols[dt]===et)return _svgMatteSymbols[dt];dt+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(et,dt){var kt=et.layerElement.parentNode;if(kt){for(var $t=kt.children,Tt=0,Dt=$t.length;Tt<Dt&&$t[Tt]!==et.layerElement;)Tt+=1;var Ft;Tt<=Dt-2&&(Ft=$t[Tt+1]);var Ut=createNS("use");Ut.setAttribute("href","#"+dt),Ft?kt.insertBefore(Ut,Ft):kt.appendChild(Ut)}},SVGMatte3Effect.prototype.setElementAsMask=function(et,dt){if(!this.findSymbol(dt)){var kt=createElementID(),$t=createNS("mask");$t.setAttribute("id",dt.layerId),$t.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(dt);var Tt=et.globalData.defs;Tt.appendChild($t);var Dt=createNS("symbol");Dt.setAttribute("id",kt),this.replaceInParent(dt,kt),Dt.appendChild(dt.layerElement),Tt.appendChild(Dt);var Ft=createNS("use");Ft.setAttribute("href","#"+kt),$t.appendChild(Ft),dt.data.hd=!1,dt.show()}et.setMatte(dt.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var et=this.filterManager.effectElements[0].p.v,dt=this.elem.comp.elements,kt=0,$t=dt.length;kt<$t;)dt[kt]&&dt[kt].data.ind===et&&this.setElementAsMask(this.elem,dt[kt]),kt+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(et,dt,kt,$t){et.setAttribute("x","-100%"),et.setAttribute("y","-100%"),et.setAttribute("width","300%"),et.setAttribute("height","300%"),this.filterManager=dt;var Tt=createNS("feGaussianBlur");Tt.setAttribute("result",$t),et.appendChild(Tt),this.feGaussianBlur=Tt}SVGGaussianBlurEffect.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=.3,kt=this.filterManager.effectElements[0].p.v*dt,$t=this.filterManager.effectElements[1].p.v,Tt=$t==3?0:kt,Dt=$t==2?0:kt;this.feGaussianBlur.setAttribute("stdDeviation",Tt+" "+Dt);var Ft=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",Ft)}};function TransformEffect(){}TransformEffect.prototype.init=function(et){this.effectsManager=et,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(et){if(this._opMdf=!1,this._mdf=!1,et||this.effectsManager._mdf){var dt=this.effectsManager.effectElements,kt=dt[0].p.v,$t=dt[1].p.v,Tt=dt[2].p.v===1,Dt=dt[3].p.v,Ft=Tt?Dt:dt[4].p.v,Ut=dt[5].p.v,Ht=dt[6].p.v,Kt=dt[7].p.v;this.matrix.reset(),this.matrix.translate(-kt[0],-kt[1],kt[2]),this.matrix.scale(Ft*.01,Dt*.01,1),this.matrix.rotate(-Kt*degToRads),this.matrix.skewFromAxis(-Ut*degToRads,(Ht+90)*degToRads),this.matrix.translate($t[0],$t[1],0),this._mdf=!0,this.opacity!==dt[8].p.v&&(this.opacity=dt[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(et,dt){this.init(dt)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(et){this.init(et)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(et,dt){var kt=et==null?null:typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if(kt!=null){var $t,Tt,Dt,Ft,Ut=[],Ht=!0,Kt=!1;try{if(Dt=(kt=kt.call(et)).next,dt===0){if(Object(kt)!==kt)return;Ht=!1}else for(;!(Ht=($t=Dt.call(kt)).done)&&(Ut.push($t.value),Ut.length!==dt);Ht=!0);}catch(Yt){Kt=!0,Tt=Yt}finally{try{if(!Ht&&kt.return!=null&&(Ft=kt.return(),Object(Ft)!==Ft))return}finally{if(Kt)throw Tt}}return Ut}}function ownKeys$2(et,dt){var kt=Object.keys(et);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(et);dt&&($t=$t.filter(function(Tt){return Object.getOwnPropertyDescriptor(et,Tt).enumerable})),kt.push.apply(kt,$t)}return kt}function _objectSpread2(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt]!=null?arguments[dt]:{};dt%2?ownKeys$2(Object(kt),!0).forEach(function($t){_defineProperty$2(et,$t,kt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(kt)):ownKeys$2(Object(kt)).forEach(function($t){Object.defineProperty(et,$t,Object.getOwnPropertyDescriptor(kt,$t))})}return et}function _defineProperty$2(et,dt,kt){return dt=_toPropertyKey(dt),dt in et?Object.defineProperty(et,dt,{value:kt,enumerable:!0,configurable:!0,writable:!0}):et[dt]=kt,et}function _objectWithoutPropertiesLoose$1(et,dt){if(et==null)return{};var kt={},$t=Object.keys(et),Tt,Dt;for(Dt=0;Dt<$t.length;Dt++)Tt=$t[Dt],!(dt.indexOf(Tt)>=0)&&(kt[Tt]=et[Tt]);return kt}function _objectWithoutProperties$2(et,dt){if(et==null)return{};var kt=_objectWithoutPropertiesLoose$1(et,dt),$t,Tt;if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);for(Tt=0;Tt<Dt.length;Tt++)$t=Dt[Tt],!(dt.indexOf($t)>=0)&&Object.prototype.propertyIsEnumerable.call(et,$t)&&(kt[$t]=et[$t])}return kt}function _slicedToArray(et,dt){return _arrayWithHoles(et)||_iterableToArrayLimit(et,dt)||_unsupportedIterableToArray(et,dt)||_nonIterableRest()}function _arrayWithHoles(et){if(Array.isArray(et))return et}function _unsupportedIterableToArray(et,dt){if(et){if(typeof et=="string")return _arrayLikeToArray(et,dt);var kt=Object.prototype.toString.call(et).slice(8,-1);if(kt==="Object"&&et.constructor&&(kt=et.constructor.name),kt==="Map"||kt==="Set")return Array.from(et);if(kt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kt))return _arrayLikeToArray(et,dt)}}function _arrayLikeToArray(et,dt){(dt==null||dt>et.length)&&(dt=et.length);for(var kt=0,$t=new Array(dt);kt<dt;kt++)$t[kt]=et[kt];return $t}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(et,dt){if(typeof et!="object"||et===null)return et;var kt=et[Symbol.toPrimitive];if(kt!==void 0){var $t=kt.call(et,dt||"default");if(typeof $t!="object")return $t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(dt==="string"?String:Number)(et)}function _toPropertyKey(et){var dt=_toPrimitive(et,"string");return typeof dt=="symbol"?dt:String(dt)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function et(dt,kt){var $t=dt.animationData,Tt=dt.loop,Dt=dt.autoplay,Ft=dt.initialSegment,Ut=dt.onComplete,Ht=dt.onLoopComplete,Kt=dt.onEnterFrame,Yt=dt.onSegmentStart,Jt=dt.onConfigReady,Zt=dt.onDataReady,er=dt.onDataFailed,rr=dt.onLoadedImages,sr=dt.onDOMLoaded,nr=dt.onDestroy;dt.lottieRef,dt.renderer,dt.name,dt.assetsPath,dt.rendererSettings;var ir=_objectWithoutProperties$2(dt,_excluded$1),lr=reactExports.useState(!1),or=_slicedToArray(lr,2),cr=or[0],dr=or[1],ur=reactExports.useRef(),pr=reactExports.useRef(null),mr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.play()},jr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.stop()},Rr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.pause()},br=function(Yr){var rs;(rs=ur.current)===null||rs===void 0||rs.setSpeed(Yr)},_r=function(Yr,rs){var as;(as=ur.current)===null||as===void 0||as.goToAndPlay(Yr,rs)},Mr=function(Yr,rs){var as;(as=ur.current)===null||as===void 0||as.goToAndStop(Yr,rs)},Pr=function(Yr){var rs;(rs=ur.current)===null||rs===void 0||rs.setDirection(Yr)},Or=function(Yr,rs){var as;(as=ur.current)===null||as===void 0||as.playSegments(Yr,rs)},kr=function(Yr){var rs;(rs=ur.current)===null||rs===void 0||rs.setSubframe(Yr)},Tr=function(Yr){var rs;return(rs=ur.current)===null||rs===void 0?void 0:rs.getDuration(Yr)},xr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.destroy(),ur.current=void 0},wr=function(){var Yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rs;if(pr.current){(rs=ur.current)===null||rs===void 0||rs.destroy();var as=_objectSpread2(_objectSpread2(_objectSpread2({},dt),Yr),{},{container:pr.current});return ur.current=lottie.loadAnimation(as),dr(!!ur.current),function(){var es;(es=ur.current)===null||es===void 0||es.destroy(),ur.current=void 0}}};reactExports.useEffect(function(){var Hr=wr();return function(){return Hr==null?void 0:Hr()}},[$t,Tt]),reactExports.useEffect(function(){ur.current&&(ur.current.autoplay=!!Dt)},[Dt]),reactExports.useEffect(function(){if(ur.current){if(!Ft){ur.current.resetSegments(!0);return}!Array.isArray(Ft)||!Ft.length||((ur.current.currentRawFrame<Ft[0]||ur.current.currentRawFrame>Ft[1])&&(ur.current.currentRawFrame=Ft[0]),ur.current.setSegment(Ft[0],Ft[1]))}},[Ft]),reactExports.useEffect(function(){var Hr=[{name:"complete",handler:Ut},{name:"loopComplete",handler:Ht},{name:"enterFrame",handler:Kt},{name:"segmentStart",handler:Yt},{name:"config_ready",handler:Jt},{name:"data_ready",handler:Zt},{name:"data_failed",handler:er},{name:"loaded_images",handler:rr},{name:"DOMLoaded",handler:sr},{name:"destroy",handler:nr}],Yr=Hr.filter(function(as){return as.handler!=null});if(Yr.length){var rs=Yr.map(function(as){var es;return(es=ur.current)===null||es===void 0||es.addEventListener(as.name,as.handler),function(){var Xr;(Xr=ur.current)===null||Xr===void 0||Xr.removeEventListener(as.name,as.handler)}});return function(){rs.forEach(function(as){return as()})}}},[Ut,Ht,Kt,Yt,Jt,Zt,er,rr,sr,nr]);var zr=React$2.createElement("div",_objectSpread2({style:kt,ref:pr},ir));return{View:zr,play:mr,stop:jr,pause:Rr,setSpeed:br,goToAndStop:Mr,goToAndPlay:_r,setDirection:Pr,playSegments:Or,setSubframe:kr,getDuration:Tr,destroy:xr,animationContainerRef:pr,animationLoaded:cr,animationItem:ur.current}};function getContainerVisibility(et){var dt=et.getBoundingClientRect(),kt=dt.top,$t=dt.height,Tt=window.innerHeight-kt,Dt=window.innerHeight+$t;return Tt/Dt}function getContainerCursorPosition(et,dt,kt){var $t=et.getBoundingClientRect(),Tt=$t.top,Dt=$t.left,Ft=$t.width,Ut=$t.height,Ht=(dt-Dt)/Ft,Kt=(kt-Tt)/Ut;return{x:Ht,y:Kt}}var useInitInteractivity=function et(dt){var kt=dt.wrapperRef,$t=dt.animationItem,Tt=dt.mode,Dt=dt.actions;reactExports.useEffect(function(){var Ft=kt.current;if(!(!Ft||!$t||!Dt.length)){$t.stop();var Ut=function(){var Yt=null,Jt=function(){var er=getContainerVisibility(Ft),rr=Dt.find(function(nr){var ir=nr.visibility;return ir&&er>=ir[0]&&er<=ir[1]});if(rr){if(rr.type==="seek"&&rr.visibility&&rr.frames.length===2){var sr=rr.frames[0]+Math.ceil((er-rr.visibility[0])/(rr.visibility[1]-rr.visibility[0])*rr.frames[1]);//! goToAndStop must be relative to the start of the current segment
$t.goToAndStop(sr-$t.firstFrame-1,!0)}rr.type==="loop"&&(Yt===null||Yt!==rr.frames||$t.isPaused)&&($t.playSegments(rr.frames,!0),Yt=rr.frames),rr.type==="play"&&$t.isPaused&&($t.resetSegments(!0),$t.play()),rr.type==="stop"&&$t.goToAndStop(rr.frames[0]-$t.firstFrame-1,!0)}};return document.addEventListener("scroll",Jt),function(){document.removeEventListener("scroll",Jt)}},Ht=function(){var Yt=function(rr,sr){var nr=rr,ir=sr;if(nr!==-1&&ir!==-1){var lr=getContainerCursorPosition(Ft,nr,ir);nr=lr.x,ir=lr.y}var or=Dt.find(function(ur){var pr=ur.position;return pr&&Array.isArray(pr.x)&&Array.isArray(pr.y)?nr>=pr.x[0]&&nr<=pr.x[1]&&ir>=pr.y[0]&&ir<=pr.y[1]:pr&&!Number.isNaN(pr.x)&&!Number.isNaN(pr.y)?nr===pr.x&&ir===pr.y:!1});if(or){if(or.type==="seek"&&or.position&&Array.isArray(or.position.x)&&Array.isArray(or.position.y)&&or.frames.length===2){var cr=(nr-or.position.x[0])/(or.position.x[1]-or.position.x[0]),dr=(ir-or.position.y[0])/(or.position.y[1]-or.position.y[0]);$t.playSegments(or.frames,!0),$t.goToAndStop(Math.ceil((cr+dr)/2*(or.frames[1]-or.frames[0])),!0)}or.type==="loop"&&$t.playSegments(or.frames,!0),or.type==="play"&&($t.isPaused&&$t.resetSegments(!1),$t.playSegments(or.frames)),or.type==="stop"&&$t.goToAndStop(or.frames[0],!0)}},Jt=function(rr){Yt(rr.clientX,rr.clientY)},Zt=function(){Yt(-1,-1)};return Ft.addEventListener("mousemove",Jt),Ft.addEventListener("mouseout",Zt),function(){Ft.removeEventListener("mousemove",Jt),Ft.removeEventListener("mouseout",Zt)}};switch(Tt){case"scroll":return Ut();case"cursor":return Ht()}}},[Tt,$t])},useLottieInteractivity=function et(dt){var kt=dt.actions,$t=dt.mode,Tt=dt.lottieObj,Dt=Tt.animationItem,Ft=Tt.View,Ut=Tt.animationContainerRef;return useInitInteractivity({actions:kt,animationItem:Dt,mode:$t,wrapperRef:Ut}),Ft},_excluded$2=["style","interactivity"],Lottie=function et(dt){var kt,$t,Tt,Dt=dt.style,Ft=dt.interactivity,Ut=_objectWithoutProperties$2(dt,_excluded$2),Ht=useLottie(Ut,Dt),Kt=Ht.View,Yt=Ht.play,Jt=Ht.stop,Zt=Ht.pause,er=Ht.setSpeed,rr=Ht.goToAndStop,sr=Ht.goToAndPlay,nr=Ht.setDirection,ir=Ht.playSegments,lr=Ht.setSubframe,or=Ht.getDuration,cr=Ht.destroy,dr=Ht.animationContainerRef,ur=Ht.animationLoaded,pr=Ht.animationItem;return reactExports.useEffect(function(){dt.lottieRef&&(dt.lottieRef.current={play:Yt,stop:Jt,pause:Zt,setSpeed:er,goToAndPlay:sr,goToAndStop:rr,setDirection:nr,playSegments:ir,setSubframe:lr,getDuration:or,destroy:cr,animationContainerRef:dr,animationLoaded:ur,animationItem:pr})},[(kt=dt.lottieRef)===null||kt===void 0?void 0:kt.current]),useLottieInteractivity({lottieObj:{View:Kt,play:Yt,stop:Jt,pause:Zt,setSpeed:er,goToAndStop:rr,goToAndPlay:sr,setDirection:nr,playSegments:ir,setSubframe:lr,getDuration:or,destroy:cr,animationContainerRef:dr,animationLoaded:ur,animationItem:pr},actions:($t=Ft==null?void 0:Ft.actions)!==null&&$t!==void 0?$t:[],mode:(Tt=Ft==null?void 0:Ft.mode)!==null&&Tt!==void 0?Tt:"scroll"})};const nm="error",ddd=0,h$3=495,w$7=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$4="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$3,w:w$7,meta,layers,v:v$4,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$2,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:et}=useLocation(),dt=reactExports.useMemo(()=>new URLSearchParams(et).get("session_id"),[et]),[kt,$t]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(!0);if(reactExports.useEffect(()=>{async function Jt(){var Zt;if(dt)try{const er=await axiosInstance.get(`/seller-checkout/downloads/${dt}/info`);(Zt=er.data)!=null&&Zt.success&&$t(er.data)}catch(er){console.error(" Failed to load delivery:",er)}finally{Dt(!1)}}Jt()},[dt]),Tt)return jsxRuntimeExports.jsx("main",{className:"min-h-screen flex items-center justify-center text-white",children:"Loading your purchase..."});if(!kt)return jsxRuntimeExports.jsx("main",{className:"min-h-screen flex items-center justify-center text-white",children:"No delivery record found."});const Ft=kt.download_url;let Ut=!1,Ht=!1,Kt=[];try{const Jt=JSON.parse(Ft);Array.isArray(Jt)&&(Ht=!0,Kt=Jt)}catch{Kt=[Ft]}(Ft.endsWith(".pdf")||Ft.includes(".pdf"))&&(Ut=!0);const Yt=Ut?`https://themessyattic.com/api/seller-checkout/downloads/${dt}/file`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),kt.cover_url&&jsxRuntimeExports.jsx("img",{src:kt.cover_url,className:"w-40 h-40 object-cover rounded-xl mx-auto mt-6 border border-white/10"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-lg font-semibold",children:kt.product_name}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-300",children:"Your download is ready."}),Ut&&jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:Yt,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold text-black hover:opacity-90 transition",style:{backgroundColor:"#7bed9f"},download:!0,children:"Download PDF"}),jsxRuntimeExports.jsx("a",{href:Yt,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}),!Ut&&!Ht&&jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx("a",{href:Kt[0],download:!0,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold text-black hover:opacity-90 transition",style:{backgroundColor:"#7bed9f"},children:"Download Audio"})}),Ht&&jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Album Tracks"}),Kt.map((Jt,Zt)=>jsxRuntimeExports.jsxs("a",{href:Jt,download:!0,className:"block text-left w-full bg-white/10 p-3 rounded mb-2 hover:bg-white/20 transition",children:["Track ",Zt+1]},Zt))]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and well help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (Agreement) govern your access to and use of the The Messy Attic website, platform, and all related products and services (collectively, Services). By creating an account, making a purchase, or otherwise using our Services, you (User, you, or your) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Custom Domains"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic may allow eligible users to connect and use a custom domain name with their landing pages and digital products. By adding a custom domain, you represent and warrant that you are the legal owner of the domain or have full authorization to use and control it. You grant The Messy Attic permission to route traffic, provision security certificates, and host content associated with the domain for the purpose of providing the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Custom domains are not activated until ownership has been verified through DNS configuration or other technical validation methods determined by The Messy Attic. We do not serve content on unverified domains. You are solely responsible for maintaining control of your domain and ensuring that it does not infringe upon trademarks, intellectual property rights, or applicable laws."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic reserves the right, in its sole discretion, to suspend, disable, or remove any custom domain that is used for unlawful activity, trademark infringement, impersonation, abuse, or violation of these Terms, without prior notice. Loss of access to a custom domain does not entitle you to a refund of subscription fees or credits."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Dashboard, Marketplace Sales, and Stripe Connect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["The Messy Attic provides tools that allow independent sellers to upload, price, and sell their digital products through their own landing pages using the Seller Dashboard. By becoming a seller, you acknowledge and agree to the following:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," All seller payments and payouts are processed through Stripe Connect, and sellers must maintain a valid Stripe Express account to receive funds.",jsxRuntimeExports.jsx("br",{})," The Messy Attic is a platform provider and is not the merchant of record for seller products. All digital items sold through landing pages are created and owned by the seller.",jsxRuntimeExports.jsx("br",{})," Sellers are fully responsible for the accuracy, legality, and quality of the digital products they provide, including PDFs, guides, templates, or any uploaded content.",jsxRuntimeExports.jsx("br",{})," All sales made through seller landing pages are final. Cre8tly Studio does not issue refunds for seller products and is not responsible for disputes between buyers and sellers.",jsxRuntimeExports.jsx("br",{})," In the event of a technical issue involving file delivery, Cre8tly Studio may assist in verifying delivery errors but is not required to modify, replace, or refund seller content.",jsxRuntimeExports.jsx("br",{})," Sellers are responsible for complying with all applicable laws, including taxes, content rights, and consumer protection regulations related to the digital products they offer.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services, including connecting or attempting to use a custom domain without proper ownership or authorization. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by The Messy Attic or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided as is and as available without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, The Messy Attic, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@themessyattic.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic respects your privacy and is committed to protecting it in accordance with this Privacy Policy (Policy). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (Services)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using The Messy Attic's Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{})," Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{})," Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{})," Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{})," Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{})," To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{})," To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{})," To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{})," To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{})," To comply with legal obligations",jsxRuntimeExports.jsx("br",{})," To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Custom Domains and Technical Data"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you choose to connect a custom domain to your The Messy Attic account, we may process limited technical information related to that domain, such as the domain name, DNS configuration status, and connection metadata, for the sole purpose of verifying domain ownership, enabling secure connections, and providing the Services. We do not access, store, or control your domain registrar account."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Domain-related data is used strictly for operational and security purposes, including preventing unauthorized domain use, abuse, or misconfiguration, and is not shared with third parties except where required to provide secure infrastructure services or comply with legal obligations."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Accounts and Stripe Connect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["If you choose to become a seller on The Messy Attic, we may collect additional information necessary to operate your Seller Dashboard and process payments through Stripe Connect. This may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name, email, and business details used for your Stripe Express account",jsxRuntimeExports.jsx("br",{})," Digital products, PDFs, images, and descriptions you upload to the platform",jsxRuntimeExports.jsx("br",{})," Pricing information, customer purchase data, and sales analytics",jsxRuntimeExports.jsx("br",{})," Transaction history and payout activity (visible to you, processed by Stripe)",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Stripe Connect handles identity verification, tax information, payout processing, and bank account details. The Messy Attic does not store your full financial or banking information. Any data collected by Stripe is governed by Stripes own privacy policy.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"When buyers purchase your digital products, limited information (such as the customers email) may be shared with you solely for product delivery or support. Sellers must use buyer information responsibly and in accordance with applicable privacy laws."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Privacy and Data Handling Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Sellers on The Messy Attic are responsible for the handling, storage, and use of any customer information they receive through product purchases on their landing pages. By offering digital products as a seller, you agree to the following:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You will only use customer information (such as name or email) for delivering the purchased digital product or providing requested support.",jsxRuntimeExports.jsx("br",{})," You may not sell, rent, share, export, or repurpose customer information for advertising, marketing, or any unrelated activity without explicit consent from the customer.",jsxRuntimeExports.jsx("br",{})," You are responsible for complying with all applicable privacy laws and data protection standards in your region, including but not limited to GDPR or CCPA where required.",jsxRuntimeExports.jsx("br",{})," You understand that The Messy Attic does not control or monitor how you use customer information after it has been provided to you. You are independently accountable for your actions as a seller.",jsxRuntimeExports.jsx("br",{})," Any misuse of customer data, including spam, unauthorized marketing, or failure to protect customer information, may result in suspension or termination of your Seller Dashboard access.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The Messy Attic does not provide legal advice to sellers. You are responsible for ensuring that your digital products and data practices comply with all applicable laws and platform requirements."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{})," The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{})," The right to request data portability",jsxRuntimeExports.jsx("br",{})," The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Childrens Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised last updated date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@themessyattic.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At The Messy Attic, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content,"," ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{})," We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{})," Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Products and Landing Page Purchases"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["The Messy Attic allows independent sellers to offer digital products such as PDFs, lead magnets, guides, and templates through their custom landing pages. When you purchase a digital product from a seller:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," All sales are final.",jsxRuntimeExports.jsx("br",{})," Digital product purchases are delivered instantly and are not eligible for refunds, returns, or exchanges.",jsxRuntimeExports.jsx("br",{})," The Messy Attic is not responsible for the sellers content, descriptions, or deliverables.",jsxRuntimeExports.jsx("br",{})," Any issues with the product should be addressed directly with the seller, although The Messy Attic may assist in reviewing technical problems involving file delivery.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@themessyattic.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (Policy) explains how The Messy Attic (we, us, or our) uses cookies and similar technologies when you visit our website (Website) or use our related products and services (Services), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new last revised date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@themessyattic.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=et=>et.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=et=>et.replace(/^([A-Z])|[\s-_]+(\w)/g,(dt,kt,$t)=>$t?$t.toUpperCase():kt.toLowerCase()),toPascalCase=et=>{const dt=toCamelCase(et);return dt.charAt(0).toUpperCase()+dt.slice(1)},mergeClasses=(...et)=>et.filter((dt,kt,$t)=>!!dt&&dt.trim()!==""&&$t.indexOf(dt)===kt).join(" ").trim(),hasA11yProp=et=>{for(const dt in et)if(dt.startsWith("aria-")||dt==="role"||dt==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes$1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:et="currentColor",size:dt=24,strokeWidth:kt=2,absoluteStrokeWidth:$t,className:Tt="",children:Dt,iconNode:Ft,...Ut},Ht)=>reactExports.createElement("svg",{ref:Ht,...defaultAttributes$1,width:dt,height:dt,stroke:et,strokeWidth:$t?Number(kt)*24/Number(dt):kt,className:mergeClasses("lucide",Tt),...!Dt&&!hasA11yProp(Ut)&&{"aria-hidden":"true"},...Ut},[...Ft.map(([Kt,Yt])=>reactExports.createElement(Kt,Yt)),...Array.isArray(Dt)?Dt:[Dt]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(et,dt)=>{const kt=reactExports.forwardRef(({className:$t,...Tt},Dt)=>reactExports.createElement(Icon,{ref:Dt,iconNode:dt,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(et))}`,`lucide-${et}`,$t),...Tt}));return kt.displayName=toPascalCase(et),kt};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1K=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$1K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1J=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$1J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1I=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$1I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1H=[["path",{d:"M2 13a2 2 0 0 0 2-2V7a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0V4a2 2 0 0 1 4 0v13a2 2 0 0 0 4 0v-4a2 2 0 0 1 2-2",key:"57tc96"}]],AudioWaveform=createLucideIcon("audio-waveform",__iconNode$1H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1G=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Banknote=createLucideIcon("banknote",__iconNode$1G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1F=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],BellRing=createLucideIcon("bell-ring",__iconNode$1F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1E=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$1E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1D=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Bold$1=createLucideIcon("bold",__iconNode$1D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1C=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],BookOpenCheck=createLucideIcon("book-open-check",__iconNode$1C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1B=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$1B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1A=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Book=createLucideIcon("book",__iconNode$1A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1z=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Bookmark=createLucideIcon("bookmark",__iconNode$1z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1y=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$1y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1x=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$1x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1w=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ChartNoAxesColumn=createLucideIcon("chart-no-axes-column",__iconNode$1w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1v=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$1v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1u=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$1u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1t=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$1t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1s=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$1s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1r=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$1r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1q=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$1q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1p=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleQuestionMark=createLucideIcon("circle-question-mark",__iconNode$1p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1o=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$1o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1n=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],CloudUpload=createLucideIcon("cloud-upload",__iconNode$1n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1m=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Code$1=createLucideIcon("code",__iconNode$1m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1l=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$1l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1k=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$1k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1j=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],CreditCard=createLucideIcon("credit-card",__iconNode$1j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1i=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$1i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1h=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$1h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1g=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$1g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1f=[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]],Ear=createLucideIcon("ear",__iconNode$1f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EllipsisVertical=createLucideIcon("ellipsis-vertical",__iconNode$1e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1d=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ellipsis=createLucideIcon("ellipsis",__iconNode$1d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1c=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$1c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1b=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$1b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1a=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$1a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$19=[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]],Feather=createLucideIcon("feather",__iconNode$19);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$18=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],FilePen=createLucideIcon("file-pen",__iconNode$18);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$17=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$17);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$16=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$16);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$15=[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]],HandHeart=createLucideIcon("hand-heart",__iconNode$15);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$14=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Heart=createLucideIcon("heart",__iconNode$14);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$13=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$13);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$12=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$2=createLucideIcon("image",__iconNode$12);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$11=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$11);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$10=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$10);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$$=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Italic$1=createLucideIcon("italic",__iconNode$$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$_=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],KeyRound=createLucideIcon("key-round",__iconNode$_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Z=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Landmark=createLucideIcon("landmark",__iconNode$Z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Y=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$Y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$X=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],LayoutTemplate=createLucideIcon("layout-template",__iconNode$X);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$W=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Link2=createLucideIcon("link-2",__iconNode$W);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$V=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Link$1=createLucideIcon("link",__iconNode$V);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$U);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$T);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$S);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$R);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$Q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],MailCheck=createLucideIcon("mail-check",__iconNode$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$N);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$M);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],MessageCircle=createLucideIcon("message-circle",__iconNode$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"M22 8.5V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v16.286a.71.71 0 0 0 1.212.502l2.202-2.202A2 2 0 0 1 6.828 19H10",key:"fu6chl"}],["path",{d:"M20 15v-2a2 2 0 0 0-4 0v2",key:"vl8a78"}],["rect",{x:"14",y:"15",width:"8",height:"5",rx:"1",key:"37aafw"}]],MessageSquareLock=createLucideIcon("message-square-lock",__iconNode$K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MessageSquare=createLucideIcon("message-square",__iconNode$J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],MessagesSquare=createLucideIcon("messages-square",__iconNode$I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],MousePointerClick=createLucideIcon("mouse-pointer-click",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],PanelsTopLeft=createLucideIcon("panels-top-left",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Pause=createLucideIcon("pause",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],PenLine=createLucideIcon("pen-line",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],PenTool=createLucideIcon("pen-tool",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]],Replace=createLucideIcon("replace",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],RotateCw=createLucideIcon("rotate-cw",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Share2=createLucideIcon("share-2",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ShieldCheck=createLucideIcon("shield-check",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ShieldQuestionMark=createLucideIcon("shield-question-mark",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],SquarePlay=createLucideIcon("square-play",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Star=createLucideIcon("star",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash=createLucideIcon("trash",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],Unlink=createLucideIcon("unlink",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],WandSparkles=createLucideIcon("wand-sparkles",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Workflow=createLucideIcon("workflow",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$5=createLucideIcon("x",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode),headerLogo="/assets/themessyattic-logo-adb8bd55.svg",landing="/assets/landing-2fb13e19.webp",blocks="/assets/blocks-78cb89c6.webp",downLoadFeature="/assets/download-feature-52486457.webp",stripeCheckout="/assets/stripe-checkout-4bb3f659.webp",versions="/assets/versions-8ffb9da6.webp",containers="/assets/containers-aef4f254.webp",offer="/assets/offer-f052c9e6.webp",customBranding="/assets/custom-branding-cbb1ed9c.webp",landingPreview="/assets/landing-page-preview-5ea55918.webp",blockFeatures="/assets/block-features-294072f8.webp",blockConversion="/assets/block-conversion-7bc01fb2.webp",secureCheckout="/assets/secure-checkout-a620c5b5.webp",audioPlayer="/assets/audio-player-660b6a61.webp",freeSubDomain="/assets/subdomain-f7ee7110.webp",tools="/assets/tools-3fb83eed.webp",defaultImage="/assets/userImage-def15e8d.png",defaultBrandLogo="/assets/defaultBrandLogo-d1c01baa.webp",bookFeature="/assets/white-author-cd108d4c.webp",aiCopy="/assets/ai-copy-landing-d8ff8e51.webp";function SignupPage(){const{login:et}=useAuth(),[dt,kt]=reactExports.useState(!1),$t=useNavigate(),[Tt,Dt]=reactExports.useState({name:"",email:"",username:"",password:""}),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(""),[Yt]=useSearchParams(),Jt=Yt.get("ref");reactExports.useEffect(()=>{if(Ht){const rr=setTimeout(()=>Kt(""),5e3);return()=>clearTimeout(rr)}},[Ht]);const Zt=rr=>{const{name:sr,value:nr}=rr.target;Dt({...Tt,[sr]:sr==="username"?nr.toLowerCase():nr})},er=async rr=>{var sr,nr;rr.preventDefault(),Ut(!0),Kt("");try{const ir=Tt.username.trim();if(!/^[a-zA-Z0-9_]{3,20}$/.test(ir)){Kt("Username must be 320 characters and contain only letters, numbers, or underscores."),Ut(!1);return}const lr={name:Tt.name,email:Tt.email,password:Tt.password,username:ir,...Jt&&{refSlug:Jt}},or=await axios$1.post("https://themessyattic.com/api/auth/signup",lr);or.status===201?(await et(Tt.email,Tt.password),$t("/community")):Kt(or.data.message||"Something went wrong")}catch(ir){(nr=(sr=ir.response)==null?void 0:sr.data)!=null&&nr.message?Kt(ir.response.data.message):Kt("Signup failed. Please try again later.")}finally{Ut(!1)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Create your account"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"font-semibold hover:underline",children:"Log in"})]})]}),Ht&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:Ht}),jsxRuntimeExports.jsxs("form",{onSubmit:er,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:Tt.name,onChange:Zt,placeholder:"Full Name",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",value:Tt.username,onChange:Zt,placeholder:"Username",required:!0,autoComplete:"username",className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"320 characters, letters, numbers, underscores only"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Tt.email,onChange:Zt,placeholder:"Email Address",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:Tt.password,onChange:Zt,placeholder:"Password",required:!0,className:`
                w-full h-[48px] px-4 py-3 pr-12 rounded-lg
                bg-white
                border border-gray-300
                text-gray-900
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
              `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ft,className:`
              w-full bg-black text-white
              font-semibold py-3 rounded-lg
              hover:opacity-90 transition
            `,children:Ft?"Creating Account...":"Get Started"})]})]})})})}var i$6=Object.defineProperty,d$2=(et,dt,kt)=>dt in et?i$6(et,dt,{enumerable:!0,configurable:!0,writable:!0,value:kt}):et[dt]=kt,r$2=(et,dt,kt)=>(d$2(et,typeof dt!="symbol"?dt+"":dt,kt),kt);let o$5=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(dt){this.current!==dt&&(this.handoffState="pending",this.currentId=0,this.current=dt)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$4=new o$5;function t$2(et){typeof queueMicrotask=="function"?queueMicrotask(et):Promise.resolve().then(et).catch(dt=>setTimeout(()=>{throw dt}))}function o$4(){let et=[],dt={addEventListener(kt,$t,Tt,Dt){return kt.addEventListener($t,Tt,Dt),dt.add(()=>kt.removeEventListener($t,Tt,Dt))},requestAnimationFrame(...kt){let $t=requestAnimationFrame(...kt);return dt.add(()=>cancelAnimationFrame($t))},nextFrame(...kt){return dt.requestAnimationFrame(()=>dt.requestAnimationFrame(...kt))},setTimeout(...kt){let $t=setTimeout(...kt);return dt.add(()=>clearTimeout($t))},microTask(...kt){let $t={current:!0};return t$2(()=>{$t.current&&kt[0]()}),dt.add(()=>{$t.current=!1})},style(kt,$t,Tt){let Dt=kt.style.getPropertyValue($t);return Object.assign(kt.style,{[$t]:Tt}),this.add(()=>{Object.assign(kt.style,{[$t]:Dt})})},group(kt){let $t=o$4();return kt($t),this.add(()=>$t.dispose())},add(kt){return et.includes(kt)||et.push(kt),()=>{let $t=et.indexOf(kt);if($t>=0)for(let Tt of et.splice($t,1))Tt()}},dispose(){for(let kt of et.splice(0))kt()}};return dt}function p$3(){let[et]=reactExports.useState(o$4);return reactExports.useEffect(()=>()=>et.dispose(),[et]),et}let n$2=(et,dt)=>{s$4.isServer?reactExports.useEffect(et,dt):reactExports.useLayoutEffect(et,dt)};function s$3(et){let dt=reactExports.useRef(et);return n$2(()=>{dt.current=et},[et]),dt}let o$3=function(et){let dt=s$3(et);return React$2.useCallback((...kt)=>dt.current(...kt),[dt])};function t$1(...et){return Array.from(new Set(et.flatMap(dt=>typeof dt=="string"?dt.split(" "):[]))).filter(Boolean).join(" ")}function u$5(et,dt,...kt){if(et in dt){let Tt=dt[et];return typeof Tt=="function"?Tt(...kt):Tt}let $t=new Error(`Tried to handle "${et}" but there is no handler defined. Only defined handlers are: ${Object.keys(dt).map(Tt=>`"${Tt}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace($t,u$5),$t}var O$6=(et=>(et[et.None=0]="None",et[et.RenderStrategy=1]="RenderStrategy",et[et.Static=2]="Static",et))(O$6||{}),A$6=(et=>(et[et.Unmount=0]="Unmount",et[et.Hidden=1]="Hidden",et))(A$6||{});function L$7(){let et=U$3();return reactExports.useCallback(dt=>C$7({mergeRefs:et,...dt}),[et])}function C$7({ourProps:et,theirProps:dt,slot:kt,defaultTag:$t,features:Tt,visible:Dt=!0,name:Ft,mergeRefs:Ut}){Ut=Ut??$$2;let Ht=P$4(dt,et);if(Dt)return F$2(Ht,kt,$t,Ft,Ut);let Kt=Tt??0;if(Kt&2){let{static:Yt=!1,...Jt}=Ht;if(Yt)return F$2(Jt,kt,$t,Ft,Ut)}if(Kt&1){let{unmount:Yt=!0,...Jt}=Ht;return u$5(Yt?0:1,{0(){return null},1(){return F$2({...Jt,hidden:!0,style:{display:"none"}},kt,$t,Ft,Ut)}})}return F$2(Ht,kt,$t,Ft,Ut)}function F$2(et,dt={},kt,$t,Tt){let{as:Dt=kt,children:Ft,refName:Ut="ref",...Ht}=h$2(et,["unmount","static"]),Kt=et.ref!==void 0?{[Ut]:et.ref}:{},Yt=typeof Ft=="function"?Ft(dt):Ft;"className"in Ht&&Ht.className&&typeof Ht.className=="function"&&(Ht.className=Ht.className(dt)),Ht["aria-labelledby"]&&Ht["aria-labelledby"]===Ht.id&&(Ht["aria-labelledby"]=void 0);let Jt={};if(dt){let Zt=!1,er=[];for(let[rr,sr]of Object.entries(dt))typeof sr=="boolean"&&(Zt=!0),sr===!0&&er.push(rr.replace(/([A-Z])/g,nr=>`-${nr.toLowerCase()}`));if(Zt){Jt["data-headlessui-state"]=er.join(" ");for(let rr of er)Jt[`data-${rr}`]=""}}if(Dt===reactExports.Fragment&&(Object.keys(m$2(Ht)).length>0||Object.keys(m$2(Jt)).length>0))if(!reactExports.isValidElement(Yt)||Array.isArray(Yt)&&Yt.length>1){if(Object.keys(m$2(Ht)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${$t} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$2(Ht)).concat(Object.keys(m$2(Jt))).map(Zt=>`  - ${Zt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(Zt=>`  - ${Zt}`).join(`
`)].join(`
`))}else{let Zt=Yt.props,er=Zt==null?void 0:Zt.className,rr=typeof er=="function"?(...ir)=>t$1(er(...ir),Ht.className):t$1(er,Ht.className),sr=rr?{className:rr}:{},nr=P$4(Yt.props,m$2(h$2(Ht,["ref"])));for(let ir in Jt)ir in nr&&delete Jt[ir];return reactExports.cloneElement(Yt,Object.assign({},nr,Jt,Kt,{ref:Tt(H$1(Yt),Kt.ref)},sr))}return reactExports.createElement(Dt,Object.assign({},h$2(Ht,["ref"]),Dt!==reactExports.Fragment&&Kt,Dt!==reactExports.Fragment&&Jt),Yt)}function U$3(){let et=reactExports.useRef([]),dt=reactExports.useCallback(kt=>{for(let $t of et.current)$t!=null&&(typeof $t=="function"?$t(kt):$t.current=kt)},[]);return(...kt)=>{if(!kt.every($t=>$t==null))return et.current=kt,dt}}function $$2(...et){return et.every(dt=>dt==null)?void 0:dt=>{for(let kt of et)kt!=null&&(typeof kt=="function"?kt(dt):kt.current=dt)}}function P$4(...et){if(et.length===0)return{};if(et.length===1)return et[0];let dt={},kt={};for(let $t of et)for(let Tt in $t)Tt.startsWith("on")&&typeof $t[Tt]=="function"?(kt[Tt]!=null||(kt[Tt]=[]),kt[Tt].push($t[Tt])):dt[Tt]=$t[Tt];if(dt.disabled||dt["aria-disabled"])for(let $t in kt)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test($t)&&(kt[$t]=[Tt=>{var Dt;return(Dt=Tt==null?void 0:Tt.preventDefault)==null?void 0:Dt.call(Tt)}]);for(let $t in kt)Object.assign(dt,{[$t](Tt,...Dt){let Ft=kt[$t];for(let Ut of Ft){if((Tt instanceof Event||(Tt==null?void 0:Tt.nativeEvent)instanceof Event)&&Tt.defaultPrevented)return;Ut(Tt,...Dt)}}});return dt}function K$2(et){var dt;return Object.assign(reactExports.forwardRef(et),{displayName:(dt=et.displayName)!=null?dt:et.name})}function m$2(et){let dt=Object.assign({},et);for(let kt in dt)dt[kt]===void 0&&delete dt[kt];return dt}function h$2(et,dt=[]){let kt=Object.assign({},et);for(let $t of dt)$t in kt&&delete kt[$t];return kt}function H$1(et){return React$2.version.split(".")[0]>="19"?et.props.ref:et.ref}let u$4=Symbol();function y$3(...et){let dt=reactExports.useRef(et);reactExports.useEffect(()=>{dt.current=et},[et]);let kt=o$3($t=>{for(let Tt of dt.current)Tt!=null&&(typeof Tt=="function"?Tt($t):Tt.current=$t)});return et.every($t=>$t==null||($t==null?void 0:$t[u$4]))?void 0:kt}function c$5(et=0){let[dt,kt]=reactExports.useState(et),$t=reactExports.useCallback(Ht=>kt(Ht),[dt]),Tt=reactExports.useCallback(Ht=>kt(Kt=>Kt|Ht),[dt]),Dt=reactExports.useCallback(Ht=>(dt&Ht)===Ht,[dt]),Ft=reactExports.useCallback(Ht=>kt(Kt=>Kt&~Ht),[kt]),Ut=reactExports.useCallback(Ht=>kt(Kt=>Kt^Ht),[kt]);return{flags:dt,setFlag:$t,addFlag:Tt,hasFlag:Dt,removeFlag:Ft,toggleFlag:Ut}}var T$4,b$6;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T$4=process==null?void 0:process.env)==null?void 0:T$4.NODE_ENV)==="test"&&typeof((b$6=Element==null?void 0:Element.prototype)==null?void 0:b$6.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L$6=(et=>(et[et.None=0]="None",et[et.Closed=1]="Closed",et[et.Enter=2]="Enter",et[et.Leave=4]="Leave",et))(L$6||{});function R$3(et){let dt={};for(let kt in et)et[kt]===!0&&(dt[`data-${kt}`]="");return dt}function x$1(et,dt,kt,$t){let[Tt,Dt]=reactExports.useState(kt),{hasFlag:Ft,addFlag:Ut,removeFlag:Ht}=c$5(et&&Tt?3:0),Kt=reactExports.useRef(!1),Yt=reactExports.useRef(!1),Jt=p$3();return n$2(()=>{var Zt;if(et){if(kt&&Dt(!0),!dt){kt&&Ut(3);return}return(Zt=$t==null?void 0:$t.start)==null||Zt.call($t,kt),C$6(dt,{inFlight:Kt,prepare(){Yt.current?Yt.current=!1:Yt.current=Kt.current,Kt.current=!0,!Yt.current&&(kt?(Ut(3),Ht(4)):(Ut(4),Ht(2)))},run(){Yt.current?kt?(Ht(3),Ut(4)):(Ht(4),Ut(3)):kt?Ht(1):Ut(1)},done(){var er;Yt.current&&typeof dt.getAnimations=="function"&&dt.getAnimations().length>0||(Kt.current=!1,Ht(7),kt||Dt(!1),(er=$t==null?void 0:$t.end)==null||er.call($t,kt))}})}},[et,kt,dt,Jt]),et?[Tt,{closed:Ft(1),enter:Ft(2),leave:Ft(4),transition:Ft(2)||Ft(4)}]:[kt,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C$6(et,{prepare:dt,run:kt,done:$t,inFlight:Tt}){let Dt=o$4();return j$6(et,{prepare:dt,inFlight:Tt}),Dt.nextFrame(()=>{kt(),Dt.requestAnimationFrame(()=>{Dt.add(M$5(et,$t))})}),Dt.dispose}function M$5(et,dt){var kt,$t;let Tt=o$4();if(!et)return Tt.dispose;let Dt=!1;Tt.add(()=>{Dt=!0});let Ft=($t=(kt=et.getAnimations)==null?void 0:kt.call(et).filter(Ut=>Ut instanceof CSSTransition))!=null?$t:[];return Ft.length===0?(dt(),Tt.dispose):(Promise.allSettled(Ft.map(Ut=>Ut.finished)).then(()=>{Dt||dt()}),Tt.dispose)}function j$6(et,{inFlight:dt,prepare:kt}){if(dt!=null&&dt.current){kt();return}let $t=et.style.transition;et.style.transition="none",kt(),et.offsetHeight,et.style.transition=$t}let n$1=reactExports.createContext(null);n$1.displayName="OpenClosedContext";var i$5=(et=>(et[et.Open=1]="Open",et[et.Closed=2]="Closed",et[et.Closing=4]="Closing",et[et.Opening=8]="Opening",et))(i$5||{});function u$3(){return reactExports.useContext(n$1)}function c$4({value:et,children:dt}){return React$2.createElement(n$1.Provider,{value:et},dt)}function s$2(){let et=typeof document>"u";return"useSyncExternalStore"in t$3?(dt=>dt.useSyncExternalStore)(t$3)(()=>()=>{},()=>!1,()=>!et):!1}function l$1(){let et=s$2(),[dt,kt]=reactExports.useState(s$4.isHandoffComplete);return dt&&s$4.isHandoffComplete===!1&&kt(!1),reactExports.useEffect(()=>{dt!==!0&&kt(!0)},[dt]),reactExports.useEffect(()=>s$4.handoff(),[]),et?!1:dt}function f(){let et=reactExports.useRef(!1);return n$2(()=>(et.current=!0,()=>{et.current=!1}),[]),et}function ue$2(et){var dt;return!!(et.enter||et.enterFrom||et.enterTo||et.leave||et.leaveFrom||et.leaveTo)||((dt=et.as)!=null?dt:de$2)!==reactExports.Fragment||React$2.Children.count(et.children)===1}let w$6=reactExports.createContext(null);w$6.displayName="TransitionContext";var _e$1=(et=>(et.Visible="visible",et.Hidden="hidden",et))(_e$1||{});function De$2(){let et=reactExports.useContext(w$6);if(et===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return et}function He$2(){let et=reactExports.useContext(M$4);if(et===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return et}let M$4=reactExports.createContext(null);M$4.displayName="NestingContext";function U$2(et){return"children"in et?U$2(et.children):et.current.filter(({el:dt})=>dt.current!==null).filter(({state:dt})=>dt==="visible").length>0}function Te$2(et,dt){let kt=s$3(et),$t=reactExports.useRef([]),Tt=f(),Dt=p$3(),Ft=o$3((er,rr=A$6.Hidden)=>{let sr=$t.current.findIndex(({el:nr})=>nr===er);sr!==-1&&(u$5(rr,{[A$6.Unmount](){$t.current.splice(sr,1)},[A$6.Hidden](){$t.current[sr].state="hidden"}}),Dt.microTask(()=>{var nr;!U$2($t)&&Tt.current&&((nr=kt.current)==null||nr.call(kt))}))}),Ut=o$3(er=>{let rr=$t.current.find(({el:sr})=>sr===er);return rr?rr.state!=="visible"&&(rr.state="visible"):$t.current.push({el:er,state:"visible"}),()=>Ft(er,A$6.Unmount)}),Ht=reactExports.useRef([]),Kt=reactExports.useRef(Promise.resolve()),Yt=reactExports.useRef({enter:[],leave:[]}),Jt=o$3((er,rr,sr)=>{Ht.current.splice(0),dt&&(dt.chains.current[rr]=dt.chains.current[rr].filter(([nr])=>nr!==er)),dt==null||dt.chains.current[rr].push([er,new Promise(nr=>{Ht.current.push(nr)})]),dt==null||dt.chains.current[rr].push([er,new Promise(nr=>{Promise.all(Yt.current[rr].map(([ir,lr])=>lr)).then(()=>nr())})]),rr==="enter"?Kt.current=Kt.current.then(()=>dt==null?void 0:dt.wait.current).then(()=>sr(rr)):sr(rr)}),Zt=o$3((er,rr,sr)=>{Promise.all(Yt.current[rr].splice(0).map(([nr,ir])=>ir)).then(()=>{var nr;(nr=Ht.current.shift())==null||nr()}).then(()=>sr(rr))});return reactExports.useMemo(()=>({children:$t,register:Ut,unregister:Ft,onStart:Jt,onStop:Zt,wait:Kt,chains:Yt}),[Ut,Ft,$t,Jt,Zt,Yt,Kt])}let de$2=reactExports.Fragment,fe$2=O$6.RenderStrategy;function Ae$1(et,dt){var kt,$t;let{transition:Tt=!0,beforeEnter:Dt,afterEnter:Ft,beforeLeave:Ut,afterLeave:Ht,enter:Kt,enterFrom:Yt,enterTo:Jt,entered:Zt,leave:er,leaveFrom:rr,leaveTo:sr,...nr}=et,[ir,lr]=reactExports.useState(null),or=reactExports.useRef(null),cr=ue$2(et),dr=y$3(...cr?[or,dt,lr]:dt===null?[]:[dt]),ur=(kt=nr.unmount)==null||kt?A$6.Unmount:A$6.Hidden,{show:pr,appear:mr,initial:jr}=De$2(),[Rr,br]=reactExports.useState(pr?"visible":"hidden"),_r=He$2(),{register:Mr,unregister:Pr}=_r;n$2(()=>Mr(or),[Mr,or]),n$2(()=>{if(ur===A$6.Hidden&&or.current){if(pr&&Rr!=="visible"){br("visible");return}return u$5(Rr,{hidden:()=>Pr(or),visible:()=>Mr(or)})}},[Rr,or,Mr,Pr,pr,ur]);let Or=l$1();n$2(()=>{if(cr&&Or&&Rr==="visible"&&or.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[or,Rr,Or,cr]);let kr=jr&&!mr,Tr=mr&&pr&&jr,xr=reactExports.useRef(!1),wr=Te$2(()=>{xr.current||(br("hidden"),Pr(or))},_r),zr=o$3(Wr=>{xr.current=!0;let cs=Wr?"enter":"leave";wr.onStart(or,cs,ns=>{ns==="enter"?Dt==null||Dt():ns==="leave"&&(Ut==null||Ut())})}),Hr=o$3(Wr=>{let cs=Wr?"enter":"leave";xr.current=!1,wr.onStop(or,cs,ns=>{ns==="enter"?Ft==null||Ft():ns==="leave"&&(Ht==null||Ht())}),cs==="leave"&&!U$2(wr)&&(br("hidden"),Pr(or))});reactExports.useEffect(()=>{cr&&Tt||(zr(pr),Hr(pr))},[pr,cr,Tt]);let Yr=(()=>!(!Tt||!cr||!Or||kr))(),[,rs]=x$1(Yr,ir,pr,{start:zr,end:Hr}),as=m$2({ref:dr,className:(($t=t$1(nr.className,Tr&&Kt,Tr&&Yt,rs.enter&&Kt,rs.enter&&rs.closed&&Yt,rs.enter&&!rs.closed&&Jt,rs.leave&&er,rs.leave&&!rs.closed&&rr,rs.leave&&rs.closed&&sr,!rs.transition&&pr&&Zt))==null?void 0:$t.trim())||void 0,...R$3(rs)}),es=0;Rr==="visible"&&(es|=i$5.Open),Rr==="hidden"&&(es|=i$5.Closed),rs.enter&&(es|=i$5.Opening),rs.leave&&(es|=i$5.Closing);let Xr=L$7();return React$2.createElement(M$4.Provider,{value:wr},React$2.createElement(c$4,{value:es},Xr({ourProps:as,theirProps:nr,defaultTag:de$2,features:fe$2,visible:Rr==="visible",name:"Transition.Child"})))}function Ie$1(et,dt){let{show:kt,appear:$t=!1,unmount:Tt=!0,...Dt}=et,Ft=reactExports.useRef(null),Ut=ue$2(et),Ht=y$3(...Ut?[Ft,dt]:dt===null?[]:[dt]);l$1();let Kt=u$3();if(kt===void 0&&Kt!==null&&(kt=(Kt&i$5.Open)===i$5.Open),kt===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Yt,Jt]=reactExports.useState(kt?"visible":"hidden"),Zt=Te$2(()=>{kt||Jt("hidden")}),[er,rr]=reactExports.useState(!0),sr=reactExports.useRef([kt]);n$2(()=>{er!==!1&&sr.current[sr.current.length-1]!==kt&&(sr.current.push(kt),rr(!1))},[sr,kt]);let nr=reactExports.useMemo(()=>({show:kt,appear:$t,initial:er}),[kt,$t,er]);n$2(()=>{kt?Jt("visible"):!U$2(Zt)&&Ft.current!==null&&Jt("hidden")},[kt,Zt]);let ir={unmount:Tt},lr=o$3(()=>{var dr;er&&rr(!1),(dr=et.beforeEnter)==null||dr.call(et)}),or=o$3(()=>{var dr;er&&rr(!1),(dr=et.beforeLeave)==null||dr.call(et)}),cr=L$7();return React$2.createElement(M$4.Provider,{value:Zt},React$2.createElement(w$6.Provider,{value:nr},cr({ourProps:{...ir,as:reactExports.Fragment,children:React$2.createElement(me$2,{ref:Ht,...ir,...Dt,beforeEnter:lr,beforeLeave:or})},theirProps:{},defaultTag:reactExports.Fragment,features:fe$2,visible:Yt==="visible",name:"Transition"})))}function Le$1(et,dt){let kt=reactExports.useContext(w$6)!==null,$t=u$3()!==null;return React$2.createElement(React$2.Fragment,null,!kt&&$t?React$2.createElement(X$4,{ref:dt,...et}):React$2.createElement(me$2,{ref:dt,...et}))}let X$4=K$2(Ie$1),me$2=K$2(Ae$1),Fe$2=K$2(Le$1),ze$1=Object.assign(X$4,{Child:Fe$2,Root:X$4});const navLinks=[{href:"/",label:"Home"},{href:"/sign-up",label:"Sign Up"},{href:"/contact",label:"Contact Us"},{href:"/shop",label:"Shop"},{href:"/login",label:"Login"}],colorThemes=[{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"steel",label:"Steel",preview:"#475569"},{name:"slate",label:"Slate",preview:"#334155"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"dark",label:"Dark",preview:"#030712"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"mocha",label:"Mocha",preview:"#78350f"}],gradientThemes=[{name:"gradientIvory",label:"Gradient Ivory",preview:"linear-gradient(135deg, #fefce8, #fef9c3)"},{name:"gradientCream",label:"Gradient Cream",preview:"linear-gradient(135deg, #fef9c3, #fde68a)"},{name:"gradientClassic",label:"Gradient Classic",preview:"linear-gradient(135deg, #fffaf5, #fde68a)"},{name:"gradientPlatinum",label:"Gradient Platinum",preview:"linear-gradient(135deg, #f3f4f6, #e5e7eb)"},{name:"gradientModern",label:"Gradient Modern",preview:"linear-gradient(135deg, #e2e8f0, #94a3b8)"},{name:"gradientFog",label:"Gradient Fog",preview:"linear-gradient(135deg, #cbd5e1, #94a3b8)"},{name:"gradientStone",label:"Gradient Stone",preview:"linear-gradient(135deg, #d6d3d1, #e7e5e4)"},{name:"gradientSmoke",label:"Gradient Smoke",preview:"linear-gradient(135deg, #737373, #a3a3a3)"},{name:"gradientStorm",label:"Gradient Storm",preview:"linear-gradient(135deg, #64748b, #475569)"},{name:"gradientSteel",label:"Gradient Steel",preview:"linear-gradient(135deg, #475569, #94a3b8)"},{name:"gradientSlate",label:"Gradient Slate",preview:"linear-gradient(135deg, #334155, #475569)"},{name:"gradientGraphite",label:"Gradient Graphite",preview:"linear-gradient(135deg, #1f2937, #4b5563)"},{name:"gradientCarbon",label:"Gradient Carbon",preview:"linear-gradient(135deg, #1e293b, #334155)"},{name:"gradientMidnight",label:"Gradient Midnight",preview:"linear-gradient(135deg, #1e293b, #0f172a)"},{name:"gradientCharcoal",label:"Gradient Charcoal",preview:"linear-gradient(135deg, #111827, #1f2937)"},{name:"gradientOnyx",label:"Gradient Onyx",preview:"linear-gradient(135deg, #0f172a, #1e293b)"},{name:"gradientShadow",label:"Gradient Shadow",preview:"linear-gradient(135deg, #171717, #262626)"},{name:"gradientJet",label:"Gradient Jet",preview:"linear-gradient(135deg, #0a0a0a, #171717)"},{name:"gradientDark",label:"Gradient Dark",preview:"linear-gradient(135deg, #030712, #1e293b)"},{name:"gradientIce",label:"Gradient Ice",preview:"linear-gradient(135deg, #e0f2fe, #7dd3fc)"},{name:"gradientArctic",label:"Gradient Arctic",preview:"linear-gradient(135deg, #bae6fd, #7dd3fc)"},{name:"gradientArcticBlue",label:"Gradient Arctic Blue",preview:"linear-gradient(135deg, #7dd3fc, #38bdf8)"},{name:"gradientOcean",label:"Gradient Ocean",preview:"linear-gradient(135deg, #bae6fd, #0ea5e9)"},{name:"gradientSky",label:"Gradient Sky",preview:"linear-gradient(135deg, #60a5fa, #3b82f6)"},{name:"gradientAqua",label:"Gradient Aqua",preview:"linear-gradient(135deg, #0ea5e9, #06b6d4)"},{name:"gradientSapphire",label:"Gradient Sapphire",preview:"linear-gradient(135deg, #0ea5e9, #2563eb)"},{name:"gradientDenim",label:"Gradient Denim",preview:"linear-gradient(135deg, #1d4ed8, #3b82f6)"},{name:"gradientNavy",label:"Gradient Navy",preview:"linear-gradient(135deg, #1e3a8a, #2563eb)"},{name:"gradientBold",label:"Gradient Bold",preview:"linear-gradient(135deg, #f9e8ff, #e879f9)"},{name:"gradientOrchid",label:"Gradient Orchid",preview:"linear-gradient(135deg, #d8b4fe, #c084fc)"},{name:"gradientLavender",label:"Gradient Lavender",preview:"linear-gradient(135deg, #c084fc, #a855f7)"},{name:"gradientPeriwinkle",label:"Gradient Periwinkle",preview:"linear-gradient(135deg, #a5b4fc, #c7d2fe)"},{name:"gradientIris",label:"Gradient Iris",preview:"linear-gradient(135deg, #6366f1, #818cf8)"},{name:"gradientBerry",label:"Gradient Berry",preview:"linear-gradient(135deg, #7e22ce, #a855f7)"},{name:"gradientUltraviolet",label:"Gradient Ultraviolet",preview:"linear-gradient(135deg, #6d28d9, #7c3aed)"},{name:"gradientVelvet",label:"Gradient Velvet",preview:"linear-gradient(135deg, #581c87, #7e22ce)"},{name:"gradientRoyal",label:"Gradient Royal",preview:"linear-gradient(135deg, #2E026D, #9333ea)"},{name:"gradientRose",label:"Gradient Rose",preview:"linear-gradient(135deg, #fce7f3, #ec4899)"},{name:"gradientBlush",label:"Gradient Blush",preview:"linear-gradient(135deg, #fecdd3, #fda4af)"},{name:"gradientCoral",label:"Gradient Coral",preview:"linear-gradient(135deg, #fb7185, #f43f5e)"},{name:"gradientCandy",label:"Gradient Candy",preview:"linear-gradient(135deg, #ec4899, #f472b6)"},{name:"gradientRuby",label:"Gradient Ruby",preview:"linear-gradient(135deg, #be123c, #e11d48)"},{name:"gradientCherry",label:"Gradient Cherry",preview:"linear-gradient(135deg, #991b1b, #dc2626)"},{name:"gradientWine",label:"Gradient Wine",preview:"linear-gradient(135deg, #7f1d1d, #991b1b)"},{name:"gradientRosewood",label:"Gradient Rosewood",preview:"linear-gradient(135deg, #4a0404, #7f1d1d)"},{name:"gradientSand",label:"Gradient Sand",preview:"linear-gradient(135deg, #fcd34d, #fbbf24)"},{name:"gradientHoney",label:"Gradient Honey",preview:"linear-gradient(135deg, #facc15, #fbbf24)"},{name:"gradientAmber",label:"Gradient Amber",preview:"linear-gradient(135deg, #fbbf24, #f59e0b)"},{name:"gradientGold",label:"Gradient Gold",preview:"linear-gradient(135deg, #f59e0b, #fbbf24)"},{name:"gradientSunrise",label:"Gradient Sunrise",preview:"linear-gradient(135deg, #fed7aa, #fb923c)"},{name:"gradientSunset",label:"Gradient Sunset",preview:"linear-gradient(135deg, #fb923c, #f97316)"},{name:"gradientPeach",label:"Gradient Peach",preview:"linear-gradient(135deg, #f97316, #fb923c)"},{name:"gradientTangerine",label:"Gradient Tangerine",preview:"linear-gradient(135deg, #f97316, #fb923c)"},{name:"gradientCopper",label:"Gradient Copper",preview:"linear-gradient(135deg, #b45309, #f59e0b)"},{name:"gradientBronze",label:"Gradient Bronze",preview:"linear-gradient(135deg, #78350f, #b45309)"},{name:"gradientMocha",label:"Gradient Mocha",preview:"linear-gradient(135deg, #78350f, #b45309)"},{name:"gradientWineGold",label:"Gradient Wine Gold",preview:"linear-gradient(135deg, #854d0e, #f59e0b)"},{name:"gradientMintCream",label:"Gradient Mint Cream",preview:"linear-gradient(135deg, #dcfce7, #bbf7d0)"},{name:"gradientMint",label:"Gradient Mint",preview:"linear-gradient(135deg, #d1fae5, #10b981)"},{name:"gradientOpal",label:"Gradient Opal",preview:"linear-gradient(135deg, #a7f3d0, #6ee7b7)"},{name:"gradientEmerald",label:"Gradient Emerald",preview:"linear-gradient(135deg, #10b981, #34d399)"},{name:"gradientTeal",label:"Gradient Teal",preview:"linear-gradient(135deg, #0d9488, #14b8a6)"},{name:"gradientForest",label:"Gradient Forest",preview:"linear-gradient(135deg, #065f46, #059669)"},{name:"gradientPine",label:"Gradient Pine",preview:"linear-gradient(135deg, #064e3b, #065f46)"},{name:"gradientMoss",label:"Gradient Moss",preview:"linear-gradient(135deg, #14532d, #166534)"},{name:"gradientCoffee",label:"Gradient Coffee",preview:"linear-gradient(135deg, #6b4f4f, #8b5e5e)"}],fontThemes=[{name:"Roboto",label:"Appeal",file:"/fonts/Roboto-Regular.ttf"},{name:"Academy",label:"Academy",file:"/fonts/Academy-Engraved LET-Fonts.ttf"},{name:"Aloevera-Regular",label:"Big Win",file:"/fonts/Aloevera-Regular.ttf"},{name:"ACaslonPro",label:"Blissful",file:"/fonts/ACaslonPro-Regular.ttf"},{name:"Baskerville",label:"Brilliance",file:"/fonts/Baskerville.ttf"},{name:"Frank",label:"Business",file:"/fonts/frank.ttf"},{name:"Butler_Medium",label:"Butler",file:"/fonts/Butler_Medium.ttf"},{name:"AdobeArabic",label:"Classic",file:"/fonts/AdobeArabic-Regular.ttf"},{name:"agencyfb",label:"Dazzle",file:"/fonts/agencyfb-bold.ttf"},{name:"Aloevera-Thin",label:"Excellence",file:"/fonts/Aloevera-Thin.ttf"},{name:"ChopinScript",label:"Fancy",file:"/fonts/ChopinScript.ttf"},{name:"Acens",label:"Financial",file:"/fonts/Acens.ttf"},{name:"cambriab",label:"Footloose",file:"/fonts/cambriab.ttf"},{name:"Archivo",label:"Gorgeous",file:"/fonts/Archivo-Regular.ttf"},{name:"Berylium",label:"Guru",file:"/fonts/Berylium.ttf"},{name:"Impact",label:"Impactful",file:"/fonts/impact.ttf"},{name:"Absalom",label:"Lovely",file:"/fonts/Absalom.ttf"},{name:"Montserrat",label:"Modern",file:"/fonts/Montserrat-Regular.ttf"},{name:"Altoysitalic",label:"Mountain",file:"/fonts/Altoysitalic_personal_only.ttf"},{name:"BigShouldersDisplay",label:"Paradise",file:"/fonts/BigShouldersDisplay-Regular.ttf"},{name:"Bodoni_72",label:"Radiance",file:"/fonts/Bodoni_72.ttf"},{name:"Alipne",label:"Showcase",file:"/fonts/Alpine.ttf"},{name:"cordia",label:"Spontaneous",file:"/fonts/cordia.ttf"},{name:"Bebas Neue",label:"Statement",file:"/fonts/BebasNeue-Regular.ttf"},{name:"Advert",label:"Sunshine",file:"/fonts/Advert.ttf"},{name:"AdobeNaskh",label:"Urgency",file:"/fonts/AdobeNaskh-Medium.ttf"},{name:"Cochin",label:"Wonder",file:"/fonts/Cochin.ttf"},{name:"Galvji",label:"Vexar",file:"/fonts/Galvji.ttf"}],BLOCK_PILL_STYLES={"Heading (H1)":"text-green border-green bg-green/10","Subheading (H2)":"text-green border-green bg-green/10","Sub-Subheading (H3)":"text-green border-green bg-green/10","List Heading":"text-green border-green bg-green/10",Paragraph:"text-green border-green bg-green/10",FAQ:"text-green border-green bg-green/10",Divider:"text-green border-green bg-green/10","Pro Image":"text-mediaBlue border-mediaBlue bg-mediaBlue/10",Video:"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Audio Player":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Single Offer":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Mini Offer":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Profile Card":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Scroll Arrow":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Offer Banner":"text-brightPurple border-brightPurple bg-brightPurple/10","Stripe Checkout":"text-brightPurple border-brightPurple bg-brightPurple/10","Secure Checkout":"text-brightPurple border-brightPurple bg-brightPurple/10","Verified Reviews":"text-brightPurple border-brightPurple bg-brightPurple/10","Button Url":"text-brightPurple border-brightPurple bg-brightPurple/10",Calendly:"text-newAgeOrange border-newAgeOrange bg-newAgeOrange/15","Countdown Timer":"text-newAgeOrange border-newAgeOrange bg-newAgeOrange/15","Social Links Row":"text-newAgeOrange border-newAgeOrange bg-newAgeOrange/15","Section Container":"text-white-400 border-white/20 bg-white/5","Referral Button":"text-white-400 border-white/20 bg-white/5"},BLOCK_TYPE_TO_LABEL={heading:"Heading (H1)",subheading:"Subheading (H2)",subsubheading:"Sub-Subheading (H3)",list_heading:"List Heading",paragraph:"Paragraph",faq:"FAQ",image:"Pro Image",profile_card:"Profile Card",video:"Video",audio_player:"Audio Player",single_offer:"Single Offer",mini_offer:"Mini Offer",scroll_arrow:"Scroll Arrow",offer_banner:"Offer Banner",stripe_checkout:"Stripe Checkout",secure_checkout:"Secure Checkout",verified_reviews:"Verified Reviews",button_url:"Button Url",calendly:"Calendly",countdown:"Countdown Timer",social_links:"Social Links Row",divider:"Divider",container:"Section Container",referral_button:"Referral Button"},TRUST_ICONS=[{key:"lock",icon:"",label:"Secure"},{key:"shield",icon:"",label:"Protected"},{key:"bolt",icon:"",label:"Instant"},{key:"download",icon:"",label:"Download"},{key:"check",icon:"",label:"Verified"},{key:"star",icon:"",label:"Trusted"},{key:"card",icon:"",label:"Payments"}],SCROLL_ARROW_STYLES={single:{label:"Single Arrow",count:1,stagger:0},double:{label:"Double Arrow",count:2,stagger:.15},triple:{label:"Triple Arrow",count:3,stagger:.18}},Nav=()=>{const{user:et,logout:dt}=useAuth(),kt=useNavigate(),[$t,Tt]=reactExports.useState(!1),Dt=useLocation(),Ft=reactExports.useRef(null),Ut=reactExports.useRef(null),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(!1);reactExports.useEffect(()=>{const nr=ir=>{var lr,or;!((lr=Ut.current)!=null&&lr.contains(ir.target))&&!((or=Ft.current)!=null&&or.contains(ir.target))&&Kt(!1)};return document.addEventListener("pointerdown",nr),()=>document.removeEventListener("pointerdown",nr)},[]),reactExports.useEffect(()=>{const nr=()=>{window.innerWidth>=768&&$t&&Tt(!1)};return window.addEventListener("resize",nr),()=>window.removeEventListener("resize",nr)},[$t]);const Zt=({icon:nr,title:ir,desc:lr,onClick:or,disabled:cr})=>jsxRuntimeExports.jsxs("button",{type:"button",disabled:cr,onClick:()=>{cr||(or(),Kt(!1))},className:`
      w-full flex items-start gap-3 mb-4 rounded-md p-2 text-left transition
      ${cr?"cursor-default opacity-40":"hover:bg-gray-50 cursor-pointer"}
    `,children:[jsxRuntimeExports.jsx("div",{className:`mt-1 ${cr?"text-gray-400":"text-gray-700"}`,children:jsxRuntimeExports.jsx(nr,{className:"h-5 w-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:`text-sm font-semibold ${cr?"text-gray-400":"text-gray-900"}`,children:ir}),jsxRuntimeExports.jsx("div",{className:`text-xs leading-snug ${cr?"text-gray-400":"text-gray-500"}`,children:lr})]})]});function er({title:nr,desc:ir,icon:lr,onClick:or}){return jsxRuntimeExports.jsxs("button",{onClick:or,className:"w-full flex items-start gap-4 py-3 px-3 text-left hover:bg-gray-50 rounded-xl transition",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 flex h-6 w-6 items-center justify-center rounded-lg bg-gray-100",children:lr&&jsxRuntimeExports.jsx(lr,{className:"h-5 w-5 text-gray-700"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-gray-900",children:nr}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:ir})]})]})}const rr=nr=>{const ir=localStorage.getItem("ref_slug");return kt(ir?`${nr}?ref=${ir}`:nr)};return reactExports.useEffect(()=>{$t?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[$t]),["/books","/settings","/notifications","/landing-page-builder","/landing-analytics","/seller-dashboard","/docs/landing-page-builder","/docs/analytics-docs","/docs/analytics","/docs/settings","/docs"].includes(Dt.pathname)||Dt.pathname==="/community"?null:(navLinks.filter(nr=>!(nr.label==="Home"&&Dt.pathname==="/"||nr.label==="Contact Us"&&Dt.pathname==="/contact")),jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50 bg-white border-b border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:nr=>nr.stopPropagation(),className:"flex justify-between md:grid md:grid-cols-3 items-center h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>rr("/"),children:[jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:.6}}),jsxRuntimeExports.jsx("span",{style:{fontFamily:'"PT Serif", serif'},className:"ml-2 text-lg font-semibold text-black tracking-tight whitespace-nowrap",children:"The Messy Attic"})]})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center justify-center gap-8 text-sm font-medium text-gray-700",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{ref:Ft,onClick:nr=>{nr.stopPropagation(),Kt(ir=>!ir)},className:"flex items-center gap-1 text-[16.5px] md:text-[16.5px] lg:text-[16.5px] font-medium text-gray-800 hover:text-black",children:["Products",jsxRuntimeExports.jsx("svg",{className:`h-4 w-4 transition-transform ${Ht?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),jsxRuntimeExports.jsx("div",{ref:Ut,className:`fixed left-0 top-[72px] w-full pt-2
                bg-white border border-gray-200 shadow-2xl z-50
                transition-all duration-150 ease-out
                ${Ht?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-2 pointer-events-none"}`,children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-4 gap-10 p-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold uppercase tracking-wide text-gray-900 mb-6 border-b pb-3",children:"Build & Launch"}),jsxRuntimeExports.jsx(Zt,{icon:LayoutTemplate,title:"Landing Pages",desc:"Create landing pages that sell your books",onClick:()=>rr("/landing")}),jsxRuntimeExports.jsx(Zt,{icon:Users,title:"Communities",desc:"Where writers come to grow",onClick:()=>rr("/community-feature")})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold uppercase tracking-wide text-gray-900 mb-6 border-b pb-3",children:"Scale"}),jsxRuntimeExports.jsx(Zt,{icon:Workflow,title:"Authors Assistant",desc:"Book writing software",onClick:()=>rr("/authors-assistant")})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold uppercase tracking-wide text-gray-900 mb-6 border-b pb-3",children:"Earn & Measure"}),jsxRuntimeExports.jsx(Zt,{icon:CreditCard,title:"Payments",desc:"Accept and track revenue",onClick:()=>rr("/stripe-payments")}),jsxRuntimeExports.jsx(Zt,{icon:ChartColumn,title:"Growth & Analytics",desc:"Performance and insights",onClick:()=>rr("/analytics")})]})]})})]})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center justify-end relative",children:et?jsxRuntimeExports.jsxs("div",{className:"relative ml-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Jt(nr=>!nr),className:"flex items-center gap-2 text-sm font-medium text-gray-800 hover:text-black",children:[jsxRuntimeExports.jsx(User,{className:"h-4 w-4"}),"Account",jsxRuntimeExports.jsx("svg",{className:`h-4 w-4 transition-transform duration-150 ${Yt?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Yt&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-full mt-2 w-44 rounded-lg border bg-white shadow-lg z-50",onMouseLeave:()=>Jt(!1),children:[jsxRuntimeExports.jsx("button",{onClick:()=>{kt("/community"),Jt(!1)},className:"w-full px-4 py-2 text-left text-sm text-black hover:bg-gray-50",children:"Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(),Jt(!1),kt("/login")},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50",children:"Logout"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>kt("/login"),className:"text-[16.5px] md:text-[16.5px] lg:text-[16.5px] font-medium text-gray-700 hover:text-black px-5",children:"Login"}),jsxRuntimeExports.jsxs("button",{onClick:()=>rr("/signup-community"),className:"relative overflow-hidden px-5 py-2 rounded-full bg-black text-white text-sm font-semibold hover:bg-gray-900 transition",children:[jsxRuntimeExports.jsx("span",{className:`
                    pointer-events-none
                    absolute top-0 left-[-40%]
                    w-[180%] h-full
                    bg-gradient-to-r
                    from-transparent
                    via-white/25
                    to-transparent
                    animate-button-glide
                    `}),jsxRuntimeExports.jsx("span",{className:"relative z-10",children:"Join for Free "})]})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:()=>Tt(!$t),className:"text-black focus:outline-none z-50 relative",children:$t?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze$1,{show:$t,enter:"transition duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-200 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:nr=>jsxRuntimeExports.jsxs("div",{ref:nr,className:"fixed inset-0 z-50 bg-white md:hidden flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[jsxRuntimeExports.jsx("span",{className:"font-extrabold text-lg text-black",children:"The Messy Attic"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[!et&&jsxRuntimeExports.jsx("button",{onClick:()=>{rr("/signup-community"),Tt(!1)},className:"rounded-full bg-black px-4 py-2 text-sm font-bold text-white",children:"Get Started"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt(!1),className:"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center text-xl text-white hover:bg-gray-500 transition",children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-8 overscroll-contain",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-md rounded-3xl border bg-white shadow-xl p-6 space-y-10",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-extrabold tracking-wide mb-4 text-gray-600",children:"BUILD & LAUNCH"}),jsxRuntimeExports.jsx(er,{icon:LayoutTemplate,title:"Landing Pages",desc:"Create landing pages that sell your books",onClick:()=>{rr("/landing"),Tt(!1)}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-extrabold tracking-wide mb-4 text-gray-600",children:"SCALE"}),jsxRuntimeExports.jsx(er,{icon:Users,title:"Communities",desc:"Where writers come to grow",onClick:()=>{rr("/community-feature"),Tt(!1)}}),jsxRuntimeExports.jsx(er,{icon:BookOpen,title:"Authors Assistant",desc:"Book writing software",onClick:()=>{rr("/authors-assistant"),Tt(!1)}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-extrabold tracking-wide mb-4 text-gray-600",children:"EARN & MEASURE"}),jsxRuntimeExports.jsx(er,{icon:CreditCard,title:"Payments & Payouts",desc:"Accept payments with Stripe",onClick:()=>{rr("/stripe-payments"),Tt(!1)}}),jsxRuntimeExports.jsx(er,{icon:ChartColumn,title:"Growth & Analytics",desc:"Track clicks, downloads, and performance",onClick:()=>{rr("/analytics"),Tt(!1)}})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t space-y-3",children:[!et&&jsxRuntimeExports.jsx("button",{onClick:()=>{rr("/login"),Tt(!1)},className:"w-full text-left font-semibold text-gray-700",children:"Log in"}),et&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>{kt("/community"),Tt(!1)},className:"w-full text-left font-semibold text-gray-700",children:"Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(),Tt(!1),kt("/login")},className:"w-full text-left font-semibold text-gray-700",children:"Log out"})]})]})]})})]})})]}))},Landing=()=>{const et=useNavigate(),dt=kt=>{const $t=localStorage.getItem("ref_slug");return et($t?`${kt}?ref=${$t}`:kt)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-white text-black flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-36 relative",children:[jsxRuntimeExports.jsxs(motion.h1,{className:`
           header-landing-font
            text-[36px] sm:text-[48px] md:text-[64px]
            font-semibold
            tracking-tight
            leading-[1.15]
          `,initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.9},children:["A place for writers ",jsxRuntimeExports.jsx("br",{}),"to grow together"]}),jsxRuntimeExports.jsx(motion.p,{style:{fontFamily:'"PT Serif", serif'},className:`
            mt-8
            text-lg sm:text-xl
            text-gray-700
            max-w-2xl
            leading-relaxed
          `,initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:"The Messy Attic is a supportive writing community where drafts are welcomed, feedback is honest, and writers help each other improve. Share your work, read thoughtfully, and grow."}),jsxRuntimeExports.jsxs(motion.div,{className:"mt-12 flex gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:[jsxRuntimeExports.jsx("button",{onClick:()=>dt("/signup-community"),className:`
            px-8 py-4
            rounded-xl
            bg-black text-white
            text-sm font-medium
            hover:bg-gray-900
            transition
          `,children:"Join the community"}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/community-feature"),className:`
            px-8 py-4
            rounded-xl
            border border-gray-300
            text-sm font-medium
            hover:bg-gray-50
            transition
          `,children:"Read how it works"})]})]}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-28",children:[jsxRuntimeExports.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold tracking-tight header-landing-font",children:"What is The Messy Attic?"}),jsxRuntimeExports.jsx("p",{style:{fontFamily:'"PT Serif", serif'},className:"mt-6 text-lg text-gray-700 leading-relaxed",children:"The Messy Attic is a new supportive writing community where writers share work, exchange thoughtful feedback, and grow together. Visibility is earned through real reader engagement."})]}),jsxRuntimeExports.jsx("div",{className:"mt-20 grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[{icon:PenTool,title:"Write without pressure",desc:"Share drafts, ideas, and finished pieces in a space built for depth, honesty, and growth, not performance."},{icon:MessageSquare,title:"Real discussion",desc:"Thoughtful comments and meaningful replies replace shallow reactions. Readers engage. Writers respond."},{icon:Lock,title:"Subscriber-only writing",desc:"Protect your best work behind a paywall. Offer exclusive sections, full essays, or private releases to paying supporters."},{icon:DollarSign,title:"Monetize your voice",desc:"Turn readers into subscribers. Offer free previews and reserve premium content for those who invest in your work."},{icon:TrendingUp,title:"Earned visibility",desc:"Writing rises through real engagement and thoughtful discussion, not algorithms or popularity contests."},{icon:Shield,title:"Intentional community",desc:"Subscription-based access keeps the space focused, respectful, and committed to serious writers."}].map(({icon:kt,title:$t,desc:Tt})=>jsxRuntimeExports.jsxs("div",{className:`
        rounded-2xl
        border border-gray-200
        bg-white
        p-6
        shadow-sm
        transition
        hover:-translate-y-1
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`
            flex h-10 w-10 items-center justify-center
            rounded-md
            border border-gray-200
            text-gray-700
          `,children:jsxRuntimeExports.jsx(kt,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:$t})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 leading-relaxed",children:Tt})]},$t))})]})]})},Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-black/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," The Messy Attic. All rights reserved"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$2,{to:"/terms",className:"hover:text-black transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$2,{to:"/privacy-policy",className:"hover:text-black transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$2,{to:"/cookie-policy",className:"hover:text-black transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$2,{to:"/refund-policy",className:"hover:text-black transition-colors",children:"Refunds"}),jsxRuntimeExports.jsx("span",{children:"|"})]})})]})});function LoginPage(){const{login:et,saveAuth:dt}=useAuth(),kt=useNavigate(),$t=useLocation(),[Tt,Dt]=reactExports.useState({email:"",password:""}),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(""),[Zt,er]=reactExports.useState(!1),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(""),[lr,or]=reactExports.useState(""),[cr,dr]=reactExports.useState(!1);reactExports.useEffect(()=>{const Mr=new URLSearchParams($t.search).get("ref");Mr&&localStorage.setItem("ref_slug",Mr)},[$t.search]);const ur=_r=>{Dt({...Tt,[_r.target.name]:_r.target.value})},pr=async _r=>{var Mr,Pr;_r.preventDefault(),Ut(!0),Jt("");try{const Or=await et(Tt.email,Tt.password);if(Or!=null&&Or.requires2FA){or(Or.twofaToken),sr(!0),Ut(!1);return}kt("/community")}catch(Or){(Pr=(Mr=Or.response)==null?void 0:Mr.data)!=null&&Pr.message?Jt(Or.response.data.message):Jt("Login failed. Please try again later.")}finally{Ut(!1)}};function mr(_r){return btoa(String.fromCharCode(...new Uint8Array(_r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const jr=async()=>{try{const{email:_r}=Tt;if(!_r){Jt("Enter your email first to use Passkey login.");return}const{data:Mr}=await axiosInstance.post("/auth/webauthn/login-options",{email:_r}),Pr=await navigator.credentials.get({publicKey:{...Mr,challenge:Uint8Array.from(atob(Mr.challenge.replace(/-/g,"+").replace(/_/g,"/")),kr=>kr.charCodeAt(0)),allowCredentials:Mr.allowCredentials.map(kr=>({...kr,id:Uint8Array.from(atob(kr.id.replace(/-/g,"+").replace(/_/g,"/")),Tr=>Tr.charCodeAt(0))}))}}),{data:Or}=await axiosInstance.post("/auth/webauthn/login-verify",{email:_r,assertionResp:{id:Pr.id,rawId:mr(Pr.rawId),type:Pr.type,response:{authenticatorData:mr(Pr.response.authenticatorData),clientDataJSON:mr(Pr.response.clientDataJSON),signature:mr(Pr.response.signature),userHandle:Pr.response.userHandle?mr(Pr.response.userHandle):null}}});Or.success?(dt(Or.user,Or.accessToken,Or.refreshToken),kt("/community")):Jt("Passkey login failed. Try again.")}catch(_r){console.error("Passkey login error:",_r),Jt("Passkey login failed.")}},Rr=async()=>{if(!nr.trim()){Jt("Enter the 6-digit code first.");return}dr(!0),Jt("");try{const _r=await axiosInstance.post("https://themessyattic.com/api/auth/user/verify-login-2fa",{token:nr,twofaToken:lr});_r.data.success?(dt(_r.data.user,_r.data.accessToken,_r.data.refreshToken),kt("/community")):Jt("Invalid 2FA code. Try again.")}catch(_r){console.error("2FA verify error:",_r),Jt("Invalid or expired 2FA code.")}finally{dr(!1)}},br=()=>{const _r=localStorage.getItem("ref_slug");kt(_r?`/plans?ref=${_r}`:"/plans")};return reactExports.useEffect(()=>{if(Yt){er(!1);const _r=setTimeout(()=>er(!0),4e3),Mr=setTimeout(()=>Jt(""),5e3);return()=>{clearTimeout(_r),clearTimeout(Mr)}}},[Yt]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsx("div",{className:"flex items-start gap-3 mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Sign in to your account"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["New to The Messy Attic?"," ",jsxRuntimeExports.jsx("button",{onClick:br,className:"font-semibold hover:underline",children:"Sign Up"})]})]})}),Yt&&jsxRuntimeExports.jsx("div",{className:`bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Zt?"opacity-0":"opacity-100"}`,children:Yt}),rr?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Two-Factor Authentication"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the 6-digit code from your Authenticator app."}),jsxRuntimeExports.jsx("input",{type:"text",value:nr,onChange:_r=>ir(_r.target.value),placeholder:"123456",maxLength:"6",className:`
                w-32 text-center py-2 px-3 rounded-md
                bg-white border border-gray-300
                text-gray-900
                focus:ring-2 focus:ring-black/10 outline-none mb-4
              `}),jsxRuntimeExports.jsx("button",{onClick:Rr,disabled:cr,className:`
                w-full bg-black text-white
                font-semibold py-2 rounded-lg
                hover:opacity-90 transition
              `,children:cr?"Verifying...":"Verify Code"})]}):jsxRuntimeExports.jsxs("form",{onSubmit:pr,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Tt.email,onChange:ur,placeholder:"Email Address",required:!0,className:`
                w-full h-[48px] px-4 py-3 rounded-lg
                bg-white
                border border-gray-300
                text-gray-900
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black 
              `}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:Ht?"text":"password",name:"password",value:Tt.password,onChange:ur,placeholder:"Password",required:!0,className:`
                  w-full h-[48px] px-4 py-3 pr-12 rounded-lg
                  bg-white
                  border border-gray-300
                  text-gray-900
                  placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
                `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Kt(!Ht),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":Ht?"Hide password":"Show password",children:Ht?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ft,className:`
                w-full bg-black text-white
                font-semibold py-3 rounded-lg
                hover:opacity-90 transition
              `,children:Ft?"Logging In...":"Log In"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:jr,className:`
                w-full mt-2
                bg-gray-100 text-gray-900
                font-semibold py-3 rounded-lg
                border border-gray-300
                hover:bg-gray-200 transition
              `,children:"Sign in with Passkey"})]}),!rr&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"hover:underline",children:"Forgot Password?"})})})]})})})}function Contact(){const[et,dt]=reactExports.useState({name:"",email:"",subject:"",message:""}),[kt,$t]=reactExports.useState(!1),Tt=Ft=>{dt({...et,[Ft.target.name]:Ft.target.value})},Dt=async Ft=>{Ft.preventDefault(),$t(!0);try{await axiosInstance.post("/support/contact",et),y$4.success(" Message sent! We'll get back to you soon.",{position:"top-center"}),dt({name:"",email:"",subject:"",message:""})}catch(Ut){console.error(Ut),y$4.error(" Something went wrong. Please try again later.",{position:"top-center"})}finally{$t(!1)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Have questions or need help? Our support team typically responds within 24 to 48 hours."})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:et.name,onChange:Tt,placeholder:"Your Name",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:Tt,placeholder:"Email Address",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:et.subject,onChange:Tt,placeholder:"Subject (optional)",className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("textarea",{name:"message",value:et.message,onChange:Tt,placeholder:"Write your message...",rows:5,required:!0,className:`
              w-full px-4 py-3 rounded-lg resize-none
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:kt,className:`
              w-full bg-black text-white
              font-semibold py-3 rounded-lg
              hover:opacity-90 transition
            `,children:kt?"Sending...":"Send Message"})]})]})})})}function PlanDetailsModal({plan:et,onClose:dt}){if(!et)return null;reactExports.useEffect(()=>{const Dt=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.paddingRight=`${Dt}px`,()=>{document.body.style.overflow="",document.body.style.paddingRight=""}},[]);const kt={basic:{title:"Basic Creator",content:`
The Basic Creator plan gives you free access to The Messy Attic community.

Publish posts and short fragments, join discussions, and connect with other writers in a focused, algorithm-free environment. This plan is ideal for writers who want to share their work, build visibility, and participate in the community without any pressure to monetize.

Upgrade anytime when youre ready to enable paid subscriptions or sell your work professionally.`},business_basic_builder:{title:"Business Basic Builder",content:`
The Business Basic Builder plan is designed for writers who are ready to monetize their work and establish a professional presence.

This plan includes:
 Free access to the community  
 Set your own subscription prices  
 Monthly, annual, and VIP Founder tiers  
 Subscriber-only posts and fragments  
 Direct relationship with your readers  
 Landing page builder to sell books and writing  
 Custom domain support  

Business Basic gives you the tools to sell your work, grow a paid audience, and own your platform without unnecessary complexity. Upgrade anytime when youre ready to scale further.`},author:{title:"Authors Assistant",content:`
Transform your writing with intelligent support, not automation.
Authors Assistant is a complete book creation and publishing system designed for serious writers. It helps you plan structure, develop chapters, revise with intention, and move deliberately from draft to finished work. Write and edit up to 750 pages, per book, with full control over revisions, section locking, and finalization. When your book is ready, combine all chapters into a single publishable EPUB, compatible with Kindle and major ebook platforms. Your voice stays intact, your thinking stays clear, and your work ends as a finished, authoritative book, not an endless draft.
`},business_builder_pack:{title:"Pro Business Builder Pack",content:`
The Pro Business Builder Pack is built for writers and creators who want full control over how their work is presented, sold, and scaled.

This plan includes:
 Everything in Business Basic Builder  
 Unlimited paid subscribers  
 Advanced landing page layouts and themes  
 Custom domains and professional branding  
 Deeper analytics and engagement insights  
 Priority support  

The Business Builder Pack is designed for creators running their writing as a serious business, offering maximum flexibility, ownership, and room to grow without platform limitations.`}},{title:$t,content:Tt}=kt[et]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-start sm:items-center justify-center p-4 sm:p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#141414] border border-gray-700 rounded-2xl w-full max-w-lg relative max-h-[90vh] flex flex-col shadow-2xl shadow-black/40 mt-6 sm:mt-0",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition z-10",children:jsxRuntimeExports.jsx(X$5,{size:22})}),jsxRuntimeExports.jsx("div",{className:"px-8 pt-8 pb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-center text-white",children:$t})}),jsxRuntimeExports.jsx("div",{className:"px-8 pb-6 overflow-y-auto text-gray-300 whitespace-pre-line leading-relaxed",children:Tt}),jsxRuntimeExports.jsx("div",{className:"px-8 pb-6 pt-4 text-center border-t border-gray-800",children:jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-6 py-2 bg-blue rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[et,dt]=reactExports.useState(null),[kt,$t]=reactExports.useState(null),Tt=useLocation(),{user:Dt}=useAuth();reactExports.useEffect(()=>{const Ht=new URLSearchParams(Tt.search).get("ref");if(Ht){localStorage.setItem("ref_slug",Ht);return}},[Tt]);const Ft=async Ut=>{if(!Dt||!Dt.id){y$4.warning("Create a free account to continue. No credit card required.");return}try{dt(Ut);const Ht=localStorage.getItem("accessToken");if(Ut==="author"){const Zt=await axiosInstance.post("/seller-checkout/create-authors-assistant-subscription",{},{headers:{Authorization:`Bearer ${Ht}`}});window.location.href=Zt.data.url;return}let Kt=Ut,Yt=null;Ut==="business_builder_pack_annual"?(Kt="business_builder_pack",Yt="annual"):Ut==="business_builder_pack_monthly"?(Kt="business_builder_pack",Yt="monthly"):Ut==="business_basic_builder"&&(Kt="business_basic_builder",Yt="annual");const Jt=await axiosInstance.post("/checkout",{userId:Dt.id,productType:Kt,billingCycle:Yt},{headers:{Authorization:`Bearer ${Ht}`}});window.location.href=Jt.data.url}catch(Ht){console.error("Checkout error:",Ht),y$4.error("Failed to start checkout session"),dt(null)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#fff] text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-10",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-center design-text text-black mt-20",children:"Pricing"}),jsxRuntimeExports.jsxs("p",{className:"text-black mt-4 text-center max-w-xl",children:["The community is always free.",jsxRuntimeExports.jsx("br",{})," Upgrade when youre ready to monetize your work."]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl mx-auto place-items-stretch",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/80 p-10 text-left hover:border-green/50 transition",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-white design-text",children:"Community (free)"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white mb-6",children:"$0"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2 mb-6",children:[jsxRuntimeExports.jsx("li",{children:" Publish posts and short fragments"}),jsxRuntimeExports.jsx("li",{children:" Participate in the community feed"}),jsxRuntimeExports.jsx("li",{children:" Comment and engage in discussion"}),jsxRuntimeExports.jsx("li",{children:" Create a public writing profile"}),jsxRuntimeExports.jsx("li",{children:" Join for free, no credit card"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-8",children:"Set your own subscription prices anytime. We dont control your rates."}),Dt?(Dt==null?void 0:Dt.has_free_magnet)===1?jsxRuntimeExports.jsx("button",{disabled:!0,className:"mt-auto w-full py-3 text-lg font-semibold rounded-lg bg-gray-700 text-gray-300 cursor-not-allowed",children:"Trial Active"}):jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"mt-auto w-full py-3 text-lg font-semibold rounded-lg bg-gradient-to-r from-green to-royalPurple text-black hover:opacity-90 transition",children:"Go to Dashboard"}):jsxRuntimeExports.jsx("button",{onClick:()=>{const Ut=localStorage.getItem("ref_slug");window.location.href=Ut?`/sign-up?ref=${Ut}`:"/sign-up"},className:"mt-auto w-full py-3 text-lg font-semibold rounded-lg bg-green text-black hover:opacity-90 transition",children:"Join the Community"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/80 p-10 text-left hover:border-pink-400 transition",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-pink-400 design-text",children:"Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Active subscription  Up to 750 pages per book"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-pink-400",children:["$49.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-medium text-gray-400",children:"/month"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Cancel anytime  Access ends when subscription ends"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 text-sm leading-relaxed",children:"A structured writing and publishing system designed to help you plan, write, finalize, and publish a full-length book, while preserving your unique voice and intent."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-pink-400 mb-2",children:"Write with confidence"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Generate chapters and structured sections"}),jsxRuntimeExports.jsx("li",{children:" Rewrite, expand, or shorten any passage"}),jsxRuntimeExports.jsx("li",{children:" Save unlimited revisions without losing progress"}),jsxRuntimeExports.jsx("li",{children:" Continue writing with full book-level context"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-pink-400 mb-2",children:"Maintain continuity"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Up to 750 pages across a single book project"}),jsxRuntimeExports.jsx("li",{children:" Import existing drafts, notes, or research"}),jsxRuntimeExports.jsx("li",{children:" Edit chapters individually without breaking structure"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-pink-400 mb-2",children:"Publish professionally"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Finalize and lock your completed book"}),jsxRuntimeExports.jsx("li",{children:" Combine all chapters into a single EPUB"}),jsxRuntimeExports.jsx("li",{children:" Publish EPUBs compatible with Kindle and major platforms"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("author"),disabled:et==="author",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg transition-all ${et==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-pink-500 to-rose-400 text-white hover:opacity-90"}`,children:et==="author"?"Redirecting...":"Start Writing with Authors Assistant"}),jsxRuntimeExports.jsx("button",{onClick:()=>$t("author"),className:"text-pink-400 text-sm hover:underline mt-3 text-center",children:"Learn more about Authors Assistant"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/80 p-10 text-left hover:border-emerald-400/50 transition",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-white design-text",children:"Business Basic"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"(Annual)"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white",children:"$65"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Billed annually ($780/year)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-6",children:"Best for writers who want a professional home to sell books, set their own subscription tiers, and own their audience."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Whats included"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Free access to the community"}),jsxRuntimeExports.jsx("li",{children:" Set your own subscription prices"}),jsxRuntimeExports.jsx("li",{children:" Monthly, annual, and VIP Founder tiers"}),jsxRuntimeExports.jsx("li",{children:" Subscriber-only posts and fragments"}),jsxRuntimeExports.jsx("li",{children:" Direct relationship with your readers"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-2",children:"Professional tools"}),jsxRuntimeExports.jsxs("ul",{className:"text-[13px] text-gray-500 space-y-1 opacity-70",children:[jsxRuntimeExports.jsx("li",{children:" Landing page builder to sell books"}),jsxRuntimeExports.jsx("li",{children:" Custom domain support"}),jsxRuntimeExports.jsx("li",{children:" Clean, professional layouts"}),jsxRuntimeExports.jsx("li",{children:" Shareable links for posts and pages"}),jsxRuntimeExports.jsx("li",{children:" Simple analytics for growth"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("business_basic_builder"),disabled:et==="business_basic_builder",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg border transition-all ${et==="business_basic_builder"?"opacity-50 cursor-not-allowed bg-gray-700 border-gray-700":"text-white border-blue-400 hover:opacity-90 shadow-lg shadow-blue-400/30"}`,children:et==="business_basic_builder"?"Redirecting...":"Start with Business Basic"}),jsxRuntimeExports.jsx("button",{onClick:()=>$t("business_basic_builder"),className:"mt-4 text-sm text-gray-400 hover:text-white hover:underline text-center",children:"Learn more about this plan"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col rounded-2xl border border-blue-500/40 bg-[#111]/90 p-10 text-left shadow-xl shadow-blue-500/10 transition hover:border-blue-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-blue-400 design-text",children:"Business Builder"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"(Annual  Full Platform Access)"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white",children:"$129.99"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Billed annually ($1,560/year)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-6",children:"Built for writers and creators who want to scale paid communities, sell books professionally, and fully own their platform."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-400 mb-2",children:"Everything you need to scale"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Free access to the community"}),jsxRuntimeExports.jsx("li",{children:" Set your own subscription prices"}),jsxRuntimeExports.jsx("li",{children:" Monthly, annual, and VIP Founder tiers"}),jsxRuntimeExports.jsx("li",{children:" Subscriber-only posts and fragments"}),jsxRuntimeExports.jsx("li",{children:" Unlimited paid subscribers"}),jsxRuntimeExports.jsx("li",{children:" Priority support"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-2",children:"Professional tools"}),jsxRuntimeExports.jsxs("ul",{className:"text-[13px] text-gray-500 space-y-1 opacity-75",children:[jsxRuntimeExports.jsx("li",{children:" Landing page builder to sell books"}),jsxRuntimeExports.jsx("li",{children:" Custom domain and branding"}),jsxRuntimeExports.jsx("li",{children:" Advanced layouts and themes"}),jsxRuntimeExports.jsx("li",{children:" Shareable links and pages"}),jsxRuntimeExports.jsx("li",{children:" Deeper analytics and insights"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("business_builder_pack_annual"),disabled:et==="business_builder_pack_annual",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg border transition-all ${et==="business_builder_pack_annual"?"opacity-50 cursor-not-allowed bg-gray-700 border-gray-700":"text-white bg-blue-500 border-blue-500 hover:bg-blue-400 shadow-lg shadow-blue-500/30"}`,children:et==="business_builder_pack_annual"?"Redirecting...":"Build with Business Builder"}),jsxRuntimeExports.jsx("button",{onClick:()=>$t("business_builder_pack"),className:"mt-4 text-sm text-blue-400 hover:underline text-center",children:"See everything included"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/70 p-10 text-left transition hover:border-sky-400/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-white design-text",children:"Business Builder"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Monthly billing  Same features as annual"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white",children:"$199.99"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Billed monthly (12-month commitment)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-6",children:"For writers and creators who want full access to the platform with the flexibility of monthly billing."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-sky-400 mb-2",children:"Full Business Builder access"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Free access to the community"}),jsxRuntimeExports.jsx("li",{children:" Set your own subscription prices"}),jsxRuntimeExports.jsx("li",{children:" Monthly, annual, and VIP Founder tiers"}),jsxRuntimeExports.jsx("li",{children:" Subscriber-only posts and fragments"}),jsxRuntimeExports.jsx("li",{children:" Landing page builder and custom domains"}),jsxRuntimeExports.jsx("li",{children:" Priority support"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-300 mb-8",children:"Prefer the best value? Save significantly with annual billing."}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("business_builder_pack_monthly"),disabled:et==="business_builder_pack_monthly",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg border transition-all ${et==="business_builder_pack_monthly"?"opacity-50 cursor-not-allowed bg-gray-700 border-gray-700":"text-white border-sky-400 hover:bg-sky-400/10"}`,children:et==="business_builder_pack_monthly"?"Redirecting...":"Choose Monthly Billing"}),jsxRuntimeExports.jsx("button",{onClick:()=>$t("business_builder_pack"),className:"mt-4 text-sm text-gray-400 hover:text-white hover:underline text-center",children:"Compare with annual option"})]})]}),kt&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:kt,onClose:()=>$t(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-16 text-center",children:" Secure checkout  powered by Stripe"})]})}const ReactToastify="",quill_snow="",index="";function ForgotPassword(){const[et,dt]=reactExports.useState(""),[kt,$t]=reactExports.useState(!1),Tt=useNavigate();reactExports.useEffect(()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""},[]);const Dt=async Ft=>{var Ut,Ht;if(Ft.preventDefault(),!!et){$t(!0);try{const Kt=await axiosInstance.post("/auth/forgot-password",{email:et});y$4.success(Kt.data.message||"Reset link sent"),dt(""),setTimeout(()=>Tt("/login"),2500)}catch(Kt){y$4.error(((Ht=(Ut=Kt.response)==null?void 0:Ut.data)==null?void 0:Ht.message)||"Error sending reset email")}finally{$t(!1)}}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})]}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot your password?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Enter your email and well send you a reset link."}),jsxRuntimeExports.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",value:et,onChange:Ft=>dt(Ft.target.value),placeholder:"Email Address",required:!0,className:`
                w-full h-[48px] px-4 rounded-lg
                bg-white
                border border-gray-300
                text-gray-900
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
              `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:kt,className:`
                w-full bg-black text-white
                font-semibold py-3 rounded-lg
                hover:opacity-90 transition
              `,children:kt?"Sending...":"Send reset link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>Tt("/login"),className:"font-semibold hover:underline",children:"Back to Login"})]})]})})})}function ResetPassword(){const[et]=useSearchParams(),[dt,kt]=reactExports.useState(""),[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(!1),Kt=useNavigate(),Yt=et.get("token");reactExports.useEffect(()=>{Yt||(y$4.error("Invalid or missing reset token."),Kt("/login"))},[Yt,Kt]);const Jt=async Zt=>{var er,rr;if(Zt.preventDefault(),!dt||!$t)return y$4.error("Please enter and confirm your new password.");if(dt!==$t)return y$4.error("Passwords do not match.");Ft(!0);try{const sr=await axiosInstance.post("/auth/reset-password",{token:Yt,newPassword:dt});y$4.success(sr.data.message||"Password reset successful!"),Ht(!0),setTimeout(()=>Kt("/login"),3500)}catch(sr){console.error("Reset password error:",sr),y$4.error(((rr=(er=sr.response)==null?void 0:er.data)==null?void 0:rr.message)||"Error resetting password.")}finally{Ft(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:Ut?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},transition:{duration:.4},className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Password updated"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been reset successfully. You can now sign in with your new password."}),jsxRuntimeExports.jsx("button",{onClick:()=>Kt("/login"),className:`
                  w-full bg-black text-white
                  font-semibold py-3 rounded-lg
                  hover:opacity-90 transition
                `,children:"Go to Login"})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})]}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset your password"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Enter a new password for your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:Jt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"password",value:dt,onChange:Zt=>kt(Zt.target.value),placeholder:"New password",required:!0,className:`
                    w-full h-[48px] px-4 rounded-lg
                    bg-white
                    border border-gray-300
                    text-gray-900
                    placeholder-gray-400
                    focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
                  `}),jsxRuntimeExports.jsx("input",{type:"password",value:$t,onChange:Zt=>Tt(Zt.target.value),placeholder:"Confirm new password",required:!0,className:`
                    w-full h-[48px] px-4 rounded-lg
                    bg-white
                    border border-gray-300
                    text-gray-900
                    placeholder-gray-400
                    focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
                  `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Dt,className:`
                    w-full bg-black text-white
                    font-semibold py-3 rounded-lg
                    hover:opacity-90 transition
                  `,children:Dt?"Resetting...":"Reset password"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 text-center mt-6",children:["Remembered your password?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>Kt("/login"),className:"font-semibold hover:underline",children:"Back to Login"})]})]},"form")})})})}const BookContext=reactExports.createContext();function BookProvider({children:et}){const{accessToken:dt}=useAuth(),[kt,$t]=reactExports.useState([]),[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState(null),Ht=async()=>{if(dt)try{const Kt=await axios$1.get("https://themessyattic.com/api/books",{headers:{Authorization:`Bearer ${dt}`}});$t(Kt.data)}catch(Kt){console.error("Error fetching books:",Kt),Ut(Kt)}finally{Dt(!1)}};return reactExports.useEffect(()=>{if(!dt)return;Ht();const Kt=setInterval(async()=>{try{const Yt=await axios$1.get("https://themessyattic.com/api/books",{headers:{Authorization:`Bearer ${dt}`}});$t(Jt=>JSON.stringify(Jt)===JSON.stringify(Yt.data)?Jt:Yt.data)}catch(Yt){console.warn("Polling error:",Yt.message)}},5e3);return()=>clearInterval(Kt)},[dt]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:kt,setBooks:$t,fetchBooks:Ht,loading:Tt,error:Ft},children:et})}function useBooks(){return reactExports.useContext(BookContext)}function LoadingState({label:et="Loading your lead magnets..."}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:et})]})}function EmptyState({type:et="magnet"}){const dt=et==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver text-lg max-w-md leading-relaxed italic",children:dt?"You havent written any books yet.":"You havent created any lead magnets yet."}),jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm mt-2",children:"Get started whenever youre ready."})]})}function PaginationControls({currentPage:et,totalPages:dt,onPageChange:kt}){return dt<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:et===1,onClick:()=>kt(et-1),className:`
        px-4 py-2 rounded transition
        bg-gray-200 text-black
        dark:bg-gray-700 dark:text-white
        disabled:opacity-50 disabled:cursor-not-allowed
      `,children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-black dark:text-white",children:["Page ",et," of ",dt]}),jsxRuntimeExports.jsx("button",{disabled:et===dt,onClick:()=>kt(et+1),className:`
        px-4 py-2 rounded transition
        bg-gray-200 text-black
        dark:bg-gray-700 dark:text-white
        disabled:opacity-50 disabled:cursor-not-allowed
      `,children:"Next"})]})}function SupportTab(){const[et,dt]=reactExports.useState(!1),kt=[{q:"What is a lead magnet in Cre8tly Studio?",a:"A lead magnet is a downloadable PDF you create to capture emails or deliver value to your audience. Cre8tly Studio generates a fully designed, ready-to-use PDF based on your prompt, theme, and branding."},{q:"How do I create a lead magnet?",a:"Enter your prompt, choose a theme, optionally upload a logo or link, and click Generate. Cre8tly Studio builds your PDF automatically and saves it to your dashboard."},{q:"How long does it take to generate a PDF?",a:"Most lead magnets are generated within 515 seconds, depending on content length and selected design options."},{q:"Where can I find my generated PDFs?",a:"All completed PDFs are stored in your dashboard under My Lead Magnets. From there you can view, download, or attach them to landing pages."},{q:"Can I create multiple lead magnets?",a:"Yes. You can create multiple lead magnets as long as you have available slots or credits on your plan."},{q:"Can I regenerate an existing PDF?",a:"No. Each lead magnet slot is intended for one finalized PDF. This prevents abuse and ensures consistent system performance. To make changes, youll need to generate a new lead magnet using a new slot."},{q:"Can I use my own branding?",a:"Yes. You can upload your logo and add your own links. Themes automatically adapt to your branding for a consistent look."},{q:"What are Pro Covers?",a:"Pro Covers lets you upload a custom cover image that becomes the first page of your PDF. It also includes access to thousands of royalty-free Unsplash images you can use as covers or backgrounds. This feature is available only with the Business Basic and Business Builder plan."},{q:"What happens if I reach my plan limit?",a:"If you hit your limit, youll be prompted to upgrade or purchase additional credits. Your existing PDFs remain accessible at all times."},{q:"Can I upgrade my plan later?",a:"Yes. You can upgrade your plan or buy more credits directly from your dashboard at any time."},{q:"Do you offer refunds?",a:"Because Cre8tly Studio delivers instant, custom-generated digital content, refunds are not available after generation. If you encounter a technical issue or duplicate charge, contact support and well help resolve it."},{q:"How do I contact support?",a:"You can reach our support team through the Contact page. Responses typically arrive within 2448 hours, Monday through Friday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>dt(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),et&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:$t=>$t.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:kt.map(($t,Tt)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:$t.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:$t.a})]},Tt))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$2,{to:"/docs",className:"text-green font-medium hover:underline",children:"Need more help? Visit our Docs "})})]})})]})}function GenerationOverlay({visible:et,type:dt="lead",onClose:kt}){const $t=dt==="book"?"book":dt==="lead"?"lead magnet":"content";return et?jsxRuntimeExports.jsx("div",{className:`
      fixed inset-0 z-[9999]
      flex items-center justify-center
      bg-black/80
      backdrop-blur-sm
      px-6
    `,children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-md rounded-3xl
        bg-[#0b0b0b]
        border border-white/15
        px-10 py-9
        text-center
        shadow-[0_30px_90px_rgba(0,0,0,0.7)]
      `,children:[jsxRuntimeExports.jsx("h2",{className:"text-white text-[22px] font-semibold tracking-tight mb-3",children:"In progress"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-[15px] leading-relaxed mb-1",children:["Were creating your ",$t,"."]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-[14px] leading-relaxed mb-8",children:"Youll be notified by email when its ready."}),jsxRuntimeExports.jsx("button",{onClick:kt,className:`
          inline-flex items-center justify-center
          px-7 py-2.5
          rounded-full
          bg-green
          text-black
          text-[14px] font-medium
          transition
          hover:opacity-90
          focus:outline-none
          focus:ring-2 focus:ring-green/40
        `,children:"Continue"})]})}):null}function OutOfSlotsModal({open:et,onClose:dt,context:kt="books"}){if(!et)return null;const $t={books:{title:"Book Limit Reached",message:`You can only have 3 active books at one time. Finish or archive an existing book
 to create a new one.`}},{title:Tt,message:Dt}=$t[kt];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:Tt}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:Dt}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:"Close"})]})]})})}const scriptRel="modulepreload",assetsURL=function(et){return"/"+et},seen={},__vitePreload=function et(dt,kt,$t){if(!kt||kt.length===0)return dt();const Tt=document.getElementsByTagName("link");return Promise.all(kt.map(Dt=>{if(Dt=assetsURL(Dt),Dt in seen)return;seen[Dt]=!0;const Ft=Dt.endsWith(".css"),Ut=Ft?'[rel="stylesheet"]':"";if(!!$t)for(let Yt=Tt.length-1;Yt>=0;Yt--){const Jt=Tt[Yt];if(Jt.href===Dt&&(!Ft||Jt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${Dt}"]${Ut}`))return;const Kt=document.createElement("link");if(Kt.rel=Ft?"stylesheet":scriptRel,Ft||(Kt.as="script",Kt.crossOrigin=""),Kt.href=Dt,document.head.appendChild(Kt),Ft)return new Promise((Yt,Jt)=>{Kt.addEventListener("load",Yt),Kt.addEventListener("error",()=>Jt(new Error(`Unable to preload CSS for ${Dt}`)))})})).then(()=>dt()).catch(Dt=>{const Ft=new Event("vite:preloadError",{cancelable:!0});if(Ft.payload=Dt,window.dispatchEvent(Ft),!Ft.defaultPrevented)throw Dt})};function UnsplashImagePicker({onSelect:et}){const[dt,kt]=reactExports.useState(""),[$t,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(1),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),Jt=reactExports.useRef(null);reactExports.useEffect(()=>{dt.trim()===""&&(Tt([]),Ft(1),Yt(!1))},[dt]);async function Zt(rr=1,sr=!1){if(dt.trim()){Ht(!0);try{const nr=await axiosInstance.get(`https://themessyattic.com/api/unsplash/search?query=${encodeURIComponent(dt)}&per_page=30&page=${rr}`),ir=nr.data.results||nr.data;(!ir||ir.length===0)&&y$4.info("No results found",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"}),Tt(lr=>sr?[...lr,...ir]:ir),Yt(ir.length>0),Ft(rr)}catch(nr){console.error("Unsplash fetch failed:",nr),y$4.error("Failed to fetch images. Please try again.",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"})}finally{Ht(!1)}}}const er=()=>{Tt([]),Ft(1),Zt(1,!1)};return reactExports.useEffect(()=>{if(!Jt.current)return;const rr=new IntersectionObserver(sr=>{sr[0].isIntersecting&&Kt&&!Ut&&Zt(Dt+1,!0)});return rr.observe(Jt.current),()=>rr.disconnect()},[Kt,Ut,Dt,dt]),jsxRuntimeExports.jsxs("div",{className:`
  space-y-4
  bg-dashboard-sidebar-light
  dark:bg-dashboard-sidebar-dark
  p-4
  rounded-lg
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
`,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx("input",{value:dt,onChange:rr=>kt(rr.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:`
          w-full
          p-3
          rounded-lg
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          placeholder-dashboard-muted-light
          dark:placeholder-dashboard-muted-dark
          `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:er,disabled:Ut,className:`
          w-full
          sm:w-auto
          px-4
          py-3
          rounded-lg
          font-bold
          bg-dashboard-hover-light
          dark:bg-dashboard-hover-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          hover:bg-green
          hover:text-dashboard-bg-dark
          transition
          disabled:opacity-60
          disabled:cursor-not-allowed
          `,children:Ut?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:`grid
    grid-cols-2
    sm:grid-cols-3
    md:grid-cols-4
    gap-3
    overflow-y-auto
    relative
    max-h-[45vh]
    sm:max-h-[400px]`,children:[$t.map(rr=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>et(rr.urls.full,rr),children:[jsxRuntimeExports.jsx("img",{src:rr.urls.small,alt:rr.alt_description,className:`rounded-lg w-full h-32
    sm:h-40 object-cover group-hover:opacity-75 transition`}),jsxRuntimeExports.jsx("span",{className:`
              absolute bottom-1 left-1
              text-xs
              px-1
              rounded
              bg-dashboard-bg-dark/70
              text-dashboard-text-dark
            `,children:rr.user.name})]},rr.id)),Kt&&!Ut&&jsxRuntimeExports.jsx("div",{ref:Jt,className:"col-span-full h-8"}),Ut&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:`
              w-6 h-6
              border-2
              border-dashboard-border-light
              dark:border-dashboard-border-dark
              border-t-green
              rounded-full
              animate-spin
            `})})]})]})}function CoverUpload({setCover:et}){const[dt,kt]=reactExports.useState(null),[$t,Tt]=reactExports.useState(null),{user:Dt}=useAuth(),Ft=reactExports.useRef(null),Ut=useNavigate(),Ht=!(Dt!=null&&Dt.pro_covers),Kt=er=>{var ir;const rr=(ir=er.target.files)==null?void 0:ir[0];if(!rr)return;const sr=10;if(rr.size>sr*1024*1024){y$4.error(`File too large. Maximum ${sr} MB allowed.`);return}const nr=new FileReader;nr.onloadend=()=>{const lr=nr.result;et(lr),kt(lr),Tt(null)},nr.readAsDataURL(rr)},Yt=()=>Ut("/plans"),Jt=(er,rr)=>{et(er),kt(rr.urls.small),Tt({name:rr.user.name,profile:rr.user.links.html}),y$4.success("Cover image selected!")},Zt=()=>{et(null),kt(null),Tt(null),Ft.current&&(Ft.current.value=""),y$4.info("Cover image removed")};return jsxRuntimeExports.jsxs("div",{className:`
  relative mt-6
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
  rounded-xl p-4
  bg-dashboard-sidebar-light
  dark:bg-dashboard-sidebar-dark
  overflow-hidden
`,children:[Ht&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Yt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Upgrade to Unlock"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[jsxRuntimeExports.jsxs("label",{className:`block font-semibold text-lg tracking-wide
        text-dashboard-text-light
        dark:text-dashboard-text-dark`,children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:`text-sm ml-1
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark`,children:"(Max 667  1000)"})]}),jsxRuntimeExports.jsx("span",{className:`
  self-start

  text-[11px]
  px-3 py-1
  rounded-full
  bg-dashboard-hover-light
dark:bg-dashboard-hover-dark
text-dashboard-muted-light
dark:text-dashboard-muted-dark
  border border-[#7c3aed]/60
  tracking-wide
  uppercase
  shadow-[inset_0_0_0_1px_rgba(124,58,237,0.15)]
  ${Ht?"opacity-50":""}
`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:Ft,type:"file",accept:"image/*",onChange:Kt,className:"hidden",disabled:Ht}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!Ht&&Ft.current.click(),disabled:Ht,className:`w-full sm:w-auto px-5 py-3 rounded-md font-semibold text-sm shadow-md transition 
    flex items-center justify-center gap-2
    ${Ht?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed":"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-green hover:text-dashboard-bg-dark"}`,children:[jsxRuntimeExports.jsx(Image$2,{size:16})," Choose File"]}),!Ht&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:Jt})})}),dt&&!Ht&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:dt,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:`text-xs mt-1
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark`,children:"This cover will appear before your first page."}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Zt,className:`
    mt-3
    w-full
    sm:w-auto
    text-sm
    font-semibold
    text-red-500
    border
    border-red-400/30
    px-4
    py-2
    rounded-lg
    hover:bg-red-500/10
    hover:text-red-300
    transition
  `,children:"Remove cover image"}),$t&&jsxRuntimeExports.jsxs("p",{className:`text-[10px] mt-1 italic
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:$t.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-blue hover:opacity-80",children:$t.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue hover:opacity-80",children:"Unsplash"})]})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$7(et,dt){return et===dt&&(et!==0||1/et===1/dt)||et!==et&&dt!==dt}var objectIs$1=typeof Object.is=="function"?Object.is:is$7,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(et,dt){var kt=dt(),$t=useState({inst:{value:kt,getSnapshot:dt}}),Tt=$t[0].inst,Dt=$t[1];return useLayoutEffect(function(){Tt.value=kt,Tt.getSnapshot=dt,checkIfSnapshotChanged(Tt)&&Dt({inst:Tt})},[et,kt,dt]),useEffect$1(function(){return checkIfSnapshotChanged(Tt)&&Dt({inst:Tt}),et(function(){checkIfSnapshotChanged(Tt)&&Dt({inst:Tt})})},[et]),useDebugValue$1(kt),kt}function checkIfSnapshotChanged(et){var dt=et.getSnapshot;et=et.value;try{var kt=dt();return!objectIs$1(et,kt)}catch{return!0}}function useSyncExternalStore$1(et,dt){return dt()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(et){this.content=et}OrderedMap.prototype={constructor:OrderedMap,find:function(et){for(var dt=0;dt<this.content.length;dt+=2)if(this.content[dt]===et)return dt;return-1},get:function(et){var dt=this.find(et);return dt==-1?void 0:this.content[dt+1]},update:function(et,dt,kt){var $t=kt&&kt!=et?this.remove(kt):this,Tt=$t.find(et),Dt=$t.content.slice();return Tt==-1?Dt.push(kt||et,dt):(Dt[Tt+1]=dt,kt&&(Dt[Tt]=kt)),new OrderedMap(Dt)},remove:function(et){var dt=this.find(et);if(dt==-1)return this;var kt=this.content.slice();return kt.splice(dt,2),new OrderedMap(kt)},addToStart:function(et,dt){return new OrderedMap([et,dt].concat(this.remove(et).content))},addToEnd:function(et,dt){var kt=this.remove(et).content.slice();return kt.push(et,dt),new OrderedMap(kt)},addBefore:function(et,dt,kt){var $t=this.remove(dt),Tt=$t.content.slice(),Dt=$t.find(et);return Tt.splice(Dt==-1?Tt.length:Dt,0,dt,kt),new OrderedMap(Tt)},forEach:function(et){for(var dt=0;dt<this.content.length;dt+=2)et(this.content[dt],this.content[dt+1])},prepend:function(et){return et=OrderedMap.from(et),et.size?new OrderedMap(et.content.concat(this.subtract(et).content)):this},append:function(et){return et=OrderedMap.from(et),et.size?new OrderedMap(this.subtract(et).content.concat(et.content)):this},subtract:function(et){var dt=this;et=OrderedMap.from(et);for(var kt=0;kt<et.content.length;kt+=2)dt=dt.remove(et.content[kt]);return dt},toObject:function(){var et={};return this.forEach(function(dt,kt){et[dt]=kt}),et},get size(){return this.content.length>>1}};OrderedMap.from=function(et){if(et instanceof OrderedMap)return et;var dt=[];if(et)for(var kt in et)dt.push(kt,et[kt]);return new OrderedMap(dt)};function findDiffStart(et,dt,kt){for(let $t=0;;$t++){if($t==et.childCount||$t==dt.childCount)return et.childCount==dt.childCount?null:kt;let Tt=et.child($t),Dt=dt.child($t);if(Tt==Dt){kt+=Tt.nodeSize;continue}if(!Tt.sameMarkup(Dt))return kt;if(Tt.isText&&Tt.text!=Dt.text){for(let Ft=0;Tt.text[Ft]==Dt.text[Ft];Ft++)kt++;return kt}if(Tt.content.size||Dt.content.size){let Ft=findDiffStart(Tt.content,Dt.content,kt+1);if(Ft!=null)return Ft}kt+=Tt.nodeSize}}function findDiffEnd(et,dt,kt,$t){for(let Tt=et.childCount,Dt=dt.childCount;;){if(Tt==0||Dt==0)return Tt==Dt?null:{a:kt,b:$t};let Ft=et.child(--Tt),Ut=dt.child(--Dt),Ht=Ft.nodeSize;if(Ft==Ut){kt-=Ht,$t-=Ht;continue}if(!Ft.sameMarkup(Ut))return{a:kt,b:$t};if(Ft.isText&&Ft.text!=Ut.text){let Kt=0,Yt=Math.min(Ft.text.length,Ut.text.length);for(;Kt<Yt&&Ft.text[Ft.text.length-Kt-1]==Ut.text[Ut.text.length-Kt-1];)Kt++,kt--,$t--;return{a:kt,b:$t}}if(Ft.content.size||Ut.content.size){let Kt=findDiffEnd(Ft.content,Ut.content,kt-1,$t-1);if(Kt)return Kt}kt-=Ht,$t-=Ht}}class Fragment{constructor(dt,kt){if(this.content=dt,this.size=kt||0,kt==null)for(let $t=0;$t<dt.length;$t++)this.size+=dt[$t].nodeSize}nodesBetween(dt,kt,$t,Tt=0,Dt){for(let Ft=0,Ut=0;Ut<kt;Ft++){let Ht=this.content[Ft],Kt=Ut+Ht.nodeSize;if(Kt>dt&&$t(Ht,Tt+Ut,Dt||null,Ft)!==!1&&Ht.content.size){let Yt=Ut+1;Ht.nodesBetween(Math.max(0,dt-Yt),Math.min(Ht.content.size,kt-Yt),$t,Tt+Yt)}Ut=Kt}}descendants(dt){this.nodesBetween(0,this.size,dt)}textBetween(dt,kt,$t,Tt){let Dt="",Ft=!0;return this.nodesBetween(dt,kt,(Ut,Ht)=>{let Kt=Ut.isText?Ut.text.slice(Math.max(dt,Ht)-Ht,kt-Ht):Ut.isLeaf?Tt?typeof Tt=="function"?Tt(Ut):Tt:Ut.type.spec.leafText?Ut.type.spec.leafText(Ut):"":"";Ut.isBlock&&(Ut.isLeaf&&Kt||Ut.isTextblock)&&$t&&(Ft?Ft=!1:Dt+=$t),Dt+=Kt},0),Dt}append(dt){if(!dt.size)return this;if(!this.size)return dt;let kt=this.lastChild,$t=dt.firstChild,Tt=this.content.slice(),Dt=0;for(kt.isText&&kt.sameMarkup($t)&&(Tt[Tt.length-1]=kt.withText(kt.text+$t.text),Dt=1);Dt<dt.content.length;Dt++)Tt.push(dt.content[Dt]);return new Fragment(Tt,this.size+dt.size)}cut(dt,kt=this.size){if(dt==0&&kt==this.size)return this;let $t=[],Tt=0;if(kt>dt)for(let Dt=0,Ft=0;Ft<kt;Dt++){let Ut=this.content[Dt],Ht=Ft+Ut.nodeSize;Ht>dt&&((Ft<dt||Ht>kt)&&(Ut.isText?Ut=Ut.cut(Math.max(0,dt-Ft),Math.min(Ut.text.length,kt-Ft)):Ut=Ut.cut(Math.max(0,dt-Ft-1),Math.min(Ut.content.size,kt-Ft-1))),$t.push(Ut),Tt+=Ut.nodeSize),Ft=Ht}return new Fragment($t,Tt)}cutByIndex(dt,kt){return dt==kt?Fragment.empty:dt==0&&kt==this.content.length?this:new Fragment(this.content.slice(dt,kt))}replaceChild(dt,kt){let $t=this.content[dt];if($t==kt)return this;let Tt=this.content.slice(),Dt=this.size+kt.nodeSize-$t.nodeSize;return Tt[dt]=kt,new Fragment(Tt,Dt)}addToStart(dt){return new Fragment([dt].concat(this.content),this.size+dt.nodeSize)}addToEnd(dt){return new Fragment(this.content.concat(dt),this.size+dt.nodeSize)}eq(dt){if(this.content.length!=dt.content.length)return!1;for(let kt=0;kt<this.content.length;kt++)if(!this.content[kt].eq(dt.content[kt]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(dt){let kt=this.content[dt];if(!kt)throw new RangeError("Index "+dt+" out of range for "+this);return kt}maybeChild(dt){return this.content[dt]||null}forEach(dt){for(let kt=0,$t=0;kt<this.content.length;kt++){let Tt=this.content[kt];dt(Tt,$t,kt),$t+=Tt.nodeSize}}findDiffStart(dt,kt=0){return findDiffStart(this,dt,kt)}findDiffEnd(dt,kt=this.size,$t=dt.size){return findDiffEnd(this,dt,kt,$t)}findIndex(dt){if(dt==0)return retIndex(0,dt);if(dt==this.size)return retIndex(this.content.length,dt);if(dt>this.size||dt<0)throw new RangeError(`Position ${dt} outside of fragment (${this})`);for(let kt=0,$t=0;;kt++){let Tt=this.child(kt),Dt=$t+Tt.nodeSize;if(Dt>=dt)return Dt==dt?retIndex(kt+1,Dt):retIndex(kt,$t);$t=Dt}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(dt=>dt.toJSON()):null}static fromJSON(dt,kt){if(!kt)return Fragment.empty;if(!Array.isArray(kt))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(kt.map(dt.nodeFromJSON))}static fromArray(dt){if(!dt.length)return Fragment.empty;let kt,$t=0;for(let Tt=0;Tt<dt.length;Tt++){let Dt=dt[Tt];$t+=Dt.nodeSize,Tt&&Dt.isText&&dt[Tt-1].sameMarkup(Dt)?(kt||(kt=dt.slice(0,Tt)),kt[kt.length-1]=Dt.withText(kt[kt.length-1].text+Dt.text)):kt&&kt.push(Dt)}return new Fragment(kt||dt,$t)}static from(dt){if(!dt)return Fragment.empty;if(dt instanceof Fragment)return dt;if(Array.isArray(dt))return this.fromArray(dt);if(dt.attrs)return new Fragment([dt],dt.nodeSize);throw new RangeError("Can not convert "+dt+" to a Fragment"+(dt.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(et,dt){return found.index=et,found.offset=dt,found}function compareDeep(et,dt){if(et===dt)return!0;if(!(et&&typeof et=="object")||!(dt&&typeof dt=="object"))return!1;let kt=Array.isArray(et);if(Array.isArray(dt)!=kt)return!1;if(kt){if(et.length!=dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(!compareDeep(et[$t],dt[$t]))return!1}else{for(let $t in et)if(!($t in dt)||!compareDeep(et[$t],dt[$t]))return!1;for(let $t in dt)if(!($t in et))return!1}return!0}let Mark$1=class G2{constructor(dt,kt){this.type=dt,this.attrs=kt}addToSet(dt){let kt,$t=!1;for(let Tt=0;Tt<dt.length;Tt++){let Dt=dt[Tt];if(this.eq(Dt))return dt;if(this.type.excludes(Dt.type))kt||(kt=dt.slice(0,Tt));else{if(Dt.type.excludes(this.type))return dt;!$t&&Dt.type.rank>this.type.rank&&(kt||(kt=dt.slice(0,Tt)),kt.push(this),$t=!0),kt&&kt.push(Dt)}}return kt||(kt=dt.slice()),$t||kt.push(this),kt}removeFromSet(dt){for(let kt=0;kt<dt.length;kt++)if(this.eq(dt[kt]))return dt.slice(0,kt).concat(dt.slice(kt+1));return dt}isInSet(dt){for(let kt=0;kt<dt.length;kt++)if(this.eq(dt[kt]))return!0;return!1}eq(dt){return this==dt||this.type==dt.type&&compareDeep(this.attrs,dt.attrs)}toJSON(){let dt={type:this.type.name};for(let kt in this.attrs){dt.attrs=this.attrs;break}return dt}static fromJSON(dt,kt){if(!kt)throw new RangeError("Invalid input for Mark.fromJSON");let $t=dt.marks[kt.type];if(!$t)throw new RangeError(`There is no mark type ${kt.type} in this schema`);let Tt=$t.create(kt.attrs);return $t.checkAttrs(Tt.attrs),Tt}static sameSet(dt,kt){if(dt==kt)return!0;if(dt.length!=kt.length)return!1;for(let $t=0;$t<dt.length;$t++)if(!dt[$t].eq(kt[$t]))return!1;return!0}static setFrom(dt){if(!dt||Array.isArray(dt)&&dt.length==0)return G2.none;if(dt instanceof G2)return[dt];let kt=dt.slice();return kt.sort(($t,Tt)=>$t.type.rank-Tt.type.rank),kt}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(dt,kt,$t){this.content=dt,this.openStart=kt,this.openEnd=$t}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(dt,kt){let $t=insertInto(this.content,dt+this.openStart,kt);return $t&&new Slice($t,this.openStart,this.openEnd)}removeBetween(dt,kt){return new Slice(removeRange(this.content,dt+this.openStart,kt+this.openStart),this.openStart,this.openEnd)}eq(dt){return this.content.eq(dt.content)&&this.openStart==dt.openStart&&this.openEnd==dt.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let dt={content:this.content.toJSON()};return this.openStart>0&&(dt.openStart=this.openStart),this.openEnd>0&&(dt.openEnd=this.openEnd),dt}static fromJSON(dt,kt){if(!kt)return Slice.empty;let $t=kt.openStart||0,Tt=kt.openEnd||0;if(typeof $t!="number"||typeof Tt!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(dt,kt.content),$t,Tt)}static maxOpen(dt,kt=!0){let $t=0,Tt=0;for(let Dt=dt.firstChild;Dt&&!Dt.isLeaf&&(kt||!Dt.type.spec.isolating);Dt=Dt.firstChild)$t++;for(let Dt=dt.lastChild;Dt&&!Dt.isLeaf&&(kt||!Dt.type.spec.isolating);Dt=Dt.lastChild)Tt++;return new Slice(dt,$t,Tt)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(et,dt,kt){let{index:$t,offset:Tt}=et.findIndex(dt),Dt=et.maybeChild($t),{index:Ft,offset:Ut}=et.findIndex(kt);if(Tt==dt||Dt.isText){if(Ut!=kt&&!et.child(Ft).isText)throw new RangeError("Removing non-flat range");return et.cut(0,dt).append(et.cut(kt))}if($t!=Ft)throw new RangeError("Removing non-flat range");return et.replaceChild($t,Dt.copy(removeRange(Dt.content,dt-Tt-1,kt-Tt-1)))}function insertInto(et,dt,kt,$t){let{index:Tt,offset:Dt}=et.findIndex(dt),Ft=et.maybeChild(Tt);if(Dt==dt||Ft.isText)return $t&&!$t.canReplace(Tt,Tt,kt)?null:et.cut(0,dt).append(kt).append(et.cut(dt));let Ut=insertInto(Ft.content,dt-Dt-1,kt,Ft);return Ut&&et.replaceChild(Tt,Ft.copy(Ut))}function replace(et,dt,kt){if(kt.openStart>et.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(et.depth-kt.openStart!=dt.depth-kt.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(et,dt,kt,0)}function replaceOuter(et,dt,kt,$t){let Tt=et.index($t),Dt=et.node($t);if(Tt==dt.index($t)&&$t<et.depth-kt.openStart){let Ft=replaceOuter(et,dt,kt,$t+1);return Dt.copy(Dt.content.replaceChild(Tt,Ft))}else if(kt.content.size)if(!kt.openStart&&!kt.openEnd&&et.depth==$t&&dt.depth==$t){let Ft=et.parent,Ut=Ft.content;return close(Ft,Ut.cut(0,et.parentOffset).append(kt.content).append(Ut.cut(dt.parentOffset)))}else{let{start:Ft,end:Ut}=prepareSliceForReplace(kt,et);return close(Dt,replaceThreeWay(et,Ft,Ut,dt,$t))}else return close(Dt,replaceTwoWay(et,dt,$t))}function checkJoin(et,dt){if(!dt.type.compatibleContent(et.type))throw new ReplaceError("Cannot join "+dt.type.name+" onto "+et.type.name)}function joinable$1(et,dt,kt){let $t=et.node(kt);return checkJoin($t,dt.node(kt)),$t}function addNode(et,dt){let kt=dt.length-1;kt>=0&&et.isText&&et.sameMarkup(dt[kt])?dt[kt]=et.withText(dt[kt].text+et.text):dt.push(et)}function addRange(et,dt,kt,$t){let Tt=(dt||et).node(kt),Dt=0,Ft=dt?dt.index(kt):Tt.childCount;et&&(Dt=et.index(kt),et.depth>kt?Dt++:et.textOffset&&(addNode(et.nodeAfter,$t),Dt++));for(let Ut=Dt;Ut<Ft;Ut++)addNode(Tt.child(Ut),$t);dt&&dt.depth==kt&&dt.textOffset&&addNode(dt.nodeBefore,$t)}function close(et,dt){return et.type.checkContent(dt),et.copy(dt)}function replaceThreeWay(et,dt,kt,$t,Tt){let Dt=et.depth>Tt&&joinable$1(et,dt,Tt+1),Ft=$t.depth>Tt&&joinable$1(kt,$t,Tt+1),Ut=[];return addRange(null,et,Tt,Ut),Dt&&Ft&&dt.index(Tt)==kt.index(Tt)?(checkJoin(Dt,Ft),addNode(close(Dt,replaceThreeWay(et,dt,kt,$t,Tt+1)),Ut)):(Dt&&addNode(close(Dt,replaceTwoWay(et,dt,Tt+1)),Ut),addRange(dt,kt,Tt,Ut),Ft&&addNode(close(Ft,replaceTwoWay(kt,$t,Tt+1)),Ut)),addRange($t,null,Tt,Ut),new Fragment(Ut)}function replaceTwoWay(et,dt,kt){let $t=[];if(addRange(null,et,kt,$t),et.depth>kt){let Tt=joinable$1(et,dt,kt+1);addNode(close(Tt,replaceTwoWay(et,dt,kt+1)),$t)}return addRange(dt,null,kt,$t),new Fragment($t)}function prepareSliceForReplace(et,dt){let kt=dt.depth-et.openStart,Tt=dt.node(kt).copy(et.content);for(let Dt=kt-1;Dt>=0;Dt--)Tt=dt.node(Dt).copy(Fragment.from(Tt));return{start:Tt.resolveNoCache(et.openStart+kt),end:Tt.resolveNoCache(Tt.content.size-et.openEnd-kt)}}class ResolvedPos{constructor(dt,kt,$t){this.pos=dt,this.path=kt,this.parentOffset=$t,this.depth=kt.length/3-1}resolveDepth(dt){return dt==null?this.depth:dt<0?this.depth+dt:dt}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(dt){return this.path[this.resolveDepth(dt)*3]}index(dt){return this.path[this.resolveDepth(dt)*3+1]}indexAfter(dt){return dt=this.resolveDepth(dt),this.index(dt)+(dt==this.depth&&!this.textOffset?0:1)}start(dt){return dt=this.resolveDepth(dt),dt==0?0:this.path[dt*3-1]+1}end(dt){return dt=this.resolveDepth(dt),this.start(dt)+this.node(dt).content.size}before(dt){if(dt=this.resolveDepth(dt),!dt)throw new RangeError("There is no position before the top-level node");return dt==this.depth+1?this.pos:this.path[dt*3-1]}after(dt){if(dt=this.resolveDepth(dt),!dt)throw new RangeError("There is no position after the top-level node");return dt==this.depth+1?this.pos:this.path[dt*3-1]+this.path[dt*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let dt=this.parent,kt=this.index(this.depth);if(kt==dt.childCount)return null;let $t=this.pos-this.path[this.path.length-1],Tt=dt.child(kt);return $t?dt.child(kt).cut($t):Tt}get nodeBefore(){let dt=this.index(this.depth),kt=this.pos-this.path[this.path.length-1];return kt?this.parent.child(dt).cut(0,kt):dt==0?null:this.parent.child(dt-1)}posAtIndex(dt,kt){kt=this.resolveDepth(kt);let $t=this.path[kt*3],Tt=kt==0?0:this.path[kt*3-1]+1;for(let Dt=0;Dt<dt;Dt++)Tt+=$t.child(Dt).nodeSize;return Tt}marks(){let dt=this.parent,kt=this.index();if(dt.content.size==0)return Mark$1.none;if(this.textOffset)return dt.child(kt).marks;let $t=dt.maybeChild(kt-1),Tt=dt.maybeChild(kt);if(!$t){let Ut=$t;$t=Tt,Tt=Ut}let Dt=$t.marks;for(var Ft=0;Ft<Dt.length;Ft++)Dt[Ft].type.spec.inclusive===!1&&(!Tt||!Dt[Ft].isInSet(Tt.marks))&&(Dt=Dt[Ft--].removeFromSet(Dt));return Dt}marksAcross(dt){let kt=this.parent.maybeChild(this.index());if(!kt||!kt.isInline)return null;let $t=kt.marks,Tt=dt.parent.maybeChild(dt.index());for(var Dt=0;Dt<$t.length;Dt++)$t[Dt].type.spec.inclusive===!1&&(!Tt||!$t[Dt].isInSet(Tt.marks))&&($t=$t[Dt--].removeFromSet($t));return $t}sharedDepth(dt){for(let kt=this.depth;kt>0;kt--)if(this.start(kt)<=dt&&this.end(kt)>=dt)return kt;return 0}blockRange(dt=this,kt){if(dt.pos<this.pos)return dt.blockRange(this);for(let $t=this.depth-(this.parent.inlineContent||this.pos==dt.pos?1:0);$t>=0;$t--)if(dt.pos<=this.end($t)&&(!kt||kt(this.node($t))))return new NodeRange(this,dt,$t);return null}sameParent(dt){return this.pos-this.parentOffset==dt.pos-dt.parentOffset}max(dt){return dt.pos>this.pos?dt:this}min(dt){return dt.pos<this.pos?dt:this}toString(){let dt="";for(let kt=1;kt<=this.depth;kt++)dt+=(dt?"/":"")+this.node(kt).type.name+"_"+this.index(kt-1);return dt+":"+this.parentOffset}static resolve(dt,kt){if(!(kt>=0&&kt<=dt.content.size))throw new RangeError("Position "+kt+" out of range");let $t=[],Tt=0,Dt=kt;for(let Ft=dt;;){let{index:Ut,offset:Ht}=Ft.content.findIndex(Dt),Kt=Dt-Ht;if($t.push(Ft,Ut,Tt+Ht),!Kt||(Ft=Ft.child(Ut),Ft.isText))break;Dt=Kt-1,Tt+=Ht+1}return new ResolvedPos(kt,$t,Dt)}static resolveCached(dt,kt){let $t=resolveCache.get(dt);if($t)for(let Dt=0;Dt<$t.elts.length;Dt++){let Ft=$t.elts[Dt];if(Ft.pos==kt)return Ft}else resolveCache.set(dt,$t=new ResolveCache);let Tt=$t.elts[$t.i]=ResolvedPos.resolve(dt,kt);return $t.i=($t.i+1)%resolveCacheSize,Tt}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(dt,kt,$t){this.$from=dt,this.$to=kt,this.depth=$t}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class W2{constructor(dt,kt,$t,Tt=Mark$1.none){this.type=dt,this.attrs=kt,this.marks=Tt,this.content=$t||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(dt){return this.content.child(dt)}maybeChild(dt){return this.content.maybeChild(dt)}forEach(dt){this.content.forEach(dt)}nodesBetween(dt,kt,$t,Tt=0){this.content.nodesBetween(dt,kt,$t,Tt,this)}descendants(dt){this.nodesBetween(0,this.content.size,dt)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(dt,kt,$t,Tt){return this.content.textBetween(dt,kt,$t,Tt)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(dt){return this==dt||this.sameMarkup(dt)&&this.content.eq(dt.content)}sameMarkup(dt){return this.hasMarkup(dt.type,dt.attrs,dt.marks)}hasMarkup(dt,kt,$t){return this.type==dt&&compareDeep(this.attrs,kt||dt.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,$t||Mark$1.none)}copy(dt=null){return dt==this.content?this:new W2(this.type,this.attrs,dt,this.marks)}mark(dt){return dt==this.marks?this:new W2(this.type,this.attrs,this.content,dt)}cut(dt,kt=this.content.size){return dt==0&&kt==this.content.size?this:this.copy(this.content.cut(dt,kt))}slice(dt,kt=this.content.size,$t=!1){if(dt==kt)return Slice.empty;let Tt=this.resolve(dt),Dt=this.resolve(kt),Ft=$t?0:Tt.sharedDepth(kt),Ut=Tt.start(Ft),Kt=Tt.node(Ft).content.cut(Tt.pos-Ut,Dt.pos-Ut);return new Slice(Kt,Tt.depth-Ft,Dt.depth-Ft)}replace(dt,kt,$t){return replace(this.resolve(dt),this.resolve(kt),$t)}nodeAt(dt){for(let kt=this;;){let{index:$t,offset:Tt}=kt.content.findIndex(dt);if(kt=kt.maybeChild($t),!kt)return null;if(Tt==dt||kt.isText)return kt;dt-=Tt+1}}childAfter(dt){let{index:kt,offset:$t}=this.content.findIndex(dt);return{node:this.content.maybeChild(kt),index:kt,offset:$t}}childBefore(dt){if(dt==0)return{node:null,index:0,offset:0};let{index:kt,offset:$t}=this.content.findIndex(dt);if($t<dt)return{node:this.content.child(kt),index:kt,offset:$t};let Tt=this.content.child(kt-1);return{node:Tt,index:kt-1,offset:$t-Tt.nodeSize}}resolve(dt){return ResolvedPos.resolveCached(this,dt)}resolveNoCache(dt){return ResolvedPos.resolve(this,dt)}rangeHasMark(dt,kt,$t){let Tt=!1;return kt>dt&&this.nodesBetween(dt,kt,Dt=>($t.isInSet(Dt.marks)&&(Tt=!0),!Tt)),Tt}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let dt=this.type.name;return this.content.size&&(dt+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,dt)}contentMatchAt(dt){let kt=this.type.contentMatch.matchFragment(this.content,0,dt);if(!kt)throw new Error("Called contentMatchAt on a node with invalid content");return kt}canReplace(dt,kt,$t=Fragment.empty,Tt=0,Dt=$t.childCount){let Ft=this.contentMatchAt(dt).matchFragment($t,Tt,Dt),Ut=Ft&&Ft.matchFragment(this.content,kt);if(!Ut||!Ut.validEnd)return!1;for(let Ht=Tt;Ht<Dt;Ht++)if(!this.type.allowsMarks($t.child(Ht).marks))return!1;return!0}canReplaceWith(dt,kt,$t,Tt){if(Tt&&!this.type.allowsMarks(Tt))return!1;let Dt=this.contentMatchAt(dt).matchType($t),Ft=Dt&&Dt.matchFragment(this.content,kt);return Ft?Ft.validEnd:!1}canAppend(dt){return dt.content.size?this.canReplace(this.childCount,this.childCount,dt.content):this.type.compatibleContent(dt.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let dt=Mark$1.none;for(let kt=0;kt<this.marks.length;kt++){let $t=this.marks[kt];$t.type.checkAttrs($t.attrs),dt=$t.addToSet(dt)}if(!Mark$1.sameSet(dt,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(kt=>kt.type.name)}`);this.content.forEach(kt=>kt.check())}toJSON(){let dt={type:this.type.name};for(let kt in this.attrs){dt.attrs=this.attrs;break}return this.content.size&&(dt.content=this.content.toJSON()),this.marks.length&&(dt.marks=this.marks.map(kt=>kt.toJSON())),dt}static fromJSON(dt,kt){if(!kt)throw new RangeError("Invalid input for Node.fromJSON");let $t;if(kt.marks){if(!Array.isArray(kt.marks))throw new RangeError("Invalid mark data for Node.fromJSON");$t=kt.marks.map(dt.markFromJSON)}if(kt.type=="text"){if(typeof kt.text!="string")throw new RangeError("Invalid text node in JSON");return dt.text(kt.text,$t)}let Tt=Fragment.fromJSON(dt,kt.content),Dt=dt.nodeType(kt.type).create(kt.attrs,Tt,$t);return Dt.type.checkAttrs(Dt.attrs),Dt}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(dt,kt,$t,Tt){if(super(dt,kt,null,Tt),!$t)throw new RangeError("Empty text nodes are not allowed");this.text=$t}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(dt,kt){return this.text.slice(dt,kt)}get nodeSize(){return this.text.length}mark(dt){return dt==this.marks?this:new TextNode(this.type,this.attrs,this.text,dt)}withText(dt){return dt==this.text?this:new TextNode(this.type,this.attrs,dt,this.marks)}cut(dt=0,kt=this.text.length){return dt==0&&kt==this.text.length?this:this.withText(this.text.slice(dt,kt))}eq(dt){return this.sameMarkup(dt)&&this.text==dt.text}toJSON(){let dt=super.toJSON();return dt.text=this.text,dt}}function wrapMarks(et,dt){for(let kt=et.length-1;kt>=0;kt--)dt=et[kt].type.name+"("+dt+")";return dt}class ContentMatch{constructor(dt){this.validEnd=dt,this.next=[],this.wrapCache=[]}static parse(dt,kt){let $t=new TokenStream(dt,kt);if($t.next==null)return ContentMatch.empty;let Tt=parseExpr($t);$t.next&&$t.err("Unexpected trailing text");let Dt=dfa(nfa(Tt));return checkForDeadEnds(Dt,$t),Dt}matchType(dt){for(let kt=0;kt<this.next.length;kt++)if(this.next[kt].type==dt)return this.next[kt].next;return null}matchFragment(dt,kt=0,$t=dt.childCount){let Tt=this;for(let Dt=kt;Tt&&Dt<$t;Dt++)Tt=Tt.matchType(dt.child(Dt).type);return Tt}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let dt=0;dt<this.next.length;dt++){let{type:kt}=this.next[dt];if(!(kt.isText||kt.hasRequiredAttrs()))return kt}return null}compatible(dt){for(let kt=0;kt<this.next.length;kt++)for(let $t=0;$t<dt.next.length;$t++)if(this.next[kt].type==dt.next[$t].type)return!0;return!1}fillBefore(dt,kt=!1,$t=0){let Tt=[this];function Dt(Ft,Ut){let Ht=Ft.matchFragment(dt,$t);if(Ht&&(!kt||Ht.validEnd))return Fragment.from(Ut.map(Kt=>Kt.createAndFill()));for(let Kt=0;Kt<Ft.next.length;Kt++){let{type:Yt,next:Jt}=Ft.next[Kt];if(!(Yt.isText||Yt.hasRequiredAttrs())&&Tt.indexOf(Jt)==-1){Tt.push(Jt);let Zt=Dt(Jt,Ut.concat(Yt));if(Zt)return Zt}}return null}return Dt(this,[])}findWrapping(dt){for(let $t=0;$t<this.wrapCache.length;$t+=2)if(this.wrapCache[$t]==dt)return this.wrapCache[$t+1];let kt=this.computeWrapping(dt);return this.wrapCache.push(dt,kt),kt}computeWrapping(dt){let kt=Object.create(null),$t=[{match:this,type:null,via:null}];for(;$t.length;){let Tt=$t.shift(),Dt=Tt.match;if(Dt.matchType(dt)){let Ft=[];for(let Ut=Tt;Ut.type;Ut=Ut.via)Ft.push(Ut.type);return Ft.reverse()}for(let Ft=0;Ft<Dt.next.length;Ft++){let{type:Ut,next:Ht}=Dt.next[Ft];!Ut.isLeaf&&!Ut.hasRequiredAttrs()&&!(Ut.name in kt)&&(!Tt.type||Ht.validEnd)&&($t.push({match:Ut.contentMatch,type:Ut,via:Tt}),kt[Ut.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(dt){if(dt>=this.next.length)throw new RangeError(`There's no ${dt}th edge in this content match`);return this.next[dt]}toString(){let dt=[];function kt($t){dt.push($t);for(let Tt=0;Tt<$t.next.length;Tt++)dt.indexOf($t.next[Tt].next)==-1&&kt($t.next[Tt].next)}return kt(this),dt.map(($t,Tt)=>{let Dt=Tt+($t.validEnd?"*":" ")+" ";for(let Ft=0;Ft<$t.next.length;Ft++)Dt+=(Ft?", ":"")+$t.next[Ft].type.name+"->"+dt.indexOf($t.next[Ft].next);return Dt}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(dt,kt){this.string=dt,this.nodeTypes=kt,this.inline=null,this.pos=0,this.tokens=dt.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(dt){return this.next==dt&&(this.pos++||!0)}err(dt){throw new SyntaxError(dt+" (in content expression '"+this.string+"')")}}function parseExpr(et){let dt=[];do dt.push(parseExprSeq(et));while(et.eat("|"));return dt.length==1?dt[0]:{type:"choice",exprs:dt}}function parseExprSeq(et){let dt=[];do dt.push(parseExprSubscript(et));while(et.next&&et.next!=")"&&et.next!="|");return dt.length==1?dt[0]:{type:"seq",exprs:dt}}function parseExprSubscript(et){let dt=parseExprAtom(et);for(;;)if(et.eat("+"))dt={type:"plus",expr:dt};else if(et.eat("*"))dt={type:"star",expr:dt};else if(et.eat("?"))dt={type:"opt",expr:dt};else if(et.eat("{"))dt=parseExprRange(et,dt);else break;return dt}function parseNum(et){/\D/.test(et.next)&&et.err("Expected number, got '"+et.next+"'");let dt=Number(et.next);return et.pos++,dt}function parseExprRange(et,dt){let kt=parseNum(et),$t=kt;return et.eat(",")&&(et.next!="}"?$t=parseNum(et):$t=-1),et.eat("}")||et.err("Unclosed braced range"),{type:"range",min:kt,max:$t,expr:dt}}function resolveName(et,dt){let kt=et.nodeTypes,$t=kt[dt];if($t)return[$t];let Tt=[];for(let Dt in kt){let Ft=kt[Dt];Ft.isInGroup(dt)&&Tt.push(Ft)}return Tt.length==0&&et.err("No node type or group '"+dt+"' found"),Tt}function parseExprAtom(et){if(et.eat("(")){let dt=parseExpr(et);return et.eat(")")||et.err("Missing closing paren"),dt}else if(/\W/.test(et.next))et.err("Unexpected token '"+et.next+"'");else{let dt=resolveName(et,et.next).map(kt=>(et.inline==null?et.inline=kt.isInline:et.inline!=kt.isInline&&et.err("Mixing inline and block content"),{type:"name",value:kt}));return et.pos++,dt.length==1?dt[0]:{type:"choice",exprs:dt}}}function nfa(et){let dt=[[]];return Tt(Dt(et,0),kt()),dt;function kt(){return dt.push([])-1}function $t(Ft,Ut,Ht){let Kt={term:Ht,to:Ut};return dt[Ft].push(Kt),Kt}function Tt(Ft,Ut){Ft.forEach(Ht=>Ht.to=Ut)}function Dt(Ft,Ut){if(Ft.type=="choice")return Ft.exprs.reduce((Ht,Kt)=>Ht.concat(Dt(Kt,Ut)),[]);if(Ft.type=="seq")for(let Ht=0;;Ht++){let Kt=Dt(Ft.exprs[Ht],Ut);if(Ht==Ft.exprs.length-1)return Kt;Tt(Kt,Ut=kt())}else if(Ft.type=="star"){let Ht=kt();return $t(Ut,Ht),Tt(Dt(Ft.expr,Ht),Ht),[$t(Ht)]}else if(Ft.type=="plus"){let Ht=kt();return Tt(Dt(Ft.expr,Ut),Ht),Tt(Dt(Ft.expr,Ht),Ht),[$t(Ht)]}else{if(Ft.type=="opt")return[$t(Ut)].concat(Dt(Ft.expr,Ut));if(Ft.type=="range"){let Ht=Ut;for(let Kt=0;Kt<Ft.min;Kt++){let Yt=kt();Tt(Dt(Ft.expr,Ht),Yt),Ht=Yt}if(Ft.max==-1)Tt(Dt(Ft.expr,Ht),Ht);else for(let Kt=Ft.min;Kt<Ft.max;Kt++){let Yt=kt();$t(Ht,Yt),Tt(Dt(Ft.expr,Ht),Yt),Ht=Yt}return[$t(Ht)]}else{if(Ft.type=="name")return[$t(Ut,void 0,Ft.value)];throw new Error("Unknown expr type")}}}}function cmp(et,dt){return dt-et}function nullFrom(et,dt){let kt=[];return $t(dt),kt.sort(cmp);function $t(Tt){let Dt=et[Tt];if(Dt.length==1&&!Dt[0].term)return $t(Dt[0].to);kt.push(Tt);for(let Ft=0;Ft<Dt.length;Ft++){let{term:Ut,to:Ht}=Dt[Ft];!Ut&&kt.indexOf(Ht)==-1&&$t(Ht)}}}function dfa(et){let dt=Object.create(null);return kt(nullFrom(et,0));function kt($t){let Tt=[];$t.forEach(Ft=>{et[Ft].forEach(({term:Ut,to:Ht})=>{if(!Ut)return;let Kt;for(let Yt=0;Yt<Tt.length;Yt++)Tt[Yt][0]==Ut&&(Kt=Tt[Yt][1]);nullFrom(et,Ht).forEach(Yt=>{Kt||Tt.push([Ut,Kt=[]]),Kt.indexOf(Yt)==-1&&Kt.push(Yt)})})});let Dt=dt[$t.join(",")]=new ContentMatch($t.indexOf(et.length-1)>-1);for(let Ft=0;Ft<Tt.length;Ft++){let Ut=Tt[Ft][1].sort(cmp);Dt.next.push({type:Tt[Ft][0],next:dt[Ut.join(",")]||kt(Ut)})}return Dt}}function checkForDeadEnds(et,dt){for(let kt=0,$t=[et];kt<$t.length;kt++){let Tt=$t[kt],Dt=!Tt.validEnd,Ft=[];for(let Ut=0;Ut<Tt.next.length;Ut++){let{type:Ht,next:Kt}=Tt.next[Ut];Ft.push(Ht.name),Dt&&!(Ht.isText||Ht.hasRequiredAttrs())&&(Dt=!1),$t.indexOf(Kt)==-1&&$t.push(Kt)}Dt&&dt.err("Only non-generatable nodes ("+Ft.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(et){let dt=Object.create(null);for(let kt in et){let $t=et[kt];if(!$t.hasDefault)return null;dt[kt]=$t.default}return dt}function computeAttrs(et,dt){let kt=Object.create(null);for(let $t in et){let Tt=dt&&dt[$t];if(Tt===void 0){let Dt=et[$t];if(Dt.hasDefault)Tt=Dt.default;else throw new RangeError("No value supplied for attribute "+$t)}kt[$t]=Tt}return kt}function checkAttrs(et,dt,kt,$t){for(let Tt in dt)if(!(Tt in et))throw new RangeError(`Unsupported attribute ${Tt} for ${kt} of type ${Tt}`);for(let Tt in et){let Dt=et[Tt];Dt.validate&&Dt.validate(dt[Tt])}}function initAttrs(et,dt){let kt=Object.create(null);if(dt)for(let $t in dt)kt[$t]=new Attribute(et,$t,dt[$t]);return kt}let NodeType$1=class nS{constructor(dt,kt,$t){this.name=dt,this.schema=kt,this.spec=$t,this.markSet=null,this.groups=$t.group?$t.group.split(" "):[],this.attrs=initAttrs(dt,$t.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!($t.inline||dt=="text"),this.isText=dt=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(dt){return this.groups.indexOf(dt)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let dt in this.attrs)if(this.attrs[dt].isRequired)return!0;return!1}compatibleContent(dt){return this==dt||this.contentMatch.compatible(dt.contentMatch)}computeAttrs(dt){return!dt&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,dt)}create(dt=null,kt,$t){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(dt),Fragment.from(kt),Mark$1.setFrom($t))}createChecked(dt=null,kt,$t){return kt=Fragment.from(kt),this.checkContent(kt),new Node$1(this,this.computeAttrs(dt),kt,Mark$1.setFrom($t))}createAndFill(dt=null,kt,$t){if(dt=this.computeAttrs(dt),kt=Fragment.from(kt),kt.size){let Ft=this.contentMatch.fillBefore(kt);if(!Ft)return null;kt=Ft.append(kt)}let Tt=this.contentMatch.matchFragment(kt),Dt=Tt&&Tt.fillBefore(Fragment.empty,!0);return Dt?new Node$1(this,dt,kt.append(Dt),Mark$1.setFrom($t)):null}validContent(dt){let kt=this.contentMatch.matchFragment(dt);if(!kt||!kt.validEnd)return!1;for(let $t=0;$t<dt.childCount;$t++)if(!this.allowsMarks(dt.child($t).marks))return!1;return!0}checkContent(dt){if(!this.validContent(dt))throw new RangeError(`Invalid content for node ${this.name}: ${dt.toString().slice(0,50)}`)}checkAttrs(dt){checkAttrs(this.attrs,dt,"node",this.name)}allowsMarkType(dt){return this.markSet==null||this.markSet.indexOf(dt)>-1}allowsMarks(dt){if(this.markSet==null)return!0;for(let kt=0;kt<dt.length;kt++)if(!this.allowsMarkType(dt[kt].type))return!1;return!0}allowedMarks(dt){if(this.markSet==null)return dt;let kt;for(let $t=0;$t<dt.length;$t++)this.allowsMarkType(dt[$t].type)?kt&&kt.push(dt[$t]):kt||(kt=dt.slice(0,$t));return kt?kt.length?kt:Mark$1.none:dt}static compile(dt,kt){let $t=Object.create(null);dt.forEach((Dt,Ft)=>$t[Dt]=new nS(Dt,kt,Ft));let Tt=kt.spec.topNode||"doc";if(!$t[Tt])throw new RangeError("Schema is missing its top node type ('"+Tt+"')");if(!$t.text)throw new RangeError("Every schema needs a 'text' type");for(let Dt in $t.text.attrs)throw new RangeError("The text node type should not have attributes");return $t}};function validateType(et,dt,kt){let $t=kt.split("|");return Tt=>{let Dt=Tt===null?"null":typeof Tt;if($t.indexOf(Dt)<0)throw new RangeError(`Expected value of type ${$t} for attribute ${dt} on type ${et}, got ${Dt}`)}}class Attribute{constructor(dt,kt,$t){this.hasDefault=Object.prototype.hasOwnProperty.call($t,"default"),this.default=$t.default,this.validate=typeof $t.validate=="string"?validateType(dt,kt,$t.validate):$t.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(dt,kt,$t,Tt){this.name=dt,this.rank=kt,this.schema=$t,this.spec=Tt,this.attrs=initAttrs(dt,Tt.attrs),this.excluded=null;let Dt=defaultAttrs(this.attrs);this.instance=Dt?new Mark$1(this,Dt):null}create(dt=null){return!dt&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,dt))}static compile(dt,kt){let $t=Object.create(null),Tt=0;return dt.forEach((Dt,Ft)=>$t[Dt]=new MarkType(Dt,Tt++,kt,Ft)),$t}removeFromSet(dt){for(var kt=0;kt<dt.length;kt++)dt[kt].type==this&&(dt=dt.slice(0,kt).concat(dt.slice(kt+1)),kt--);return dt}isInSet(dt){for(let kt=0;kt<dt.length;kt++)if(dt[kt].type==this)return dt[kt]}checkAttrs(dt){checkAttrs(this.attrs,dt,"mark",this.name)}excludes(dt){return this.excluded.indexOf(dt)>-1}}class Schema{constructor(dt){this.linebreakReplacement=null,this.cached=Object.create(null);let kt=this.spec={};for(let Tt in dt)kt[Tt]=dt[Tt];kt.nodes=OrderedMap.from(dt.nodes),kt.marks=OrderedMap.from(dt.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let $t=Object.create(null);for(let Tt in this.nodes){if(Tt in this.marks)throw new RangeError(Tt+" can not be both a node and a mark");let Dt=this.nodes[Tt],Ft=Dt.spec.content||"",Ut=Dt.spec.marks;if(Dt.contentMatch=$t[Ft]||($t[Ft]=ContentMatch.parse(Ft,this.nodes)),Dt.inlineContent=Dt.contentMatch.inlineContent,Dt.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!Dt.isInline||!Dt.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=Dt}Dt.markSet=Ut=="_"?null:Ut?gatherMarks(this,Ut.split(" ")):Ut==""||!Dt.inlineContent?[]:null}for(let Tt in this.marks){let Dt=this.marks[Tt],Ft=Dt.spec.excludes;Dt.excluded=Ft==null?[Dt]:Ft==""?[]:gatherMarks(this,Ft.split(" "))}this.nodeFromJSON=Tt=>Node$1.fromJSON(this,Tt),this.markFromJSON=Tt=>Mark$1.fromJSON(this,Tt),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(dt,kt=null,$t,Tt){if(typeof dt=="string")dt=this.nodeType(dt);else if(dt instanceof NodeType$1){if(dt.schema!=this)throw new RangeError("Node type from different schema used ("+dt.name+")")}else throw new RangeError("Invalid node type: "+dt);return dt.createChecked(kt,$t,Tt)}text(dt,kt){let $t=this.nodes.text;return new TextNode($t,$t.defaultAttrs,dt,Mark$1.setFrom(kt))}mark(dt,kt){return typeof dt=="string"&&(dt=this.marks[dt]),dt.create(kt)}nodeType(dt){let kt=this.nodes[dt];if(!kt)throw new RangeError("Unknown node type: "+dt);return kt}}function gatherMarks(et,dt){let kt=[];for(let $t=0;$t<dt.length;$t++){let Tt=dt[$t],Dt=et.marks[Tt],Ft=Dt;if(Dt)kt.push(Dt);else for(let Ut in et.marks){let Ht=et.marks[Ut];(Tt=="_"||Ht.spec.group&&Ht.spec.group.split(" ").indexOf(Tt)>-1)&&kt.push(Ft=Ht)}if(!Ft)throw new SyntaxError("Unknown mark type: '"+dt[$t]+"'")}return kt}function isTagRule(et){return et.tag!=null}function isStyleRule(et){return et.style!=null}class DOMParser{constructor(dt,kt){this.schema=dt,this.rules=kt,this.tags=[],this.styles=[];let $t=this.matchedStyles=[];kt.forEach(Tt=>{if(isTagRule(Tt))this.tags.push(Tt);else if(isStyleRule(Tt)){let Dt=/[^=]*/.exec(Tt.style)[0];$t.indexOf(Dt)<0&&$t.push(Dt),this.styles.push(Tt)}}),this.normalizeLists=!this.tags.some(Tt=>{if(!/^(ul|ol)\b/.test(Tt.tag)||!Tt.node)return!1;let Dt=dt.nodes[Tt.node];return Dt.contentMatch.matchType(Dt)})}parse(dt,kt={}){let $t=new ParseContext(this,kt,!1);return $t.addAll(dt,Mark$1.none,kt.from,kt.to),$t.finish()}parseSlice(dt,kt={}){let $t=new ParseContext(this,kt,!0);return $t.addAll(dt,Mark$1.none,kt.from,kt.to),Slice.maxOpen($t.finish())}matchTag(dt,kt,$t){for(let Tt=$t?this.tags.indexOf($t)+1:0;Tt<this.tags.length;Tt++){let Dt=this.tags[Tt];if(matches(dt,Dt.tag)&&(Dt.namespace===void 0||dt.namespaceURI==Dt.namespace)&&(!Dt.context||kt.matchesContext(Dt.context))){if(Dt.getAttrs){let Ft=Dt.getAttrs(dt);if(Ft===!1)continue;Dt.attrs=Ft||void 0}return Dt}}}matchStyle(dt,kt,$t,Tt){for(let Dt=Tt?this.styles.indexOf(Tt)+1:0;Dt<this.styles.length;Dt++){let Ft=this.styles[Dt],Ut=Ft.style;if(!(Ut.indexOf(dt)!=0||Ft.context&&!$t.matchesContext(Ft.context)||Ut.length>dt.length&&(Ut.charCodeAt(dt.length)!=61||Ut.slice(dt.length+1)!=kt))){if(Ft.getAttrs){let Ht=Ft.getAttrs(kt);if(Ht===!1)continue;Ft.attrs=Ht||void 0}return Ft}}}static schemaRules(dt){let kt=[];function $t(Tt){let Dt=Tt.priority==null?50:Tt.priority,Ft=0;for(;Ft<kt.length;Ft++){let Ut=kt[Ft];if((Ut.priority==null?50:Ut.priority)<Dt)break}kt.splice(Ft,0,Tt)}for(let Tt in dt.marks){let Dt=dt.marks[Tt].spec.parseDOM;Dt&&Dt.forEach(Ft=>{$t(Ft=copy$1(Ft)),Ft.mark||Ft.ignore||Ft.clearMark||(Ft.mark=Tt)})}for(let Tt in dt.nodes){let Dt=dt.nodes[Tt].spec.parseDOM;Dt&&Dt.forEach(Ft=>{$t(Ft=copy$1(Ft)),Ft.node||Ft.ignore||Ft.mark||(Ft.node=Tt)})}return kt}static fromSchema(dt){return dt.cached.domParser||(dt.cached.domParser=new DOMParser(dt,DOMParser.schemaRules(dt)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(et,dt,kt){return dt!=null?(dt?OPT_PRESERVE_WS:0)|(dt==="full"?OPT_PRESERVE_WS_FULL:0):et&&et.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:kt&~OPT_OPEN_LEFT}class NodeContext{constructor(dt,kt,$t,Tt,Dt,Ft){this.type=dt,this.attrs=kt,this.marks=$t,this.solid=Tt,this.options=Ft,this.content=[],this.activeMarks=Mark$1.none,this.match=Dt||(Ft&OPT_OPEN_LEFT?null:dt.contentMatch)}findWrapping(dt){if(!this.match){if(!this.type)return[];let kt=this.type.contentMatch.fillBefore(Fragment.from(dt));if(kt)this.match=this.type.contentMatch.matchFragment(kt);else{let $t=this.type.contentMatch,Tt;return(Tt=$t.findWrapping(dt.type))?(this.match=$t,Tt):null}}return this.match.findWrapping(dt.type)}finish(dt){if(!(this.options&OPT_PRESERVE_WS)){let $t=this.content[this.content.length-1],Tt;if($t&&$t.isText&&(Tt=/[ \t\r\n\u000c]+$/.exec($t.text))){let Dt=$t;$t.text.length==Tt[0].length?this.content.pop():this.content[this.content.length-1]=Dt.withText(Dt.text.slice(0,Dt.text.length-Tt[0].length))}}let kt=Fragment.from(this.content);return!dt&&this.match&&(kt=kt.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,kt,this.marks):kt}inlineContext(dt){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:dt.parentNode&&!blockTags.hasOwnProperty(dt.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(dt,kt,$t){this.parser=dt,this.options=kt,this.isOpen=$t,this.open=0,this.localPreserveWS=!1;let Tt=kt.topNode,Dt,Ft=wsOptionsFor(null,kt.preserveWhitespace,0)|($t?OPT_OPEN_LEFT:0);Tt?Dt=new NodeContext(Tt.type,Tt.attrs,Mark$1.none,!0,kt.topMatch||Tt.type.contentMatch,Ft):$t?Dt=new NodeContext(null,null,Mark$1.none,!0,null,Ft):Dt=new NodeContext(dt.schema.topNodeType,null,Mark$1.none,!0,null,Ft),this.nodes=[Dt],this.find=kt.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(dt,kt){dt.nodeType==3?this.addTextNode(dt,kt):dt.nodeType==1&&this.addElement(dt,kt)}addTextNode(dt,kt){let $t=dt.nodeValue,Tt=this.top,Dt=Tt.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(Tt.options&OPT_PRESERVE_WS)>0;if(Dt==="full"||Tt.inlineContext(dt)||/[^ \t\r\n\u000c]/.test($t)){if(Dt)Dt!=="full"?$t=$t.replace(/\r?\n|\r/g," "):$t=$t.replace(/\r\n?/g,`
`);else if($t=$t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test($t)&&this.open==this.nodes.length-1){let Ft=Tt.content[Tt.content.length-1],Ut=dt.previousSibling;(!Ft||Ut&&Ut.nodeName=="BR"||Ft.isText&&/[ \t\r\n\u000c]$/.test(Ft.text))&&($t=$t.slice(1))}$t&&this.insertNode(this.parser.schema.text($t),kt,!/\S/.test($t)),this.findInText(dt)}else this.findInside(dt)}addElement(dt,kt,$t){let Tt=this.localPreserveWS,Dt=this.top;(dt.tagName=="PRE"||/pre/.test(dt.style&&dt.style.whiteSpace))&&(this.localPreserveWS=!0);let Ft=dt.nodeName.toLowerCase(),Ut;listTags.hasOwnProperty(Ft)&&this.parser.normalizeLists&&normalizeList(dt);let Ht=this.options.ruleFromNode&&this.options.ruleFromNode(dt)||(Ut=this.parser.matchTag(dt,this,$t));e:if(Ht?Ht.ignore:ignoreTags.hasOwnProperty(Ft))this.findInside(dt),this.ignoreFallback(dt,kt);else if(!Ht||Ht.skip||Ht.closeParent){Ht&&Ht.closeParent?this.open=Math.max(0,this.open-1):Ht&&Ht.skip.nodeType&&(dt=Ht.skip);let Kt,Yt=this.needsBlock;if(blockTags.hasOwnProperty(Ft))Dt.content.length&&Dt.content[0].isInline&&this.open&&(this.open--,Dt=this.top),Kt=!0,Dt.type||(this.needsBlock=!0);else if(!dt.firstChild){this.leafFallback(dt,kt);break e}let Jt=Ht&&Ht.skip?kt:this.readStyles(dt,kt);Jt&&this.addAll(dt,Jt),Kt&&this.sync(Dt),this.needsBlock=Yt}else{let Kt=this.readStyles(dt,kt);Kt&&this.addElementByRule(dt,Ht,Kt,Ht.consuming===!1?Ut:void 0)}this.localPreserveWS=Tt}leafFallback(dt,kt){dt.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dt.ownerDocument.createTextNode(`
`),kt)}ignoreFallback(dt,kt){dt.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),kt,!0)}readStyles(dt,kt){let $t=dt.style;if($t&&$t.length)for(let Tt=0;Tt<this.parser.matchedStyles.length;Tt++){let Dt=this.parser.matchedStyles[Tt],Ft=$t.getPropertyValue(Dt);if(Ft)for(let Ut=void 0;;){let Ht=this.parser.matchStyle(Dt,Ft,this,Ut);if(!Ht)break;if(Ht.ignore)return null;if(Ht.clearMark?kt=kt.filter(Kt=>!Ht.clearMark(Kt)):kt=kt.concat(this.parser.schema.marks[Ht.mark].create(Ht.attrs)),Ht.consuming===!1)Ut=Ht;else break}}return kt}addElementByRule(dt,kt,$t,Tt){let Dt,Ft;if(kt.node)if(Ft=this.parser.schema.nodes[kt.node],Ft.isLeaf)this.insertNode(Ft.create(kt.attrs),$t,dt.nodeName=="BR")||this.leafFallback(dt,$t);else{let Ht=this.enter(Ft,kt.attrs||null,$t,kt.preserveWhitespace);Ht&&(Dt=!0,$t=Ht)}else{let Ht=this.parser.schema.marks[kt.mark];$t=$t.concat(Ht.create(kt.attrs))}let Ut=this.top;if(Ft&&Ft.isLeaf)this.findInside(dt);else if(Tt)this.addElement(dt,$t,Tt);else if(kt.getContent)this.findInside(dt),kt.getContent(dt,this.parser.schema).forEach(Ht=>this.insertNode(Ht,$t,!1));else{let Ht=dt;typeof kt.contentElement=="string"?Ht=dt.querySelector(kt.contentElement):typeof kt.contentElement=="function"?Ht=kt.contentElement(dt):kt.contentElement&&(Ht=kt.contentElement),this.findAround(dt,Ht,!0),this.addAll(Ht,$t),this.findAround(dt,Ht,!1)}Dt&&this.sync(Ut)&&this.open--}addAll(dt,kt,$t,Tt){let Dt=$t||0;for(let Ft=$t?dt.childNodes[$t]:dt.firstChild,Ut=Tt==null?null:dt.childNodes[Tt];Ft!=Ut;Ft=Ft.nextSibling,++Dt)this.findAtPoint(dt,Dt),this.addDOM(Ft,kt);this.findAtPoint(dt,Dt)}findPlace(dt,kt,$t){let Tt,Dt;for(let Ft=this.open,Ut=0;Ft>=0;Ft--){let Ht=this.nodes[Ft],Kt=Ht.findWrapping(dt);if(Kt&&(!Tt||Tt.length>Kt.length+Ut)&&(Tt=Kt,Dt=Ht,!Kt.length))break;if(Ht.solid){if($t)break;Ut+=2}}if(!Tt)return null;this.sync(Dt);for(let Ft=0;Ft<Tt.length;Ft++)kt=this.enterInner(Tt[Ft],null,kt,!1);return kt}insertNode(dt,kt,$t){if(dt.isInline&&this.needsBlock&&!this.top.type){let Dt=this.textblockFromContext();Dt&&(kt=this.enterInner(Dt,null,kt))}let Tt=this.findPlace(dt,kt,$t);if(Tt){this.closeExtra();let Dt=this.top;Dt.match&&(Dt.match=Dt.match.matchType(dt.type));let Ft=Mark$1.none;for(let Ut of Tt.concat(dt.marks))(Dt.type?Dt.type.allowsMarkType(Ut.type):markMayApply(Ut.type,dt.type))&&(Ft=Ut.addToSet(Ft));return Dt.content.push(dt.mark(Ft)),!0}return!1}enter(dt,kt,$t,Tt){let Dt=this.findPlace(dt.create(kt),$t,!1);return Dt&&(Dt=this.enterInner(dt,kt,$t,!0,Tt)),Dt}enterInner(dt,kt,$t,Tt=!1,Dt){this.closeExtra();let Ft=this.top;Ft.match=Ft.match&&Ft.match.matchType(dt);let Ut=wsOptionsFor(dt,Dt,Ft.options);Ft.options&OPT_OPEN_LEFT&&Ft.content.length==0&&(Ut|=OPT_OPEN_LEFT);let Ht=Mark$1.none;return $t=$t.filter(Kt=>(Ft.type?Ft.type.allowsMarkType(Kt.type):markMayApply(Kt.type,dt))?(Ht=Kt.addToSet(Ht),!1):!0),this.nodes.push(new NodeContext(dt,kt,Ht,Tt,null,Ut)),this.open++,$t}closeExtra(dt=!1){let kt=this.nodes.length-1;if(kt>this.open){for(;kt>this.open;kt--)this.nodes[kt-1].content.push(this.nodes[kt].finish(dt));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(dt){for(let kt=this.open;kt>=0;kt--){if(this.nodes[kt]==dt)return this.open=kt,!0;this.localPreserveWS&&(this.nodes[kt].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let dt=0;for(let kt=this.open;kt>=0;kt--){let $t=this.nodes[kt].content;for(let Tt=$t.length-1;Tt>=0;Tt--)dt+=$t[Tt].nodeSize;kt&&dt++}return dt}findAtPoint(dt,kt){if(this.find)for(let $t=0;$t<this.find.length;$t++)this.find[$t].node==dt&&this.find[$t].offset==kt&&(this.find[$t].pos=this.currentPos)}findInside(dt){if(this.find)for(let kt=0;kt<this.find.length;kt++)this.find[kt].pos==null&&dt.nodeType==1&&dt.contains(this.find[kt].node)&&(this.find[kt].pos=this.currentPos)}findAround(dt,kt,$t){if(dt!=kt&&this.find)for(let Tt=0;Tt<this.find.length;Tt++)this.find[Tt].pos==null&&dt.nodeType==1&&dt.contains(this.find[Tt].node)&&kt.compareDocumentPosition(this.find[Tt].node)&($t?2:4)&&(this.find[Tt].pos=this.currentPos)}findInText(dt){if(this.find)for(let kt=0;kt<this.find.length;kt++)this.find[kt].node==dt&&(this.find[kt].pos=this.currentPos-(dt.nodeValue.length-this.find[kt].offset))}matchesContext(dt){if(dt.indexOf("|")>-1)return dt.split(/\s*\|\s*/).some(this.matchesContext,this);let kt=dt.split("/"),$t=this.options.context,Tt=!this.isOpen&&(!$t||$t.parent.type==this.nodes[0].type),Dt=-($t?$t.depth+1:0)+(Tt?0:1),Ft=(Ut,Ht)=>{for(;Ut>=0;Ut--){let Kt=kt[Ut];if(Kt==""){if(Ut==kt.length-1||Ut==0)continue;for(;Ht>=Dt;Ht--)if(Ft(Ut-1,Ht))return!0;return!1}else{let Yt=Ht>0||Ht==0&&Tt?this.nodes[Ht].type:$t&&Ht>=Dt?$t.node(Ht-Dt).type:null;if(!Yt||Yt.name!=Kt&&!Yt.isInGroup(Kt))return!1;Ht--}}return!0};return Ft(kt.length-1,this.open)}textblockFromContext(){let dt=this.options.context;if(dt)for(let kt=dt.depth;kt>=0;kt--){let $t=dt.node(kt).contentMatchAt(dt.indexAfter(kt)).defaultType;if($t&&$t.isTextblock&&$t.defaultAttrs)return $t}for(let kt in this.parser.schema.nodes){let $t=this.parser.schema.nodes[kt];if($t.isTextblock&&$t.defaultAttrs)return $t}}}function normalizeList(et){for(let dt=et.firstChild,kt=null;dt;dt=dt.nextSibling){let $t=dt.nodeType==1?dt.nodeName.toLowerCase():null;$t&&listTags.hasOwnProperty($t)&&kt?(kt.appendChild(dt),dt=kt):$t=="li"?kt=dt:$t&&(kt=null)}}function matches(et,dt){return(et.matches||et.msMatchesSelector||et.webkitMatchesSelector||et.mozMatchesSelector).call(et,dt)}function copy$1(et){let dt={};for(let kt in et)dt[kt]=et[kt];return dt}function markMayApply(et,dt){let kt=dt.schema.nodes;for(let $t in kt){let Tt=kt[$t];if(!Tt.allowsMarkType(et))continue;let Dt=[],Ft=Ut=>{Dt.push(Ut);for(let Ht=0;Ht<Ut.edgeCount;Ht++){let{type:Kt,next:Yt}=Ut.edge(Ht);if(Kt==dt||Dt.indexOf(Yt)<0&&Ft(Yt))return!0}};if(Ft(Tt.contentMatch))return!0}}class DOMSerializer{constructor(dt,kt){this.nodes=dt,this.marks=kt}serializeFragment(dt,kt={},$t){$t||($t=doc$1(kt).createDocumentFragment());let Tt=$t,Dt=[];return dt.forEach(Ft=>{if(Dt.length||Ft.marks.length){let Ut=0,Ht=0;for(;Ut<Dt.length&&Ht<Ft.marks.length;){let Kt=Ft.marks[Ht];if(!this.marks[Kt.type.name]){Ht++;continue}if(!Kt.eq(Dt[Ut][0])||Kt.type.spec.spanning===!1)break;Ut++,Ht++}for(;Ut<Dt.length;)Tt=Dt.pop()[1];for(;Ht<Ft.marks.length;){let Kt=Ft.marks[Ht++],Yt=this.serializeMark(Kt,Ft.isInline,kt);Yt&&(Dt.push([Kt,Tt]),Tt.appendChild(Yt.dom),Tt=Yt.contentDOM||Yt.dom)}}Tt.appendChild(this.serializeNodeInner(Ft,kt))}),$t}serializeNodeInner(dt,kt){let{dom:$t,contentDOM:Tt}=renderSpec(doc$1(kt),this.nodes[dt.type.name](dt),null,dt.attrs);if(Tt){if(dt.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(dt.content,kt,Tt)}return $t}serializeNode(dt,kt={}){let $t=this.serializeNodeInner(dt,kt);for(let Tt=dt.marks.length-1;Tt>=0;Tt--){let Dt=this.serializeMark(dt.marks[Tt],dt.isInline,kt);Dt&&((Dt.contentDOM||Dt.dom).appendChild($t),$t=Dt.dom)}return $t}serializeMark(dt,kt,$t={}){let Tt=this.marks[dt.type.name];return Tt&&renderSpec(doc$1($t),Tt(dt,kt),null,dt.attrs)}static renderSpec(dt,kt,$t=null,Tt){return renderSpec(dt,kt,$t,Tt)}static fromSchema(dt){return dt.cached.domSerializer||(dt.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(dt),this.marksFromSchema(dt)))}static nodesFromSchema(dt){let kt=gatherToDOM(dt.nodes);return kt.text||(kt.text=$t=>$t.text),kt}static marksFromSchema(dt){return gatherToDOM(dt.marks)}}function gatherToDOM(et){let dt={};for(let kt in et){let $t=et[kt].spec.toDOM;$t&&(dt[kt]=$t)}return dt}function doc$1(et){return et.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(et){let dt=suspiciousAttributeCache.get(et);return dt===void 0&&suspiciousAttributeCache.set(et,dt=suspiciousAttributesInner(et)),dt}function suspiciousAttributesInner(et){let dt=null;function kt($t){if($t&&typeof $t=="object")if(Array.isArray($t))if(typeof $t[0]=="string")dt||(dt=[]),dt.push($t);else for(let Tt=0;Tt<$t.length;Tt++)kt($t[Tt]);else for(let Tt in $t)kt($t[Tt])}return kt(et),dt}function renderSpec(et,dt,kt,$t){if(typeof dt=="string")return{dom:et.createTextNode(dt)};if(dt.nodeType!=null)return{dom:dt};if(dt.dom&&dt.dom.nodeType!=null)return dt;let Tt=dt[0],Dt;if(typeof Tt!="string")throw new RangeError("Invalid array passed to renderSpec");if($t&&(Dt=suspiciousAttributes($t))&&Dt.indexOf(dt)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let Ft=Tt.indexOf(" ");Ft>0&&(kt=Tt.slice(0,Ft),Tt=Tt.slice(Ft+1));let Ut,Ht=kt?et.createElementNS(kt,Tt):et.createElement(Tt),Kt=dt[1],Yt=1;if(Kt&&typeof Kt=="object"&&Kt.nodeType==null&&!Array.isArray(Kt)){Yt=2;for(let Jt in Kt)if(Kt[Jt]!=null){let Zt=Jt.indexOf(" ");Zt>0?Ht.setAttributeNS(Jt.slice(0,Zt),Jt.slice(Zt+1),Kt[Jt]):Jt=="style"&&Ht.style?Ht.style.cssText=Kt[Jt]:Ht.setAttribute(Jt,Kt[Jt])}}for(let Jt=Yt;Jt<dt.length;Jt++){let Zt=dt[Jt];if(Zt===0){if(Jt<dt.length-1||Jt>Yt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:Ht,contentDOM:Ht}}else{let{dom:er,contentDOM:rr}=renderSpec(et,Zt,kt,$t);if(Ht.appendChild(er),rr){if(Ut)throw new RangeError("Multiple content holes");Ut=rr}}}return{dom:Ht,contentDOM:Ut}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(et,dt){return et+dt*factor16}function recoverIndex(et){return et&lower16}function recoverOffset(et){return(et-(et&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(dt,kt,$t){this.pos=dt,this.delInfo=kt,this.recover=$t}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(dt,kt=!1){if(this.ranges=dt,this.inverted=kt,!dt.length&&StepMap.empty)return StepMap.empty}recover(dt){let kt=0,$t=recoverIndex(dt);if(!this.inverted)for(let Tt=0;Tt<$t;Tt++)kt+=this.ranges[Tt*3+2]-this.ranges[Tt*3+1];return this.ranges[$t*3]+kt+recoverOffset(dt)}mapResult(dt,kt=1){return this._map(dt,kt,!1)}map(dt,kt=1){return this._map(dt,kt,!0)}_map(dt,kt,$t){let Tt=0,Dt=this.inverted?2:1,Ft=this.inverted?1:2;for(let Ut=0;Ut<this.ranges.length;Ut+=3){let Ht=this.ranges[Ut]-(this.inverted?Tt:0);if(Ht>dt)break;let Kt=this.ranges[Ut+Dt],Yt=this.ranges[Ut+Ft],Jt=Ht+Kt;if(dt<=Jt){let Zt=Kt?dt==Ht?-1:dt==Jt?1:kt:kt,er=Ht+Tt+(Zt<0?0:Yt);if($t)return er;let rr=dt==(kt<0?Ht:Jt)?null:makeRecover(Ut/3,dt-Ht),sr=dt==Ht?DEL_AFTER:dt==Jt?DEL_BEFORE:DEL_ACROSS;return(kt<0?dt!=Ht:dt!=Jt)&&(sr|=DEL_SIDE),new MapResult(er,sr,rr)}Tt+=Yt-Kt}return $t?dt+Tt:new MapResult(dt+Tt,0,null)}touches(dt,kt){let $t=0,Tt=recoverIndex(kt),Dt=this.inverted?2:1,Ft=this.inverted?1:2;for(let Ut=0;Ut<this.ranges.length;Ut+=3){let Ht=this.ranges[Ut]-(this.inverted?$t:0);if(Ht>dt)break;let Kt=this.ranges[Ut+Dt],Yt=Ht+Kt;if(dt<=Yt&&Ut==Tt*3)return!0;$t+=this.ranges[Ut+Ft]-Kt}return!1}forEach(dt){let kt=this.inverted?2:1,$t=this.inverted?1:2;for(let Tt=0,Dt=0;Tt<this.ranges.length;Tt+=3){let Ft=this.ranges[Tt],Ut=Ft-(this.inverted?Dt:0),Ht=Ft+(this.inverted?0:Dt),Kt=this.ranges[Tt+kt],Yt=this.ranges[Tt+$t];dt(Ut,Ut+Kt,Ht,Ht+Yt),Dt+=Yt-Kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(dt){return dt==0?StepMap.empty:new StepMap(dt<0?[0,-dt,0]:[0,0,dt])}}StepMap.empty=new StepMap([]);class Mapping{constructor(dt,kt,$t=0,Tt=dt?dt.length:0){this.mirror=kt,this.from=$t,this.to=Tt,this._maps=dt||[],this.ownData=!(dt||kt)}get maps(){return this._maps}slice(dt=0,kt=this.maps.length){return new Mapping(this._maps,this.mirror,dt,kt)}appendMap(dt,kt){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(dt),kt!=null&&this.setMirror(this._maps.length-1,kt)}appendMapping(dt){for(let kt=0,$t=this._maps.length;kt<dt._maps.length;kt++){let Tt=dt.getMirror(kt);this.appendMap(dt._maps[kt],Tt!=null&&Tt<kt?$t+Tt:void 0)}}getMirror(dt){if(this.mirror){for(let kt=0;kt<this.mirror.length;kt++)if(this.mirror[kt]==dt)return this.mirror[kt+(kt%2?-1:1)]}}setMirror(dt,kt){this.mirror||(this.mirror=[]),this.mirror.push(dt,kt)}appendMappingInverted(dt){for(let kt=dt.maps.length-1,$t=this._maps.length+dt._maps.length;kt>=0;kt--){let Tt=dt.getMirror(kt);this.appendMap(dt._maps[kt].invert(),Tt!=null&&Tt>kt?$t-Tt-1:void 0)}}invert(){let dt=new Mapping;return dt.appendMappingInverted(this),dt}map(dt,kt=1){if(this.mirror)return this._map(dt,kt,!0);for(let $t=this.from;$t<this.to;$t++)dt=this._maps[$t].map(dt,kt);return dt}mapResult(dt,kt=1){return this._map(dt,kt,!1)}_map(dt,kt,$t){let Tt=0;for(let Dt=this.from;Dt<this.to;Dt++){let Ft=this._maps[Dt],Ut=Ft.mapResult(dt,kt);if(Ut.recover!=null){let Ht=this.getMirror(Dt);if(Ht!=null&&Ht>Dt&&Ht<this.to){Dt=Ht,dt=this._maps[Ht].recover(Ut.recover);continue}}Tt|=Ut.delInfo,dt=Ut.pos}return $t?dt:new MapResult(dt,Tt,null)}}const stepsByID=Object.create(null);let Step$1=class{getMap(){return StepMap.empty}merge(dt){return null}static fromJSON(dt,kt){if(!kt||!kt.stepType)throw new RangeError("Invalid input for Step.fromJSON");let $t=stepsByID[kt.stepType];if(!$t)throw new RangeError(`No step type ${kt.stepType} defined`);return $t.fromJSON(dt,kt)}static jsonID(dt,kt){if(dt in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+dt);return stepsByID[dt]=kt,kt.prototype.jsonID=dt,kt}};class StepResult{constructor(dt,kt){this.doc=dt,this.failed=kt}static ok(dt){return new StepResult(dt,null)}static fail(dt){return new StepResult(null,dt)}static fromReplace(dt,kt,$t,Tt){try{return StepResult.ok(dt.replace(kt,$t,Tt))}catch(Dt){if(Dt instanceof ReplaceError)return StepResult.fail(Dt.message);throw Dt}}}function mapFragment(et,dt,kt){let $t=[];for(let Tt=0;Tt<et.childCount;Tt++){let Dt=et.child(Tt);Dt.content.size&&(Dt=Dt.copy(mapFragment(Dt.content,dt,Dt))),Dt.isInline&&(Dt=dt(Dt,kt,Tt)),$t.push(Dt)}return Fragment.fromArray($t)}class AddMarkStep extends Step$1{constructor(dt,kt,$t){super(),this.from=dt,this.to=kt,this.mark=$t}apply(dt){let kt=dt.slice(this.from,this.to),$t=dt.resolve(this.from),Tt=$t.node($t.sharedDepth(this.to)),Dt=new Slice(mapFragment(kt.content,(Ft,Ut)=>!Ft.isAtom||!Ut.type.allowsMarkType(this.mark.type)?Ft:Ft.mark(this.mark.addToSet(Ft.marks)),Tt),kt.openStart,kt.openEnd);return StepResult.fromReplace(dt,this.from,this.to,Dt)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(dt){let kt=dt.mapResult(this.from,1),$t=dt.mapResult(this.to,-1);return kt.deleted&&$t.deleted||kt.pos>=$t.pos?null:new AddMarkStep(kt.pos,$t.pos,this.mark)}merge(dt){return dt instanceof AddMarkStep&&dt.mark.eq(this.mark)&&this.from<=dt.to&&this.to>=dt.from?new AddMarkStep(Math.min(this.from,dt.from),Math.max(this.to,dt.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(dt,kt){if(typeof kt.from!="number"||typeof kt.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(kt.from,kt.to,dt.markFromJSON(kt.mark))}}Step$1.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step$1{constructor(dt,kt,$t){super(),this.from=dt,this.to=kt,this.mark=$t}apply(dt){let kt=dt.slice(this.from,this.to),$t=new Slice(mapFragment(kt.content,Tt=>Tt.mark(this.mark.removeFromSet(Tt.marks)),dt),kt.openStart,kt.openEnd);return StepResult.fromReplace(dt,this.from,this.to,$t)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(dt){let kt=dt.mapResult(this.from,1),$t=dt.mapResult(this.to,-1);return kt.deleted&&$t.deleted||kt.pos>=$t.pos?null:new RemoveMarkStep(kt.pos,$t.pos,this.mark)}merge(dt){return dt instanceof RemoveMarkStep&&dt.mark.eq(this.mark)&&this.from<=dt.to&&this.to>=dt.from?new RemoveMarkStep(Math.min(this.from,dt.from),Math.max(this.to,dt.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(dt,kt){if(typeof kt.from!="number"||typeof kt.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(kt.from,kt.to,dt.markFromJSON(kt.mark))}}Step$1.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step$1{constructor(dt,kt){super(),this.pos=dt,this.mark=kt}apply(dt){let kt=dt.nodeAt(this.pos);if(!kt)return StepResult.fail("No node at mark step's position");let $t=kt.type.create(kt.attrs,null,this.mark.addToSet(kt.marks));return StepResult.fromReplace(dt,this.pos,this.pos+1,new Slice(Fragment.from($t),0,kt.isLeaf?0:1))}invert(dt){let kt=dt.nodeAt(this.pos);if(kt){let $t=this.mark.addToSet(kt.marks);if($t.length==kt.marks.length){for(let Tt=0;Tt<kt.marks.length;Tt++)if(!kt.marks[Tt].isInSet($t))return new AddNodeMarkStep(this.pos,kt.marks[Tt]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(dt){let kt=dt.mapResult(this.pos,1);return kt.deletedAfter?null:new AddNodeMarkStep(kt.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(dt,kt){if(typeof kt.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(kt.pos,dt.markFromJSON(kt.mark))}}Step$1.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step$1{constructor(dt,kt){super(),this.pos=dt,this.mark=kt}apply(dt){let kt=dt.nodeAt(this.pos);if(!kt)return StepResult.fail("No node at mark step's position");let $t=kt.type.create(kt.attrs,null,this.mark.removeFromSet(kt.marks));return StepResult.fromReplace(dt,this.pos,this.pos+1,new Slice(Fragment.from($t),0,kt.isLeaf?0:1))}invert(dt){let kt=dt.nodeAt(this.pos);return!kt||!this.mark.isInSet(kt.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(dt){let kt=dt.mapResult(this.pos,1);return kt.deletedAfter?null:new RemoveNodeMarkStep(kt.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(dt,kt){if(typeof kt.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(kt.pos,dt.markFromJSON(kt.mark))}}Step$1.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step$1{constructor(dt,kt,$t,Tt=!1){super(),this.from=dt,this.to=kt,this.slice=$t,this.structure=Tt}apply(dt){return this.structure&&contentBetween(dt,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(dt,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(dt){return new ReplaceStep(this.from,this.from+this.slice.size,dt.slice(this.from,this.to))}map(dt){let kt=dt.mapResult(this.from,1),$t=dt.mapResult(this.to,-1);return kt.deletedAcross&&$t.deletedAcross?null:new ReplaceStep(kt.pos,Math.max(kt.pos,$t.pos),this.slice,this.structure)}merge(dt){if(!(dt instanceof ReplaceStep)||dt.structure||this.structure)return null;if(this.from+this.slice.size==dt.from&&!this.slice.openEnd&&!dt.slice.openStart){let kt=this.slice.size+dt.slice.size==0?Slice.empty:new Slice(this.slice.content.append(dt.slice.content),this.slice.openStart,dt.slice.openEnd);return new ReplaceStep(this.from,this.to+(dt.to-dt.from),kt,this.structure)}else if(dt.to==this.from&&!this.slice.openStart&&!dt.slice.openEnd){let kt=this.slice.size+dt.slice.size==0?Slice.empty:new Slice(dt.slice.content.append(this.slice.content),dt.slice.openStart,this.slice.openEnd);return new ReplaceStep(dt.from,this.to,kt,this.structure)}else return null}toJSON(){let dt={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(dt.slice=this.slice.toJSON()),this.structure&&(dt.structure=!0),dt}static fromJSON(dt,kt){if(typeof kt.from!="number"||typeof kt.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(kt.from,kt.to,Slice.fromJSON(dt,kt.slice),!!kt.structure)}}Step$1.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step$1{constructor(dt,kt,$t,Tt,Dt,Ft,Ut=!1){super(),this.from=dt,this.to=kt,this.gapFrom=$t,this.gapTo=Tt,this.slice=Dt,this.insert=Ft,this.structure=Ut}apply(dt){if(this.structure&&(contentBetween(dt,this.from,this.gapFrom)||contentBetween(dt,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let kt=dt.slice(this.gapFrom,this.gapTo);if(kt.openStart||kt.openEnd)return StepResult.fail("Gap is not a flat range");let $t=this.slice.insertAt(this.insert,kt.content);return $t?StepResult.fromReplace(dt,this.from,this.to,$t):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(dt){let kt=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+kt,this.from+this.insert,this.from+this.insert+kt,dt.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(dt){let kt=dt.mapResult(this.from,1),$t=dt.mapResult(this.to,-1),Tt=this.from==this.gapFrom?kt.pos:dt.map(this.gapFrom,-1),Dt=this.to==this.gapTo?$t.pos:dt.map(this.gapTo,1);return kt.deletedAcross&&$t.deletedAcross||Tt<kt.pos||Dt>$t.pos?null:new ReplaceAroundStep(kt.pos,$t.pos,Tt,Dt,this.slice,this.insert,this.structure)}toJSON(){let dt={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(dt.slice=this.slice.toJSON()),this.structure&&(dt.structure=!0),dt}static fromJSON(dt,kt){if(typeof kt.from!="number"||typeof kt.to!="number"||typeof kt.gapFrom!="number"||typeof kt.gapTo!="number"||typeof kt.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(kt.from,kt.to,kt.gapFrom,kt.gapTo,Slice.fromJSON(dt,kt.slice),kt.insert,!!kt.structure)}}Step$1.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(et,dt,kt){let $t=et.resolve(dt),Tt=kt-dt,Dt=$t.depth;for(;Tt>0&&Dt>0&&$t.indexAfter(Dt)==$t.node(Dt).childCount;)Dt--,Tt--;if(Tt>0){let Ft=$t.node(Dt).maybeChild($t.indexAfter(Dt));for(;Tt>0;){if(!Ft||Ft.isLeaf)return!0;Ft=Ft.firstChild,Tt--}}return!1}function addMark(et,dt,kt,$t){let Tt=[],Dt=[],Ft,Ut;et.doc.nodesBetween(dt,kt,(Ht,Kt,Yt)=>{if(!Ht.isInline)return;let Jt=Ht.marks;if(!$t.isInSet(Jt)&&Yt.type.allowsMarkType($t.type)){let Zt=Math.max(Kt,dt),er=Math.min(Kt+Ht.nodeSize,kt),rr=$t.addToSet(Jt);for(let sr=0;sr<Jt.length;sr++)Jt[sr].isInSet(rr)||(Ft&&Ft.to==Zt&&Ft.mark.eq(Jt[sr])?Ft.to=er:Tt.push(Ft=new RemoveMarkStep(Zt,er,Jt[sr])));Ut&&Ut.to==Zt?Ut.to=er:Dt.push(Ut=new AddMarkStep(Zt,er,$t))}}),Tt.forEach(Ht=>et.step(Ht)),Dt.forEach(Ht=>et.step(Ht))}function removeMark(et,dt,kt,$t){let Tt=[],Dt=0;et.doc.nodesBetween(dt,kt,(Ft,Ut)=>{if(!Ft.isInline)return;Dt++;let Ht=null;if($t instanceof MarkType){let Kt=Ft.marks,Yt;for(;Yt=$t.isInSet(Kt);)(Ht||(Ht=[])).push(Yt),Kt=Yt.removeFromSet(Kt)}else $t?$t.isInSet(Ft.marks)&&(Ht=[$t]):Ht=Ft.marks;if(Ht&&Ht.length){let Kt=Math.min(Ut+Ft.nodeSize,kt);for(let Yt=0;Yt<Ht.length;Yt++){let Jt=Ht[Yt],Zt;for(let er=0;er<Tt.length;er++){let rr=Tt[er];rr.step==Dt-1&&Jt.eq(Tt[er].style)&&(Zt=rr)}Zt?(Zt.to=Kt,Zt.step=Dt):Tt.push({style:Jt,from:Math.max(Ut,dt),to:Kt,step:Dt})}}}),Tt.forEach(Ft=>et.step(new RemoveMarkStep(Ft.from,Ft.to,Ft.style)))}function clearIncompatible(et,dt,kt,$t=kt.contentMatch,Tt=!0){let Dt=et.doc.nodeAt(dt),Ft=[],Ut=dt+1;for(let Ht=0;Ht<Dt.childCount;Ht++){let Kt=Dt.child(Ht),Yt=Ut+Kt.nodeSize,Jt=$t.matchType(Kt.type);if(!Jt)Ft.push(new ReplaceStep(Ut,Yt,Slice.empty));else{$t=Jt;for(let Zt=0;Zt<Kt.marks.length;Zt++)kt.allowsMarkType(Kt.marks[Zt].type)||et.step(new RemoveMarkStep(Ut,Yt,Kt.marks[Zt]));if(Tt&&Kt.isText&&kt.whitespace!="pre"){let Zt,er=/\r?\n|\r/g,rr;for(;Zt=er.exec(Kt.text);)rr||(rr=new Slice(Fragment.from(kt.schema.text(" ",kt.allowedMarks(Kt.marks))),0,0)),Ft.push(new ReplaceStep(Ut+Zt.index,Ut+Zt.index+Zt[0].length,rr))}}Ut=Yt}if(!$t.validEnd){let Ht=$t.fillBefore(Fragment.empty,!0);et.replace(Ut,Ut,new Slice(Ht,0,0))}for(let Ht=Ft.length-1;Ht>=0;Ht--)et.step(Ft[Ht])}function canCut(et,dt,kt){return(dt==0||et.canReplace(dt,et.childCount))&&(kt==et.childCount||et.canReplace(0,kt))}function liftTarget(et){let kt=et.parent.content.cutByIndex(et.startIndex,et.endIndex);for(let $t=et.depth;;--$t){let Tt=et.$from.node($t),Dt=et.$from.index($t),Ft=et.$to.indexAfter($t);if($t<et.depth&&Tt.canReplace(Dt,Ft,kt))return $t;if($t==0||Tt.type.spec.isolating||!canCut(Tt,Dt,Ft))break}return null}function lift$2(et,dt,kt){let{$from:$t,$to:Tt,depth:Dt}=dt,Ft=$t.before(Dt+1),Ut=Tt.after(Dt+1),Ht=Ft,Kt=Ut,Yt=Fragment.empty,Jt=0;for(let rr=Dt,sr=!1;rr>kt;rr--)sr||$t.index(rr)>0?(sr=!0,Yt=Fragment.from($t.node(rr).copy(Yt)),Jt++):Ht--;let Zt=Fragment.empty,er=0;for(let rr=Dt,sr=!1;rr>kt;rr--)sr||Tt.after(rr+1)<Tt.end(rr)?(sr=!0,Zt=Fragment.from(Tt.node(rr).copy(Zt)),er++):Kt++;et.step(new ReplaceAroundStep(Ht,Kt,Ft,Ut,new Slice(Yt.append(Zt),Jt,er),Yt.size-Jt,!0))}function findWrapping(et,dt,kt=null,$t=et){let Tt=findWrappingOutside(et,dt),Dt=Tt&&findWrappingInside($t,dt);return Dt?Tt.map(withAttrs).concat({type:dt,attrs:kt}).concat(Dt.map(withAttrs)):null}function withAttrs(et){return{type:et,attrs:null}}function findWrappingOutside(et,dt){let{parent:kt,startIndex:$t,endIndex:Tt}=et,Dt=kt.contentMatchAt($t).findWrapping(dt);if(!Dt)return null;let Ft=Dt.length?Dt[0]:dt;return kt.canReplaceWith($t,Tt,Ft)?Dt:null}function findWrappingInside(et,dt){let{parent:kt,startIndex:$t,endIndex:Tt}=et,Dt=kt.child($t),Ft=dt.contentMatch.findWrapping(Dt.type);if(!Ft)return null;let Ht=(Ft.length?Ft[Ft.length-1]:dt).contentMatch;for(let Kt=$t;Ht&&Kt<Tt;Kt++)Ht=Ht.matchType(kt.child(Kt).type);return!Ht||!Ht.validEnd?null:Ft}function wrap(et,dt,kt){let $t=Fragment.empty;for(let Ft=kt.length-1;Ft>=0;Ft--){if($t.size){let Ut=kt[Ft].type.contentMatch.matchFragment($t);if(!Ut||!Ut.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}$t=Fragment.from(kt[Ft].type.create(kt[Ft].attrs,$t))}let Tt=dt.start,Dt=dt.end;et.step(new ReplaceAroundStep(Tt,Dt,Tt,Dt,new Slice($t,0,0),kt.length,!0))}function setBlockType$1(et,dt,kt,$t,Tt){if(!$t.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let Dt=et.steps.length;et.doc.nodesBetween(dt,kt,(Ft,Ut)=>{let Ht=typeof Tt=="function"?Tt(Ft):Tt;if(Ft.isTextblock&&!Ft.hasMarkup($t,Ht)&&canChangeType(et.doc,et.mapping.slice(Dt).map(Ut),$t)){let Kt=null;if($t.schema.linebreakReplacement){let er=$t.whitespace=="pre",rr=!!$t.contentMatch.matchType($t.schema.linebreakReplacement);er&&!rr?Kt=!1:!er&&rr&&(Kt=!0)}Kt===!1&&replaceLinebreaks(et,Ft,Ut,Dt),clearIncompatible(et,et.mapping.slice(Dt).map(Ut,1),$t,void 0,Kt===null);let Yt=et.mapping.slice(Dt),Jt=Yt.map(Ut,1),Zt=Yt.map(Ut+Ft.nodeSize,1);return et.step(new ReplaceAroundStep(Jt,Zt,Jt+1,Zt-1,new Slice(Fragment.from($t.create(Ht,null,Ft.marks)),0,0),1,!0)),Kt===!0&&replaceNewlines(et,Ft,Ut,Dt),!1}})}function replaceNewlines(et,dt,kt,$t){dt.forEach((Tt,Dt)=>{if(Tt.isText){let Ft,Ut=/\r?\n|\r/g;for(;Ft=Ut.exec(Tt.text);){let Ht=et.mapping.slice($t).map(kt+1+Dt+Ft.index);et.replaceWith(Ht,Ht+1,dt.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(et,dt,kt,$t){dt.forEach((Tt,Dt)=>{if(Tt.type==Tt.type.schema.linebreakReplacement){let Ft=et.mapping.slice($t).map(kt+1+Dt);et.replaceWith(Ft,Ft+1,dt.type.schema.text(`
`))}})}function canChangeType(et,dt,kt){let $t=et.resolve(dt),Tt=$t.index();return $t.parent.canReplaceWith(Tt,Tt+1,kt)}function setNodeMarkup(et,dt,kt,$t,Tt){let Dt=et.doc.nodeAt(dt);if(!Dt)throw new RangeError("No node at given position");kt||(kt=Dt.type);let Ft=kt.create($t,null,Tt||Dt.marks);if(Dt.isLeaf)return et.replaceWith(dt,dt+Dt.nodeSize,Ft);if(!kt.validContent(Dt.content))throw new RangeError("Invalid content for node type "+kt.name);et.step(new ReplaceAroundStep(dt,dt+Dt.nodeSize,dt+1,dt+Dt.nodeSize-1,new Slice(Fragment.from(Ft),0,0),1,!0))}function canSplit(et,dt,kt=1,$t){let Tt=et.resolve(dt),Dt=Tt.depth-kt,Ft=$t&&$t[$t.length-1]||Tt.parent;if(Dt<0||Tt.parent.type.spec.isolating||!Tt.parent.canReplace(Tt.index(),Tt.parent.childCount)||!Ft.type.validContent(Tt.parent.content.cutByIndex(Tt.index(),Tt.parent.childCount)))return!1;for(let Kt=Tt.depth-1,Yt=kt-2;Kt>Dt;Kt--,Yt--){let Jt=Tt.node(Kt),Zt=Tt.index(Kt);if(Jt.type.spec.isolating)return!1;let er=Jt.content.cutByIndex(Zt,Jt.childCount),rr=$t&&$t[Yt+1];rr&&(er=er.replaceChild(0,rr.type.create(rr.attrs)));let sr=$t&&$t[Yt]||Jt;if(!Jt.canReplace(Zt+1,Jt.childCount)||!sr.type.validContent(er))return!1}let Ut=Tt.indexAfter(Dt),Ht=$t&&$t[0];return Tt.node(Dt).canReplaceWith(Ut,Ut,Ht?Ht.type:Tt.node(Dt+1).type)}function split(et,dt,kt=1,$t){let Tt=et.doc.resolve(dt),Dt=Fragment.empty,Ft=Fragment.empty;for(let Ut=Tt.depth,Ht=Tt.depth-kt,Kt=kt-1;Ut>Ht;Ut--,Kt--){Dt=Fragment.from(Tt.node(Ut).copy(Dt));let Yt=$t&&$t[Kt];Ft=Fragment.from(Yt?Yt.type.create(Yt.attrs,Ft):Tt.node(Ut).copy(Ft))}et.step(new ReplaceStep(dt,dt,new Slice(Dt.append(Ft),kt,kt),!0))}function canJoin(et,dt){let kt=et.resolve(dt),$t=kt.index();return joinable(kt.nodeBefore,kt.nodeAfter)&&kt.parent.canReplace($t,$t+1)}function canAppendWithSubstitutedLinebreaks(et,dt){dt.content.size||et.type.compatibleContent(dt.type);let kt=et.contentMatchAt(et.childCount),{linebreakReplacement:$t}=et.type.schema;for(let Tt=0;Tt<dt.childCount;Tt++){let Dt=dt.child(Tt),Ft=Dt.type==$t?et.type.schema.nodes.text:Dt.type;if(kt=kt.matchType(Ft),!kt||!et.type.allowsMarks(Dt.marks))return!1}return kt.validEnd}function joinable(et,dt){return!!(et&&dt&&!et.isLeaf&&canAppendWithSubstitutedLinebreaks(et,dt))}function joinPoint(et,dt,kt=-1){let $t=et.resolve(dt);for(let Tt=$t.depth;;Tt--){let Dt,Ft,Ut=$t.index(Tt);if(Tt==$t.depth?(Dt=$t.nodeBefore,Ft=$t.nodeAfter):kt>0?(Dt=$t.node(Tt+1),Ut++,Ft=$t.node(Tt).maybeChild(Ut)):(Dt=$t.node(Tt).maybeChild(Ut-1),Ft=$t.node(Tt+1)),Dt&&!Dt.isTextblock&&joinable(Dt,Ft)&&$t.node(Tt).canReplace(Ut,Ut+1))return dt;if(Tt==0)break;dt=kt<0?$t.before(Tt):$t.after(Tt)}}function join(et,dt,kt){let $t=null,{linebreakReplacement:Tt}=et.doc.type.schema,Dt=et.doc.resolve(dt-kt),Ft=Dt.node().type;if(Tt&&Ft.inlineContent){let Yt=Ft.whitespace=="pre",Jt=!!Ft.contentMatch.matchType(Tt);Yt&&!Jt?$t=!1:!Yt&&Jt&&($t=!0)}let Ut=et.steps.length;if($t===!1){let Yt=et.doc.resolve(dt+kt);replaceLinebreaks(et,Yt.node(),Yt.before(),Ut)}Ft.inlineContent&&clearIncompatible(et,dt+kt-1,Ft,Dt.node().contentMatchAt(Dt.index()),$t==null);let Ht=et.mapping.slice(Ut),Kt=Ht.map(dt-kt);if(et.step(new ReplaceStep(Kt,Ht.map(dt+kt,-1),Slice.empty,!0)),$t===!0){let Yt=et.doc.resolve(Kt);replaceNewlines(et,Yt.node(),Yt.before(),et.steps.length)}return et}function insertPoint(et,dt,kt){let $t=et.resolve(dt);if($t.parent.canReplaceWith($t.index(),$t.index(),kt))return dt;if($t.parentOffset==0)for(let Tt=$t.depth-1;Tt>=0;Tt--){let Dt=$t.index(Tt);if($t.node(Tt).canReplaceWith(Dt,Dt,kt))return $t.before(Tt+1);if(Dt>0)return null}if($t.parentOffset==$t.parent.content.size)for(let Tt=$t.depth-1;Tt>=0;Tt--){let Dt=$t.indexAfter(Tt);if($t.node(Tt).canReplaceWith(Dt,Dt,kt))return $t.after(Tt+1);if(Dt<$t.node(Tt).childCount)return null}return null}function dropPoint(et,dt,kt){let $t=et.resolve(dt);if(!kt.content.size)return dt;let Tt=kt.content;for(let Dt=0;Dt<kt.openStart;Dt++)Tt=Tt.firstChild.content;for(let Dt=1;Dt<=(kt.openStart==0&&kt.size?2:1);Dt++)for(let Ft=$t.depth;Ft>=0;Ft--){let Ut=Ft==$t.depth?0:$t.pos<=($t.start(Ft+1)+$t.end(Ft+1))/2?-1:1,Ht=$t.index(Ft)+(Ut>0?1:0),Kt=$t.node(Ft),Yt=!1;if(Dt==1)Yt=Kt.canReplace(Ht,Ht,Tt);else{let Jt=Kt.contentMatchAt(Ht).findWrapping(Tt.firstChild.type);Yt=Jt&&Kt.canReplaceWith(Ht,Ht,Jt[0])}if(Yt)return Ut==0?$t.pos:Ut<0?$t.before(Ft+1):$t.after(Ft+1)}return null}function replaceStep(et,dt,kt=dt,$t=Slice.empty){if(dt==kt&&!$t.size)return null;let Tt=et.resolve(dt),Dt=et.resolve(kt);return fitsTrivially(Tt,Dt,$t)?new ReplaceStep(dt,kt,$t):new Fitter(Tt,Dt,$t).fit()}function fitsTrivially(et,dt,kt){return!kt.openStart&&!kt.openEnd&&et.start()==dt.start()&&et.parent.canReplace(et.index(),dt.index(),kt.content)}class Fitter{constructor(dt,kt,$t){this.$from=dt,this.$to=kt,this.unplaced=$t,this.frontier=[],this.placed=Fragment.empty;for(let Tt=0;Tt<=dt.depth;Tt++){let Dt=dt.node(Tt);this.frontier.push({type:Dt.type,match:Dt.contentMatchAt(dt.indexAfter(Tt))})}for(let Tt=dt.depth;Tt>0;Tt--)this.placed=Fragment.from(dt.node(Tt).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Kt=this.findFittable();Kt?this.placeNodes(Kt):this.openMore()||this.dropNode()}let dt=this.mustMoveInline(),kt=this.placed.size-this.depth-this.$from.depth,$t=this.$from,Tt=this.close(dt<0?this.$to:$t.doc.resolve(dt));if(!Tt)return null;let Dt=this.placed,Ft=$t.depth,Ut=Tt.depth;for(;Ft&&Ut&&Dt.childCount==1;)Dt=Dt.firstChild.content,Ft--,Ut--;let Ht=new Slice(Dt,Ft,Ut);return dt>-1?new ReplaceAroundStep($t.pos,dt,this.$to.pos,this.$to.end(),Ht,kt):Ht.size||$t.pos!=this.$to.pos?new ReplaceStep($t.pos,Tt.pos,Ht):null}findFittable(){let dt=this.unplaced.openStart;for(let kt=this.unplaced.content,$t=0,Tt=this.unplaced.openEnd;$t<dt;$t++){let Dt=kt.firstChild;if(kt.childCount>1&&(Tt=0),Dt.type.spec.isolating&&Tt<=$t){dt=$t;break}kt=Dt.content}for(let kt=1;kt<=2;kt++)for(let $t=kt==1?dt:this.unplaced.openStart;$t>=0;$t--){let Tt,Dt=null;$t?(Dt=contentAt(this.unplaced.content,$t-1).firstChild,Tt=Dt.content):Tt=this.unplaced.content;let Ft=Tt.firstChild;for(let Ut=this.depth;Ut>=0;Ut--){let{type:Ht,match:Kt}=this.frontier[Ut],Yt,Jt=null;if(kt==1&&(Ft?Kt.matchType(Ft.type)||(Jt=Kt.fillBefore(Fragment.from(Ft),!1)):Dt&&Ht.compatibleContent(Dt.type)))return{sliceDepth:$t,frontierDepth:Ut,parent:Dt,inject:Jt};if(kt==2&&Ft&&(Yt=Kt.findWrapping(Ft.type)))return{sliceDepth:$t,frontierDepth:Ut,parent:Dt,wrap:Yt};if(Dt&&Kt.matchType(Dt.type))break}}}openMore(){let{content:dt,openStart:kt,openEnd:$t}=this.unplaced,Tt=contentAt(dt,kt);return!Tt.childCount||Tt.firstChild.isLeaf?!1:(this.unplaced=new Slice(dt,kt+1,Math.max($t,Tt.size+kt>=dt.size-$t?kt+1:0)),!0)}dropNode(){let{content:dt,openStart:kt,openEnd:$t}=this.unplaced,Tt=contentAt(dt,kt);if(Tt.childCount<=1&&kt>0){let Dt=dt.size-kt<=kt+Tt.size;this.unplaced=new Slice(dropFromFragment(dt,kt-1,1),kt-1,Dt?kt-1:$t)}else this.unplaced=new Slice(dropFromFragment(dt,kt,1),kt,$t)}placeNodes({sliceDepth:dt,frontierDepth:kt,parent:$t,inject:Tt,wrap:Dt}){for(;this.depth>kt;)this.closeFrontierNode();if(Dt)for(let sr=0;sr<Dt.length;sr++)this.openFrontierNode(Dt[sr]);let Ft=this.unplaced,Ut=$t?$t.content:Ft.content,Ht=Ft.openStart-dt,Kt=0,Yt=[],{match:Jt,type:Zt}=this.frontier[kt];if(Tt){for(let sr=0;sr<Tt.childCount;sr++)Yt.push(Tt.child(sr));Jt=Jt.matchFragment(Tt)}let er=Ut.size+dt-(Ft.content.size-Ft.openEnd);for(;Kt<Ut.childCount;){let sr=Ut.child(Kt),nr=Jt.matchType(sr.type);if(!nr)break;Kt++,(Kt>1||Ht==0||sr.content.size)&&(Jt=nr,Yt.push(closeNodeStart(sr.mark(Zt.allowedMarks(sr.marks)),Kt==1?Ht:0,Kt==Ut.childCount?er:-1)))}let rr=Kt==Ut.childCount;rr||(er=-1),this.placed=addToFragment(this.placed,kt,Fragment.from(Yt)),this.frontier[kt].match=Jt,rr&&er<0&&$t&&$t.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let sr=0,nr=Ut;sr<er;sr++){let ir=nr.lastChild;this.frontier.push({type:ir.type,match:ir.contentMatchAt(ir.childCount)}),nr=ir.content}this.unplaced=rr?dt==0?Slice.empty:new Slice(dropFromFragment(Ft.content,dt-1,1),dt-1,er<0?Ft.openEnd:dt-1):new Slice(dropFromFragment(Ft.content,dt,Kt),Ft.openStart,Ft.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let dt=this.frontier[this.depth],kt;if(!dt.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,dt.type,dt.match,!1)||this.$to.depth==this.depth&&(kt=this.findCloseLevel(this.$to))&&kt.depth==this.depth)return-1;let{depth:$t}=this.$to,Tt=this.$to.after($t);for(;$t>1&&Tt==this.$to.end(--$t);)++Tt;return Tt}findCloseLevel(dt){e:for(let kt=Math.min(this.depth,dt.depth);kt>=0;kt--){let{match:$t,type:Tt}=this.frontier[kt],Dt=kt<dt.depth&&dt.end(kt+1)==dt.pos+(dt.depth-(kt+1)),Ft=contentAfterFits(dt,kt,Tt,$t,Dt);if(Ft){for(let Ut=kt-1;Ut>=0;Ut--){let{match:Ht,type:Kt}=this.frontier[Ut],Yt=contentAfterFits(dt,Ut,Kt,Ht,!0);if(!Yt||Yt.childCount)continue e}return{depth:kt,fit:Ft,move:Dt?dt.doc.resolve(dt.after(kt+1)):dt}}}}close(dt){let kt=this.findCloseLevel(dt);if(!kt)return null;for(;this.depth>kt.depth;)this.closeFrontierNode();kt.fit.childCount&&(this.placed=addToFragment(this.placed,kt.depth,kt.fit)),dt=kt.move;for(let $t=kt.depth+1;$t<=dt.depth;$t++){let Tt=dt.node($t),Dt=Tt.type.contentMatch.fillBefore(Tt.content,!0,dt.index($t));this.openFrontierNode(Tt.type,Tt.attrs,Dt)}return dt}openFrontierNode(dt,kt=null,$t){let Tt=this.frontier[this.depth];Tt.match=Tt.match.matchType(dt),this.placed=addToFragment(this.placed,this.depth,Fragment.from(dt.create(kt,$t))),this.frontier.push({type:dt,match:dt.contentMatch})}closeFrontierNode(){let kt=this.frontier.pop().match.fillBefore(Fragment.empty,!0);kt.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,kt))}}function dropFromFragment(et,dt,kt){return dt==0?et.cutByIndex(kt,et.childCount):et.replaceChild(0,et.firstChild.copy(dropFromFragment(et.firstChild.content,dt-1,kt)))}function addToFragment(et,dt,kt){return dt==0?et.append(kt):et.replaceChild(et.childCount-1,et.lastChild.copy(addToFragment(et.lastChild.content,dt-1,kt)))}function contentAt(et,dt){for(let kt=0;kt<dt;kt++)et=et.firstChild.content;return et}function closeNodeStart(et,dt,kt){if(dt<=0)return et;let $t=et.content;return dt>1&&($t=$t.replaceChild(0,closeNodeStart($t.firstChild,dt-1,$t.childCount==1?kt-1:0))),dt>0&&($t=et.type.contentMatch.fillBefore($t).append($t),kt<=0&&($t=$t.append(et.type.contentMatch.matchFragment($t).fillBefore(Fragment.empty,!0)))),et.copy($t)}function contentAfterFits(et,dt,kt,$t,Tt){let Dt=et.node(dt),Ft=Tt?et.indexAfter(dt):et.index(dt);if(Ft==Dt.childCount&&!kt.compatibleContent(Dt.type))return null;let Ut=$t.fillBefore(Dt.content,!0,Ft);return Ut&&!invalidMarks(kt,Dt.content,Ft)?Ut:null}function invalidMarks(et,dt,kt){for(let $t=kt;$t<dt.childCount;$t++)if(!et.allowsMarks(dt.child($t).marks))return!0;return!1}function definesContent(et){return et.spec.defining||et.spec.definingForContent}function replaceRange(et,dt,kt,$t){if(!$t.size)return et.deleteRange(dt,kt);let Tt=et.doc.resolve(dt),Dt=et.doc.resolve(kt);if(fitsTrivially(Tt,Dt,$t))return et.step(new ReplaceStep(dt,kt,$t));let Ft=coveredDepths(Tt,et.doc.resolve(kt));Ft[Ft.length-1]==0&&Ft.pop();let Ut=-(Tt.depth+1);Ft.unshift(Ut);for(let Zt=Tt.depth,er=Tt.pos-1;Zt>0;Zt--,er--){let rr=Tt.node(Zt).type.spec;if(rr.defining||rr.definingAsContext||rr.isolating)break;Ft.indexOf(Zt)>-1?Ut=Zt:Tt.before(Zt)==er&&Ft.splice(1,0,-Zt)}let Ht=Ft.indexOf(Ut),Kt=[],Yt=$t.openStart;for(let Zt=$t.content,er=0;;er++){let rr=Zt.firstChild;if(Kt.push(rr),er==$t.openStart)break;Zt=rr.content}for(let Zt=Yt-1;Zt>=0;Zt--){let er=Kt[Zt],rr=definesContent(er.type);if(rr&&!er.sameMarkup(Tt.node(Math.abs(Ut)-1)))Yt=Zt;else if(rr||!er.type.isTextblock)break}for(let Zt=$t.openStart;Zt>=0;Zt--){let er=(Zt+Yt+1)%($t.openStart+1),rr=Kt[er];if(rr)for(let sr=0;sr<Ft.length;sr++){let nr=Ft[(sr+Ht)%Ft.length],ir=!0;nr<0&&(ir=!1,nr=-nr);let lr=Tt.node(nr-1),or=Tt.index(nr-1);if(lr.canReplaceWith(or,or,rr.type,rr.marks))return et.replace(Tt.before(nr),ir?Dt.after(nr):kt,new Slice(closeFragment($t.content,0,$t.openStart,er),er,$t.openEnd))}}let Jt=et.steps.length;for(let Zt=Ft.length-1;Zt>=0&&(et.replace(dt,kt,$t),!(et.steps.length>Jt));Zt--){let er=Ft[Zt];er<0||(dt=Tt.before(er),kt=Dt.after(er))}}function closeFragment(et,dt,kt,$t,Tt){if(dt<kt){let Dt=et.firstChild;et=et.replaceChild(0,Dt.copy(closeFragment(Dt.content,dt+1,kt,$t,Dt)))}if(dt>$t){let Dt=Tt.contentMatchAt(0),Ft=Dt.fillBefore(et).append(et);et=Ft.append(Dt.matchFragment(Ft).fillBefore(Fragment.empty,!0))}return et}function replaceRangeWith(et,dt,kt,$t){if(!$t.isInline&&dt==kt&&et.doc.resolve(dt).parent.content.size){let Tt=insertPoint(et.doc,dt,$t.type);Tt!=null&&(dt=kt=Tt)}et.replaceRange(dt,kt,new Slice(Fragment.from($t),0,0))}function deleteRange$1(et,dt,kt){let $t=et.doc.resolve(dt),Tt=et.doc.resolve(kt),Dt=coveredDepths($t,Tt);for(let Ft=0;Ft<Dt.length;Ft++){let Ut=Dt[Ft],Ht=Ft==Dt.length-1;if(Ht&&Ut==0||$t.node(Ut).type.contentMatch.validEnd)return et.delete($t.start(Ut),Tt.end(Ut));if(Ut>0&&(Ht||$t.node(Ut-1).canReplace($t.index(Ut-1),Tt.indexAfter(Ut-1))))return et.delete($t.before(Ut),Tt.after(Ut))}for(let Ft=1;Ft<=$t.depth&&Ft<=Tt.depth;Ft++)if(dt-$t.start(Ft)==$t.depth-Ft&&kt>$t.end(Ft)&&Tt.end(Ft)-kt!=Tt.depth-Ft&&$t.start(Ft-1)==Tt.start(Ft-1)&&$t.node(Ft-1).canReplace($t.index(Ft-1),Tt.index(Ft-1)))return et.delete($t.before(Ft),kt);et.delete(dt,kt)}function coveredDepths(et,dt){let kt=[],$t=Math.min(et.depth,dt.depth);for(let Tt=$t;Tt>=0;Tt--){let Dt=et.start(Tt);if(Dt<et.pos-(et.depth-Tt)||dt.end(Tt)>dt.pos+(dt.depth-Tt)||et.node(Tt).type.spec.isolating||dt.node(Tt).type.spec.isolating)break;(Dt==dt.start(Tt)||Tt==et.depth&&Tt==dt.depth&&et.parent.inlineContent&&dt.parent.inlineContent&&Tt&&dt.start(Tt-1)==Dt-1)&&kt.push(Tt)}return kt}class AttrStep extends Step$1{constructor(dt,kt,$t){super(),this.pos=dt,this.attr=kt,this.value=$t}apply(dt){let kt=dt.nodeAt(this.pos);if(!kt)return StepResult.fail("No node at attribute step's position");let $t=Object.create(null);for(let Dt in kt.attrs)$t[Dt]=kt.attrs[Dt];$t[this.attr]=this.value;let Tt=kt.type.create($t,null,kt.marks);return StepResult.fromReplace(dt,this.pos,this.pos+1,new Slice(Fragment.from(Tt),0,kt.isLeaf?0:1))}getMap(){return StepMap.empty}invert(dt){return new AttrStep(this.pos,this.attr,dt.nodeAt(this.pos).attrs[this.attr])}map(dt){let kt=dt.mapResult(this.pos,1);return kt.deletedAfter?null:new AttrStep(kt.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(dt,kt){if(typeof kt.pos!="number"||typeof kt.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(kt.pos,kt.attr,kt.value)}}Step$1.jsonID("attr",AttrStep);class DocAttrStep extends Step$1{constructor(dt,kt){super(),this.attr=dt,this.value=kt}apply(dt){let kt=Object.create(null);for(let Tt in dt.attrs)kt[Tt]=dt.attrs[Tt];kt[this.attr]=this.value;let $t=dt.type.create(kt,dt.content,dt.marks);return StepResult.ok($t)}getMap(){return StepMap.empty}invert(dt){return new DocAttrStep(this.attr,dt.attrs[this.attr])}map(dt){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(dt,kt){if(typeof kt.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(kt.attr,kt.value)}}Step$1.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function et(dt){let kt=Error.call(this,dt);return kt.__proto__=et.prototype,kt};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(dt){this.doc=dt,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(dt){let kt=this.maybeStep(dt);if(kt.failed)throw new TransformError(kt.failed);return this}maybeStep(dt){let kt=dt.apply(this.doc);return kt.failed||this.addStep(dt,kt.doc),kt}get docChanged(){return this.steps.length>0}addStep(dt,kt){this.docs.push(this.doc),this.steps.push(dt),this.mapping.appendMap(dt.getMap()),this.doc=kt}replace(dt,kt=dt,$t=Slice.empty){let Tt=replaceStep(this.doc,dt,kt,$t);return Tt&&this.step(Tt),this}replaceWith(dt,kt,$t){return this.replace(dt,kt,new Slice(Fragment.from($t),0,0))}delete(dt,kt){return this.replace(dt,kt,Slice.empty)}insert(dt,kt){return this.replaceWith(dt,dt,kt)}replaceRange(dt,kt,$t){return replaceRange(this,dt,kt,$t),this}replaceRangeWith(dt,kt,$t){return replaceRangeWith(this,dt,kt,$t),this}deleteRange(dt,kt){return deleteRange$1(this,dt,kt),this}lift(dt,kt){return lift$2(this,dt,kt),this}join(dt,kt=1){return join(this,dt,kt),this}wrap(dt,kt){return wrap(this,dt,kt),this}setBlockType(dt,kt=dt,$t,Tt=null){return setBlockType$1(this,dt,kt,$t,Tt),this}setNodeMarkup(dt,kt,$t=null,Tt){return setNodeMarkup(this,dt,kt,$t,Tt),this}setNodeAttribute(dt,kt,$t){return this.step(new AttrStep(dt,kt,$t)),this}setDocAttribute(dt,kt){return this.step(new DocAttrStep(dt,kt)),this}addNodeMark(dt,kt){return this.step(new AddNodeMarkStep(dt,kt)),this}removeNodeMark(dt,kt){let $t=this.doc.nodeAt(dt);if(!$t)throw new RangeError("No node at position "+dt);if(kt instanceof Mark$1)kt.isInSet($t.marks)&&this.step(new RemoveNodeMarkStep(dt,kt));else{let Tt=$t.marks,Dt,Ft=[];for(;Dt=kt.isInSet(Tt);)Ft.push(new RemoveNodeMarkStep(dt,Dt)),Tt=Dt.removeFromSet(Tt);for(let Ut=Ft.length-1;Ut>=0;Ut--)this.step(Ft[Ut])}return this}split(dt,kt=1,$t){return split(this,dt,kt,$t),this}addMark(dt,kt,$t){return addMark(this,dt,kt,$t),this}removeMark(dt,kt,$t){return removeMark(this,dt,kt,$t),this}clearIncompatible(dt,kt,$t){return clearIncompatible(this,dt,kt,$t),this}}const classesById=Object.create(null);class Selection{constructor(dt,kt,$t){this.$anchor=dt,this.$head=kt,this.ranges=$t||[new SelectionRange(dt.min(kt),dt.max(kt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let dt=this.ranges;for(let kt=0;kt<dt.length;kt++)if(dt[kt].$from.pos!=dt[kt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(dt,kt=Slice.empty){let $t=kt.content.lastChild,Tt=null;for(let Ut=0;Ut<kt.openEnd;Ut++)Tt=$t,$t=$t.lastChild;let Dt=dt.steps.length,Ft=this.ranges;for(let Ut=0;Ut<Ft.length;Ut++){let{$from:Ht,$to:Kt}=Ft[Ut],Yt=dt.mapping.slice(Dt);dt.replaceRange(Yt.map(Ht.pos),Yt.map(Kt.pos),Ut?Slice.empty:kt),Ut==0&&selectionToInsertionEnd$1(dt,Dt,($t?$t.isInline:Tt&&Tt.isTextblock)?-1:1)}}replaceWith(dt,kt){let $t=dt.steps.length,Tt=this.ranges;for(let Dt=0;Dt<Tt.length;Dt++){let{$from:Ft,$to:Ut}=Tt[Dt],Ht=dt.mapping.slice($t),Kt=Ht.map(Ft.pos),Yt=Ht.map(Ut.pos);Dt?dt.deleteRange(Kt,Yt):(dt.replaceRangeWith(Kt,Yt,kt),selectionToInsertionEnd$1(dt,$t,kt.isInline?-1:1))}}static findFrom(dt,kt,$t=!1){let Tt=dt.parent.inlineContent?new TextSelection(dt):findSelectionIn(dt.node(0),dt.parent,dt.pos,dt.index(),kt,$t);if(Tt)return Tt;for(let Dt=dt.depth-1;Dt>=0;Dt--){let Ft=kt<0?findSelectionIn(dt.node(0),dt.node(Dt),dt.before(Dt+1),dt.index(Dt),kt,$t):findSelectionIn(dt.node(0),dt.node(Dt),dt.after(Dt+1),dt.index(Dt)+1,kt,$t);if(Ft)return Ft}return null}static near(dt,kt=1){return this.findFrom(dt,kt)||this.findFrom(dt,-kt)||new AllSelection(dt.node(0))}static atStart(dt){return findSelectionIn(dt,dt,0,0,1)||new AllSelection(dt)}static atEnd(dt){return findSelectionIn(dt,dt,dt.content.size,dt.childCount,-1)||new AllSelection(dt)}static fromJSON(dt,kt){if(!kt||!kt.type)throw new RangeError("Invalid input for Selection.fromJSON");let $t=classesById[kt.type];if(!$t)throw new RangeError(`No selection type ${kt.type} defined`);return $t.fromJSON(dt,kt)}static jsonID(dt,kt){if(dt in classesById)throw new RangeError("Duplicate use of selection JSON ID "+dt);return classesById[dt]=kt,kt.prototype.jsonID=dt,kt}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(dt,kt){this.$from=dt,this.$to=kt}}let warnedAboutTextSelection=!1;function checkTextSelection(et){!warnedAboutTextSelection&&!et.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+et.parent.type.name+")"))}class TextSelection extends Selection{constructor(dt,kt=dt){checkTextSelection(dt),checkTextSelection(kt),super(dt,kt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(dt,kt){let $t=dt.resolve(kt.map(this.head));if(!$t.parent.inlineContent)return Selection.near($t);let Tt=dt.resolve(kt.map(this.anchor));return new TextSelection(Tt.parent.inlineContent?Tt:$t,$t)}replace(dt,kt=Slice.empty){if(super.replace(dt,kt),kt==Slice.empty){let $t=this.$from.marksAcross(this.$to);$t&&dt.ensureMarks($t)}}eq(dt){return dt instanceof TextSelection&&dt.anchor==this.anchor&&dt.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(dt,kt){if(typeof kt.anchor!="number"||typeof kt.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(dt.resolve(kt.anchor),dt.resolve(kt.head))}static create(dt,kt,$t=kt){let Tt=dt.resolve(kt);return new this(Tt,$t==kt?Tt:dt.resolve($t))}static between(dt,kt,$t){let Tt=dt.pos-kt.pos;if((!$t||Tt)&&($t=Tt>=0?1:-1),!kt.parent.inlineContent){let Dt=Selection.findFrom(kt,$t,!0)||Selection.findFrom(kt,-$t,!0);if(Dt)kt=Dt.$head;else return Selection.near(kt,$t)}return dt.parent.inlineContent||(Tt==0?dt=kt:(dt=(Selection.findFrom(dt,-$t,!0)||Selection.findFrom(dt,$t,!0)).$anchor,dt.pos<kt.pos!=Tt<0&&(dt=kt))),new TextSelection(dt,kt)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(dt,kt){this.anchor=dt,this.head=kt}map(dt){return new TextBookmark(dt.map(this.anchor),dt.map(this.head))}resolve(dt){return TextSelection.between(dt.resolve(this.anchor),dt.resolve(this.head))}}class NodeSelection extends Selection{constructor(dt){let kt=dt.nodeAfter,$t=dt.node(0).resolve(dt.pos+kt.nodeSize);super(dt,$t),this.node=kt}map(dt,kt){let{deleted:$t,pos:Tt}=kt.mapResult(this.anchor),Dt=dt.resolve(Tt);return $t?Selection.near(Dt):new NodeSelection(Dt)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(dt){return dt instanceof NodeSelection&&dt.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(dt,kt){if(typeof kt.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(dt.resolve(kt.anchor))}static create(dt,kt){return new NodeSelection(dt.resolve(kt))}static isSelectable(dt){return!dt.isText&&dt.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(dt){this.anchor=dt}map(dt){let{deleted:kt,pos:$t}=dt.mapResult(this.anchor);return kt?new TextBookmark($t,$t):new NodeBookmark($t)}resolve(dt){let kt=dt.resolve(this.anchor),$t=kt.nodeAfter;return $t&&NodeSelection.isSelectable($t)?new NodeSelection(kt):Selection.near(kt)}}class AllSelection extends Selection{constructor(dt){super(dt.resolve(0),dt.resolve(dt.content.size))}replace(dt,kt=Slice.empty){if(kt==Slice.empty){dt.delete(0,dt.doc.content.size);let $t=Selection.atStart(dt.doc);$t.eq(dt.selection)||dt.setSelection($t)}else super.replace(dt,kt)}toJSON(){return{type:"all"}}static fromJSON(dt){return new AllSelection(dt)}map(dt){return new AllSelection(dt)}eq(dt){return dt instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(et){return new AllSelection(et)}};function findSelectionIn(et,dt,kt,$t,Tt,Dt=!1){if(dt.inlineContent)return TextSelection.create(et,kt);for(let Ft=$t-(Tt>0?0:1);Tt>0?Ft<dt.childCount:Ft>=0;Ft+=Tt){let Ut=dt.child(Ft);if(Ut.isAtom){if(!Dt&&NodeSelection.isSelectable(Ut))return NodeSelection.create(et,kt-(Tt<0?Ut.nodeSize:0))}else{let Ht=findSelectionIn(et,Ut,kt+Tt,Tt<0?Ut.childCount:0,Tt,Dt);if(Ht)return Ht}kt+=Ut.nodeSize*Tt}return null}function selectionToInsertionEnd$1(et,dt,kt){let $t=et.steps.length-1;if($t<dt)return;let Tt=et.steps[$t];if(!(Tt instanceof ReplaceStep||Tt instanceof ReplaceAroundStep))return;let Dt=et.mapping.maps[$t],Ft;Dt.forEach((Ut,Ht,Kt,Yt)=>{Ft==null&&(Ft=Yt)}),et.setSelection(Selection.near(et.doc.resolve(Ft),kt))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(dt){super(dt.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=dt.selection,this.storedMarks=dt.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(dt){if(dt.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=dt,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(dt){return this.storedMarks=dt,this.updated|=UPDATED_MARKS,this}ensureMarks(dt){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),dt)||this.setStoredMarks(dt),this}addStoredMark(dt){return this.ensureMarks(dt.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(dt){return this.ensureMarks(dt.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(dt,kt){super.addStep(dt,kt),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(dt){return this.time=dt,this}replaceSelection(dt){return this.selection.replace(this,dt),this}replaceSelectionWith(dt,kt=!0){let $t=this.selection;return kt&&(dt=dt.mark(this.storedMarks||($t.empty?$t.$from.marks():$t.$from.marksAcross($t.$to)||Mark$1.none))),$t.replaceWith(this,dt),this}deleteSelection(){return this.selection.replace(this),this}insertText(dt,kt,$t){let Tt=this.doc.type.schema;if(kt==null)return dt?this.replaceSelectionWith(Tt.text(dt),!0):this.deleteSelection();{if($t==null&&($t=kt),$t=$t??kt,!dt)return this.deleteRange(kt,$t);let Dt=this.storedMarks;if(!Dt){let Ft=this.doc.resolve(kt);Dt=$t==kt?Ft.marks():Ft.marksAcross(this.doc.resolve($t))}return this.replaceRangeWith(kt,$t,Tt.text(dt,Dt)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(dt,kt){return this.meta[typeof dt=="string"?dt:dt.key]=kt,this}getMeta(dt){return this.meta[typeof dt=="string"?dt:dt.key]}get isGeneric(){for(let dt in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(et,dt){return!dt||!et?et:et.bind(dt)}class FieldDesc{constructor(dt,kt,$t){this.name=dt,this.init=bind(kt.init,$t),this.apply=bind(kt.apply,$t)}}const baseFields=[new FieldDesc("doc",{init(et){return et.doc||et.schema.topNodeType.createAndFill()},apply(et){return et.doc}}),new FieldDesc("selection",{init(et,dt){return et.selection||Selection.atStart(dt.doc)},apply(et){return et.selection}}),new FieldDesc("storedMarks",{init(et){return et.storedMarks||null},apply(et,dt,kt,$t){return $t.selection.$cursor?et.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(et,dt){return et.scrolledIntoView?dt+1:dt}})];class Configuration{constructor(dt,kt){this.schema=dt,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),kt&&kt.forEach($t=>{if(this.pluginsByKey[$t.key])throw new RangeError("Adding different instances of a keyed plugin ("+$t.key+")");this.plugins.push($t),this.pluginsByKey[$t.key]=$t,$t.spec.state&&this.fields.push(new FieldDesc($t.key,$t.spec.state,$t))})}}class EditorState{constructor(dt){this.config=dt}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(dt){return this.applyTransaction(dt).state}filterTransaction(dt,kt=-1){for(let $t=0;$t<this.config.plugins.length;$t++)if($t!=kt){let Tt=this.config.plugins[$t];if(Tt.spec.filterTransaction&&!Tt.spec.filterTransaction.call(Tt,dt,this))return!1}return!0}applyTransaction(dt){if(!this.filterTransaction(dt))return{state:this,transactions:[]};let kt=[dt],$t=this.applyInner(dt),Tt=null;for(;;){let Dt=!1;for(let Ft=0;Ft<this.config.plugins.length;Ft++){let Ut=this.config.plugins[Ft];if(Ut.spec.appendTransaction){let Ht=Tt?Tt[Ft].n:0,Kt=Tt?Tt[Ft].state:this,Yt=Ht<kt.length&&Ut.spec.appendTransaction.call(Ut,Ht?kt.slice(Ht):kt,Kt,$t);if(Yt&&$t.filterTransaction(Yt,Ft)){if(Yt.setMeta("appendedTransaction",dt),!Tt){Tt=[];for(let Jt=0;Jt<this.config.plugins.length;Jt++)Tt.push(Jt<Ft?{state:$t,n:kt.length}:{state:this,n:0})}kt.push(Yt),$t=$t.applyInner(Yt),Dt=!0}Tt&&(Tt[Ft]={state:$t,n:kt.length})}}if(!Dt)return{state:$t,transactions:kt}}}applyInner(dt){if(!dt.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let kt=new EditorState(this.config),$t=this.config.fields;for(let Tt=0;Tt<$t.length;Tt++){let Dt=$t[Tt];kt[Dt.name]=Dt.apply(dt,this[Dt.name],this,kt)}return kt}get tr(){return new Transaction(this)}static create(dt){let kt=new Configuration(dt.doc?dt.doc.type.schema:dt.schema,dt.plugins),$t=new EditorState(kt);for(let Tt=0;Tt<kt.fields.length;Tt++)$t[kt.fields[Tt].name]=kt.fields[Tt].init(dt,$t);return $t}reconfigure(dt){let kt=new Configuration(this.schema,dt.plugins),$t=kt.fields,Tt=new EditorState(kt);for(let Dt=0;Dt<$t.length;Dt++){let Ft=$t[Dt].name;Tt[Ft]=this.hasOwnProperty(Ft)?this[Ft]:$t[Dt].init(dt,Tt)}return Tt}toJSON(dt){let kt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(kt.storedMarks=this.storedMarks.map($t=>$t.toJSON())),dt&&typeof dt=="object")for(let $t in dt){if($t=="doc"||$t=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let Tt=dt[$t],Dt=Tt.spec.state;Dt&&Dt.toJSON&&(kt[$t]=Dt.toJSON.call(Tt,this[Tt.key]))}return kt}static fromJSON(dt,kt,$t){if(!kt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!dt.schema)throw new RangeError("Required config field 'schema' missing");let Tt=new Configuration(dt.schema,dt.plugins),Dt=new EditorState(Tt);return Tt.fields.forEach(Ft=>{if(Ft.name=="doc")Dt.doc=Node$1.fromJSON(dt.schema,kt.doc);else if(Ft.name=="selection")Dt.selection=Selection.fromJSON(Dt.doc,kt.selection);else if(Ft.name=="storedMarks")kt.storedMarks&&(Dt.storedMarks=kt.storedMarks.map(dt.schema.markFromJSON));else{if($t)for(let Ut in $t){let Ht=$t[Ut],Kt=Ht.spec.state;if(Ht.key==Ft.name&&Kt&&Kt.fromJSON&&Object.prototype.hasOwnProperty.call(kt,Ut)){Dt[Ft.name]=Kt.fromJSON.call(Ht,dt,kt[Ut],Dt);return}}Dt[Ft.name]=Ft.init(dt,Dt)}}),Dt}}function bindProps(et,dt,kt){for(let $t in et){let Tt=et[$t];Tt instanceof Function?Tt=Tt.bind(dt):$t=="handleDOMEvents"&&(Tt=bindProps(Tt,dt,{})),kt[$t]=Tt}return kt}class Plugin{constructor(dt){this.spec=dt,this.props={},dt.props&&bindProps(dt.props,this,this.props),this.key=dt.key?dt.key.key:createKey("plugin")}getState(dt){return dt[this.key]}}const keys$6=Object.create(null);function createKey(et){return et in keys$6?et+"$"+ ++keys$6[et]:(keys$6[et]=0,et+"$")}class PluginKey{constructor(dt="key"){this.key=createKey(dt)}get(dt){return dt.config.pluginsByKey[this.key]}getState(dt){return dt[this.key]}}const deleteSelection$1=(et,dt)=>et.selection.empty?!1:(dt&&dt(et.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(et,dt){let{$cursor:kt}=et.selection;return!kt||(dt?!dt.endOfTextblock("backward",et):kt.parentOffset>0)?null:kt}const joinBackward$1=(et,dt,kt)=>{let $t=atBlockStart(et,kt);if(!$t)return!1;let Tt=findCutBefore($t);if(!Tt){let Ft=$t.blockRange(),Ut=Ft&&liftTarget(Ft);return Ut==null?!1:(dt&&dt(et.tr.lift(Ft,Ut).scrollIntoView()),!0)}let Dt=Tt.nodeBefore;if(deleteBarrier(et,Tt,dt,-1))return!0;if($t.parent.content.size==0&&(textblockAt(Dt,"end")||NodeSelection.isSelectable(Dt)))for(let Ft=$t.depth;;Ft--){let Ut=replaceStep(et.doc,$t.before(Ft),$t.after(Ft),Slice.empty);if(Ut&&Ut.slice.size<Ut.to-Ut.from){if(dt){let Ht=et.tr.step(Ut);Ht.setSelection(textblockAt(Dt,"end")?Selection.findFrom(Ht.doc.resolve(Ht.mapping.map(Tt.pos,-1)),-1):NodeSelection.create(Ht.doc,Tt.pos-Dt.nodeSize)),dt(Ht.scrollIntoView())}return!0}if(Ft==1||$t.node(Ft-1).childCount>1)break}return Dt.isAtom&&Tt.depth==$t.depth-1?(dt&&dt(et.tr.delete(Tt.pos-Dt.nodeSize,Tt.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(et,dt,kt)=>{let $t=atBlockStart(et,kt);if(!$t)return!1;let Tt=findCutBefore($t);return Tt?joinTextblocksAround(et,Tt,dt):!1},joinTextblockForward$1=(et,dt,kt)=>{let $t=atBlockEnd(et,kt);if(!$t)return!1;let Tt=findCutAfter($t);return Tt?joinTextblocksAround(et,Tt,dt):!1};function joinTextblocksAround(et,dt,kt){let $t=dt.nodeBefore,Tt=$t,Dt=dt.pos-1;for(;!Tt.isTextblock;Dt--){if(Tt.type.spec.isolating)return!1;let Yt=Tt.lastChild;if(!Yt)return!1;Tt=Yt}let Ft=dt.nodeAfter,Ut=Ft,Ht=dt.pos+1;for(;!Ut.isTextblock;Ht++){if(Ut.type.spec.isolating)return!1;let Yt=Ut.firstChild;if(!Yt)return!1;Ut=Yt}let Kt=replaceStep(et.doc,Dt,Ht,Slice.empty);if(!Kt||Kt.from!=Dt||Kt instanceof ReplaceStep&&Kt.slice.size>=Ht-Dt)return!1;if(kt){let Yt=et.tr.step(Kt);Yt.setSelection(TextSelection.create(Yt.doc,Dt)),kt(Yt.scrollIntoView())}return!0}function textblockAt(et,dt,kt=!1){for(let $t=et;$t;$t=dt=="start"?$t.firstChild:$t.lastChild){if($t.isTextblock)return!0;if(kt&&$t.childCount!=1)return!1}return!1}const selectNodeBackward$1=(et,dt,kt)=>{let{$head:$t,empty:Tt}=et.selection,Dt=$t;if(!Tt)return!1;if($t.parent.isTextblock){if(kt?!kt.endOfTextblock("backward",et):$t.parentOffset>0)return!1;Dt=findCutBefore($t)}let Ft=Dt&&Dt.nodeBefore;return!Ft||!NodeSelection.isSelectable(Ft)?!1:(dt&&dt(et.tr.setSelection(NodeSelection.create(et.doc,Dt.pos-Ft.nodeSize)).scrollIntoView()),!0)};function findCutBefore(et){if(!et.parent.type.spec.isolating)for(let dt=et.depth-1;dt>=0;dt--){if(et.index(dt)>0)return et.doc.resolve(et.before(dt+1));if(et.node(dt).type.spec.isolating)break}return null}function atBlockEnd(et,dt){let{$cursor:kt}=et.selection;return!kt||(dt?!dt.endOfTextblock("forward",et):kt.parentOffset<kt.parent.content.size)?null:kt}const joinForward$1=(et,dt,kt)=>{let $t=atBlockEnd(et,kt);if(!$t)return!1;let Tt=findCutAfter($t);if(!Tt)return!1;let Dt=Tt.nodeAfter;if(deleteBarrier(et,Tt,dt,1))return!0;if($t.parent.content.size==0&&(textblockAt(Dt,"start")||NodeSelection.isSelectable(Dt))){let Ft=replaceStep(et.doc,$t.before(),$t.after(),Slice.empty);if(Ft&&Ft.slice.size<Ft.to-Ft.from){if(dt){let Ut=et.tr.step(Ft);Ut.setSelection(textblockAt(Dt,"start")?Selection.findFrom(Ut.doc.resolve(Ut.mapping.map(Tt.pos)),1):NodeSelection.create(Ut.doc,Ut.mapping.map(Tt.pos))),dt(Ut.scrollIntoView())}return!0}}return Dt.isAtom&&Tt.depth==$t.depth-1?(dt&&dt(et.tr.delete(Tt.pos,Tt.pos+Dt.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(et,dt,kt)=>{let{$head:$t,empty:Tt}=et.selection,Dt=$t;if(!Tt)return!1;if($t.parent.isTextblock){if(kt?!kt.endOfTextblock("forward",et):$t.parentOffset<$t.parent.content.size)return!1;Dt=findCutAfter($t)}let Ft=Dt&&Dt.nodeAfter;return!Ft||!NodeSelection.isSelectable(Ft)?!1:(dt&&dt(et.tr.setSelection(NodeSelection.create(et.doc,Dt.pos)).scrollIntoView()),!0)};function findCutAfter(et){if(!et.parent.type.spec.isolating)for(let dt=et.depth-1;dt>=0;dt--){let kt=et.node(dt);if(et.index(dt)+1<kt.childCount)return et.doc.resolve(et.after(dt+1));if(kt.type.spec.isolating)break}return null}const joinUp$1=(et,dt)=>{let kt=et.selection,$t=kt instanceof NodeSelection,Tt;if($t){if(kt.node.isTextblock||!canJoin(et.doc,kt.from))return!1;Tt=kt.from}else if(Tt=joinPoint(et.doc,kt.from,-1),Tt==null)return!1;if(dt){let Dt=et.tr.join(Tt);$t&&Dt.setSelection(NodeSelection.create(Dt.doc,Tt-et.doc.resolve(Tt).nodeBefore.nodeSize)),dt(Dt.scrollIntoView())}return!0},joinDown$1=(et,dt)=>{let kt=et.selection,$t;if(kt instanceof NodeSelection){if(kt.node.isTextblock||!canJoin(et.doc,kt.to))return!1;$t=kt.to}else if($t=joinPoint(et.doc,kt.to,1),$t==null)return!1;return dt&&dt(et.tr.join($t).scrollIntoView()),!0},lift$1=(et,dt)=>{let{$from:kt,$to:$t}=et.selection,Tt=kt.blockRange($t),Dt=Tt&&liftTarget(Tt);return Dt==null?!1:(dt&&dt(et.tr.lift(Tt,Dt).scrollIntoView()),!0)},newlineInCode$1=(et,dt)=>{let{$head:kt,$anchor:$t}=et.selection;return!kt.parent.type.spec.code||!kt.sameParent($t)?!1:(dt&&dt(et.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(et){for(let dt=0;dt<et.edgeCount;dt++){let{type:kt}=et.edge(dt);if(kt.isTextblock&&!kt.hasRequiredAttrs())return kt}return null}const exitCode$1=(et,dt)=>{let{$head:kt,$anchor:$t}=et.selection;if(!kt.parent.type.spec.code||!kt.sameParent($t))return!1;let Tt=kt.node(-1),Dt=kt.indexAfter(-1),Ft=defaultBlockAt$1(Tt.contentMatchAt(Dt));if(!Ft||!Tt.canReplaceWith(Dt,Dt,Ft))return!1;if(dt){let Ut=kt.after(),Ht=et.tr.replaceWith(Ut,Ut,Ft.createAndFill());Ht.setSelection(Selection.near(Ht.doc.resolve(Ut),1)),dt(Ht.scrollIntoView())}return!0},createParagraphNear$1=(et,dt)=>{let kt=et.selection,{$from:$t,$to:Tt}=kt;if(kt instanceof AllSelection||$t.parent.inlineContent||Tt.parent.inlineContent)return!1;let Dt=defaultBlockAt$1(Tt.parent.contentMatchAt(Tt.indexAfter()));if(!Dt||!Dt.isTextblock)return!1;if(dt){let Ft=(!$t.parentOffset&&Tt.index()<Tt.parent.childCount?$t:Tt).pos,Ut=et.tr.insert(Ft,Dt.createAndFill());Ut.setSelection(TextSelection.create(Ut.doc,Ft+1)),dt(Ut.scrollIntoView())}return!0},liftEmptyBlock$1=(et,dt)=>{let{$cursor:kt}=et.selection;if(!kt||kt.parent.content.size)return!1;if(kt.depth>1&&kt.after()!=kt.end(-1)){let Dt=kt.before();if(canSplit(et.doc,Dt))return dt&&dt(et.tr.split(Dt).scrollIntoView()),!0}let $t=kt.blockRange(),Tt=$t&&liftTarget($t);return Tt==null?!1:(dt&&dt(et.tr.lift($t,Tt).scrollIntoView()),!0)},selectParentNode$1=(et,dt)=>{let{$from:kt,to:$t}=et.selection,Tt,Dt=kt.sharedDepth($t);return Dt==0?!1:(Tt=kt.before(Dt),dt&&dt(et.tr.setSelection(NodeSelection.create(et.doc,Tt))),!0)};function joinMaybeClear(et,dt,kt){let $t=dt.nodeBefore,Tt=dt.nodeAfter,Dt=dt.index();return!$t||!Tt||!$t.type.compatibleContent(Tt.type)?!1:!$t.content.size&&dt.parent.canReplace(Dt-1,Dt)?(kt&&kt(et.tr.delete(dt.pos-$t.nodeSize,dt.pos).scrollIntoView()),!0):!dt.parent.canReplace(Dt,Dt+1)||!(Tt.isTextblock||canJoin(et.doc,dt.pos))?!1:(kt&&kt(et.tr.join(dt.pos).scrollIntoView()),!0)}function deleteBarrier(et,dt,kt,$t){let Tt=dt.nodeBefore,Dt=dt.nodeAfter,Ft,Ut,Ht=Tt.type.spec.isolating||Dt.type.spec.isolating;if(!Ht&&joinMaybeClear(et,dt,kt))return!0;let Kt=!Ht&&dt.parent.canReplace(dt.index(),dt.index()+1);if(Kt&&(Ft=(Ut=Tt.contentMatchAt(Tt.childCount)).findWrapping(Dt.type))&&Ut.matchType(Ft[0]||Dt.type).validEnd){if(kt){let er=dt.pos+Dt.nodeSize,rr=Fragment.empty;for(let ir=Ft.length-1;ir>=0;ir--)rr=Fragment.from(Ft[ir].create(null,rr));rr=Fragment.from(Tt.copy(rr));let sr=et.tr.step(new ReplaceAroundStep(dt.pos-1,er,dt.pos,er,new Slice(rr,1,0),Ft.length,!0)),nr=sr.doc.resolve(er+2*Ft.length);nr.nodeAfter&&nr.nodeAfter.type==Tt.type&&canJoin(sr.doc,nr.pos)&&sr.join(nr.pos),kt(sr.scrollIntoView())}return!0}let Yt=Dt.type.spec.isolating||$t>0&&Ht?null:Selection.findFrom(dt,1),Jt=Yt&&Yt.$from.blockRange(Yt.$to),Zt=Jt&&liftTarget(Jt);if(Zt!=null&&Zt>=dt.depth)return kt&&kt(et.tr.lift(Jt,Zt).scrollIntoView()),!0;if(Kt&&textblockAt(Dt,"start",!0)&&textblockAt(Tt,"end")){let er=Tt,rr=[];for(;rr.push(er),!er.isTextblock;)er=er.lastChild;let sr=Dt,nr=1;for(;!sr.isTextblock;sr=sr.firstChild)nr++;if(er.canReplace(er.childCount,er.childCount,sr.content)){if(kt){let ir=Fragment.empty;for(let or=rr.length-1;or>=0;or--)ir=Fragment.from(rr[or].copy(ir));let lr=et.tr.step(new ReplaceAroundStep(dt.pos-rr.length,dt.pos+Dt.nodeSize,dt.pos+nr,dt.pos+Dt.nodeSize-nr,new Slice(ir,rr.length,0),0,!0));kt(lr.scrollIntoView())}return!0}}return!1}function selectTextblockSide(et){return function(dt,kt){let $t=dt.selection,Tt=et<0?$t.$from:$t.$to,Dt=Tt.depth;for(;Tt.node(Dt).isInline;){if(!Dt)return!1;Dt--}return Tt.node(Dt).isTextblock?(kt&&kt(dt.tr.setSelection(TextSelection.create(dt.doc,et<0?Tt.start(Dt):Tt.end(Dt)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(et,dt=null){return function(kt,$t){let{$from:Tt,$to:Dt}=kt.selection,Ft=Tt.blockRange(Dt),Ut=Ft&&findWrapping(Ft,et,dt);return Ut?($t&&$t(kt.tr.wrap(Ft,Ut).scrollIntoView()),!0):!1}}function setBlockType(et,dt=null){return function(kt,$t){let Tt=!1;for(let Dt=0;Dt<kt.selection.ranges.length&&!Tt;Dt++){let{$from:{pos:Ft},$to:{pos:Ut}}=kt.selection.ranges[Dt];kt.doc.nodesBetween(Ft,Ut,(Ht,Kt)=>{if(Tt)return!1;if(!(!Ht.isTextblock||Ht.hasMarkup(et,dt)))if(Ht.type==et)Tt=!0;else{let Yt=kt.doc.resolve(Kt),Jt=Yt.index();Tt=Yt.parent.canReplaceWith(Jt,Jt+1,et)}})}if(!Tt)return!1;if($t){let Dt=kt.tr;for(let Ft=0;Ft<kt.selection.ranges.length;Ft++){let{$from:{pos:Ut},$to:{pos:Ht}}=kt.selection.ranges[Ft];Dt.setBlockType(Ut,Ht,et,dt)}$t(Dt.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(et,dt=null){return function(kt,$t){let{$from:Tt,$to:Dt}=kt.selection,Ft=Tt.blockRange(Dt);if(!Ft)return!1;let Ut=$t?kt.tr:null;return wrapRangeInList(Ut,Ft,et,dt)?($t&&$t(Ut.scrollIntoView()),!0):!1}}function wrapRangeInList(et,dt,kt,$t=null){let Tt=!1,Dt=dt,Ft=dt.$from.doc;if(dt.depth>=2&&dt.$from.node(dt.depth-1).type.compatibleContent(kt)&&dt.startIndex==0){if(dt.$from.index(dt.depth-1)==0)return!1;let Ht=Ft.resolve(dt.start-2);Dt=new NodeRange(Ht,Ht,dt.depth),dt.endIndex<dt.parent.childCount&&(dt=new NodeRange(dt.$from,Ft.resolve(dt.$to.end(dt.depth)),dt.depth)),Tt=!0}let Ut=findWrapping(Dt,kt,$t,dt);return Ut?(et&&doWrapInList(et,dt,Ut,Tt,kt),!0):!1}function doWrapInList(et,dt,kt,$t,Tt){let Dt=Fragment.empty;for(let Yt=kt.length-1;Yt>=0;Yt--)Dt=Fragment.from(kt[Yt].type.create(kt[Yt].attrs,Dt));et.step(new ReplaceAroundStep(dt.start-($t?2:0),dt.end,dt.start,dt.end,new Slice(Dt,0,0),kt.length,!0));let Ft=0;for(let Yt=0;Yt<kt.length;Yt++)kt[Yt].type==Tt&&(Ft=Yt+1);let Ut=kt.length-Ft,Ht=dt.start+kt.length-($t?2:0),Kt=dt.parent;for(let Yt=dt.startIndex,Jt=dt.endIndex,Zt=!0;Yt<Jt;Yt++,Zt=!1)!Zt&&canSplit(et.doc,Ht,Ut)&&(et.split(Ht,Ut),Ht+=2*Ut),Ht+=Kt.child(Yt).nodeSize;return et}function liftListItem$1(et){return function(dt,kt){let{$from:$t,$to:Tt}=dt.selection,Dt=$t.blockRange(Tt,Ft=>Ft.childCount>0&&Ft.firstChild.type==et);return Dt?kt?$t.node(Dt.depth-1).type==et?liftToOuterList(dt,kt,et,Dt):liftOutOfList(dt,kt,Dt):!0:!1}}function liftToOuterList(et,dt,kt,$t){let Tt=et.tr,Dt=$t.end,Ft=$t.$to.end($t.depth);Dt<Ft&&(Tt.step(new ReplaceAroundStep(Dt-1,Ft,Dt,Ft,new Slice(Fragment.from(kt.create(null,$t.parent.copy())),1,0),1,!0)),$t=new NodeRange(Tt.doc.resolve($t.$from.pos),Tt.doc.resolve(Ft),$t.depth));const Ut=liftTarget($t);if(Ut==null)return!1;Tt.lift($t,Ut);let Ht=Tt.doc.resolve(Tt.mapping.map(Dt,-1)-1);return canJoin(Tt.doc,Ht.pos)&&Ht.nodeBefore.type==Ht.nodeAfter.type&&Tt.join(Ht.pos),dt(Tt.scrollIntoView()),!0}function liftOutOfList(et,dt,kt){let $t=et.tr,Tt=kt.parent;for(let er=kt.end,rr=kt.endIndex-1,sr=kt.startIndex;rr>sr;rr--)er-=Tt.child(rr).nodeSize,$t.delete(er-1,er+1);let Dt=$t.doc.resolve(kt.start),Ft=Dt.nodeAfter;if($t.mapping.map(kt.end)!=kt.start+Dt.nodeAfter.nodeSize)return!1;let Ut=kt.startIndex==0,Ht=kt.endIndex==Tt.childCount,Kt=Dt.node(-1),Yt=Dt.index(-1);if(!Kt.canReplace(Yt+(Ut?0:1),Yt+1,Ft.content.append(Ht?Fragment.empty:Fragment.from(Tt))))return!1;let Jt=Dt.pos,Zt=Jt+Ft.nodeSize;return $t.step(new ReplaceAroundStep(Jt-(Ut?1:0),Zt+(Ht?1:0),Jt+1,Zt-1,new Slice((Ut?Fragment.empty:Fragment.from(Tt.copy(Fragment.empty))).append(Ht?Fragment.empty:Fragment.from(Tt.copy(Fragment.empty))),Ut?0:1,Ht?0:1),Ut?0:1)),dt($t.scrollIntoView()),!0}function sinkListItem$1(et){return function(dt,kt){let{$from:$t,$to:Tt}=dt.selection,Dt=$t.blockRange(Tt,Kt=>Kt.childCount>0&&Kt.firstChild.type==et);if(!Dt)return!1;let Ft=Dt.startIndex;if(Ft==0)return!1;let Ut=Dt.parent,Ht=Ut.child(Ft-1);if(Ht.type!=et)return!1;if(kt){let Kt=Ht.lastChild&&Ht.lastChild.type==Ut.type,Yt=Fragment.from(Kt?et.create():null),Jt=new Slice(Fragment.from(et.create(null,Fragment.from(Ut.type.create(null,Yt)))),Kt?3:1,0),Zt=Dt.start,er=Dt.end;kt(dt.tr.step(new ReplaceAroundStep(Zt-(Kt?3:1),er,Zt,er,Jt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(et){for(var dt=0;;dt++)if(et=et.previousSibling,!et)return dt},parentNode=function(et){let dt=et.assignedSlot||et.parentNode;return dt&&dt.nodeType==11?dt.host:dt};let reusedRange=null;const textRange=function(et,dt,kt){let $t=reusedRange||(reusedRange=document.createRange());return $t.setEnd(et,kt??et.nodeValue.length),$t.setStart(et,dt||0),$t},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(et,dt,kt,$t){return kt&&(scanFor(et,dt,kt,$t,-1)||scanFor(et,dt,kt,$t,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(et,dt,kt,$t,Tt){for(var Dt;;){if(et==kt&&dt==$t)return!0;if(dt==(Tt<0?0:nodeSize(et))){let Ft=et.parentNode;if(!Ft||Ft.nodeType!=1||hasBlockDesc(et)||atomElements.test(et.nodeName)||et.contentEditable=="false")return!1;dt=domIndex(et)+(Tt<0?0:1),et=Ft}else if(et.nodeType==1){let Ft=et.childNodes[dt+(Tt<0?-1:0)];if(Ft.nodeType==1&&Ft.contentEditable=="false")if(!((Dt=Ft.pmViewDesc)===null||Dt===void 0)&&Dt.ignoreForSelection)dt+=Tt;else return!1;else et=Ft,dt=Tt<0?nodeSize(et):0}else return!1}}function nodeSize(et){return et.nodeType==3?et.nodeValue.length:et.childNodes.length}function textNodeBefore$1(et,dt){for(;;){if(et.nodeType==3&&dt)return et;if(et.nodeType==1&&dt>0){if(et.contentEditable=="false")return null;et=et.childNodes[dt-1],dt=nodeSize(et)}else if(et.parentNode&&!hasBlockDesc(et))dt=domIndex(et),et=et.parentNode;else return null}}function textNodeAfter$1(et,dt){for(;;){if(et.nodeType==3&&dt<et.nodeValue.length)return et;if(et.nodeType==1&&dt<et.childNodes.length){if(et.contentEditable=="false")return null;et=et.childNodes[dt],dt=0}else if(et.parentNode&&!hasBlockDesc(et))dt=domIndex(et)+1,et=et.parentNode;else return null}}function isOnEdge(et,dt,kt){for(let $t=dt==0,Tt=dt==nodeSize(et);$t||Tt;){if(et==kt)return!0;let Dt=domIndex(et);if(et=et.parentNode,!et)return!1;$t=$t&&Dt==0,Tt=Tt&&Dt==nodeSize(et)}}function hasBlockDesc(et){let dt;for(let kt=et;kt&&!(dt=kt.pmViewDesc);kt=kt.parentNode);return dt&&dt.node&&dt.node.isBlock&&(dt.dom==et||dt.contentDOM==et)}const selectionCollapsed=function(et){return et.focusNode&&isEquivalentPosition(et.focusNode,et.focusOffset,et.anchorNode,et.anchorOffset)};function keyEvent(et,dt){let kt=document.createEvent("Event");return kt.initEvent("keydown",!0,!0),kt.keyCode=et,kt.key=kt.code=dt,kt}function deepActiveElement(et){let dt=et.activeElement;for(;dt&&dt.shadowRoot;)dt=dt.shadowRoot.activeElement;return dt}function caretFromPoint(et,dt,kt){if(et.caretPositionFromPoint)try{let $t=et.caretPositionFromPoint(dt,kt);if($t)return{node:$t.offsetNode,offset:Math.min(nodeSize($t.offsetNode),$t.offset)}}catch{}if(et.caretRangeFromPoint){let $t=et.caretRangeFromPoint(dt,kt);if($t)return{node:$t.startContainer,offset:Math.min(nodeSize($t.startContainer),$t.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome$1=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome$1,chrome_version=_chrome$1?+_chrome$1[1]:0,safari=!ie$2&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(et){let dt=et.defaultView&&et.defaultView.visualViewport;return dt?{left:0,right:dt.width,top:0,bottom:dt.height}:{left:0,right:et.documentElement.clientWidth,top:0,bottom:et.documentElement.clientHeight}}function getSide(et,dt){return typeof et=="number"?et:et[dt]}function clientRect(et){let dt=et.getBoundingClientRect(),kt=dt.width/et.offsetWidth||1,$t=dt.height/et.offsetHeight||1;return{left:dt.left,right:dt.left+et.clientWidth*kt,top:dt.top,bottom:dt.top+et.clientHeight*$t}}function scrollRectIntoView(et,dt,kt){let $t=et.someProp("scrollThreshold")||0,Tt=et.someProp("scrollMargin")||5,Dt=et.dom.ownerDocument;for(let Ft=kt||et.dom;Ft;){if(Ft.nodeType!=1){Ft=parentNode(Ft);continue}let Ut=Ft,Ht=Ut==Dt.body,Kt=Ht?windowRect(Dt):clientRect(Ut),Yt=0,Jt=0;if(dt.top<Kt.top+getSide($t,"top")?Jt=-(Kt.top-dt.top+getSide(Tt,"top")):dt.bottom>Kt.bottom-getSide($t,"bottom")&&(Jt=dt.bottom-dt.top>Kt.bottom-Kt.top?dt.top+getSide(Tt,"top")-Kt.top:dt.bottom-Kt.bottom+getSide(Tt,"bottom")),dt.left<Kt.left+getSide($t,"left")?Yt=-(Kt.left-dt.left+getSide(Tt,"left")):dt.right>Kt.right-getSide($t,"right")&&(Yt=dt.right-Kt.right+getSide(Tt,"right")),Yt||Jt)if(Ht)Dt.defaultView.scrollBy(Yt,Jt);else{let er=Ut.scrollLeft,rr=Ut.scrollTop;Jt&&(Ut.scrollTop+=Jt),Yt&&(Ut.scrollLeft+=Yt);let sr=Ut.scrollLeft-er,nr=Ut.scrollTop-rr;dt={left:dt.left-sr,top:dt.top-nr,right:dt.right-sr,bottom:dt.bottom-nr}}let Zt=Ht?"fixed":getComputedStyle(Ft).position;if(/^(fixed|sticky)$/.test(Zt))break;Ft=Zt=="absolute"?Ft.offsetParent:parentNode(Ft)}}function storeScrollPos(et){let dt=et.dom.getBoundingClientRect(),kt=Math.max(0,dt.top),$t,Tt;for(let Dt=(dt.left+dt.right)/2,Ft=kt+1;Ft<Math.min(innerHeight,dt.bottom);Ft+=5){let Ut=et.root.elementFromPoint(Dt,Ft);if(!Ut||Ut==et.dom||!et.dom.contains(Ut))continue;let Ht=Ut.getBoundingClientRect();if(Ht.top>=kt-20){$t=Ut,Tt=Ht.top;break}}return{refDOM:$t,refTop:Tt,stack:scrollStack(et.dom)}}function scrollStack(et){let dt=[],kt=et.ownerDocument;for(let $t=et;$t&&(dt.push({dom:$t,top:$t.scrollTop,left:$t.scrollLeft}),et!=kt);$t=parentNode($t));return dt}function resetScrollPos({refDOM:et,refTop:dt,stack:kt}){let $t=et?et.getBoundingClientRect().top:0;restoreScrollStack(kt,$t==0?0:$t-dt)}function restoreScrollStack(et,dt){for(let kt=0;kt<et.length;kt++){let{dom:$t,top:Tt,left:Dt}=et[kt];$t.scrollTop!=Tt+dt&&($t.scrollTop=Tt+dt),$t.scrollLeft!=Dt&&($t.scrollLeft=Dt)}}let preventScrollSupported=null;function focusPreventScroll(et){if(et.setActive)return et.setActive();if(preventScrollSupported)return et.focus(preventScrollSupported);let dt=scrollStack(et);et.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(dt,0))}function findOffsetInNode(et,dt){let kt,$t=2e8,Tt,Dt=0,Ft=dt.top,Ut=dt.top,Ht,Kt;for(let Yt=et.firstChild,Jt=0;Yt;Yt=Yt.nextSibling,Jt++){let Zt;if(Yt.nodeType==1)Zt=Yt.getClientRects();else if(Yt.nodeType==3)Zt=textRange(Yt).getClientRects();else continue;for(let er=0;er<Zt.length;er++){let rr=Zt[er];if(rr.top<=Ft&&rr.bottom>=Ut){Ft=Math.max(rr.bottom,Ft),Ut=Math.min(rr.top,Ut);let sr=rr.left>dt.left?rr.left-dt.left:rr.right<dt.left?dt.left-rr.right:0;if(sr<$t){kt=Yt,$t=sr,Tt=sr&&kt.nodeType==3?{left:rr.right<dt.left?rr.right:rr.left,top:dt.top}:dt,Yt.nodeType==1&&sr&&(Dt=Jt+(dt.left>=(rr.left+rr.right)/2?1:0));continue}}else rr.top>dt.top&&!Ht&&rr.left<=dt.left&&rr.right>=dt.left&&(Ht=Yt,Kt={left:Math.max(rr.left,Math.min(rr.right,dt.left)),top:rr.top});!kt&&(dt.left>=rr.right&&dt.top>=rr.top||dt.left>=rr.left&&dt.top>=rr.bottom)&&(Dt=Jt+1)}}return!kt&&Ht&&(kt=Ht,Tt=Kt,$t=0),kt&&kt.nodeType==3?findOffsetInText(kt,Tt):!kt||$t&&kt.nodeType==1?{node:et,offset:Dt}:findOffsetInNode(kt,Tt)}function findOffsetInText(et,dt){let kt=et.nodeValue.length,$t=document.createRange();for(let Tt=0;Tt<kt;Tt++){$t.setEnd(et,Tt+1),$t.setStart(et,Tt);let Dt=singleRect($t,1);if(Dt.top!=Dt.bottom&&inRect(dt,Dt))return{node:et,offset:Tt+(dt.left>=(Dt.left+Dt.right)/2?1:0)}}return{node:et,offset:0}}function inRect(et,dt){return et.left>=dt.left-1&&et.left<=dt.right+1&&et.top>=dt.top-1&&et.top<=dt.bottom+1}function targetKludge(et,dt){let kt=et.parentNode;return kt&&/^li$/i.test(kt.nodeName)&&dt.left<et.getBoundingClientRect().left?kt:et}function posFromElement(et,dt,kt){let{node:$t,offset:Tt}=findOffsetInNode(dt,kt),Dt=-1;if($t.nodeType==1&&!$t.firstChild){let Ft=$t.getBoundingClientRect();Dt=Ft.left!=Ft.right&&kt.left>(Ft.left+Ft.right)/2?1:-1}return et.docView.posFromDOM($t,Tt,Dt)}function posFromCaret(et,dt,kt,$t){let Tt=-1;for(let Dt=dt,Ft=!1;Dt!=et.dom;){let Ut=et.docView.nearestDesc(Dt,!0),Ht;if(!Ut)return null;if(Ut.dom.nodeType==1&&(Ut.node.isBlock&&Ut.parent||!Ut.contentDOM)&&((Ht=Ut.dom.getBoundingClientRect()).width||Ht.height)&&(Ut.node.isBlock&&Ut.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(Ut.dom.nodeName)&&(!Ft&&Ht.left>$t.left||Ht.top>$t.top?Tt=Ut.posBefore:(!Ft&&Ht.right<$t.left||Ht.bottom<$t.top)&&(Tt=Ut.posAfter),Ft=!0),!Ut.contentDOM&&Tt<0&&!Ut.node.isText))return(Ut.node.isBlock?$t.top<(Ht.top+Ht.bottom)/2:$t.left<(Ht.left+Ht.right)/2)?Ut.posBefore:Ut.posAfter;Dt=Ut.dom.parentNode}return Tt>-1?Tt:et.docView.posFromDOM(dt,kt,-1)}function elementFromPoint(et,dt,kt){let $t=et.childNodes.length;if($t&&kt.top<kt.bottom)for(let Tt=Math.max(0,Math.min($t-1,Math.floor($t*(dt.top-kt.top)/(kt.bottom-kt.top))-2)),Dt=Tt;;){let Ft=et.childNodes[Dt];if(Ft.nodeType==1){let Ut=Ft.getClientRects();for(let Ht=0;Ht<Ut.length;Ht++){let Kt=Ut[Ht];if(inRect(dt,Kt))return elementFromPoint(Ft,dt,Kt)}}if((Dt=(Dt+1)%$t)==Tt)break}return et}function posAtCoords(et,dt){let kt=et.dom.ownerDocument,$t,Tt=0,Dt=caretFromPoint(kt,dt.left,dt.top);Dt&&({node:$t,offset:Tt}=Dt);let Ft=(et.root.elementFromPoint?et.root:kt).elementFromPoint(dt.left,dt.top),Ut;if(!Ft||!et.dom.contains(Ft.nodeType!=1?Ft.parentNode:Ft)){let Kt=et.dom.getBoundingClientRect();if(!inRect(dt,Kt)||(Ft=elementFromPoint(et.dom,dt,Kt),!Ft))return null}if(safari)for(let Kt=Ft;$t&&Kt;Kt=parentNode(Kt))Kt.draggable&&($t=void 0);if(Ft=targetKludge(Ft,dt),$t){if(gecko&&$t.nodeType==1&&(Tt=Math.min(Tt,$t.childNodes.length),Tt<$t.childNodes.length)){let Yt=$t.childNodes[Tt],Jt;Yt.nodeName=="IMG"&&(Jt=Yt.getBoundingClientRect()).right<=dt.left&&Jt.bottom>dt.top&&Tt++}let Kt;webkit&&Tt&&$t.nodeType==1&&(Kt=$t.childNodes[Tt-1]).nodeType==1&&Kt.contentEditable=="false"&&Kt.getBoundingClientRect().top>=dt.top&&Tt--,$t==et.dom&&Tt==$t.childNodes.length-1&&$t.lastChild.nodeType==1&&dt.top>$t.lastChild.getBoundingClientRect().bottom?Ut=et.state.doc.content.size:(Tt==0||$t.nodeType!=1||$t.childNodes[Tt-1].nodeName!="BR")&&(Ut=posFromCaret(et,$t,Tt,dt))}Ut==null&&(Ut=posFromElement(et,Ft,dt));let Ht=et.docView.nearestDesc(Ft,!0);return{pos:Ut,inside:Ht?Ht.posAtStart-Ht.border:-1}}function nonZero(et){return et.top<et.bottom||et.left<et.right}function singleRect(et,dt){let kt=et.getClientRects();if(kt.length){let $t=kt[dt<0?0:kt.length-1];if(nonZero($t))return $t}return Array.prototype.find.call(kt,nonZero)||et.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(et,dt,kt){let{node:$t,offset:Tt,atom:Dt}=et.docView.domFromPos(dt,kt<0?-1:1),Ft=webkit||gecko;if($t.nodeType==3)if(Ft&&(BIDI.test($t.nodeValue)||(kt<0?!Tt:Tt==$t.nodeValue.length))){let Ht=singleRect(textRange($t,Tt,Tt),kt);if(gecko&&Tt&&/\s/.test($t.nodeValue[Tt-1])&&Tt<$t.nodeValue.length){let Kt=singleRect(textRange($t,Tt-1,Tt-1),-1);if(Kt.top==Ht.top){let Yt=singleRect(textRange($t,Tt,Tt+1),-1);if(Yt.top!=Ht.top)return flattenV(Yt,Yt.left<Kt.left)}}return Ht}else{let Ht=Tt,Kt=Tt,Yt=kt<0?1:-1;return kt<0&&!Tt?(Kt++,Yt=-1):kt>=0&&Tt==$t.nodeValue.length?(Ht--,Yt=1):kt<0?Ht--:Kt++,flattenV(singleRect(textRange($t,Ht,Kt),Yt),Yt<0)}if(!et.state.doc.resolve(dt-(Dt||0)).parent.inlineContent){if(Dt==null&&Tt&&(kt<0||Tt==nodeSize($t))){let Ht=$t.childNodes[Tt-1];if(Ht.nodeType==1)return flattenH(Ht.getBoundingClientRect(),!1)}if(Dt==null&&Tt<nodeSize($t)){let Ht=$t.childNodes[Tt];if(Ht.nodeType==1)return flattenH(Ht.getBoundingClientRect(),!0)}return flattenH($t.getBoundingClientRect(),kt>=0)}if(Dt==null&&Tt&&(kt<0||Tt==nodeSize($t))){let Ht=$t.childNodes[Tt-1],Kt=Ht.nodeType==3?textRange(Ht,nodeSize(Ht)-(Ft?0:1)):Ht.nodeType==1&&(Ht.nodeName!="BR"||!Ht.nextSibling)?Ht:null;if(Kt)return flattenV(singleRect(Kt,1),!1)}if(Dt==null&&Tt<nodeSize($t)){let Ht=$t.childNodes[Tt];for(;Ht.pmViewDesc&&Ht.pmViewDesc.ignoreForCoords;)Ht=Ht.nextSibling;let Kt=Ht?Ht.nodeType==3?textRange(Ht,0,Ft?0:1):Ht.nodeType==1?Ht:null:null;if(Kt)return flattenV(singleRect(Kt,-1),!0)}return flattenV(singleRect($t.nodeType==3?textRange($t):$t,-kt),kt>=0)}function flattenV(et,dt){if(et.width==0)return et;let kt=dt?et.left:et.right;return{top:et.top,bottom:et.bottom,left:kt,right:kt}}function flattenH(et,dt){if(et.height==0)return et;let kt=dt?et.top:et.bottom;return{top:kt,bottom:kt,left:et.left,right:et.right}}function withFlushedState(et,dt,kt){let $t=et.state,Tt=et.root.activeElement;$t!=dt&&et.updateState(dt),Tt!=et.dom&&et.focus();try{return kt()}finally{$t!=dt&&et.updateState($t),Tt!=et.dom&&Tt&&Tt.focus()}}function endOfTextblockVertical(et,dt,kt){let $t=dt.selection,Tt=kt=="up"?$t.$from:$t.$to;return withFlushedState(et,dt,()=>{let{node:Dt}=et.docView.domFromPos(Tt.pos,kt=="up"?-1:1);for(;;){let Ut=et.docView.nearestDesc(Dt,!0);if(!Ut)break;if(Ut.node.isBlock){Dt=Ut.contentDOM||Ut.dom;break}Dt=Ut.dom.parentNode}let Ft=coordsAtPos(et,Tt.pos,1);for(let Ut=Dt.firstChild;Ut;Ut=Ut.nextSibling){let Ht;if(Ut.nodeType==1)Ht=Ut.getClientRects();else if(Ut.nodeType==3)Ht=textRange(Ut,0,Ut.nodeValue.length).getClientRects();else continue;for(let Kt=0;Kt<Ht.length;Kt++){let Yt=Ht[Kt];if(Yt.bottom>Yt.top+1&&(kt=="up"?Ft.top-Yt.top>(Yt.bottom-Ft.top)*2:Yt.bottom-Ft.bottom>(Ft.bottom-Yt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(et,dt,kt){let{$head:$t}=dt.selection;if(!$t.parent.isTextblock)return!1;let Tt=$t.parentOffset,Dt=!Tt,Ft=Tt==$t.parent.content.size,Ut=et.domSelection();return Ut?!maybeRTL.test($t.parent.textContent)||!Ut.modify?kt=="left"||kt=="backward"?Dt:Ft:withFlushedState(et,dt,()=>{let{focusNode:Ht,focusOffset:Kt,anchorNode:Yt,anchorOffset:Jt}=et.domSelectionRange(),Zt=Ut.caretBidiLevel;Ut.modify("move",kt,"character");let er=$t.depth?et.docView.domAfterPos($t.before()):et.dom,{focusNode:rr,focusOffset:sr}=et.domSelectionRange(),nr=rr&&!er.contains(rr.nodeType==1?rr:rr.parentNode)||Ht==rr&&Kt==sr;try{Ut.collapse(Yt,Jt),Ht&&(Ht!=Yt||Kt!=Jt)&&Ut.extend&&Ut.extend(Ht,Kt)}catch{}return Zt!=null&&(Ut.caretBidiLevel=Zt),nr}):$t.pos==$t.start()||$t.pos==$t.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(et,dt,kt){return cachedState==dt&&cachedDir==kt?cachedResult:(cachedState=dt,cachedDir=kt,cachedResult=kt=="up"||kt=="down"?endOfTextblockVertical(et,dt,kt):endOfTextblockHorizontal(et,dt,kt))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(dt,kt,$t,Tt){this.parent=dt,this.children=kt,this.dom=$t,this.contentDOM=Tt,this.dirty=NOT_DIRTY,$t.pmViewDesc=this}matchesWidget(dt){return!1}matchesMark(dt){return!1}matchesNode(dt,kt,$t){return!1}matchesHack(dt){return!1}parseRule(){return null}stopEvent(dt){return!1}get size(){let dt=0;for(let kt=0;kt<this.children.length;kt++)dt+=this.children[kt].size;return dt}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let dt=0;dt<this.children.length;dt++)this.children[dt].destroy()}posBeforeChild(dt){for(let kt=0,$t=this.posAtStart;;kt++){let Tt=this.children[kt];if(Tt==dt)return $t;$t+=Tt.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(dt,kt,$t){if(this.contentDOM&&this.contentDOM.contains(dt.nodeType==1?dt:dt.parentNode))if($t<0){let Dt,Ft;if(dt==this.contentDOM)Dt=dt.childNodes[kt-1];else{for(;dt.parentNode!=this.contentDOM;)dt=dt.parentNode;Dt=dt.previousSibling}for(;Dt&&!((Ft=Dt.pmViewDesc)&&Ft.parent==this);)Dt=Dt.previousSibling;return Dt?this.posBeforeChild(Ft)+Ft.size:this.posAtStart}else{let Dt,Ft;if(dt==this.contentDOM)Dt=dt.childNodes[kt];else{for(;dt.parentNode!=this.contentDOM;)dt=dt.parentNode;Dt=dt.nextSibling}for(;Dt&&!((Ft=Dt.pmViewDesc)&&Ft.parent==this);)Dt=Dt.nextSibling;return Dt?this.posBeforeChild(Ft):this.posAtEnd}let Tt;if(dt==this.dom&&this.contentDOM)Tt=kt>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))Tt=dt.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(kt==0)for(let Dt=dt;;Dt=Dt.parentNode){if(Dt==this.dom){Tt=!1;break}if(Dt.previousSibling)break}if(Tt==null&&kt==dt.childNodes.length)for(let Dt=dt;;Dt=Dt.parentNode){if(Dt==this.dom){Tt=!0;break}if(Dt.nextSibling)break}}return Tt??$t>0?this.posAtEnd:this.posAtStart}nearestDesc(dt,kt=!1){for(let $t=!0,Tt=dt;Tt;Tt=Tt.parentNode){let Dt=this.getDesc(Tt),Ft;if(Dt&&(!kt||Dt.node))if($t&&(Ft=Dt.nodeDOM)&&!(Ft.nodeType==1?Ft.contains(dt.nodeType==1?dt:dt.parentNode):Ft==dt))$t=!1;else return Dt}}getDesc(dt){let kt=dt.pmViewDesc;for(let $t=kt;$t;$t=$t.parent)if($t==this)return kt}posFromDOM(dt,kt,$t){for(let Tt=dt;Tt;Tt=Tt.parentNode){let Dt=this.getDesc(Tt);if(Dt)return Dt.localPosFromDOM(dt,kt,$t)}return-1}descAt(dt){for(let kt=0,$t=0;kt<this.children.length;kt++){let Tt=this.children[kt],Dt=$t+Tt.size;if($t==dt&&Dt!=$t){for(;!Tt.border&&Tt.children.length;)for(let Ft=0;Ft<Tt.children.length;Ft++){let Ut=Tt.children[Ft];if(Ut.size){Tt=Ut;break}}return Tt}if(dt<Dt)return Tt.descAt(dt-$t-Tt.border);$t=Dt}}domFromPos(dt,kt){if(!this.contentDOM)return{node:this.dom,offset:0,atom:dt+1};let $t=0,Tt=0;for(let Dt=0;$t<this.children.length;$t++){let Ft=this.children[$t],Ut=Dt+Ft.size;if(Ut>dt||Ft instanceof TrailingHackViewDesc){Tt=dt-Dt;break}Dt=Ut}if(Tt)return this.children[$t].domFromPos(Tt-this.children[$t].border,kt);for(let Dt;$t&&!(Dt=this.children[$t-1]).size&&Dt instanceof WidgetViewDesc&&Dt.side>=0;$t--);if(kt<=0){let Dt,Ft=!0;for(;Dt=$t?this.children[$t-1]:null,!(!Dt||Dt.dom.parentNode==this.contentDOM);$t--,Ft=!1);return Dt&&kt&&Ft&&!Dt.border&&!Dt.domAtom?Dt.domFromPos(Dt.size,kt):{node:this.contentDOM,offset:Dt?domIndex(Dt.dom)+1:0}}else{let Dt,Ft=!0;for(;Dt=$t<this.children.length?this.children[$t]:null,!(!Dt||Dt.dom.parentNode==this.contentDOM);$t++,Ft=!1);return Dt&&Ft&&!Dt.border&&!Dt.domAtom?Dt.domFromPos(0,kt):{node:this.contentDOM,offset:Dt?domIndex(Dt.dom):this.contentDOM.childNodes.length}}}parseRange(dt,kt,$t=0){if(this.children.length==0)return{node:this.contentDOM,from:dt,to:kt,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let Tt=-1,Dt=-1;for(let Ft=$t,Ut=0;;Ut++){let Ht=this.children[Ut],Kt=Ft+Ht.size;if(Tt==-1&&dt<=Kt){let Yt=Ft+Ht.border;if(dt>=Yt&&kt<=Kt-Ht.border&&Ht.node&&Ht.contentDOM&&this.contentDOM.contains(Ht.contentDOM))return Ht.parseRange(dt,kt,Yt);dt=Ft;for(let Jt=Ut;Jt>0;Jt--){let Zt=this.children[Jt-1];if(Zt.size&&Zt.dom.parentNode==this.contentDOM&&!Zt.emptyChildAt(1)){Tt=domIndex(Zt.dom)+1;break}dt-=Zt.size}Tt==-1&&(Tt=0)}if(Tt>-1&&(Kt>kt||Ut==this.children.length-1)){kt=Kt;for(let Yt=Ut+1;Yt<this.children.length;Yt++){let Jt=this.children[Yt];if(Jt.size&&Jt.dom.parentNode==this.contentDOM&&!Jt.emptyChildAt(-1)){Dt=domIndex(Jt.dom);break}kt+=Jt.size}Dt==-1&&(Dt=this.contentDOM.childNodes.length);break}Ft=Kt}return{node:this.contentDOM,from:dt,to:kt,fromOffset:Tt,toOffset:Dt}}emptyChildAt(dt){if(this.border||!this.contentDOM||!this.children.length)return!1;let kt=this.children[dt<0?0:this.children.length-1];return kt.size==0||kt.emptyChildAt(dt)}domAfterPos(dt){let{node:kt,offset:$t}=this.domFromPos(dt,0);if(kt.nodeType!=1||$t==kt.childNodes.length)throw new RangeError("No node after pos "+dt);return kt.childNodes[$t]}setSelection(dt,kt,$t,Tt=!1){let Dt=Math.min(dt,kt),Ft=Math.max(dt,kt);for(let er=0,rr=0;er<this.children.length;er++){let sr=this.children[er],nr=rr+sr.size;if(Dt>rr&&Ft<nr)return sr.setSelection(dt-rr-sr.border,kt-rr-sr.border,$t,Tt);rr=nr}let Ut=this.domFromPos(dt,dt?-1:1),Ht=kt==dt?Ut:this.domFromPos(kt,kt?-1:1),Kt=$t.root.getSelection(),Yt=$t.domSelectionRange(),Jt=!1;if((gecko||safari)&&dt==kt){let{node:er,offset:rr}=Ut;if(er.nodeType==3){if(Jt=!!(rr&&er.nodeValue[rr-1]==`
`),Jt&&rr==er.nodeValue.length)for(let sr=er,nr;sr;sr=sr.parentNode){if(nr=sr.nextSibling){nr.nodeName=="BR"&&(Ut=Ht={node:nr.parentNode,offset:domIndex(nr)+1});break}let ir=sr.pmViewDesc;if(ir&&ir.node&&ir.node.isBlock)break}}else{let sr=er.childNodes[rr-1];Jt=sr&&(sr.nodeName=="BR"||sr.contentEditable=="false")}}if(gecko&&Yt.focusNode&&Yt.focusNode!=Ht.node&&Yt.focusNode.nodeType==1){let er=Yt.focusNode.childNodes[Yt.focusOffset];er&&er.contentEditable=="false"&&(Tt=!0)}if(!(Tt||Jt&&safari)&&isEquivalentPosition(Ut.node,Ut.offset,Yt.anchorNode,Yt.anchorOffset)&&isEquivalentPosition(Ht.node,Ht.offset,Yt.focusNode,Yt.focusOffset))return;let Zt=!1;if((Kt.extend||dt==kt)&&!(Jt&&gecko)){Kt.collapse(Ut.node,Ut.offset);try{dt!=kt&&Kt.extend(Ht.node,Ht.offset),Zt=!0}catch{}}if(!Zt){if(dt>kt){let rr=Ut;Ut=Ht,Ht=rr}let er=document.createRange();er.setEnd(Ht.node,Ht.offset),er.setStart(Ut.node,Ut.offset),Kt.removeAllRanges(),Kt.addRange(er)}}ignoreMutation(dt){return!this.contentDOM&&dt.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(dt,kt){for(let $t=0,Tt=0;Tt<this.children.length;Tt++){let Dt=this.children[Tt],Ft=$t+Dt.size;if($t==Ft?dt<=Ft&&kt>=$t:dt<Ft&&kt>$t){let Ut=$t+Dt.border,Ht=Ft-Dt.border;if(dt>=Ut&&kt<=Ht){this.dirty=dt==$t||kt==Ft?CONTENT_DIRTY:CHILD_DIRTY,dt==Ut&&kt==Ht&&(Dt.contentLost||Dt.dom.parentNode!=this.contentDOM)?Dt.dirty=NODE_DIRTY:Dt.markDirty(dt-Ut,kt-Ut);return}else Dt.dirty=Dt.dom==Dt.contentDOM&&Dt.dom.parentNode==this.contentDOM&&!Dt.children.length?CONTENT_DIRTY:NODE_DIRTY}$t=Ft}this.dirty=CONTENT_DIRTY}markParentsDirty(){let dt=1;for(let kt=this.parent;kt;kt=kt.parent,dt++){let $t=dt==1?CONTENT_DIRTY:CHILD_DIRTY;kt.dirty<$t&&(kt.dirty=$t)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(dt){return!1}}class WidgetViewDesc extends ViewDesc{constructor(dt,kt,$t,Tt){let Dt,Ft=kt.type.toDOM;if(typeof Ft=="function"&&(Ft=Ft($t,()=>{if(!Dt)return Tt;if(Dt.parent)return Dt.parent.posBeforeChild(Dt)})),!kt.type.spec.raw){if(Ft.nodeType!=1){let Ut=document.createElement("span");Ut.appendChild(Ft),Ft=Ut}Ft.contentEditable="false",Ft.classList.add("ProseMirror-widget")}super(dt,[],Ft,null),this.widget=kt,this.widget=kt,Dt=this}matchesWidget(dt){return this.dirty==NOT_DIRTY&&dt.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(dt){let kt=this.widget.spec.stopEvent;return kt?kt(dt):!1}ignoreMutation(dt){return dt.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(dt,kt,$t,Tt){super(dt,[],kt,null),this.textDOM=$t,this.text=Tt}get size(){return this.text.length}localPosFromDOM(dt,kt){return dt!=this.textDOM?this.posAtStart+(kt?this.size:0):this.posAtStart+kt}domFromPos(dt){return{node:this.textDOM,offset:dt}}ignoreMutation(dt){return dt.type==="characterData"&&dt.target.nodeValue==dt.oldValue}}class MarkViewDesc extends ViewDesc{constructor(dt,kt,$t,Tt,Dt){super(dt,[],$t,Tt),this.mark=kt,this.spec=Dt}static create(dt,kt,$t,Tt){let Dt=Tt.nodeViews[kt.type.name],Ft=Dt&&Dt(kt,Tt,$t);return(!Ft||!Ft.dom)&&(Ft=DOMSerializer.renderSpec(document,kt.type.spec.toDOM(kt,$t),null,kt.attrs)),new MarkViewDesc(dt,kt,Ft.dom,Ft.contentDOM||Ft.dom,Ft)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(dt){return this.dirty!=NODE_DIRTY&&this.mark.eq(dt)}markDirty(dt,kt){if(super.markDirty(dt,kt),this.dirty!=NOT_DIRTY){let $t=this.parent;for(;!$t.node;)$t=$t.parent;$t.dirty<this.dirty&&($t.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(dt,kt,$t){let Tt=MarkViewDesc.create(this.parent,this.mark,!0,$t),Dt=this.children,Ft=this.size;kt<Ft&&(Dt=replaceNodes(Dt,kt,Ft,$t)),dt>0&&(Dt=replaceNodes(Dt,0,dt,$t));for(let Ut=0;Ut<Dt.length;Ut++)Dt[Ut].parent=Tt;return Tt.children=Dt,Tt}ignoreMutation(dt){return this.spec.ignoreMutation?this.spec.ignoreMutation(dt):super.ignoreMutation(dt)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt){super(dt,[],Dt,Ft),this.node=kt,this.outerDeco=$t,this.innerDeco=Tt,this.nodeDOM=Ut}static create(dt,kt,$t,Tt,Dt,Ft){let Ut=Dt.nodeViews[kt.type.name],Ht,Kt=Ut&&Ut(kt,Dt,()=>{if(!Ht)return Ft;if(Ht.parent)return Ht.parent.posBeforeChild(Ht)},$t,Tt),Yt=Kt&&Kt.dom,Jt=Kt&&Kt.contentDOM;if(kt.isText){if(!Yt)Yt=document.createTextNode(kt.text);else if(Yt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Yt||({dom:Yt,contentDOM:Jt}=DOMSerializer.renderSpec(document,kt.type.spec.toDOM(kt),null,kt.attrs));!Jt&&!kt.isText&&Yt.nodeName!="BR"&&(Yt.hasAttribute("contenteditable")||(Yt.contentEditable="false"),kt.type.spec.draggable&&(Yt.draggable=!0));let Zt=Yt;return Yt=applyOuterDeco(Yt,$t,kt),Kt?Ht=new CustomNodeViewDesc(dt,kt,$t,Tt,Yt,Jt||null,Zt,Kt,Dt,Ft+1):kt.isText?new TextViewDesc(dt,kt,$t,Tt,Yt,Zt,Dt):new NodeViewDesc(dt,kt,$t,Tt,Yt,Jt||null,Zt,Dt,Ft+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let dt={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(dt.preserveWhitespace="full"),!this.contentDOM)dt.getContent=()=>this.node.content;else if(!this.contentLost)dt.contentElement=this.contentDOM;else{for(let kt=this.children.length-1;kt>=0;kt--){let $t=this.children[kt];if(this.dom.contains($t.dom.parentNode)){dt.contentElement=$t.dom.parentNode;break}}dt.contentElement||(dt.getContent=()=>Fragment.empty)}return dt}matchesNode(dt,kt,$t){return this.dirty==NOT_DIRTY&&dt.eq(this.node)&&sameOuterDeco(kt,this.outerDeco)&&$t.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(dt,kt){let $t=this.node.inlineContent,Tt=kt,Dt=dt.composing?this.localCompositionInfo(dt,kt):null,Ft=Dt&&Dt.pos>-1?Dt:null,Ut=Dt&&Dt.pos<0,Ht=new ViewTreeUpdater(this,Ft&&Ft.node,dt);iterDeco(this.node,this.innerDeco,(Kt,Yt,Jt)=>{Kt.spec.marks?Ht.syncToMarks(Kt.spec.marks,$t,dt):Kt.type.side>=0&&!Jt&&Ht.syncToMarks(Yt==this.node.childCount?Mark$1.none:this.node.child(Yt).marks,$t,dt),Ht.placeWidget(Kt,dt,Tt)},(Kt,Yt,Jt,Zt)=>{Ht.syncToMarks(Kt.marks,$t,dt);let er;Ht.findNodeMatch(Kt,Yt,Jt,Zt)||Ut&&dt.state.selection.from>Tt&&dt.state.selection.to<Tt+Kt.nodeSize&&(er=Ht.findIndexWithChild(Dt.node))>-1&&Ht.updateNodeAt(Kt,Yt,Jt,er,dt)||Ht.updateNextNode(Kt,Yt,Jt,dt,Zt,Tt)||Ht.addNode(Kt,Yt,Jt,dt,Tt),Tt+=Kt.nodeSize}),Ht.syncToMarks([],$t,dt),this.node.isTextblock&&Ht.addTextblockHacks(),Ht.destroyRest(),(Ht.changed||this.dirty==CONTENT_DIRTY)&&(Ft&&this.protectLocalComposition(dt,Ft),renderDescs(this.contentDOM,this.children,dt),ios&&iosHacks(this.dom))}localCompositionInfo(dt,kt){let{from:$t,to:Tt}=dt.state.selection;if(!(dt.state.selection instanceof TextSelection)||$t<kt||Tt>kt+this.node.content.size)return null;let Dt=dt.input.compositionNode;if(!Dt||!this.dom.contains(Dt.parentNode))return null;if(this.node.inlineContent){let Ft=Dt.nodeValue,Ut=findTextInFragment(this.node.content,Ft,$t-kt,Tt-kt);return Ut<0?null:{node:Dt,pos:Ut,text:Ft}}else return{node:Dt,pos:-1,text:""}}protectLocalComposition(dt,{node:kt,pos:$t,text:Tt}){if(this.getDesc(kt))return;let Dt=kt;for(;Dt.parentNode!=this.contentDOM;Dt=Dt.parentNode){for(;Dt.previousSibling;)Dt.parentNode.removeChild(Dt.previousSibling);for(;Dt.nextSibling;)Dt.parentNode.removeChild(Dt.nextSibling);Dt.pmViewDesc&&(Dt.pmViewDesc=void 0)}let Ft=new CompositionViewDesc(this,Dt,kt,Tt);dt.input.compositionNodes.push(Ft),this.children=replaceNodes(this.children,$t,$t+Tt.length,dt,Ft)}update(dt,kt,$t,Tt){return this.dirty==NODE_DIRTY||!dt.sameMarkup(this.node)?!1:(this.updateInner(dt,kt,$t,Tt),!0)}updateInner(dt,kt,$t,Tt){this.updateOuterDeco(kt),this.node=dt,this.innerDeco=$t,this.contentDOM&&this.updateChildren(Tt,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(dt){if(sameOuterDeco(dt,this.outerDeco))return;let kt=this.nodeDOM.nodeType!=1,$t=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,kt),computeOuterDeco(dt,this.node,kt)),this.dom!=$t&&($t.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=dt}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(et,dt,kt,$t,Tt){applyOuterDeco($t,dt,et);let Dt=new NodeViewDesc(void 0,et,dt,kt,$t,$t,$t,Tt,0);return Dt.contentDOM&&Dt.updateChildren(Tt,0),Dt}class TextViewDesc extends NodeViewDesc{constructor(dt,kt,$t,Tt,Dt,Ft,Ut){super(dt,kt,$t,Tt,Dt,null,Ft,Ut,0)}parseRule(){let dt=this.nodeDOM.parentNode;for(;dt&&dt!=this.dom&&!dt.pmIsDeco;)dt=dt.parentNode;return{skip:dt||!0}}update(dt,kt,$t,Tt){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!dt.sameMarkup(this.node)?!1:(this.updateOuterDeco(kt),(this.dirty!=NOT_DIRTY||dt.text!=this.node.text)&&dt.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=dt.text,Tt.trackWrites==this.nodeDOM&&(Tt.trackWrites=null)),this.node=dt,this.dirty=NOT_DIRTY,!0)}inParent(){let dt=this.parent.contentDOM;for(let kt=this.nodeDOM;kt;kt=kt.parentNode)if(kt==dt)return!0;return!1}domFromPos(dt){return{node:this.nodeDOM,offset:dt}}localPosFromDOM(dt,kt,$t){return dt==this.nodeDOM?this.posAtStart+Math.min(kt,this.node.text.length):super.localPosFromDOM(dt,kt,$t)}ignoreMutation(dt){return dt.type!="characterData"&&dt.type!="selection"}slice(dt,kt,$t){let Tt=this.node.cut(dt,kt),Dt=document.createTextNode(Tt.text);return new TextViewDesc(this.parent,Tt,this.outerDeco,this.innerDeco,Dt,Dt,$t)}markDirty(dt,kt){super.markDirty(dt,kt),this.dom!=this.nodeDOM&&(dt==0||kt==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(dt){return this.node.text==dt}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(dt){return this.dirty==NOT_DIRTY&&this.dom.nodeName==dt}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt,Yt){super(dt,kt,$t,Tt,Dt,Ft,Ut,Kt,Yt),this.spec=Ht}update(dt,kt,$t,Tt){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==dt.type||this.spec.multiType)){let Dt=this.spec.update(dt,kt,$t);return Dt&&this.updateInner(dt,kt,$t,Tt),Dt}else return!this.contentDOM&&!dt.isLeaf?!1:super.update(dt,kt,$t,Tt)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(dt,kt,$t,Tt){this.spec.setSelection?this.spec.setSelection(dt,kt,$t.root):super.setSelection(dt,kt,$t,Tt)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(dt){return this.spec.stopEvent?this.spec.stopEvent(dt):!1}ignoreMutation(dt){return this.spec.ignoreMutation?this.spec.ignoreMutation(dt):super.ignoreMutation(dt)}}function renderDescs(et,dt,kt){let $t=et.firstChild,Tt=!1;for(let Dt=0;Dt<dt.length;Dt++){let Ft=dt[Dt],Ut=Ft.dom;if(Ut.parentNode==et){for(;Ut!=$t;)$t=rm($t),Tt=!0;$t=$t.nextSibling}else Tt=!0,et.insertBefore(Ut,$t);if(Ft instanceof MarkViewDesc){let Ht=$t?$t.previousSibling:et.lastChild;renderDescs(Ft.contentDOM,Ft.children,kt),$t=Ht?Ht.nextSibling:et.firstChild}}for(;$t;)$t=rm($t),Tt=!0;Tt&&kt.trackWrites==et&&(kt.trackWrites=null)}const OuterDecoLevel=function(et){et&&(this.nodeName=et)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(et,dt,kt){if(et.length==0)return noDeco;let $t=kt?noDeco[0]:new OuterDecoLevel,Tt=[$t];for(let Dt=0;Dt<et.length;Dt++){let Ft=et[Dt].type.attrs;if(Ft){Ft.nodeName&&Tt.push($t=new OuterDecoLevel(Ft.nodeName));for(let Ut in Ft){let Ht=Ft[Ut];Ht!=null&&(kt&&Tt.length==1&&Tt.push($t=new OuterDecoLevel(dt.isInline?"span":"div")),Ut=="class"?$t.class=($t.class?$t.class+" ":"")+Ht:Ut=="style"?$t.style=($t.style?$t.style+";":"")+Ht:Ut!="nodeName"&&($t[Ut]=Ht))}}}return Tt}function patchOuterDeco(et,dt,kt,$t){if(kt==noDeco&&$t==noDeco)return dt;let Tt=dt;for(let Dt=0;Dt<$t.length;Dt++){let Ft=$t[Dt],Ut=kt[Dt];if(Dt){let Ht;Ut&&Ut.nodeName==Ft.nodeName&&Tt!=et&&(Ht=Tt.parentNode)&&Ht.nodeName.toLowerCase()==Ft.nodeName||(Ht=document.createElement(Ft.nodeName),Ht.pmIsDeco=!0,Ht.appendChild(Tt),Ut=noDeco[0]),Tt=Ht}patchAttributes(Tt,Ut||noDeco[0],Ft)}return Tt}function patchAttributes(et,dt,kt){for(let $t in dt)$t!="class"&&$t!="style"&&$t!="nodeName"&&!($t in kt)&&et.removeAttribute($t);for(let $t in kt)$t!="class"&&$t!="style"&&$t!="nodeName"&&kt[$t]!=dt[$t]&&et.setAttribute($t,kt[$t]);if(dt.class!=kt.class){let $t=dt.class?dt.class.split(" ").filter(Boolean):[],Tt=kt.class?kt.class.split(" ").filter(Boolean):[];for(let Dt=0;Dt<$t.length;Dt++)Tt.indexOf($t[Dt])==-1&&et.classList.remove($t[Dt]);for(let Dt=0;Dt<Tt.length;Dt++)$t.indexOf(Tt[Dt])==-1&&et.classList.add(Tt[Dt]);et.classList.length==0&&et.removeAttribute("class")}if(dt.style!=kt.style){if(dt.style){let $t=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,Tt;for(;Tt=$t.exec(dt.style);)et.style.removeProperty(Tt[1])}kt.style&&(et.style.cssText+=kt.style)}}function applyOuterDeco(et,dt,kt){return patchOuterDeco(et,et,noDeco,computeOuterDeco(dt,kt,et.nodeType!=1))}function sameOuterDeco(et,dt){if(et.length!=dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(!et[kt].type.eq(dt[kt].type))return!1;return!0}function rm(et){let dt=et.nextSibling;return et.parentNode.removeChild(et),dt}class ViewTreeUpdater{constructor(dt,kt,$t){this.lock=kt,this.view=$t,this.index=0,this.stack=[],this.changed=!1,this.top=dt,this.preMatch=preMatch(dt.node.content,dt)}destroyBetween(dt,kt){if(dt!=kt){for(let $t=dt;$t<kt;$t++)this.top.children[$t].destroy();this.top.children.splice(dt,kt-dt),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(dt,kt,$t){let Tt=0,Dt=this.stack.length>>1,Ft=Math.min(Dt,dt.length);for(;Tt<Ft&&(Tt==Dt-1?this.top:this.stack[Tt+1<<1]).matchesMark(dt[Tt])&&dt[Tt].type.spec.spanning!==!1;)Tt++;for(;Tt<Dt;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),Dt--;for(;Dt<dt.length;){this.stack.push(this.top,this.index+1);let Ut=-1;for(let Ht=this.index;Ht<Math.min(this.index+3,this.top.children.length);Ht++){let Kt=this.top.children[Ht];if(Kt.matchesMark(dt[Dt])&&!this.isLocked(Kt.dom)){Ut=Ht;break}}if(Ut>-1)Ut>this.index&&(this.changed=!0,this.destroyBetween(this.index,Ut)),this.top=this.top.children[this.index];else{let Ht=MarkViewDesc.create(this.top,dt[Dt],kt,$t);this.top.children.splice(this.index,0,Ht),this.top=Ht,this.changed=!0}this.index=0,Dt++}}findNodeMatch(dt,kt,$t,Tt){let Dt=-1,Ft;if(Tt>=this.preMatch.index&&(Ft=this.preMatch.matches[Tt-this.preMatch.index]).parent==this.top&&Ft.matchesNode(dt,kt,$t))Dt=this.top.children.indexOf(Ft,this.index);else for(let Ut=this.index,Ht=Math.min(this.top.children.length,Ut+5);Ut<Ht;Ut++){let Kt=this.top.children[Ut];if(Kt.matchesNode(dt,kt,$t)&&!this.preMatch.matched.has(Kt)){Dt=Ut;break}}return Dt<0?!1:(this.destroyBetween(this.index,Dt),this.index++,!0)}updateNodeAt(dt,kt,$t,Tt,Dt){let Ft=this.top.children[Tt];return Ft.dirty==NODE_DIRTY&&Ft.dom==Ft.contentDOM&&(Ft.dirty=CONTENT_DIRTY),Ft.update(dt,kt,$t,Dt)?(this.destroyBetween(this.index,Tt),this.index++,!0):!1}findIndexWithChild(dt){for(;;){let kt=dt.parentNode;if(!kt)return-1;if(kt==this.top.contentDOM){let $t=dt.pmViewDesc;if($t){for(let Tt=this.index;Tt<this.top.children.length;Tt++)if(this.top.children[Tt]==$t)return Tt}return-1}dt=kt}}updateNextNode(dt,kt,$t,Tt,Dt,Ft){for(let Ut=this.index;Ut<this.top.children.length;Ut++){let Ht=this.top.children[Ut];if(Ht instanceof NodeViewDesc){let Kt=this.preMatch.matched.get(Ht);if(Kt!=null&&Kt!=Dt)return!1;let Yt=Ht.dom,Jt,Zt=this.isLocked(Yt)&&!(dt.isText&&Ht.node&&Ht.node.isText&&Ht.nodeDOM.nodeValue==dt.text&&Ht.dirty!=NODE_DIRTY&&sameOuterDeco(kt,Ht.outerDeco));if(!Zt&&Ht.update(dt,kt,$t,Tt))return this.destroyBetween(this.index,Ut),Ht.dom!=Yt&&(this.changed=!0),this.index++,!0;if(!Zt&&(Jt=this.recreateWrapper(Ht,dt,kt,$t,Tt,Ft)))return this.destroyBetween(this.index,Ut),this.top.children[this.index]=Jt,Jt.contentDOM&&(Jt.dirty=CONTENT_DIRTY,Jt.updateChildren(Tt,Ft+1),Jt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(dt,kt,$t,Tt,Dt,Ft){if(dt.dirty||kt.isAtom||!dt.children.length||!dt.node.content.eq(kt.content)||!sameOuterDeco($t,dt.outerDeco)||!Tt.eq(dt.innerDeco))return null;let Ut=NodeViewDesc.create(this.top,kt,$t,Tt,Dt,Ft);if(Ut.contentDOM){Ut.children=dt.children,dt.children=[];for(let Ht of Ut.children)Ht.parent=Ut}return dt.destroy(),Ut}addNode(dt,kt,$t,Tt,Dt){let Ft=NodeViewDesc.create(this.top,dt,kt,$t,Tt,Dt);Ft.contentDOM&&Ft.updateChildren(Tt,Dt+1),this.top.children.splice(this.index++,0,Ft),this.changed=!0}placeWidget(dt,kt,$t){let Tt=this.index<this.top.children.length?this.top.children[this.index]:null;if(Tt&&Tt.matchesWidget(dt)&&(dt==Tt.widget||!Tt.widget.type.toDOM.parentNode))this.index++;else{let Dt=new WidgetViewDesc(this.top,dt,kt,$t);this.top.children.splice(this.index++,0,Dt),this.changed=!0}}addTextblockHacks(){let dt=this.top.children[this.index-1],kt=this.top;for(;dt instanceof MarkViewDesc;)kt=dt,dt=kt.children[kt.children.length-1];(!dt||!(dt instanceof TextViewDesc)||/\n$/.test(dt.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(dt.node.text))&&((safari||chrome)&&dt&&dt.dom.contentEditable=="false"&&this.addHackNode("IMG",kt),this.addHackNode("BR",this.top))}addHackNode(dt,kt){if(kt==this.top&&this.index<kt.children.length&&kt.children[this.index].matchesHack(dt))this.index++;else{let $t=document.createElement(dt);dt=="IMG"&&($t.className="ProseMirror-separator",$t.alt=""),dt=="BR"&&($t.className="ProseMirror-trailingBreak");let Tt=new TrailingHackViewDesc(this.top,[],$t,null);kt!=this.top?kt.children.push(Tt):kt.children.splice(this.index++,0,Tt),this.changed=!0}}isLocked(dt){return this.lock&&(dt==this.lock||dt.nodeType==1&&dt.contains(this.lock.parentNode))}}function preMatch(et,dt){let kt=dt,$t=kt.children.length,Tt=et.childCount,Dt=new Map,Ft=[];e:for(;Tt>0;){let Ut;for(;;)if($t){let Kt=kt.children[$t-1];if(Kt instanceof MarkViewDesc)kt=Kt,$t=Kt.children.length;else{Ut=Kt,$t--;break}}else{if(kt==dt)break e;$t=kt.parent.children.indexOf(kt),kt=kt.parent}let Ht=Ut.node;if(Ht){if(Ht!=et.child(Tt-1))break;--Tt,Dt.set(Ut,Tt),Ft.push(Ut)}}return{index:Tt,matched:Dt,matches:Ft.reverse()}}function compareSide(et,dt){return et.type.side-dt.type.side}function iterDeco(et,dt,kt,$t){let Tt=dt.locals(et),Dt=0;if(Tt.length==0){for(let Kt=0;Kt<et.childCount;Kt++){let Yt=et.child(Kt);$t(Yt,Tt,dt.forChild(Dt,Yt),Kt),Dt+=Yt.nodeSize}return}let Ft=0,Ut=[],Ht=null;for(let Kt=0;;){let Yt,Jt;for(;Ft<Tt.length&&Tt[Ft].to==Dt;){let nr=Tt[Ft++];nr.widget&&(Yt?(Jt||(Jt=[Yt])).push(nr):Yt=nr)}if(Yt)if(Jt){Jt.sort(compareSide);for(let nr=0;nr<Jt.length;nr++)kt(Jt[nr],Kt,!!Ht)}else kt(Yt,Kt,!!Ht);let Zt,er;if(Ht)er=-1,Zt=Ht,Ht=null;else if(Kt<et.childCount)er=Kt,Zt=et.child(Kt++);else break;for(let nr=0;nr<Ut.length;nr++)Ut[nr].to<=Dt&&Ut.splice(nr--,1);for(;Ft<Tt.length&&Tt[Ft].from<=Dt&&Tt[Ft].to>Dt;)Ut.push(Tt[Ft++]);let rr=Dt+Zt.nodeSize;if(Zt.isText){let nr=rr;Ft<Tt.length&&Tt[Ft].from<nr&&(nr=Tt[Ft].from);for(let ir=0;ir<Ut.length;ir++)Ut[ir].to<nr&&(nr=Ut[ir].to);nr<rr&&(Ht=Zt.cut(nr-Dt),Zt=Zt.cut(0,nr-Dt),rr=nr,er=-1)}else for(;Ft<Tt.length&&Tt[Ft].to<rr;)Ft++;let sr=Zt.isInline&&!Zt.isLeaf?Ut.filter(nr=>!nr.inline):Ut.slice();$t(Zt,sr,dt.forChild(Dt,Zt),er),Dt=rr}}function iosHacks(et){if(et.nodeName=="UL"||et.nodeName=="OL"){let dt=et.style.cssText;et.style.cssText=dt+"; list-style: square !important",window.getComputedStyle(et).listStyle,et.style.cssText=dt}}function findTextInFragment(et,dt,kt,$t){for(let Tt=0,Dt=0;Tt<et.childCount&&Dt<=$t;){let Ft=et.child(Tt++),Ut=Dt;if(Dt+=Ft.nodeSize,!Ft.isText)continue;let Ht=Ft.text;for(;Tt<et.childCount;){let Kt=et.child(Tt++);if(Dt+=Kt.nodeSize,!Kt.isText)break;Ht+=Kt.text}if(Dt>=kt){if(Dt>=$t&&Ht.slice($t-dt.length-Ut,$t-Ut)==dt)return $t-dt.length;let Kt=Ut<$t?Ht.lastIndexOf(dt,$t-Ut-1):-1;if(Kt>=0&&Kt+dt.length+Ut>=kt)return Ut+Kt;if(kt==$t&&Ht.length>=$t+dt.length-Ut&&Ht.slice($t-Ut,$t-Ut+dt.length)==dt)return $t}}return-1}function replaceNodes(et,dt,kt,$t,Tt){let Dt=[];for(let Ft=0,Ut=0;Ft<et.length;Ft++){let Ht=et[Ft],Kt=Ut,Yt=Ut+=Ht.size;Kt>=kt||Yt<=dt?Dt.push(Ht):(Kt<dt&&Dt.push(Ht.slice(0,dt-Kt,$t)),Tt&&(Dt.push(Tt),Tt=void 0),Yt>kt&&Dt.push(Ht.slice(kt-Kt,Ht.size,$t)))}return Dt}function selectionFromDOM(et,dt=null){let kt=et.domSelectionRange(),$t=et.state.doc;if(!kt.focusNode)return null;let Tt=et.docView.nearestDesc(kt.focusNode),Dt=Tt&&Tt.size==0,Ft=et.docView.posFromDOM(kt.focusNode,kt.focusOffset,1);if(Ft<0)return null;let Ut=$t.resolve(Ft),Ht,Kt;if(selectionCollapsed(kt)){for(Ht=Ft;Tt&&!Tt.node;)Tt=Tt.parent;let Jt=Tt.node;if(Tt&&Jt.isAtom&&NodeSelection.isSelectable(Jt)&&Tt.parent&&!(Jt.isInline&&isOnEdge(kt.focusNode,kt.focusOffset,Tt.dom))){let Zt=Tt.posBefore;Kt=new NodeSelection(Ft==Zt?Ut:$t.resolve(Zt))}}else{if(kt instanceof et.dom.ownerDocument.defaultView.Selection&&kt.rangeCount>1){let Jt=Ft,Zt=Ft;for(let er=0;er<kt.rangeCount;er++){let rr=kt.getRangeAt(er);Jt=Math.min(Jt,et.docView.posFromDOM(rr.startContainer,rr.startOffset,1)),Zt=Math.max(Zt,et.docView.posFromDOM(rr.endContainer,rr.endOffset,-1))}if(Jt<0)return null;[Ht,Ft]=Zt==et.state.selection.anchor?[Zt,Jt]:[Jt,Zt],Ut=$t.resolve(Ft)}else Ht=et.docView.posFromDOM(kt.anchorNode,kt.anchorOffset,1);if(Ht<0)return null}let Yt=$t.resolve(Ht);if(!Kt){let Jt=dt=="pointer"||et.state.selection.head<Ut.pos&&!Dt?1:-1;Kt=selectionBetween(et,Yt,Ut,Jt)}return Kt}function editorOwnsSelection(et){return et.editable?et.hasFocus():hasSelection(et)&&document.activeElement&&document.activeElement.contains(et.dom)}function selectionToDOM(et,dt=!1){let kt=et.state.selection;if(syncNodeSelection(et,kt),!!editorOwnsSelection(et)){if(!dt&&et.input.mouseDown&&et.input.mouseDown.allowDefault&&chrome){let $t=et.domSelectionRange(),Tt=et.domObserver.currentSelection;if($t.anchorNode&&Tt.anchorNode&&isEquivalentPosition($t.anchorNode,$t.anchorOffset,Tt.anchorNode,Tt.anchorOffset)){et.input.mouseDown.delayedSelectionSync=!0,et.domObserver.setCurSelection();return}}if(et.domObserver.disconnectSelection(),et.cursorWrapper)selectCursorWrapper(et);else{let{anchor:$t,head:Tt}=kt,Dt,Ft;brokenSelectBetweenUneditable&&!(kt instanceof TextSelection)&&(kt.$from.parent.inlineContent||(Dt=temporarilyEditableNear(et,kt.from)),!kt.empty&&!kt.$from.parent.inlineContent&&(Ft=temporarilyEditableNear(et,kt.to))),et.docView.setSelection($t,Tt,et,dt),brokenSelectBetweenUneditable&&(Dt&&resetEditable(Dt),Ft&&resetEditable(Ft)),kt.visible?et.dom.classList.remove("ProseMirror-hideselection"):(et.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(et))}et.domObserver.setCurSelection(),et.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(et,dt){let{node:kt,offset:$t}=et.docView.domFromPos(dt,0),Tt=$t<kt.childNodes.length?kt.childNodes[$t]:null,Dt=$t?kt.childNodes[$t-1]:null;if(safari&&Tt&&Tt.contentEditable=="false")return setEditable(Tt);if((!Tt||Tt.contentEditable=="false")&&(!Dt||Dt.contentEditable=="false")){if(Tt)return setEditable(Tt);if(Dt)return setEditable(Dt)}}function setEditable(et){return et.contentEditable="true",safari&&et.draggable&&(et.draggable=!1,et.wasDraggable=!0),et}function resetEditable(et){et.contentEditable="false",et.wasDraggable&&(et.draggable=!0,et.wasDraggable=null)}function removeClassOnSelectionChange(et){let dt=et.dom.ownerDocument;dt.removeEventListener("selectionchange",et.input.hideSelectionGuard);let kt=et.domSelectionRange(),$t=kt.anchorNode,Tt=kt.anchorOffset;dt.addEventListener("selectionchange",et.input.hideSelectionGuard=()=>{(kt.anchorNode!=$t||kt.anchorOffset!=Tt)&&(dt.removeEventListener("selectionchange",et.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(et)||et.state.selection.visible)&&et.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(et){let dt=et.domSelection();if(!dt)return;let kt=et.cursorWrapper.dom,$t=kt.nodeName=="IMG";$t?dt.collapse(kt.parentNode,domIndex(kt)+1):dt.collapse(kt,0),!$t&&!et.state.selection.visible&&ie$2&&ie_version<=11&&(kt.disabled=!0,kt.disabled=!1)}function syncNodeSelection(et,dt){if(dt instanceof NodeSelection){let kt=et.docView.descAt(dt.from);kt!=et.lastSelectedViewDesc&&(clearNodeSelection(et),kt&&kt.selectNode(),et.lastSelectedViewDesc=kt)}else clearNodeSelection(et)}function clearNodeSelection(et){et.lastSelectedViewDesc&&(et.lastSelectedViewDesc.parent&&et.lastSelectedViewDesc.deselectNode(),et.lastSelectedViewDesc=void 0)}function selectionBetween(et,dt,kt,$t){return et.someProp("createSelectionBetween",Tt=>Tt(et,dt,kt))||TextSelection.between(dt,kt,$t)}function hasFocusAndSelection(et){return et.editable&&!et.hasFocus()?!1:hasSelection(et)}function hasSelection(et){let dt=et.domSelectionRange();if(!dt.anchorNode)return!1;try{return et.dom.contains(dt.anchorNode.nodeType==3?dt.anchorNode.parentNode:dt.anchorNode)&&(et.editable||et.dom.contains(dt.focusNode.nodeType==3?dt.focusNode.parentNode:dt.focusNode))}catch{return!1}}function anchorInRightPlace(et){let dt=et.docView.domFromPos(et.state.selection.anchor,0),kt=et.domSelectionRange();return isEquivalentPosition(dt.node,dt.offset,kt.anchorNode,kt.anchorOffset)}function moveSelectionBlock(et,dt){let{$anchor:kt,$head:$t}=et.selection,Tt=dt>0?kt.max($t):kt.min($t),Dt=Tt.parent.inlineContent?Tt.depth?et.doc.resolve(dt>0?Tt.after():Tt.before()):null:Tt;return Dt&&Selection.findFrom(Dt,dt)}function apply$2(et,dt){return et.dispatch(et.state.tr.setSelection(dt).scrollIntoView()),!0}function selectHorizontally(et,dt,kt){let $t=et.state.selection;if($t instanceof TextSelection)if(kt.indexOf("s")>-1){let{$head:Tt}=$t,Dt=Tt.textOffset?null:dt<0?Tt.nodeBefore:Tt.nodeAfter;if(!Dt||Dt.isText||!Dt.isLeaf)return!1;let Ft=et.state.doc.resolve(Tt.pos+Dt.nodeSize*(dt<0?-1:1));return apply$2(et,new TextSelection($t.$anchor,Ft))}else if($t.empty){if(et.endOfTextblock(dt>0?"forward":"backward")){let Tt=moveSelectionBlock(et.state,dt);return Tt&&Tt instanceof NodeSelection?apply$2(et,Tt):!1}else if(!(mac$2&&kt.indexOf("m")>-1)){let Tt=$t.$head,Dt=Tt.textOffset?null:dt<0?Tt.nodeBefore:Tt.nodeAfter,Ft;if(!Dt||Dt.isText)return!1;let Ut=dt<0?Tt.pos-Dt.nodeSize:Tt.pos;return Dt.isAtom||(Ft=et.docView.descAt(Ut))&&!Ft.contentDOM?NodeSelection.isSelectable(Dt)?apply$2(et,new NodeSelection(dt<0?et.state.doc.resolve(Tt.pos-Dt.nodeSize):Tt)):webkit?apply$2(et,new TextSelection(et.state.doc.resolve(dt<0?Ut:Ut+Dt.nodeSize))):!1:!1}}else return!1;else{if($t instanceof NodeSelection&&$t.node.isInline)return apply$2(et,new TextSelection(dt>0?$t.$to:$t.$from));{let Tt=moveSelectionBlock(et.state,dt);return Tt?apply$2(et,Tt):!1}}}function nodeLen(et){return et.nodeType==3?et.nodeValue.length:et.childNodes.length}function isIgnorable(et,dt){let kt=et.pmViewDesc;return kt&&kt.size==0&&(dt<0||et.nextSibling||et.nodeName!="BR")}function skipIgnoredNodes(et,dt){return dt<0?skipIgnoredNodesBefore(et):skipIgnoredNodesAfter(et)}function skipIgnoredNodesBefore(et){let dt=et.domSelectionRange(),kt=dt.focusNode,$t=dt.focusOffset;if(!kt)return;let Tt,Dt,Ft=!1;for(gecko&&kt.nodeType==1&&$t<nodeLen(kt)&&isIgnorable(kt.childNodes[$t],-1)&&(Ft=!0);;)if($t>0){if(kt.nodeType!=1)break;{let Ut=kt.childNodes[$t-1];if(isIgnorable(Ut,-1))Tt=kt,Dt=--$t;else if(Ut.nodeType==3)kt=Ut,$t=kt.nodeValue.length;else break}}else{if(isBlockNode(kt))break;{let Ut=kt.previousSibling;for(;Ut&&isIgnorable(Ut,-1);)Tt=kt.parentNode,Dt=domIndex(Ut),Ut=Ut.previousSibling;if(Ut)kt=Ut,$t=nodeLen(kt);else{if(kt=kt.parentNode,kt==et.dom)break;$t=0}}}Ft?setSelFocus(et,kt,$t):Tt&&setSelFocus(et,Tt,Dt)}function skipIgnoredNodesAfter(et){let dt=et.domSelectionRange(),kt=dt.focusNode,$t=dt.focusOffset;if(!kt)return;let Tt=nodeLen(kt),Dt,Ft;for(;;)if($t<Tt){if(kt.nodeType!=1)break;let Ut=kt.childNodes[$t];if(isIgnorable(Ut,1))Dt=kt,Ft=++$t;else break}else{if(isBlockNode(kt))break;{let Ut=kt.nextSibling;for(;Ut&&isIgnorable(Ut,1);)Dt=Ut.parentNode,Ft=domIndex(Ut)+1,Ut=Ut.nextSibling;if(Ut)kt=Ut,$t=0,Tt=nodeLen(kt);else{if(kt=kt.parentNode,kt==et.dom)break;$t=Tt=0}}}Dt&&setSelFocus(et,Dt,Ft)}function isBlockNode(et){let dt=et.pmViewDesc;return dt&&dt.node&&dt.node.isBlock}function textNodeAfter(et,dt){for(;et&&dt==et.childNodes.length&&!hasBlockDesc(et);)dt=domIndex(et)+1,et=et.parentNode;for(;et&&dt<et.childNodes.length;){let kt=et.childNodes[dt];if(kt.nodeType==3)return kt;if(kt.nodeType==1&&kt.contentEditable=="false")break;et=kt,dt=0}}function textNodeBefore(et,dt){for(;et&&!dt&&!hasBlockDesc(et);)dt=domIndex(et),et=et.parentNode;for(;et&&dt;){let kt=et.childNodes[dt-1];if(kt.nodeType==3)return kt;if(kt.nodeType==1&&kt.contentEditable=="false")break;et=kt,dt=et.childNodes.length}}function setSelFocus(et,dt,kt){if(dt.nodeType!=3){let Dt,Ft;(Ft=textNodeAfter(dt,kt))?(dt=Ft,kt=0):(Dt=textNodeBefore(dt,kt))&&(dt=Dt,kt=Dt.nodeValue.length)}let $t=et.domSelection();if(!$t)return;if(selectionCollapsed($t)){let Dt=document.createRange();Dt.setEnd(dt,kt),Dt.setStart(dt,kt),$t.removeAllRanges(),$t.addRange(Dt)}else $t.extend&&$t.extend(dt,kt);et.domObserver.setCurSelection();let{state:Tt}=et;setTimeout(()=>{et.state==Tt&&selectionToDOM(et)},50)}function findDirection(et,dt){let kt=et.state.doc.resolve(dt);if(!(chrome||windows$1)&&kt.parent.inlineContent){let Tt=et.coordsAtPos(dt);if(dt>kt.start()){let Dt=et.coordsAtPos(dt-1),Ft=(Dt.top+Dt.bottom)/2;if(Ft>Tt.top&&Ft<Tt.bottom&&Math.abs(Dt.left-Tt.left)>1)return Dt.left<Tt.left?"ltr":"rtl"}if(dt<kt.end()){let Dt=et.coordsAtPos(dt+1),Ft=(Dt.top+Dt.bottom)/2;if(Ft>Tt.top&&Ft<Tt.bottom&&Math.abs(Dt.left-Tt.left)>1)return Dt.left>Tt.left?"ltr":"rtl"}}return getComputedStyle(et.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(et,dt,kt){let $t=et.state.selection;if($t instanceof TextSelection&&!$t.empty||kt.indexOf("s")>-1||mac$2&&kt.indexOf("m")>-1)return!1;let{$from:Tt,$to:Dt}=$t;if(!Tt.parent.inlineContent||et.endOfTextblock(dt<0?"up":"down")){let Ft=moveSelectionBlock(et.state,dt);if(Ft&&Ft instanceof NodeSelection)return apply$2(et,Ft)}if(!Tt.parent.inlineContent){let Ft=dt<0?Tt:Dt,Ut=$t instanceof AllSelection?Selection.near(Ft,dt):Selection.findFrom(Ft,dt);return Ut?apply$2(et,Ut):!1}return!1}function stopNativeHorizontalDelete(et,dt){if(!(et.state.selection instanceof TextSelection))return!0;let{$head:kt,$anchor:$t,empty:Tt}=et.state.selection;if(!kt.sameParent($t))return!0;if(!Tt)return!1;if(et.endOfTextblock(dt>0?"forward":"backward"))return!0;let Dt=!kt.textOffset&&(dt<0?kt.nodeBefore:kt.nodeAfter);if(Dt&&!Dt.isText){let Ft=et.state.tr;return dt<0?Ft.delete(kt.pos-Dt.nodeSize,kt.pos):Ft.delete(kt.pos,kt.pos+Dt.nodeSize),et.dispatch(Ft),!0}return!1}function switchEditable(et,dt,kt){et.domObserver.stop(),dt.contentEditable=kt,et.domObserver.start()}function safariDownArrowBug(et){if(!safari||et.state.selection.$head.parentOffset>0)return!1;let{focusNode:dt,focusOffset:kt}=et.domSelectionRange();if(dt&&dt.nodeType==1&&kt==0&&dt.firstChild&&dt.firstChild.contentEditable=="false"){let $t=dt.firstChild;switchEditable(et,$t,"true"),setTimeout(()=>switchEditable(et,$t,"false"),20)}return!1}function getMods(et){let dt="";return et.ctrlKey&&(dt+="c"),et.metaKey&&(dt+="m"),et.altKey&&(dt+="a"),et.shiftKey&&(dt+="s"),dt}function captureKeyDown(et,dt){let kt=dt.keyCode,$t=getMods(dt);if(kt==8||mac$2&&kt==72&&$t=="c")return stopNativeHorizontalDelete(et,-1)||skipIgnoredNodes(et,-1);if(kt==46&&!dt.shiftKey||mac$2&&kt==68&&$t=="c")return stopNativeHorizontalDelete(et,1)||skipIgnoredNodes(et,1);if(kt==13||kt==27)return!0;if(kt==37||mac$2&&kt==66&&$t=="c"){let Tt=kt==37?findDirection(et,et.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(et,Tt,$t)||skipIgnoredNodes(et,Tt)}else if(kt==39||mac$2&&kt==70&&$t=="c"){let Tt=kt==39?findDirection(et,et.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(et,Tt,$t)||skipIgnoredNodes(et,Tt)}else{if(kt==38||mac$2&&kt==80&&$t=="c")return selectVertically(et,-1,$t)||skipIgnoredNodes(et,-1);if(kt==40||mac$2&&kt==78&&$t=="c")return safariDownArrowBug(et)||selectVertically(et,1,$t)||skipIgnoredNodes(et,1);if($t==(mac$2?"m":"c")&&(kt==66||kt==73||kt==89||kt==90))return!0}return!1}function serializeForClipboard(et,dt){et.someProp("transformCopied",er=>{dt=er(dt,et)});let kt=[],{content:$t,openStart:Tt,openEnd:Dt}=dt;for(;Tt>1&&Dt>1&&$t.childCount==1&&$t.firstChild.childCount==1;){Tt--,Dt--;let er=$t.firstChild;kt.push(er.type.name,er.attrs!=er.type.defaultAttrs?er.attrs:null),$t=er.content}let Ft=et.someProp("clipboardSerializer")||DOMSerializer.fromSchema(et.state.schema),Ut=detachedDoc(),Ht=Ut.createElement("div");Ht.appendChild(Ft.serializeFragment($t,{document:Ut}));let Kt=Ht.firstChild,Yt,Jt=0;for(;Kt&&Kt.nodeType==1&&(Yt=wrapMap[Kt.nodeName.toLowerCase()]);){for(let er=Yt.length-1;er>=0;er--){let rr=Ut.createElement(Yt[er]);for(;Ht.firstChild;)rr.appendChild(Ht.firstChild);Ht.appendChild(rr),Jt++}Kt=Ht.firstChild}Kt&&Kt.nodeType==1&&Kt.setAttribute("data-pm-slice",`${Tt} ${Dt}${Jt?` -${Jt}`:""} ${JSON.stringify(kt)}`);let Zt=et.someProp("clipboardTextSerializer",er=>er(dt,et))||dt.content.textBetween(0,dt.content.size,`

`);return{dom:Ht,text:Zt,slice:dt}}function parseFromClipboard(et,dt,kt,$t,Tt){let Dt=Tt.parent.type.spec.code,Ft,Ut;if(!kt&&!dt)return null;let Ht=!!dt&&($t||Dt||!kt);if(Ht){if(et.someProp("transformPastedText",Zt=>{dt=Zt(dt,Dt||$t,et)}),Dt)return Ut=new Slice(Fragment.from(et.state.schema.text(dt.replace(/\r\n?/g,`
`))),0,0),et.someProp("transformPasted",Zt=>{Ut=Zt(Ut,et,!0)}),Ut;let Jt=et.someProp("clipboardTextParser",Zt=>Zt(dt,Tt,$t,et));if(Jt)Ut=Jt;else{let Zt=Tt.marks(),{schema:er}=et.state,rr=DOMSerializer.fromSchema(er);Ft=document.createElement("div"),dt.split(/(?:\r\n?|\n)+/).forEach(sr=>{let nr=Ft.appendChild(document.createElement("p"));sr&&nr.appendChild(rr.serializeNode(er.text(sr,Zt)))})}}else et.someProp("transformPastedHTML",Jt=>{kt=Jt(kt,et)}),Ft=readHTML(kt),webkit&&restoreReplacedSpaces(Ft);let Kt=Ft&&Ft.querySelector("[data-pm-slice]"),Yt=Kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(Kt.getAttribute("data-pm-slice")||"");if(Yt&&Yt[3])for(let Jt=+Yt[3];Jt>0;Jt--){let Zt=Ft.firstChild;for(;Zt&&Zt.nodeType!=1;)Zt=Zt.nextSibling;if(!Zt)break;Ft=Zt}if(Ut||(Ut=(et.someProp("clipboardParser")||et.someProp("domParser")||DOMParser.fromSchema(et.state.schema)).parseSlice(Ft,{preserveWhitespace:!!(Ht||Yt),context:Tt,ruleFromNode(Zt){return Zt.nodeName=="BR"&&!Zt.nextSibling&&Zt.parentNode&&!inlineParents.test(Zt.parentNode.nodeName)?{ignore:!0}:null}})),Yt)Ut=addContext(closeSlice(Ut,+Yt[1],+Yt[2]),Yt[4]);else if(Ut=Slice.maxOpen(normalizeSiblings(Ut.content,Tt),!0),Ut.openStart||Ut.openEnd){let Jt=0,Zt=0;for(let er=Ut.content.firstChild;Jt<Ut.openStart&&!er.type.spec.isolating;Jt++,er=er.firstChild);for(let er=Ut.content.lastChild;Zt<Ut.openEnd&&!er.type.spec.isolating;Zt++,er=er.lastChild);Ut=closeSlice(Ut,Jt,Zt)}return et.someProp("transformPasted",Jt=>{Ut=Jt(Ut,et,Ht)}),Ut}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(et,dt){if(et.childCount<2)return et;for(let kt=dt.depth;kt>=0;kt--){let Tt=dt.node(kt).contentMatchAt(dt.index(kt)),Dt,Ft=[];if(et.forEach(Ut=>{if(!Ft)return;let Ht=Tt.findWrapping(Ut.type),Kt;if(!Ht)return Ft=null;if(Kt=Ft.length&&Dt.length&&addToSibling(Ht,Dt,Ut,Ft[Ft.length-1],0))Ft[Ft.length-1]=Kt;else{Ft.length&&(Ft[Ft.length-1]=closeRight(Ft[Ft.length-1],Dt.length));let Yt=withWrappers(Ut,Ht);Ft.push(Yt),Tt=Tt.matchType(Yt.type),Dt=Ht}}),Ft)return Fragment.from(Ft)}return et}function withWrappers(et,dt,kt=0){for(let $t=dt.length-1;$t>=kt;$t--)et=dt[$t].create(null,Fragment.from(et));return et}function addToSibling(et,dt,kt,$t,Tt){if(Tt<et.length&&Tt<dt.length&&et[Tt]==dt[Tt]){let Dt=addToSibling(et,dt,kt,$t.lastChild,Tt+1);if(Dt)return $t.copy($t.content.replaceChild($t.childCount-1,Dt));if($t.contentMatchAt($t.childCount).matchType(Tt==et.length-1?kt.type:et[Tt+1]))return $t.copy($t.content.append(Fragment.from(withWrappers(kt,et,Tt+1))))}}function closeRight(et,dt){if(dt==0)return et;let kt=et.content.replaceChild(et.childCount-1,closeRight(et.lastChild,dt-1)),$t=et.contentMatchAt(et.childCount).fillBefore(Fragment.empty,!0);return et.copy(kt.append($t))}function closeRange(et,dt,kt,$t,Tt,Dt){let Ft=dt<0?et.firstChild:et.lastChild,Ut=Ft.content;return et.childCount>1&&(Dt=0),Tt<$t-1&&(Ut=closeRange(Ut,dt,kt,$t,Tt+1,Dt)),Tt>=kt&&(Ut=dt<0?Ft.contentMatchAt(0).fillBefore(Ut,Dt<=Tt).append(Ut):Ut.append(Ft.contentMatchAt(Ft.childCount).fillBefore(Fragment.empty,!0))),et.replaceChild(dt<0?0:et.childCount-1,Ft.copy(Ut))}function closeSlice(et,dt,kt){return dt<et.openStart&&(et=new Slice(closeRange(et.content,-1,dt,et.openStart,0,et.openEnd),dt,et.openEnd)),kt<et.openEnd&&(et=new Slice(closeRange(et.content,1,kt,et.openEnd,0,0),et.openStart,kt)),et}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(et){let dt=window.trustedTypes;return dt?(_policy||(_policy=dt.defaultPolicy||dt.createPolicy("ProseMirrorClipboard",{createHTML:kt=>kt})),_policy.createHTML(et)):et}function readHTML(et){let dt=/^(\s*<meta [^>]*>)*/.exec(et);dt&&(et=et.slice(dt[0].length));let kt=detachedDoc().createElement("div"),$t=/<([a-z][^>\s]+)/i.exec(et),Tt;if((Tt=$t&&wrapMap[$t[1].toLowerCase()])&&(et=Tt.map(Dt=>"<"+Dt+">").join("")+et+Tt.map(Dt=>"</"+Dt+">").reverse().join("")),kt.innerHTML=maybeWrapTrusted(et),Tt)for(let Dt=0;Dt<Tt.length;Dt++)kt=kt.querySelector(Tt[Dt])||kt;return kt}function restoreReplacedSpaces(et){let dt=et.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let kt=0;kt<dt.length;kt++){let $t=dt[kt];$t.childNodes.length==1&&$t.textContent==""&&$t.parentNode&&$t.parentNode.replaceChild(et.ownerDocument.createTextNode(" "),$t)}}function addContext(et,dt){if(!et.size)return et;let kt=et.content.firstChild.type.schema,$t;try{$t=JSON.parse(dt)}catch{return et}let{content:Tt,openStart:Dt,openEnd:Ft}=et;for(let Ut=$t.length-2;Ut>=0;Ut-=2){let Ht=kt.nodes[$t[Ut]];if(!Ht||Ht.hasRequiredAttrs())break;Tt=Fragment.from(Ht.create($t[Ut+1],Tt)),Dt++,Ft++}return new Slice(Tt,Dt,Ft)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(et){for(let dt in handlers){let kt=handlers[dt];et.dom.addEventListener(dt,et.input.eventHandlers[dt]=$t=>{eventBelongsToView(et,$t)&&!runCustomHandler(et,$t)&&(et.editable||!($t.type in editHandlers))&&kt(et,$t)},passiveHandlers[dt]?{passive:!0}:void 0)}safari&&et.dom.addEventListener("input",()=>null),ensureListeners(et)}function setSelectionOrigin(et,dt){et.input.lastSelectionOrigin=dt,et.input.lastSelectionTime=Date.now()}function destroyInput(et){et.domObserver.stop();for(let dt in et.input.eventHandlers)et.dom.removeEventListener(dt,et.input.eventHandlers[dt]);clearTimeout(et.input.composingTimeout),clearTimeout(et.input.lastIOSEnterFallbackTimeout)}function ensureListeners(et){et.someProp("handleDOMEvents",dt=>{for(let kt in dt)et.input.eventHandlers[kt]||et.dom.addEventListener(kt,et.input.eventHandlers[kt]=$t=>runCustomHandler(et,$t))})}function runCustomHandler(et,dt){return et.someProp("handleDOMEvents",kt=>{let $t=kt[dt.type];return $t?$t(et,dt)||dt.defaultPrevented:!1})}function eventBelongsToView(et,dt){if(!dt.bubbles)return!0;if(dt.defaultPrevented)return!1;for(let kt=dt.target;kt!=et.dom;kt=kt.parentNode)if(!kt||kt.nodeType==11||kt.pmViewDesc&&kt.pmViewDesc.stopEvent(dt))return!1;return!0}function dispatchEvent(et,dt){!runCustomHandler(et,dt)&&handlers[dt.type]&&(et.editable||!(dt.type in editHandlers))&&handlers[dt.type](et,dt)}editHandlers.keydown=(et,dt)=>{let kt=dt;if(et.input.shiftKey=kt.keyCode==16||kt.shiftKey,!inOrNearComposition(et,kt)&&(et.input.lastKeyCode=kt.keyCode,et.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&kt.keyCode==13)))if(kt.keyCode!=229&&et.domObserver.forceFlush(),ios&&kt.keyCode==13&&!kt.ctrlKey&&!kt.altKey&&!kt.metaKey){let $t=Date.now();et.input.lastIOSEnter=$t,et.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{et.input.lastIOSEnter==$t&&(et.someProp("handleKeyDown",Tt=>Tt(et,keyEvent(13,"Enter"))),et.input.lastIOSEnter=0)},200)}else et.someProp("handleKeyDown",$t=>$t(et,kt))||captureKeyDown(et,kt)?kt.preventDefault():setSelectionOrigin(et,"key")};editHandlers.keyup=(et,dt)=>{dt.keyCode==16&&(et.input.shiftKey=!1)};editHandlers.keypress=(et,dt)=>{let kt=dt;if(inOrNearComposition(et,kt)||!kt.charCode||kt.ctrlKey&&!kt.altKey||mac$2&&kt.metaKey)return;if(et.someProp("handleKeyPress",Tt=>Tt(et,kt))){kt.preventDefault();return}let $t=et.state.selection;if(!($t instanceof TextSelection)||!$t.$from.sameParent($t.$to)){let Tt=String.fromCharCode(kt.charCode),Dt=()=>et.state.tr.insertText(Tt).scrollIntoView();!/[\r\n]/.test(Tt)&&!et.someProp("handleTextInput",Ft=>Ft(et,$t.$from.pos,$t.$to.pos,Tt,Dt))&&et.dispatch(Dt()),kt.preventDefault()}};function eventCoords(et){return{left:et.clientX,top:et.clientY}}function isNear(et,dt){let kt=dt.x-et.clientX,$t=dt.y-et.clientY;return kt*kt+$t*$t<100}function runHandlerOnContext(et,dt,kt,$t,Tt){if($t==-1)return!1;let Dt=et.state.doc.resolve($t);for(let Ft=Dt.depth+1;Ft>0;Ft--)if(et.someProp(dt,Ut=>Ft>Dt.depth?Ut(et,kt,Dt.nodeAfter,Dt.before(Ft),Tt,!0):Ut(et,kt,Dt.node(Ft),Dt.before(Ft),Tt,!1)))return!0;return!1}function updateSelection(et,dt,kt){if(et.focused||et.focus(),et.state.selection.eq(dt))return;let $t=et.state.tr.setSelection(dt);kt=="pointer"&&$t.setMeta("pointer",!0),et.dispatch($t)}function selectClickedLeaf(et,dt){if(dt==-1)return!1;let kt=et.state.doc.resolve(dt),$t=kt.nodeAfter;return $t&&$t.isAtom&&NodeSelection.isSelectable($t)?(updateSelection(et,new NodeSelection(kt),"pointer"),!0):!1}function selectClickedNode(et,dt){if(dt==-1)return!1;let kt=et.state.selection,$t,Tt;kt instanceof NodeSelection&&($t=kt.node);let Dt=et.state.doc.resolve(dt);for(let Ft=Dt.depth+1;Ft>0;Ft--){let Ut=Ft>Dt.depth?Dt.nodeAfter:Dt.node(Ft);if(NodeSelection.isSelectable(Ut)){$t&&kt.$from.depth>0&&Ft>=kt.$from.depth&&Dt.before(kt.$from.depth+1)==kt.$from.pos?Tt=Dt.before(kt.$from.depth):Tt=Dt.before(Ft);break}}return Tt!=null?(updateSelection(et,NodeSelection.create(et.state.doc,Tt),"pointer"),!0):!1}function handleSingleClick(et,dt,kt,$t,Tt){return runHandlerOnContext(et,"handleClickOn",dt,kt,$t)||et.someProp("handleClick",Dt=>Dt(et,dt,$t))||(Tt?selectClickedNode(et,kt):selectClickedLeaf(et,kt))}function handleDoubleClick(et,dt,kt,$t){return runHandlerOnContext(et,"handleDoubleClickOn",dt,kt,$t)||et.someProp("handleDoubleClick",Tt=>Tt(et,dt,$t))}function handleTripleClick(et,dt,kt,$t){return runHandlerOnContext(et,"handleTripleClickOn",dt,kt,$t)||et.someProp("handleTripleClick",Tt=>Tt(et,dt,$t))||defaultTripleClick(et,kt,$t)}function defaultTripleClick(et,dt,kt){if(kt.button!=0)return!1;let $t=et.state.doc;if(dt==-1)return $t.inlineContent?(updateSelection(et,TextSelection.create($t,0,$t.content.size),"pointer"),!0):!1;let Tt=$t.resolve(dt);for(let Dt=Tt.depth+1;Dt>0;Dt--){let Ft=Dt>Tt.depth?Tt.nodeAfter:Tt.node(Dt),Ut=Tt.before(Dt);if(Ft.inlineContent)updateSelection(et,TextSelection.create($t,Ut+1,Ut+1+Ft.content.size),"pointer");else if(NodeSelection.isSelectable(Ft))updateSelection(et,NodeSelection.create($t,Ut),"pointer");else continue;return!0}}function forceDOMFlush(et){return endComposition(et)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(et,dt)=>{let kt=dt;et.input.shiftKey=kt.shiftKey;let $t=forceDOMFlush(et),Tt=Date.now(),Dt="singleClick";Tt-et.input.lastClick.time<500&&isNear(kt,et.input.lastClick)&&!kt[selectNodeModifier]&&et.input.lastClick.button==kt.button&&(et.input.lastClick.type=="singleClick"?Dt="doubleClick":et.input.lastClick.type=="doubleClick"&&(Dt="tripleClick")),et.input.lastClick={time:Tt,x:kt.clientX,y:kt.clientY,type:Dt,button:kt.button};let Ft=et.posAtCoords(eventCoords(kt));Ft&&(Dt=="singleClick"?(et.input.mouseDown&&et.input.mouseDown.done(),et.input.mouseDown=new MouseDown(et,Ft,kt,!!$t)):(Dt=="doubleClick"?handleDoubleClick:handleTripleClick)(et,Ft.pos,Ft.inside,kt)?kt.preventDefault():setSelectionOrigin(et,"pointer"))};class MouseDown{constructor(dt,kt,$t,Tt){this.view=dt,this.pos=kt,this.event=$t,this.flushed=Tt,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=dt.state.doc,this.selectNode=!!$t[selectNodeModifier],this.allowDefault=$t.shiftKey;let Dt,Ft;if(kt.inside>-1)Dt=dt.state.doc.nodeAt(kt.inside),Ft=kt.inside;else{let Yt=dt.state.doc.resolve(kt.pos);Dt=Yt.parent,Ft=Yt.depth?Yt.before():0}const Ut=Tt?null:$t.target,Ht=Ut?dt.docView.nearestDesc(Ut,!0):null;this.target=Ht&&Ht.nodeDOM.nodeType==1?Ht.nodeDOM:null;let{selection:Kt}=dt.state;($t.button==0&&Dt.type.spec.draggable&&Dt.type.spec.selectable!==!1||Kt instanceof NodeSelection&&Kt.from<=Ft&&Kt.to>Ft)&&(this.mightDrag={node:Dt,pos:Ft,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),dt.root.addEventListener("mouseup",this.up=this.up.bind(this)),dt.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(dt,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(dt){if(this.done(),!this.view.dom.contains(dt.target))return;let kt=this.pos;this.view.state.doc!=this.startDoc&&(kt=this.view.posAtCoords(eventCoords(dt))),this.updateAllowDefault(dt),this.allowDefault||!kt?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,kt.pos,kt.inside,dt,this.selectNode)?dt.preventDefault():dt.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(kt.pos-this.view.state.selection.from),Math.abs(kt.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(kt.pos)),"pointer"),dt.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(dt){this.updateAllowDefault(dt),setSelectionOrigin(this.view,"pointer"),dt.buttons==0&&this.done()}updateAllowDefault(dt){!this.allowDefault&&(Math.abs(this.event.x-dt.clientX)>4||Math.abs(this.event.y-dt.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=et=>{et.input.lastTouch=Date.now(),forceDOMFlush(et),setSelectionOrigin(et,"pointer")};handlers.touchmove=et=>{et.input.lastTouch=Date.now(),setSelectionOrigin(et,"pointer")};handlers.contextmenu=et=>forceDOMFlush(et);function inOrNearComposition(et,dt){return et.composing?!0:safari&&Math.abs(dt.timeStamp-et.input.compositionEndedAt)<500?(et.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=et=>{if(!et.composing){et.domObserver.flush();let{state:dt}=et,kt=dt.selection.$to;if(dt.selection instanceof TextSelection&&(dt.storedMarks||!kt.textOffset&&kt.parentOffset&&kt.nodeBefore.marks.some($t=>$t.type.spec.inclusive===!1)))et.markCursor=et.state.storedMarks||kt.marks(),endComposition(et,!0),et.markCursor=null;else if(endComposition(et,!dt.selection.empty),gecko&&dt.selection.empty&&kt.parentOffset&&!kt.textOffset&&kt.nodeBefore.marks.length){let $t=et.domSelectionRange();for(let Tt=$t.focusNode,Dt=$t.focusOffset;Tt&&Tt.nodeType==1&&Dt!=0;){let Ft=Dt<0?Tt.lastChild:Tt.childNodes[Dt-1];if(!Ft)break;if(Ft.nodeType==3){let Ut=et.domSelection();Ut&&Ut.collapse(Ft,Ft.nodeValue.length);break}else Tt=Ft,Dt=-1}}et.input.composing=!0}scheduleComposeEnd(et,timeoutComposition)};editHandlers.compositionend=(et,dt)=>{et.composing&&(et.input.composing=!1,et.input.compositionEndedAt=dt.timeStamp,et.input.compositionPendingChanges=et.domObserver.pendingRecords().length?et.input.compositionID:0,et.input.compositionNode=null,et.input.compositionPendingChanges&&Promise.resolve().then(()=>et.domObserver.flush()),et.input.compositionID++,scheduleComposeEnd(et,20))};function scheduleComposeEnd(et,dt){clearTimeout(et.input.composingTimeout),dt>-1&&(et.input.composingTimeout=setTimeout(()=>endComposition(et),dt))}function clearComposition(et){for(et.composing&&(et.input.composing=!1,et.input.compositionEndedAt=timestampFromCustomEvent());et.input.compositionNodes.length>0;)et.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(et){let dt=et.domSelectionRange();if(!dt.focusNode)return null;let kt=textNodeBefore$1(dt.focusNode,dt.focusOffset),$t=textNodeAfter$1(dt.focusNode,dt.focusOffset);if(kt&&$t&&kt!=$t){let Tt=$t.pmViewDesc,Dt=et.domObserver.lastChangedTextNode;if(kt==Dt||$t==Dt)return Dt;if(!Tt||!Tt.isText($t.nodeValue))return $t;if(et.input.compositionNode==$t){let Ft=kt.pmViewDesc;if(!(!Ft||!Ft.isText(kt.nodeValue)))return $t}}return kt||$t}function timestampFromCustomEvent(){let et=document.createEvent("Event");return et.initEvent("event",!0,!0),et.timeStamp}function endComposition(et,dt=!1){if(!(android&&et.domObserver.flushingSoon>=0)){if(et.domObserver.forceFlush(),clearComposition(et),dt||et.docView&&et.docView.dirty){let kt=selectionFromDOM(et),$t=et.state.selection;return kt&&!kt.eq($t)?et.dispatch(et.state.tr.setSelection(kt)):(et.markCursor||dt)&&!$t.$from.node($t.$from.sharedDepth($t.to)).inlineContent?et.dispatch(et.state.tr.deleteSelection()):et.updateState(et.state),!0}return!1}}function captureCopy(et,dt){if(!et.dom.parentNode)return;let kt=et.dom.parentNode.appendChild(document.createElement("div"));kt.appendChild(dt),kt.style.cssText="position: fixed; left: -10000px; top: 10px";let $t=getSelection(),Tt=document.createRange();Tt.selectNodeContents(dt),et.dom.blur(),$t.removeAllRanges(),$t.addRange(Tt),setTimeout(()=>{kt.parentNode&&kt.parentNode.removeChild(kt),et.focus()},50)}const brokenClipboardAPI=ie$2&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(et,dt)=>{let kt=dt,$t=et.state.selection,Tt=kt.type=="cut";if($t.empty)return;let Dt=brokenClipboardAPI?null:kt.clipboardData,Ft=$t.content(),{dom:Ut,text:Ht}=serializeForClipboard(et,Ft);Dt?(kt.preventDefault(),Dt.clearData(),Dt.setData("text/html",Ut.innerHTML),Dt.setData("text/plain",Ht)):captureCopy(et,Ut),Tt&&et.dispatch(et.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(et){return et.openStart==0&&et.openEnd==0&&et.content.childCount==1?et.content.firstChild:null}function capturePaste(et,dt){if(!et.dom.parentNode)return;let kt=et.input.shiftKey||et.state.selection.$from.parent.type.spec.code,$t=et.dom.parentNode.appendChild(document.createElement(kt?"textarea":"div"));kt||($t.contentEditable="true"),$t.style.cssText="position: fixed; left: -10000px; top: 10px",$t.focus();let Tt=et.input.shiftKey&&et.input.lastKeyCode!=45;setTimeout(()=>{et.focus(),$t.parentNode&&$t.parentNode.removeChild($t),kt?doPaste(et,$t.value,null,Tt,dt):doPaste(et,$t.textContent,$t.innerHTML,Tt,dt)},50)}function doPaste(et,dt,kt,$t,Tt){let Dt=parseFromClipboard(et,dt,kt,$t,et.state.selection.$from);if(et.someProp("handlePaste",Ht=>Ht(et,Tt,Dt||Slice.empty)))return!0;if(!Dt)return!1;let Ft=sliceSingleNode(Dt),Ut=Ft?et.state.tr.replaceSelectionWith(Ft,$t):et.state.tr.replaceSelection(Dt);return et.dispatch(Ut.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(et){let dt=et.getData("text/plain")||et.getData("Text");if(dt)return dt;let kt=et.getData("text/uri-list");return kt?kt.replace(/\r?\n/g," "):""}editHandlers.paste=(et,dt)=>{let kt=dt;if(et.composing&&!android)return;let $t=brokenClipboardAPI?null:kt.clipboardData,Tt=et.input.shiftKey&&et.input.lastKeyCode!=45;$t&&doPaste(et,getText$1($t),$t.getData("text/html"),Tt,kt)?kt.preventDefault():capturePaste(et,kt)};class Dragging{constructor(dt,kt,$t){this.slice=dt,this.move=kt,this.node=$t}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(et,dt){let kt=et.someProp("dragCopies",$t=>!$t(dt));return kt??!dt[dragCopyModifier]}handlers.dragstart=(et,dt)=>{let kt=dt,$t=et.input.mouseDown;if($t&&$t.done(),!kt.dataTransfer)return;let Tt=et.state.selection,Dt=Tt.empty?null:et.posAtCoords(eventCoords(kt)),Ft;if(!(Dt&&Dt.pos>=Tt.from&&Dt.pos<=(Tt instanceof NodeSelection?Tt.to-1:Tt.to))){if($t&&$t.mightDrag)Ft=NodeSelection.create(et.state.doc,$t.mightDrag.pos);else if(kt.target&&kt.target.nodeType==1){let Jt=et.docView.nearestDesc(kt.target,!0);Jt&&Jt.node.type.spec.draggable&&Jt!=et.docView&&(Ft=NodeSelection.create(et.state.doc,Jt.posBefore))}}let Ut=(Ft||et.state.selection).content(),{dom:Ht,text:Kt,slice:Yt}=serializeForClipboard(et,Ut);(!kt.dataTransfer.files.length||!chrome||chrome_version>120)&&kt.dataTransfer.clearData(),kt.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",Ht.innerHTML),kt.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||kt.dataTransfer.setData("text/plain",Kt),et.dragging=new Dragging(Yt,dragMoves(et,kt),Ft)};handlers.dragend=et=>{let dt=et.dragging;window.setTimeout(()=>{et.dragging==dt&&(et.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(et,dt)=>dt.preventDefault();editHandlers.drop=(et,dt)=>{let kt=dt,$t=et.dragging;if(et.dragging=null,!kt.dataTransfer)return;let Tt=et.posAtCoords(eventCoords(kt));if(!Tt)return;let Dt=et.state.doc.resolve(Tt.pos),Ft=$t&&$t.slice;Ft?et.someProp("transformPasted",rr=>{Ft=rr(Ft,et,!1)}):Ft=parseFromClipboard(et,getText$1(kt.dataTransfer),brokenClipboardAPI?null:kt.dataTransfer.getData("text/html"),!1,Dt);let Ut=!!($t&&dragMoves(et,kt));if(et.someProp("handleDrop",rr=>rr(et,kt,Ft||Slice.empty,Ut))){kt.preventDefault();return}if(!Ft)return;kt.preventDefault();let Ht=Ft?dropPoint(et.state.doc,Dt.pos,Ft):Dt.pos;Ht==null&&(Ht=Dt.pos);let Kt=et.state.tr;if(Ut){let{node:rr}=$t;rr?rr.replace(Kt):Kt.deleteSelection()}let Yt=Kt.mapping.map(Ht),Jt=Ft.openStart==0&&Ft.openEnd==0&&Ft.content.childCount==1,Zt=Kt.doc;if(Jt?Kt.replaceRangeWith(Yt,Yt,Ft.content.firstChild):Kt.replaceRange(Yt,Yt,Ft),Kt.doc.eq(Zt))return;let er=Kt.doc.resolve(Yt);if(Jt&&NodeSelection.isSelectable(Ft.content.firstChild)&&er.nodeAfter&&er.nodeAfter.sameMarkup(Ft.content.firstChild))Kt.setSelection(new NodeSelection(er));else{let rr=Kt.mapping.map(Ht);Kt.mapping.maps[Kt.mapping.maps.length-1].forEach((sr,nr,ir,lr)=>rr=lr),Kt.setSelection(selectionBetween(et,er,Kt.doc.resolve(rr)))}et.focus(),et.dispatch(Kt.setMeta("uiEvent","drop"))};handlers.focus=et=>{et.input.lastFocus=Date.now(),et.focused||(et.domObserver.stop(),et.dom.classList.add("ProseMirror-focused"),et.domObserver.start(),et.focused=!0,setTimeout(()=>{et.docView&&et.hasFocus()&&!et.domObserver.currentSelection.eq(et.domSelectionRange())&&selectionToDOM(et)},20))};handlers.blur=(et,dt)=>{let kt=dt;et.focused&&(et.domObserver.stop(),et.dom.classList.remove("ProseMirror-focused"),et.domObserver.start(),kt.relatedTarget&&et.dom.contains(kt.relatedTarget)&&et.domObserver.currentSelection.clear(),et.focused=!1)};handlers.beforeinput=(et,dt)=>{if(chrome&&android&&dt.inputType=="deleteContentBackward"){et.domObserver.flushSoon();let{domChangeCount:$t}=et.input;setTimeout(()=>{if(et.input.domChangeCount!=$t||(et.dom.blur(),et.focus(),et.someProp("handleKeyDown",Dt=>Dt(et,keyEvent(8,"Backspace")))))return;let{$cursor:Tt}=et.state.selection;Tt&&Tt.pos>0&&et.dispatch(et.state.tr.delete(Tt.pos-1,Tt.pos).scrollIntoView())},50)}};for(let et in editHandlers)handlers[et]=editHandlers[et];function compareObjs(et,dt){if(et==dt)return!0;for(let kt in et)if(et[kt]!==dt[kt])return!1;for(let kt in dt)if(!(kt in et))return!1;return!0}class WidgetType{constructor(dt,kt){this.toDOM=dt,this.spec=kt||noSpec,this.side=this.spec.side||0}map(dt,kt,$t,Tt){let{pos:Dt,deleted:Ft}=dt.mapResult(kt.from+Tt,this.side<0?-1:1);return Ft?null:new Decoration(Dt-$t,Dt-$t,this)}valid(){return!0}eq(dt){return this==dt||dt instanceof WidgetType&&(this.spec.key&&this.spec.key==dt.spec.key||this.toDOM==dt.toDOM&&compareObjs(this.spec,dt.spec))}destroy(dt){this.spec.destroy&&this.spec.destroy(dt)}}class InlineType{constructor(dt,kt){this.attrs=dt,this.spec=kt||noSpec}map(dt,kt,$t,Tt){let Dt=dt.map(kt.from+Tt,this.spec.inclusiveStart?-1:1)-$t,Ft=dt.map(kt.to+Tt,this.spec.inclusiveEnd?1:-1)-$t;return Dt>=Ft?null:new Decoration(Dt,Ft,this)}valid(dt,kt){return kt.from<kt.to}eq(dt){return this==dt||dt instanceof InlineType&&compareObjs(this.attrs,dt.attrs)&&compareObjs(this.spec,dt.spec)}static is(dt){return dt.type instanceof InlineType}destroy(){}}class NodeType{constructor(dt,kt){this.attrs=dt,this.spec=kt||noSpec}map(dt,kt,$t,Tt){let Dt=dt.mapResult(kt.from+Tt,1);if(Dt.deleted)return null;let Ft=dt.mapResult(kt.to+Tt,-1);return Ft.deleted||Ft.pos<=Dt.pos?null:new Decoration(Dt.pos-$t,Ft.pos-$t,this)}valid(dt,kt){let{index:$t,offset:Tt}=dt.content.findIndex(kt.from),Dt;return Tt==kt.from&&!(Dt=dt.child($t)).isText&&Tt+Dt.nodeSize==kt.to}eq(dt){return this==dt||dt instanceof NodeType&&compareObjs(this.attrs,dt.attrs)&&compareObjs(this.spec,dt.spec)}destroy(){}}class Decoration{constructor(dt,kt,$t){this.from=dt,this.to=kt,this.type=$t}copy(dt,kt){return new Decoration(dt,kt,this.type)}eq(dt,kt=0){return this.type.eq(dt.type)&&this.from+kt==dt.from&&this.to+kt==dt.to}map(dt,kt,$t){return this.type.map(dt,this,kt,$t)}static widget(dt,kt,$t){return new Decoration(dt,dt,new WidgetType(kt,$t))}static inline(dt,kt,$t,Tt){return new Decoration(dt,kt,new InlineType($t,Tt))}static node(dt,kt,$t,Tt){return new Decoration(dt,kt,new NodeType($t,Tt))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(dt,kt){this.local=dt.length?dt:none,this.children=kt.length?kt:none}static create(dt,kt){return kt.length?buildTree(kt,dt,0,noSpec):empty}find(dt,kt,$t){let Tt=[];return this.findInner(dt??0,kt??1e9,Tt,0,$t),Tt}findInner(dt,kt,$t,Tt,Dt){for(let Ft=0;Ft<this.local.length;Ft++){let Ut=this.local[Ft];Ut.from<=kt&&Ut.to>=dt&&(!Dt||Dt(Ut.spec))&&$t.push(Ut.copy(Ut.from+Tt,Ut.to+Tt))}for(let Ft=0;Ft<this.children.length;Ft+=3)if(this.children[Ft]<kt&&this.children[Ft+1]>dt){let Ut=this.children[Ft]+1;this.children[Ft+2].findInner(dt-Ut,kt-Ut,$t,Tt+Ut,Dt)}}map(dt,kt,$t){return this==empty||dt.maps.length==0?this:this.mapInner(dt,kt,0,0,$t||noSpec)}mapInner(dt,kt,$t,Tt,Dt){let Ft;for(let Ut=0;Ut<this.local.length;Ut++){let Ht=this.local[Ut].map(dt,$t,Tt);Ht&&Ht.type.valid(kt,Ht)?(Ft||(Ft=[])).push(Ht):Dt.onRemove&&Dt.onRemove(this.local[Ut].spec)}return this.children.length?mapChildren(this.children,Ft||[],dt,kt,$t,Tt,Dt):Ft?new DecorationSet(Ft.sort(byPos),none):empty}add(dt,kt){return kt.length?this==empty?DecorationSet.create(dt,kt):this.addInner(dt,kt,0):this}addInner(dt,kt,$t){let Tt,Dt=0;dt.forEach((Ut,Ht)=>{let Kt=Ht+$t,Yt;if(Yt=takeSpansForNode(kt,Ut,Kt)){for(Tt||(Tt=this.children.slice());Dt<Tt.length&&Tt[Dt]<Ht;)Dt+=3;Tt[Dt]==Ht?Tt[Dt+2]=Tt[Dt+2].addInner(Ut,Yt,Kt+1):Tt.splice(Dt,0,Ht,Ht+Ut.nodeSize,buildTree(Yt,Ut,Kt+1,noSpec)),Dt+=3}});let Ft=moveSpans(Dt?withoutNulls(kt):kt,-$t);for(let Ut=0;Ut<Ft.length;Ut++)Ft[Ut].type.valid(dt,Ft[Ut])||Ft.splice(Ut--,1);return new DecorationSet(Ft.length?this.local.concat(Ft).sort(byPos):this.local,Tt||this.children)}remove(dt){return dt.length==0||this==empty?this:this.removeInner(dt,0)}removeInner(dt,kt){let $t=this.children,Tt=this.local;for(let Dt=0;Dt<$t.length;Dt+=3){let Ft,Ut=$t[Dt]+kt,Ht=$t[Dt+1]+kt;for(let Yt=0,Jt;Yt<dt.length;Yt++)(Jt=dt[Yt])&&Jt.from>Ut&&Jt.to<Ht&&(dt[Yt]=null,(Ft||(Ft=[])).push(Jt));if(!Ft)continue;$t==this.children&&($t=this.children.slice());let Kt=$t[Dt+2].removeInner(Ft,Ut+1);Kt!=empty?$t[Dt+2]=Kt:($t.splice(Dt,3),Dt-=3)}if(Tt.length){for(let Dt=0,Ft;Dt<dt.length;Dt++)if(Ft=dt[Dt])for(let Ut=0;Ut<Tt.length;Ut++)Tt[Ut].eq(Ft,kt)&&(Tt==this.local&&(Tt=this.local.slice()),Tt.splice(Ut--,1))}return $t==this.children&&Tt==this.local?this:Tt.length||$t.length?new DecorationSet(Tt,$t):empty}forChild(dt,kt){if(this==empty)return this;if(kt.isLeaf)return DecorationSet.empty;let $t,Tt;for(let Ut=0;Ut<this.children.length;Ut+=3)if(this.children[Ut]>=dt){this.children[Ut]==dt&&($t=this.children[Ut+2]);break}let Dt=dt+1,Ft=Dt+kt.content.size;for(let Ut=0;Ut<this.local.length;Ut++){let Ht=this.local[Ut];if(Ht.from<Ft&&Ht.to>Dt&&Ht.type instanceof InlineType){let Kt=Math.max(Dt,Ht.from)-Dt,Yt=Math.min(Ft,Ht.to)-Dt;Kt<Yt&&(Tt||(Tt=[])).push(Ht.copy(Kt,Yt))}}if(Tt){let Ut=new DecorationSet(Tt.sort(byPos),none);return $t?new DecorationGroup([Ut,$t]):Ut}return $t||empty}eq(dt){if(this==dt)return!0;if(!(dt instanceof DecorationSet)||this.local.length!=dt.local.length||this.children.length!=dt.children.length)return!1;for(let kt=0;kt<this.local.length;kt++)if(!this.local[kt].eq(dt.local[kt]))return!1;for(let kt=0;kt<this.children.length;kt+=3)if(this.children[kt]!=dt.children[kt]||this.children[kt+1]!=dt.children[kt+1]||!this.children[kt+2].eq(dt.children[kt+2]))return!1;return!0}locals(dt){return removeOverlap(this.localsInner(dt))}localsInner(dt){if(this==empty)return none;if(dt.inlineContent||!this.local.some(InlineType.is))return this.local;let kt=[];for(let $t=0;$t<this.local.length;$t++)this.local[$t].type instanceof InlineType||kt.push(this.local[$t]);return kt}forEachSet(dt){dt(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(dt){this.members=dt}map(dt,kt){const $t=this.members.map(Tt=>Tt.map(dt,kt,noSpec));return DecorationGroup.from($t)}forChild(dt,kt){if(kt.isLeaf)return DecorationSet.empty;let $t=[];for(let Tt=0;Tt<this.members.length;Tt++){let Dt=this.members[Tt].forChild(dt,kt);Dt!=empty&&(Dt instanceof DecorationGroup?$t=$t.concat(Dt.members):$t.push(Dt))}return DecorationGroup.from($t)}eq(dt){if(!(dt instanceof DecorationGroup)||dt.members.length!=this.members.length)return!1;for(let kt=0;kt<this.members.length;kt++)if(!this.members[kt].eq(dt.members[kt]))return!1;return!0}locals(dt){let kt,$t=!0;for(let Tt=0;Tt<this.members.length;Tt++){let Dt=this.members[Tt].localsInner(dt);if(Dt.length)if(!kt)kt=Dt;else{$t&&(kt=kt.slice(),$t=!1);for(let Ft=0;Ft<Dt.length;Ft++)kt.push(Dt[Ft])}}return kt?removeOverlap($t?kt:kt.sort(byPos)):none}static from(dt){switch(dt.length){case 0:return empty;case 1:return dt[0];default:return new DecorationGroup(dt.every(kt=>kt instanceof DecorationSet)?dt:dt.reduce((kt,$t)=>kt.concat($t instanceof DecorationSet?$t:$t.members),[]))}}forEachSet(dt){for(let kt=0;kt<this.members.length;kt++)this.members[kt].forEachSet(dt)}}function mapChildren(et,dt,kt,$t,Tt,Dt,Ft){let Ut=et.slice();for(let Kt=0,Yt=Dt;Kt<kt.maps.length;Kt++){let Jt=0;kt.maps[Kt].forEach((Zt,er,rr,sr)=>{let nr=sr-rr-(er-Zt);for(let ir=0;ir<Ut.length;ir+=3){let lr=Ut[ir+1];if(lr<0||Zt>lr+Yt-Jt)continue;let or=Ut[ir]+Yt-Jt;er>=or?Ut[ir+1]=Zt<=or?-2:-1:Zt>=Yt&&nr&&(Ut[ir]+=nr,Ut[ir+1]+=nr)}Jt+=nr}),Yt=kt.maps[Kt].map(Yt,-1)}let Ht=!1;for(let Kt=0;Kt<Ut.length;Kt+=3)if(Ut[Kt+1]<0){if(Ut[Kt+1]==-2){Ht=!0,Ut[Kt+1]=-1;continue}let Yt=kt.map(et[Kt]+Dt),Jt=Yt-Tt;if(Jt<0||Jt>=$t.content.size){Ht=!0;continue}let Zt=kt.map(et[Kt+1]+Dt,-1),er=Zt-Tt,{index:rr,offset:sr}=$t.content.findIndex(Jt),nr=$t.maybeChild(rr);if(nr&&sr==Jt&&sr+nr.nodeSize==er){let ir=Ut[Kt+2].mapInner(kt,nr,Yt+1,et[Kt]+Dt+1,Ft);ir!=empty?(Ut[Kt]=Jt,Ut[Kt+1]=er,Ut[Kt+2]=ir):(Ut[Kt+1]=-2,Ht=!0)}else Ht=!0}if(Ht){let Kt=mapAndGatherRemainingDecorations(Ut,et,dt,kt,Tt,Dt,Ft),Yt=buildTree(Kt,$t,0,Ft);dt=Yt.local;for(let Jt=0;Jt<Ut.length;Jt+=3)Ut[Jt+1]<0&&(Ut.splice(Jt,3),Jt-=3);for(let Jt=0,Zt=0;Jt<Yt.children.length;Jt+=3){let er=Yt.children[Jt];for(;Zt<Ut.length&&Ut[Zt]<er;)Zt+=3;Ut.splice(Zt,0,Yt.children[Jt],Yt.children[Jt+1],Yt.children[Jt+2])}}return new DecorationSet(dt.sort(byPos),Ut)}function moveSpans(et,dt){if(!dt||!et.length)return et;let kt=[];for(let $t=0;$t<et.length;$t++){let Tt=et[$t];kt.push(new Decoration(Tt.from+dt,Tt.to+dt,Tt.type))}return kt}function mapAndGatherRemainingDecorations(et,dt,kt,$t,Tt,Dt,Ft){function Ut(Ht,Kt){for(let Yt=0;Yt<Ht.local.length;Yt++){let Jt=Ht.local[Yt].map($t,Tt,Kt);Jt?kt.push(Jt):Ft.onRemove&&Ft.onRemove(Ht.local[Yt].spec)}for(let Yt=0;Yt<Ht.children.length;Yt+=3)Ut(Ht.children[Yt+2],Ht.children[Yt]+Kt+1)}for(let Ht=0;Ht<et.length;Ht+=3)et[Ht+1]==-1&&Ut(et[Ht+2],dt[Ht]+Dt+1);return kt}function takeSpansForNode(et,dt,kt){if(dt.isLeaf)return null;let $t=kt+dt.nodeSize,Tt=null;for(let Dt=0,Ft;Dt<et.length;Dt++)(Ft=et[Dt])&&Ft.from>kt&&Ft.to<$t&&((Tt||(Tt=[])).push(Ft),et[Dt]=null);return Tt}function withoutNulls(et){let dt=[];for(let kt=0;kt<et.length;kt++)et[kt]!=null&&dt.push(et[kt]);return dt}function buildTree(et,dt,kt,$t){let Tt=[],Dt=!1;dt.forEach((Ut,Ht)=>{let Kt=takeSpansForNode(et,Ut,Ht+kt);if(Kt){Dt=!0;let Yt=buildTree(Kt,Ut,kt+Ht+1,$t);Yt!=empty&&Tt.push(Ht,Ht+Ut.nodeSize,Yt)}});let Ft=moveSpans(Dt?withoutNulls(et):et,-kt).sort(byPos);for(let Ut=0;Ut<Ft.length;Ut++)Ft[Ut].type.valid(dt,Ft[Ut])||($t.onRemove&&$t.onRemove(Ft[Ut].spec),Ft.splice(Ut--,1));return Ft.length||Tt.length?new DecorationSet(Ft,Tt):empty}function byPos(et,dt){return et.from-dt.from||et.to-dt.to}function removeOverlap(et){let dt=et;for(let kt=0;kt<dt.length-1;kt++){let $t=dt[kt];if($t.from!=$t.to)for(let Tt=kt+1;Tt<dt.length;Tt++){let Dt=dt[Tt];if(Dt.from==$t.from){Dt.to!=$t.to&&(dt==et&&(dt=et.slice()),dt[Tt]=Dt.copy(Dt.from,$t.to),insertAhead(dt,Tt+1,Dt.copy($t.to,Dt.to)));continue}else{Dt.from<$t.to&&(dt==et&&(dt=et.slice()),dt[kt]=$t.copy($t.from,Dt.from),insertAhead(dt,Tt,$t.copy(Dt.from,$t.to)));break}}}return dt}function insertAhead(et,dt,kt){for(;dt<et.length&&byPos(kt,et[dt])>0;)dt++;et.splice(dt,0,kt)}function viewDecorations(et){let dt=[];return et.someProp("decorations",kt=>{let $t=kt(et.state);$t&&$t!=empty&&dt.push($t)}),et.cursorWrapper&&dt.push(DecorationSet.create(et.state.doc,[et.cursorWrapper.deco])),DecorationGroup.from(dt)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(dt){this.anchorNode=dt.anchorNode,this.anchorOffset=dt.anchorOffset,this.focusNode=dt.focusNode,this.focusOffset=dt.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(dt){return dt.anchorNode==this.anchorNode&&dt.anchorOffset==this.anchorOffset&&dt.focusNode==this.focusNode&&dt.focusOffset==this.focusOffset}}class DOMObserver{constructor(dt,kt){this.view=dt,this.handleDOMChange=kt,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver($t=>{for(let Tt=0;Tt<$t.length;Tt++)this.queue.push($t[Tt]);ie$2&&ie_version<=11&&$t.some(Tt=>Tt.type=="childList"&&Tt.removedNodes.length||Tt.type=="characterData"&&Tt.oldValue.length>Tt.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=$t=>{this.queue.push({target:$t.target,type:"characterData",oldValue:$t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let dt=this.observer.takeRecords();if(dt.length){for(let kt=0;kt<dt.length;kt++)this.queue.push(dt[kt]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let dt=this.view.domSelectionRange();if(dt.focusNode&&isEquivalentPosition(dt.focusNode,dt.focusOffset,dt.anchorNode,dt.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(dt){if(!dt.focusNode)return!0;let kt=new Set,$t;for(let Dt=dt.focusNode;Dt;Dt=parentNode(Dt))kt.add(Dt);for(let Dt=dt.anchorNode;Dt;Dt=parentNode(Dt))if(kt.has(Dt)){$t=Dt;break}let Tt=$t&&this.view.docView.nearestDesc($t);if(Tt&&Tt.ignoreMutation({type:"selection",target:$t.nodeType==3?$t.parentNode:$t}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let dt of this.observer.takeRecords())this.queue.push(dt);return this.queue}flush(){let{view:dt}=this;if(!dt.docView||this.flushingSoon>-1)return;let kt=this.pendingRecords();kt.length&&(this.queue=[]);let $t=dt.domSelectionRange(),Tt=!this.suppressingSelectionUpdates&&!this.currentSelection.eq($t)&&hasFocusAndSelection(dt)&&!this.ignoreSelectionChange($t),Dt=-1,Ft=-1,Ut=!1,Ht=[];if(dt.editable)for(let Yt=0;Yt<kt.length;Yt++){let Jt=this.registerMutation(kt[Yt],Ht);Jt&&(Dt=Dt<0?Jt.from:Math.min(Jt.from,Dt),Ft=Ft<0?Jt.to:Math.max(Jt.to,Ft),Jt.typeOver&&(Ut=!0))}if(gecko&&Ht.length){let Yt=Ht.filter(Jt=>Jt.nodeName=="BR");if(Yt.length==2){let[Jt,Zt]=Yt;Jt.parentNode&&Jt.parentNode.parentNode==Zt.parentNode?Zt.remove():Jt.remove()}else{let{focusNode:Jt}=this.currentSelection;for(let Zt of Yt){let er=Zt.parentNode;er&&er.nodeName=="LI"&&(!Jt||blockParent(dt,Jt)!=er)&&Zt.remove()}}}let Kt=null;Dt<0&&Tt&&dt.input.lastFocus>Date.now()-200&&Math.max(dt.input.lastTouch,dt.input.lastClick.time)<Date.now()-300&&selectionCollapsed($t)&&(Kt=selectionFromDOM(dt))&&Kt.eq(Selection.near(dt.state.doc.resolve(0),1))?(dt.input.lastFocus=0,selectionToDOM(dt),this.currentSelection.set($t),dt.scrollToSelection()):(Dt>-1||Tt)&&(Dt>-1&&(dt.docView.markDirty(Dt,Ft),checkCSS(dt)),this.handleDOMChange(Dt,Ft,Ut,Ht),dt.docView&&dt.docView.dirty?dt.updateState(dt.state):this.currentSelection.eq($t)||selectionToDOM(dt),this.currentSelection.set($t))}registerMutation(dt,kt){if(kt.indexOf(dt.target)>-1)return null;let $t=this.view.docView.nearestDesc(dt.target);if(dt.type=="attributes"&&($t==this.view.docView||dt.attributeName=="contenteditable"||dt.attributeName=="style"&&!dt.oldValue&&!dt.target.getAttribute("style"))||!$t||$t.ignoreMutation(dt))return null;if(dt.type=="childList"){for(let Yt=0;Yt<dt.addedNodes.length;Yt++){let Jt=dt.addedNodes[Yt];kt.push(Jt),Jt.nodeType==3&&(this.lastChangedTextNode=Jt)}if($t.contentDOM&&$t.contentDOM!=$t.dom&&!$t.contentDOM.contains(dt.target))return{from:$t.posBefore,to:$t.posAfter};let Tt=dt.previousSibling,Dt=dt.nextSibling;if(ie$2&&ie_version<=11&&dt.addedNodes.length)for(let Yt=0;Yt<dt.addedNodes.length;Yt++){let{previousSibling:Jt,nextSibling:Zt}=dt.addedNodes[Yt];(!Jt||Array.prototype.indexOf.call(dt.addedNodes,Jt)<0)&&(Tt=Jt),(!Zt||Array.prototype.indexOf.call(dt.addedNodes,Zt)<0)&&(Dt=Zt)}let Ft=Tt&&Tt.parentNode==dt.target?domIndex(Tt)+1:0,Ut=$t.localPosFromDOM(dt.target,Ft,-1),Ht=Dt&&Dt.parentNode==dt.target?domIndex(Dt):dt.target.childNodes.length,Kt=$t.localPosFromDOM(dt.target,Ht,1);return{from:Ut,to:Kt}}else return dt.type=="attributes"?{from:$t.posAtStart-$t.border,to:$t.posAtEnd+$t.border}:(this.lastChangedTextNode=dt.target,{from:$t.posAtStart,to:$t.posAtEnd,typeOver:dt.target.nodeValue==dt.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(et){if(!cssChecked.has(et)&&(cssChecked.set(et,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(et.dom).whiteSpace)!==-1)){if(et.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(et,dt){let kt=dt.startContainer,$t=dt.startOffset,Tt=dt.endContainer,Dt=dt.endOffset,Ft=et.domAtPos(et.state.selection.anchor);return isEquivalentPosition(Ft.node,Ft.offset,Tt,Dt)&&([kt,$t,Tt,Dt]=[Tt,Dt,kt,$t]),{anchorNode:kt,anchorOffset:$t,focusNode:Tt,focusOffset:Dt}}function safariShadowSelectionRange(et,dt){if(dt.getComposedRanges){let Tt=dt.getComposedRanges(et.root)[0];if(Tt)return rangeToSelectionRange(et,Tt)}let kt;function $t(Tt){Tt.preventDefault(),Tt.stopImmediatePropagation(),kt=Tt.getTargetRanges()[0]}return et.dom.addEventListener("beforeinput",$t,!0),document.execCommand("indent"),et.dom.removeEventListener("beforeinput",$t,!0),kt?rangeToSelectionRange(et,kt):null}function blockParent(et,dt){for(let kt=dt.parentNode;kt&&kt!=et.dom;kt=kt.parentNode){let $t=et.docView.nearestDesc(kt,!0);if($t&&$t.node.isBlock)return kt}return null}function parseBetween(et,dt,kt){let{node:$t,fromOffset:Tt,toOffset:Dt,from:Ft,to:Ut}=et.docView.parseRange(dt,kt),Ht=et.domSelectionRange(),Kt,Yt=Ht.anchorNode;if(Yt&&et.dom.contains(Yt.nodeType==1?Yt:Yt.parentNode)&&(Kt=[{node:Yt,offset:Ht.anchorOffset}],selectionCollapsed(Ht)||Kt.push({node:Ht.focusNode,offset:Ht.focusOffset})),chrome&&et.input.lastKeyCode===8)for(let nr=Dt;nr>Tt;nr--){let ir=$t.childNodes[nr-1],lr=ir.pmViewDesc;if(ir.nodeName=="BR"&&!lr){Dt=nr;break}if(!lr||lr.size)break}let Jt=et.state.doc,Zt=et.someProp("domParser")||DOMParser.fromSchema(et.state.schema),er=Jt.resolve(Ft),rr=null,sr=Zt.parse($t,{topNode:er.parent,topMatch:er.parent.contentMatchAt(er.index()),topOpen:!0,from:Tt,to:Dt,preserveWhitespace:er.parent.type.whitespace=="pre"?"full":!0,findPositions:Kt,ruleFromNode,context:er});if(Kt&&Kt[0].pos!=null){let nr=Kt[0].pos,ir=Kt[1]&&Kt[1].pos;ir==null&&(ir=nr),rr={anchor:nr+Ft,head:ir+Ft}}return{doc:sr,sel:rr,from:Ft,to:Ut}}function ruleFromNode(et){let dt=et.pmViewDesc;if(dt)return dt.parseRule();if(et.nodeName=="BR"&&et.parentNode){if(safari&&/^(ul|ol)$/i.test(et.parentNode.nodeName)){let kt=document.createElement("div");return kt.appendChild(document.createElement("li")),{skip:kt}}else if(et.parentNode.lastChild==et||safari&&/^(tr|table)$/i.test(et.parentNode.nodeName))return{ignore:!0}}else if(et.nodeName=="IMG"&&et.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(et,dt,kt,$t,Tt){let Dt=et.input.compositionPendingChanges||(et.composing?et.input.compositionID:0);if(et.input.compositionPendingChanges=0,dt<0){let pr=et.input.lastSelectionTime>Date.now()-50?et.input.lastSelectionOrigin:null,mr=selectionFromDOM(et,pr);if(mr&&!et.state.selection.eq(mr)){if(chrome&&android&&et.input.lastKeyCode===13&&Date.now()-100<et.input.lastKeyCodeTime&&et.someProp("handleKeyDown",Rr=>Rr(et,keyEvent(13,"Enter"))))return;let jr=et.state.tr.setSelection(mr);pr=="pointer"?jr.setMeta("pointer",!0):pr=="key"&&jr.scrollIntoView(),Dt&&jr.setMeta("composition",Dt),et.dispatch(jr)}return}let Ft=et.state.doc.resolve(dt),Ut=Ft.sharedDepth(kt);dt=Ft.before(Ut+1),kt=et.state.doc.resolve(kt).after(Ut+1);let Ht=et.state.selection,Kt=parseBetween(et,dt,kt),Yt=et.state.doc,Jt=Yt.slice(Kt.from,Kt.to),Zt,er;et.input.lastKeyCode===8&&Date.now()-100<et.input.lastKeyCodeTime?(Zt=et.state.selection.to,er="end"):(Zt=et.state.selection.from,er="start"),et.input.lastKeyCode=null;let rr=findDiff(Jt.content,Kt.doc.content,Kt.from,Zt,er);if(rr&&et.input.domChangeCount++,(ios&&et.input.lastIOSEnter>Date.now()-225||android)&&Tt.some(pr=>pr.nodeType==1&&!isInline.test(pr.nodeName))&&(!rr||rr.endA>=rr.endB)&&et.someProp("handleKeyDown",pr=>pr(et,keyEvent(13,"Enter")))){et.input.lastIOSEnter=0;return}if(!rr)if($t&&Ht instanceof TextSelection&&!Ht.empty&&Ht.$head.sameParent(Ht.$anchor)&&!et.composing&&!(Kt.sel&&Kt.sel.anchor!=Kt.sel.head))rr={start:Ht.from,endA:Ht.to,endB:Ht.to};else{if(Kt.sel){let pr=resolveSelection(et,et.state.doc,Kt.sel);if(pr&&!pr.eq(et.state.selection)){let mr=et.state.tr.setSelection(pr);Dt&&mr.setMeta("composition",Dt),et.dispatch(mr)}}return}et.state.selection.from<et.state.selection.to&&rr.start==rr.endB&&et.state.selection instanceof TextSelection&&(rr.start>et.state.selection.from&&rr.start<=et.state.selection.from+2&&et.state.selection.from>=Kt.from?rr.start=et.state.selection.from:rr.endA<et.state.selection.to&&rr.endA>=et.state.selection.to-2&&et.state.selection.to<=Kt.to&&(rr.endB+=et.state.selection.to-rr.endA,rr.endA=et.state.selection.to)),ie$2&&ie_version<=11&&rr.endB==rr.start+1&&rr.endA==rr.start&&rr.start>Kt.from&&Kt.doc.textBetween(rr.start-Kt.from-1,rr.start-Kt.from+1)==" "&&(rr.start--,rr.endA--,rr.endB--);let sr=Kt.doc.resolveNoCache(rr.start-Kt.from),nr=Kt.doc.resolveNoCache(rr.endB-Kt.from),ir=Yt.resolve(rr.start),lr=sr.sameParent(nr)&&sr.parent.inlineContent&&ir.end()>=rr.endA;if((ios&&et.input.lastIOSEnter>Date.now()-225&&(!lr||Tt.some(pr=>pr.nodeName=="DIV"||pr.nodeName=="P"))||!lr&&sr.pos<Kt.doc.content.size&&(!sr.sameParent(nr)||!sr.parent.inlineContent)&&sr.pos<nr.pos&&!/\S/.test(Kt.doc.textBetween(sr.pos,nr.pos,"","")))&&et.someProp("handleKeyDown",pr=>pr(et,keyEvent(13,"Enter")))){et.input.lastIOSEnter=0;return}if(et.state.selection.anchor>rr.start&&looksLikeBackspace(Yt,rr.start,rr.endA,sr,nr)&&et.someProp("handleKeyDown",pr=>pr(et,keyEvent(8,"Backspace")))){android&&chrome&&et.domObserver.suppressSelectionUpdates();return}chrome&&rr.endB==rr.start&&(et.input.lastChromeDelete=Date.now()),android&&!lr&&sr.start()!=nr.start()&&nr.parentOffset==0&&sr.depth==nr.depth&&Kt.sel&&Kt.sel.anchor==Kt.sel.head&&Kt.sel.head==rr.endA&&(rr.endB-=2,nr=Kt.doc.resolveNoCache(rr.endB-Kt.from),setTimeout(()=>{et.someProp("handleKeyDown",function(pr){return pr(et,keyEvent(13,"Enter"))})},20));let or=rr.start,cr=rr.endA,dr=pr=>{let mr=pr||et.state.tr.replace(or,cr,Kt.doc.slice(rr.start-Kt.from,rr.endB-Kt.from));if(Kt.sel){let jr=resolveSelection(et,mr.doc,Kt.sel);jr&&!(chrome&&et.composing&&jr.empty&&(rr.start!=rr.endB||et.input.lastChromeDelete<Date.now()-100)&&(jr.head==or||jr.head==mr.mapping.map(cr)-1)||ie$2&&jr.empty&&jr.head==or)&&mr.setSelection(jr)}return Dt&&mr.setMeta("composition",Dt),mr.scrollIntoView()},ur;if(lr)if(sr.pos==nr.pos){ie$2&&ie_version<=11&&sr.parentOffset==0&&(et.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(et),20));let pr=dr(et.state.tr.delete(or,cr)),mr=Yt.resolve(rr.start).marksAcross(Yt.resolve(rr.endA));mr&&pr.ensureMarks(mr),et.dispatch(pr)}else if(rr.endA==rr.endB&&(ur=isMarkChange(sr.parent.content.cut(sr.parentOffset,nr.parentOffset),ir.parent.content.cut(ir.parentOffset,rr.endA-ir.start())))){let pr=dr(et.state.tr);ur.type=="add"?pr.addMark(or,cr,ur.mark):pr.removeMark(or,cr,ur.mark),et.dispatch(pr)}else if(sr.parent.child(sr.index()).isText&&sr.index()==nr.index()-(nr.textOffset?0:1)){let pr=sr.parent.textBetween(sr.parentOffset,nr.parentOffset),mr=()=>dr(et.state.tr.insertText(pr,or,cr));et.someProp("handleTextInput",jr=>jr(et,or,cr,pr,mr))||et.dispatch(mr())}else et.dispatch(dr());else et.dispatch(dr())}function resolveSelection(et,dt,kt){return Math.max(kt.anchor,kt.head)>dt.content.size?null:selectionBetween(et,dt.resolve(kt.anchor),dt.resolve(kt.head))}function isMarkChange(et,dt){let kt=et.firstChild.marks,$t=dt.firstChild.marks,Tt=kt,Dt=$t,Ft,Ut,Ht;for(let Yt=0;Yt<$t.length;Yt++)Tt=$t[Yt].removeFromSet(Tt);for(let Yt=0;Yt<kt.length;Yt++)Dt=kt[Yt].removeFromSet(Dt);if(Tt.length==1&&Dt.length==0)Ut=Tt[0],Ft="add",Ht=Yt=>Yt.mark(Ut.addToSet(Yt.marks));else if(Tt.length==0&&Dt.length==1)Ut=Dt[0],Ft="remove",Ht=Yt=>Yt.mark(Ut.removeFromSet(Yt.marks));else return null;let Kt=[];for(let Yt=0;Yt<dt.childCount;Yt++)Kt.push(Ht(dt.child(Yt)));if(Fragment.from(Kt).eq(et))return{mark:Ut,type:Ft}}function looksLikeBackspace(et,dt,kt,$t,Tt){if(kt-dt<=Tt.pos-$t.pos||skipClosingAndOpening($t,!0,!1)<Tt.pos)return!1;let Dt=et.resolve(dt);if(!$t.parent.isTextblock){let Ut=Dt.nodeAfter;return Ut!=null&&kt==dt+Ut.nodeSize}if(Dt.parentOffset<Dt.parent.content.size||!Dt.parent.isTextblock)return!1;let Ft=et.resolve(skipClosingAndOpening(Dt,!0,!0));return!Ft.parent.isTextblock||Ft.pos>kt||skipClosingAndOpening(Ft,!0,!1)<kt?!1:$t.parent.content.cut($t.parentOffset).eq(Ft.parent.content)}function skipClosingAndOpening(et,dt,kt){let $t=et.depth,Tt=dt?et.end():et.pos;for(;$t>0&&(dt||et.indexAfter($t)==et.node($t).childCount);)$t--,Tt++,dt=!1;if(kt){let Dt=et.node($t).maybeChild(et.indexAfter($t));for(;Dt&&!Dt.isLeaf;)Dt=Dt.firstChild,Tt++}return Tt}function findDiff(et,dt,kt,$t,Tt){let Dt=et.findDiffStart(dt,kt);if(Dt==null)return null;let{a:Ft,b:Ut}=et.findDiffEnd(dt,kt+et.size,kt+dt.size);if(Tt=="end"){let Ht=Math.max(0,Dt-Math.min(Ft,Ut));$t-=Ft+Ht-Dt}if(Ft<Dt&&et.size<dt.size){let Ht=$t<=Dt&&$t>=Ft?Dt-$t:0;Dt-=Ht,Dt&&Dt<dt.size&&isSurrogatePair(dt.textBetween(Dt-1,Dt+1))&&(Dt+=Ht?1:-1),Ut=Dt+(Ut-Ft),Ft=Dt}else if(Ut<Dt){let Ht=$t<=Dt&&$t>=Ut?Dt-$t:0;Dt-=Ht,Dt&&Dt<et.size&&isSurrogatePair(et.textBetween(Dt-1,Dt+1))&&(Dt+=Ht?1:-1),Ft=Dt+(Ft-Ut),Ut=Dt}return{start:Dt,endA:Ft,endB:Ut}}function isSurrogatePair(et){if(et.length!=2)return!1;let dt=et.charCodeAt(0),kt=et.charCodeAt(1);return dt>=56320&&dt<=57343&&kt>=55296&&kt<=56319}class EditorView{constructor(dt,kt){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=kt,this.state=kt.state,this.directPlugins=kt.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=dt&&dt.mount||document.createElement("div"),dt&&(dt.appendChild?dt.appendChild(this.dom):typeof dt=="function"?dt(this.dom):dt.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,($t,Tt,Dt,Ft)=>readDOMChange(this,$t,Tt,Dt,Ft)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let dt=this._props;this._props={};for(let kt in dt)this._props[kt]=dt[kt];this._props.state=this.state}return this._props}update(dt){dt.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let kt=this._props;this._props=dt,dt.plugins&&(dt.plugins.forEach(checkStateComponent),this.directPlugins=dt.plugins),this.updateStateInner(dt.state,kt)}setProps(dt){let kt={};for(let $t in this._props)kt[$t]=this._props[$t];kt.state=this.state;for(let $t in dt)kt[$t]=dt[$t];this.update(kt)}updateState(dt){this.updateStateInner(dt,this._props)}updateStateInner(dt,kt){var $t;let Tt=this.state,Dt=!1,Ft=!1;dt.storedMarks&&this.composing&&(clearComposition(this),Ft=!0),this.state=dt;let Ut=Tt.plugins!=dt.plugins||this._props.plugins!=kt.plugins;if(Ut||this._props.plugins!=kt.plugins||this._props.nodeViews!=kt.nodeViews){let er=buildNodeViews(this);changedNodeViews(er,this.nodeViews)&&(this.nodeViews=er,Dt=!0)}(Ut||kt.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let Ht=viewDecorations(this),Kt=computeDocDeco(this),Yt=Tt.plugins!=dt.plugins&&!Tt.doc.eq(dt.doc)?"reset":dt.scrollToSelection>Tt.scrollToSelection?"to selection":"preserve",Jt=Dt||!this.docView.matchesNode(dt.doc,Kt,Ht);(Jt||!dt.selection.eq(Tt.selection))&&(Ft=!0);let Zt=Yt=="preserve"&&Ft&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(Ft){this.domObserver.stop();let er=Jt&&(ie$2||chrome)&&!this.composing&&!Tt.selection.empty&&!dt.selection.empty&&selectionContextChanged(Tt.selection,dt.selection);if(Jt){let rr=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(Dt||!this.docView.update(dt.doc,Kt,Ht,this))&&(this.docView.updateOuterDeco(Kt),this.docView.destroy(),this.docView=docViewDesc(dt.doc,Kt,Ht,this.dom,this)),rr&&!this.trackWrites&&(er=!0)}er||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,er):(syncNodeSelection(this,dt.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(Tt),!(($t=this.dragging)===null||$t===void 0)&&$t.node&&!Tt.doc.eq(dt.doc)&&this.updateDraggedNode(this.dragging,Tt),Yt=="reset"?this.dom.scrollTop=0:Yt=="to selection"?this.scrollToSelection():Zt&&resetScrollPos(Zt)}scrollToSelection(){let dt=this.domSelectionRange().focusNode;if(!(!dt||!this.dom.contains(dt.nodeType==1?dt:dt.parentNode))){if(!this.someProp("handleScrollToSelection",kt=>kt(this)))if(this.state.selection instanceof NodeSelection){let kt=this.docView.domAfterPos(this.state.selection.from);kt.nodeType==1&&scrollRectIntoView(this,kt.getBoundingClientRect(),dt)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),dt)}}destroyPluginViews(){let dt;for(;dt=this.pluginViews.pop();)dt.destroy&&dt.destroy()}updatePluginViews(dt){if(!dt||dt.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let kt=0;kt<this.directPlugins.length;kt++){let $t=this.directPlugins[kt];$t.spec.view&&this.pluginViews.push($t.spec.view(this))}for(let kt=0;kt<this.state.plugins.length;kt++){let $t=this.state.plugins[kt];$t.spec.view&&this.pluginViews.push($t.spec.view(this))}}else for(let kt=0;kt<this.pluginViews.length;kt++){let $t=this.pluginViews[kt];$t.update&&$t.update(this,dt)}}updateDraggedNode(dt,kt){let $t=dt.node,Tt=-1;if(this.state.doc.nodeAt($t.from)==$t.node)Tt=$t.from;else{let Dt=$t.from+(this.state.doc.content.size-kt.doc.content.size);(Dt>0&&this.state.doc.nodeAt(Dt))==$t.node&&(Tt=Dt)}this.dragging=new Dragging(dt.slice,dt.move,Tt<0?void 0:NodeSelection.create(this.state.doc,Tt))}someProp(dt,kt){let $t=this._props&&this._props[dt],Tt;if($t!=null&&(Tt=kt?kt($t):$t))return Tt;for(let Ft=0;Ft<this.directPlugins.length;Ft++){let Ut=this.directPlugins[Ft].props[dt];if(Ut!=null&&(Tt=kt?kt(Ut):Ut))return Tt}let Dt=this.state.plugins;if(Dt)for(let Ft=0;Ft<Dt.length;Ft++){let Ut=Dt[Ft].props[dt];if(Ut!=null&&(Tt=kt?kt(Ut):Ut))return Tt}}hasFocus(){if(ie$2){let dt=this.root.activeElement;if(dt==this.dom)return!0;if(!dt||!this.dom.contains(dt))return!1;for(;dt&&this.dom!=dt&&this.dom.contains(dt);){if(dt.contentEditable=="false")return!1;dt=dt.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let dt=this._root;if(dt==null){for(let kt=this.dom.parentNode;kt;kt=kt.parentNode)if(kt.nodeType==9||kt.nodeType==11&&kt.host)return kt.getSelection||(Object.getPrototypeOf(kt).getSelection=()=>kt.ownerDocument.getSelection()),this._root=kt}return dt||document}updateRoot(){this._root=null}posAtCoords(dt){return posAtCoords(this,dt)}coordsAtPos(dt,kt=1){return coordsAtPos(this,dt,kt)}domAtPos(dt,kt=0){return this.docView.domFromPos(dt,kt)}nodeDOM(dt){let kt=this.docView.descAt(dt);return kt?kt.nodeDOM:null}posAtDOM(dt,kt,$t=-1){let Tt=this.docView.posFromDOM(dt,kt,$t);if(Tt==null)throw new RangeError("DOM position not inside the editor");return Tt}endOfTextblock(dt,kt){return endOfTextblock(this,kt||this.state,dt)}pasteHTML(dt,kt){return doPaste(this,"",dt,!1,kt||new ClipboardEvent("paste"))}pasteText(dt,kt){return doPaste(this,dt,null,!0,kt||new ClipboardEvent("paste"))}serializeForClipboard(dt){return serializeForClipboard(this,dt)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(dt){return dispatchEvent(this,dt)}domSelectionRange(){let dt=this.domSelection();return dt?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,dt)||dt:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(et){let dt=this._props.dispatchTransaction;dt?dt.call(this,et):this.updateState(this.state.apply(et))};function computeDocDeco(et){let dt=Object.create(null);return dt.class="ProseMirror",dt.contenteditable=String(et.editable),et.someProp("attributes",kt=>{if(typeof kt=="function"&&(kt=kt(et.state)),kt)for(let $t in kt)$t=="class"?dt.class+=" "+kt[$t]:$t=="style"?dt.style=(dt.style?dt.style+";":"")+kt[$t]:!dt[$t]&&$t!="contenteditable"&&$t!="nodeName"&&(dt[$t]=String(kt[$t]))}),dt.translate||(dt.translate="no"),[Decoration.node(0,et.state.doc.content.size,dt)]}function updateCursorWrapper(et){if(et.markCursor){let dt=document.createElement("img");dt.className="ProseMirror-separator",dt.setAttribute("mark-placeholder","true"),dt.setAttribute("alt",""),et.cursorWrapper={dom:dt,deco:Decoration.widget(et.state.selection.from,dt,{raw:!0,marks:et.markCursor})}}else et.cursorWrapper=null}function getEditable(et){return!et.someProp("editable",dt=>dt(et.state)===!1)}function selectionContextChanged(et,dt){let kt=Math.min(et.$anchor.sharedDepth(et.head),dt.$anchor.sharedDepth(dt.head));return et.$anchor.start(kt)!=dt.$anchor.start(kt)}function buildNodeViews(et){let dt=Object.create(null);function kt($t){for(let Tt in $t)Object.prototype.hasOwnProperty.call(dt,Tt)||(dt[Tt]=$t[Tt])}return et.someProp("nodeViews",kt),et.someProp("markViews",kt),dt}function changedNodeViews(et,dt){let kt=0,$t=0;for(let Tt in et){if(et[Tt]!=dt[Tt])return!0;kt++}for(let Tt in dt)$t++;return kt!=$t}function checkStateComponent(et){if(et.spec.state||et.spec.filterTransaction||et.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$4=0;i$4<10;i$4++)base[48+i$4]=base[96+i$4]=String(i$4);for(var i$4=1;i$4<=24;i$4++)base[i$4+111]="F"+i$4;for(var i$4=65;i$4<=90;i$4++)base[i$4]=String.fromCharCode(i$4+32),shift[i$4]=String.fromCharCode(i$4);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(et){var dt=mac$1&&et.metaKey&&et.shiftKey&&!et.ctrlKey&&!et.altKey||ie$1&&et.shiftKey&&et.key&&et.key.length==1||et.key=="Unidentified",kt=!dt&&et.key||(et.shiftKey?shift:base)[et.keyCode]||et.key||"Unidentified";return kt=="Esc"&&(kt="Escape"),kt=="Del"&&(kt="Delete"),kt=="Left"&&(kt="ArrowLeft"),kt=="Up"&&(kt="ArrowUp"),kt=="Right"&&(kt="ArrowRight"),kt=="Down"&&(kt="ArrowDown"),kt}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(et){let dt=et.split(/-(?!$)/),kt=dt[dt.length-1];kt=="Space"&&(kt=" ");let $t,Tt,Dt,Ft;for(let Ut=0;Ut<dt.length-1;Ut++){let Ht=dt[Ut];if(/^(cmd|meta|m)$/i.test(Ht))Ft=!0;else if(/^a(lt)?$/i.test(Ht))$t=!0;else if(/^(c|ctrl|control)$/i.test(Ht))Tt=!0;else if(/^s(hift)?$/i.test(Ht))Dt=!0;else if(/^mod$/i.test(Ht))mac?Ft=!0:Tt=!0;else throw new Error("Unrecognized modifier name: "+Ht)}return $t&&(kt="Alt-"+kt),Tt&&(kt="Ctrl-"+kt),Ft&&(kt="Meta-"+kt),Dt&&(kt="Shift-"+kt),kt}function normalize$1(et){let dt=Object.create(null);for(let kt in et)dt[normalizeKeyName$1(kt)]=et[kt];return dt}function modifiers(et,dt,kt=!0){return dt.altKey&&(et="Alt-"+et),dt.ctrlKey&&(et="Ctrl-"+et),dt.metaKey&&(et="Meta-"+et),kt&&dt.shiftKey&&(et="Shift-"+et),et}function keymap(et){return new Plugin({props:{handleKeyDown:keydownHandler(et)}})}function keydownHandler(et){let dt=normalize$1(et);return function(kt,$t){let Tt=keyName($t),Dt,Ft=dt[modifiers(Tt,$t)];if(Ft&&Ft(kt.state,kt.dispatch,kt))return!0;if(Tt.length==1&&Tt!=" "){if($t.shiftKey){let Ut=dt[modifiers(Tt,$t,!1)];if(Ut&&Ut(kt.state,kt.dispatch,kt))return!0}if(($t.altKey||$t.metaKey||$t.ctrlKey)&&!(windows&&$t.ctrlKey&&$t.altKey)&&(Dt=base[$t.keyCode])&&Dt!=Tt){let Ut=dt[modifiers(Dt,$t)];if(Ut&&Ut(kt.state,kt.dispatch,kt))return!0}}return!1}}var __defProp$7=Object.defineProperty,__export$7=(et,dt)=>{for(var kt in dt)__defProp$7(et,kt,{get:dt[kt],enumerable:!0})};function createChainableState(et){const{state:dt,transaction:kt}=et;let{selection:$t}=kt,{doc:Tt}=kt,{storedMarks:Dt}=kt;return{...dt,apply:dt.apply.bind(dt),applyTransaction:dt.applyTransaction.bind(dt),plugins:dt.plugins,schema:dt.schema,reconfigure:dt.reconfigure.bind(dt),toJSON:dt.toJSON.bind(dt),get storedMarks(){return Dt},get selection(){return $t},get doc(){return Tt},get tr(){return $t=kt.selection,Tt=kt.doc,Dt=kt.storedMarks,kt}}}var CommandManager$1=class{constructor(dt){this.editor=dt.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=dt.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:dt,editor:kt,state:$t}=this,{view:Tt}=kt,{tr:Dt}=$t,Ft=this.buildProps(Dt);return Object.fromEntries(Object.entries(dt).map(([Ut,Ht])=>[Ut,(...Yt)=>{const Jt=Ht(...Yt)(Ft);return!Dt.getMeta("preventDispatch")&&!this.hasCustomState&&Tt.dispatch(Dt),Jt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(dt,kt=!0){const{rawCommands:$t,editor:Tt,state:Dt}=this,{view:Ft}=Tt,Ut=[],Ht=!!dt,Kt=dt||Dt.tr,Yt=()=>(!Ht&&kt&&!Kt.getMeta("preventDispatch")&&!this.hasCustomState&&Ft.dispatch(Kt),Ut.every(Zt=>Zt===!0)),Jt={...Object.fromEntries(Object.entries($t).map(([Zt,er])=>[Zt,(...sr)=>{const nr=this.buildProps(Kt,kt),ir=er(...sr)(nr);return Ut.push(ir),Jt}])),run:Yt};return Jt}createCan(dt){const{rawCommands:kt,state:$t}=this,Tt=!1,Dt=dt||$t.tr,Ft=this.buildProps(Dt,Tt);return{...Object.fromEntries(Object.entries(kt).map(([Ht,Kt])=>[Ht,(...Yt)=>Kt(...Yt)({...Ft,dispatch:void 0})])),chain:()=>this.createChain(Dt,Tt)}}buildProps(dt,kt=!0){const{rawCommands:$t,editor:Tt,state:Dt}=this,{view:Ft}=Tt,Ut={tr:dt,editor:Tt,view:Ft,state:createChainableState({state:Dt,transaction:dt}),dispatch:kt?()=>{}:void 0,chain:()=>this.createChain(dt,kt),can:()=>this.createCan(dt),get commands(){return Object.fromEntries(Object.entries($t).map(([Ht,Kt])=>[Ht,(...Yt)=>Kt(...Yt)(Ut)]))}};return Ut}},commands_exports={};__export$7(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextDirection:()=>setTextDirection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,unsetTextDirection:()=>unsetTextDirection,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:et,view:dt})=>(requestAnimationFrame(()=>{var kt;et.isDestroyed||(dt.dom.blur(),(kt=window==null?void 0:window.getSelection())==null||kt.removeAllRanges())}),!0),clearContent=(et=!0)=>({commands:dt})=>dt.setContent("",{emitUpdate:et}),clearNodes=()=>({state:et,tr:dt,dispatch:kt})=>{const{selection:$t}=dt,{ranges:Tt}=$t;return kt&&Tt.forEach(({$from:Dt,$to:Ft})=>{et.doc.nodesBetween(Dt.pos,Ft.pos,(Ut,Ht)=>{if(Ut.type.isText)return;const{doc:Kt,mapping:Yt}=dt,Jt=Kt.resolve(Yt.map(Ht)),Zt=Kt.resolve(Yt.map(Ht+Ut.nodeSize)),er=Jt.blockRange(Zt);if(!er)return;const rr=liftTarget(er);if(Ut.type.isTextblock){const{defaultType:sr}=Jt.parent.contentMatchAt(Jt.index());dt.setNodeMarkup(er.start,sr)}(rr||rr===0)&&dt.lift(er,rr)})}),!0},command=et=>dt=>et(dt),createParagraphNear=()=>({state:et,dispatch:dt})=>createParagraphNear$1(et,dt),cut=(et,dt)=>({editor:kt,tr:$t})=>{const{state:Tt}=kt,Dt=Tt.doc.slice(et.from,et.to);$t.deleteRange(et.from,et.to);const Ft=$t.mapping.map(dt);return $t.insert(Ft,Dt.content),$t.setSelection(new TextSelection($t.doc.resolve(Math.max(Ft-1,0)))),!0},deleteCurrentNode=()=>({tr:et,dispatch:dt})=>{const{selection:kt}=et,$t=kt.$anchor.node();if($t.content.size>0)return!1;const Tt=et.selection.$anchor;for(let Dt=Tt.depth;Dt>0;Dt-=1)if(Tt.node(Dt).type===$t.type){if(dt){const Ut=Tt.before(Dt),Ht=Tt.after(Dt);et.delete(Ut,Ht).scrollIntoView()}return!0}return!1};function getNodeType(et,dt){if(typeof et=="string"){if(!dt.nodes[et])throw Error(`There is no node type named '${et}'. Maybe you forgot to add the extension?`);return dt.nodes[et]}return et}var deleteNode=et=>({tr:dt,state:kt,dispatch:$t})=>{const Tt=getNodeType(et,kt.schema),Dt=dt.selection.$anchor;for(let Ft=Dt.depth;Ft>0;Ft-=1)if(Dt.node(Ft).type===Tt){if($t){const Ht=Dt.before(Ft),Kt=Dt.after(Ft);dt.delete(Ht,Kt).scrollIntoView()}return!0}return!1},deleteRange=et=>({tr:dt,dispatch:kt})=>{const{from:$t,to:Tt}=et;return kt&&dt.delete($t,Tt),!0},deleteSelection=()=>({state:et,dispatch:dt})=>deleteSelection$1(et,dt),enter=()=>({commands:et})=>et.keyboardShortcut("Enter"),exitCode=()=>({state:et,dispatch:dt})=>exitCode$1(et,dt);function isRegExp(et){return Object.prototype.toString.call(et)==="[object RegExp]"}function objectIncludes(et,dt,kt={strict:!0}){const $t=Object.keys(dt);return $t.length?$t.every(Tt=>kt.strict?dt[Tt]===et[Tt]:isRegExp(dt[Tt])?dt[Tt].test(et[Tt]):dt[Tt]===et[Tt]):!0}function findMarkInSet(et,dt,kt={}){return et.find($t=>$t.type===dt&&objectIncludes(Object.fromEntries(Object.keys(kt).map(Tt=>[Tt,$t.attrs[Tt]])),kt))}function isMarkInSet(et,dt,kt={}){return!!findMarkInSet(et,dt,kt)}function getMarkRange(et,dt,kt){var $t;if(!et||!dt)return;let Tt=et.parent.childAfter(et.parentOffset);if((!Tt.node||!Tt.node.marks.some(Yt=>Yt.type===dt))&&(Tt=et.parent.childBefore(et.parentOffset)),!Tt.node||!Tt.node.marks.some(Yt=>Yt.type===dt)||(kt=kt||(($t=Tt.node.marks[0])==null?void 0:$t.attrs),!findMarkInSet([...Tt.node.marks],dt,kt)))return;let Ft=Tt.index,Ut=et.start()+Tt.offset,Ht=Ft+1,Kt=Ut+Tt.node.nodeSize;for(;Ft>0&&isMarkInSet([...et.parent.child(Ft-1).marks],dt,kt);)Ft-=1,Ut-=et.parent.child(Ft).nodeSize;for(;Ht<et.parent.childCount&&isMarkInSet([...et.parent.child(Ht).marks],dt,kt);)Kt+=et.parent.child(Ht).nodeSize,Ht+=1;return{from:Ut,to:Kt}}function getMarkType(et,dt){if(typeof et=="string"){if(!dt.marks[et])throw Error(`There is no mark type named '${et}'. Maybe you forgot to add the extension?`);return dt.marks[et]}return et}var extendMarkRange=(et,dt={})=>({tr:kt,state:$t,dispatch:Tt})=>{const Dt=getMarkType(et,$t.schema),{doc:Ft,selection:Ut}=kt,{$from:Ht,from:Kt,to:Yt}=Ut;if(Tt){const Jt=getMarkRange(Ht,Dt,dt);if(Jt&&Jt.from<=Kt&&Jt.to>=Yt){const Zt=TextSelection.create(Ft,Jt.from,Jt.to);kt.setSelection(Zt)}}return!0},first=et=>dt=>{const kt=typeof et=="function"?et(dt):et;for(let $t=0;$t<kt.length;$t+=1)if(kt[$t](dt))return!0;return!1};function isTextSelection(et){return et instanceof TextSelection}function minMax(et=0,dt=0,kt=0){return Math.min(Math.max(et,dt),kt)}function resolveFocusPosition(et,dt=null){if(!dt)return null;const kt=Selection.atStart(et),$t=Selection.atEnd(et);if(dt==="start"||dt===!0)return kt;if(dt==="end")return $t;const Tt=kt.from,Dt=$t.to;return dt==="all"?TextSelection.create(et,minMax(0,Tt,Dt),minMax(et.content.size,Tt,Dt)):TextSelection.create(et,minMax(dt,Tt,Dt),minMax(dt,Tt,Dt))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function isSafari(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var focus=(et=null,dt={})=>({editor:kt,view:$t,tr:Tt,dispatch:Dt})=>{dt={scrollIntoView:!0,...dt};const Ft=()=>{(isiOS()||isAndroid())&&$t.dom.focus(),isSafari()&&!isiOS()&&!isAndroid()&&$t.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{kt.isDestroyed||($t.focus(),dt!=null&&dt.scrollIntoView&&kt.commands.scrollIntoView())})};if($t.hasFocus()&&et===null||et===!1)return!0;if(Dt&&et===null&&!isTextSelection(kt.state.selection))return Ft(),!0;const Ut=resolveFocusPosition(Tt.doc,et)||kt.state.selection,Ht=kt.state.selection.eq(Ut);return Dt&&(Ht||Tt.setSelection(Ut),Ht&&Tt.storedMarks&&Tt.setStoredMarks(Tt.storedMarks),Ft()),!0},forEach=(et,dt)=>kt=>et.every(($t,Tt)=>dt($t,{...kt,index:Tt})),insertContent=(et,dt)=>({tr:kt,commands:$t})=>$t.insertContentAt({from:kt.selection.from,to:kt.selection.to},et,dt),removeWhitespaces=et=>{const dt=et.childNodes;for(let kt=dt.length-1;kt>=0;kt-=1){const $t=dt[kt];$t.nodeType===3&&$t.nodeValue&&/^(\n\s\s|\n)$/.test($t.nodeValue)?et.removeChild($t):$t.nodeType===1&&removeWhitespaces($t)}return et};function elementFromString(et){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const dt=`<body>${et}</body>`,kt=new window.DOMParser().parseFromString(dt,"text/html").body;return removeWhitespaces(kt)}function createNodeFromContent(et,dt,kt){if(et instanceof Node$1||et instanceof Fragment)return et;kt={slice:!0,parseOptions:{},...kt};const $t=typeof et=="object"&&et!==null,Tt=typeof et=="string";if($t)try{if(Array.isArray(et)&&et.length>0)return Fragment.fromArray(et.map(Ut=>dt.nodeFromJSON(Ut)));const Ft=dt.nodeFromJSON(et);return kt.errorOnInvalidContent&&Ft.check(),Ft}catch(Dt){if(kt.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:Dt});return console.warn("[tiptap warn]: Invalid content.","Passed value:",et,"Error:",Dt),createNodeFromContent("",dt,kt)}if(Tt){if(kt.errorOnInvalidContent){let Ft=!1,Ut="";const Ht=new Schema({topNode:dt.spec.topNode,marks:dt.spec.marks,nodes:dt.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:Kt=>(Ft=!0,Ut=typeof Kt=="string"?Kt:Kt.outerHTML,null)}]}})});if(kt.slice?DOMParser.fromSchema(Ht).parseSlice(elementFromString(et),kt.parseOptions):DOMParser.fromSchema(Ht).parse(elementFromString(et),kt.parseOptions),kt.errorOnInvalidContent&&Ft)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${Ut}`)})}const Dt=DOMParser.fromSchema(dt);return kt.slice?Dt.parseSlice(elementFromString(et),kt.parseOptions).content:Dt.parse(elementFromString(et),kt.parseOptions)}return createNodeFromContent("",dt,kt)}function selectionToInsertionEnd(et,dt,kt){const $t=et.steps.length-1;if($t<dt)return;const Tt=et.steps[$t];if(!(Tt instanceof ReplaceStep||Tt instanceof ReplaceAroundStep))return;const Dt=et.mapping.maps[$t];let Ft=0;Dt.forEach((Ut,Ht,Kt,Yt)=>{Ft===0&&(Ft=Yt)}),et.setSelection(Selection.near(et.doc.resolve(Ft),kt))}var isFragment=et=>!("type"in et),insertContentAt=(et,dt,kt)=>({tr:$t,dispatch:Tt,editor:Dt})=>{var Ft;if(Tt){kt={parseOptions:Dt.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...kt};let Ut;const Ht=nr=>{Dt.emit("contentError",{editor:Dt,error:nr,disableCollaboration:()=>{"collaboration"in Dt.storage&&typeof Dt.storage.collaboration=="object"&&Dt.storage.collaboration&&(Dt.storage.collaboration.isDisabled=!0)}})},Kt={preserveWhitespace:"full",...kt.parseOptions};if(!kt.errorOnInvalidContent&&!Dt.options.enableContentCheck&&Dt.options.emitContentError)try{createNodeFromContent(dt,Dt.schema,{parseOptions:Kt,errorOnInvalidContent:!0})}catch(nr){Ht(nr)}try{Ut=createNodeFromContent(dt,Dt.schema,{parseOptions:Kt,errorOnInvalidContent:(Ft=kt.errorOnInvalidContent)!=null?Ft:Dt.options.enableContentCheck})}catch(nr){return Ht(nr),!1}let{from:Yt,to:Jt}=typeof et=="number"?{from:et,to:et}:{from:et.from,to:et.to},Zt=!0,er=!0;if((isFragment(Ut)?Ut:[Ut]).forEach(nr=>{nr.check(),Zt=Zt?nr.isText&&nr.marks.length===0:!1,er=er?nr.isBlock:!1}),Yt===Jt&&er){const{parent:nr}=$t.doc.resolve(Yt);nr.isTextblock&&!nr.type.spec.code&&!nr.childCount&&(Yt-=1,Jt+=1)}let sr;if(Zt){if(Array.isArray(dt))sr=dt.map(nr=>nr.text||"").join("");else if(dt instanceof Fragment){let nr="";dt.forEach(ir=>{ir.text&&(nr+=ir.text)}),sr=nr}else typeof dt=="object"&&dt&&dt.text?sr=dt.text:sr=dt;$t.insertText(sr,Yt,Jt)}else{sr=Ut;const nr=$t.doc.resolve(Yt),ir=nr.node(),lr=nr.parentOffset===0,or=ir.isText||ir.isTextblock,cr=ir.content.size>0;lr&&or&&cr&&(Yt=Math.max(0,Yt-1)),$t.replaceWith(Yt,Jt,sr)}kt.updateSelection&&selectionToInsertionEnd($t,$t.steps.length-1,-1),kt.applyInputRules&&$t.setMeta("applyInputRules",{from:Yt,text:sr}),kt.applyPasteRules&&$t.setMeta("applyPasteRules",{from:Yt,text:sr})}return!0},joinUp=()=>({state:et,dispatch:dt})=>joinUp$1(et,dt),joinDown=()=>({state:et,dispatch:dt})=>joinDown$1(et,dt),joinBackward=()=>({state:et,dispatch:dt})=>joinBackward$1(et,dt),joinForward=()=>({state:et,dispatch:dt})=>joinForward$1(et,dt),joinItemBackward=()=>({state:et,dispatch:dt,tr:kt})=>{try{const $t=joinPoint(et.doc,et.selection.$from.pos,-1);return $t==null?!1:(kt.join($t,2),dt&&dt(kt),!0)}catch{return!1}},joinItemForward=()=>({state:et,dispatch:dt,tr:kt})=>{try{const $t=joinPoint(et.doc,et.selection.$from.pos,1);return $t==null?!1:(kt.join($t,2),dt&&dt(kt),!0)}catch{return!1}},joinTextblockBackward=()=>({state:et,dispatch:dt})=>joinTextblockBackward$1(et,dt),joinTextblockForward=()=>({state:et,dispatch:dt})=>joinTextblockForward$1(et,dt);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(et){const dt=et.split(/-(?!$)/);let kt=dt[dt.length-1];kt==="Space"&&(kt=" ");let $t,Tt,Dt,Ft;for(let Ut=0;Ut<dt.length-1;Ut+=1){const Ht=dt[Ut];if(/^(cmd|meta|m)$/i.test(Ht))Ft=!0;else if(/^a(lt)?$/i.test(Ht))$t=!0;else if(/^(c|ctrl|control)$/i.test(Ht))Tt=!0;else if(/^s(hift)?$/i.test(Ht))Dt=!0;else if(/^mod$/i.test(Ht))isiOS()||isMacOS()?Ft=!0:Tt=!0;else throw new Error(`Unrecognized modifier name: ${Ht}`)}return $t&&(kt=`Alt-${kt}`),Tt&&(kt=`Ctrl-${kt}`),Ft&&(kt=`Meta-${kt}`),Dt&&(kt=`Shift-${kt}`),kt}var keyboardShortcut=et=>({editor:dt,view:kt,tr:$t,dispatch:Tt})=>{const Dt=normalizeKeyName(et).split(/-(?!$)/),Ft=Dt.find(Kt=>!["Alt","Ctrl","Meta","Shift"].includes(Kt)),Ut=new KeyboardEvent("keydown",{key:Ft==="Space"?" ":Ft,altKey:Dt.includes("Alt"),ctrlKey:Dt.includes("Ctrl"),metaKey:Dt.includes("Meta"),shiftKey:Dt.includes("Shift"),bubbles:!0,cancelable:!0}),Ht=dt.captureTransaction(()=>{kt.someProp("handleKeyDown",Kt=>Kt(kt,Ut))});return Ht==null||Ht.steps.forEach(Kt=>{const Yt=Kt.map($t.mapping);Yt&&Tt&&$t.maybeStep(Yt)}),!0};function isNodeActive(et,dt,kt={}){const{from:$t,to:Tt,empty:Dt}=et.selection,Ft=dt?getNodeType(dt,et.schema):null,Ut=[];et.doc.nodesBetween($t,Tt,(Jt,Zt)=>{if(Jt.isText)return;const er=Math.max($t,Zt),rr=Math.min(Tt,Zt+Jt.nodeSize);Ut.push({node:Jt,from:er,to:rr})});const Ht=Tt-$t,Kt=Ut.filter(Jt=>Ft?Ft.name===Jt.node.type.name:!0).filter(Jt=>objectIncludes(Jt.node.attrs,kt,{strict:!1}));return Dt?!!Kt.length:Kt.reduce((Jt,Zt)=>Jt+Zt.to-Zt.from,0)>=Ht}var lift=(et,dt={})=>({state:kt,dispatch:$t})=>{const Tt=getNodeType(et,kt.schema);return isNodeActive(kt,Tt,dt)?lift$1(kt,$t):!1},liftEmptyBlock=()=>({state:et,dispatch:dt})=>liftEmptyBlock$1(et,dt),liftListItem=et=>({state:dt,dispatch:kt})=>{const $t=getNodeType(et,dt.schema);return liftListItem$1($t)(dt,kt)},newlineInCode=()=>({state:et,dispatch:dt})=>newlineInCode$1(et,dt);function getSchemaTypeNameByName(et,dt){return dt.nodes[et]?"node":dt.marks[et]?"mark":null}function deleteProps(et,dt){const kt=typeof dt=="string"?[dt]:dt;return Object.keys(et).reduce(($t,Tt)=>(kt.includes(Tt)||($t[Tt]=et[Tt]),$t),{})}var resetAttributes=(et,dt)=>({tr:kt,state:$t,dispatch:Tt})=>{let Dt=null,Ft=null;const Ut=getSchemaTypeNameByName(typeof et=="string"?et:et.name,$t.schema);if(!Ut)return!1;Ut==="node"&&(Dt=getNodeType(et,$t.schema)),Ut==="mark"&&(Ft=getMarkType(et,$t.schema));let Ht=!1;return kt.selection.ranges.forEach(Kt=>{$t.doc.nodesBetween(Kt.$from.pos,Kt.$to.pos,(Yt,Jt)=>{Dt&&Dt===Yt.type&&(Ht=!0,Tt&&kt.setNodeMarkup(Jt,void 0,deleteProps(Yt.attrs,dt))),Ft&&Yt.marks.length&&Yt.marks.forEach(Zt=>{Ft===Zt.type&&(Ht=!0,Tt&&kt.addMark(Jt,Jt+Yt.nodeSize,Ft.create(deleteProps(Zt.attrs,dt))))})})}),Ht},scrollIntoView=()=>({tr:et,dispatch:dt})=>(dt&&et.scrollIntoView(),!0),selectAll=()=>({tr:et,dispatch:dt})=>{if(dt){const kt=new AllSelection(et.doc);et.setSelection(kt)}return!0},selectNodeBackward=()=>({state:et,dispatch:dt})=>selectNodeBackward$1(et,dt),selectNodeForward=()=>({state:et,dispatch:dt})=>selectNodeForward$1(et,dt),selectParentNode=()=>({state:et,dispatch:dt})=>selectParentNode$1(et,dt),selectTextblockEnd=()=>({state:et,dispatch:dt})=>selectTextblockEnd$1(et,dt),selectTextblockStart=()=>({state:et,dispatch:dt})=>selectTextblockStart$1(et,dt);function createDocument(et,dt,kt={},$t={}){return createNodeFromContent(et,dt,{slice:!1,parseOptions:kt,errorOnInvalidContent:$t.errorOnInvalidContent})}var setContent=(et,{errorOnInvalidContent:dt,emitUpdate:kt=!0,parseOptions:$t={}}={})=>({editor:Tt,tr:Dt,dispatch:Ft,commands:Ut})=>{const{doc:Ht}=Dt;if($t.preserveWhitespace!=="full"){const Kt=createDocument(et,Tt.schema,$t,{errorOnInvalidContent:dt??Tt.options.enableContentCheck});return Ft&&Dt.replaceWith(0,Ht.content.size,Kt).setMeta("preventUpdate",!kt),!0}return Ft&&Dt.setMeta("preventUpdate",!kt),Ut.insertContentAt({from:0,to:Ht.content.size},et,{parseOptions:$t,errorOnInvalidContent:dt??Tt.options.enableContentCheck})};function getMarkAttributes(et,dt){const kt=getMarkType(dt,et.schema),{from:$t,to:Tt,empty:Dt}=et.selection,Ft=[];Dt?(et.storedMarks&&Ft.push(...et.storedMarks),Ft.push(...et.selection.$head.marks())):et.doc.nodesBetween($t,Tt,Ht=>{Ft.push(...Ht.marks)});const Ut=Ft.find(Ht=>Ht.type.name===kt.name);return Ut?{...Ut.attrs}:{}}function combineTransactionSteps(et,dt){const kt=new Transform(et);return dt.forEach($t=>{$t.steps.forEach(Tt=>{kt.step(Tt)})}),kt}function defaultBlockAt(et){for(let dt=0;dt<et.edgeCount;dt+=1){const{type:kt}=et.edge(dt);if(kt.isTextblock&&!kt.hasRequiredAttrs())return kt}return null}function findChildrenInRange(et,dt,kt){const $t=[];return et.nodesBetween(dt.from,dt.to,(Tt,Dt)=>{kt(Tt)&&$t.push({node:Tt,pos:Dt})}),$t}function findParentNodeClosestToPos(et,dt){for(let kt=et.depth;kt>0;kt-=1){const $t=et.node(kt);if(dt($t))return{pos:kt>0?et.before(kt):0,start:et.start(kt),depth:kt,node:$t}}}function findParentNode(et){return dt=>findParentNodeClosestToPos(dt.$from,et)}function getExtensionField(et,dt,kt){return et.config[dt]===void 0&&et.parent?getExtensionField(et.parent,dt,kt):typeof et.config[dt]=="function"?et.config[dt].bind({...kt,parent:et.parent?getExtensionField(et.parent,dt,kt):null}):et.config[dt]}function flattenExtensions(et){return et.map(dt=>{const kt={name:dt.name,options:dt.options,storage:dt.storage},$t=getExtensionField(dt,"addExtensions",kt);return $t?[dt,...flattenExtensions($t())]:dt}).flat(10)}function getHTMLFromFragment(et,dt){const kt=DOMSerializer.fromSchema(dt).serializeFragment(et),Tt=document.implementation.createHTMLDocument().createElement("div");return Tt.appendChild(kt),Tt.innerHTML}function isFunction$4(et){return typeof et=="function"}function callOrReturn(et,dt=void 0,...kt){return isFunction$4(et)?dt?et.bind(dt)(...kt):et(...kt):et}function isEmptyObject(et={}){return Object.keys(et).length===0&&et.constructor===Object}function splitExtensions(et){const dt=et.filter(Tt=>Tt.type==="extension"),kt=et.filter(Tt=>Tt.type==="node"),$t=et.filter(Tt=>Tt.type==="mark");return{baseExtensions:dt,nodeExtensions:kt,markExtensions:$t}}function getAttributesFromExtensions(et){const dt=[],{nodeExtensions:kt,markExtensions:$t}=splitExtensions(et),Tt=[...kt,...$t],Dt={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return et.forEach(Ft=>{const Ut={name:Ft.name,options:Ft.options,storage:Ft.storage,extensions:Tt},Ht=getExtensionField(Ft,"addGlobalAttributes",Ut);if(!Ht)return;Ht().forEach(Yt=>{Yt.types.forEach(Jt=>{Object.entries(Yt.attributes).forEach(([Zt,er])=>{dt.push({type:Jt,name:Zt,attribute:{...Dt,...er}})})})})}),Tt.forEach(Ft=>{const Ut={name:Ft.name,options:Ft.options,storage:Ft.storage},Ht=getExtensionField(Ft,"addAttributes",Ut);if(!Ht)return;const Kt=Ht();Object.entries(Kt).forEach(([Yt,Jt])=>{const Zt={...Dt,...Jt};typeof(Zt==null?void 0:Zt.default)=="function"&&(Zt.default=Zt.default()),Zt!=null&&Zt.isRequired&&(Zt==null?void 0:Zt.default)===void 0&&delete Zt.default,dt.push({type:Ft.name,name:Yt,attribute:Zt})})}),dt}function mergeAttributes(...et){return et.filter(dt=>!!dt).reduce((dt,kt)=>{const $t={...dt};return Object.entries(kt).forEach(([Tt,Dt])=>{if(!$t[Tt]){$t[Tt]=Dt;return}if(Tt==="class"){const Ut=Dt?String(Dt).split(" "):[],Ht=$t[Tt]?$t[Tt].split(" "):[],Kt=Ut.filter(Yt=>!Ht.includes(Yt));$t[Tt]=[...Ht,...Kt].join(" ")}else if(Tt==="style"){const Ut=Dt?Dt.split(";").map(Yt=>Yt.trim()).filter(Boolean):[],Ht=$t[Tt]?$t[Tt].split(";").map(Yt=>Yt.trim()).filter(Boolean):[],Kt=new Map;Ht.forEach(Yt=>{const[Jt,Zt]=Yt.split(":").map(er=>er.trim());Kt.set(Jt,Zt)}),Ut.forEach(Yt=>{const[Jt,Zt]=Yt.split(":").map(er=>er.trim());Kt.set(Jt,Zt)}),$t[Tt]=Array.from(Kt.entries()).map(([Yt,Jt])=>`${Yt}: ${Jt}`).join("; ")}else $t[Tt]=Dt}),$t},{})}function getRenderedAttributes(et,dt){return dt.filter(kt=>kt.type===et.type.name).filter(kt=>kt.attribute.rendered).map(kt=>kt.attribute.renderHTML?kt.attribute.renderHTML(et.attrs)||{}:{[kt.name]:et.attrs[kt.name]}).reduce((kt,$t)=>mergeAttributes(kt,$t),{})}function fromString(et){return typeof et!="string"?et:et.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(et):et==="true"?!0:et==="false"?!1:et}function injectExtensionAttributesToParseRule(et,dt){return"style"in et?et:{...et,getAttrs:kt=>{const $t=et.getAttrs?et.getAttrs(kt):et.attrs;if($t===!1)return!1;const Tt=dt.reduce((Dt,Ft)=>{const Ut=Ft.attribute.parseHTML?Ft.attribute.parseHTML(kt):fromString(kt.getAttribute(Ft.name));return Ut==null?Dt:{...Dt,[Ft.name]:Ut}},{});return{...$t,...Tt}}}}function cleanUpSchemaItem(et){return Object.fromEntries(Object.entries(et).filter(([dt,kt])=>dt==="attrs"&&isEmptyObject(kt)?!1:kt!=null))}function buildAttributeSpec(et){var dt,kt;const $t={};return!((dt=et==null?void 0:et.attribute)!=null&&dt.isRequired)&&"default"in((et==null?void 0:et.attribute)||{})&&($t.default=et.attribute.default),((kt=et==null?void 0:et.attribute)==null?void 0:kt.validate)!==void 0&&($t.validate=et.attribute.validate),[et.name,$t]}function getSchemaByResolvedExtensions(et,dt){var kt;const $t=getAttributesFromExtensions(et),{nodeExtensions:Tt,markExtensions:Dt}=splitExtensions(et),Ft=(kt=Tt.find(Kt=>getExtensionField(Kt,"topNode")))==null?void 0:kt.name,Ut=Object.fromEntries(Tt.map(Kt=>{const Yt=$t.filter(ir=>ir.type===Kt.name),Jt={name:Kt.name,options:Kt.options,storage:Kt.storage,editor:dt},Zt=et.reduce((ir,lr)=>{const or=getExtensionField(lr,"extendNodeSchema",Jt);return{...ir,...or?or(Kt):{}}},{}),er=cleanUpSchemaItem({...Zt,content:callOrReturn(getExtensionField(Kt,"content",Jt)),marks:callOrReturn(getExtensionField(Kt,"marks",Jt)),group:callOrReturn(getExtensionField(Kt,"group",Jt)),inline:callOrReturn(getExtensionField(Kt,"inline",Jt)),atom:callOrReturn(getExtensionField(Kt,"atom",Jt)),selectable:callOrReturn(getExtensionField(Kt,"selectable",Jt)),draggable:callOrReturn(getExtensionField(Kt,"draggable",Jt)),code:callOrReturn(getExtensionField(Kt,"code",Jt)),whitespace:callOrReturn(getExtensionField(Kt,"whitespace",Jt)),linebreakReplacement:callOrReturn(getExtensionField(Kt,"linebreakReplacement",Jt)),defining:callOrReturn(getExtensionField(Kt,"defining",Jt)),isolating:callOrReturn(getExtensionField(Kt,"isolating",Jt)),attrs:Object.fromEntries(Yt.map(buildAttributeSpec))}),rr=callOrReturn(getExtensionField(Kt,"parseHTML",Jt));rr&&(er.parseDOM=rr.map(ir=>injectExtensionAttributesToParseRule(ir,Yt)));const sr=getExtensionField(Kt,"renderHTML",Jt);sr&&(er.toDOM=ir=>sr({node:ir,HTMLAttributes:getRenderedAttributes(ir,Yt)}));const nr=getExtensionField(Kt,"renderText",Jt);return nr&&(er.toText=nr),[Kt.name,er]})),Ht=Object.fromEntries(Dt.map(Kt=>{const Yt=$t.filter(nr=>nr.type===Kt.name),Jt={name:Kt.name,options:Kt.options,storage:Kt.storage,editor:dt},Zt=et.reduce((nr,ir)=>{const lr=getExtensionField(ir,"extendMarkSchema",Jt);return{...nr,...lr?lr(Kt):{}}},{}),er=cleanUpSchemaItem({...Zt,inclusive:callOrReturn(getExtensionField(Kt,"inclusive",Jt)),excludes:callOrReturn(getExtensionField(Kt,"excludes",Jt)),group:callOrReturn(getExtensionField(Kt,"group",Jt)),spanning:callOrReturn(getExtensionField(Kt,"spanning",Jt)),code:callOrReturn(getExtensionField(Kt,"code",Jt)),attrs:Object.fromEntries(Yt.map(buildAttributeSpec))}),rr=callOrReturn(getExtensionField(Kt,"parseHTML",Jt));rr&&(er.parseDOM=rr.map(nr=>injectExtensionAttributesToParseRule(nr,Yt)));const sr=getExtensionField(Kt,"renderHTML",Jt);return sr&&(er.toDOM=nr=>sr({mark:nr,HTMLAttributes:getRenderedAttributes(nr,Yt)})),[Kt.name,er]}));return new Schema({topNode:Ft,nodes:Ut,marks:Ht})}function findDuplicates(et){const dt=et.filter((kt,$t)=>et.indexOf(kt)!==$t);return Array.from(new Set(dt))}function sortExtensions(et){return et.sort((kt,$t)=>{const Tt=getExtensionField(kt,"priority")||100,Dt=getExtensionField($t,"priority")||100;return Tt>Dt?-1:Tt<Dt?1:0})}function resolveExtensions(et){const dt=sortExtensions(flattenExtensions(et)),kt=findDuplicates(dt.map($t=>$t.name));return kt.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${kt.map($t=>`'${$t}'`).join(", ")}]. This can lead to issues.`),dt}function getTextBetween(et,dt,kt){const{from:$t,to:Tt}=dt,{blockSeparator:Dt=`

`,textSerializers:Ft={}}=kt||{};let Ut="";return et.nodesBetween($t,Tt,(Ht,Kt,Yt,Jt)=>{var Zt;Ht.isBlock&&Kt>$t&&(Ut+=Dt);const er=Ft==null?void 0:Ft[Ht.type.name];if(er)return Yt&&(Ut+=er({node:Ht,pos:Kt,parent:Yt,index:Jt,range:dt})),!1;Ht.isText&&(Ut+=(Zt=Ht==null?void 0:Ht.text)==null?void 0:Zt.slice(Math.max($t,Kt)-Kt,Tt-Kt))}),Ut}function getText(et,dt){const kt={from:0,to:et.content.size};return getTextBetween(et,kt,dt)}function getTextSerializersFromSchema(et){return Object.fromEntries(Object.entries(et.nodes).filter(([,dt])=>dt.spec.toText).map(([dt,kt])=>[dt,kt.spec.toText]))}function getNodeAttributes(et,dt){const kt=getNodeType(dt,et.schema),{from:$t,to:Tt}=et.selection,Dt=[];et.doc.nodesBetween($t,Tt,Ut=>{Dt.push(Ut)});const Ft=Dt.reverse().find(Ut=>Ut.type.name===kt.name);return Ft?{...Ft.attrs}:{}}function getAttributes$1(et,dt){const kt=getSchemaTypeNameByName(typeof dt=="string"?dt:dt.name,et.schema);return kt==="node"?getNodeAttributes(et,dt):kt==="mark"?getMarkAttributes(et,dt):{}}function removeDuplicates(et,dt=JSON.stringify){const kt={};return et.filter($t=>{const Tt=dt($t);return Object.prototype.hasOwnProperty.call(kt,Tt)?!1:kt[Tt]=!0})}function simplifyChangedRanges(et){const dt=removeDuplicates(et);return dt.length===1?dt:dt.filter((kt,$t)=>!dt.filter((Dt,Ft)=>Ft!==$t).some(Dt=>kt.oldRange.from>=Dt.oldRange.from&&kt.oldRange.to<=Dt.oldRange.to&&kt.newRange.from>=Dt.newRange.from&&kt.newRange.to<=Dt.newRange.to))}function getChangedRanges(et){const{mapping:dt,steps:kt}=et,$t=[];return dt.maps.forEach((Tt,Dt)=>{const Ft=[];if(Tt.ranges.length)Tt.forEach((Ut,Ht)=>{Ft.push({from:Ut,to:Ht})});else{const{from:Ut,to:Ht}=kt[Dt];if(Ut===void 0||Ht===void 0)return;Ft.push({from:Ut,to:Ht})}Ft.forEach(({from:Ut,to:Ht})=>{const Kt=dt.slice(Dt).map(Ut,-1),Yt=dt.slice(Dt).map(Ht),Jt=dt.invert().map(Kt,-1),Zt=dt.invert().map(Yt);$t.push({oldRange:{from:Jt,to:Zt},newRange:{from:Kt,to:Yt}})})}),simplifyChangedRanges($t)}function getMarksBetween(et,dt,kt){const $t=[];return et===dt?kt.resolve(et).marks().forEach(Tt=>{const Dt=kt.resolve(et),Ft=getMarkRange(Dt,Tt.type);Ft&&$t.push({mark:Tt,...Ft})}):kt.nodesBetween(et,dt,(Tt,Dt)=>{!Tt||(Tt==null?void 0:Tt.nodeSize)===void 0||$t.push(...Tt.marks.map(Ft=>({from:Dt,to:Dt+Tt.nodeSize,mark:Ft})))}),$t}var getNodeAtPosition=(et,dt,kt,$t=20)=>{const Tt=et.doc.resolve(kt);let Dt=$t,Ft=null;for(;Dt>0&&Ft===null;){const Ut=Tt.node(Dt);(Ut==null?void 0:Ut.type.name)===dt?Ft=Ut:Dt-=1}return[Ft,Dt]};function getSchemaTypeByName(et,dt){return dt.nodes[et]||dt.marks[et]||null}function getSplittedAttributes(et,dt,kt){return Object.fromEntries(Object.entries(kt).filter(([$t])=>{const Tt=et.find(Dt=>Dt.type===dt&&Dt.name===$t);return Tt?Tt.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(et,dt=500)=>{let kt="";const $t=et.parentOffset;return et.parent.nodesBetween(Math.max(0,$t-dt),$t,(Tt,Dt,Ft,Ut)=>{var Ht,Kt;const Yt=((Kt=(Ht=Tt.type.spec).toText)==null?void 0:Kt.call(Ht,{node:Tt,pos:Dt,parent:Ft,index:Ut}))||Tt.textContent||"%leaf%";kt+=Tt.isAtom&&!Tt.isText?Yt:Yt.slice(0,Math.max(0,$t-Dt))}),kt};function isMarkActive(et,dt,kt={}){const{empty:$t,ranges:Tt}=et.selection,Dt=dt?getMarkType(dt,et.schema):null;if($t)return!!(et.storedMarks||et.selection.$from.marks()).filter(Jt=>Dt?Dt.name===Jt.type.name:!0).find(Jt=>objectIncludes(Jt.attrs,kt,{strict:!1}));let Ft=0;const Ut=[];if(Tt.forEach(({$from:Jt,$to:Zt})=>{const er=Jt.pos,rr=Zt.pos;et.doc.nodesBetween(er,rr,(sr,nr)=>{if(!sr.isText&&!sr.marks.length)return;const ir=Math.max(er,nr),lr=Math.min(rr,nr+sr.nodeSize),or=lr-ir;Ft+=or,Ut.push(...sr.marks.map(cr=>({mark:cr,from:ir,to:lr})))})}),Ft===0)return!1;const Ht=Ut.filter(Jt=>Dt?Dt.name===Jt.mark.type.name:!0).filter(Jt=>objectIncludes(Jt.mark.attrs,kt,{strict:!1})).reduce((Jt,Zt)=>Jt+Zt.to-Zt.from,0),Kt=Ut.filter(Jt=>Dt?Jt.mark.type!==Dt&&Jt.mark.type.excludes(Dt):!0).reduce((Jt,Zt)=>Jt+Zt.to-Zt.from,0);return(Ht>0?Ht+Kt:Ht)>=Ft}function isActive(et,dt,kt={}){if(!dt)return isNodeActive(et,null,kt)||isMarkActive(et,null,kt);const $t=getSchemaTypeNameByName(dt,et.schema);return $t==="node"?isNodeActive(et,dt,kt):$t==="mark"?isMarkActive(et,dt,kt):!1}var isAtEndOfNode=(et,dt)=>{const{$from:kt,$to:$t,$anchor:Tt}=et.selection;if(dt){const Dt=findParentNode(Ut=>Ut.type.name===dt)(et.selection);if(!Dt)return!1;const Ft=et.doc.resolve(Dt.pos+1);return Tt.pos+1===Ft.end()}return!($t.parentOffset<$t.parent.nodeSize-2||kt.pos!==$t.pos)},isAtStartOfNode=et=>{const{$from:dt,$to:kt}=et.selection;return!(dt.parentOffset>0||dt.pos!==kt.pos)};function isExtensionRulesEnabled(et,dt){return Array.isArray(dt)?dt.some(kt=>(typeof kt=="string"?kt:kt.name)===et.name):dt}function isList(et,dt){const{nodeExtensions:kt}=splitExtensions(dt),$t=kt.find(Ft=>Ft.name===et);if(!$t)return!1;const Tt={name:$t.name,options:$t.options,storage:$t.storage},Dt=callOrReturn(getExtensionField($t,"group",Tt));return typeof Dt!="string"?!1:Dt.split(" ").includes("list")}function isNodeEmpty(et,{checkChildren:dt=!0,ignoreWhitespace:kt=!1}={}){var $t;if(kt){if(et.type.name==="hardBreak")return!0;if(et.isText)return/^\s*$/m.test(($t=et.text)!=null?$t:"")}if(et.isText)return!et.text;if(et.isAtom||et.isLeaf)return!1;if(et.content.childCount===0)return!0;if(dt){let Tt=!0;return et.content.forEach(Dt=>{Tt!==!1&&(isNodeEmpty(Dt,{ignoreWhitespace:kt,checkChildren:dt})||(Tt=!1))}),Tt}return!1}function isNodeSelection(et){return et instanceof NodeSelection}var MappablePosition=class iS{constructor(dt){this.position=dt}static fromJSON(dt){return new iS(dt.position)}toJSON(){return{position:this.position}}};function getUpdatedPosition(et,dt){const kt=dt.mapping.mapResult(et.position);return{position:new MappablePosition(kt.pos),mapResult:kt}}function createMappablePosition(et){return new MappablePosition(et)}function canSetMark(et,dt,kt){var $t;const{selection:Tt}=dt;let Dt=null;if(isTextSelection(Tt)&&(Dt=Tt.$cursor),Dt){const Ut=($t=et.storedMarks)!=null?$t:Dt.marks();return Dt.parent.type.allowsMarkType(kt)&&(!!kt.isInSet(Ut)||!Ut.some(Kt=>Kt.type.excludes(kt)))}const{ranges:Ft}=Tt;return Ft.some(({$from:Ut,$to:Ht})=>{let Kt=Ut.depth===0?et.doc.inlineContent&&et.doc.type.allowsMarkType(kt):!1;return et.doc.nodesBetween(Ut.pos,Ht.pos,(Yt,Jt,Zt)=>{if(Kt)return!1;if(Yt.isInline){const er=!Zt||Zt.type.allowsMarkType(kt),rr=!!kt.isInSet(Yt.marks)||!Yt.marks.some(sr=>sr.type.excludes(kt));Kt=er&&rr}return!Kt}),Kt})}var setMark=(et,dt={})=>({tr:kt,state:$t,dispatch:Tt})=>{const{selection:Dt}=kt,{empty:Ft,ranges:Ut}=Dt,Ht=getMarkType(et,$t.schema);if(Tt)if(Ft){const Kt=getMarkAttributes($t,Ht);kt.addStoredMark(Ht.create({...Kt,...dt}))}else Ut.forEach(Kt=>{const Yt=Kt.$from.pos,Jt=Kt.$to.pos;$t.doc.nodesBetween(Yt,Jt,(Zt,er)=>{const rr=Math.max(er,Yt),sr=Math.min(er+Zt.nodeSize,Jt);Zt.marks.find(ir=>ir.type===Ht)?Zt.marks.forEach(ir=>{Ht===ir.type&&kt.addMark(rr,sr,Ht.create({...ir.attrs,...dt}))}):kt.addMark(rr,sr,Ht.create(dt))})});return canSetMark($t,kt,Ht)},setMeta=(et,dt)=>({tr:kt})=>(kt.setMeta(et,dt),!0),setNode=(et,dt={})=>({state:kt,dispatch:$t,chain:Tt})=>{const Dt=getNodeType(et,kt.schema);let Ft;return kt.selection.$anchor.sameParent(kt.selection.$head)&&(Ft=kt.selection.$anchor.parent.attrs),Dt.isTextblock?Tt().command(({commands:Ut})=>setBlockType(Dt,{...Ft,...dt})(kt)?!0:Ut.clearNodes()).command(({state:Ut})=>setBlockType(Dt,{...Ft,...dt})(Ut,$t)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=et=>({tr:dt,dispatch:kt})=>{if(kt){const{doc:$t}=dt,Tt=minMax(et,0,$t.content.size),Dt=NodeSelection.create($t,Tt);dt.setSelection(Dt)}return!0},setTextDirection=(et,dt)=>({tr:kt,state:$t,dispatch:Tt})=>{const{selection:Dt}=$t;let Ft,Ut;return typeof dt=="number"?(Ft=dt,Ut=dt):dt&&"from"in dt&&"to"in dt?(Ft=dt.from,Ut=dt.to):(Ft=Dt.from,Ut=Dt.to),Tt&&kt.doc.nodesBetween(Ft,Ut,(Ht,Kt)=>{Ht.isText||kt.setNodeMarkup(Kt,void 0,{...Ht.attrs,dir:et})}),!0},setTextSelection=et=>({tr:dt,dispatch:kt})=>{if(kt){const{doc:$t}=dt,{from:Tt,to:Dt}=typeof et=="number"?{from:et,to:et}:et,Ft=TextSelection.atStart($t).from,Ut=TextSelection.atEnd($t).to,Ht=minMax(Tt,Ft,Ut),Kt=minMax(Dt,Ft,Ut),Yt=TextSelection.create($t,Ht,Kt);dt.setSelection(Yt)}return!0},sinkListItem=et=>({state:dt,dispatch:kt})=>{const $t=getNodeType(et,dt.schema);return sinkListItem$1($t)(dt,kt)};function ensureMarks(et,dt){const kt=et.storedMarks||et.selection.$to.parentOffset&&et.selection.$from.marks();if(kt){const $t=kt.filter(Tt=>dt==null?void 0:dt.includes(Tt.type.name));et.tr.ensureMarks($t)}}var splitBlock=({keepMarks:et=!0}={})=>({tr:dt,state:kt,dispatch:$t,editor:Tt})=>{const{selection:Dt,doc:Ft}=dt,{$from:Ut,$to:Ht}=Dt,Kt=Tt.extensionManager.attributes,Yt=getSplittedAttributes(Kt,Ut.node().type.name,Ut.node().attrs);if(Dt instanceof NodeSelection&&Dt.node.isBlock)return!Ut.parentOffset||!canSplit(Ft,Ut.pos)?!1:($t&&(et&&ensureMarks(kt,Tt.extensionManager.splittableMarks),dt.split(Ut.pos).scrollIntoView()),!0);if(!Ut.parent.isBlock)return!1;const Jt=Ht.parentOffset===Ht.parent.content.size,Zt=Ut.depth===0?void 0:defaultBlockAt(Ut.node(-1).contentMatchAt(Ut.indexAfter(-1)));let er=Jt&&Zt?[{type:Zt,attrs:Yt}]:void 0,rr=canSplit(dt.doc,dt.mapping.map(Ut.pos),1,er);if(!er&&!rr&&canSplit(dt.doc,dt.mapping.map(Ut.pos),1,Zt?[{type:Zt}]:void 0)&&(rr=!0,er=Zt?[{type:Zt,attrs:Yt}]:void 0),$t){if(rr&&(Dt instanceof TextSelection&&dt.deleteSelection(),dt.split(dt.mapping.map(Ut.pos),1,er),Zt&&!Jt&&!Ut.parentOffset&&Ut.parent.type!==Zt)){const sr=dt.mapping.map(Ut.before()),nr=dt.doc.resolve(sr);Ut.node(-1).canReplaceWith(nr.index(),nr.index()+1,Zt)&&dt.setNodeMarkup(dt.mapping.map(Ut.before()),Zt)}et&&ensureMarks(kt,Tt.extensionManager.splittableMarks),dt.scrollIntoView()}return rr},splitListItem=(et,dt={})=>({tr:kt,state:$t,dispatch:Tt,editor:Dt})=>{var Ft;const Ut=getNodeType(et,$t.schema),{$from:Ht,$to:Kt}=$t.selection,Yt=$t.selection.node;if(Yt&&Yt.isBlock||Ht.depth<2||!Ht.sameParent(Kt))return!1;const Jt=Ht.node(-1);if(Jt.type!==Ut)return!1;const Zt=Dt.extensionManager.attributes;if(Ht.parent.content.size===0&&Ht.node(-1).childCount===Ht.indexAfter(-1)){if(Ht.depth===2||Ht.node(-3).type!==Ut||Ht.index(-2)!==Ht.node(-2).childCount-1)return!1;if(Tt){let ir=Fragment.empty;const lr=Ht.index(-1)?1:Ht.index(-2)?2:3;for(let mr=Ht.depth-lr;mr>=Ht.depth-3;mr-=1)ir=Fragment.from(Ht.node(mr).copy(ir));const or=Ht.indexAfter(-1)<Ht.node(-2).childCount?1:Ht.indexAfter(-2)<Ht.node(-3).childCount?2:3,cr={...getSplittedAttributes(Zt,Ht.node().type.name,Ht.node().attrs),...dt},dr=((Ft=Ut.contentMatch.defaultType)==null?void 0:Ft.createAndFill(cr))||void 0;ir=ir.append(Fragment.from(Ut.createAndFill(null,dr)||void 0));const ur=Ht.before(Ht.depth-(lr-1));kt.replace(ur,Ht.after(-or),new Slice(ir,4-lr,0));let pr=-1;kt.doc.nodesBetween(ur,kt.doc.content.size,(mr,jr)=>{if(pr>-1)return!1;mr.isTextblock&&mr.content.size===0&&(pr=jr+1)}),pr>-1&&kt.setSelection(TextSelection.near(kt.doc.resolve(pr))),kt.scrollIntoView()}return!0}const er=Kt.pos===Ht.end()?Jt.contentMatchAt(0).defaultType:null,rr={...getSplittedAttributes(Zt,Jt.type.name,Jt.attrs),...dt},sr={...getSplittedAttributes(Zt,Ht.node().type.name,Ht.node().attrs),...dt};kt.delete(Ht.pos,Kt.pos);const nr=er?[{type:Ut,attrs:rr},{type:er,attrs:sr}]:[{type:Ut,attrs:rr}];if(!canSplit(kt.doc,Ht.pos,2))return!1;if(Tt){const{selection:ir,storedMarks:lr}=$t,{splittableMarks:or}=Dt.extensionManager,cr=lr||ir.$to.parentOffset&&ir.$from.marks();if(kt.split(Ht.pos,2,nr).scrollIntoView(),!cr||!Tt)return!0;const dr=cr.filter(ur=>or.includes(ur.type.name));kt.ensureMarks(dr)}return!0},joinListBackwards=(et,dt)=>{const kt=findParentNode(Ft=>Ft.type===dt)(et.selection);if(!kt)return!0;const $t=et.doc.resolve(Math.max(0,kt.pos-1)).before(kt.depth);if($t===void 0)return!0;const Tt=et.doc.nodeAt($t);return kt.node.type===(Tt==null?void 0:Tt.type)&&canJoin(et.doc,kt.pos)&&et.join(kt.pos),!0},joinListForwards=(et,dt)=>{const kt=findParentNode(Ft=>Ft.type===dt)(et.selection);if(!kt)return!0;const $t=et.doc.resolve(kt.start).after(kt.depth);if($t===void 0)return!0;const Tt=et.doc.nodeAt($t);return kt.node.type===(Tt==null?void 0:Tt.type)&&canJoin(et.doc,$t)&&et.join($t),!0},toggleList=(et,dt,kt,$t={})=>({editor:Tt,tr:Dt,state:Ft,dispatch:Ut,chain:Ht,commands:Kt,can:Yt})=>{const{extensions:Jt,splittableMarks:Zt}=Tt.extensionManager,er=getNodeType(et,Ft.schema),rr=getNodeType(dt,Ft.schema),{selection:sr,storedMarks:nr}=Ft,{$from:ir,$to:lr}=sr,or=ir.blockRange(lr),cr=nr||sr.$to.parentOffset&&sr.$from.marks();if(!or)return!1;const dr=findParentNode(ur=>isList(ur.type.name,Jt))(sr);if(or.depth>=1&&dr&&or.depth-dr.depth<=1){if(dr.node.type===er)return Kt.liftListItem(rr);if(isList(dr.node.type.name,Jt)&&er.validContent(dr.node.content)&&Ut)return Ht().command(()=>(Dt.setNodeMarkup(dr.pos,er),!0)).command(()=>joinListBackwards(Dt,er)).command(()=>joinListForwards(Dt,er)).run()}return!kt||!cr||!Ut?Ht().command(()=>Yt().wrapInList(er,$t)?!0:Kt.clearNodes()).wrapInList(er,$t).command(()=>joinListBackwards(Dt,er)).command(()=>joinListForwards(Dt,er)).run():Ht().command(()=>{const ur=Yt().wrapInList(er,$t),pr=cr.filter(mr=>Zt.includes(mr.type.name));return Dt.ensureMarks(pr),ur?!0:Kt.clearNodes()}).wrapInList(er,$t).command(()=>joinListBackwards(Dt,er)).command(()=>joinListForwards(Dt,er)).run()},toggleMark=(et,dt={},kt={})=>({state:$t,commands:Tt})=>{const{extendEmptyMarkRange:Dt=!1}=kt,Ft=getMarkType(et,$t.schema);return isMarkActive($t,Ft,dt)?Tt.unsetMark(Ft,{extendEmptyMarkRange:Dt}):Tt.setMark(Ft,dt)},toggleNode=(et,dt,kt={})=>({state:$t,commands:Tt})=>{const Dt=getNodeType(et,$t.schema),Ft=getNodeType(dt,$t.schema),Ut=isNodeActive($t,Dt,kt);let Ht;return $t.selection.$anchor.sameParent($t.selection.$head)&&(Ht=$t.selection.$anchor.parent.attrs),Ut?Tt.setNode(Ft,Ht):Tt.setNode(Dt,{...Ht,...kt})},toggleWrap=(et,dt={})=>({state:kt,commands:$t})=>{const Tt=getNodeType(et,kt.schema);return isNodeActive(kt,Tt,dt)?$t.lift(Tt):$t.wrapIn(Tt,dt)},undoInputRule=()=>({state:et,dispatch:dt})=>{const kt=et.plugins;for(let $t=0;$t<kt.length;$t+=1){const Tt=kt[$t];let Dt;if(Tt.spec.isInputRules&&(Dt=Tt.getState(et))){if(dt){const Ft=et.tr,Ut=Dt.transform;for(let Ht=Ut.steps.length-1;Ht>=0;Ht-=1)Ft.step(Ut.steps[Ht].invert(Ut.docs[Ht]));if(Dt.text){const Ht=Ft.doc.resolve(Dt.from).marks();Ft.replaceWith(Dt.from,Dt.to,et.schema.text(Dt.text,Ht))}else Ft.delete(Dt.from,Dt.to)}return!0}}return!1},unsetAllMarks=()=>({tr:et,dispatch:dt})=>{const{selection:kt}=et,{empty:$t,ranges:Tt}=kt;return $t||dt&&Tt.forEach(Dt=>{et.removeMark(Dt.$from.pos,Dt.$to.pos)}),!0},unsetMark=(et,dt={})=>({tr:kt,state:$t,dispatch:Tt})=>{var Dt;const{extendEmptyMarkRange:Ft=!1}=dt,{selection:Ut}=kt,Ht=getMarkType(et,$t.schema),{$from:Kt,empty:Yt,ranges:Jt}=Ut;if(!Tt)return!0;if(Yt&&Ft){let{from:Zt,to:er}=Ut;const rr=(Dt=Kt.marks().find(nr=>nr.type===Ht))==null?void 0:Dt.attrs,sr=getMarkRange(Kt,Ht,rr);sr&&(Zt=sr.from,er=sr.to),kt.removeMark(Zt,er,Ht)}else Jt.forEach(Zt=>{kt.removeMark(Zt.$from.pos,Zt.$to.pos,Ht)});return kt.removeStoredMark(Ht),!0},unsetTextDirection=et=>({tr:dt,state:kt,dispatch:$t})=>{const{selection:Tt}=kt;let Dt,Ft;return typeof et=="number"?(Dt=et,Ft=et):et&&"from"in et&&"to"in et?(Dt=et.from,Ft=et.to):(Dt=Tt.from,Ft=Tt.to),$t&&dt.doc.nodesBetween(Dt,Ft,(Ut,Ht)=>{if(Ut.isText)return;const Kt={...Ut.attrs};delete Kt.dir,dt.setNodeMarkup(Ht,void 0,Kt)}),!0},updateAttributes=(et,dt={})=>({tr:kt,state:$t,dispatch:Tt})=>{let Dt=null,Ft=null;const Ut=getSchemaTypeNameByName(typeof et=="string"?et:et.name,$t.schema);if(!Ut)return!1;Ut==="node"&&(Dt=getNodeType(et,$t.schema)),Ut==="mark"&&(Ft=getMarkType(et,$t.schema));let Ht=!1;return kt.selection.ranges.forEach(Kt=>{const Yt=Kt.$from.pos,Jt=Kt.$to.pos;let Zt,er,rr,sr;kt.selection.empty?$t.doc.nodesBetween(Yt,Jt,(nr,ir)=>{Dt&&Dt===nr.type&&(Ht=!0,rr=Math.max(ir,Yt),sr=Math.min(ir+nr.nodeSize,Jt),Zt=ir,er=nr)}):$t.doc.nodesBetween(Yt,Jt,(nr,ir)=>{ir<Yt&&Dt&&Dt===nr.type&&(Ht=!0,rr=Math.max(ir,Yt),sr=Math.min(ir+nr.nodeSize,Jt),Zt=ir,er=nr),ir>=Yt&&ir<=Jt&&(Dt&&Dt===nr.type&&(Ht=!0,Tt&&kt.setNodeMarkup(ir,void 0,{...nr.attrs,...dt})),Ft&&nr.marks.length&&nr.marks.forEach(lr=>{if(Ft===lr.type&&(Ht=!0,Tt)){const or=Math.max(ir,Yt),cr=Math.min(ir+nr.nodeSize,Jt);kt.addMark(or,cr,Ft.create({...lr.attrs,...dt}))}}))}),er&&(Zt!==void 0&&Tt&&kt.setNodeMarkup(Zt,void 0,{...er.attrs,...dt}),Ft&&er.marks.length&&er.marks.forEach(nr=>{Ft===nr.type&&Tt&&kt.addMark(rr,sr,Ft.create({...nr.attrs,...dt}))}))}),Ht},wrapIn=(et,dt={})=>({state:kt,dispatch:$t})=>{const Tt=getNodeType(et,kt.schema);return wrapIn$1(Tt,dt)(kt,$t)},wrapInList=(et,dt={})=>({state:kt,dispatch:$t})=>{const Tt=getNodeType(et,kt.schema);return wrapInList$1(Tt,dt)(kt,$t)},EventEmitter=class{constructor(){this.callbacks={}}on(et,dt){return this.callbacks[et]||(this.callbacks[et]=[]),this.callbacks[et].push(dt),this}emit(et,...dt){const kt=this.callbacks[et];return kt&&kt.forEach($t=>$t.apply(this,dt)),this}off(et,dt){const kt=this.callbacks[et];return kt&&(dt?this.callbacks[et]=kt.filter($t=>$t!==dt):delete this.callbacks[et]),this}once(et,dt){const kt=(...$t)=>{this.off(et,kt),dt.apply(this,$t)};return this.on(et,kt)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(et){var dt;this.find=et.find,this.handler=et.handler,this.undoable=(dt=et.undoable)!=null?dt:!0}},inputRuleMatcherHandler=(et,dt)=>{if(isRegExp(dt))return dt.exec(et);const kt=dt(et);if(!kt)return null;const $t=[kt.text];return $t.index=kt.index,$t.input=et,$t.data=kt.data,kt.replaceWith&&(kt.text.includes(kt.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),$t.push(kt.replaceWith)),$t};function run$2(et){var dt;const{editor:kt,from:$t,to:Tt,text:Dt,rules:Ft,plugin:Ut}=et,{view:Ht}=kt;if(Ht.composing)return!1;const Kt=Ht.state.doc.resolve($t);if(Kt.parent.type.spec.code||(dt=Kt.nodeBefore||Kt.nodeAfter)!=null&&dt.marks.find(Zt=>Zt.type.spec.code))return!1;let Yt=!1;const Jt=getTextContentFromNodes(Kt)+Dt;return Ft.forEach(Zt=>{if(Yt)return;const er=inputRuleMatcherHandler(Jt,Zt.find);if(!er)return;const rr=Ht.state.tr,sr=createChainableState({state:Ht.state,transaction:rr}),nr={from:$t-(er[0].length-Dt.length),to:Tt},{commands:ir,chain:lr,can:or}=new CommandManager$1({editor:kt,state:sr});Zt.handler({state:sr,range:nr,match:er,commands:ir,chain:lr,can:or})===null||!rr.steps.length||(Zt.undoable&&rr.setMeta(Ut,{transform:rr,from:$t,to:Tt,text:Dt}),Ht.dispatch(rr),Yt=!0)}),Yt}function inputRulesPlugin(et){const{editor:dt,rules:kt}=et,$t=new Plugin({state:{init(){return null},apply(Tt,Dt,Ft){const Ut=Tt.getMeta($t);if(Ut)return Ut;const Ht=Tt.getMeta("applyInputRules");return!!Ht&&setTimeout(()=>{let{text:Yt}=Ht;typeof Yt=="string"?Yt=Yt:Yt=getHTMLFromFragment(Fragment.from(Yt),Ft.schema);const{from:Jt}=Ht,Zt=Jt+Yt.length;run$2({editor:dt,from:Jt,to:Zt,text:Yt,rules:kt,plugin:$t})}),Tt.selectionSet||Tt.docChanged?null:Dt}},props:{handleTextInput(Tt,Dt,Ft,Ut){return run$2({editor:dt,from:Dt,to:Ft,text:Ut,rules:kt,plugin:$t})},handleDOMEvents:{compositionend:Tt=>(setTimeout(()=>{const{$cursor:Dt}=Tt.state.selection;Dt&&run$2({editor:dt,from:Dt.pos,to:Dt.pos,text:"",rules:kt,plugin:$t})}),!1)},handleKeyDown(Tt,Dt){if(Dt.key!=="Enter")return!1;const{$cursor:Ft}=Tt.state.selection;return Ft?run$2({editor:dt,from:Ft.pos,to:Ft.pos,text:`
`,rules:kt,plugin:$t}):!1}},isInputRules:!0});return $t}function getType(et){return Object.prototype.toString.call(et).slice(8,-1)}function isPlainObject$3(et){return getType(et)!=="Object"?!1:et.constructor===Object&&Object.getPrototypeOf(et)===Object.prototype}function mergeDeep(et,dt){const kt={...et};return isPlainObject$3(et)&&isPlainObject$3(dt)&&Object.keys(dt).forEach($t=>{isPlainObject$3(dt[$t])&&isPlainObject$3(et[$t])?kt[$t]=mergeDeep(et[$t],dt[$t]):kt[$t]=dt[$t]}),kt}var Extendable=class{constructor(et={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...et},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(et={}){const dt=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,et)});return dt.name=this.name,dt.parent=this.parent,dt}extend(et={}){const dt=new this.constructor({...this.config,...et});return dt.parent=this,this.child=dt,dt.name="name"in et?et.name:dt.parent.name,dt}},Mark=class aS extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(dt={}){const kt=typeof dt=="function"?dt():dt;return new aS(kt)}static handleExit({editor:dt,mark:kt}){const{tr:$t}=dt.state,Tt=dt.state.selection.$from;if(Tt.pos===Tt.end()){const Ft=Tt.marks();if(!!!Ft.find(Kt=>(Kt==null?void 0:Kt.type.name)===kt.name))return!1;const Ht=Ft.find(Kt=>(Kt==null?void 0:Kt.type.name)===kt.name);return Ht&&$t.removeStoredMark(Ht),$t.insertText(" ",Tt.pos),dt.view.dispatch($t),!0}return!1}configure(dt){return super.configure(dt)}extend(dt){const kt=typeof dt=="function"?dt():dt;return super.extend(kt)}};function isNumber$1(et){return typeof et=="number"}var PasteRule=class{constructor(et){this.find=et.find,this.handler=et.handler}},pasteRuleMatcherHandler=(et,dt,kt)=>{if(isRegExp(dt))return[...et.matchAll(dt)];const $t=dt(et,kt);return $t?$t.map(Tt=>{const Dt=[Tt.text];return Dt.index=Tt.index,Dt.input=et,Dt.data=Tt.data,Tt.replaceWith&&(Tt.text.includes(Tt.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),Dt.push(Tt.replaceWith)),Dt}):[]};function run2(et){const{editor:dt,state:kt,from:$t,to:Tt,rule:Dt,pasteEvent:Ft,dropEvent:Ut}=et,{commands:Ht,chain:Kt,can:Yt}=new CommandManager$1({editor:dt,state:kt}),Jt=[];return kt.doc.nodesBetween($t,Tt,(er,rr)=>{var sr,nr,ir,lr,or;if((nr=(sr=er.type)==null?void 0:sr.spec)!=null&&nr.code||!(er.isText||er.isTextblock||er.isInline))return;const cr=(or=(lr=(ir=er.content)==null?void 0:ir.size)!=null?lr:er.nodeSize)!=null?or:0,dr=Math.max($t,rr),ur=Math.min(Tt,rr+cr);if(dr>=ur)return;const pr=er.isText?er.text||"":er.textBetween(dr-rr,ur-rr,void 0,"");pasteRuleMatcherHandler(pr,Dt.find,Ft).forEach(jr=>{if(jr.index===void 0)return;const Rr=dr+jr.index+1,br=Rr+jr[0].length,_r={from:kt.tr.mapping.map(Rr),to:kt.tr.mapping.map(br)},Mr=Dt.handler({state:kt,range:_r,match:jr,commands:Ht,chain:Kt,can:Yt,pasteEvent:Ft,dropEvent:Ut});Jt.push(Mr)})}),Jt.every(er=>er!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=et=>{var dt;const kt=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(dt=kt.clipboardData)==null||dt.setData("text/html",et),kt};function pasteRulesPlugin(et){const{editor:dt,rules:kt}=et;let $t=null,Tt=!1,Dt=!1,Ft=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ut;try{Ut=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{Ut=null}const Ht=({state:Yt,from:Jt,to:Zt,rule:er,pasteEvt:rr})=>{const sr=Yt.tr,nr=createChainableState({state:Yt,transaction:sr});if(!(!run2({editor:dt,state:nr,from:Math.max(Jt-1,0),to:Zt.b-1,rule:er,pasteEvent:rr,dropEvent:Ut})||!sr.steps.length)){try{Ut=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{Ut=null}return Ft=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,sr}};return kt.map(Yt=>new Plugin({view(Jt){const Zt=rr=>{var sr;$t=(sr=Jt.dom.parentElement)!=null&&sr.contains(rr.target)?Jt.dom.parentElement:null,$t&&(tiptapDragFromOtherEditor=dt)},er=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",Zt),window.addEventListener("dragend",er),{destroy(){window.removeEventListener("dragstart",Zt),window.removeEventListener("dragend",er)}}},props:{handleDOMEvents:{drop:(Jt,Zt)=>{if(Dt=$t===Jt.dom.parentElement,Ut=Zt,!Dt){const er=tiptapDragFromOtherEditor;er!=null&&er.isEditable&&setTimeout(()=>{const rr=er.state.selection;rr&&er.commands.deleteRange({from:rr.from,to:rr.to})},10)}return!1},paste:(Jt,Zt)=>{var er;const rr=(er=Zt.clipboardData)==null?void 0:er.getData("text/html");return Ft=Zt,Tt=!!(rr!=null&&rr.includes("data-pm-slice")),!1}}},appendTransaction:(Jt,Zt,er)=>{const rr=Jt[0],sr=rr.getMeta("uiEvent")==="paste"&&!Tt,nr=rr.getMeta("uiEvent")==="drop"&&!Dt,ir=rr.getMeta("applyPasteRules"),lr=!!ir;if(!sr&&!nr&&!lr)return;if(lr){let{text:dr}=ir;typeof dr=="string"?dr=dr:dr=getHTMLFromFragment(Fragment.from(dr),er.schema);const{from:ur}=ir,pr=ur+dr.length,mr=createClipboardPasteEvent(dr);return Ht({rule:Yt,state:er,from:ur,to:{b:pr},pasteEvt:mr})}const or=Zt.doc.content.findDiffStart(er.doc.content),cr=Zt.doc.content.findDiffEnd(er.doc.content);if(!(!isNumber$1(or)||!cr||or===cr.b))return Ht({rule:Yt,state:er,from:or,to:cr,pasteEvt:Ft})}}))}var ExtensionManager=class{constructor(et,dt){this.splittableMarks=[],this.editor=dt,this.baseExtensions=et,this.extensions=resolveExtensions(et),this.schema=getSchemaByResolvedExtensions(this.extensions,dt),this.setupExtensions()}get commands(){return this.extensions.reduce((et,dt)=>{const kt={name:dt.name,options:dt.options,storage:this.editor.extensionStorage[dt.name],editor:this.editor,type:getSchemaTypeByName(dt.name,this.schema)},$t=getExtensionField(dt,"addCommands",kt);return $t?{...et,...$t()}:et},{})}get plugins(){const{editor:et}=this;return sortExtensions([...this.extensions].reverse()).flatMap($t=>{const Tt={name:$t.name,options:$t.options,storage:this.editor.extensionStorage[$t.name],editor:et,type:getSchemaTypeByName($t.name,this.schema)},Dt=[],Ft=getExtensionField($t,"addKeyboardShortcuts",Tt);let Ut={};if($t.type==="mark"&&getExtensionField($t,"exitable",Tt)&&(Ut.ArrowRight=()=>Mark.handleExit({editor:et,mark:$t})),Ft){const Zt=Object.fromEntries(Object.entries(Ft()).map(([er,rr])=>[er,()=>rr({editor:et})]));Ut={...Ut,...Zt}}const Ht=keymap(Ut);Dt.push(Ht);const Kt=getExtensionField($t,"addInputRules",Tt);if(isExtensionRulesEnabled($t,et.options.enableInputRules)&&Kt){const Zt=Kt();if(Zt&&Zt.length){const er=inputRulesPlugin({editor:et,rules:Zt}),rr=Array.isArray(er)?er:[er];Dt.push(...rr)}}const Yt=getExtensionField($t,"addPasteRules",Tt);if(isExtensionRulesEnabled($t,et.options.enablePasteRules)&&Yt){const Zt=Yt();if(Zt&&Zt.length){const er=pasteRulesPlugin({editor:et,rules:Zt});Dt.push(...er)}}const Jt=getExtensionField($t,"addProseMirrorPlugins",Tt);if(Jt){const Zt=Jt();Dt.push(...Zt)}return Dt})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:et}=this,{nodeExtensions:dt}=splitExtensions(this.extensions);return Object.fromEntries(dt.filter(kt=>!!getExtensionField(kt,"addNodeView")).map(kt=>{const $t=this.attributes.filter(Ht=>Ht.type===kt.name),Tt={name:kt.name,options:kt.options,storage:this.editor.extensionStorage[kt.name],editor:et,type:getNodeType(kt.name,this.schema)},Dt=getExtensionField(kt,"addNodeView",Tt);if(!Dt)return[];const Ft=Dt();if(!Ft)return[];const Ut=(Ht,Kt,Yt,Jt,Zt)=>{const er=getRenderedAttributes(Ht,$t);return Ft({node:Ht,view:Kt,getPos:Yt,decorations:Jt,innerDecorations:Zt,editor:et,extension:kt,HTMLAttributes:er})};return[kt.name,Ut]}))}dispatchTransaction(et){const{editor:dt}=this;return sortExtensions([...this.extensions].reverse()).reduceRight(($t,Tt)=>{const Dt={name:Tt.name,options:Tt.options,storage:this.editor.extensionStorage[Tt.name],editor:dt,type:getSchemaTypeByName(Tt.name,this.schema)},Ft=getExtensionField(Tt,"dispatchTransaction",Dt);return Ft?Ut=>{Ft.call(Dt,{transaction:Ut,next:$t})}:$t},et)}get markViews(){const{editor:et}=this,{markExtensions:dt}=splitExtensions(this.extensions);return Object.fromEntries(dt.filter(kt=>!!getExtensionField(kt,"addMarkView")).map(kt=>{const $t=this.attributes.filter(Ut=>Ut.type===kt.name),Tt={name:kt.name,options:kt.options,storage:this.editor.extensionStorage[kt.name],editor:et,type:getMarkType(kt.name,this.schema)},Dt=getExtensionField(kt,"addMarkView",Tt);if(!Dt)return[];const Ft=(Ut,Ht,Kt)=>{const Yt=getRenderedAttributes(Ut,$t);return Dt()({mark:Ut,view:Ht,inline:Kt,editor:et,extension:kt,HTMLAttributes:Yt,updateAttributes:Jt=>{updateMarkViewAttributes(Ut,et,Jt)}})};return[kt.name,Ft]}))}setupExtensions(){const et=this.extensions;this.editor.extensionStorage=Object.fromEntries(et.map(dt=>[dt.name,dt.storage])),et.forEach(dt=>{var kt;const $t={name:dt.name,options:dt.options,storage:this.editor.extensionStorage[dt.name],editor:this.editor,type:getSchemaTypeByName(dt.name,this.schema)};dt.type==="mark"&&((kt=callOrReturn(getExtensionField(dt,"keepOnSplit",$t)))==null||kt)&&this.splittableMarks.push(dt.name);const Tt=getExtensionField(dt,"onBeforeCreate",$t),Dt=getExtensionField(dt,"onCreate",$t),Ft=getExtensionField(dt,"onUpdate",$t),Ut=getExtensionField(dt,"onSelectionUpdate",$t),Ht=getExtensionField(dt,"onTransaction",$t),Kt=getExtensionField(dt,"onFocus",$t),Yt=getExtensionField(dt,"onBlur",$t),Jt=getExtensionField(dt,"onDestroy",$t);Tt&&this.editor.on("beforeCreate",Tt),Dt&&this.editor.on("create",Dt),Ft&&this.editor.on("update",Ft),Ut&&this.editor.on("selectionUpdate",Ut),Ht&&this.editor.on("transaction",Ht),Kt&&this.editor.on("focus",Kt),Yt&&this.editor.on("blur",Yt),Jt&&this.editor.on("destroy",Jt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$7(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,TextDirection:()=>TextDirection,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class oS extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(dt={}){const kt=typeof dt=="function"?dt():dt;return new oS(kt)}configure(dt){return super.configure(dt)}extend(dt){const kt=typeof dt=="function"?dt():dt;return super.extend(kt)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:et}=this,{state:dt,schema:kt}=et,{doc:$t,selection:Tt}=dt,{ranges:Dt}=Tt,Ft=Math.min(...Dt.map(Yt=>Yt.$from.pos)),Ut=Math.max(...Dt.map(Yt=>Yt.$to.pos)),Ht=getTextSerializersFromSchema(kt);return getTextBetween($t,{from:Ft,to:Ut},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:Ht})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:et,appendedTransactions:dt}){var kt,$t,Tt;const Dt=()=>{var Ft,Ut,Ht,Kt;if((Kt=(Ht=(Ut=(Ft=this.editor.options.coreExtensionOptions)==null?void 0:Ft.delete)==null?void 0:Ut.filterTransaction)==null?void 0:Ht.call(Ut,et))!=null?Kt:et.getMeta("y-sync$"))return;const Yt=combineTransactionSteps(et.before,[et,...dt]);getChangedRanges(Yt).forEach(er=>{Yt.mapping.mapResult(er.oldRange.from).deletedAfter&&Yt.mapping.mapResult(er.oldRange.to).deletedBefore&&Yt.before.nodesBetween(er.oldRange.from,er.oldRange.to,(rr,sr)=>{const nr=sr+rr.nodeSize-2,ir=er.oldRange.from<=sr&&nr<=er.oldRange.to;this.editor.emit("delete",{type:"node",node:rr,from:sr,to:nr,newFrom:Yt.mapping.map(sr),newTo:Yt.mapping.map(nr),deletedRange:er.oldRange,newRange:er.newRange,partial:!ir,editor:this.editor,transaction:et,combinedTransform:Yt})})});const Zt=Yt.mapping;Yt.steps.forEach((er,rr)=>{var sr,nr;if(er instanceof RemoveMarkStep){const ir=Zt.slice(rr).map(er.from,-1),lr=Zt.slice(rr).map(er.to),or=Zt.invert().map(ir,-1),cr=Zt.invert().map(lr),dr=(sr=Yt.doc.nodeAt(ir-1))==null?void 0:sr.marks.some(pr=>pr.eq(er.mark)),ur=(nr=Yt.doc.nodeAt(lr))==null?void 0:nr.marks.some(pr=>pr.eq(er.mark));this.editor.emit("delete",{type:"mark",mark:er.mark,from:er.from,to:er.to,deletedRange:{from:or,to:cr},newRange:{from:ir,to:lr},partial:!!(ur||dr),editor:this.editor,transaction:et,combinedTransform:Yt})}})};(Tt=($t=(kt=this.editor.options.coreExtensionOptions)==null?void 0:kt.delete)==null?void 0:$t.async)==null||Tt?setTimeout(Dt,0):Dt()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(et,dt,kt,$t)=>{this.editor.emit("drop",{editor:this.editor,event:dt,slice:kt,moved:$t})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:et}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(dt,kt)=>{et.isFocused=!0;const $t=et.state.tr.setMeta("focus",{event:kt}).setMeta("addToHistory",!1);return dt.dispatch($t),!1},blur:(dt,kt)=>{et.isFocused=!1;const $t=et.state.tr.setMeta("blur",{event:kt}).setMeta("addToHistory",!1);return dt.dispatch($t),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const et=()=>this.editor.commands.first(({commands:Ft})=>[()=>Ft.undoInputRule(),()=>Ft.command(({tr:Ut})=>{const{selection:Ht,doc:Kt}=Ut,{empty:Yt,$anchor:Jt}=Ht,{pos:Zt,parent:er}=Jt,rr=Jt.parent.isTextblock&&Zt>0?Ut.doc.resolve(Zt-1):Jt,sr=rr.parent.type.spec.isolating,nr=Jt.pos-Jt.parentOffset,ir=sr&&rr.parent.childCount===1?nr===Jt.pos:Selection.atStart(Kt).from===Zt;return!Yt||!er.type.isTextblock||er.textContent.length||!ir||ir&&Jt.parent.type.name==="paragraph"?!1:Ft.clearNodes()}),()=>Ft.deleteSelection(),()=>Ft.joinBackward(),()=>Ft.selectNodeBackward()]),dt=()=>this.editor.commands.first(({commands:Ft})=>[()=>Ft.deleteSelection(),()=>Ft.deleteCurrentNode(),()=>Ft.joinForward(),()=>Ft.selectNodeForward()]),$t={Enter:()=>this.editor.commands.first(({commands:Ft})=>[()=>Ft.newlineInCode(),()=>Ft.createParagraphNear(),()=>Ft.liftEmptyBlock(),()=>Ft.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:et,"Mod-Backspace":et,"Shift-Backspace":et,Delete:dt,"Mod-Delete":dt,"Mod-a":()=>this.editor.commands.selectAll()},Tt={...$t},Dt={...$t,"Ctrl-h":et,"Alt-Backspace":et,"Ctrl-d":dt,"Ctrl-Alt-Backspace":dt,"Alt-Delete":dt,"Alt-d":dt,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?Dt:Tt},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(et,dt,kt)=>{if(et.some(sr=>sr.getMeta("composition")))return;const $t=et.some(sr=>sr.docChanged)&&!dt.doc.eq(kt.doc),Tt=et.some(sr=>sr.getMeta("preventClearDocument"));if(!$t||Tt)return;const{empty:Dt,from:Ft,to:Ut}=dt.selection,Ht=Selection.atStart(dt.doc).from,Kt=Selection.atEnd(dt.doc).to;if(Dt||!(Ft===Ht&&Ut===Kt)||!isNodeEmpty(kt.doc))return;const Zt=kt.tr,er=createChainableState({state:kt,transaction:Zt}),{commands:rr}=new CommandManager$1({editor:this.editor,state:er});if(rr.clearNodes(),!!Zt.steps.length)return Zt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(et,dt,kt)=>{this.editor.emit("paste",{editor:this.editor,event:dt,slice:kt})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TextDirection=Extension.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:et}=splitExtensions(this.extensions);return[{types:et.filter(dt=>dt.name!=="text").map(dt=>dt.name),attributes:{dir:{default:this.options.direction,parseHTML:dt=>{const kt=dt.getAttribute("dir");return kt&&(kt==="ltr"||kt==="rtl"||kt==="auto")?kt:this.options.direction},renderHTML:dt=>dt.dir?{dir:dt.dir}:{}}}}]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("textDirection"),props:{attributes:()=>{const et=this.options.direction;return et?{dir:et}:{}}}})]}}),NodePos=class c0{constructor(dt,kt,$t=!1,Tt=null){this.currentNode=null,this.actualDepth=null,this.isBlock=$t,this.resolvedPos=dt,this.editor=kt,this.currentNode=Tt}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var dt;return(dt=this.actualDepth)!=null?dt:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(dt){let kt=this.from,$t=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}kt=this.from+1,$t=this.to-1}this.editor.commands.insertContentAt({from:kt,to:$t},dt)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const dt=this.resolvedPos.start(this.resolvedPos.depth-1),kt=this.resolvedPos.doc.resolve(dt);return new c0(kt,this.editor)}get before(){let dt=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return dt.depth!==this.depth&&(dt=this.resolvedPos.doc.resolve(this.from-3)),new c0(dt,this.editor)}get after(){let dt=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return dt.depth!==this.depth&&(dt=this.resolvedPos.doc.resolve(this.to+3)),new c0(dt,this.editor)}get children(){const dt=[];return this.node.content.forEach((kt,$t)=>{const Tt=kt.isBlock&&!kt.isTextblock,Dt=kt.isAtom&&!kt.isText,Ft=this.pos+$t+(Dt?0:1);if(Ft<0||Ft>this.resolvedPos.doc.nodeSize-2)return;const Ut=this.resolvedPos.doc.resolve(Ft);if(!Tt&&Ut.depth<=this.depth)return;const Ht=new c0(Ut,this.editor,Tt,Tt?kt:null);Tt&&(Ht.actualDepth=this.depth+1),dt.push(new c0(Ut,this.editor,Tt,Tt?kt:null))}),dt}get firstChild(){return this.children[0]||null}get lastChild(){const dt=this.children;return dt[dt.length-1]||null}closest(dt,kt={}){let $t=null,Tt=this.parent;for(;Tt&&!$t;){if(Tt.node.type.name===dt)if(Object.keys(kt).length>0){const Dt=Tt.node.attrs,Ft=Object.keys(kt);for(let Ut=0;Ut<Ft.length;Ut+=1){const Ht=Ft[Ut];if(Dt[Ht]!==kt[Ht])break}}else $t=Tt;Tt=Tt.parent}return $t}querySelector(dt,kt={}){return this.querySelectorAll(dt,kt,!0)[0]||null}querySelectorAll(dt,kt={},$t=!1){let Tt=[];if(!this.children||this.children.length===0)return Tt;const Dt=Object.keys(kt);return this.children.forEach(Ft=>{$t&&Tt.length>0||(Ft.node.type.name===dt&&Dt.every(Ht=>kt[Ht]===Ft.node.attrs[Ht])&&Tt.push(Ft),!($t&&Tt.length>0)&&(Tt=Tt.concat(Ft.querySelectorAll(dt,kt,$t))))}),Tt}setAttribute(dt){const{tr:kt}=this.editor.state;kt.setNodeMarkup(this.from,void 0,{...this.node.attrs,...dt}),this.editor.view.dispatch(kt)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(et,dt,kt){const $t=document.querySelector(`style[data-tiptap-style${kt?`-${kt}`:""}]`);if($t!==null)return $t;const Tt=document.createElement("style");return dt&&Tt.setAttribute("nonce",dt),Tt.setAttribute(`data-tiptap-style${kt?`-${kt}`:""}`,""),Tt.innerHTML=et,document.getElementsByTagName("head")[0].appendChild(Tt),Tt}var Editor=class extends EventEmitter{constructor(et={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:$t})=>{throw $t},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition,createMappablePosition},this.setOptions(et),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:$t,slice:Tt,moved:Dt})=>this.options.onDrop($t,Tt,Dt)),this.on("paste",({event:$t,slice:Tt})=>this.options.onPaste($t,Tt)),this.on("delete",this.options.onDelete);const dt=this.createDoc(),kt=resolveFocusPosition(dt,this.options.autofocus);this.editorState=EditorState.create({doc:dt,schema:this.schema,selection:kt||void 0}),this.options.element&&this.mount(this.options.element)}mount(et){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(et),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const et=this.editorView.dom;et!=null&&et.editor&&delete et.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(et){console.warn("Failed to remove CSS element:",et)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(et={}){this.options={...this.options,...et},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(et,dt=!0){this.setOptions({editable:et}),dt&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:et=>{this.editorState=et},dispatch:et=>{this.dispatchTransaction(et)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(et,dt)=>{if(this.editorView)return this.editorView[dt];if(dt==="state")return this.editorState;if(dt in et)return Reflect.get(et,dt);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${dt}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(et,dt){const kt=isFunction$4(dt)?dt(et,[...this.state.plugins]):[...this.state.plugins,et],$t=this.state.reconfigure({plugins:kt});return this.view.updateState($t),$t}unregisterPlugin(et){if(this.isDestroyed)return;const dt=this.state.plugins;let kt=dt;if([].concat(et).forEach(Tt=>{const Dt=typeof Tt=="string"?`${Tt}$`:Tt.key;kt=kt.filter(Ft=>!Ft.key.startsWith(Dt))}),dt.length===kt.length)return;const $t=this.state.reconfigure({plugins:kt});return this.view.updateState($t),$t}createExtensionManager(){var et,dt;const $t=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(dt=(et=this.options.coreExtensionOptions)==null?void 0:et.clipboardTextSerializer)==null?void 0:dt.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete,TextDirection.configure({direction:this.options.textDirection})].filter(Tt=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[Tt.name]!==!1:!0):[],...this.options.extensions].filter(Tt=>["extension","node","mark"].includes(Tt==null?void 0:Tt.type));this.extensionManager=new ExtensionManager($t,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let et;try{et=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(dt){if(!(dt instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(dt.message))throw dt;this.emit("contentError",{editor:this,error:dt,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(kt=>kt.name!=="collaboration"),this.createExtensionManager()}}),et=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return et}createView(et){const{editorProps:dt,enableExtensionDispatchTransaction:kt}=this.options,$t=dt.dispatchTransaction||this.dispatchTransaction.bind(this),Tt=kt?this.extensionManager.dispatchTransaction($t):$t;this.editorView=new EditorView(et,{...dt,attributes:{role:"textbox",...dt==null?void 0:dt.attributes},dispatchTransaction:Tt,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const Dt=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(Dt),this.prependClass(),this.injectCSS();const Ft=this.view.dom;Ft.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(et){this.isCapturingTransaction=!0,et(),this.isCapturingTransaction=!1;const dt=this.capturedTransaction;return this.capturedTransaction=null,dt}dispatchTransaction(et){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=et;return}et.steps.forEach(Kt=>{var Yt;return(Yt=this.capturedTransaction)==null?void 0:Yt.step(Kt)});return}const{state:dt,transactions:kt}=this.state.applyTransaction(et),$t=!this.state.selection.eq(dt.selection),Tt=kt.includes(et),Dt=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:et,nextState:dt}),!Tt)return;this.view.updateState(dt),this.emit("transaction",{editor:this,transaction:et,appendedTransactions:kt.slice(1)}),$t&&this.emit("selectionUpdate",{editor:this,transaction:et});const Ft=kt.findLast(Kt=>Kt.getMeta("focus")||Kt.getMeta("blur")),Ut=Ft==null?void 0:Ft.getMeta("focus"),Ht=Ft==null?void 0:Ft.getMeta("blur");Ut&&this.emit("focus",{editor:this,event:Ut.event,transaction:Ft}),Ht&&this.emit("blur",{editor:this,event:Ht.event,transaction:Ft}),!(et.getMeta("preventUpdate")||!kt.some(Kt=>Kt.docChanged)||Dt.doc.eq(dt.doc))&&this.emit("update",{editor:this,transaction:et,appendedTransactions:kt.slice(1)})}getAttributes(et){return getAttributes$1(this.state,et)}isActive(et,dt){const kt=typeof et=="string"?et:null,$t=typeof et=="string"?dt:et;return isActive(this.state,kt,$t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(et){const{blockSeparator:dt=`

`,textSerializers:kt={}}=et||{};return getText(this.state.doc,{blockSeparator:dt,textSerializers:{...getTextSerializersFromSchema(this.schema),...kt}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var et,dt;return(dt=(et=this.editorView)==null?void 0:et.isDestroyed)!=null?dt:!0}$node(et,dt){var kt;return((kt=this.$doc)==null?void 0:kt.querySelector(et,dt))||null}$nodes(et,dt){var kt;return((kt=this.$doc)==null?void 0:kt.querySelectorAll(et,dt))||null}$pos(et){const dt=this.state.doc.resolve(et);return new NodePos(dt,this)}get $doc(){return this.$pos(0)}};function markInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:kt,match:$t})=>{const Tt=callOrReturn(et.getAttributes,void 0,$t);if(Tt===!1||Tt===null)return null;const{tr:Dt}=dt,Ft=$t[$t.length-1],Ut=$t[0];if(Ft){const Ht=Ut.search(/\S/),Kt=kt.from+Ut.indexOf(Ft),Yt=Kt+Ft.length;if(getMarksBetween(kt.from,kt.to,dt.doc).filter(er=>er.mark.type.excluded.find(sr=>sr===et.type&&sr!==er.mark.type)).filter(er=>er.to>Kt).length)return null;Yt<kt.to&&Dt.delete(Yt,kt.to),Kt>kt.from&&Dt.delete(kt.from+Ht,Kt);const Zt=kt.from+Ht+Ft.length;Dt.addMark(kt.from+Ht,Zt,et.type.create(Tt||{})),Dt.removeStoredMark(et.type)}},undoable:et.undoable})}function nodeInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:kt,match:$t})=>{const Tt=callOrReturn(et.getAttributes,void 0,$t)||{},{tr:Dt}=dt,Ft=kt.from;let Ut=kt.to;const Ht=et.type.create(Tt);if($t[1]){const Kt=$t[0].lastIndexOf($t[1]);let Yt=Ft+Kt;Yt>Ut?Yt=Ut:Ut=Yt+$t[1].length;const Jt=$t[0][$t[0].length-1];Dt.insertText(Jt,Ft+$t[0].length-1),Dt.replaceWith(Yt,Ut,Ht)}else if($t[0]){const Kt=et.type.isInline?Ft:Ft-1;Dt.insert(Kt,et.type.create(Tt)).delete(Dt.mapping.map(Ft),Dt.mapping.map(Ut))}Dt.scrollIntoView()},undoable:et.undoable})}function textblockTypeInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:kt,match:$t})=>{const Tt=dt.doc.resolve(kt.from),Dt=callOrReturn(et.getAttributes,void 0,$t)||{};if(!Tt.node(-1).canReplaceWith(Tt.index(-1),Tt.indexAfter(-1),et.type))return null;dt.tr.delete(kt.from,kt.to).setBlockType(kt.from,kt.from,et.type,Dt)},undoable:et.undoable})}function wrappingInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:kt,match:$t,chain:Tt})=>{const Dt=callOrReturn(et.getAttributes,void 0,$t)||{},Ft=dt.tr.delete(kt.from,kt.to),Ht=Ft.doc.resolve(kt.from).blockRange(),Kt=Ht&&findWrapping(Ht,et.type,Dt);if(!Kt)return null;if(Ft.wrap(Ht,Kt),et.keepMarks&&et.editor){const{selection:Jt,storedMarks:Zt}=dt,{splittableMarks:er}=et.editor.extensionManager,rr=Zt||Jt.$to.parentOffset&&Jt.$from.marks();if(rr){const sr=rr.filter(nr=>er.includes(nr.type.name));Ft.ensureMarks(sr)}}if(et.keepAttributes){const Jt=et.type.name==="bulletList"||et.type.name==="orderedList"?"listItem":"taskList";Tt().updateAttributes(Jt,Dt).run()}const Yt=Ft.doc.resolve(kt.from-1).nodeBefore;Yt&&Yt.type===et.type&&canJoin(Ft.doc,kt.from-1)&&(!et.joinPredicate||et.joinPredicate($t,Yt))&&Ft.join(kt.from-1)},undoable:et.undoable})}var isTouchEvent$1=et=>"touches"in et,ResizableNodeView=class{constructor(et){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=Ut=>{if(!this.isResizing||!this.activeHandle)return;const Ht=Ut.clientX-this.startX,Kt=Ut.clientY-this.startY;this.handleResize(Ht,Kt)},this.handleTouchMove=Ut=>{if(!this.isResizing||!this.activeHandle)return;const Ht=Ut.touches[0];if(!Ht)return;const Kt=Ht.clientX-this.startX,Yt=Ht.clientY-this.startY;this.handleResize(Kt,Yt)},this.handleMouseUp=()=>{if(!this.isResizing)return;const Ut=this.element.offsetWidth,Ht=this.element.offsetHeight;this.onCommit(Ut,Ht),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=Ut=>{Ut.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=Ut=>{Ut.key==="Shift"&&(this.isShiftKeyPressed=!1)};var dt,kt,$t,Tt,Dt,Ft;this.node=et.node,this.editor=et.editor,this.element=et.element,this.contentElement=et.contentElement,this.getPos=et.getPos,this.onResize=et.onResize,this.onCommit=et.onCommit,this.onUpdate=et.onUpdate,(dt=et.options)!=null&&dt.min&&(this.minSize={...this.minSize,...et.options.min}),(kt=et.options)!=null&&kt.max&&(this.maxSize=et.options.max),($t=et==null?void 0:et.options)!=null&&$t.directions&&(this.directions=et.options.directions),(Tt=et.options)!=null&&Tt.preserveAspectRatio&&(this.preserveAspectRatio=et.options.preserveAspectRatio),(Dt=et.options)!=null&&Dt.className&&(this.classNames={container:et.options.className.container||"",wrapper:et.options.className.wrapper||"",handle:et.options.className.handle||"",resizing:et.options.className.resizing||""}),(Ft=et.options)!=null&&Ft.createCustomHandle&&(this.createCustomHandle=et.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const et=this.editor.isEditable;et!==this.lastEditableState&&(this.lastEditableState=et,et?et&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(et,dt,kt){return et.type!==this.node.type?!1:(this.node=et,this.onUpdate?this.onUpdate(et,dt,kt):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const et=document.createElement("div");return et.dataset.resizeContainer="",et.dataset.node=this.node.type.name,et.style.display="flex",this.classNames.container&&(et.className=this.classNames.container),et.appendChild(this.wrapper),et}createWrapper(){const et=document.createElement("div");return et.style.position="relative",et.style.display="block",et.dataset.resizeWrapper="",this.classNames.wrapper&&(et.className=this.classNames.wrapper),et.appendChild(this.element),et}createHandle(et){const dt=document.createElement("div");return dt.dataset.resizeHandle=et,dt.style.position="absolute",this.classNames.handle&&(dt.className=this.classNames.handle),dt}positionHandle(et,dt){const kt=dt.includes("top"),$t=dt.includes("bottom"),Tt=dt.includes("left"),Dt=dt.includes("right");kt&&(et.style.top="0"),$t&&(et.style.bottom="0"),Tt&&(et.style.left="0"),Dt&&(et.style.right="0"),(dt==="top"||dt==="bottom")&&(et.style.left="0",et.style.right="0"),(dt==="left"||dt==="right")&&(et.style.top="0",et.style.bottom="0")}attachHandles(){this.directions.forEach(et=>{let dt;this.createCustomHandle?dt=this.createCustomHandle(et):dt=this.createHandle(et),dt instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${et}") did not return an HTMLElement. Falling back to default handle.`),dt=this.createHandle(et)),this.createCustomHandle||this.positionHandle(dt,et),dt.addEventListener("mousedown",kt=>this.handleResizeStart(kt,et)),dt.addEventListener("touchstart",kt=>this.handleResizeStart(kt,et)),this.handleMap.set(et,dt),this.wrapper.appendChild(dt)})}removeHandles(){this.handleMap.forEach(et=>et.remove()),this.handleMap.clear()}applyInitialSize(){const et=this.node.attrs.width,dt=this.node.attrs.height;et?(this.element.style.width=`${et}px`,this.initialWidth=et):this.initialWidth=this.element.offsetWidth,dt?(this.element.style.height=`${dt}px`,this.initialHeight=dt):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(et,dt){et.preventDefault(),et.stopPropagation(),this.isResizing=!0,this.activeHandle=dt,isTouchEvent$1(et)?(this.startX=et.touches[0].clientX,this.startY=et.touches[0].clientY):(this.startX=et.clientX,this.startY=et.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(et,dt){if(!this.activeHandle)return;const kt=this.preserveAspectRatio||this.isShiftKeyPressed,{width:$t,height:Tt}=this.calculateNewDimensions(this.activeHandle,et,dt),Dt=this.applyConstraints($t,Tt,kt);this.element.style.width=`${Dt.width}px`,this.element.style.height=`${Dt.height}px`,this.onResize&&this.onResize(Dt.width,Dt.height)}calculateNewDimensions(et,dt,kt){let $t=this.startWidth,Tt=this.startHeight;const Dt=et.includes("right"),Ft=et.includes("left"),Ut=et.includes("bottom"),Ht=et.includes("top");return Dt?$t=this.startWidth+dt:Ft&&($t=this.startWidth-dt),Ut?Tt=this.startHeight+kt:Ht&&(Tt=this.startHeight-kt),(et==="right"||et==="left")&&($t=this.startWidth+(Dt?dt:-dt)),(et==="top"||et==="bottom")&&(Tt=this.startHeight+(Ut?kt:-kt)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio($t,Tt,et):{width:$t,height:Tt}}applyConstraints(et,dt,kt){var $t,Tt,Dt,Ft;if(!kt){let Kt=Math.max(this.minSize.width,et),Yt=Math.max(this.minSize.height,dt);return($t=this.maxSize)!=null&&$t.width&&(Kt=Math.min(this.maxSize.width,Kt)),(Tt=this.maxSize)!=null&&Tt.height&&(Yt=Math.min(this.maxSize.height,Yt)),{width:Kt,height:Yt}}let Ut=et,Ht=dt;return Ut<this.minSize.width&&(Ut=this.minSize.width,Ht=Ut/this.aspectRatio),Ht<this.minSize.height&&(Ht=this.minSize.height,Ut=Ht*this.aspectRatio),(Dt=this.maxSize)!=null&&Dt.width&&Ut>this.maxSize.width&&(Ut=this.maxSize.width,Ht=Ut/this.aspectRatio),(Ft=this.maxSize)!=null&&Ft.height&&Ht>this.maxSize.height&&(Ht=this.maxSize.height,Ut=Ht*this.aspectRatio),{width:Ut,height:Ht}}applyAspectRatio(et,dt,kt){const $t=kt==="left"||kt==="right",Tt=kt==="top"||kt==="bottom";return $t?{width:et,height:et/this.aspectRatio}:Tt?{width:dt*this.aspectRatio,height:dt}:{width:et,height:et/this.aspectRatio}}};function canInsertNode(et,dt){const{selection:kt}=et,{$from:$t}=kt;if(kt instanceof NodeSelection){const Dt=$t.index();return $t.parent.canReplaceWith(Dt,Dt+1,dt)}let Tt=$t.depth;for(;Tt>=0;){const Dt=$t.index(Tt);if($t.node(Tt).contentMatchAt(Dt).matchType(dt))return!0;Tt-=1}return!1}var markdown_exports={};__export$7(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(et){if(!(et!=null&&et.trim()))return{};const dt={},kt=[],$t=et.replace(/["']([^"']*)["']/g,Kt=>(kt.push(Kt),`__QUOTED_${kt.length-1}__`)),Tt=$t.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(Tt){const Kt=Tt.map(Yt=>Yt.trim().slice(1));dt.class=Kt.join(" ")}const Dt=$t.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);Dt&&(dt.id=Dt[1]);const Ft=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from($t.matchAll(Ft)).forEach(([,Kt,Yt])=>{var Jt;const Zt=parseInt(((Jt=Yt.match(/__QUOTED_(\d+)__/))==null?void 0:Jt[1])||"0",10),er=kt[Zt];er&&(dt[Kt]=er.slice(1,-1))});const Ht=$t.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return Ht&&Ht.split(/\s+/).filter(Boolean).forEach(Yt=>{Yt.match(/^[a-zA-Z][\w-]*$/)&&(dt[Yt]=!0)}),dt}function serializeAttributes(et){if(!et||Object.keys(et).length===0)return"";const dt=[];return et.class&&String(et.class).split(/\s+/).filter(Boolean).forEach($t=>dt.push(`.${$t}`)),et.id&&dt.push(`#${et.id}`),Object.entries(et).forEach(([kt,$t])=>{kt==="class"||kt==="id"||($t===!0?dt.push(kt):$t!==!1&&$t!=null&&dt.push(`${kt}="${String($t)}"`))}),dt.join(" ")}function createAtomBlockMarkdownSpec(et){const{nodeName:dt,name:kt,parseAttributes:$t=parseAttributes,serializeAttributes:Tt=serializeAttributes,defaultAttributes:Dt={},requiredAttributes:Ft=[],allowedAttributes:Ut}=et,Ht=kt||dt,Kt=Yt=>{if(!Ut)return Yt;const Jt={};return Ut.forEach(Zt=>{Zt in Yt&&(Jt[Zt]=Yt[Zt])}),Jt};return{parseMarkdown:(Yt,Jt)=>{const Zt={...Dt,...Yt.attributes};return Jt.createNode(dt,Zt,[])},markdownTokenizer:{name:dt,level:"block",start(Yt){var Jt;const Zt=new RegExp(`^:::${Ht}(?:\\s|$)`,"m"),er=(Jt=Yt.match(Zt))==null?void 0:Jt.index;return er!==void 0?er:-1},tokenize(Yt,Jt,Zt){const er=new RegExp(`^:::${Ht}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),rr=Yt.match(er);if(!rr)return;const sr=rr[1]||"",nr=$t(sr);if(!Ft.find(lr=>!(lr in nr)))return{type:dt,raw:rr[0],attributes:nr}}},renderMarkdown:Yt=>{const Jt=Kt(Yt.attrs||{}),Zt=Tt(Jt),er=Zt?` {${Zt}}`:"";return`:::${Ht}${er} :::`}}}function createBlockMarkdownSpec(et){const{nodeName:dt,name:kt,getContent:$t,parseAttributes:Tt=parseAttributes,serializeAttributes:Dt=serializeAttributes,defaultAttributes:Ft={},content:Ut="block",allowedAttributes:Ht}=et,Kt=kt||dt,Yt=Jt=>{if(!Ht)return Jt;const Zt={};return Ht.forEach(er=>{er in Jt&&(Zt[er]=Jt[er])}),Zt};return{parseMarkdown:(Jt,Zt)=>{let er;if($t){const sr=$t(Jt);er=typeof sr=="string"?[{type:"text",text:sr}]:sr}else Ut==="block"?er=Zt.parseChildren(Jt.tokens||[]):er=Zt.parseInline(Jt.tokens||[]);const rr={...Ft,...Jt.attributes};return Zt.createNode(dt,rr,er)},markdownTokenizer:{name:dt,level:"block",start(Jt){var Zt;const er=new RegExp(`^:::${Kt}`,"m"),rr=(Zt=Jt.match(er))==null?void 0:Zt.index;return rr!==void 0?rr:-1},tokenize(Jt,Zt,er){var rr;const sr=new RegExp(`^:::${Kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),nr=Jt.match(sr);if(!nr)return;const[ir,lr=""]=nr,or=Tt(lr);let cr=1;const dr=ir.length;let ur="";const pr=/^:::([\w-]*)(\s.*)?/gm,mr=Jt.slice(dr);for(pr.lastIndex=0;;){const jr=pr.exec(mr);if(jr===null)break;const Rr=jr.index,br=jr[1];if(!((rr=jr[2])!=null&&rr.endsWith(":::"))){if(br)cr+=1;else if(cr-=1,cr===0){const _r=mr.slice(0,Rr);ur=_r.trim();const Mr=Jt.slice(0,dr+Rr+jr[0].length);let Pr=[];if(ur)if(Ut==="block")for(Pr=er.blockTokens(_r),Pr.forEach(Or=>{Or.text&&(!Or.tokens||Or.tokens.length===0)&&(Or.tokens=er.inlineTokens(Or.text))});Pr.length>0;){const Or=Pr[Pr.length-1];if(Or.type==="paragraph"&&(!Or.text||Or.text.trim()===""))Pr.pop();else break}else Pr=er.inlineTokens(ur);return{type:dt,raw:Mr,attributes:or,content:ur,tokens:Pr}}}}}},renderMarkdown:(Jt,Zt)=>{const er=Yt(Jt.attrs||{}),rr=Dt(er),sr=rr?` {${rr}}`:"",nr=Zt.renderChildren(Jt.content||[],`

`);return`:::${Kt}${sr}

${nr}

:::`}}}function parseShortcodeAttributes(et){if(!et.trim())return{};const dt={},kt=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let $t=kt.exec(et);for(;$t!==null;){const[,Tt,Dt,Ft]=$t;dt[Tt]=Dt||Ft,$t=kt.exec(et)}return dt}function serializeShortcodeAttributes(et){return Object.entries(et).filter(([,dt])=>dt!=null).map(([dt,kt])=>`${dt}="${kt}"`).join(" ")}function createInlineMarkdownSpec(et){const{nodeName:dt,name:kt,getContent:$t,parseAttributes:Tt=parseShortcodeAttributes,serializeAttributes:Dt=serializeShortcodeAttributes,defaultAttributes:Ft={},selfClosing:Ut=!1,allowedAttributes:Ht}=et,Kt=kt||dt,Yt=Zt=>{if(!Ht)return Zt;const er={};return Ht.forEach(rr=>{const sr=typeof rr=="string"?rr:rr.name,nr=typeof rr=="string"?void 0:rr.skipIfDefault;if(sr in Zt){const ir=Zt[sr];if(nr!==void 0&&ir===nr)return;er[sr]=ir}}),er},Jt=Kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(Zt,er)=>{const rr={...Ft,...Zt.attributes};if(Ut)return er.createNode(dt,rr);const sr=$t?$t(Zt):Zt.content||"";return sr?er.createNode(dt,rr,[er.createTextNode(sr)]):er.createNode(dt,rr,[])},markdownTokenizer:{name:dt,level:"inline",start(Zt){const er=Ut?new RegExp(`\\[${Jt}\\s*[^\\]]*\\]`):new RegExp(`\\[${Jt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Jt}\\]`),rr=Zt.match(er),sr=rr==null?void 0:rr.index;return sr!==void 0?sr:-1},tokenize(Zt,er,rr){const sr=Ut?new RegExp(`^\\[${Jt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Jt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Jt}\\]`),nr=Zt.match(sr);if(!nr)return;let ir="",lr="";if(Ut){const[,cr]=nr;lr=cr}else{const[,cr,dr]=nr;lr=cr,ir=dr||""}const or=Tt(lr.trim());return{type:dt,raw:nr[0],content:ir.trim(),attributes:or}}},renderMarkdown:Zt=>{let er="";$t?er=$t(Zt):Zt.content&&Zt.content.length>0&&(er=Zt.content.filter(ir=>ir.type==="text").map(ir=>ir.text).join(""));const rr=Yt(Zt.attrs||{}),sr=Dt(rr),nr=sr?` ${sr}`:"";return Ut?`[${Kt}${nr}]`:`[${Kt}${nr}]${er}[/${Kt}]`}}}function parseIndentedBlocks(et,dt,kt){var $t,Tt,Dt,Ft;const Ut=et.split(`
`),Ht=[];let Kt="",Yt=0;const Jt=dt.baseIndentSize||2;for(;Yt<Ut.length;){const Zt=Ut[Yt],er=Zt.match(dt.itemPattern);if(!er){if(Ht.length>0)break;if(Zt.trim()===""){Yt+=1,Kt=`${Kt}${Zt}
`;continue}else return}const rr=dt.extractItemData(er),{indentLevel:sr,mainContent:nr}=rr;Kt=`${Kt}${Zt}
`;const ir=[nr];for(Yt+=1;Yt<Ut.length;){const dr=Ut[Yt];if(dr.trim()===""){const pr=Ut.slice(Yt+1).findIndex(Rr=>Rr.trim()!=="");if(pr===-1)break;if((((Tt=($t=Ut[Yt+1+pr].match(/^(\s*)/))==null?void 0:$t[1])==null?void 0:Tt.length)||0)>sr){ir.push(dr),Kt=`${Kt}${dr}
`,Yt+=1;continue}else break}if((((Ft=(Dt=dr.match(/^(\s*)/))==null?void 0:Dt[1])==null?void 0:Ft.length)||0)>sr)ir.push(dr),Kt=`${Kt}${dr}
`,Yt+=1;else break}let lr;const or=ir.slice(1);if(or.length>0){const dr=or.map(ur=>ur.slice(sr+Jt)).join(`
`);dr.trim()&&(dt.customNestedParser?lr=dt.customNestedParser(dr):lr=kt.blockTokens(dr))}const cr=dt.createToken(rr,lr);Ht.push(cr)}if(Ht.length!==0)return{items:Ht,raw:Kt}}function renderNestedMarkdownContent(et,dt,kt,$t){if(!et||!Array.isArray(et.content))return"";const Tt=typeof kt=="function"?kt($t):kt,[Dt,...Ft]=et.content,Ut=dt.renderChildren([Dt]),Ht=[`${Tt}${Ut}`];return Ft&&Ft.length>0&&Ft.forEach(Kt=>{const Yt=dt.renderChildren([Kt]);if(Yt){const Jt=Yt.split(`
`).map(Zt=>Zt?dt.indent(Zt):"").join(`
`);Ht.push(Jt)}}),Ht.join(`
`)}function updateMarkViewAttributes(et,dt,kt={}){const{state:$t}=dt,{doc:Tt,tr:Dt}=$t,Ft=et;Tt.descendants((Ut,Ht)=>{const Kt=Dt.mapping.map(Ht),Yt=Dt.mapping.map(Ht)+Ut.nodeSize;let Jt=null;if(Ut.marks.forEach(er=>{if(er!==Ft)return!1;Jt=er}),!Jt)return;let Zt=!1;if(Object.keys(kt).forEach(er=>{kt[er]!==Jt.attrs[er]&&(Zt=!0)}),Zt){const er=et.type.create({...et.attrs,...kt});Dt.removeMark(Kt,Yt,et.type),Dt.addMark(Kt,Yt,er)}}),Dt.docChanged&&dt.view.dispatch(Dt)}var Node3=class lS extends Extendable{constructor(){super(...arguments),this.type="node"}static create(dt={}){const kt=typeof dt=="function"?dt():dt;return new lS(kt)}configure(dt){return super.configure(dt)}extend(dt){const kt=typeof dt=="function"?dt():dt;return super.extend(kt)}};function markPasteRule(et){return new PasteRule({find:et.find,handler:({state:dt,range:kt,match:$t,pasteEvent:Tt})=>{const Dt=callOrReturn(et.getAttributes,void 0,$t,Tt);if(Dt===!1||Dt===null)return null;const{tr:Ft}=dt,Ut=$t[$t.length-1],Ht=$t[0];let Kt=kt.to;if(Ut){const Yt=Ht.search(/\S/),Jt=kt.from+Ht.indexOf(Ut),Zt=Jt+Ut.length;if(getMarksBetween(kt.from,kt.to,dt.doc).filter(rr=>rr.mark.type.excluded.find(nr=>nr===et.type&&nr!==rr.mark.type)).filter(rr=>rr.to>Jt).length)return null;Zt<kt.to&&Ft.delete(Zt,kt.to),Jt>kt.from&&Ft.delete(kt.from+Yt,Jt),Kt=kt.from+Yt+Ut.length,Ft.addMark(kt.from+Yt,Kt,et.type.create(Dt||{})),Ft.removeStoredMark(et.type)}}})}function nodePasteRule(et){return new PasteRule({find:et.find,handler({match:dt,chain:kt,range:$t,pasteEvent:Tt}){const Dt=callOrReturn(et.getAttributes,void 0,dt,Tt),Ft=callOrReturn(et.getContent,void 0,Dt);if(Dt===!1||Dt===null)return null;const Ut={type:et.type.name,attrs:Dt};Ft&&(Ut.content=Ft),dt.input&&kt().deleteRange($t).insertContentAt($t.from,Ut)}})}var react=function et(dt,kt){if(dt===kt)return!0;if(dt&&kt&&typeof dt=="object"&&typeof kt=="object"){if(dt.constructor!==kt.constructor)return!1;var $t,Tt,Dt;if(Array.isArray(dt)){if($t=dt.length,$t!=kt.length)return!1;for(Tt=$t;Tt--!==0;)if(!et(dt[Tt],kt[Tt]))return!1;return!0}if(dt instanceof Map&&kt instanceof Map){if(dt.size!==kt.size)return!1;for(Tt of dt.entries())if(!kt.has(Tt[0]))return!1;for(Tt of dt.entries())if(!et(Tt[1],kt.get(Tt[0])))return!1;return!0}if(dt instanceof Set&&kt instanceof Set){if(dt.size!==kt.size)return!1;for(Tt of dt.entries())if(!kt.has(Tt[0]))return!1;return!0}if(ArrayBuffer.isView(dt)&&ArrayBuffer.isView(kt)){if($t=dt.length,$t!=kt.length)return!1;for(Tt=$t;Tt--!==0;)if(dt[Tt]!==kt[Tt])return!1;return!0}if(dt.constructor===RegExp)return dt.source===kt.source&&dt.flags===kt.flags;if(dt.valueOf!==Object.prototype.valueOf)return dt.valueOf()===kt.valueOf();if(dt.toString!==Object.prototype.toString)return dt.toString()===kt.toString();if(Dt=Object.keys(dt),$t=Dt.length,$t!==Object.keys(kt).length)return!1;for(Tt=$t;Tt--!==0;)if(!Object.prototype.hasOwnProperty.call(kt,Dt[Tt]))return!1;for(Tt=$t;Tt--!==0;){var Ft=Dt[Tt];if(!(Ft==="_owner"&&dt.$$typeof)&&!et(dt[Ft],kt[Ft]))return!1}return!0}return dt!==dt&&kt!==kt};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is$6(et,dt){return et===dt&&(et!==0||1/et===1/dt)||et!==et&&dt!==dt}var objectIs=typeof Object.is=="function"?Object.is:is$6,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(et,dt,kt,$t,Tt){var Dt=useRef(null);if(Dt.current===null){var Ft={hasValue:!1,value:null};Dt.current=Ft}else Ft=Dt.current;Dt=useMemo(function(){function Ht(er){if(!Kt){if(Kt=!0,Yt=er,er=$t(er),Tt!==void 0&&Ft.hasValue){var rr=Ft.value;if(Tt(rr,er))return Jt=rr}return Jt=er}if(rr=Jt,objectIs(Yt,er))return rr;var sr=$t(er);return Tt!==void 0&&Tt(rr,sr)?(Yt=er,rr):(Yt=er,Jt=sr)}var Kt=!1,Yt,Jt,Zt=kt===void 0?null:kt;return[function(){return Ht(dt())},Zt===null?void 0:function(){return Ht(Zt())}]},[dt,kt,$t,Tt]);var Ut=useSyncExternalStore(et,Dt[0],Dt[1]);return useEffect(function(){Ft.hasValue=!0,Ft.value=Ut},[Ut]),useDebugValue(Ut),Ut};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...et)=>dt=>{et.forEach(kt=>{typeof kt=="function"?kt(dt):kt&&(kt.current=dt)})},Portals=({contentComponent:et})=>{const dt=shimExports.useSyncExternalStore(et.subscribe,et.getSnapshot,et.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(dt)})};function getInstance(){const et=new Set;let dt={};return{subscribe(kt){return et.add(kt),()=>{et.delete(kt)}},getSnapshot(){return dt},getServerSnapshot(){return dt},setRenderer(kt,$t){dt={...dt,[kt]:ReactDOM.createPortal($t.reactElement,$t.element,kt)},et.forEach(Tt=>Tt())},removeRenderer(kt){const $t={...dt};delete $t[kt],dt=$t,et.forEach(Tt=>Tt())}}}var PureEditorContent=class extends React$2.Component{constructor(et){var dt;super(et),this.editorContentRef=React$2.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((dt=et.editor)!=null&&dt.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const et=this.props.editor;if(et&&!et.isDestroyed&&et.options.element){if(et.contentComponent)return;const dt=this.editorContentRef.current;dt.append(et.view.dom),et.setOptions({element:dt}),et.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=et.contentComponent.subscribe(()=>{this.setState(kt=>kt.hasContentComponentInitialized?kt:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),et.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var et;const dt=this.props.editor;if(dt){this.initialized=!1,dt.isDestroyed||dt.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),dt.contentComponent=null;try{if(!((et=dt.view.dom)!=null&&et.firstChild))return;const kt=document.createElement("div");kt.append(dt.view.dom),dt.setOptions({element:kt})}catch{}}}render(){const{editor:et,innerRef:dt,...kt}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(dt,this.editorContentRef),...kt}),(et==null?void 0:et.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:et.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((et,dt)=>{const kt=React$2.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[et.editor]);return React$2.createElement(PureEditorContent,{key:kt,innerRef:dt,...et})}),EditorContent=React$2.memo(EditorContentWithKey),useIsomorphicLayoutEffect$7=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(et){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=et,this.lastSnapshot={editor:et,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(et){return this.subscribers.add(et),()=>{this.subscribers.delete(et)}}watch(et){if(this.editor=et,this.editor){const dt=()=>{this.transactionNumber+=1,this.subscribers.forEach($t=>$t())},kt=this.editor;return kt.on("transaction",dt),()=>{kt.off("transaction",dt)}}}};function useEditorState(et){var dt;const[kt]=reactExports.useState(()=>new EditorStateManager(et.editor)),$t=withSelectorExports.useSyncExternalStoreWithSelector(kt.subscribe,kt.getSnapshot,kt.getServerSnapshot,et.selector,(dt=et.equalityFn)!=null?dt:deepEqual);return useIsomorphicLayoutEffect$7(()=>kt.watch(et.editor),[et.editor,kt]),reactExports.useDebugValue($t),$t}var isDev=!1,isSSR$6=typeof window>"u",isNext=isSSR$6||!!(typeof window<"u"&&window.next),EditorInstanceManager=class cS{constructor(dt){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=dt,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(dt){this.editor=dt,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(kt=>kt())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR$6||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR$6&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const dt={...this.options.current,onBeforeCreate:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onBeforeCreate)==null?void 0:Dt.call(Tt,...$t)},onBlur:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onBlur)==null?void 0:Dt.call(Tt,...$t)},onCreate:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onCreate)==null?void 0:Dt.call(Tt,...$t)},onDestroy:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onDestroy)==null?void 0:Dt.call(Tt,...$t)},onFocus:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onFocus)==null?void 0:Dt.call(Tt,...$t)},onSelectionUpdate:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onSelectionUpdate)==null?void 0:Dt.call(Tt,...$t)},onTransaction:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onTransaction)==null?void 0:Dt.call(Tt,...$t)},onUpdate:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onUpdate)==null?void 0:Dt.call(Tt,...$t)},onContentError:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onContentError)==null?void 0:Dt.call(Tt,...$t)},onDrop:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onDrop)==null?void 0:Dt.call(Tt,...$t)},onPaste:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onPaste)==null?void 0:Dt.call(Tt,...$t)},onDelete:(...$t)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onDelete)==null?void 0:Dt.call(Tt,...$t)}};return new Editor(dt)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(dt){return this.subscriptions.add(dt),()=>{this.subscriptions.delete(dt)}}static compareOptions(dt,kt){return Object.keys(dt).every($t=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes($t)?!0:$t==="extensions"&&dt.extensions&&kt.extensions?dt.extensions.length!==kt.extensions.length?!1:dt.extensions.every((Tt,Dt)=>{var Ft;return Tt===((Ft=kt.extensions)==null?void 0:Ft[Dt])}):dt[$t]===kt[$t])}onRender(dt){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&dt.length===0?cS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(dt),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(dt){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=dt;return}if(this.previousDeps.length===dt.length&&this.previousDeps.every(($t,Tt)=>$t===dt[Tt]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=dt}scheduleDestroy(){const dt=this.instanceId,kt=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===dt){kt&&kt.setOptions(this.options.current);return}kt&&!kt.isDestroyed&&(kt.destroy(),this.instanceId===dt&&this.setEditor(null))},1)}};function useEditor(et={},dt=[]){const kt=reactExports.useRef(et);kt.current=et;const[$t]=reactExports.useState(()=>new EditorInstanceManager(kt)),Tt=shimExports.useSyncExternalStore($t.subscribe,$t.getEditor,$t.getServerSnapshot);return reactExports.useDebugValue(Tt),reactExports.useEffect($t.onRender(dt)),useEditorState({editor:Tt,selector:({transactionNumber:Dt})=>et.shouldRerenderOnTransaction===!1||et.shouldRerenderOnTransaction===void 0?null:et.immediatelyRender&&Dt===0?0:Dt+1}),Tt}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React$2.forwardRef((et,dt)=>{const{onDragStart:kt}=useReactNodeView(),$t=et.as||"div";return jsxRuntimeExports.jsx($t,{...et,ref:dt,"data-node-view-wrapper":"",onDragStart:kt,style:{whiteSpace:"normal",...et.style}})});React$2.createContext({markViewContentRef:()=>{}});var h$1=(et,dt)=>{if(et==="slot")return 0;if(et instanceof Function)return et(dt);const{children:kt,...$t}=dt??{};if(et==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[et,$t,kt]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:et}){return h$1("blockquote",{...mergeAttributes(this.options.HTMLAttributes,et),children:h$1("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:et})=>et.wrapIn(this.name),toggleBlockquote:()=>({commands:et})=>et.toggleWrap(this.name),unsetBlockquote:()=>({commands:et})=>et.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$d=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:et=>et.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:et=>et.type.name===this.name},{style:"font-weight",getAttrs:et=>/^(bold(er)?|[5-9]\d{2,})$/.test(et)&&null}]},renderHTML({HTMLAttributes:et}){return h$1("strong",{...mergeAttributes(this.options.HTMLAttributes,et),children:h$1("slot",{})})},addCommands(){return{setBold:()=>({commands:et})=>et.setMark(this.name),toggleBold:()=>({commands:et})=>et.toggleMark(this.name),unsetBold:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:et}){return["code",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setCode:()=>({commands:et})=>et.setMark(this.name),toggleCode:()=>({commands:et})=>et.toggleMark(this.name),unsetCode:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:et=>{var dt;const{languageClassPrefix:kt}=this.options;if(!kt)return null;const Dt=[...((dt=et.firstElementChild)==null?void 0:dt.classList)||[]].filter(Ft=>Ft.startsWith(kt)).map(Ft=>Ft.replace(kt,""))[0];return Dt||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:et,HTMLAttributes:dt}){return["pre",mergeAttributes(this.options.HTMLAttributes,dt),["code",{class:et.attrs.language?this.options.languageClassPrefix+et.attrs.language:null},0]]},addCommands(){return{setCodeBlock:et=>({commands:dt})=>dt.setNode(this.name,et),toggleCodeBlock:et=>({commands:dt})=>dt.toggleNode(this.name,"paragraph",et)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:et,$anchor:dt}=this.editor.state.selection,kt=dt.pos===1;return!et||dt.parent.type.name!==this.name?!1:kt||!dt.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:et})=>{var dt;if(!this.options.enableTabIndentation)return!1;const kt=(dt=this.options.tabSize)!=null?dt:DEFAULT_TAB_SIZE,{state:$t}=et,{selection:Tt}=$t,{$from:Dt,empty:Ft}=Tt;if(Dt.parent.type!==this.type)return!1;const Ut=" ".repeat(kt);return Ft?et.commands.insertContent(Ut):et.commands.command(({tr:Ht})=>{const{from:Kt,to:Yt}=Tt,er=$t.doc.textBetween(Kt,Yt,`
`,`
`).split(`
`).map(rr=>Ut+rr).join(`
`);return Ht.replaceWith(Kt,Yt,$t.schema.text(er)),!0})},"Shift-Tab":({editor:et})=>{var dt;if(!this.options.enableTabIndentation)return!1;const kt=(dt=this.options.tabSize)!=null?dt:DEFAULT_TAB_SIZE,{state:$t}=et,{selection:Tt}=$t,{$from:Dt,empty:Ft}=Tt;return Dt.parent.type!==this.type?!1:Ft?et.commands.command(({tr:Ut})=>{var Ht;const{pos:Kt}=Dt,Yt=Dt.start(),Jt=Dt.end(),er=$t.doc.textBetween(Yt,Jt,`
`,`
`).split(`
`);let rr=0,sr=0;const nr=Kt-Yt;for(let ur=0;ur<er.length;ur+=1){if(sr+er[ur].length>=nr){rr=ur;break}sr+=er[ur].length+1}const lr=((Ht=er[rr].match(/^ */))==null?void 0:Ht[0])||"",or=Math.min(lr.length,kt);if(or===0)return!0;let cr=Yt;for(let ur=0;ur<rr;ur+=1)cr+=er[ur].length+1;return Ut.delete(cr,cr+or),Kt-cr<=or&&Ut.setSelection(TextSelection.create(Ut.doc,cr)),!0}):et.commands.command(({tr:Ut})=>{const{from:Ht,to:Kt}=Tt,Zt=$t.doc.textBetween(Ht,Kt,`
`,`
`).split(`
`).map(er=>{var rr;const sr=((rr=er.match(/^ */))==null?void 0:rr[0])||"",nr=Math.min(sr.length,kt);return er.slice(nr)}).join(`
`);return Ut.replaceWith(Ht,Kt,$t.schema.text(Zt)),!0})},Enter:({editor:et})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:dt}=et,{selection:kt}=dt,{$from:$t,empty:Tt}=kt;if(!Tt||$t.parent.type!==this.type)return!1;const Dt=$t.parentOffset===$t.parent.nodeSize-2,Ft=$t.parent.textContent.endsWith(`

`);return!Dt||!Ft?!1:et.chain().command(({tr:Ut})=>(Ut.delete($t.pos-2,$t.pos),!0)).exitCode().run()},ArrowDown:({editor:et})=>{if(!this.options.exitOnArrowDown)return!1;const{state:dt}=et,{selection:kt,doc:$t}=dt,{$from:Tt,empty:Dt}=kt;if(!Dt||Tt.parent.type!==this.type||!(Tt.parentOffset===Tt.parent.nodeSize-2))return!1;const Ut=Tt.after();return Ut===void 0?!1:$t.nodeAt(Ut)?et.commands.command(({tr:Kt})=>(Kt.setSelection(Selection.near($t.resolve(Ut))),!0)):et.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:et=>({language:et[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:et=>({language:et[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(et,dt)=>{if(!dt.clipboardData||this.editor.isActive(this.type.name))return!1;const kt=dt.clipboardData.getData("text/plain"),$t=dt.clipboardData.getData("vscode-editor-data"),Tt=$t?JSON.parse($t):void 0,Dt=Tt==null?void 0:Tt.mode;if(!kt||!Dt)return!1;const{tr:Ft,schema:Ut}=et.state,Ht=Ut.text(kt.replace(/\r\n?/g,`
`));return Ft.replaceSelectionWith(this.type.create({language:Dt},Ht)),Ft.selection.$from.parent.type!==this.type&&Ft.setSelection(TextSelection.near(Ft.doc.resolve(Math.max(0,Ft.selection.from-2)))),Ft.setMeta("paste",!0),et.dispatch(Ft),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:et}){return["br",mergeAttributes(this.options.HTMLAttributes,et)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:et,chain:dt,state:kt,editor:$t})=>et.first([()=>et.exitCode(),()=>et.command(()=>{const{selection:Tt,storedMarks:Dt}=kt;if(Tt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Ft}=this.options,{splittableMarks:Ut}=$t.extensionManager,Ht=Dt||Tt.$to.parentOffset&&Tt.$from.marks();return dt().insertContent({type:this.name}).command(({tr:Kt,dispatch:Yt})=>{if(Yt&&Ht&&Ft){const Jt=Ht.filter(Zt=>Ut.includes(Zt.type.name));Kt.ensureMarks(Jt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(et=>({tag:`h${et}`,attrs:{level:et}}))},renderHTML({node:et,HTMLAttributes:dt}){return[`h${this.options.levels.includes(et.attrs.level)?et.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,dt),0]},addCommands(){return{setHeading:et=>({commands:dt})=>this.options.levels.includes(et.level)?dt.setNode(this.name,et):!1,toggleHeading:et=>({commands:dt})=>this.options.levels.includes(et.level)?dt.toggleNode(this.name,"paragraph",et):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((et,dt)=>({...et,[`Mod-Alt-${dt}`]:()=>this.editor.commands.toggleHeading({level:dt})}),{})},addInputRules(){return this.options.levels.map(et=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${et}})\\s$`),type:this.type,getAttributes:{level:et}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:et}){return["hr",mergeAttributes(this.options.HTMLAttributes,et)]},addCommands(){return{setHorizontalRule:()=>({chain:et,state:dt})=>{if(!canInsertNode(dt,dt.schema.nodes[this.name]))return!1;const{selection:kt}=dt,{$to:$t}=kt,Tt=et();return isNodeSelection(kt)?Tt.insertContentAt($t.pos,{type:this.name}):Tt.insertContent({type:this.name}),Tt.command(({state:Dt,tr:Ft,dispatch:Ut})=>{if(Ut){const{$to:Ht}=Ft.selection,Kt=Ht.end();if(Ht.nodeAfter)Ht.nodeAfter.isTextblock?Ft.setSelection(TextSelection.create(Ft.doc,Ht.pos+1)):Ht.nodeAfter.isBlock?Ft.setSelection(NodeSelection.create(Ft.doc,Ht.pos)):Ft.setSelection(TextSelection.create(Ft.doc,Ht.pos));else{const Yt=Dt.schema.nodes[this.options.nextNodeType]||Ht.parent.type.contentMatch.defaultType,Jt=Yt==null?void 0:Yt.create();Jt&&(Ft.insert(Kt,Jt),Ft.setSelection(TextSelection.create(Ft.doc,Kt+1)))}Ft.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),index_default$c=HorizontalRule,starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:et=>et.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:et=>et.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:et}){return["em",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setItalic:()=>({commands:et})=>et.setMark(this.name),toggleItalic:()=>({commands:et})=>et.toggleMark(this.name),unsetItalic:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme$r="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(et,dt){return et in dt||(dt[et]=[]),dt[et]}function addToGroups(et,dt,kt){dt[numeric]&&(dt[asciinumeric]=!0,dt[alphanumeric]=!0),dt[ascii]&&(dt[asciinumeric]=!0,dt[alpha]=!0),dt[asciinumeric]&&(dt[alphanumeric]=!0),dt[alpha]&&(dt[alphanumeric]=!0),dt[alphanumeric]&&(dt[domain]=!0),dt[emoji]&&(dt[domain]=!0);for(const $t in dt){const Tt=registerGroup($t,kt);Tt.indexOf(et)<0&&Tt.push(et)}}function flagsForToken(et,dt){const kt={};for(const $t in dt)dt[$t].indexOf(et)>=0&&(kt[$t]=!0);return kt}function State(et=null){this.j={},this.jr=[],this.jd=null,this.t=et}State.groups={};State.prototype={accepts(){return!!this.t},go(et){const dt=this,kt=dt.j[et];if(kt)return kt;for(let $t=0;$t<dt.jr.length;$t++){const Tt=dt.jr[$t][0],Dt=dt.jr[$t][1];if(Dt&&Tt.test(et))return Dt}return dt.jd},has(et,dt=!1){return dt?et in this.j:!!this.go(et)},ta(et,dt,kt,$t){for(let Tt=0;Tt<et.length;Tt++)this.tt(et[Tt],dt,kt,$t)},tr(et,dt,kt,$t){$t=$t||State.groups;let Tt;return dt&&dt.j?Tt=dt:(Tt=new State(dt),kt&&$t&&addToGroups(dt,kt,$t)),this.jr.push([et,Tt]),Tt},ts(et,dt,kt,$t){let Tt=this;const Dt=et.length;if(!Dt)return Tt;for(let Ft=0;Ft<Dt-1;Ft++)Tt=Tt.tt(et[Ft]);return Tt.tt(et[Dt-1],dt,kt,$t)},tt(et,dt,kt,$t){$t=$t||State.groups;const Tt=this;if(dt&&dt.j)return Tt.j[et]=dt,dt;const Dt=dt;let Ft,Ut=Tt.go(et);if(Ut?(Ft=new State,Object.assign(Ft.j,Ut.j),Ft.jr.push.apply(Ft.jr,Ut.jr),Ft.jd=Ut.jd,Ft.t=Ut.t):Ft=new State,Dt){if($t)if(Ft.t&&typeof Ft.t=="string"){const Ht=Object.assign(flagsForToken(Ft.t,$t),kt);addToGroups(Dt,Ht,$t)}else kt&&addToGroups(Dt,kt,$t);Ft.t=Dt}return Tt.j[et]=Ft,Ft}};const ta=(et,dt,kt,$t,Tt)=>et.ta(dt,kt,$t,Tt),tr=(et,dt,kt,$t,Tt)=>et.tr(dt,kt,$t,Tt),ts$6=(et,dt,kt,$t,Tt)=>et.ts(dt,kt,$t,Tt),tt$1=(et,dt,kt,$t,Tt)=>et.tt(dt,kt,$t,Tt),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(et=[]){const dt={};State.groups=dt;const kt=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt$1(kt,"'",APOSTROPHE),tt$1(kt,"{",OPENBRACE),tt$1(kt,"}",CLOSEBRACE),tt$1(kt,"[",OPENBRACKET),tt$1(kt,"]",CLOSEBRACKET),tt$1(kt,"(",OPENPAREN),tt$1(kt,")",CLOSEPAREN),tt$1(kt,"<",OPENANGLEBRACKET),tt$1(kt,">",CLOSEANGLEBRACKET),tt$1(kt,"",FULLWIDTHLEFTPAREN),tt$1(kt,"",FULLWIDTHRIGHTPAREN),tt$1(kt,"",LEFTCORNERBRACKET),tt$1(kt,"",RIGHTCORNERBRACKET),tt$1(kt,"",LEFTWHITECORNERBRACKET),tt$1(kt,"",RIGHTWHITECORNERBRACKET),tt$1(kt,"",FULLWIDTHLESSTHAN),tt$1(kt,"",FULLWIDTHGREATERTHAN),tt$1(kt,"&",AMPERSAND),tt$1(kt,"*",ASTERISK),tt$1(kt,"@",AT),tt$1(kt,"`",BACKTICK),tt$1(kt,"^",CARET),tt$1(kt,":",COLON),tt$1(kt,",",COMMA),tt$1(kt,"$",DOLLAR),tt$1(kt,".",DOT),tt$1(kt,"=",EQUALS),tt$1(kt,"!",EXCLAMATION),tt$1(kt,"-",HYPHEN),tt$1(kt,"%",PERCENT),tt$1(kt,"|",PIPE),tt$1(kt,"+",PLUS),tt$1(kt,"#",POUND),tt$1(kt,"?",QUERY),tt$1(kt,'"',QUOTE),tt$1(kt,"/",SLASH),tt$1(kt,";",SEMI),tt$1(kt,"~",TILDE),tt$1(kt,"_",UNDERSCORE),tt$1(kt,"\\",BACKSLASH),tt$1(kt,"",FULLWIDTHMIDDLEDOT);const $t=tr(kt,DIGIT,NUM,{[numeric]:!0});tr($t,DIGIT,$t);const Tt=tr($t,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),Dt=tr($t,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),Ft=tr(kt,ASCII_LETTER,WORD,{[ascii]:!0});tr(Ft,DIGIT,Tt),tr(Ft,ASCII_LETTER,Ft),tr(Tt,DIGIT,Tt),tr(Tt,ASCII_LETTER,Tt);const Ut=tr(kt,LETTER,UWORD,{[alpha]:!0});tr(Ut,ASCII_LETTER),tr(Ut,DIGIT,Dt),tr(Ut,LETTER,Ut),tr(Dt,DIGIT,Dt),tr(Dt,ASCII_LETTER),tr(Dt,LETTER,Dt);const Ht=tt$1(kt,LF,NL,{[whitespace]:!0}),Kt=tt$1(kt,CR,WS,{[whitespace]:!0}),Yt=tr(kt,SPACE,WS,{[whitespace]:!0});tt$1(kt,OBJECT_REPLACEMENT,Yt),tt$1(Kt,LF,Ht),tt$1(Kt,OBJECT_REPLACEMENT,Yt),tr(Kt,SPACE,Yt),tt$1(Yt,CR),tt$1(Yt,LF),tr(Yt,SPACE,Yt),tt$1(Yt,OBJECT_REPLACEMENT,Yt);const Jt=tr(kt,EMOJI,EMOJI$1,{[emoji]:!0});tt$1(Jt,"#"),tr(Jt,EMOJI,Jt),tt$1(Jt,EMOJI_VARIATION,Jt);const Zt=tt$1(Jt,EMOJI_JOINER);tt$1(Zt,"#"),tr(Zt,EMOJI,Jt);const er=[[ASCII_LETTER,Ft],[DIGIT,Tt]],rr=[[ASCII_LETTER,null],[LETTER,Ut],[DIGIT,Dt]];for(let sr=0;sr<tlds.length;sr++)fastts(kt,tlds[sr],TLD,WORD,er);for(let sr=0;sr<utlds.length;sr++)fastts(kt,utlds[sr],UTLD,UWORD,rr);addToGroups(TLD,{tld:!0,ascii:!0},dt),addToGroups(UTLD,{utld:!0,alpha:!0},dt),fastts(kt,"file",SCHEME,WORD,er),fastts(kt,"mailto",SCHEME,WORD,er),fastts(kt,"http",SLASH_SCHEME,WORD,er),fastts(kt,"https",SLASH_SCHEME,WORD,er),fastts(kt,"ftp",SLASH_SCHEME,WORD,er),fastts(kt,"ftps",SLASH_SCHEME,WORD,er),addToGroups(SCHEME,{scheme:!0,ascii:!0},dt),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},dt),et=et.sort((sr,nr)=>sr[0]>nr[0]?1:-1);for(let sr=0;sr<et.length;sr++){const nr=et[sr][0],lr=et[sr][1]?{[scheme$r]:!0}:{[slashscheme]:!0};nr.indexOf("-")>=0?lr[domain]=!0:ASCII_LETTER.test(nr)?DIGIT.test(nr)?lr[asciinumeric]=!0:lr[ascii]=!0:lr[numeric]=!0,ts$6(kt,nr,nr,lr)}return ts$6(kt,"localhost",LOCALHOST,{ascii:!0}),kt.jd=new State(SYM),{start:kt,tokens:Object.assign({groups:dt},tk)}}function run$1(et,dt){const kt=stringToArray$1(dt.replace(/[A-Z]/g,Ut=>Ut.toLowerCase())),$t=kt.length,Tt=[];let Dt=0,Ft=0;for(;Ft<$t;){let Ut=et,Ht=null,Kt=0,Yt=null,Jt=-1,Zt=-1;for(;Ft<$t&&(Ht=Ut.go(kt[Ft]));)Ut=Ht,Ut.accepts()?(Jt=0,Zt=0,Yt=Ut):Jt>=0&&(Jt+=kt[Ft].length,Zt++),Kt+=kt[Ft].length,Dt+=kt[Ft].length,Ft++;Dt-=Jt,Ft-=Zt,Kt-=Jt,Tt.push({t:Yt.t,v:dt.slice(Dt-Kt,Dt),s:Dt-Kt,e:Dt})}return Tt}function stringToArray$1(et){const dt=[],kt=et.length;let $t=0;for(;$t<kt;){let Tt=et.charCodeAt($t),Dt,Ft=Tt<55296||Tt>56319||$t+1===kt||(Dt=et.charCodeAt($t+1))<56320||Dt>57343?et[$t]:et.slice($t,$t+2);dt.push(Ft),$t+=Ft.length}return dt}function fastts(et,dt,kt,$t,Tt){let Dt;const Ft=dt.length;for(let Ut=0;Ut<Ft-1;Ut++){const Ht=dt[Ut];et.j[Ht]?Dt=et.j[Ht]:(Dt=new State($t),Dt.jr=Tt.slice(),et.j[Ht]=Dt),et=Dt}return Dt=new State(kt),Dt.jr=Tt.slice(),et.j[dt[Ft-1]]=Dt,Dt}function decodeTlds(et){const dt=[],kt=[];let $t=0,Tt="0123456789";for(;$t<et.length;){let Dt=0;for(;Tt.indexOf(et[$t+Dt])>=0;)Dt++;if(Dt>0){dt.push(kt.join(""));for(let Ft=parseInt(et.substring($t,$t+Dt),10);Ft>0;Ft--)kt.pop();$t+=Dt}else kt.push(et[$t]),$t++}return dt}const defaults$5={defaultProtocol:"http",events:null,format:noop$a,formatHref:noop$a,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(et,dt=null){let kt=Object.assign({},defaults$5);et&&(kt=Object.assign(kt,et instanceof Options?et.o:et));const $t=kt.ignoreTags,Tt=[];for(let Dt=0;Dt<$t.length;Dt++)Tt.push($t[Dt].toUpperCase());this.o=kt,dt&&(this.defaultRender=dt),this.ignoreTags=Tt}Options.prototype={o:defaults$5,ignoreTags:[],defaultRender(et){return et},check(et){return this.get("validate",et.toString(),et)},get(et,dt,kt){const $t=dt!=null;let Tt=this.o[et];return Tt&&(typeof Tt=="object"?(Tt=kt.t in Tt?Tt[kt.t]:defaults$5[et],typeof Tt=="function"&&$t&&(Tt=Tt(dt,kt))):typeof Tt=="function"&&$t&&(Tt=Tt(dt,kt.t,kt)),Tt)},getObj(et,dt,kt){let $t=this.o[et];return typeof $t=="function"&&dt!=null&&($t=$t(dt,kt.t,kt)),$t},render(et){const dt=et.render(this);return(this.get("render",null,et)||this.defaultRender)(dt,et.t,et)}};function noop$a(et){return et}function MultiToken(et,dt){this.t="token",this.v=et,this.tk=dt}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(et){return this.toString()},toFormattedString(et){const dt=this.toString(),kt=et.get("truncate",dt,this),$t=et.get("format",dt,this);return kt&&$t.length>kt?$t.substring(0,kt)+"":$t},toFormattedHref(et){return et.get("formatHref",this.toHref(et.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(et=defaults$5.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(et),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(et){return{type:this.t,value:this.toFormattedString(et),isLink:this.isLink,href:this.toFormattedHref(et),start:this.startIndex(),end:this.endIndex()}},validate(et){return et.get("validate",this.toString(),this)},render(et){const dt=this,kt=this.toHref(et.get("defaultProtocol")),$t=et.get("formatHref",kt,this),Tt=et.get("tagName",kt,dt),Dt=this.toFormattedString(et),Ft={},Ut=et.get("className",kt,dt),Ht=et.get("target",kt,dt),Kt=et.get("rel",kt,dt),Yt=et.getObj("attributes",kt,dt),Jt=et.getObj("events",kt,dt);return Ft.href=$t,Ut&&(Ft.class=Ut),Ht&&(Ft.target=Ht),Kt&&(Ft.rel=Kt),Yt&&Object.assign(Ft,Yt),{tagName:Tt,attributes:Ft,content:Dt,eventListeners:Jt}}};function createTokenClass(et,dt){class kt extends MultiToken{constructor(Tt,Dt){super(Tt,Dt),this.t=et}}for(const $t in dt)kt.prototype[$t]=dt[$t];return kt.t=et,kt}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$1=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(et=defaults$5.defaultProtocol){return this.hasProtocol()?this.v:`${et}://${this.v}`},hasProtocol(){const et=this.tk;return et.length>=2&&et[0].t!==LOCALHOST&&et[1].t===COLON}}),makeState=et=>new State(et);function init$1({groups:et}){const dt=et.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),kt=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],$t=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],Tt=makeState(),Dt=tt$1(Tt,TILDE);ta(Dt,$t,Dt),ta(Dt,et.domain,Dt);const Ft=makeState(),Ut=makeState(),Ht=makeState();ta(Tt,et.domain,Ft),ta(Tt,et.scheme,Ut),ta(Tt,et.slashscheme,Ht),ta(Ft,$t,Dt),ta(Ft,et.domain,Ft);const Kt=tt$1(Ft,AT);tt$1(Dt,AT,Kt),tt$1(Ut,AT,Kt),tt$1(Ht,AT,Kt);const Yt=tt$1(Dt,DOT);ta(Yt,$t,Dt),ta(Yt,et.domain,Dt);const Jt=makeState();ta(Kt,et.domain,Jt),ta(Jt,et.domain,Jt);const Zt=tt$1(Jt,DOT);ta(Zt,et.domain,Jt);const er=makeState(Email);ta(Zt,et.tld,er),ta(Zt,et.utld,er),tt$1(Kt,LOCALHOST,er);const rr=tt$1(Jt,HYPHEN);tt$1(rr,HYPHEN,rr),ta(rr,et.domain,Jt),ta(er,et.domain,Jt),tt$1(er,DOT,Zt),tt$1(er,HYPHEN,rr);const sr=tt$1(er,COLON);ta(sr,et.numeric,Email);const nr=tt$1(Ft,HYPHEN),ir=tt$1(Ft,DOT);tt$1(nr,HYPHEN,nr),ta(nr,et.domain,Ft),ta(ir,$t,Dt),ta(ir,et.domain,Ft);const lr=makeState(Url);ta(ir,et.tld,lr),ta(ir,et.utld,lr),ta(lr,et.domain,Ft),ta(lr,$t,Dt),tt$1(lr,DOT,ir),tt$1(lr,HYPHEN,nr),tt$1(lr,AT,Kt);const or=tt$1(lr,COLON),cr=makeState(Url);ta(or,et.numeric,cr);const dr=makeState(Url),ur=makeState();ta(dr,dt,dr),ta(dr,kt,ur),ta(ur,dt,dr),ta(ur,kt,ur),tt$1(lr,SLASH,dr),tt$1(cr,SLASH,dr);const pr=tt$1(Ut,COLON),mr=tt$1(Ht,COLON),jr=tt$1(mr,SLASH),Rr=tt$1(jr,SLASH);ta(Ut,et.domain,Ft),tt$1(Ut,DOT,ir),tt$1(Ut,HYPHEN,nr),ta(Ht,et.domain,Ft),tt$1(Ht,DOT,ir),tt$1(Ht,HYPHEN,nr),ta(pr,et.domain,dr),tt$1(pr,SLASH,dr),tt$1(pr,QUERY,dr),ta(Rr,et.domain,dr),ta(Rr,dt,dr),tt$1(Rr,SLASH,dr);const br=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let _r=0;_r<br.length;_r++){const[Mr,Pr]=br[_r],Or=tt$1(dr,Mr);tt$1(ur,Mr,Or),tt$1(Or,Pr,dr);const kr=makeState(Url);ta(Or,dt,kr);const Tr=makeState();ta(Or,kt),ta(kr,dt,kr),ta(kr,kt,Tr),ta(Tr,dt,kr),ta(Tr,kt,Tr),tt$1(kr,Pr,dr),tt$1(Tr,Pr,dr)}return tt$1(Tt,LOCALHOST,lr),tt$1(Tt,NL,Nl),{start:Tt,tokens:tk}}function run(et,dt,kt){let $t=kt.length,Tt=0,Dt=[],Ft=[];for(;Tt<$t;){let Ut=et,Ht=null,Kt=null,Yt=0,Jt=null,Zt=-1;for(;Tt<$t&&!(Ht=Ut.go(kt[Tt].t));)Ft.push(kt[Tt++]);for(;Tt<$t&&(Kt=Ht||Ut.go(kt[Tt].t));)Ht=null,Ut=Kt,Ut.accepts()?(Zt=0,Jt=Ut):Zt>=0&&Zt++,Tt++,Yt++;if(Zt<0)Tt-=Yt,Tt<$t&&(Ft.push(kt[Tt]),Tt++);else{Ft.length>0&&(Dt.push(initMultiToken(Text$1,dt,Ft)),Ft=[]),Tt-=Zt,Yt-=Zt;const er=Jt.t,rr=kt.slice(Tt-Yt,Tt);Dt.push(initMultiToken(er,dt,rr))}}return Ft.length>0&&Dt.push(initMultiToken(Text$1,dt,Ft)),Dt}function initMultiToken(et,dt,kt){const $t=kt[0].s,Tt=kt[kt.length-1].e,Dt=dt.slice($t,Tt);return new et(Dt,kt)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(et,dt=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${et}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(et))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([et,dt])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let et=0;et<INIT.tokenQueue.length;et++)INIT.tokenQueue[et][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let et=0;et<INIT.pluginQueue.length;et++)INIT.pluginQueue[et][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(et){return INIT.initialized||init(),run(INIT.parser.start,et,run$1(INIT.scanner.start,et))}tokenize.scan=run$1;function find$1(et,dt=null,kt=null){if(dt&&typeof dt=="object"){if(kt)throw Error(`linkifyjs: Invalid link type ${dt}; must be a string`);kt=dt,dt=null}const $t=new Options(kt),Tt=tokenize(et),Dt=[];for(let Ft=0;Ft<Tt.length;Ft++){const Ut=Tt[Ft];Ut.isLink&&(!dt||Ut.t===dt)&&$t.check(Ut)&&Dt.push(Ut.toFormattedObject($t))}return Dt}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(et){return et.length===1?et[0].isLink:et.length===3&&et[1].isLink?["()","[]"].includes(et[0].value+et[2].value):!1}function autolink(et){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(dt,kt,$t)=>{const Tt=dt.some(Kt=>Kt.docChanged)&&!kt.doc.eq($t.doc),Dt=dt.some(Kt=>Kt.getMeta("preventAutolink"));if(!Tt||Dt)return;const{tr:Ft}=$t,Ut=combineTransactionSteps(kt.doc,[...dt]);if(getChangedRanges(Ut).forEach(({newRange:Kt})=>{const Yt=findChildrenInRange($t.doc,Kt,er=>er.isTextblock);let Jt,Zt;if(Yt.length>1)Jt=Yt[0],Zt=$t.doc.textBetween(Jt.pos,Jt.pos+Jt.node.nodeSize,void 0," ");else if(Yt.length){const er=$t.doc.textBetween(Kt.from,Kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(er))return;Jt=Yt[0],Zt=$t.doc.textBetween(Jt.pos,Kt.to,void 0," ")}if(Jt&&Zt){const er=Zt.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(er.length<=0)return!1;const rr=er[er.length-1],sr=Jt.pos+Zt.lastIndexOf(rr);if(!rr)return!1;const nr=tokenize(rr).map(ir=>ir.toObject(et.defaultProtocol));if(!isValidLinkStructure(nr))return!1;nr.filter(ir=>ir.isLink).map(ir=>({...ir,from:sr+ir.start+1,to:sr+ir.end+1})).filter(ir=>$t.schema.marks.code?!$t.doc.rangeHasMark(ir.from,ir.to,$t.schema.marks.code):!0).filter(ir=>et.validate(ir.value)).filter(ir=>et.shouldAutoLink(ir.value)).forEach(ir=>{getMarksBetween(ir.from,ir.to,$t.doc).some(lr=>lr.mark.type===et.type)||Ft.addMark(ir.from,ir.to,et.type.create({href:ir.href}))})}}),!!Ft.steps.length)return Ft}})}function clickHandler(et){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(dt,kt,$t)=>{var Tt,Dt;if($t.button!==0||!dt.editable)return!1;let Ft=null;if($t.target instanceof HTMLAnchorElement)Ft=$t.target;else{let Yt=$t.target;const Jt=[];for(;Yt.nodeName!=="DIV";)Jt.push(Yt),Yt=Yt.parentNode;Ft=Jt.find(Zt=>Zt.nodeName==="A")}if(!Ft)return!1;const Ut=getAttributes$1(dt.state,et.type.name),Ht=(Tt=Ft==null?void 0:Ft.href)!=null?Tt:Ut.href,Kt=(Dt=Ft==null?void 0:Ft.target)!=null?Dt:Ut.target;return et.enableClickSelection&&et.editor.commands.extendMarkRange(et.type.name),Ft&&Ht?(window.open(Ht,Kt),!0):!1}}})}function pasteHandler(et){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(dt,kt,$t)=>{const{state:Tt}=dt,{selection:Dt}=Tt,{empty:Ft}=Dt;if(Ft)return!1;let Ut="";$t.content.forEach(Kt=>{Ut+=Kt.textContent});const Ht=find$1(Ut,{defaultProtocol:et.defaultProtocol}).find(Kt=>Kt.isLink&&Kt.value===Ut);return!Ut||!Ht?!1:et.editor.commands.setMark(et.type,{href:Ht.href})}}})}function isAllowedUri(et,dt){const kt=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return dt&&dt.forEach($t=>{const Tt=typeof $t=="string"?$t:$t.scheme;Tt&&kt.push(Tt)}),!et||et.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${kt.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(et=>{if(typeof et=="string"){registerCustomProtocol(et);return}registerCustomProtocol(et.scheme,et.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(et,dt)=>!!isAllowedUri(et,dt.protocols),validate:et=>!!et,shouldAutoLink:et=>!!et}},addAttributes(){return{href:{default:null,parseHTML(et){return et.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:et=>{const dt=et.getAttribute("href");return!dt||!this.options.isAllowedUri(dt,{defaultValidate:kt=>!!isAllowedUri(kt,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:et}){return this.options.isAllowedUri(et.href,{defaultValidate:dt=>!!isAllowedUri(dt,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,et),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...et,href:""}),0]},addCommands(){return{setLink:et=>({chain:dt})=>{const{href:kt}=et;return this.options.isAllowedUri(kt,{defaultValidate:$t=>!!isAllowedUri($t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?dt().setMark(this.name,et).setMeta("preventAutolink",!0).run():!1},toggleLink:et=>({chain:dt})=>{const{href:kt}=et||{};return kt&&!this.options.isAllowedUri(kt,{defaultValidate:$t=>!!isAllowedUri($t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:dt().toggleMark(this.name,et,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:et})=>et().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:et=>{const dt=[];if(et){const{protocols:kt,defaultProtocol:$t}=this.options,Tt=find$1(et).filter(Dt=>Dt.isLink&&this.options.isAllowedUri(Dt.value,{defaultValidate:Ft=>!!isAllowedUri(Ft,kt),protocols:kt,defaultProtocol:$t}));Tt.length&&Tt.forEach(Dt=>dt.push({text:Dt.value,data:{href:Dt.href},index:Dt.start}))}return dt},type:this.type,getAttributes:et=>{var dt;return{href:(dt=et.data)==null?void 0:dt.href}}})]},addProseMirrorPlugins(){const et=[],{protocols:dt,defaultProtocol:kt}=this.options;return this.options.autolink&&et.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:$t=>this.options.isAllowedUri($t,{defaultValidate:Tt=>!!isAllowedUri(Tt,dt),protocols:dt,defaultProtocol:kt}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&et.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&et.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),et}}),index_default$b=Link,__defProp$6=Object.defineProperty,__export$6=(et,dt)=>{for(var kt in dt)__defProp$6(et,kt,{get:dt[kt],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:et}){return["ul",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{toggleBulletList:()=>({commands:et,chain:dt})=>this.options.keepAttributes?dt().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():et.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let et=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(et=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[et]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:et}){return["li",mergeAttributes(this.options.HTMLAttributes,et),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export$6(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(et,dt)=>{const{$from:kt}=dt.selection,$t=getNodeType(et,dt.schema);let Tt=null,Dt=kt.depth,Ft=kt.pos,Ut=null;for(;Dt>0&&Ut===null;)Tt=kt.node(Dt),Tt.type===$t?Ut=Dt:(Dt-=1,Ft-=1);return Ut===null?null:{$pos:dt.doc.resolve(Ft),depth:Ut}},getNextListDepth=(et,dt)=>{const kt=findListItemPos(et,dt);if(!kt)return!1;const[,$t]=getNodeAtPosition(dt,et,kt.$pos.pos+4);return $t},hasListBefore=(et,dt,kt)=>{const{$anchor:$t}=et.selection,Tt=Math.max(0,$t.pos-2),Dt=et.doc.resolve(Tt).node();return!(!Dt||!kt.includes(Dt.type.name))},hasListItemBefore=(et,dt)=>{var kt;const{$anchor:$t}=dt.selection,Tt=dt.doc.resolve($t.pos-2);return!(Tt.index()===0||((kt=Tt.nodeBefore)==null?void 0:kt.type.name)!==et)},listItemHasSubList=(et,dt,kt)=>{if(!kt)return!1;const $t=getNodeType(et,dt.schema);let Tt=!1;return kt.descendants(Dt=>{Dt.type===$t&&(Tt=!0)}),Tt},handleBackspace=(et,dt,kt)=>{if(et.commands.undoInputRule())return!0;if(et.state.selection.from!==et.state.selection.to)return!1;if(!isNodeActive(et.state,dt)&&hasListBefore(et.state,dt,kt)){const{$anchor:Ut}=et.state.selection,Ht=et.state.doc.resolve(Ut.before()-1),Kt=[];Ht.node().descendants((Zt,er)=>{Zt.type.name===dt&&Kt.push({node:Zt,pos:er})});const Yt=Kt.at(-1);if(!Yt)return!1;const Jt=et.state.doc.resolve(Ht.start()+Yt.pos+1);return et.chain().cut({from:Ut.start()-1,to:Ut.end()+1},Jt.end()).joinForward().run()}if(!isNodeActive(et.state,dt)||!isAtStartOfNode(et.state))return!1;const $t=findListItemPos(dt,et.state);if(!$t)return!1;const Dt=et.state.doc.resolve($t.$pos.pos-2).node($t.depth),Ft=listItemHasSubList(dt,et.state,Dt);return hasListItemBefore(dt,et.state)&&!Ft?et.commands.joinItemBackward():et.chain().liftListItem(dt).run()},nextListIsDeeper=(et,dt)=>{const kt=getNextListDepth(et,dt),$t=findListItemPos(et,dt);return!$t||!kt?!1:kt>$t.depth},nextListIsHigher=(et,dt)=>{const kt=getNextListDepth(et,dt),$t=findListItemPos(et,dt);return!$t||!kt?!1:kt<$t.depth},handleDelete=(et,dt)=>{if(!isNodeActive(et.state,dt)||!isAtEndOfNode(et.state,dt))return!1;const{selection:kt}=et.state,{$from:$t,$to:Tt}=kt;return!kt.empty&&$t.sameParent(Tt)?!1:nextListIsDeeper(dt,et.state)?et.chain().focus(et.state.selection.from+4).lift(dt).joinBackward().run():nextListIsHigher(dt,et.state)?et.chain().joinForward().joinBackward().run():et.commands.joinItemForward()},hasListItemAfter=(et,dt)=>{var kt;const{$anchor:$t}=dt.selection,Tt=dt.doc.resolve($t.pos-$t.parentOffset-2);return!(Tt.index()===Tt.parent.childCount-1||((kt=Tt.nodeAfter)==null?void 0:kt.type.name)!==et)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:kt})=>{et.state.schema.nodes[kt]!==void 0&&handleDelete(et,kt)&&(dt=!0)}),dt},"Mod-Delete":({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:kt})=>{et.state.schema.nodes[kt]!==void 0&&handleDelete(et,kt)&&(dt=!0)}),dt},Backspace:({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:kt,wrapperNames:$t})=>{et.state.schema.nodes[kt]!==void 0&&handleBackspace(et,kt,$t)&&(dt=!0)}),dt},"Mod-Backspace":({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:kt,wrapperNames:$t})=>{et.state.schema.nodes[kt]!==void 0&&handleBackspace(et,kt,$t)&&(dt=!0)}),dt}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:et=>et.hasAttribute("start")?parseInt(et.getAttribute("start")||"",10):1},type:{default:null,parseHTML:et=>et.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:et}){const{start:dt,...kt}=et;return dt===1?["ol",mergeAttributes(this.options.HTMLAttributes,kt),0]:["ol",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{toggleOrderedList:()=>({commands:et,chain:dt})=>this.options.keepAttributes?dt().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():et.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let et=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:dt=>({start:+dt[1]}),joinPredicate:(dt,kt)=>kt.childCount+kt.attrs.start===+dt[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(et=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:dt=>({start:+dt[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(dt,kt)=>kt.childCount+kt.attrs.start===+dt[1],editor:this.editor})),[et]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:et=>{const dt=et.getAttribute("data-checked");return dt===""||dt==="true"},renderHTML:et=>({"data-checked":et.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:et,HTMLAttributes:dt}){return["li",mergeAttributes(this.options.HTMLAttributes,dt,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:et.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const et={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...et,Tab:()=>this.editor.commands.sinkListItem(this.name)}:et},addNodeView(){return({node:et,HTMLAttributes:dt,getPos:kt,editor:$t})=>{const Tt=document.createElement("li"),Dt=document.createElement("label"),Ft=document.createElement("span"),Ut=document.createElement("input"),Ht=document.createElement("div"),Kt=Yt=>{var Jt,Zt;Ut.ariaLabel=((Zt=(Jt=this.options.a11y)==null?void 0:Jt.checkboxLabel)==null?void 0:Zt.call(Jt,Yt,Ut.checked))||`Task item checkbox for ${Yt.textContent||"empty task item"}`};return Kt(et),Dt.contentEditable="false",Ut.type="checkbox",Ut.addEventListener("mousedown",Yt=>Yt.preventDefault()),Ut.addEventListener("change",Yt=>{if(!$t.isEditable&&!this.options.onReadOnlyChecked){Ut.checked=!Ut.checked;return}const{checked:Jt}=Yt.target;$t.isEditable&&typeof kt=="function"&&$t.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:Zt})=>{const er=kt();if(typeof er!="number")return!1;const rr=Zt.doc.nodeAt(er);return Zt.setNodeMarkup(er,void 0,{...rr==null?void 0:rr.attrs,checked:Jt}),!0}).run(),!$t.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(et,Jt)||(Ut.checked=!Ut.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Yt,Jt])=>{Tt.setAttribute(Yt,Jt)}),Tt.dataset.checked=et.attrs.checked,Ut.checked=et.attrs.checked,Dt.append(Ut,Ft),Tt.append(Dt,Ht),Object.entries(dt).forEach(([Yt,Jt])=>{Tt.setAttribute(Yt,Jt)}),{dom:Tt,contentDOM:Ht,update:Yt=>Yt.type!==this.type?!1:(Tt.dataset.checked=Yt.attrs.checked,Ut.checked=Yt.attrs.checked,Kt(Yt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:et=>({checked:et[et.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:et}){return["ul",mergeAttributes(this.options.HTMLAttributes,et,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:et})=>et.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const et=[];return this.options.bulletList!==!1&&et.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&et.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&et.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&et.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&et.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&et.push(TaskList.configure(this.options.taskList)),et}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:et}){return["p",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setParagraph:()=>({commands:et})=>et.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:et=>et.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:et}){return["s",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setStrike:()=>({commands:et})=>et.setMark(this.name),toggleStrike:()=>({commands:et})=>et.toggleMark(this.name),unsetStrike:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:et=>et.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:et}){return["u",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setUnderline:()=>({commands:et})=>et.setMark(this.name),toggleUnderline:()=>({commands:et})=>et.toggleMark(this.name),unsetUnderline:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$a=Underline;function dropCursor(et={}){return new Plugin({view(dt){return new DropCursorView(dt,et)}})}class DropCursorView{constructor(dt,kt){var $t;this.editorView=dt,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=($t=kt.width)!==null&&$t!==void 0?$t:1,this.color=kt.color===!1?void 0:kt.color||"black",this.class=kt.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Tt=>{let Dt=Ft=>{this[Tt](Ft)};return dt.dom.addEventListener(Tt,Dt),{name:Tt,handler:Dt}})}destroy(){this.handlers.forEach(({name:dt,handler:kt})=>this.editorView.dom.removeEventListener(dt,kt))}update(dt,kt){this.cursorPos!=null&&kt.doc!=dt.state.doc&&(this.cursorPos>dt.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(dt){dt!=this.cursorPos&&(this.cursorPos=dt,dt==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let dt=this.editorView.state.doc.resolve(this.cursorPos),kt=!dt.parent.inlineContent,$t,Tt=this.editorView.dom,Dt=Tt.getBoundingClientRect(),Ft=Dt.width/Tt.offsetWidth,Ut=Dt.height/Tt.offsetHeight;if(kt){let Jt=dt.nodeBefore,Zt=dt.nodeAfter;if(Jt||Zt){let er=this.editorView.nodeDOM(this.cursorPos-(Jt?Jt.nodeSize:0));if(er){let rr=er.getBoundingClientRect(),sr=Jt?rr.bottom:rr.top;Jt&&Zt&&(sr=(sr+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let nr=this.width/2*Ut;$t={left:rr.left,right:rr.right,top:sr-nr,bottom:sr+nr}}}}if(!$t){let Jt=this.editorView.coordsAtPos(this.cursorPos),Zt=this.width/2*Ft;$t={left:Jt.left-Zt,right:Jt.left+Zt,top:Jt.top,bottom:Jt.bottom}}let Ht=this.editorView.dom.offsetParent;this.element||(this.element=Ht.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",kt),this.element.classList.toggle("prosemirror-dropcursor-inline",!kt);let Kt,Yt;if(!Ht||Ht==document.body&&getComputedStyle(Ht).position=="static")Kt=-pageXOffset,Yt=-pageYOffset;else{let Jt=Ht.getBoundingClientRect(),Zt=Jt.width/Ht.offsetWidth,er=Jt.height/Ht.offsetHeight;Kt=Jt.left-Ht.scrollLeft*Zt,Yt=Jt.top-Ht.scrollTop*er}this.element.style.left=($t.left-Kt)/Ft+"px",this.element.style.top=($t.top-Yt)/Ut+"px",this.element.style.width=($t.right-$t.left)/Ft+"px",this.element.style.height=($t.bottom-$t.top)/Ut+"px"}scheduleRemoval(dt){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),dt)}dragover(dt){if(!this.editorView.editable)return;let kt=this.editorView.posAtCoords({left:dt.clientX,top:dt.clientY}),$t=kt&&kt.inside>=0&&this.editorView.state.doc.nodeAt(kt.inside),Tt=$t&&$t.type.spec.disableDropCursor,Dt=typeof Tt=="function"?Tt(this.editorView,kt,dt):Tt;if(kt&&!Dt){let Ft=kt.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Ut=dropPoint(this.editorView.state.doc,Ft,this.editorView.dragging.slice);Ut!=null&&(Ft=Ut)}this.setCursor(Ft),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(dt){this.editorView.dom.contains(dt.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(dt){super(dt,dt)}map(dt,kt){let $t=dt.resolve(kt.map(this.head));return GapCursor.valid($t)?new GapCursor($t):Selection.near($t)}content(){return Slice.empty}eq(dt){return dt instanceof GapCursor&&dt.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(dt,kt){if(typeof kt.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(dt.resolve(kt.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(dt){let kt=dt.parent;if(kt.isTextblock||!closedBefore(dt)||!closedAfter(dt))return!1;let $t=kt.type.spec.allowGapCursor;if($t!=null)return $t;let Tt=kt.contentMatchAt(dt.index()).defaultType;return Tt&&Tt.isTextblock}static findGapCursorFrom(dt,kt,$t=!1){e:for(;;){if(!$t&&GapCursor.valid(dt))return dt;let Tt=dt.pos,Dt=null;for(let Ft=dt.depth;;Ft--){let Ut=dt.node(Ft);if(kt>0?dt.indexAfter(Ft)<Ut.childCount:dt.index(Ft)>0){Dt=Ut.child(kt>0?dt.indexAfter(Ft):dt.index(Ft)-1);break}else if(Ft==0)return null;Tt+=kt;let Ht=dt.doc.resolve(Tt);if(GapCursor.valid(Ht))return Ht}for(;;){let Ft=kt>0?Dt.firstChild:Dt.lastChild;if(!Ft){if(Dt.isAtom&&!Dt.isText&&!NodeSelection.isSelectable(Dt)){dt=dt.doc.resolve(Tt+Dt.nodeSize*kt),$t=!1;continue e}break}Dt=Ft,Tt+=kt;let Ut=dt.doc.resolve(Tt);if(GapCursor.valid(Ut))return Ut}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(dt){this.pos=dt}map(dt){return new GapBookmark(dt.map(this.pos))}resolve(dt){let kt=dt.resolve(this.pos);return GapCursor.valid(kt)?new GapCursor(kt):Selection.near(kt)}}function closedBefore(et){for(let dt=et.depth;dt>=0;dt--){let kt=et.index(dt),$t=et.node(dt);if(kt==0){if($t.type.spec.isolating)return!0;continue}for(let Tt=$t.child(kt-1);;Tt=Tt.lastChild){if(Tt.childCount==0&&!Tt.inlineContent||Tt.isAtom||Tt.type.spec.isolating)return!0;if(Tt.inlineContent)return!1}}return!0}function closedAfter(et){for(let dt=et.depth;dt>=0;dt--){let kt=et.indexAfter(dt),$t=et.node(dt);if(kt==$t.childCount){if($t.type.spec.isolating)return!0;continue}for(let Tt=$t.child(kt);;Tt=Tt.firstChild){if(Tt.childCount==0&&!Tt.inlineContent||Tt.isAtom||Tt.type.spec.isolating)return!0;if(Tt.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(et,dt,kt){return dt.pos==kt.pos&&GapCursor.valid(kt)?new GapCursor(kt):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(et,dt){const kt=et=="vert"?dt>0?"down":"up":dt>0?"right":"left";return function($t,Tt,Dt){let Ft=$t.selection,Ut=dt>0?Ft.$to:Ft.$from,Ht=Ft.empty;if(Ft instanceof TextSelection){if(!Dt.endOfTextblock(kt)||Ut.depth==0)return!1;Ht=!1,Ut=$t.doc.resolve(dt>0?Ut.after():Ut.before())}let Kt=GapCursor.findGapCursorFrom(Ut,dt,Ht);return Kt?(Tt&&Tt($t.tr.setSelection(new GapCursor(Kt))),!0):!1}}function handleClick(et,dt,kt){if(!et||!et.editable)return!1;let $t=et.state.doc.resolve(dt);if(!GapCursor.valid($t))return!1;let Tt=et.posAtCoords({left:kt.clientX,top:kt.clientY});return Tt&&Tt.inside>-1&&NodeSelection.isSelectable(et.state.doc.nodeAt(Tt.inside))?!1:(et.dispatch(et.state.tr.setSelection(new GapCursor($t))),!0)}function beforeinput(et,dt){if(dt.inputType!="insertCompositionText"||!(et.state.selection instanceof GapCursor))return!1;let{$from:kt}=et.state.selection,$t=kt.parent.contentMatchAt(kt.index()).findWrapping(et.state.schema.nodes.text);if(!$t)return!1;let Tt=Fragment.empty;for(let Ft=$t.length-1;Ft>=0;Ft--)Tt=Fragment.from($t[Ft].createAndFill(null,Tt));let Dt=et.state.tr.replace(kt.pos,kt.pos,new Slice(Tt,0,0));return Dt.setSelection(TextSelection.near(Dt.doc.resolve(kt.pos+1))),et.dispatch(Dt),!1}function drawGapCursor(et){if(!(et.selection instanceof GapCursor))return null;let dt=document.createElement("div");return dt.className="ProseMirror-gapcursor",DecorationSet.create(et.doc,[Decoration.widget(et.selection.head,dt,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function et(){};RopeSequence.prototype.append=function et(dt){return dt.length?(dt=RopeSequence.from(dt),!this.length&&dt||dt.length<GOOD_LEAF_SIZE&&this.leafAppend(dt)||this.length<GOOD_LEAF_SIZE&&dt.leafPrepend(this)||this.appendInner(dt)):this};RopeSequence.prototype.prepend=function et(dt){return dt.length?RopeSequence.from(dt).append(this):this};RopeSequence.prototype.appendInner=function et(dt){return new Append(this,dt)};RopeSequence.prototype.slice=function et(dt,kt){return dt===void 0&&(dt=0),kt===void 0&&(kt=this.length),dt>=kt?RopeSequence.empty:this.sliceInner(Math.max(0,dt),Math.min(this.length,kt))};RopeSequence.prototype.get=function et(dt){if(!(dt<0||dt>=this.length))return this.getInner(dt)};RopeSequence.prototype.forEach=function et(dt,kt,$t){kt===void 0&&(kt=0),$t===void 0&&($t=this.length),kt<=$t?this.forEachInner(dt,kt,$t,0):this.forEachInvertedInner(dt,kt,$t,0)};RopeSequence.prototype.map=function et(dt,kt,$t){kt===void 0&&(kt=0),$t===void 0&&($t=this.length);var Tt=[];return this.forEach(function(Dt,Ft){return Tt.push(dt(Dt,Ft))},kt,$t),Tt};RopeSequence.from=function et(dt){return dt instanceof RopeSequence?dt:dt&&dt.length?new Leaf(dt):RopeSequence.empty};var Leaf=function(et){function dt($t){et.call(this),this.values=$t}et&&(dt.__proto__=et),dt.prototype=Object.create(et&&et.prototype),dt.prototype.constructor=dt;var kt={length:{configurable:!0},depth:{configurable:!0}};return dt.prototype.flatten=function(){return this.values},dt.prototype.sliceInner=function(Tt,Dt){return Tt==0&&Dt==this.length?this:new dt(this.values.slice(Tt,Dt))},dt.prototype.getInner=function(Tt){return this.values[Tt]},dt.prototype.forEachInner=function(Tt,Dt,Ft,Ut){for(var Ht=Dt;Ht<Ft;Ht++)if(Tt(this.values[Ht],Ut+Ht)===!1)return!1},dt.prototype.forEachInvertedInner=function(Tt,Dt,Ft,Ut){for(var Ht=Dt-1;Ht>=Ft;Ht--)if(Tt(this.values[Ht],Ut+Ht)===!1)return!1},dt.prototype.leafAppend=function(Tt){if(this.length+Tt.length<=GOOD_LEAF_SIZE)return new dt(this.values.concat(Tt.flatten()))},dt.prototype.leafPrepend=function(Tt){if(this.length+Tt.length<=GOOD_LEAF_SIZE)return new dt(Tt.flatten().concat(this.values))},kt.length.get=function(){return this.values.length},kt.depth.get=function(){return 0},Object.defineProperties(dt.prototype,kt),dt}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(et){function dt(kt,$t){et.call(this),this.left=kt,this.right=$t,this.length=kt.length+$t.length,this.depth=Math.max(kt.depth,$t.depth)+1}return et&&(dt.__proto__=et),dt.prototype=Object.create(et&&et.prototype),dt.prototype.constructor=dt,dt.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},dt.prototype.getInner=function($t){return $t<this.left.length?this.left.get($t):this.right.get($t-this.left.length)},dt.prototype.forEachInner=function($t,Tt,Dt,Ft){var Ut=this.left.length;if(Tt<Ut&&this.left.forEachInner($t,Tt,Math.min(Dt,Ut),Ft)===!1||Dt>Ut&&this.right.forEachInner($t,Math.max(Tt-Ut,0),Math.min(this.length,Dt)-Ut,Ft+Ut)===!1)return!1},dt.prototype.forEachInvertedInner=function($t,Tt,Dt,Ft){var Ut=this.left.length;if(Tt>Ut&&this.right.forEachInvertedInner($t,Tt-Ut,Math.max(Dt,Ut)-Ut,Ft+Ut)===!1||Dt<Ut&&this.left.forEachInvertedInner($t,Math.min(Tt,Ut),Dt,Ft)===!1)return!1},dt.prototype.sliceInner=function($t,Tt){if($t==0&&Tt==this.length)return this;var Dt=this.left.length;return Tt<=Dt?this.left.slice($t,Tt):$t>=Dt?this.right.slice($t-Dt,Tt-Dt):this.left.slice($t,Dt).append(this.right.slice(0,Tt-Dt))},dt.prototype.leafAppend=function($t){var Tt=this.right.leafAppend($t);if(Tt)return new dt(this.left,Tt)},dt.prototype.leafPrepend=function($t){var Tt=this.left.leafPrepend($t);if(Tt)return new dt(Tt,this.right)},dt.prototype.appendInner=function($t){return this.left.depth>=Math.max(this.right.depth,$t.depth)+1?new dt(this.left,new dt(this.right,$t)):new dt(this,$t)},dt}(RopeSequence);const max_empty_items=500;class Branch{constructor(dt,kt){this.items=dt,this.eventCount=kt}popEvent(dt,kt){if(this.eventCount==0)return null;let $t=this.items.length;for(;;$t--)if(this.items.get($t-1).selection){--$t;break}let Tt,Dt;kt&&(Tt=this.remapping($t,this.items.length),Dt=Tt.maps.length);let Ft=dt.tr,Ut,Ht,Kt=[],Yt=[];return this.items.forEach((Jt,Zt)=>{if(!Jt.step){Tt||(Tt=this.remapping($t,Zt+1),Dt=Tt.maps.length),Dt--,Yt.push(Jt);return}if(Tt){Yt.push(new Item(Jt.map));let er=Jt.step.map(Tt.slice(Dt)),rr;er&&Ft.maybeStep(er).doc&&(rr=Ft.mapping.maps[Ft.mapping.maps.length-1],Kt.push(new Item(rr,void 0,void 0,Kt.length+Yt.length))),Dt--,rr&&Tt.appendMap(rr,Dt)}else Ft.maybeStep(Jt.step);if(Jt.selection)return Ut=Tt?Jt.selection.map(Tt.slice(Dt)):Jt.selection,Ht=new Branch(this.items.slice(0,$t).append(Yt.reverse().concat(Kt)),this.eventCount-1),!1},this.items.length,0),{remaining:Ht,transform:Ft,selection:Ut}}addTransform(dt,kt,$t,Tt){let Dt=[],Ft=this.eventCount,Ut=this.items,Ht=!Tt&&Ut.length?Ut.get(Ut.length-1):null;for(let Yt=0;Yt<dt.steps.length;Yt++){let Jt=dt.steps[Yt].invert(dt.docs[Yt]),Zt=new Item(dt.mapping.maps[Yt],Jt,kt),er;(er=Ht&&Ht.merge(Zt))&&(Zt=er,Yt?Dt.pop():Ut=Ut.slice(0,Ut.length-1)),Dt.push(Zt),kt&&(Ft++,kt=void 0),Tt||(Ht=Zt)}let Kt=Ft-$t.depth;return Kt>DEPTH_OVERFLOW&&(Ut=cutOffEvents(Ut,Kt),Ft-=Kt),new Branch(Ut.append(Dt),Ft)}remapping(dt,kt){let $t=new Mapping;return this.items.forEach((Tt,Dt)=>{let Ft=Tt.mirrorOffset!=null&&Dt-Tt.mirrorOffset>=dt?$t.maps.length-Tt.mirrorOffset:void 0;$t.appendMap(Tt.map,Ft)},dt,kt),$t}addMaps(dt){return this.eventCount==0?this:new Branch(this.items.append(dt.map(kt=>new Item(kt))),this.eventCount)}rebased(dt,kt){if(!this.eventCount)return this;let $t=[],Tt=Math.max(0,this.items.length-kt),Dt=dt.mapping,Ft=dt.steps.length,Ut=this.eventCount;this.items.forEach(Zt=>{Zt.selection&&Ut--},Tt);let Ht=kt;this.items.forEach(Zt=>{let er=Dt.getMirror(--Ht);if(er==null)return;Ft=Math.min(Ft,er);let rr=Dt.maps[er];if(Zt.step){let sr=dt.steps[er].invert(dt.docs[er]),nr=Zt.selection&&Zt.selection.map(Dt.slice(Ht+1,er));nr&&Ut++,$t.push(new Item(rr,sr,nr))}else $t.push(new Item(rr))},Tt);let Kt=[];for(let Zt=kt;Zt<Ft;Zt++)Kt.push(new Item(Dt.maps[Zt]));let Yt=this.items.slice(0,Tt).append(Kt).append($t),Jt=new Branch(Yt,Ut);return Jt.emptyItemCount()>max_empty_items&&(Jt=Jt.compress(this.items.length-$t.length)),Jt}emptyItemCount(){let dt=0;return this.items.forEach(kt=>{kt.step||dt++}),dt}compress(dt=this.items.length){let kt=this.remapping(0,dt),$t=kt.maps.length,Tt=[],Dt=0;return this.items.forEach((Ft,Ut)=>{if(Ut>=dt)Tt.push(Ft),Ft.selection&&Dt++;else if(Ft.step){let Ht=Ft.step.map(kt.slice($t)),Kt=Ht&&Ht.getMap();if($t--,Kt&&kt.appendMap(Kt,$t),Ht){let Yt=Ft.selection&&Ft.selection.map(kt.slice($t));Yt&&Dt++;let Jt=new Item(Kt.invert(),Ht,Yt),Zt,er=Tt.length-1;(Zt=Tt.length&&Tt[er].merge(Jt))?Tt[er]=Zt:Tt.push(Jt)}}else Ft.map&&$t--},this.items.length,0),new Branch(RopeSequence.from(Tt.reverse()),Dt)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(et,dt){let kt;return et.forEach(($t,Tt)=>{if($t.selection&&dt--==0)return kt=Tt,!1}),et.slice(kt)}class Item{constructor(dt,kt,$t,Tt){this.map=dt,this.step=kt,this.selection=$t,this.mirrorOffset=Tt}merge(dt){if(this.step&&dt.step&&!dt.selection){let kt=dt.step.merge(this.step);if(kt)return new Item(kt.getMap().invert(),kt,this.selection)}}}class HistoryState{constructor(dt,kt,$t,Tt,Dt){this.done=dt,this.undone=kt,this.prevRanges=$t,this.prevTime=Tt,this.prevComposition=Dt}}const DEPTH_OVERFLOW=20;function applyTransaction(et,dt,kt,$t){let Tt=kt.getMeta(historyKey),Dt;if(Tt)return Tt.historyState;kt.getMeta(closeHistoryKey)&&(et=new HistoryState(et.done,et.undone,null,0,-1));let Ft=kt.getMeta("appendedTransaction");if(kt.steps.length==0)return et;if(Ft&&Ft.getMeta(historyKey))return Ft.getMeta(historyKey).redo?new HistoryState(et.done.addTransform(kt,void 0,$t,mustPreserveItems(dt)),et.undone,rangesFor(kt.mapping.maps),et.prevTime,et.prevComposition):new HistoryState(et.done,et.undone.addTransform(kt,void 0,$t,mustPreserveItems(dt)),null,et.prevTime,et.prevComposition);if(kt.getMeta("addToHistory")!==!1&&!(Ft&&Ft.getMeta("addToHistory")===!1)){let Ut=kt.getMeta("composition"),Ht=et.prevTime==0||!Ft&&et.prevComposition!=Ut&&(et.prevTime<(kt.time||0)-$t.newGroupDelay||!isAdjacentTo(kt,et.prevRanges)),Kt=Ft?mapRanges(et.prevRanges,kt.mapping):rangesFor(kt.mapping.maps);return new HistoryState(et.done.addTransform(kt,Ht?dt.selection.getBookmark():void 0,$t,mustPreserveItems(dt)),Branch.empty,Kt,kt.time,Ut??et.prevComposition)}else return(Dt=kt.getMeta("rebased"))?new HistoryState(et.done.rebased(kt,Dt),et.undone.rebased(kt,Dt),mapRanges(et.prevRanges,kt.mapping),et.prevTime,et.prevComposition):new HistoryState(et.done.addMaps(kt.mapping.maps),et.undone.addMaps(kt.mapping.maps),mapRanges(et.prevRanges,kt.mapping),et.prevTime,et.prevComposition)}function isAdjacentTo(et,dt){if(!dt)return!1;if(!et.docChanged)return!0;let kt=!1;return et.mapping.maps[0].forEach(($t,Tt)=>{for(let Dt=0;Dt<dt.length;Dt+=2)$t<=dt[Dt+1]&&Tt>=dt[Dt]&&(kt=!0)}),kt}function rangesFor(et){let dt=[];for(let kt=et.length-1;kt>=0&&dt.length==0;kt--)et[kt].forEach(($t,Tt,Dt,Ft)=>dt.push(Dt,Ft));return dt}function mapRanges(et,dt){if(!et)return null;let kt=[];for(let $t=0;$t<et.length;$t+=2){let Tt=dt.map(et[$t],1),Dt=dt.map(et[$t+1],-1);Tt<=Dt&&kt.push(Tt,Dt)}return kt}function histTransaction(et,dt,kt){let $t=mustPreserveItems(dt),Tt=historyKey.get(dt).spec.config,Dt=(kt?et.undone:et.done).popEvent(dt,$t);if(!Dt)return null;let Ft=Dt.selection.resolve(Dt.transform.doc),Ut=(kt?et.done:et.undone).addTransform(Dt.transform,dt.selection.getBookmark(),Tt,$t),Ht=new HistoryState(kt?Ut:Dt.remaining,kt?Dt.remaining:Ut,null,0,-1);return Dt.transform.setSelection(Ft).setMeta(historyKey,{redo:kt,historyState:Ht})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(et){let dt=et.plugins;if(cachedPreserveItemsPlugins!=dt){cachedPreserveItems=!1,cachedPreserveItemsPlugins=dt;for(let kt=0;kt<dt.length;kt++)if(dt[kt].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(et={}){return et={depth:et.depth||100,newGroupDelay:et.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(dt,kt,$t){return applyTransaction(kt,$t,dt,et)}},config:et,props:{handleDOMEvents:{beforeinput(dt,kt){let $t=kt.inputType,Tt=$t=="historyUndo"?undo:$t=="historyRedo"?redo:null;return Tt?(kt.preventDefault(),Tt(dt.state,dt.dispatch)):!1}}}})}function buildCommand(et,dt){return(kt,$t)=>{let Tt=historyKey.getState(kt);if(!Tt||(et?Tt.undone:Tt.done).eventCount==0)return!1;if($t){let Dt=histTransaction(Tt,kt,et);Dt&&$t(dt?Dt.scrollIntoView():Dt)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:et=>et.length,wordCounter:et=>et.split(" ").filter(dt=>dt!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=et=>{const dt=(et==null?void 0:et.node)||this.editor.state.doc;if(((et==null?void 0:et.mode)||this.options.mode)==="textSize"){const $t=dt.textBetween(0,dt.content.size,void 0," ");return this.options.textCounter($t)}return dt.nodeSize},this.storage.words=et=>{const dt=(et==null?void 0:et.node)||this.editor.state.doc,kt=dt.textBetween(0,dt.content.size," "," ");return this.options.wordCounter(kt)}},addProseMirrorPlugins(){let et=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(dt,kt,$t)=>{if(et)return;const Tt=this.options.limit;if(Tt==null||Tt===0){et=!0;return}const Dt=this.storage.characters({node:$t.doc});if(Dt>Tt){const Ft=Dt-Tt,Ut=0,Ht=Ft;console.warn(`[CharacterCount] Initial content exceeded limit of ${Tt} characters. Content was automatically trimmed.`);const Kt=$t.tr.deleteRange(Ut,Ht);return et=!0,Kt}et=!0},filterTransaction:(dt,kt)=>{const $t=this.options.limit;if(!dt.docChanged||$t===0||$t===null||$t===void 0)return!0;const Tt=this.storage.characters({node:kt.doc}),Dt=this.storage.characters({node:dt.doc});if(Dt<=$t||Tt>$t&&Dt>$t&&Dt<=Tt)return!0;if(Tt>$t&&Dt>$t&&Dt>Tt||!dt.getMeta("paste"))return!1;const Ut=dt.selection.$head.pos,Ht=Dt-$t,Kt=Ut-Ht,Yt=Ut;return dt.deleteRange(Kt,Yt),!(this.storage.characters({node:dt.doc})>$t)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:et,selection:dt})=>{const{isEditable:kt,isFocused:$t}=this.editor,{anchor:Tt}=dt,Dt=[];if(!kt||!$t)return DecorationSet.create(et,[]);let Ft=0;this.options.mode==="deepest"&&et.descendants((Ht,Kt)=>{if(Ht.isText)return;if(!(Tt>=Kt&&Tt<=Kt+Ht.nodeSize-1))return!1;Ft+=1});let Ut=0;return et.descendants((Ht,Kt)=>{if(Ht.isText||!(Tt>=Kt&&Tt<=Kt+Ht.nodeSize-1))return!1;if(Ut+=1,this.options.mode==="deepest"&&Ft-Ut>0||this.options.mode==="shallowest"&&Ut>1)return this.options.mode==="deepest";Dt.push(Decoration.node(Kt,Kt+Ht.nodeSize,{class:this.options.className}))}),DecorationSet.create(et,Dt)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(et){var dt;const kt={name:et.name,options:et.options,storage:et.storage};return{allowGapCursor:(dt=callOrReturn(getExtensionField(et,"allowGapCursor",kt)))!=null?dt:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:et,selection:dt})=>{const kt=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:$t}=dt,Tt=[];if(!kt)return null;const Dt=this.editor.isEmpty;return et.descendants((Ft,Ut)=>{const Ht=$t>=Ut&&$t<=Ut+Ft.nodeSize,Kt=!Ft.isLeaf&&isNodeEmpty(Ft);if((Ht||!this.options.showOnlyCurrent)&&Kt){const Yt=[this.options.emptyNodeClass];Dt&&Yt.push(this.options.emptyEditorClass);const Jt=Decoration.node(Ut,Ut+Ft.nodeSize,{class:Yt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:Ft,pos:Ut,hasAnchor:Ht}):this.options.placeholder});Tt.push(Jt)}return this.options.includeChildren}),DecorationSet.create(et,Tt)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:et,options:dt}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(kt){return kt.selection.empty||et.isFocused||!et.isEditable||isNodeSelection(kt.selection)||et.view.dragging?null:DecorationSet.create(kt.doc,[Decoration.inline(kt.selection.from,kt.selection.to,{class:dt.className})])}}})]}});function nodeEqualsType({types:et,node:dt}){return dt&&Array.isArray(et)&&et.includes(dt.type)||(dt==null?void 0:dt.type)===et}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const et=new PluginKey(this.name),dt=Object.entries(this.editor.schema.nodes).map(([,kt])=>kt).filter(kt=>(this.options.notAfter||[]).concat(this.options.node).includes(kt.name));return[new Plugin({key:et,appendTransaction:(kt,$t,Tt)=>{const{doc:Dt,tr:Ft,schema:Ut}=Tt,Ht=et.getState(Tt),Kt=Dt.content.size,Yt=Ut.nodes[this.options.node];if(Ht)return Ft.insert(Kt,Yt.create())},state:{init:(kt,$t)=>{const Tt=$t.tr.doc.lastChild;return!nodeEqualsType({node:Tt,types:dt})},apply:(kt,$t)=>{if(!kt.docChanged)return $t;const Tt=kt.doc.lastChild;return!nodeEqualsType({node:Tt,types:dt})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:et,dispatch:dt})=>undo(et,dt),redo:()=>({state:et,dispatch:dt})=>redo(et,dt)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var et,dt,kt,$t;const Tt=[];return this.options.bold!==!1&&Tt.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&Tt.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&Tt.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&Tt.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&Tt.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&Tt.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&Tt.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&Tt.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&Tt.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&Tt.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&Tt.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&Tt.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&Tt.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&Tt.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&Tt.push(ListKeymap.configure((et=this.options)==null?void 0:et.listKeymap)),this.options.link!==!1&&Tt.push(Link.configure((dt=this.options)==null?void 0:dt.link)),this.options.orderedList!==!1&&Tt.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&Tt.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&Tt.push(Strike.configure(this.options.strike)),this.options.text!==!1&&Tt.push(Text.configure(this.options.text)),this.options.underline!==!1&&Tt.push(Underline.configure((kt=this.options)==null?void 0:kt.underline)),this.options.trailingNode!==!1&&Tt.push(TrailingNode.configure(($t=this.options)==null?void 0:$t.trailingNode)),Tt}}),index_default$9=StarterKit,index_default$8=ListItem,index_default$7=BulletList,index_default$6=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:et=>et.getAttribute("data-color")||et.style.backgroundColor,renderHTML:et=>et.color?{"data-color":et.color,style:`background-color: ${et.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:et}){return["mark",mergeAttributes(this.options.HTMLAttributes,et),0]},renderMarkdown:(et,dt)=>`==${dt.renderChildren(et)}==`,parseMarkdown:(et,dt)=>dt.applyMark("highlight",dt.parseInline(et.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:et=>et.indexOf("=="),tokenize(et,dt,kt){const Tt=/^(==)([^=]+)(==)/.exec(et);if(Tt){const Dt=Tt[2].trim(),Ft=kt.inlineTokens(Dt);return{type:"highlight",raw:Tt[0],text:Dt,tokens:Ft}}}},addCommands(){return{setHighlight:et=>({commands:dt})=>dt.setMark(this.name,et),toggleHighlight:et=>({commands:dt})=>dt.toggleMark(this.name,et),unsetHighlight:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$5=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:et=>{const dt=et.style.textAlign;return this.options.alignments.includes(dt)?dt:this.options.defaultAlignment},renderHTML:et=>et.textAlign?{style:`text-align: ${et.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:et=>({commands:dt})=>this.options.alignments.includes(et)?this.options.types.map(kt=>dt.updateAttributes(kt,{textAlign:et})).every(kt=>kt):!1,unsetTextAlign:()=>({commands:et})=>this.options.types.map(dt=>et.resetAttributes(dt,"textAlign")).every(dt=>dt),toggleTextAlign:et=>({editor:dt,commands:kt})=>this.options.alignments.includes(et)?dt.isActive({textAlign:et})?kt.unsetTextAlign():kt.setTextAlign(et):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$4=TextAlign,index_default$3=Placeholder,MAX_FIND_CHILD_SPAN_DEPTH=20,findChildSpans=(et,dt=0)=>{const kt=[];return!et.children.length||dt>MAX_FIND_CHILD_SPAN_DEPTH||Array.from(et.children).forEach($t=>{$t.tagName==="SPAN"?kt.push($t):$t.children.length&&kt.push(...findChildSpans($t,dt+1))}),kt},mergeNestedSpanStyles=et=>{if(!et.children.length)return;const dt=findChildSpans(et);dt&&dt.forEach(kt=>{var $t,Tt;const Dt=kt.getAttribute("style"),Ft=(Tt=($t=kt.parentElement)==null?void 0:$t.closest("span"))==null?void 0:Tt.getAttribute("style");kt.setAttribute("style",`${Ft};${Dt}`)})},TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:et=>et.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&mergeNestedSpanStyles(et),{}):!1}]},renderHTML({HTMLAttributes:et}){return["span",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{toggleTextStyle:et=>({commands:dt})=>dt.toggleMark(this.name,et),removeEmptyTextStyle:()=>({tr:et})=>{const{selection:dt}=et;return et.doc.nodesBetween(dt.from,dt.to,(kt,$t)=>{if(kt.isTextblock)return!0;kt.marks.filter(Tt=>Tt.type===this.type).some(Tt=>Object.values(Tt.attrs).some(Dt=>!!Dt))||et.removeMark($t,$t+kt.nodeSize,this.type)}),!0}}}}),BackgroundColor=Extension.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:et=>{var dt;const kt=et.getAttribute("style");if(kt){const $t=kt.split(";").map(Tt=>Tt.trim()).filter(Boolean);for(let Tt=$t.length-1;Tt>=0;Tt-=1){const Dt=$t[Tt].split(":");if(Dt.length>=2){const Ft=Dt[0].trim().toLowerCase(),Ut=Dt.slice(1).join(":").trim();if(Ft==="background-color")return Ut.replace(/['"]+/g,"")}}}return(dt=et.style.backgroundColor)==null?void 0:dt.replace(/['"]+/g,"")},renderHTML:et=>et.backgroundColor?{style:`background-color: ${et.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:et=>({chain:dt})=>dt().setMark("textStyle",{backgroundColor:et}).run(),unsetBackgroundColor:()=>({chain:et})=>et().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Color$1=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:et=>{var dt;const kt=et.getAttribute("style");if(kt){const $t=kt.split(";").map(Tt=>Tt.trim()).filter(Boolean);for(let Tt=$t.length-1;Tt>=0;Tt-=1){const Dt=$t[Tt].split(":");if(Dt.length>=2){const Ft=Dt[0].trim().toLowerCase(),Ut=Dt.slice(1).join(":").trim();if(Ft==="color")return Ut.replace(/['"]+/g,"")}}}return(dt=et.style.color)==null?void 0:dt.replace(/['"]+/g,"")},renderHTML:et=>et.color?{style:`color: ${et.color}`}:{}}}}]},addCommands(){return{setColor:et=>({chain:dt})=>dt().setMark("textStyle",{color:et}).run(),unsetColor:()=>({chain:et})=>et().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),FontFamily=Extension.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:et=>et.style.fontFamily,renderHTML:et=>et.fontFamily?{style:`font-family: ${et.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:et=>({chain:dt})=>dt().setMark("textStyle",{fontFamily:et}).run(),unsetFontFamily:()=>({chain:et})=>et().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),FontSize=Extension.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:et=>et.style.fontSize,renderHTML:et=>et.fontSize?{style:`font-size: ${et.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:et=>({chain:dt})=>dt().setMark("textStyle",{fontSize:et}).run(),unsetFontSize:()=>({chain:et})=>et().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),LineHeight=Extension.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:et=>et.style.lineHeight,renderHTML:et=>et.lineHeight?{style:`line-height: ${et.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:et=>({chain:dt})=>dt().setMark("textStyle",{lineHeight:et}).run(),unsetLineHeight:()=>({chain:et})=>et().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Extension.create({name:"textStyleKit",addExtensions(){const et=[];return this.options.backgroundColor!==!1&&et.push(BackgroundColor.configure(this.options.backgroundColor)),this.options.color!==!1&&et.push(Color$1.configure(this.options.color)),this.options.fontFamily!==!1&&et.push(FontFamily.configure(this.options.fontFamily)),this.options.fontSize!==!1&&et.push(FontSize.configure(this.options.fontSize)),this.options.lineHeight!==!1&&et.push(LineHeight.configure(this.options.lineHeight)),this.options.textStyle!==!1&&et.push(TextStyle.configure(this.options.textStyle)),et}});var index_default$2=Color$1;const githubDark="";function Tooltip({text:et}){const[dt,kt]=reactExports.useState(!1),[$t,Tt]=reactExports.useState(null),Dt=reactExports.useRef(null);reactExports.useEffect(()=>{function Ut(Ht){Ht.target.closest(".tooltip-root")||kt(!1)}return document.addEventListener("click",Ut),()=>document.removeEventListener("click",Ut)},[]);function Ft(Ut){Ut.stopPropagation();const Ht=Dt.current.getBoundingClientRect();Tt({top:Ht.bottom+8,left:Ht.left+Ht.width/2}),kt(Kt=>!Kt)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{ref:Dt,type:"button",onClick:Ft,className:"tooltip-root ml-1 text-gray-400 hover:text-green focus:outline-none",children:jsxRuntimeExports.jsx(Info,{size:14,className:"text-current"})}),dt&&$t&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{style:{top:$t.top,left:$t.left,transform:"translateX(-50%)"},className:`
              fixed z-[9999]
              w-64
              bg-gray-900
              border border-gray-700
              text-xs text-gray-200
              rounded-lg
              p-3
              shadow-2xl
              normal-case
            `,children:et}),document.body)]})}function debounce(et,dt){let kt;const $t=(...Tt)=>{clearTimeout(kt),kt=setTimeout(()=>et(...Tt),dt)};return $t.cancel=()=>clearTimeout(kt),$t}function BookEditor({bookId:et,content:dt,setContent:kt}){const $t=et?`book-editor-draft-${et}`:null,[Tt,Dt]=reactExports.useState(!1),[Ft,Ut]=reactExports.useState(null),[Ht,Kt]=reactExports.useState("dark");reactExports.useRef(!1);const[Yt,Jt]=reactExports.useState([]),[Zt,er]=reactExports.useState(!1),rr=Ht==="dark",sr=rr?"bg-[#111] border-gray-800":"bg-gray-100 border-gray-300",nr=rr?"text-gray-300 hover:text-white":"text-gray-800 hover:text-black",ir="h-9 flex items-center gap-2 px-3 rounded-md text-sm leading-none",lr=reactExports.useMemo(()=>debounce(({editor:dr})=>{const ur=dr.getHTML();Dt(!0),kt(ur),$t&&localStorage.setItem($t,ur),setTimeout(()=>Dt(!1),400)},300),[et]);reactExports.useEffect(()=>()=>{lr.cancel()},[lr]);const or=useEditor({extensions:[TextStyle,index_default$2,index_default$d,index_default$8,index_default$7.configure({keepMarks:!0,keepAttributes:!0}),index_default$6.configure({keepMarks:!0,keepAttributes:!0}),index_default$9.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$a,index_default$5,index_default$b.configure({openOnClick:!1}),index_default$4.configure({types:["heading","paragraph","listItem"]}),index_default$3.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{spellcheck:"true",autocorrect:"on",autocomplete:"on",class:"focus:outline-none prose prose-lg max-w-none leading-relaxed"}},onUpdate:lr});reactExports.useEffect(()=>{if(!or)return;const dr=or.getHTML();dt!==dr&&or.commands.setContent(dt||"",!1)},[dt,or]);const cr=async dr=>{await axiosInstance.post("/dictionary/add",{word:dr}),Jt(ur=>{const pr=ur.filter(mr=>mr.word!==dr);return pr.length===0&&er(!1),pr})};return reactExports.useEffect(()=>{if(!or||Yt.length===0)return;const dr=or.getText().toLowerCase();Jt(ur=>{const pr=ur.filter(mr=>dr.includes(mr.word.toLowerCase()));return pr.length===0&&er(!1),pr})},[or==null?void 0:or.getText()]),or&&(window.__EDITOR=or),or?jsxRuntimeExports.jsxs("div",{className:`rounded-xl border overflow-hidden
    ${rr?"border-gray-800 bg-[#0b0b0b]":"border-gray-300 bg-white"}
  `,children:[jsxRuntimeExports.jsxs("div",{className:`flex justify-between items-center px-4 py-3 border-b
    ${rr?"bg-[#0b0b0b] border-gray-800":"bg-gray-100 border-gray-300"}
  `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Draft"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{if(!or)return;const dr=or.getHTML(),ur=or.getText();Dt(!0),kt(dr),localStorage.setItem($t,dr),await axiosInstance.post("/books/draft",{bookId:et,draftText:dr});try{const mr=(await axiosInstance.post("/books/spellcheck",{text:ur})).data.issues;mr.length>0?Jt(mr):Jt([])}catch(pr){console.warn("Spellcheck failed, save still succeeded",pr)}Dt(!1),Ut(Date.now())},className:"px-3 py-1 text-xs rounded bg-green text-black",children:"Save"}),Ft&&jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Saved just now"}),jsxRuntimeExports.jsx(Tooltip,{text:'Text wrapped in quotes "like this" or brackets [like this] will be preserved and never rewritten by AI.'})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Kt(rr?"light":"dark"),className:`
      h-8 px-3 rounded-md text-xs font-medium border transition
      ${rr?"border-gray-600 text-white hover:bg-white/10":"border-gray-400 text-gray-900 hover:bg-black/5"}
    `,children:rr?"Light Mode":"Dark Mode"})]}),Yt.length>0&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b border-gray-800 bg-[#0b0b0b]",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>er(dr=>!dr),className:"flex items-center gap-1 text-xs text-yellow-400 hover:underline",children:[" ",Yt.length," issue",Yt.length>1?"s":""]}),Zt&&jsxRuntimeExports.jsxs("div",{className:"mt-2 w-full rounded-none border border-gray-700 bg-[#111] px-4 py-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase text-gray-400",children:"Spelling issues"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>er(!1),className:"text-xs text-gray-400 hover:text-white",children:"Close"})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:Yt.map((dr,ur)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-white",children:dr.word}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr(dr.word),className:"text-xs text-green hover:underline",children:"Add to dictionary"})]},ur))})]})]}),jsxRuntimeExports.jsx("div",{className:`sticky top-0 z-10 ${sr}
  px-4 py-3
  border-b
  flex flex-wrap items-center gap-x-6 gap-y-3`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-3 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center whitespace-nowrap",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().toggleBold().run(),className:`px-2 py-1 rounded-md font-semibold text-lg transition-colors ${or.isActive("bold")?"text-green/90 bg-green/10":`${nr} ${rr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded-md font-semibold text-lg transition-colors ${or.isActive("italic")?"text-green/90 bg-green/10":`${nr} ${rr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",className:`px-2 py-1 rounded-md font-semibold text-lg transition-colors ${or.isActive("underline")?"text-green/90 bg-green/10":`${nr} ${rr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded-md text-sm font-medium transition-colors ${or.isActive("highlight")?"bg-yellow/80 text-black":`${nr} ${rr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:`flex gap-4 items-center pl-6 border-l ${rr?"border-gray-700":"border-gray-300"}`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${or.isActive("bulletList")?"bg-downloadGreen text-black":`${nr} ${rr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${or.isActive("orderedList")?"bg-downloadGreen text-black":`${nr} ${rr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().toggleBlockquote().run(),className:`px-2 py-1 rounded-md font-medium transition-colors ${or.isActive("blockquote")?"text-green/90 bg-green/10":`${nr} ${rr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:" Quote"})]}),or.state.selection.from!==or.state.selection.to&&jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-3 pl-6 border-l ${rr?"border-gray-700":"border-gray-300"}`,children:[jsxRuntimeExports.jsx("input",{type:"color",onChange:dr=>or.chain().focus().setColor(dr.target.value).run(),value:or.getAttributes("textStyle").color||"#ffffff",className:"w-8 h-8 cursor-pointer bg-transparent",title:"Text color"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().unsetColor().run(),className:"text-sm text-gray-400 hover:text-white",children:"Clear"})]}),jsxRuntimeExports.jsxs("div",{className:`flex gap-2 items-center pl-6 border-l ${rr?"border-gray-700":"border-gray-300"}`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${or.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":`${nr} ${rr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${or.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":`${nr} ${rr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>or.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${or.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":`${nr} ${rr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:`
            flex gap-4 items-center
            w-full sm:w-auto
            sm:ml-auto
            pt-3 sm:pt-0
            mt-3 sm:mt-0
            border-t sm:border-t-0
            ${rr?"border-gray-700":"border-gray-300"}
          `,children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>or.chain().focus().undo().run(),className:`${ir} ${nr}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:""}),jsxRuntimeExports.jsx("span",{children:"Undo"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>or.chain().focus().redo().run(),className:`${ir} ${nr}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:""}),jsxRuntimeExports.jsx("span",{children:"Redo"})]})]})]})}),jsxRuntimeExports.jsx(EditorContent,{editor:or,className:`
    prose max-w-none
    ${rr?"prose-invert bg-[#0f0f0f] [&_*]:text-white":"bg-white text-gray-900"}
    type-text
    min-h-[70vh] max-h-[90vh]
    resize-y overflow-auto
    p-8
    focus:outline-none focus:ring-2 focus:ring-green-500/50
  `})]}):null}function FontSelector({fontName:et,setFontName:dt,setFontFile:kt,isFreePlan:$t=!1}){var rr,sr;const Tt=fontThemes.map(nr=>({...nr,locked:$t&&!["Montserrat","AdobeArabic","Bebas Neue"].includes(nr.name)})),[Dt,Ft]=reactExports.useState(et||((rr=Tt==null?void 0:Tt[0])==null?void 0:rr.name)||""),[Ut,Ht]=reactExports.useState(Dt),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(!1);reactExports.useEffect(()=>{const nr=Tt.find(or=>or.name===Ut);if(!(nr!=null&&nr.file))return;const ir=nr.file.startsWith("http")?nr.file:`${window.location.origin}${nr.file}`;new FontFace(nr.name,`url(${ir})`).load().then(or=>{document.fonts.add(or),Zt(!0)}).catch(()=>Zt(!1))},[Ut]);const er=nr=>{Ft(nr.name),dt(nr.name),kt(nr.file),Ht(nr.name),Yt(!1)};return jsxRuntimeExports.jsxs("div",{className:`
      w-full relative mt-4
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark
      rounded-xl
      p-5
      shadow-inner
    `,children:[jsxRuntimeExports.jsxs("h3",{className:`
        flex items-center gap-2 text-lg font-semibold pb-6
        text-dashboard-text-light
        dark:text-dashboard-text-dark
`,children:[jsxRuntimeExports.jsx(Type,{size:18,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"}),"Font Style",jsxRuntimeExports.jsx(Tooltip,{text:"Choose how your book text appears. You can change fonts anytime before exporting or publishing."})]}),jsxRuntimeExports.jsx("div",{className:`
  mb-4 p-4 rounded-xl text-center
  bg-dashboard-hover-light
  dark:bg-dashboard-hover-dark
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
`,style:{fontFamily:Jt?Ut:"sans-serif",transition:"all 0.3s ease"},children:jsxRuntimeExports.jsx("p",{className:`
          font-medium
          text-dashboard-text-light
          dark:text-dashboard-text-dark`,style:{fontSize:Ut==="AdobeArabic"?"24px":"20px",lineHeight:Ut==="AdobeArabic"?"1.2":"1.5"},children:"AaBbCc  The quick brown fox jumps over the lazy dog."})}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Yt(!Kt),className:`
        w-full flex items-center justify-between
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        text-base rounded-lg p-2.5
        hover:bg-dashboard-hover-light
        dark:hover:bg-dashboard-hover-dark
        transition
        `,style:{fontFamily:Jt?Dt:"sans-serif"},children:[jsxRuntimeExports.jsx("span",{children:((sr=Tt.find(nr=>nr.name===Dt))==null?void 0:sr.label)||Dt}),Kt?jsxRuntimeExports.jsx(ChevronUp,{size:18}):jsxRuntimeExports.jsx(ChevronDown,{size:18})]}),Kt&&jsxRuntimeExports.jsx("div",{className:`
          absolute z-20 mt-2 w-full max-h-[260px] overflow-y-auto
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          rounded-lg shadow-lg
          scrollbar-thin
          scrollbar-thumb-dashboard-border-light
          dark:scrollbar-thumb-dashboard-border-dark
          scrollbar-track-transparent
        `,children:Tt.map(nr=>jsxRuntimeExports.jsxs("div",{onMouseEnter:()=>!nr.locked&&Ht(nr.name),onClick:()=>!nr.locked&&er(nr),className:`px-4 py-2 transition-all duration-150 cursor-pointer ${nr.locked?"text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed opacity-60 grayscale":"text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"} ${Dt===nr.name?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}`,style:{fontFamily:nr.name},children:[nr.label,nr.locked&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-yellow-500",children:""})]},nr.name))}),$t&&jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-400 mt-2 text-center",children:"Upgrade to unlock all fonts."}),jsxRuntimeExports.jsx("p",{className:`
        text-xs mt-3 text-center
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:"Hover to preview, click to select."})]})}function SectionSelector({sections:et,activeSectionId:dt,setActiveSectionId:kt,text:$t,setText:Tt,setSections:Dt,autoSaveDraft:Ft}){const Ut=reactExports.useRef(null),[Ht,Kt]=reactExports.useState(!1);reactExports.useEffect(()=>{function Zt(er){Ut.current&&!Ut.current.contains(er.target)&&Kt(!1)}return Ht&&document.addEventListener("mousedown",Zt),()=>{document.removeEventListener("mousedown",Zt)}},[Ht]);const Yt=et.find(Zt=>Zt.id===dt);function Jt(Zt){Dt(er=>er.map(rr=>rr.id===dt?{...rr,content:$t}:rr)),kt(Zt.id),Tt(Zt.content||""),Kt(!1),Ft==null||Ft()}return jsxRuntimeExports.jsxs("div",{ref:Ut,className:"relative w-full sm:w-auto sm:min-w-[220px]",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Kt(Zt=>!Zt),className:`
          w-full flex items-center justify-between
          rounded-lg px-4 py-2 text-sm transition
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          hover:bg-dashboard-hover-light
          dark:hover:bg-dashboard-hover-dark
        `,children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:(Yt==null?void 0:Yt.title)||"Untitled Section"}),Ht?jsxRuntimeExports.jsx(ChevronUp,{size:16,className:"opacity-80"}):jsxRuntimeExports.jsx(ChevronDown,{size:16,className:"opacity-80"})]}),Ht&&jsxRuntimeExports.jsx("div",{className:`
            absolute z-30 mt-2 w-full
            rounded-lg shadow-lg
            max-h-[260px] overflow-y-auto
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
          `,children:et.map(Zt=>{const er=Zt.id===dt;return jsxRuntimeExports.jsx("div",{onClick:()=>Jt(Zt),className:`
                  px-4 py-2 cursor-pointer text-sm transition
                  ${er?`
                        bg-dashboard-hover-light
                        dark:bg-dashboard-hover-dark
                        text-dashboard-text-light
                        dark:text-dashboard-text-dark
                      `:`
                        text-dashboard-text-light/70
                        dark:text-dashboard-text-dark/70
                        hover:bg-dashboard-hover-light
                        dark:hover:bg-dashboard-hover-dark
                      `}
                `,children:Zt.title||"Untitled Section"},Zt.id)})})]})}function BookPromptForm({text:et,setText:dt,pageCount:kt,setPageCount:$t,link:Tt,setLink:Dt,cover:Ft,setCover:Ut,title:Ht,setTitle:Kt,authorName:Yt,bookName:Jt,setBookName:Zt,bookType:er,setBookType:rr,loading:sr,bookId:nr,partLocked:ir,partNumber:lr,onClose:or,setShowGenerating:cr,fontName:dr,setFontName:ur,fontFile:pr,setFontFile:mr}){const[Rr,br]=reactExports.useState(!1),[_r,Mr]=reactExports.useState(!1),[Pr,Or]=reactExports.useState(null);useAuth();const[kr,Tr]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[xr,wr]=reactExports.useState(Yt||""),[zr,Hr]=reactExports.useState(!1),[Yr,rs]=reactExports.useState(!1),[as,es]=reactExports.useState(!1),[Xr,Wr]=reactExports.useState(""),[cs,ns]=reactExports.useState(""),[us,fs]=reactExports.useState(null),ss=reactExports.useRef(""),ps=reactExports.useRef(!1),[ls,js]=reactExports.useState(!1),[$s,Ds]=reactExports.useState(!0),[Ts,As]=reactExports.useState([{id:"section-1",title:"Section 1",content:""}]),[_s,Ms]=reactExports.useState("section-1"),[Vs,Gs]=reactExports.useState(null),[Ws,Xs]=reactExports.useState(""),Qs=Ts.find(ds=>ds.id===_s),Bs=Qs?xs(Qs.content):0,qs=Ts.reduce((ds,ys)=>ds+xs(ys.content),0),Ks=!!nr&&(ps.current||Yr);reactExports.useEffect(()=>{Ts.length===1&&Ts[0].id==="section-1"&&!Ts[0].content&&(et!=null&&et.trim())&&As(ds=>[{...ds[0],content:et}])},[et]);async function yn(ds){const ys=ds.target.files[0];if(ys){Hr(!0);try{const ws=ys.name.split(".").pop().toLowerCase();let Ss="";if(ws==="txt")Ss=await ys.text();else if(ws==="docx"){const vs=await __vitePreload(()=>import("./index-6c86b76e.js").then(bs=>bs.i),[]),Os=await ys.arrayBuffer();Ss=(await vs.extractRawText({arrayBuffer:Os})).value||""}else{y$4.error("Unsupported file. Please upload .txt or .docx");return}const Fs=xs(Ss);if(Fs>3e3){y$4.error(`This file contains ${Fs.toLocaleString()} words. 
The maximum allowed per chapter is ${3e3.toLocaleString()}. 
Please split the file into multiple chapters.`);return}dt(Ss),y$4.success(`Imported ${Fs.toLocaleString()} words successfully`)}catch(ws){console.error("Upload failed:",ws),y$4.error("Failed to import file.")}finally{Hr(!1),ds.target.value=""}}}reactExports.useEffect(()=>{dt(""),Kt(""),As([{id:"section-1",title:"Section 1",content:""}]),Ms("section-1"),rs(!1),Or(null),wr(Yt||""),Mr(!1),js(!1),ss.current="",ps.current=!1,Ds(!0)},[nr]),reactExports.useEffect(()=>{async function ds(){var ys,ws,Ss;if(!nr){Ds(!1);return}try{const Fs=lr>1?`/books/${nr}/part/${lr}/draft`:`/books/draft/${nr}`,vs=await axiosInstance.get(Fs);if((ys=vs.data)!=null&&ys.sections_json){const tn=(Array.isArray(vs.data.sections_json)?vs.data.sections_json:JSON.parse(vs.data.sections_json)).filter(bs=>bs.source==="gpt");if(tn.length){rs(!0),As(tn),Ms(tn[0].id),dt(tn[0].content||""),vs.data.book_name&&Zt(vs.data.book_name),vs.data.link&&Dt(vs.data.link),vs.data.author_name&&wr(vs.data.author_name),vs.data.book_type&&rr(vs.data.book_type),vs.data.title&&Kt(vs.data.title),ps.current=!0;return}}if((ws=vs.data)!=null&&ws.draft_text){if(rs(!1),vs.data.sections_json){const Os=Array.isArray(vs.data.sections_json)?vs.data.sections_json:JSON.parse(vs.data.sections_json);Os.length&&(As(Os),Ms(Os[0].id),dt(Os[0].content||"")),ps.current=!0}else dt(vs.data.draft_text||"");vs.data.book_name&&Zt(vs.data.book_name),vs.data.link&&Dt(vs.data.link),vs.data.last_saved_at&&Or(vs.data.last_saved_at),vs.data.author_name&&wr(vs.data.author_name),vs.data.book_type&&rr(vs.data.book_type),vs.data.title&&Kt(vs.data.title),kr||(Mr(!0),y$4.info("Loaded saved draft "),setTimeout(()=>Mr(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),Tr(!0));return}}catch(Fs){((Ss=Fs.response)==null?void 0:Ss.status)!==404&&console.error("Failed to load draft:",Fs)}finally{Ds(!1)}}ds()},[nr,lr]),reactExports.useEffect(()=>{if(!nr||!Ts.length||Rr||!ps.current)return;const ds=JSON.stringify(Ts);if(ds===ss.current)return;const ys=setTimeout(()=>{na(),ss.current=ds},1500);return()=>clearTimeout(ys)},[Ts]),reactExports.useEffect(()=>{if(!nr)return;const ds=()=>{const ys=lr>1?`/books/${nr}/part/${lr}/draft`:"/books/draft";navigator.sendBeacon(ys,JSON.stringify({bookId:nr,sections:Ts,bookName:Jt,link:Tt,author_name:xr||Yt,book_type:er,font_name:dr,font_file:pr}))};return window.addEventListener("beforeunload",ds),()=>window.removeEventListener("beforeunload",ds)},[nr,lr,Ts,Jt,Tt,xr,Yt,er,dr,pr]);const[,Dn]=reactExports.useState(0);reactExports.useEffect(()=>{const ds=setInterval(()=>{Dn(ys=>ys+1)},6e4);return()=>clearInterval(ds)},[]);async function na(){try{br(!0),await axiosInstance.post(lr>1?`/books/${nr}/part/${lr}/draft`:"/books/draft",{bookId:nr,draftText:et,sections:Ts,bookName:Jt,link:Tt,author_name:xr||Yt,book_type:er,font_name:dr,font_file:pr}),Or(new Date().toISOString()),js(!0),setTimeout(()=>{js(!1)},4e3)}catch(ds){console.error("Auto-save failed",ds)}finally{br(!1)}}async function jo(){if(!(et!=null&&et.trim())){y$4.warn("Write something before saving!");return}br(!0);try{await axiosInstance.post(`/books/${nr}/part/${lr}/draft`,{draftText:et,sections:Ts,title:chapterTitle}),y$4.success("Draft saved successfully ")}catch(ds){console.error("Save draft failed:",ds),y$4.error("Failed to save draft")}finally{br(!1)}}async function Ls(ds){ds.preventDefault();const ys=Ts.reduce((vs,Os)=>Os.id===_s?vs+xs(et):vs+xs(Os.content),0);if(ys>3e3){y$4.error(`This chapter has ${ys.toLocaleString()} words. The maximum allowed is ${3e3.toLocaleString()}. Please split this into another chapter.`);return}As(vs=>vs.map(Os=>Os.id===_s?{...Os,content:et}:Os));const ws=Ts.map(vs=>vs.id===_s?{...vs,content:et}:vs),Ss=ws.map((vs,Os)=>`Section ${Os+1}: ${vs.title||"Untitled"}
${vs.content||""}`).join(`

`),Fs={bookId:nr,prompt:Ss||et,sections:ws,pages:kt,link:Tt,coverImage:Ft,bookName:Jt,authorName:Yt,bookType:er,title:Ht,font_name:dr,font_file:pr,partNumber:lr,isEditing:Yr===!0};try{cr(!0),or(),axiosInstance.post("/books/prompt",Fs),y$4.success("Your chapter is being generated "),localStorage.removeItem("bookDraftLocal")}catch(vs){console.error("Generation failed to start:",vs),y$4.error("Failed to start generation"),cr(!1)}}function hs(ds){if(!ds)return null;const ys=new Date(ds),ws=Date.now()-ys.getTime(),Ss=Math.floor(ws/6e4);if(Ss<1)return"just now";if(Ss<60)return`${Ss} minute${Ss!==1?"s":""} ago`;const Fs=Math.floor(Ss/60);if(Fs<24)return`${Fs} hour${Fs!==1?"s":""} ago`;const vs=Math.floor(Fs/24);return`${vs} day${vs!==1?"s":""} ago`}function Gr(ds){if(!ds)return"";const ys=Date.now()-new Date(ds).getTime(),ws=Math.floor(ys/6e4);if(ws<1)return"";if(ws===1)return"Saved 1 minute ago";if(ws<60)return`Saved ${ws} minutes ago`;const Ss=Math.floor(ws/60);return`Saved ${Ss} hour${Ss!==1?"s":""} ago`}function gs(){if(!Xr.trim()){y$4.warn("Enter text to find");return}const ds=new RegExp(Xr,"gi"),ys=et.replace(ds,cs);dt(ys),y$4.success("Replaced!"),es(!1)}function xs(ds=""){const ys=ds.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return ys?ys.split(" ").length:0}function ms(ds){const ys=Ts.find(Fs=>Fs.id===ds);if(!ys)return;const ws=Ts.filter(Fs=>Fs.id!==ds);As(ws);const Ss=ws[0];Ss?(Ms(Ss.id),dt(Ss.content||"")):(Ms(null),dt("")),fs(ys),y$4(Fs=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-white",children:"Section deleted"}),jsxRuntimeExports.jsx("button",{onClick:()=>{As(vs=>[...vs,ys]),Ms(ys.id),dt(ys.content||""),fs(null),y$4.dismiss(Fs.id)},className:"text-sm px-2 py-1 rounded bg-green text-black font-medium",children:"Undo"})]}),{duration:5e3}),setTimeout(()=>{fs(null)},5e3)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_r&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:[" Restored your last saved draft"," ",Pr&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",hs(Pr),")"]})]}),jsxRuntimeExports.jsx("form",{onSubmit:Ls,children:jsxRuntimeExports.jsxs("div",{className:`
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          rounded-2xl
          shadow-2xl
          px-8 py-8
          space-y-6
        `,children:[jsxRuntimeExports.jsxs("div",{className:`
            rounded-xl
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            px-6 py-6
            space-y-5
          `,children:[jsxRuntimeExports.jsx("div",{className:`
              text-xs uppercase tracking-wide
              text-dashboard-text-muted-light
              dark:text-dashboard-text-muted-dark
            `,children:"Book Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-1 mb-2 font-medium
      text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:["Book Name",jsxRuntimeExports.jsx(Tooltip,{text:"You can change the book name anytime. It wont affect your content or progress."})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Shining",value:Jt,onChange:ds=>Zt(ds.target.value),className:`w-full px-4 py-3 rounded-lg
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                text-dashboard-text-light dark:text-dashboard-text-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light dark:placeholder-dashboard-muted-dark`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-1 text-dashboard-muted-light
              dark:text-dashboard-muted-dark mb-2 font-medium`,children:["Author Name",jsxRuntimeExports.jsx(Lock,{size:14,className:"text-gray-500"}),jsxRuntimeExports.jsx(Tooltip,{text:"The author name is set when the book is first created and cant be changed."})]}),jsxRuntimeExports.jsx("input",{type:"text",value:xr||Yt||"",readOnly:!0,className:`w-full px-4 py-3 rounded-lg bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light
                dark:placeholder-dashboard-muted-dark`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-1 text-dashboard-muted-light
                dark:text-dashboard-muted-dark mb-2 font-medium`,children:["Book Type",jsxRuntimeExports.jsx(Lock,{size:14,className:"text-gray-500"}),jsxRuntimeExports.jsx(Tooltip,{text:"Book type is chosen before setup and cant be changed"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:er?er.charAt(0).toUpperCase()+er.slice(1):"",readOnly:!0,className:`w-full px-4 py-3 rounded-lg bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light
                dark:placeholder-dashboard-muted-dark`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`block text-dashboard-muted-light
              dark:text-dashboard-muted-dark mb-2 font-medium`,children:["Chapter Title",jsxRuntimeExports.jsx(Tooltip,{text:"Each section can have its own chapter title. This helps organize longer books."})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Black Widow",value:Ht,onChange:ds=>Kt(ds.target.value),className:`w-full px-4 py-3 rounded-lg bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light
                dark:placeholder-dashboard-muted-dark`})]})]}),jsxRuntimeExports.jsxs("div",{className:`
            rounded-xl
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            px-6 py-5
            space-y-4
          `,children:[jsxRuntimeExports.jsxs("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:["Import & Tools",jsxRuntimeExports.jsx(Tooltip,{text:"Import text from a PDF, DOC, or TXT file. Nothing is published automatically. Use Find & Replace to refine content before finalizing your chapter."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".txt,.doc,.docx",id:"bookUpload",onChange:yn,className:"hidden"}),jsxRuntimeExports.jsxs("label",{htmlFor:"bookUpload",className:`
                cursor-pointer
                px-5 py-3
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                rounded-lg
                transition
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                flex items-center gap-2
  `,children:[jsxRuntimeExports.jsx(CloudUpload,{size:18}),"Upload File"]}),zr&&jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Processing"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>es(!0),className:`
                cursor-pointer
                px-5 py-3
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                rounded-lg
                transition
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                flex items-center gap-2
  `,children:[jsxRuntimeExports.jsx(Replace,{size:18}),"Find & Replace"]})]})]}),jsxRuntimeExports.jsxs("div",{className:`
            rounded-xl
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            px-6 py-5
            space-y-4
          `,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs uppercase tracking-wide text-gray-500",children:["Section",jsxRuntimeExports.jsx(Tooltip,{text:"Sections let you break your chapter into parts. Switching sections saves your work automatically. You can add, rename, or delete sections anytime. Each chapter can contain up to 3,000 total words across all sections. If you exceed the limit, split your content into another chapter or part."})]}),jsxRuntimeExports.jsx(SectionSelector,{sections:Ts,activeSectionId:_s,setActiveSectionId:Ms,text:et,setText:dt,setSections:As,autoSaveDraft:na}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const ds=`section-${Ts.length+1}`,ys={id:ds,title:`Section ${Ts.length+1}`,content:""};As(ws=>[...ws,ys]),Ms(ds),dt("")},className:`
                sm:ml-auto
                w-full sm:w-auto
                px-4 py-2
                bg-gray-800 hover:bg-gray-700
                rounded-lg
                text-sm text-white
              `,children:"+ Add Section"})]}),Qs&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:Vs===_s?jsxRuntimeExports.jsxs("div",{className:"max-w-md space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Rename section"}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:Ws,onChange:ds=>Xs(ds.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-3 py-2 text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Gs(null),Xs("")},className:"px-3 py-1 text-sm bg-gray-700 rounded text-white",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{As(ds=>ds.map(ys=>ys.id===_s?{...ys,title:Ws.trim()||ys.title}:ys)),Gs(null)},className:"px-3 py-1 text-sm bg-green rounded text-black font-medium",children:"Save"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold text-white cursor-pointer hover:opacity-80",onClick:()=>{Gs(_s),Xs(Qs.title||"")},children:[" ",Qs.title||"Untitled Section"]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400",children:["Section, ",Bs.toLocaleString()," ","words"]}),jsxRuntimeExports.jsxs("div",{className:`text-xs ${qs>3e3?"text-red-400":"text-gray-400"}`,children:["Chapter total,"," ",qs.toLocaleString()," /"," ",3e3.toLocaleString()," words"]})]})]}),Ts.length>1&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ms(_s),className:"text-xs px-3 py-1 rounded-lg bg-red-900/30 text-red-400 hover:bg-red-900/50 transition",children:"Delete"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-green mb-2",children:[jsxRuntimeExports.jsx("div",{className:"h-4 text-xs text-green",children:jsxRuntimeExports.jsx("span",{className:`transition-opacity duration-300 ${ls||Pr?"opacity-100":"opacity-0"}`,children:ls?"Saved just now":Pr?Gr(Pr):""})}),Rr&&jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic",children:"Saving"})]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 bg-black/30 rounded-xl",children:[qs>3e3*.9&&jsxRuntimeExports.jsx("div",{className:"mb-2 text-xs text-yellow-400",children:"Youre approaching the chapter word limit. Consider splitting into a new chapter."}),$s?jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-400 italic",children:"Loading your draft"}):jsxRuntimeExports.jsx(BookEditor,{bookId:nr,content:et,setContent:ds=>{dt(ds),As(ys=>ys.map(ws=>ws.id===_s?{...ws,content:ds}:ws))}},`${nr}-${lr}`)]}),jsxRuntimeExports.jsx(FontSelector,{fontName:dr,setFontName:ur,fontFile:pr,setFontFile:mr}),jsxRuntimeExports.jsx(CoverUpload,{cover:Ft,setCover:Ut}),er!=="non-fiction"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:`block text-dashboard-muted-light
dark:text-dashboard-muted-dark mb-2 font-medium`,children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:kt??"",onChange:ds=>$t(Number(ds.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-2 text-dashboard-muted-light
            dark:text-dashboard-muted-dark mb-2 font-medium`,children:[jsxRuntimeExports.jsx(Link$1,{size:16,className:"text-gray-400"}),"Optional Website or Author Link"]}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:Tt,onChange:ds=>Dt(ds.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:`
            mt-8
            pt-6
            border-t border-gray-700
            flex flex-col sm:flex-row gap-3
          `,children:[!ir&&jsxRuntimeExports.jsx("button",{type:"button",onClick:jo,disabled:Rr||!Ks,className:`flex-1 px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${Rr||!Ks?"bg-gray-700 opacity-50 cursor-not-allowed":"bg-gray-700 hover:bg-green hover:text-black"}`,children:Rr?"Saving...":Ks?"Save Draft":"Create chapter first"}),!sr&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-bookBtnColor text-black font-semibold text-lg shadow-lg hover:opacity-90 transition flex items-center justify-center gap-2",children:Yr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookOpenCheck,{size:18,className:"text-black"}),"Commit Final Chapter"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Rocket,{size:18,className:"text-black"}),"Generate Chapter"]})}),as&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-xl w-full max-w-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl text-white mb-4 font-semibold",children:"Find & Replace"}),jsxRuntimeExports.jsx("label",{className:`text-dashboard-muted-light
                  dark:text-dashboard-muted-dark text-sm`,children:"Find"}),jsxRuntimeExports.jsx("input",{type:"text",value:Xr,onChange:ds=>Wr(ds.target.value),className:"w-full px-4 py-2 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"}),jsxRuntimeExports.jsx("label",{className:`text-dashboard-muted-light
                  dark:text-dashboard-muted-dark text-sm`,children:"Replace With"}),jsxRuntimeExports.jsx("input",{type:"text",value:cs,onChange:ds=>ns(ds.target.value),className:"w-full px-4 py-2 mb-4 rounded-lg bg-gray-800 text-white border border-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>es(!1),className:"px-4 py-2 bg-gray-700 rounded-lg text-sm",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:gs,className:"px-4 py-2 bg-green text-black font-semibold rounded-lg text-sm",children:"Replace"})]})]})})]})]})})]})}function BookPromptModal({isOpen:et,onClose:dt,bookId:kt,partNumber:$t=1,onSubmitted:Tt,onCompleted:Dt,setShowGenerating:Ft,initialBookData:Ut}){const[Ht,Kt]=reactExports.useState(""),[Yt,Jt]=reactExports.useState(10),[Zt,er]=reactExports.useState(""),[rr,sr]=reactExports.useState(null),[nr,ir]=reactExports.useState(""),[lr,or]=reactExports.useState(!1),[cr,dr]=reactExports.useState(!1),[ur,pr]=reactExports.useState(!1),[mr,jr]=reactExports.useState((Ut==null?void 0:Ut.bookName)||""),[Rr,br]=reactExports.useState((Ut==null?void 0:Ut.authorName)||""),[_r,Mr]=reactExports.useState((Ut==null?void 0:Ut.bookType)||"fiction"),[Pr,Or]=reactExports.useState("Classic AdobeArabic"),[kr,Tr]=reactExports.useState("/fonts/AdobeArabic-Regular.ttf");reactExports.useEffect(()=>{Ut&&(jr(Ut.bookName||""),br(Ut.authorName||""),Mr(Ut.bookType||"fiction"))},[Ut]),reactExports.useEffect(()=>{et||(Kt(""),Jt(10),er(""),sr(null),ir(""),br(""))},[et]);async function xr(wr){var zr,Hr;if(wr.preventDefault(),!Ht.trim()){y$4.error("Please enter your book idea or prompt first.");return}dt(),Ft(!0);try{axiosInstance.post("/books/prompt",{bookId:kt,prompt:Ht,sections,pages:Yt,link:Zt,coverImage:rr,title:nr,authorName:Rr,bookName:mr,partNumber:$t,bookType:_r}),y$4.success(" Book section generated successfully!"),typeof Dt=="function"&&Dt(),typeof Tt=="function"&&Tt(kt,Ht)}catch(Yr){Ft(!1),y$4.error(((Hr=(zr=Yr.response)==null?void 0:zr.data)==null?void 0:Hr.message)||"Book generation failed. Try again."),console.error(" Book generation error:",Yr)}finally{or(!1)}}return et?jsxRuntimeExports.jsxs("div",{className:`
        fixed inset-0 z-50
        flex flex-col overflow-hidden
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
      `,children:[jsxRuntimeExports.jsxs("div",{className:`
    relative flex items-center justify-center
    px-6 py-5
    border-b border-dashboard-border-light
    dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light
    dark:bg-dashboard-sidebar-dark
  `,children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-center text-dashboard-text-light dark:text-dashboard-text-dark",children:[" Build Your Novel  Part ",$t]}),jsxRuntimeExports.jsx("button",{onClick:dt,className:`
            absolute left-6 md:left-36
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light
            dark:hover:text-dashboard-text-dark
            transition
            text-lg
          `,children:" Back"})]}),jsxRuntimeExports.jsx("div",{className:`
        flex-1 overflow-y-auto
        p-8
        max-w-5xl mx-auto w-full
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
      `,children:jsxRuntimeExports.jsx(BookPromptForm,{text:Ht,setText:Kt,pageCount:Yt,setPageCount:Jt,link:Zt,setLink:er,cover:rr,setCover:sr,title:nr,setTitle:ir,authorName:Rr,setAuthorName:br,bookName:mr,setBookName:jr,bookType:_r,setBookType:Mr,onSubmit:xr,loading:lr,showPreview:cr,setShowPreview:dr,setShowGenerating:Ft,bookId:kt,setBookId:()=>{},partLocked:ur,partNumber:$t,onClose:dt,fontName:Pr,setFontName:Or,fontFile:kr,setFontFile:Tr},`${kt}-${$t}`)})]}):null}const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(et){Number.isInteger(et)&&(verbosity=et)}function getVerbosityLevel(){return verbosity}function info(et){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${et}`)}function warn(et){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${et}`)}function unreachable(et){throw new Error(et)}function assert(et,dt){et||unreachable(dt)}function _isValidProtocol(et){switch(et==null?void 0:et.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(et,dt=null,kt=null){if(!et)return null;if(kt&&typeof et=="string"){if(kt.addDefaultProtocol&&et.startsWith("www.")){const Tt=et.match(/\./g);(Tt==null?void 0:Tt.length)>=2&&(et=`http://${et}`)}if(kt.tryConvertEncoding)try{et=stringToUTF8String(et)}catch{}}const $t=dt?URL.parse(et,dt):URL.parse(et);return _isValidProtocol($t)?$t:null}function updateUrlHash(et,dt,kt=!1){const $t=URL.parse(et);return $t?($t.hash=dt,$t.href):kt&&createValidAbsoluteUrl(et,"http://example.com")?et.split("#",1)[0]+`${dt?`#${dt}`:""}`:""}function shadow(et,dt,kt,$t=!1){return Object.defineProperty(et,dt,{value:kt,enumerable:!$t,configurable:!0,writable:!1}),kt}const BaseException=function et(){function dt(kt,$t){this.message=kt,this.name=$t}return dt.prototype=new Error,dt.constructor=dt,dt}();class PasswordException extends BaseException{constructor(dt,kt){super(dt,"PasswordException"),this.code=kt}}class UnknownErrorException extends BaseException{constructor(dt,kt){super(dt,"UnknownErrorException"),this.details=kt}}class InvalidPDFException extends BaseException{constructor(dt){super(dt,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(dt,kt,$t){super(dt,"ResponseException"),this.status=kt,this.missing=$t}}class FormatError extends BaseException{constructor(dt){super(dt,"FormatError")}}class AbortException extends BaseException{constructor(dt){super(dt,"AbortException")}}function bytesToString(et){(typeof et!="object"||(et==null?void 0:et.length)===void 0)&&unreachable("Invalid argument for bytesToString");const dt=et.length,kt=8192;if(dt<kt)return String.fromCharCode.apply(null,et);const $t=[];for(let Tt=0;Tt<dt;Tt+=kt){const Dt=Math.min(Tt+kt,dt),Ft=et.subarray(Tt,Dt);$t.push(String.fromCharCode.apply(null,Ft))}return $t.join("")}function stringToBytes(et){typeof et!="string"&&unreachable("Invalid argument for stringToBytes");const dt=et.length,kt=new Uint8Array(dt);for(let $t=0;$t<dt;++$t)kt[$t]=et.charCodeAt($t)&255;return kt}function string32(et){return String.fromCharCode(et>>24&255,et>>16&255,et>>8&255,et&255)}function isLittleEndian(){const et=new Uint8Array(4);return et[0]=1,new Uint32Array(et.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:dt,userAgent:kt}=navigator;return shadow(this,"platform",{isAndroid:kt.includes("Android"),isLinux:dt.includes("Linux"),isMac:dt.includes("Mac"),isWindows:dt.includes("Win"),isFirefox:kt.includes("Firefox")})}static get isCSSRoundSupported(){var dt,kt;return shadow(this,"isCSSRoundSupported",(kt=(dt=globalThis.CSS)==null?void 0:dt.supports)==null?void 0:kt.call(dt,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),et=>et.toString(16).padStart(2,"0"));var v0,gw,Vv,q2;class Util{static makeHexColor(dt,kt,$t){return`#${hexNumbers[dt]}${hexNumbers[kt]}${hexNumbers[$t]}`}static domMatrixToTransform(dt){return[dt.a,dt.b,dt.c,dt.d,dt.e,dt.f]}static scaleMinMax(dt,kt){let $t;dt[0]?(dt[0]<0&&($t=kt[0],kt[0]=kt[2],kt[2]=$t),kt[0]*=dt[0],kt[2]*=dt[0],dt[3]<0&&($t=kt[1],kt[1]=kt[3],kt[3]=$t),kt[1]*=dt[3],kt[3]*=dt[3]):($t=kt[0],kt[0]=kt[1],kt[1]=$t,$t=kt[2],kt[2]=kt[3],kt[3]=$t,dt[1]<0&&($t=kt[1],kt[1]=kt[3],kt[3]=$t),kt[1]*=dt[1],kt[3]*=dt[1],dt[2]<0&&($t=kt[0],kt[0]=kt[2],kt[2]=$t),kt[0]*=dt[2],kt[2]*=dt[2]),kt[0]+=dt[4],kt[1]+=dt[5],kt[2]+=dt[4],kt[3]+=dt[5]}static transform(dt,kt){return[dt[0]*kt[0]+dt[2]*kt[1],dt[1]*kt[0]+dt[3]*kt[1],dt[0]*kt[2]+dt[2]*kt[3],dt[1]*kt[2]+dt[3]*kt[3],dt[0]*kt[4]+dt[2]*kt[5]+dt[4],dt[1]*kt[4]+dt[3]*kt[5]+dt[5]]}static multiplyByDOMMatrix(dt,kt){return[dt[0]*kt.a+dt[2]*kt.b,dt[1]*kt.a+dt[3]*kt.b,dt[0]*kt.c+dt[2]*kt.d,dt[1]*kt.c+dt[3]*kt.d,dt[0]*kt.e+dt[2]*kt.f+dt[4],dt[1]*kt.e+dt[3]*kt.f+dt[5]]}static applyTransform(dt,kt,$t=0){const Tt=dt[$t],Dt=dt[$t+1];dt[$t]=Tt*kt[0]+Dt*kt[2]+kt[4],dt[$t+1]=Tt*kt[1]+Dt*kt[3]+kt[5]}static applyTransformToBezier(dt,kt,$t=0){const Tt=kt[0],Dt=kt[1],Ft=kt[2],Ut=kt[3],Ht=kt[4],Kt=kt[5];for(let Yt=0;Yt<6;Yt+=2){const Jt=dt[$t+Yt],Zt=dt[$t+Yt+1];dt[$t+Yt]=Jt*Tt+Zt*Ft+Ht,dt[$t+Yt+1]=Jt*Dt+Zt*Ut+Kt}}static applyInverseTransform(dt,kt){const $t=dt[0],Tt=dt[1],Dt=kt[0]*kt[3]-kt[1]*kt[2];dt[0]=($t*kt[3]-Tt*kt[2]+kt[2]*kt[5]-kt[4]*kt[3])/Dt,dt[1]=(-$t*kt[1]+Tt*kt[0]+kt[4]*kt[1]-kt[5]*kt[0])/Dt}static axialAlignedBoundingBox(dt,kt,$t){const Tt=kt[0],Dt=kt[1],Ft=kt[2],Ut=kt[3],Ht=kt[4],Kt=kt[5],Yt=dt[0],Jt=dt[1],Zt=dt[2],er=dt[3];let rr=Tt*Yt+Ht,sr=rr,nr=Tt*Zt+Ht,ir=nr,lr=Ut*Jt+Kt,or=lr,cr=Ut*er+Kt,dr=cr;if(Dt!==0||Ft!==0){const ur=Dt*Yt,pr=Dt*Zt,mr=Ft*Jt,jr=Ft*er;rr+=mr,ir+=mr,nr+=jr,sr+=jr,lr+=ur,dr+=ur,cr+=pr,or+=pr}$t[0]=Math.min($t[0],rr,nr,sr,ir),$t[1]=Math.min($t[1],lr,cr,or,dr),$t[2]=Math.max($t[2],rr,nr,sr,ir),$t[3]=Math.max($t[3],lr,cr,or,dr)}static inverseTransform(dt){const kt=dt[0]*dt[3]-dt[1]*dt[2];return[dt[3]/kt,-dt[1]/kt,-dt[2]/kt,dt[0]/kt,(dt[2]*dt[5]-dt[4]*dt[3])/kt,(dt[4]*dt[1]-dt[5]*dt[0])/kt]}static singularValueDecompose2dScale(dt,kt){const $t=dt[0],Tt=dt[1],Dt=dt[2],Ft=dt[3],Ut=$t**2+Tt**2,Ht=$t*Dt+Tt*Ft,Kt=Dt**2+Ft**2,Yt=(Ut+Kt)/2,Jt=Math.sqrt(Yt**2-(Ut*Kt-Ht**2));kt[0]=Math.sqrt(Yt+Jt||1),kt[1]=Math.sqrt(Yt-Jt||1)}static normalizeRect(dt){const kt=dt.slice(0);return dt[0]>dt[2]&&(kt[0]=dt[2],kt[2]=dt[0]),dt[1]>dt[3]&&(kt[1]=dt[3],kt[3]=dt[1]),kt}static intersect(dt,kt){const $t=Math.max(Math.min(dt[0],dt[2]),Math.min(kt[0],kt[2])),Tt=Math.min(Math.max(dt[0],dt[2]),Math.max(kt[0],kt[2]));if($t>Tt)return null;const Dt=Math.max(Math.min(dt[1],dt[3]),Math.min(kt[1],kt[3])),Ft=Math.min(Math.max(dt[1],dt[3]),Math.max(kt[1],kt[3]));return Dt>Ft?null:[$t,Dt,Tt,Ft]}static pointBoundingBox(dt,kt,$t){$t[0]=Math.min($t[0],dt),$t[1]=Math.min($t[1],kt),$t[2]=Math.max($t[2],dt),$t[3]=Math.max($t[3],kt)}static rectBoundingBox(dt,kt,$t,Tt,Dt){Dt[0]=Math.min(Dt[0],dt,$t),Dt[1]=Math.min(Dt[1],kt,Tt),Dt[2]=Math.max(Dt[2],dt,$t),Dt[3]=Math.max(Dt[3],kt,Tt)}static bezierBoundingBox(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt){Kt[0]=Math.min(Kt[0],dt,Ut),Kt[1]=Math.min(Kt[1],kt,Ht),Kt[2]=Math.max(Kt[2],dt,Ut),Kt[3]=Math.max(Kt[3],kt,Ht),Br(this,Vv,q2).call(this,dt,$t,Dt,Ut,kt,Tt,Ft,Ht,3*(-dt+3*($t-Dt)+Ut),6*(dt-2*$t+Dt),3*($t-dt),Kt),Br(this,Vv,q2).call(this,dt,$t,Dt,Ut,kt,Tt,Ft,Ht,3*(-kt+3*(Tt-Ft)+Ht),6*(kt-2*Tt+Ft),3*(Tt-kt),Kt)}}v0=new WeakSet,gw=function(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt,Yt){if(Kt<=0||Kt>=1)return;const Jt=1-Kt,Zt=Kt*Kt,er=Zt*Kt,rr=Jt*(Jt*(Jt*dt+3*Kt*kt)+3*Zt*$t)+er*Tt,sr=Jt*(Jt*(Jt*Dt+3*Kt*Ft)+3*Zt*Ut)+er*Ht;Yt[0]=Math.min(Yt[0],rr),Yt[1]=Math.min(Yt[1],sr),Yt[2]=Math.max(Yt[2],rr),Yt[3]=Math.max(Yt[3],sr)},Vv=new WeakSet,q2=function(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt){if(Math.abs(Kt)<1e-12){Math.abs(Yt)>=1e-12&&Br(this,v0,gw).call(this,dt,kt,$t,Tt,Dt,Ft,Ut,Ht,-Jt/Yt,Zt);return}const er=Yt**2-4*Jt*Kt;if(er<0)return;const rr=Math.sqrt(er),sr=2*Kt;Br(this,v0,gw).call(this,dt,kt,$t,Tt,Dt,Ft,Ut,Ht,(-Yt+rr)/sr,Zt),Br(this,v0,gw).call(this,dt,kt,$t,Tt,Dt,Ft,Ut,Ht,(-Yt-rr)/sr,Zt)},yr(Util,v0),yr(Util,Vv);function stringToUTF8String(et){return decodeURIComponent(escape(et))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(et){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),et.replaceAll(NormalizeRegex,(dt,kt,$t)=>kt?kt.normalize("NFKC"):NormalizationMap.get($t))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const et=new Uint8Array(32);return crypto.getRandomValues(et),bytesToString(et)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(et,dt,kt){if(!Array.isArray(kt)||kt.length<2)return!1;const[$t,Tt,...Dt]=kt;if(!et($t)&&!Number.isInteger($t)||!dt(Tt))return!1;const Ft=Dt.length;let Ut=!0;switch(Tt.name){case"XYZ":if(Ft<2||Ft>3)return!1;break;case"Fit":case"FitB":return Ft===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(Ft>1)return!1;break;case"FitR":if(Ft!==4)return!1;Ut=!1;break;default:return!1}for(const Ht of Dt)if(!(typeof Ht=="number"||Ut&&Ht===null))return!1;return!0}function MathClamp(et,dt,kt){return Math.min(Math.max(et,dt),kt)}function toBase64Util(et){return Uint8Array.prototype.toBase64?et.toBase64():btoa(bytesToString(et))}function fromBase64Util(et){return Uint8Array.fromBase64?Uint8Array.fromBase64(et):stringToBytes(atob(et))}typeof Promise.try!="function"&&(Promise.try=function(et,...dt){return new Promise(kt=>{kt(et(...dt))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(et){return et.reduce((dt,kt)=>dt+kt,0)});class XfaText{static textContent(dt){const kt=[],$t={items:kt,styles:Object.create(null)};function Tt(Dt){var Ht;if(!Dt)return;let Ft=null;const Ut=Dt.name;if(Ut==="#text")Ft=Dt.value;else if(XfaText.shouldBuildText(Ut))(Ht=Dt==null?void 0:Dt.attributes)!=null&&Ht.textContent?Ft=Dt.attributes.textContent:Dt.value&&(Ft=Dt.value);else return;if(Ft!==null&&kt.push({str:Ft}),!!Dt.children)for(const Kt of Dt.children)Tt(Kt)}return Tt(dt),$t}static shouldBuildText(dt){return!(dt==="textarea"||dt==="input"||dt==="option"||dt==="select")}}class XfaLayer{static setupStorage(dt,kt,$t,Tt,Dt){const Ft=Tt.getValue(kt,{value:null});switch($t.name){case"textarea":if(Ft.value!==null&&(dt.textContent=Ft.value),Dt==="print")break;dt.addEventListener("input",Ut=>{Tt.setValue(kt,{value:Ut.target.value})});break;case"input":if($t.attributes.type==="radio"||$t.attributes.type==="checkbox"){if(Ft.value===$t.attributes.xfaOn?dt.setAttribute("checked",!0):Ft.value===$t.attributes.xfaOff&&dt.removeAttribute("checked"),Dt==="print")break;dt.addEventListener("change",Ut=>{Tt.setValue(kt,{value:Ut.target.checked?Ut.target.getAttribute("xfaOn"):Ut.target.getAttribute("xfaOff")})})}else{if(Ft.value!==null&&dt.setAttribute("value",Ft.value),Dt==="print")break;dt.addEventListener("input",Ut=>{Tt.setValue(kt,{value:Ut.target.value})})}break;case"select":if(Ft.value!==null){dt.setAttribute("value",Ft.value);for(const Ut of $t.children)Ut.attributes.value===Ft.value?Ut.attributes.selected=!0:Ut.attributes.hasOwnProperty("selected")&&delete Ut.attributes.selected}dt.addEventListener("input",Ut=>{const Ht=Ut.target.options,Kt=Ht.selectedIndex===-1?"":Ht[Ht.selectedIndex].value;Tt.setValue(kt,{value:Kt})});break}}static setAttributes({html:dt,element:kt,storage:$t=null,intent:Tt,linkService:Dt}){const{attributes:Ft}=kt,Ut=dt instanceof HTMLAnchorElement;Ft.type==="radio"&&(Ft.name=`${Ft.name}-${Tt}`);for(const[Ht,Kt]of Object.entries(Ft))if(Kt!=null)switch(Ht){case"class":Kt.length&&dt.setAttribute(Ht,Kt.join(" "));break;case"dataId":break;case"id":dt.setAttribute("data-element-id",Kt);break;case"style":Object.assign(dt.style,Kt);break;case"textContent":dt.textContent=Kt;break;default:(!Ut||Ht!=="href"&&Ht!=="newWindow")&&dt.setAttribute(Ht,Kt)}Ut&&Dt.addLinkAttributes(dt,Ft.href,Ft.newWindow),$t&&Ft.dataId&&this.setupStorage(dt,Ft.dataId,kt,$t)}static render(dt){var Jt,Zt;const kt=dt.annotationStorage,$t=dt.linkService,Tt=dt.xfaHtml,Dt=dt.intent||"display",Ft=document.createElement(Tt.name);Tt.attributes&&this.setAttributes({html:Ft,element:Tt,intent:Dt,linkService:$t});const Ut=Dt!=="richText",Ht=dt.div;if(Ht.append(Ft),dt.viewport){const er=`matrix(${dt.viewport.transform.join(",")})`;Ht.style.transform=er}Ut&&Ht.setAttribute("class","xfaLayer xfaFont");const Kt=[];if(Tt.children.length===0){if(Tt.value){const er=document.createTextNode(Tt.value);Ft.append(er),Ut&&XfaText.shouldBuildText(Tt.name)&&Kt.push(er)}return{textDivs:Kt}}const Yt=[[Tt,-1,Ft]];for(;Yt.length>0;){const[er,rr,sr]=Yt.at(-1);if(rr+1===er.children.length){Yt.pop();continue}const nr=er.children[++Yt.at(-1)[1]];if(nr===null)continue;const{name:ir}=nr;if(ir==="#text"){const or=document.createTextNode(nr.value);Kt.push(or),sr.append(or);continue}const lr=(Jt=nr==null?void 0:nr.attributes)!=null&&Jt.xmlns?document.createElementNS(nr.attributes.xmlns,ir):document.createElement(ir);if(sr.append(lr),nr.attributes&&this.setAttributes({html:lr,element:nr,storage:kt,intent:Dt,linkService:$t}),((Zt=nr.children)==null?void 0:Zt.length)>0)Yt.push([nr,-1,lr]);else if(nr.value){const or=document.createTextNode(nr.value);Ut&&XfaText.shouldBuildText(ir)&&Kt.push(or),lr.append(or)}}for(const er of Ht.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))er.setAttribute("readOnly",!0);return{textDivs:Kt}}static update(dt){const kt=`matrix(${dt.viewport.transform.join(",")})`;dt.div.style.transform=kt,dt.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",Am=class Am{};Es(Am,"CSS",96),Es(Am,"PDF",72),Es(Am,"PDF_TO_CSS_UNITS",Am.CSS/Am.PDF);let PixelsPerInch=Am;async function fetchData(et,dt="text"){if(isValidFetchUrl(et,document.baseURI)){const kt=await fetch(et);if(!kt.ok)throw new Error(kt.statusText);switch(dt){case"arraybuffer":return kt.arrayBuffer();case"blob":return kt.blob();case"json":return kt.json()}return kt.text()}return new Promise((kt,$t)=>{const Tt=new XMLHttpRequest;Tt.open("GET",et,!0),Tt.responseType=dt,Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){switch(dt){case"arraybuffer":case"blob":case"json":kt(Tt.response);return}kt(Tt.responseText);return}$t(new Error(Tt.statusText))}},Tt.send(null)})}class PageViewport{constructor({viewBox:dt,userUnit:kt,scale:$t,rotation:Tt,offsetX:Dt=0,offsetY:Ft=0,dontFlip:Ut=!1}){this.viewBox=dt,this.userUnit=kt,this.scale=$t,this.rotation=Tt,this.offsetX=Dt,this.offsetY=Ft,$t*=kt;const Ht=(dt[2]+dt[0])/2,Kt=(dt[3]+dt[1])/2;let Yt,Jt,Zt,er;switch(Tt%=360,Tt<0&&(Tt+=360),Tt){case 180:Yt=-1,Jt=0,Zt=0,er=1;break;case 90:Yt=0,Jt=1,Zt=1,er=0;break;case 270:Yt=0,Jt=-1,Zt=-1,er=0;break;case 0:Yt=1,Jt=0,Zt=0,er=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Zt=-Zt,er=-er);let rr,sr,nr,ir;Yt===0?(rr=Math.abs(Kt-dt[1])*$t+Dt,sr=Math.abs(Ht-dt[0])*$t+Ft,nr=(dt[3]-dt[1])*$t,ir=(dt[2]-dt[0])*$t):(rr=Math.abs(Ht-dt[0])*$t+Dt,sr=Math.abs(Kt-dt[1])*$t+Ft,nr=(dt[2]-dt[0])*$t,ir=(dt[3]-dt[1])*$t),this.transform=[Yt*$t,Jt*$t,Zt*$t,er*$t,rr-Yt*$t*Ht-Zt*$t*Kt,sr-Jt*$t*Ht-er*$t*Kt],this.width=nr,this.height=ir}get rawDims(){const dt=this.viewBox;return shadow(this,"rawDims",{pageWidth:dt[2]-dt[0],pageHeight:dt[3]-dt[1],pageX:dt[0],pageY:dt[1]})}clone({scale:dt=this.scale,rotation:kt=this.rotation,offsetX:$t=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:Dt=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:dt,rotation:kt,offsetX:$t,offsetY:Tt,dontFlip:Dt})}convertToViewportPoint(dt,kt){const $t=[dt,kt];return Util.applyTransform($t,this.transform),$t}convertToViewportRectangle(dt){const kt=[dt[0],dt[1]];Util.applyTransform(kt,this.transform);const $t=[dt[2],dt[3]];return Util.applyTransform($t,this.transform),[kt[0],kt[1],$t[0],$t[1]]}convertToPdfPoint(dt,kt){const $t=[dt,kt];return Util.applyInverseTransform($t,this.transform),$t}}class RenderingCancelledException extends BaseException{constructor(dt,kt=0){super(dt,"RenderingCancelledException"),this.extraDelay=kt}}function isDataScheme(et){const dt=et.length;let kt=0;for(;kt<dt&&et[kt].trim()==="";)kt++;return et.substring(kt,kt+5).toLowerCase()==="data:"}function isPdfFile(et){return typeof et=="string"&&/\.pdf$/i.test(et)}function getFilenameFromUrl(et){return[et]=et.split(/[#?]/,1),et.substring(et.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(et,dt="document.pdf"){if(typeof et!="string")return dt;if(isDataScheme(et))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),dt;const $t=(Ut=>{try{return new URL(Ut)}catch{try{return new URL(decodeURIComponent(Ut))}catch{try{return new URL(Ut,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(Ut),"https://foo.bar")}catch{return null}}}}})(et);if(!$t)return dt;const Tt=Ut=>{try{let Ht=decodeURIComponent(Ut);return Ht.includes("/")?(Ht=Ht.split("/").at(-1),Ht.test(/^\.pdf$/i)?Ht:Ut):Ht}catch{return Ut}},Dt=/\.pdf$/i,Ft=$t.pathname.split("/").at(-1);if(Dt.test(Ft))return Tt(Ft);if($t.searchParams.size>0){const Ut=Array.from($t.searchParams.values()).reverse();for(const Kt of Ut)if(Dt.test(Kt))return Tt(Kt);const Ht=Array.from($t.searchParams.keys()).reverse();for(const Kt of Ht)if(Dt.test(Kt))return Tt(Kt)}if($t.hash){const Ht=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec($t.hash);if(Ht)return Tt(Ht[0])}return dt}class StatTimer{constructor(){Es(this,"started",Object.create(null));Es(this,"times",[])}time(dt){dt in this.started&&warn(`Timer is already running for ${dt}`),this.started[dt]=Date.now()}timeEnd(dt){dt in this.started||warn(`Timer has not been started for ${dt}`),this.times.push({name:dt,start:this.started[dt],end:Date.now()}),delete this.started[dt]}toString(){const dt=[];let kt=0;for(const{name:$t}of this.times)kt=Math.max($t.length,kt);for(const{name:$t,start:Tt,end:Dt}of this.times)dt.push(`${$t.padEnd(kt)} ${Dt-Tt}ms
`);return dt.join("")}}function isValidFetchUrl(et,dt){const kt=dt?URL.parse(et,dt):URL.parse(et);return(kt==null?void 0:kt.protocol)==="http:"||(kt==null?void 0:kt.protocol)==="https:"}function noContextMenu(et){et.preventDefault()}function stopEvent(et){et.preventDefault(),et.stopPropagation()}function deprecated(et){console.log("Deprecated API usage: "+et)}var zv;class PDFDateString{static toDateObject(dt){if(dt instanceof Date)return dt;if(!dt||typeof dt!="string")return null;ar(this,zv)||vr(this,zv,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const kt=ar(this,zv).exec(dt);if(!kt)return null;const $t=parseInt(kt[1],10);let Tt=parseInt(kt[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let Dt=parseInt(kt[3],10);Dt=Dt>=1&&Dt<=31?Dt:1;let Ft=parseInt(kt[4],10);Ft=Ft>=0&&Ft<=23?Ft:0;let Ut=parseInt(kt[5],10);Ut=Ut>=0&&Ut<=59?Ut:0;let Ht=parseInt(kt[6],10);Ht=Ht>=0&&Ht<=59?Ht:0;const Kt=kt[7]||"Z";let Yt=parseInt(kt[8],10);Yt=Yt>=0&&Yt<=23?Yt:0;let Jt=parseInt(kt[9],10)||0;return Jt=Jt>=0&&Jt<=59?Jt:0,Kt==="-"?(Ft+=Yt,Ut+=Jt):Kt==="+"&&(Ft-=Yt,Ut-=Jt),new Date(Date.UTC($t,Tt,Dt,Ft,Ut,Ht))}}zv=new WeakMap,yr(PDFDateString,zv,void 0);function getXfaPageViewport(et,{scale:dt=1,rotation:kt=0}){const{width:$t,height:Tt}=et.attributes.style,Dt=[0,0,parseInt($t),parseInt(Tt)];return new PageViewport({viewBox:Dt,userUnit:1,scale:dt,rotation:kt})}function getRGB(et){if(et.startsWith("#")){const dt=parseInt(et.slice(1),16);return[(dt&16711680)>>16,(dt&65280)>>8,dt&255]}return et.startsWith("rgb(")?et.slice(4,-1).split(",").map(dt=>parseInt(dt)):et.startsWith("rgba(")?et.slice(5,-1).split(",").map(dt=>parseInt(dt)).slice(0,3):(warn(`Not a valid color format: "${et}"`),[0,0,0])}function getColorValues(et){const dt=document.createElement("span");dt.style.visibility="hidden",dt.style.colorScheme="only light",document.body.append(dt);for(const kt of et.keys()){dt.style.color=kt;const $t=window.getComputedStyle(dt).color;et.set(kt,getRGB($t))}dt.remove()}function getCurrentTransform(et){const{a:dt,b:kt,c:$t,d:Tt,e:Dt,f:Ft}=et.getTransform();return[dt,kt,$t,Tt,Dt,Ft]}function getCurrentTransformInverse(et){const{a:dt,b:kt,c:$t,d:Tt,e:Dt,f:Ft}=et.getTransform().invertSelf();return[dt,kt,$t,Tt,Dt,Ft]}function setLayerDimensions(et,dt,kt=!1,$t=!0){if(dt instanceof PageViewport){const{pageWidth:Tt,pageHeight:Dt}=dt.rawDims,{style:Ft}=et,Ut=util_FeatureTest.isCSSRoundSupported,Ht=`var(--total-scale-factor) * ${Tt}px`,Kt=`var(--total-scale-factor) * ${Dt}px`,Yt=Ut?`round(down, ${Ht}, var(--scale-round-x))`:`calc(${Ht})`,Jt=Ut?`round(down, ${Kt}, var(--scale-round-y))`:`calc(${Kt})`;!kt||dt.rotation%180===0?(Ft.width=Yt,Ft.height=Jt):(Ft.width=Jt,Ft.height=Yt)}$t&&et.setAttribute("data-main-rotation",dt.rotation)}class OutputScale{constructor(){const{pixelRatio:dt}=OutputScale;this.sx=dt,this.sy=dt}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(dt,kt,$t,Tt,Dt=-1){let Ft=1/0,Ut=1/0,Ht=1/0;$t=OutputScale.capPixels($t,Dt),$t>0&&(Ft=Math.sqrt($t/(dt*kt))),Tt!==-1&&(Ut=Tt/dt,Ht=Tt/kt);const Kt=Math.min(Ft,Ut,Ht);return this.sx>Kt||this.sy>Kt?(this.sx=Kt,this.sy=Kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(dt,kt){if(kt>=0){const $t=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+kt/100));return dt>0?Math.min(dt,$t):$t}return dt}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var dt;return shadow(this,"isDarkMode",!!((dt=window==null?void 0:window.matchMedia)!=null&&dt.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const dt=document.createElement("span");dt.classList.add("comment","sidebar");const{style:kt}=dt;kt.width=kt.height="0",kt.display="none",kt.color="var(--comment-fg-color)",document.body.append(dt);const{color:$t}=window.getComputedStyle(dt);return dt.remove(),shadow(this,"commentForegroundColor",getRGB($t))}}function applyOpacity(et,dt,kt,$t){$t=Math.min(Math.max($t??1,0),1);const Tt=255*(1-$t);return et=Math.round(et*$t+Tt),dt=Math.round(dt*$t+Tt),kt=Math.round(kt*$t+Tt),[et,dt,kt]}function RGBToHSL(et,dt){const kt=et[0]/255,$t=et[1]/255,Tt=et[2]/255,Dt=Math.max(kt,$t,Tt),Ft=Math.min(kt,$t,Tt),Ut=(Dt+Ft)/2;if(Dt===Ft)dt[0]=dt[1]=0;else{const Ht=Dt-Ft;switch(dt[1]=Ut<.5?Ht/(Dt+Ft):Ht/(2-Dt-Ft),Dt){case kt:dt[0]=(($t-Tt)/Ht+($t<Tt?6:0))*60;break;case $t:dt[0]=((Tt-kt)/Ht+2)*60;break;case Tt:dt[0]=((kt-$t)/Ht+4)*60;break}}dt[2]=Ut}function HSLToRGB(et,dt){const kt=et[0],$t=et[1],Tt=et[2],Dt=(1-Math.abs(2*Tt-1))*$t,Ft=Dt*(1-Math.abs(kt/60%2-1)),Ut=Tt-Dt/2;switch(Math.floor(kt/60)){case 0:dt[0]=Dt+Ut,dt[1]=Ft+Ut,dt[2]=Ut;break;case 1:dt[0]=Ft+Ut,dt[1]=Dt+Ut,dt[2]=Ut;break;case 2:dt[0]=Ut,dt[1]=Dt+Ut,dt[2]=Ft+Ut;break;case 3:dt[0]=Ut,dt[1]=Ft+Ut,dt[2]=Dt+Ut;break;case 4:dt[0]=Ft+Ut,dt[1]=Ut,dt[2]=Dt+Ut;break;case 5:case 6:dt[0]=Dt+Ut,dt[1]=Ut,dt[2]=Ft+Ut;break}}function computeLuminance(et){return et<=.03928?et/12.92:((et+.055)/1.055)**2.4}function contrastRatio(et,dt,kt){HSLToRGB(et,kt),kt.map(computeLuminance);const $t=.2126*kt[0]+.7152*kt[1]+.0722*kt[2];HSLToRGB(dt,kt),kt.map(computeLuminance);const Tt=.2126*kt[0]+.7152*kt[1]+.0722*kt[2];return $t>Tt?($t+.05)/(Tt+.05):(Tt+.05)/($t+.05)}const contrastCache=new Map;function findContrastColor(et,dt){const kt=et[0]+et[1]*256+et[2]*65536+dt[0]*16777216+dt[1]*4294967296+dt[2]*1099511627776;let $t=contrastCache.get(kt);if($t)return $t;const Tt=new Float32Array(9),Dt=Tt.subarray(0,3),Ft=Tt.subarray(3,6);RGBToHSL(et,Ft);const Ut=Tt.subarray(6,9);RGBToHSL(dt,Ut);const Ht=Ut[2]<.5,Kt=Ht?12:4.5;if(Ft[2]=Ht?Math.sqrt(Ft[2]):1-Math.sqrt(1-Ft[2]),contrastRatio(Ft,Ut,Dt)<Kt){let Yt,Jt;Ht?(Yt=Ft[2],Jt=1):(Yt=0,Jt=Ft[2]);const Zt=.005;for(;Jt-Yt>Zt;){const er=Ft[2]=(Yt+Jt)/2;Ht===contrastRatio(Ft,Ut,Dt)<Kt?Yt=er:Jt=er}Ft[2]=Ht?Jt:Yt}return HSLToRGB(Ft,Dt),$t=Util.makeHexColor(Math.round(Dt[0]*255),Math.round(Dt[1]*255),Math.round(Dt[2]*255)),contrastCache.set(kt,$t),$t}function renderRichText({html:et,dir:dt,className:kt},$t){const Tt=document.createDocumentFragment();if(typeof et=="string"){const Dt=document.createElement("p");Dt.dir=dt||"auto";const Ft=et.split(/(?:\r\n?|\n)/);for(let Ut=0,Ht=Ft.length;Ut<Ht;++Ut){const Kt=Ft[Ut];Dt.append(document.createTextNode(Kt)),Ut<Ht-1&&Dt.append(document.createElement("br"))}Tt.append(Dt)}else XfaLayer.render({xfaHtml:et,div:Tt,intent:"richText"});Tt.firstChild.classList.add("richText",kt),$t.append(Tt)}var Rp,kp,Il,Dl,Uv,$p,E0,j0,Hv,Xw,dS,Qw,uS,Jw,hS,Sp,d0,Pm,jv;const Fu=class Fu{constructor(dt){yr(this,Qw);yr(this,Jw);yr(this,Sp);yr(this,Pm);yr(this,Rp,null);yr(this,kp,null);yr(this,Il,void 0);yr(this,Dl,null);yr(this,Uv,null);yr(this,$p,null);yr(this,E0,null);yr(this,j0,null);vr(this,Il,dt),ar(Fu,Hv)||vr(Fu,Hv,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const dt=vr(this,Rp,document.createElement("div"));dt.classList.add("editToolbar","hidden"),dt.setAttribute("role","toolbar");const kt=ar(this,Il)._uiManager._signal;kt instanceof AbortSignal&&!kt.aborted&&(dt.addEventListener("contextmenu",noContextMenu,{signal:kt}),dt.addEventListener("pointerdown",Br(Fu,Xw,dS),{signal:kt}));const $t=vr(this,Dl,document.createElement("div"));$t.className="buttons",dt.append($t);const Tt=ar(this,Il).toolbarPosition;if(Tt){const{style:Dt}=dt,Ft=ar(this,Il)._uiManager.direction==="ltr"?1-Tt[0]:Tt[0];Dt.insetInlineEnd=`${100*Ft}%`,Dt.top=`calc(${100*Tt[1]}% + var(--editor-toolbar-vert-offset))`}return dt}get div(){return ar(this,Rp)}hide(){var dt;ar(this,Rp).classList.add("hidden"),(dt=ar(this,kp))==null||dt.hideDropdown()}show(){var dt,kt;ar(this,Rp).classList.remove("hidden"),(dt=ar(this,Uv))==null||dt.shown(),(kt=ar(this,$p))==null||kt.shown()}addDeleteButton(){const{editorType:dt,_uiManager:kt}=ar(this,Il),$t=document.createElement("button");$t.classList.add("basic","deleteButton"),$t.tabIndex=0,$t.setAttribute("data-l10n-id",ar(Fu,Hv)[dt]),Br(this,Sp,d0).call(this,$t)&&$t.addEventListener("click",Tt=>{kt.delete()},{signal:kt._signal}),ar(this,Dl).append($t)}async addAltText(dt){const kt=await dt.render();Br(this,Sp,d0).call(this,kt),ar(this,Dl).append(kt,ar(this,Pm,jv)),vr(this,Uv,dt)}addComment(dt,kt=null){if(ar(this,$p))return;const $t=dt.renderForToolbar();if(!$t)return;Br(this,Sp,d0).call(this,$t);const Tt=vr(this,E0,ar(this,Pm,jv));kt?(ar(this,Dl).insertBefore($t,kt),ar(this,Dl).insertBefore(Tt,kt)):ar(this,Dl).append($t,Tt),vr(this,$p,dt),dt.toolbar=this}addColorPicker(dt){if(ar(this,kp))return;vr(this,kp,dt);const kt=dt.renderButton();Br(this,Sp,d0).call(this,kt),ar(this,Dl).append(kt,ar(this,Pm,jv))}async addEditSignatureButton(dt){const kt=vr(this,j0,await dt.renderEditButton(ar(this,Il)));Br(this,Sp,d0).call(this,kt),ar(this,Dl).append(kt,ar(this,Pm,jv))}removeButton(dt){var kt,$t;switch(dt){case"comment":(kt=ar(this,$p))==null||kt.removeToolbarCommentButton(),vr(this,$p,null),($t=ar(this,E0))==null||$t.remove(),vr(this,E0,null);break}}async addButton(dt,kt){switch(dt){case"colorPicker":this.addColorPicker(kt);break;case"altText":await this.addAltText(kt);break;case"editSignature":await this.addEditSignatureButton(kt);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(kt);break}}async addButtonBefore(dt,kt,$t){const Tt=ar(this,Dl).querySelector($t);Tt&&dt==="comment"&&this.addComment(kt,Tt)}updateEditSignatureButton(dt){ar(this,j0)&&(ar(this,j0).title=dt)}remove(){var dt;ar(this,Rp).remove(),(dt=ar(this,kp))==null||dt.destroy(),vr(this,kp,null)}};Rp=new WeakMap,kp=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Uv=new WeakMap,$p=new WeakMap,E0=new WeakMap,j0=new WeakMap,Hv=new WeakMap,Xw=new WeakSet,dS=function(dt){dt.stopPropagation()},Qw=new WeakSet,uS=function(dt){ar(this,Il)._focusEventsAllowed=!1,stopEvent(dt)},Jw=new WeakSet,hS=function(dt){ar(this,Il)._focusEventsAllowed=!0,stopEvent(dt)},Sp=new WeakSet,d0=function(dt){const kt=ar(this,Il)._uiManager._signal;return!(kt instanceof AbortSignal)||kt.aborted?!1:(dt.addEventListener("focusin",Br(this,Qw,uS).bind(this),{capture:!0,signal:kt}),dt.addEventListener("focusout",Br(this,Jw,hS).bind(this),{capture:!0,signal:kt}),dt.addEventListener("contextmenu",noContextMenu,{signal:kt}),!0)},Pm=new WeakSet,jv=function(){const dt=document.createElement("div");return dt.className="divider",dt},yr(Fu,Xw),yr(Fu,Hv,null);let EditorToolbar=Fu;var Gv,Mm,Ou,Zw,pS,eR,fS,Wv,K2;class FloatingToolbar{constructor(dt){yr(this,Zw);yr(this,eR);yr(this,Wv);yr(this,Gv,null);yr(this,Mm,null);yr(this,Ou,void 0);vr(this,Ou,dt)}show(dt,kt,$t){const[Tt,Dt]=Br(this,eR,fS).call(this,kt,$t),{style:Ft}=ar(this,Mm)||vr(this,Mm,Br(this,Zw,pS).call(this));dt.append(ar(this,Mm)),Ft.insetInlineEnd=`${100*Tt}%`,Ft.top=`calc(${100*Dt}% + var(--editor-toolbar-vert-offset))`}hide(){ar(this,Mm).remove()}}Gv=new WeakMap,Mm=new WeakMap,Ou=new WeakMap,Zw=new WeakSet,pS=function(){const dt=vr(this,Mm,document.createElement("div"));dt.className="editToolbar",dt.setAttribute("role","toolbar");const kt=ar(this,Ou)._signal;kt instanceof AbortSignal&&!kt.aborted&&dt.addEventListener("contextmenu",noContextMenu,{signal:kt});const $t=vr(this,Gv,document.createElement("div"));return $t.className="buttons",dt.append($t),ar(this,Ou).hasCommentManager()&&Br(this,Wv,K2).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{ar(this,Ou).commentSelection("floating_button")}),Br(this,Wv,K2).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{ar(this,Ou).highlightSelection("floating_button")}),dt},eR=new WeakSet,fS=function(dt,kt){let $t=0,Tt=0;for(const Dt of dt){const Ft=Dt.y+Dt.height;if(Ft<$t)continue;const Ut=Dt.x+(kt?Dt.width:0);if(Ft>$t){Tt=Ut,$t=Ft;continue}kt?Ut>Tt&&(Tt=Ut):Ut<Tt&&(Tt=Ut)}return[kt?1-Tt:Tt,$t]},Wv=new WeakSet,K2=function(dt,kt,$t,Tt){const Dt=document.createElement("button");Dt.classList.add("basic",dt),Dt.tabIndex=0,Dt.setAttribute("data-l10n-id",kt);const Ft=document.createElement("span");Dt.append(Ft),Ft.className="visuallyHidden",Ft.setAttribute("data-l10n-id",$t);const Ut=ar(this,Ou)._signal;Ut instanceof AbortSignal&&!Ut.aborted&&(Dt.addEventListener("contextmenu",noContextMenu,{signal:Ut}),Dt.addEventListener("click",Tt,{signal:Ut})),ar(this,Gv).append(Dt)};function bindEvents(et,dt,kt){for(const $t of kt)dt.addEventListener($t,et[$t].bind(et))}var tR;class IdManager{constructor(){yr(this,tR,0)}get id(){return`${AnnotationEditorPrefix}${xa(this,tR)._++}`}}tR=new WeakMap;var w0,qv,ko,R0,bw;const Y$=class Y${constructor(){yr(this,R0);yr(this,w0,getUuid());yr(this,qv,0);yr(this,ko,null)}static get _isSVGFittingCanvas(){const dt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',$t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),Tt=new Image;Tt.src=dt;const Dt=Tt.decode().then(()=>($t.drawImage(Tt,0,0,1,1,0,0,1,3),new Uint32Array($t.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",Dt)}async getFromFile(dt){const{lastModified:kt,name:$t,size:Tt,type:Dt}=dt;return Br(this,R0,bw).call(this,`${kt}_${$t}_${Tt}_${Dt}`,dt)}async getFromUrl(dt){return Br(this,R0,bw).call(this,dt,dt)}async getFromBlob(dt,kt){const $t=await kt;return Br(this,R0,bw).call(this,dt,$t)}async getFromId(dt){ar(this,ko)||vr(this,ko,new Map);const kt=ar(this,ko).get(dt);if(!kt)return null;if(kt.bitmap)return kt.refCounter+=1,kt;if(kt.file)return this.getFromFile(kt.file);if(kt.blobPromise){const{blobPromise:$t}=kt;return delete kt.blobPromise,this.getFromBlob(kt.id,$t)}return this.getFromUrl(kt.url)}getFromCanvas(dt,kt){ar(this,ko)||vr(this,ko,new Map);let $t=ar(this,ko).get(dt);if($t!=null&&$t.bitmap)return $t.refCounter+=1,$t;const Tt=new OffscreenCanvas(kt.width,kt.height);return Tt.getContext("2d").drawImage(kt,0,0),$t={bitmap:Tt.transferToImageBitmap(),id:`image_${ar(this,w0)}_${xa(this,qv)._++}`,refCounter:1,isSvg:!1},ar(this,ko).set(dt,$t),ar(this,ko).set($t.id,$t),$t}getSvgUrl(dt){const kt=ar(this,ko).get(dt);return kt!=null&&kt.isSvg?kt.svgUrl:null}deleteId(dt){var Tt;ar(this,ko)||vr(this,ko,new Map);const kt=ar(this,ko).get(dt);if(!kt||(kt.refCounter-=1,kt.refCounter!==0))return;const{bitmap:$t}=kt;if(!kt.url&&!kt.file){const Dt=new OffscreenCanvas($t.width,$t.height);Dt.getContext("bitmaprenderer").transferFromImageBitmap($t),kt.blobPromise=Dt.convertToBlob()}(Tt=$t.close)==null||Tt.call($t),kt.bitmap=null}isValidId(dt){return dt.startsWith(`image_${ar(this,w0)}_`)}};w0=new WeakMap,qv=new WeakMap,ko=new WeakMap,R0=new WeakSet,bw=async function(dt,kt){ar(this,ko)||vr(this,ko,new Map);let $t=ar(this,ko).get(dt);if($t===null)return null;if($t!=null&&$t.bitmap)return $t.refCounter+=1,$t;try{$t||($t={bitmap:null,id:`image_${ar(this,w0)}_${xa(this,qv)._++}`,refCounter:0,isSvg:!1});let Tt;if(typeof kt=="string"?($t.url=kt,Tt=await fetchData(kt,"blob")):kt instanceof File?Tt=$t.file=kt:kt instanceof Blob&&(Tt=kt),Tt.type==="image/svg+xml"){const Dt=Y$._isSVGFittingCanvas,Ft=new FileReader,Ut=new Image,Ht=new Promise((Kt,Yt)=>{Ut.onload=()=>{$t.bitmap=Ut,$t.isSvg=!0,Kt()},Ft.onload=async()=>{const Jt=$t.svgUrl=Ft.result;Ut.src=await Dt?`${Jt}#svgView(preserveAspectRatio(none))`:Jt},Ut.onerror=Ft.onerror=Yt});Ft.readAsDataURL(Tt),await Ht}else $t.bitmap=await createImageBitmap(Tt);$t.refCounter=1}catch(Tt){warn(Tt),$t=null}return ar(this,ko).set(dt,$t),$t&&ar(this,ko).set($t.id,$t),$t};let ImageManager=Y$;var Qn,_p,Kv,qn;class CommandManager{constructor(dt=128){yr(this,Qn,[]);yr(this,_p,!1);yr(this,Kv,void 0);yr(this,qn,-1);vr(this,Kv,dt)}add({cmd:dt,undo:kt,post:$t,mustExec:Tt,type:Dt=NaN,overwriteIfSameType:Ft=!1,keepUndo:Ut=!1}){if(Tt&&dt(),ar(this,_p))return;const Ht={cmd:dt,undo:kt,post:$t,type:Dt};if(ar(this,qn)===-1){ar(this,Qn).length>0&&(ar(this,Qn).length=0),vr(this,qn,0),ar(this,Qn).push(Ht);return}if(Ft&&ar(this,Qn)[ar(this,qn)].type===Dt){Ut&&(Ht.undo=ar(this,Qn)[ar(this,qn)].undo),ar(this,Qn)[ar(this,qn)]=Ht;return}const Kt=ar(this,qn)+1;Kt===ar(this,Kv)?ar(this,Qn).splice(0,1):(vr(this,qn,Kt),Kt<ar(this,Qn).length&&ar(this,Qn).splice(Kt)),ar(this,Qn).push(Ht)}undo(){if(ar(this,qn)===-1)return;vr(this,_p,!0);const{undo:dt,post:kt}=ar(this,Qn)[ar(this,qn)];dt(),kt==null||kt(),vr(this,_p,!1),vr(this,qn,ar(this,qn)-1)}redo(){if(ar(this,qn)<ar(this,Qn).length-1){vr(this,qn,ar(this,qn)+1),vr(this,_p,!0);const{cmd:dt,post:kt}=ar(this,Qn)[ar(this,qn)];dt(),kt==null||kt(),vr(this,_p,!1)}}hasSomethingToUndo(){return ar(this,qn)!==-1}hasSomethingToRedo(){return ar(this,qn)<ar(this,Qn).length-1}cleanType(dt){if(ar(this,qn)!==-1){for(let kt=ar(this,qn);kt>=0;kt--)if(ar(this,Qn)[kt].type!==dt){ar(this,Qn).splice(kt+1,ar(this,qn)-kt),vr(this,qn,kt);return}ar(this,Qn).length=0,vr(this,qn,-1)}}destroy(){vr(this,Qn,null)}}Qn=new WeakMap,_p=new WeakMap,Kv=new WeakMap,qn=new WeakMap;var rR,mS;class KeyboardManager{constructor(dt){yr(this,rR);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:kt}=util_FeatureTest.platform;for(const[$t,Tt,Dt={}]of dt)for(const Ft of $t){const Ut=Ft.startsWith("mac+");kt&&Ut?(this.callbacks.set(Ft.slice(4),{callback:Tt,options:Dt}),this.allKeys.add(Ft.split("+").at(-1))):!kt&&!Ut&&(this.callbacks.set(Ft,{callback:Tt,options:Dt}),this.allKeys.add(Ft.split("+").at(-1)))}}exec(dt,kt){if(!this.allKeys.has(kt.key))return;const $t=this.callbacks.get(Br(this,rR,mS).call(this,kt));if(!$t)return;const{callback:Tt,options:{bubbles:Dt=!1,args:Ft=[],checker:Ut=null}}=$t;Ut&&!Ut(dt,kt)||(Tt.bind(dt,...Ft,kt)(),Dt||stopEvent(kt))}}rR=new WeakSet,mS=function(dt){dt.altKey&&this.buffer.push("alt"),dt.ctrlKey&&this.buffer.push("ctrl"),dt.metaKey&&this.buffer.push("meta"),dt.shiftKey&&this.buffer.push("shift"),this.buffer.push(dt.key);const kt=this.buffer.join("+");return this.buffer.length=0,kt};const sR=class sR{get _colors(){const dt=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(dt),shadow(this,"_colors",dt)}convert(dt){const kt=getRGB(dt);if(!window.matchMedia("(forced-colors: active)").matches)return kt;for(const[$t,Tt]of this._colors)if(Tt.every((Dt,Ft)=>Dt===kt[Ft]))return sR._colorsMapping.get($t);return kt}getHexCode(dt){const kt=this._colors.get(dt);return kt?Util.makeHexColor(...kt):dt}};Es(sR,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=sR;var k0,Yo,$0,Kn,ba,S0,Fl,_0,Ll,$o,Cp,Ap,C0,Tp,du,Ol,Im,Yv,Xv,A0,Qv,uu,Np,T0,Pp,hu,nR,Mp,N0,Jv,Ip,Dm,P0,Dp,Zv,_i,jn,Bu,Fp,Lp,e1,M0,r1,Op,pu,Vu,s1,n1,Bl,I0,yw,i1,Y2,iR,xS,aR,gS,Fm,wv,oR,bS,lR,yS,cR,vS,a1,X2,dR,ES,o1,Q2,l1,J2,uR,jS,xo,Po,Ql,Iu,hR,wS,pR,RS,d1,Z2,fR,kS,Lm,Rv,u1,_k;const x0=class x0{constructor(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt,er,rr,sr,nr){yr(this,I0);yr(this,i1);yr(this,iR);yr(this,aR);yr(this,Fm);yr(this,oR);yr(this,lR);yr(this,cR);yr(this,a1);yr(this,dR);yr(this,o1);yr(this,l1);yr(this,uR);yr(this,xo);yr(this,Ql);yr(this,hR);yr(this,pR);yr(this,d1);yr(this,fR);yr(this,Lm);yr(this,u1);yr(this,k0,new AbortController);yr(this,Yo,null);yr(this,$0,null);yr(this,Kn,new Map);yr(this,ba,new Map);yr(this,S0,null);yr(this,Fl,null);yr(this,_0,null);yr(this,Ll,new CommandManager);yr(this,$o,null);yr(this,Cp,null);yr(this,Ap,null);yr(this,C0,0);yr(this,Tp,new Set);yr(this,du,null);yr(this,Ol,null);yr(this,Im,new Set);Es(this,"_editorUndoBar",null);yr(this,Yv,!1);yr(this,Xv,!1);yr(this,A0,!1);yr(this,Qv,null);yr(this,uu,null);yr(this,Np,null);yr(this,T0,null);yr(this,Pp,!1);yr(this,hu,null);yr(this,nR,new IdManager);yr(this,Mp,!1);yr(this,N0,!1);yr(this,Jv,!1);yr(this,Ip,null);yr(this,Dm,null);yr(this,P0,null);yr(this,Dp,null);yr(this,Zv,null);yr(this,_i,AnnotationEditorType.NONE);yr(this,jn,new Set);yr(this,Bu,null);yr(this,Fp,null);yr(this,Lp,null);yr(this,e1,null);yr(this,M0,null);yr(this,r1,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});yr(this,Op,[0,0]);yr(this,pu,null);yr(this,Vu,null);yr(this,s1,null);yr(this,n1,null);yr(this,Bl,null);const ir=this._signal=ar(this,k0).signal;vr(this,Vu,dt),vr(this,s1,kt),vr(this,n1,$t),vr(this,S0,Tt),vr(this,$o,Dt),vr(this,Fp,Ft),vr(this,M0,Ht),this._eventBus=Ut,Ut._on("editingaction",this.onEditingAction.bind(this),{signal:ir}),Ut._on("pagechanging",this.onPageChanging.bind(this),{signal:ir}),Ut._on("scalechanging",this.onScaleChanging.bind(this),{signal:ir}),Ut._on("rotationchanging",this.onRotationChanging.bind(this),{signal:ir}),Ut._on("setpreference",this.onSetPreference.bind(this),{signal:ir}),Ut._on("switchannotationeditorparams",lr=>this.updateParams(lr.type,lr.value),{signal:ir}),window.addEventListener("pointerdown",()=>{vr(this,N0,!0)},{capture:!0,signal:ir}),window.addEventListener("pointerup",()=>{vr(this,N0,!1)},{capture:!0,signal:ir}),Br(this,oR,bS).call(this),Br(this,uR,jS).call(this),Br(this,a1,X2).call(this),vr(this,Fl,Ht.annotationStorage),vr(this,Qv,Ht.filterFactory),vr(this,Lp,Kt),vr(this,T0,Yt||null),vr(this,Yv,Jt),vr(this,Xv,Zt),vr(this,A0,er),vr(this,Zv,rr||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=sr||null,this._supportsPinchToZoom=nr!==!1,Dt==null||Dt.setSidebarUiManager(this)}static get _keyboardManager(){const dt=x0.prototype,kt=Ft=>ar(Ft,Vu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&Ft.hasSomethingToControl(),$t=(Ft,{target:Ut})=>{if(Ut instanceof HTMLInputElement){const{type:Ht}=Ut;return Ht!=="text"&&Ht!=="number"}return!0},Tt=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],dt.selectAll,{checker:$t}],[["ctrl+z","mac+meta+z"],dt.undo,{checker:$t}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],dt.redo,{checker:$t}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],dt.delete,{checker:$t}],[["Enter","mac+Enter"],dt.addNewEditorFromKeyboard,{checker:(Ft,{target:Ut})=>!(Ut instanceof HTMLButtonElement)&&ar(Ft,Vu).contains(Ut)&&!Ft.isEnterHandled}],[[" ","mac+ "],dt.addNewEditorFromKeyboard,{checker:(Ft,{target:Ut})=>!(Ut instanceof HTMLButtonElement)&&ar(Ft,Vu).contains(document.activeElement)}],[["Escape","mac+Escape"],dt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],dt.translateSelectedEditors,{args:[-Tt,0],checker:kt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],dt.translateSelectedEditors,{args:[-Dt,0],checker:kt}],[["ArrowRight","mac+ArrowRight"],dt.translateSelectedEditors,{args:[Tt,0],checker:kt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],dt.translateSelectedEditors,{args:[Dt,0],checker:kt}],[["ArrowUp","mac+ArrowUp"],dt.translateSelectedEditors,{args:[0,-Tt],checker:kt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],dt.translateSelectedEditors,{args:[0,-Dt],checker:kt}],[["ArrowDown","mac+ArrowDown"],dt.translateSelectedEditors,{args:[0,Tt],checker:kt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],dt.translateSelectedEditors,{args:[0,Dt],checker:kt}]]))}destroy(){var dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt;(dt=ar(this,Bl))==null||dt.resolve(),vr(this,Bl,null),(kt=ar(this,k0))==null||kt.abort(),vr(this,k0,null),this._signal=null;for(const Yt of ar(this,ba).values())Yt.destroy();ar(this,ba).clear(),ar(this,Kn).clear(),ar(this,Im).clear(),($t=ar(this,Dp))==null||$t.clear(),vr(this,Yo,null),ar(this,jn).clear(),ar(this,Ll).destroy(),(Tt=ar(this,S0))==null||Tt.destroy(),(Dt=ar(this,$o))==null||Dt.destroy(),(Ft=ar(this,Fp))==null||Ft.destroy(),(Ut=ar(this,hu))==null||Ut.hide(),vr(this,hu,null),(Ht=ar(this,P0))==null||Ht.destroy(),vr(this,P0,null),vr(this,$0,null),ar(this,uu)&&(clearTimeout(ar(this,uu)),vr(this,uu,null)),ar(this,pu)&&(clearTimeout(ar(this,pu)),vr(this,pu,null)),(Kt=this._editorUndoBar)==null||Kt.destroy(),vr(this,M0,null)}combinedSignal(dt){return AbortSignal.any([this._signal,dt.signal])}get mlManager(){return ar(this,Zv)}get useNewAltTextFlow(){return ar(this,Xv)}get useNewAltTextWhenAddingImage(){return ar(this,A0)}get hcmFilter(){return shadow(this,"hcmFilter",ar(this,Lp)?ar(this,Qv).addHCMFilter(ar(this,Lp).foreground,ar(this,Lp).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(ar(this,Vu)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",ar(this,T0)?new Map(ar(this,T0).split(",").map(dt=>(dt=dt.split("=").map(kt=>kt.trim()),dt[1]=dt[1].toUpperCase(),dt))):null)}get highlightColors(){const{_highlightColors:dt}=this;if(!dt)return shadow(this,"highlightColors",null);const kt=new Map,$t=!!ar(this,Lp);for(const[Tt,Dt]of dt){const Ft=Tt.endsWith("_HCM");if($t&&Ft){kt.set(Tt.replace("_HCM",""),Dt);continue}!$t&&!Ft&&kt.set(Tt,Dt)}return shadow(this,"highlightColors",kt)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,dt=>dt.reverse())):null)}getNonHCMColor(dt){if(!this._highlightColors)return dt;const kt=this.highlightColorNames.get(dt);return this._highlightColors.get(kt)||dt}getNonHCMColorName(dt){return this.highlightColorNames.get(dt)||dt}setCurrentDrawingSession(dt){dt?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),vr(this,Ap,dt)}setMainHighlightColorPicker(dt){vr(this,P0,dt)}editAltText(dt,kt=!1){var $t;($t=ar(this,S0))==null||$t.editAltText(this,dt,kt)}hasCommentManager(){return!!ar(this,$o)}editComment(dt,kt,$t,Tt){var Dt;(Dt=ar(this,$o))==null||Dt.showDialog(this,dt,kt,$t,Tt)}selectComment(dt,kt){const $t=ar(this,ba).get(dt),Tt=$t==null?void 0:$t.getEditorByUID(kt);Tt==null||Tt.toggleComment(!0,!0)}updateComment(dt){var kt;(kt=ar(this,$o))==null||kt.updateComment(dt.getData())}updatePopupColor(dt){var kt;(kt=ar(this,$o))==null||kt.updatePopupColor(dt)}removeComment(dt){var kt;(kt=ar(this,$o))==null||kt.removeComments([dt.uid])}toggleComment(dt,kt,$t=void 0){var Tt;(Tt=ar(this,$o))==null||Tt.toggleCommentPopup(dt,kt,$t)}makeCommentColor(dt,kt){var $t;return dt&&(($t=ar(this,$o))==null?void 0:$t.makeCommentColor(dt,kt))||null}getCommentDialogElement(){var dt;return((dt=ar(this,$o))==null?void 0:dt.dialogElement)||null}async waitForEditorsRendered(dt){if(ar(this,ba).has(dt-1))return;const{resolve:kt,promise:$t}=Promise.withResolvers(),Tt=Dt=>{Dt.pageNumber===dt&&(this._eventBus._off("editorsrendered",Tt),kt())};this._eventBus.on("editorsrendered",Tt),await $t}getSignature(dt){var kt;(kt=ar(this,Fp))==null||kt.getSignature({uiManager:this,editor:dt})}get signatureManager(){return ar(this,Fp)}switchToMode(dt,kt){this._eventBus.on("annotationeditormodechanged",kt,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:dt})}setPreference(dt,kt){this._eventBus.dispatch("setpreference",{source:this,name:dt,value:kt})}onSetPreference({name:dt,value:kt}){switch(dt){case"enableNewAltTextWhenAddingImage":vr(this,A0,kt);break}}onPageChanging({pageNumber:dt}){vr(this,C0,dt-1)}focusMainContainer(){ar(this,Vu).focus()}findParent(dt,kt){for(const $t of ar(this,ba).values()){const{x:Tt,y:Dt,width:Ft,height:Ut}=$t.div.getBoundingClientRect();if(dt>=Tt&&dt<=Tt+Ft&&kt>=Dt&&kt<=Dt+Ut)return $t}return null}disableUserSelect(dt=!1){ar(this,s1).classList.toggle("noUserSelect",dt)}addShouldRescale(dt){ar(this,Im).add(dt)}removeShouldRescale(dt){ar(this,Im).delete(dt)}onScaleChanging({scale:dt}){var kt;this.commitOrRemove(),this.viewParameters.realScale=dt*PixelsPerInch.PDF_TO_CSS_UNITS;for(const $t of ar(this,Im))$t.onScaleChanging();(kt=ar(this,Ap))==null||kt.onScaleChanging()}onRotationChanging({pagesRotation:dt}){this.commitOrRemove(),this.viewParameters.rotation=dt}highlightSelection(dt="",kt=!1){const $t=document.getSelection();if(!$t||$t.isCollapsed)return;const{anchorNode:Tt,anchorOffset:Dt,focusNode:Ft,focusOffset:Ut}=$t,Ht=$t.toString(),Yt=Br(this,I0,yw).call(this,$t).closest(".textLayer"),Jt=this.getSelectionBoxes(Yt);if(!Jt)return;$t.empty();const Zt=Br(this,i1,Y2).call(this,Yt),er=ar(this,_i)===AnnotationEditorType.NONE,rr=()=>{const sr=Zt==null?void 0:Zt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:dt,boxes:Jt,anchorNode:Tt,anchorOffset:Dt,focusNode:Ft,focusOffset:Ut,text:Ht});er&&this.showAllEditors("highlight",!0,!0),kt&&(sr==null||sr.editComment())};if(er){this.switchToMode(AnnotationEditorType.HIGHLIGHT,rr);return}rr()}commentSelection(dt=""){this.highlightSelection(dt,!0)}getAndRemoveDataFromAnnotationStorage(dt){if(!ar(this,Fl))return null;const kt=`${AnnotationEditorPrefix}${dt}`,$t=ar(this,Fl).getRawValue(kt);return $t&&ar(this,Fl).remove(kt),$t}addToAnnotationStorage(dt){!dt.isEmpty()&&ar(this,Fl)&&!ar(this,Fl).has(dt.id)&&ar(this,Fl).setValue(dt.id,dt)}a11yAlert(dt,kt=null){const $t=ar(this,n1);$t&&($t.setAttribute("data-l10n-id",dt),kt?$t.setAttribute("data-l10n-args",JSON.stringify(kt)):$t.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,ar(this,Pp)&&(vr(this,Pp,!1),Br(this,Fm,wv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:dt}=document;for(const kt of ar(this,jn))if(kt.div.contains(dt)){vr(this,Dm,[kt,dt]),kt._focusEventsAllowed=!1;break}}focus(){if(!ar(this,Dm))return;const[dt,kt]=ar(this,Dm);vr(this,Dm,null),kt.addEventListener("focusin",()=>{dt._focusEventsAllowed=!0},{once:!0,signal:this._signal}),kt.focus()}addEditListeners(){Br(this,a1,X2).call(this),Br(this,o1,Q2).call(this)}removeEditListeners(){Br(this,dR,ES).call(this),Br(this,l1,J2).call(this)}dragOver(dt){for(const{type:kt}of dt.dataTransfer.items)for(const $t of ar(this,Ol))if($t.isHandlingMimeForPasting(kt)){dt.dataTransfer.dropEffect="copy",dt.preventDefault();return}}drop(dt){for(const kt of dt.dataTransfer.items)for(const $t of ar(this,Ol))if($t.isHandlingMimeForPasting(kt.type)){$t.paste(kt,this.currentLayer),dt.preventDefault();return}}copy(dt){var $t;if(dt.preventDefault(),($t=ar(this,Yo))==null||$t.commitOrRemove(),!this.hasSelection)return;const kt=[];for(const Tt of ar(this,jn)){const Dt=Tt.serialize(!0);Dt&&kt.push(Dt)}kt.length!==0&&dt.clipboardData.setData("application/pdfjs",JSON.stringify(kt))}cut(dt){this.copy(dt),this.delete()}async paste(dt){dt.preventDefault();const{clipboardData:kt}=dt;for(const Dt of kt.items)for(const Ft of ar(this,Ol))if(Ft.isHandlingMimeForPasting(Dt.type)){Ft.paste(Dt,this.currentLayer);return}let $t=kt.getData("application/pdfjs");if(!$t)return;try{$t=JSON.parse($t)}catch(Dt){warn(`paste: "${Dt.message}".`);return}if(!Array.isArray($t))return;this.unselectAll();const Tt=this.currentLayer;try{const Dt=[];for(const Ht of $t){const Kt=await Tt.deserialize(Ht);if(!Kt)return;Dt.push(Kt)}const Ft=()=>{for(const Ht of Dt)Br(this,d1,Z2).call(this,Ht);Br(this,u1,_k).call(this,Dt)},Ut=()=>{for(const Ht of Dt)Ht.remove()};this.addCommands({cmd:Ft,undo:Ut,mustExec:!0})}catch(Dt){warn(`paste: "${Dt.message}".`)}}keydown(dt){!this.isShiftKeyDown&&dt.key==="Shift"&&(this.isShiftKeyDown=!0),ar(this,_i)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&x0._keyboardManager.exec(this,dt)}keyup(dt){this.isShiftKeyDown&&dt.key==="Shift"&&(this.isShiftKeyDown=!1,ar(this,Pp)&&(vr(this,Pp,!1),Br(this,Fm,wv).call(this,"main_toolbar")))}onEditingAction({name:dt}){switch(dt){case"undo":case"redo":case"delete":case"selectAll":this[dt]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(dt){dt?(Br(this,lR,yS).call(this),Br(this,o1,Q2).call(this),Br(this,xo,Po).call(this,{isEditing:ar(this,_i)!==AnnotationEditorType.NONE,isEmpty:Br(this,Lm,Rv).call(this),hasSomethingToUndo:ar(this,Ll).hasSomethingToUndo(),hasSomethingToRedo:ar(this,Ll).hasSomethingToRedo(),hasSelectedEditor:!1})):(Br(this,cR,vS).call(this),Br(this,l1,J2).call(this),Br(this,xo,Po).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(dt){if(!ar(this,Ol)){vr(this,Ol,dt);for(const kt of ar(this,Ol))Br(this,Ql,Iu).call(this,kt.defaultPropertiesToUpdate)}}getId(){return ar(this,nR).id}get currentLayer(){return ar(this,ba).get(ar(this,C0))}getLayer(dt){return ar(this,ba).get(dt)}get currentPageIndex(){return ar(this,C0)}addLayer(dt){ar(this,ba).set(dt.pageIndex,dt),ar(this,Mp)?dt.enable():dt.disable()}removeLayer(dt){ar(this,ba).delete(dt.pageIndex)}async updateMode(dt,kt=null,$t=!1,Tt=!1,Dt=!1){var Ft,Ut,Ht,Kt,Yt,Jt;if(ar(this,_i)!==dt&&!(ar(this,Bl)&&(await ar(this,Bl).promise,!ar(this,Bl)))){if(vr(this,Bl,Promise.withResolvers()),(Ft=ar(this,Ap))==null||Ft.commitOrRemove(),ar(this,_i)===AnnotationEditorType.POPUP&&((Ut=ar(this,$o))==null||Ut.hideSidebar()),(Ht=ar(this,$o))==null||Ht.destroyPopup(),vr(this,_i,dt),dt===AnnotationEditorType.NONE){this.setEditingState(!1),Br(this,pR,RS).call(this);for(const Zt of ar(this,Kn).values())Zt.hideStandaloneCommentButton();(Kt=this._editorUndoBar)==null||Kt.hide(),this.toggleComment(null),ar(this,Bl).resolve();return}for(const Zt of ar(this,Kn).values())Zt.addStandaloneCommentButton();dt===AnnotationEditorType.SIGNATURE&&await((Yt=ar(this,Fp))==null?void 0:Yt.loadSignatures()),this.setEditingState(!0),await Br(this,hR,wS).call(this),this.unselectAll();for(const Zt of ar(this,ba).values())Zt.updateMode(dt);if(dt===AnnotationEditorType.POPUP){ar(this,$0)||vr(this,$0,await ar(this,M0).getAnnotationsByType(new Set(ar(this,Ol).map(rr=>rr._editorType))));const Zt=new Set,er=[];for(const rr of ar(this,Kn).values()){const{annotationElementId:sr,hasComment:nr,deleted:ir}=rr;sr&&Zt.add(sr),nr&&!ir&&er.push(rr.getData())}for(const rr of ar(this,$0)){const{id:sr,popupRef:nr,contentsObj:ir}=rr;nr&&(ir!=null&&ir.str)&&!Zt.has(sr)&&!ar(this,Tp).has(sr)&&er.push(rr)}(Jt=ar(this,$o))==null||Jt.showSidebar(er)}if(!kt){$t&&this.addNewEditorFromKeyboard(),ar(this,Bl).resolve();return}for(const Zt of ar(this,Kn).values())Zt.uid===kt?(this.setSelected(Zt),Dt?Zt.editComment():Tt?Zt.enterInEditMode():Zt.focus()):Zt.unselect();ar(this,Bl).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(dt){dt.mode!==ar(this,_i)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...dt})}updateParams(dt,kt){if(ar(this,Ol)){switch(dt){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(kt);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(ar(this,e1)||vr(this,e1,new Map)).set(dt,kt),this.showAllEditors("highlight",kt);break}if(this.hasSelection)for(const $t of ar(this,jn))$t.updateParams(dt,kt);else for(const $t of ar(this,Ol))$t.updateDefaultParams(dt,kt)}}showAllEditors(dt,kt,$t=!1){var Dt;for(const Ft of ar(this,Kn).values())Ft.editorType===dt&&Ft.show(kt);(((Dt=ar(this,e1))==null?void 0:Dt.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==kt&&Br(this,Ql,Iu).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,kt]])}enableWaiting(dt=!1){if(ar(this,Jv)!==dt){vr(this,Jv,dt);for(const kt of ar(this,ba).values())dt?kt.disableClick():kt.enableClick(),kt.div.classList.toggle("waiting",dt)}}*getEditors(dt){for(const kt of ar(this,Kn).values())kt.pageIndex===dt&&(yield kt)}getEditor(dt){return ar(this,Kn).get(dt)}addEditor(dt){ar(this,Kn).set(dt.id,dt)}removeEditor(dt){var kt,$t;dt.div.contains(document.activeElement)&&(ar(this,uu)&&clearTimeout(ar(this,uu)),vr(this,uu,setTimeout(()=>{this.focusMainContainer(),vr(this,uu,null)},0))),ar(this,Kn).delete(dt.id),dt.annotationElementId&&((kt=ar(this,Dp))==null||kt.delete(dt.annotationElementId)),this.unselect(dt),(!dt.annotationElementId||!ar(this,Tp).has(dt.annotationElementId))&&(($t=ar(this,Fl))==null||$t.remove(dt.id))}addDeletedAnnotationElement(dt){ar(this,Tp).add(dt.annotationElementId),this.addChangedExistingAnnotation(dt),dt.deleted=!0}isDeletedAnnotationElement(dt){return ar(this,Tp).has(dt)}removeDeletedAnnotationElement(dt){ar(this,Tp).delete(dt.annotationElementId),this.removeChangedExistingAnnotation(dt),dt.deleted=!1}setActiveEditor(dt){ar(this,Yo)!==dt&&(vr(this,Yo,dt),dt&&Br(this,Ql,Iu).call(this,dt.propertiesToUpdate))}updateUI(dt){ar(this,fR,kS)===dt&&Br(this,Ql,Iu).call(this,dt.propertiesToUpdate)}updateUIForDefaultProperties(dt){Br(this,Ql,Iu).call(this,dt.defaultPropertiesToUpdate)}toggleSelected(dt){if(ar(this,jn).has(dt)){ar(this,jn).delete(dt),dt.unselect(),Br(this,xo,Po).call(this,{hasSelectedEditor:this.hasSelection});return}ar(this,jn).add(dt),dt.select(),Br(this,Ql,Iu).call(this,dt.propertiesToUpdate),Br(this,xo,Po).call(this,{hasSelectedEditor:!0})}setSelected(dt){var kt;this.updateToolbar({mode:dt.mode,editId:dt.id}),(kt=ar(this,Ap))==null||kt.commitOrRemove();for(const $t of ar(this,jn))$t!==dt&&$t.unselect();ar(this,jn).clear(),ar(this,jn).add(dt),dt.select(),Br(this,Ql,Iu).call(this,dt.propertiesToUpdate),Br(this,xo,Po).call(this,{hasSelectedEditor:!0})}isSelected(dt){return ar(this,jn).has(dt)}get firstSelectedEditor(){return ar(this,jn).values().next().value}unselect(dt){dt.unselect(),ar(this,jn).delete(dt),Br(this,xo,Po).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ar(this,jn).size!==0}get isEnterHandled(){return ar(this,jn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var dt;ar(this,Ll).undo(),Br(this,xo,Po).call(this,{hasSomethingToUndo:ar(this,Ll).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Br(this,Lm,Rv).call(this)}),(dt=this._editorUndoBar)==null||dt.hide()}redo(){ar(this,Ll).redo(),Br(this,xo,Po).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ar(this,Ll).hasSomethingToRedo(),isEmpty:Br(this,Lm,Rv).call(this)})}addCommands(dt){ar(this,Ll).add(dt),Br(this,xo,Po).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Br(this,Lm,Rv).call(this)})}cleanUndoStack(dt){ar(this,Ll).cleanType(dt)}delete(){var Dt;this.commitOrRemove();const dt=(Dt=this.currentLayer)==null?void 0:Dt.endDrawingSession(!0);if(!this.hasSelection&&!dt)return;const kt=dt?[dt]:[...ar(this,jn)],$t=()=>{var Ft;(Ft=this._editorUndoBar)==null||Ft.show(Tt,kt.length===1?kt[0].editorType:kt.length);for(const Ut of kt)Ut.remove()},Tt=()=>{for(const Ft of kt)Br(this,d1,Z2).call(this,Ft)};this.addCommands({cmd:$t,undo:Tt,mustExec:!0})}commitOrRemove(){var dt;(dt=ar(this,Yo))==null||dt.commitOrRemove()}hasSomethingToControl(){return ar(this,Yo)||this.hasSelection}selectAll(){for(const dt of ar(this,jn))dt.commit();Br(this,u1,_k).call(this,ar(this,Kn).values())}unselectAll(){var dt;if(!(ar(this,Yo)&&(ar(this,Yo).commitOrRemove(),ar(this,_i)!==AnnotationEditorType.NONE))&&!((dt=ar(this,Ap))!=null&&dt.commitOrRemove())&&this.hasSelection){for(const kt of ar(this,jn))kt.unselect();ar(this,jn).clear(),Br(this,xo,Po).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(dt,kt,$t=!1){if($t||this.commitOrRemove(),!this.hasSelection)return;ar(this,Op)[0]+=dt,ar(this,Op)[1]+=kt;const[Tt,Dt]=ar(this,Op),Ft=[...ar(this,jn)],Ut=1e3;ar(this,pu)&&clearTimeout(ar(this,pu)),vr(this,pu,setTimeout(()=>{vr(this,pu,null),ar(this,Op)[0]=ar(this,Op)[1]=0,this.addCommands({cmd:()=>{for(const Ht of Ft)ar(this,Kn).has(Ht.id)&&(Ht.translateInPage(Tt,Dt),Ht.translationDone())},undo:()=>{for(const Ht of Ft)ar(this,Kn).has(Ht.id)&&(Ht.translateInPage(-Tt,-Dt),Ht.translationDone())},mustExec:!1})},Ut));for(const Ht of Ft)Ht.translateInPage(dt,kt),Ht.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),vr(this,du,new Map);for(const dt of ar(this,jn))ar(this,du).set(dt,{savedX:dt.x,savedY:dt.y,savedPageIndex:dt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ar(this,du))return!1;this.disableUserSelect(!1);const dt=ar(this,du);vr(this,du,null);let kt=!1;for(const[{x:Tt,y:Dt,pageIndex:Ft},Ut]of dt)Ut.newX=Tt,Ut.newY=Dt,Ut.newPageIndex=Ft,kt||(kt=Tt!==Ut.savedX||Dt!==Ut.savedY||Ft!==Ut.savedPageIndex);if(!kt)return!1;const $t=(Tt,Dt,Ft,Ut)=>{if(ar(this,Kn).has(Tt.id)){const Ht=ar(this,ba).get(Ut);Ht?Tt._setParentAndPosition(Ht,Dt,Ft):(Tt.pageIndex=Ut,Tt.x=Dt,Tt.y=Ft)}};return this.addCommands({cmd:()=>{for(const[Tt,{newX:Dt,newY:Ft,newPageIndex:Ut}]of dt)$t(Tt,Dt,Ft,Ut)},undo:()=>{for(const[Tt,{savedX:Dt,savedY:Ft,savedPageIndex:Ut}]of dt)$t(Tt,Dt,Ft,Ut)},mustExec:!0}),!0}dragSelectedEditors(dt,kt){if(ar(this,du))for(const $t of ar(this,du).keys())$t.drag(dt,kt)}rebuild(dt){if(dt.parent===null){const kt=this.getLayer(dt.pageIndex);kt?(kt.changeParent(dt),kt.addOrRebuild(dt)):(this.addEditor(dt),this.addToAnnotationStorage(dt),dt.rebuild())}else dt.parent.addOrRebuild(dt)}get isEditorHandlingKeyboard(){var dt;return((dt=this.getActive())==null?void 0:dt.shouldGetKeyboardEvents())||ar(this,jn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(dt){return ar(this,Yo)===dt}getActive(){return ar(this,Yo)}getMode(){return ar(this,_i)}isEditingMode(){return ar(this,_i)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(dt){if(!dt)return null;const kt=document.getSelection();for(let Kt=0,Yt=kt.rangeCount;Kt<Yt;Kt++)if(!dt.contains(kt.getRangeAt(Kt).commonAncestorContainer))return null;const{x:$t,y:Tt,width:Dt,height:Ft}=dt.getBoundingClientRect();let Ut;switch(dt.getAttribute("data-main-rotation")){case"90":Ut=(Kt,Yt,Jt,Zt)=>({x:(Yt-Tt)/Ft,y:1-(Kt+Jt-$t)/Dt,width:Zt/Ft,height:Jt/Dt});break;case"180":Ut=(Kt,Yt,Jt,Zt)=>({x:1-(Kt+Jt-$t)/Dt,y:1-(Yt+Zt-Tt)/Ft,width:Jt/Dt,height:Zt/Ft});break;case"270":Ut=(Kt,Yt,Jt,Zt)=>({x:1-(Yt+Zt-Tt)/Ft,y:(Kt-$t)/Dt,width:Zt/Ft,height:Jt/Dt});break;default:Ut=(Kt,Yt,Jt,Zt)=>({x:(Kt-$t)/Dt,y:(Yt-Tt)/Ft,width:Jt/Dt,height:Zt/Ft});break}const Ht=[];for(let Kt=0,Yt=kt.rangeCount;Kt<Yt;Kt++){const Jt=kt.getRangeAt(Kt);if(!Jt.collapsed)for(const{x:Zt,y:er,width:rr,height:sr}of Jt.getClientRects())rr===0||sr===0||Ht.push(Ut(Zt,er,rr,sr))}return Ht.length===0?null:Ht}addChangedExistingAnnotation({annotationElementId:dt,id:kt}){(ar(this,_0)||vr(this,_0,new Map)).set(dt,kt)}removeChangedExistingAnnotation({annotationElementId:dt}){var kt;(kt=ar(this,_0))==null||kt.delete(dt)}renderAnnotationElement(dt){var Tt;const kt=(Tt=ar(this,_0))==null?void 0:Tt.get(dt.data.id);if(!kt)return;const $t=ar(this,Fl).getRawValue(kt);$t&&(ar(this,_i)===AnnotationEditorType.NONE&&!$t.hasBeenModified||$t.renderAnnotationElement(dt))}setMissingCanvas(dt,kt,$t){var Dt;const Tt=(Dt=ar(this,Dp))==null?void 0:Dt.get(dt);Tt&&(Tt.setCanvas(kt,$t),ar(this,Dp).delete(dt))}addMissingCanvas(dt,kt){(ar(this,Dp)||vr(this,Dp,new Map)).set(dt,kt)}};k0=new WeakMap,Yo=new WeakMap,$0=new WeakMap,Kn=new WeakMap,ba=new WeakMap,S0=new WeakMap,Fl=new WeakMap,_0=new WeakMap,Ll=new WeakMap,$o=new WeakMap,Cp=new WeakMap,Ap=new WeakMap,C0=new WeakMap,Tp=new WeakMap,du=new WeakMap,Ol=new WeakMap,Im=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,A0=new WeakMap,Qv=new WeakMap,uu=new WeakMap,Np=new WeakMap,T0=new WeakMap,Pp=new WeakMap,hu=new WeakMap,nR=new WeakMap,Mp=new WeakMap,N0=new WeakMap,Jv=new WeakMap,Ip=new WeakMap,Dm=new WeakMap,P0=new WeakMap,Dp=new WeakMap,Zv=new WeakMap,_i=new WeakMap,jn=new WeakMap,Bu=new WeakMap,Fp=new WeakMap,Lp=new WeakMap,e1=new WeakMap,M0=new WeakMap,r1=new WeakMap,Op=new WeakMap,pu=new WeakMap,Vu=new WeakMap,s1=new WeakMap,n1=new WeakMap,Bl=new WeakMap,I0=new WeakSet,yw=function({anchorNode:dt}){return dt.nodeType===Node.TEXT_NODE?dt.parentElement:dt},i1=new WeakSet,Y2=function(dt){const{currentLayer:kt}=this;if(kt.hasTextLayer(dt))return kt;for(const $t of ar(this,ba).values())if($t.hasTextLayer(dt))return $t;return null},iR=new WeakSet,xS=function(){const dt=document.getSelection();if(!dt||dt.isCollapsed)return;const $t=Br(this,I0,yw).call(this,dt).closest(".textLayer"),Tt=this.getSelectionBoxes($t);Tt&&(ar(this,hu)||vr(this,hu,new FloatingToolbar(this)),ar(this,hu).show($t,Tt,this.direction==="ltr"))},aR=new WeakSet,gS=function(){var Dt,Ft,Ut;const dt=document.getSelection();if(!dt||dt.isCollapsed){ar(this,Bu)&&((Dt=ar(this,hu))==null||Dt.hide(),vr(this,Bu,null),Br(this,xo,Po).call(this,{hasSelectedText:!1}));return}const{anchorNode:kt}=dt;if(kt===ar(this,Bu))return;const Tt=Br(this,I0,yw).call(this,dt).closest(".textLayer");if(!Tt){ar(this,Bu)&&((Ft=ar(this,hu))==null||Ft.hide(),vr(this,Bu,null),Br(this,xo,Po).call(this,{hasSelectedText:!1}));return}if((Ut=ar(this,hu))==null||Ut.hide(),vr(this,Bu,kt),Br(this,xo,Po).call(this,{hasSelectedText:!0}),!(ar(this,_i)!==AnnotationEditorType.HIGHLIGHT&&ar(this,_i)!==AnnotationEditorType.NONE)&&(ar(this,_i)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),vr(this,Pp,this.isShiftKeyDown),!this.isShiftKeyDown)){const Ht=ar(this,_i)===AnnotationEditorType.HIGHLIGHT?Br(this,i1,Y2).call(this,Tt):null;if(Ht==null||Ht.toggleDrawing(),ar(this,N0)){const Kt=new AbortController,Yt=this.combinedSignal(Kt),Jt=Zt=>{Zt.type==="pointerup"&&Zt.button!==0||(Kt.abort(),Ht==null||Ht.toggleDrawing(!0),Zt.type==="pointerup"&&Br(this,Fm,wv).call(this,"main_toolbar"))};window.addEventListener("pointerup",Jt,{signal:Yt}),window.addEventListener("blur",Jt,{signal:Yt})}else Ht==null||Ht.toggleDrawing(!0),Br(this,Fm,wv).call(this,"main_toolbar")}},Fm=new WeakSet,wv=function(dt=""){ar(this,_i)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(dt):ar(this,Yv)&&Br(this,iR,xS).call(this)},oR=new WeakSet,bS=function(){document.addEventListener("selectionchange",Br(this,aR,gS).bind(this),{signal:this._signal})},lR=new WeakSet,yS=function(){if(ar(this,Np))return;vr(this,Np,new AbortController);const dt=this.combinedSignal(ar(this,Np));window.addEventListener("focus",this.focus.bind(this),{signal:dt}),window.addEventListener("blur",this.blur.bind(this),{signal:dt})},cR=new WeakSet,vS=function(){var dt;(dt=ar(this,Np))==null||dt.abort(),vr(this,Np,null)},a1=new WeakSet,X2=function(){if(ar(this,Ip))return;vr(this,Ip,new AbortController);const dt=this.combinedSignal(ar(this,Ip));window.addEventListener("keydown",this.keydown.bind(this),{signal:dt}),window.addEventListener("keyup",this.keyup.bind(this),{signal:dt})},dR=new WeakSet,ES=function(){var dt;(dt=ar(this,Ip))==null||dt.abort(),vr(this,Ip,null)},o1=new WeakSet,Q2=function(){if(ar(this,Cp))return;vr(this,Cp,new AbortController);const dt=this.combinedSignal(ar(this,Cp));document.addEventListener("copy",this.copy.bind(this),{signal:dt}),document.addEventListener("cut",this.cut.bind(this),{signal:dt}),document.addEventListener("paste",this.paste.bind(this),{signal:dt})},l1=new WeakSet,J2=function(){var dt;(dt=ar(this,Cp))==null||dt.abort(),vr(this,Cp,null)},uR=new WeakSet,jS=function(){const dt=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:dt}),document.addEventListener("drop",this.drop.bind(this),{signal:dt})},xo=new WeakSet,Po=function(dt){Object.entries(dt).some(([$t,Tt])=>ar(this,r1)[$t]!==Tt)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ar(this,r1),dt)}),ar(this,_i)===AnnotationEditorType.HIGHLIGHT&&dt.hasSelectedEditor===!1&&Br(this,Ql,Iu).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Ql=new WeakSet,Iu=function(dt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:dt})},hR=new WeakSet,wS=async function(){if(!ar(this,Mp)){vr(this,Mp,!0);const dt=[];for(const kt of ar(this,ba).values())dt.push(kt.enable());await Promise.all(dt);for(const kt of ar(this,Kn).values())kt.enable()}},pR=new WeakSet,RS=function(){if(this.unselectAll(),ar(this,Mp)){vr(this,Mp,!1);for(const dt of ar(this,ba).values())dt.disable();for(const dt of ar(this,Kn).values())dt.disable()}},d1=new WeakSet,Z2=function(dt){const kt=ar(this,ba).get(dt.pageIndex);kt?kt.addOrRebuild(dt):(this.addEditor(dt),this.addToAnnotationStorage(dt))},fR=new WeakSet,kS=function(){let dt=null;for(dt of ar(this,jn));return dt},Lm=new WeakSet,Rv=function(){if(ar(this,Kn).size===0)return!0;if(ar(this,Kn).size===1)for(const dt of ar(this,Kn).values())return dt.isEmpty();return!1},u1=new WeakSet,_k=function(dt){for(const kt of ar(this,jn))kt.unselect();ar(this,jn).clear();for(const kt of dt)kt.isEmpty()||(ar(this,jn).add(kt),kt.select());Br(this,xo,Po).call(this,{hasSelectedEditor:this.hasSelection})},Es(x0,"TRANSLATE_SMALL",1),Es(x0,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=x0;var _a,fu,Jl,D0,mu,Xo,F0,xu,Bo,zu,Om,gu,Bp,Bm,kv,L0,Ew;const Mo=class Mo{constructor(dt){yr(this,Bm);yr(this,L0);yr(this,_a,null);yr(this,fu,!1);yr(this,Jl,null);yr(this,D0,null);yr(this,mu,null);yr(this,Xo,null);yr(this,F0,!1);yr(this,xu,null);yr(this,Bo,null);yr(this,zu,null);yr(this,Om,null);yr(this,gu,!1);vr(this,Bo,dt),vr(this,gu,dt._uiManager.useNewAltTextFlow),ar(Mo,Bp)||vr(Mo,Bp,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(dt){Mo._l10n??(Mo._l10n=dt)}async render(){const dt=vr(this,Jl,document.createElement("button"));dt.className="altText",dt.tabIndex="0";const kt=vr(this,D0,document.createElement("span"));dt.append(kt),ar(this,gu)?(dt.classList.add("new"),dt.setAttribute("data-l10n-id",ar(Mo,Bp).missing),kt.setAttribute("data-l10n-id",ar(Mo,Bp)["missing-label"])):(dt.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),kt.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const $t=ar(this,Bo)._uiManager._signal;dt.addEventListener("contextmenu",noContextMenu,{signal:$t}),dt.addEventListener("pointerdown",Dt=>Dt.stopPropagation(),{signal:$t});const Tt=Dt=>{Dt.preventDefault(),ar(this,Bo)._uiManager.editAltText(ar(this,Bo)),ar(this,gu)&&ar(this,Bo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:ar(this,Bm,kv)}})};return dt.addEventListener("click",Tt,{capture:!0,signal:$t}),dt.addEventListener("keydown",Dt=>{Dt.target===dt&&Dt.key==="Enter"&&(vr(this,F0,!0),Tt(Dt))},{signal:$t}),await Br(this,L0,Ew).call(this),dt}finish(){ar(this,Jl)&&(ar(this,Jl).focus({focusVisible:ar(this,F0)}),vr(this,F0,!1))}isEmpty(){return ar(this,gu)?ar(this,_a)===null:!ar(this,_a)&&!ar(this,fu)}hasData(){return ar(this,gu)?ar(this,_a)!==null||!!ar(this,zu):this.isEmpty()}get guessedText(){return ar(this,zu)}async setGuessedText(dt){ar(this,_a)===null&&(vr(this,zu,dt),vr(this,Om,await Mo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:dt})),Br(this,L0,Ew).call(this))}toggleAltTextBadge(dt=!1){var kt;if(!ar(this,gu)||ar(this,_a)){(kt=ar(this,xu))==null||kt.remove(),vr(this,xu,null);return}if(!ar(this,xu)){const $t=vr(this,xu,document.createElement("div"));$t.className="noAltTextBadge",ar(this,Bo).div.append($t)}ar(this,xu).classList.toggle("hidden",!dt)}serialize(dt){let kt=ar(this,_a);return!dt&&ar(this,zu)===kt&&(kt=ar(this,Om)),{altText:kt,decorative:ar(this,fu),guessedText:ar(this,zu),textWithDisclaimer:ar(this,Om)}}get data(){return{altText:ar(this,_a),decorative:ar(this,fu)}}set data({altText:dt,decorative:kt,guessedText:$t,textWithDisclaimer:Tt,cancel:Dt=!1}){$t&&(vr(this,zu,$t),vr(this,Om,Tt)),!(ar(this,_a)===dt&&ar(this,fu)===kt)&&(Dt||(vr(this,_a,dt),vr(this,fu,kt)),Br(this,L0,Ew).call(this))}toggle(dt=!1){ar(this,Jl)&&(!dt&&ar(this,Xo)&&(clearTimeout(ar(this,Xo)),vr(this,Xo,null)),ar(this,Jl).disabled=!dt)}shown(){ar(this,Bo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:ar(this,Bm,kv)}})}destroy(){var dt,kt;(dt=ar(this,Jl))==null||dt.remove(),vr(this,Jl,null),vr(this,D0,null),vr(this,mu,null),(kt=ar(this,xu))==null||kt.remove(),vr(this,xu,null)}};_a=new WeakMap,fu=new WeakMap,Jl=new WeakMap,D0=new WeakMap,mu=new WeakMap,Xo=new WeakMap,F0=new WeakMap,xu=new WeakMap,Bo=new WeakMap,zu=new WeakMap,Om=new WeakMap,gu=new WeakMap,Bp=new WeakMap,Bm=new WeakSet,kv=function(){return ar(this,_a)&&"added"||ar(this,_a)===null&&this.guessedText&&"review"||"missing"},L0=new WeakSet,Ew=async function(){var Tt,Dt,Ft;const dt=ar(this,Jl);if(!dt)return;if(ar(this,gu)){if(dt.classList.toggle("done",!!ar(this,_a)),dt.setAttribute("data-l10n-id",ar(Mo,Bp)[ar(this,Bm,kv)]),(Tt=ar(this,D0))==null||Tt.setAttribute("data-l10n-id",ar(Mo,Bp)[`${ar(this,Bm,kv)}-label`]),!ar(this,_a)){(Dt=ar(this,mu))==null||Dt.remove();return}}else{if(!ar(this,_a)&&!ar(this,fu)){dt.classList.remove("done"),(Ft=ar(this,mu))==null||Ft.remove();return}dt.classList.add("done"),dt.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let kt=ar(this,mu);if(!kt){vr(this,mu,kt=document.createElement("span")),kt.className="tooltip",kt.setAttribute("role","tooltip"),kt.id=`alt-text-tooltip-${ar(this,Bo).id}`;const Ut=100,Ht=ar(this,Bo)._uiManager._signal;Ht.addEventListener("abort",()=>{clearTimeout(ar(this,Xo)),vr(this,Xo,null)},{once:!0}),dt.addEventListener("mouseenter",()=>{vr(this,Xo,setTimeout(()=>{vr(this,Xo,null),ar(this,mu).classList.add("show"),ar(this,Bo)._reportTelemetry({action:"alt_text_tooltip"})},Ut))},{signal:Ht}),dt.addEventListener("mouseleave",()=>{var Kt;ar(this,Xo)&&(clearTimeout(ar(this,Xo)),vr(this,Xo,null)),(Kt=ar(this,mu))==null||Kt.classList.remove("show")},{signal:Ht})}ar(this,fu)?kt.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(kt.removeAttribute("data-l10n-id"),kt.textContent=ar(this,_a)),kt.parentNode||dt.append(kt);const $t=ar(this,Bo).getElementForAltText();$t==null||$t.setAttribute("aria-describedby",kt.id)},yr(Mo,Bp,null),Es(Mo,"_l10n",null);let AltText=Mo;var go,Vl,Vm,Ln,h1,zm,Zl,Um,Hm,Gm,p1,e$;class Comment{constructor(dt){yr(this,p1);yr(this,go,null);yr(this,Vl,null);yr(this,Vm,!1);yr(this,Ln,null);yr(this,h1,null);yr(this,zm,null);yr(this,Zl,null);yr(this,Um,null);yr(this,Hm,!1);yr(this,Gm,null);vr(this,Ln,dt)}renderForToolbar(){const dt=vr(this,Vl,document.createElement("button"));return dt.className="comment",Br(this,p1,e$).call(this,dt,!1)}renderForStandalone(){const dt=vr(this,go,document.createElement("button"));dt.className="annotationCommentButton";const kt=ar(this,Ln).commentButtonPosition;if(kt){const{style:$t}=dt;$t.insetInlineEnd=`calc(${100*(ar(this,Ln)._uiManager.direction==="ltr"?1-kt[0]:kt[0])}% - var(--comment-button-dim))`,$t.top=`calc(${100*kt[1]}% - var(--comment-button-dim))`;const Tt=ar(this,Ln).commentButtonColor;Tt&&($t.backgroundColor=Tt)}return Br(this,p1,e$).call(this,dt,!0)}focusButton(){setTimeout(()=>{var dt;(dt=ar(this,go)??ar(this,Vl))==null||dt.focus()},0)}onUpdatedColor(){if(!ar(this,go))return;const dt=ar(this,Ln).commentButtonColor;dt&&(ar(this,go).style.backgroundColor=dt),ar(this,Ln)._uiManager.updatePopupColor(ar(this,Ln))}get commentButtonWidth(){var dt;return(((dt=ar(this,go))==null?void 0:dt.getBoundingClientRect().width)??0)/ar(this,Ln).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(ar(this,Gm))return ar(this,Gm);if(!ar(this,go))return null;const{x:dt,y:kt,height:$t}=ar(this,go).getBoundingClientRect(),{x:Tt,y:Dt,width:Ft,height:Ut}=ar(this,Ln).parent.boundingClientRect;return[(dt-Tt)/Ft,(kt+$t-Dt)/Ut]}set commentPopupPositionInLayer(dt){vr(this,Gm,dt)}hasDefaultPopupPosition(){return ar(this,Gm)===null}removeStandaloneCommentButton(){var dt;(dt=ar(this,go))==null||dt.remove(),vr(this,go,null)}removeToolbarCommentButton(){var dt;(dt=ar(this,Vl))==null||dt.remove(),vr(this,Vl,null)}setCommentButtonStates({selected:dt,hasPopup:kt}){ar(this,go)&&(ar(this,go).classList.toggle("selected",dt),ar(this,go).ariaExpanded=kt)}edit(dt){const kt=this.commentPopupPositionInLayer;let $t,Tt;if(kt)[$t,Tt]=kt;else{[$t,Tt]=ar(this,Ln).commentButtonPosition;const{width:Yt,height:Jt,x:Zt,y:er}=ar(this,Ln);$t=Zt+$t*Yt,Tt=er+Tt*Jt}const Dt=ar(this,Ln).parent.boundingClientRect,{x:Ft,y:Ut,width:Ht,height:Kt}=Dt;ar(this,Ln)._uiManager.editComment(ar(this,Ln),Ft+$t*Ht,Ut+Tt*Kt,{...dt,parentDimensions:Dt})}finish(){ar(this,Vl)&&(ar(this,Vl).focus({focusVisible:ar(this,Vm)}),vr(this,Vm,!1))}isDeleted(){return ar(this,Hm)||ar(this,Zl)===""}isEmpty(){return ar(this,Zl)===null}hasBeenEdited(){return this.isDeleted()||ar(this,Zl)!==ar(this,h1)}serialize(){return this.data}get data(){return{text:ar(this,Zl),richText:ar(this,zm),date:ar(this,Um),deleted:this.isDeleted()}}set data(dt){if(dt!==ar(this,Zl)&&vr(this,zm,null),dt===null){vr(this,Zl,""),vr(this,Hm,!0);return}vr(this,Zl,dt),vr(this,Um,new Date),vr(this,Hm,!1)}setInitialText(dt,kt=null){vr(this,h1,dt),this.data=dt,vr(this,Um,null),vr(this,zm,kt)}shown(){}destroy(){var dt,kt;(dt=ar(this,Vl))==null||dt.remove(),vr(this,Vl,null),(kt=ar(this,go))==null||kt.remove(),vr(this,go,null),vr(this,Zl,""),vr(this,zm,null),vr(this,Um,null),vr(this,Ln,null),vr(this,Vm,!1),vr(this,Hm,!1)}}go=new WeakMap,Vl=new WeakMap,Vm=new WeakMap,Ln=new WeakMap,h1=new WeakMap,zm=new WeakMap,Zl=new WeakMap,Um=new WeakMap,Hm=new WeakMap,Gm=new WeakMap,p1=new WeakSet,e$=function(dt,kt){if(!ar(this,Ln)._uiManager.hasCommentManager())return null;dt.tabIndex="0",dt.ariaHasPopup="dialog",kt?(dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(dt.ariaControlsElements=[ar(this,Ln)._uiManager.getCommentDialogElement()],dt.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const $t=ar(this,Ln)._uiManager._signal;if(!($t instanceof AbortSignal)||$t.aborted)return dt;dt.addEventListener("contextmenu",noContextMenu,{signal:$t}),kt&&(dt.addEventListener("focusin",Dt=>{ar(this,Ln)._focusEventsAllowed=!1,stopEvent(Dt)},{capture:!0,signal:$t}),dt.addEventListener("focusout",Dt=>{ar(this,Ln)._focusEventsAllowed=!0,stopEvent(Dt)},{capture:!0,signal:$t})),dt.addEventListener("pointerdown",Dt=>Dt.stopPropagation(),{signal:$t});const Tt=Dt=>{Dt.preventDefault(),dt===ar(this,Vl)?this.edit():ar(this,Ln).toggleComment(!0)};return dt.addEventListener("click",Tt,{capture:!0,signal:$t}),dt.addEventListener("keydown",Dt=>{Dt.target===dt&&Dt.key==="Enter"&&(vr(this,Vm,!0),Tt(Dt))},{signal:$t}),dt.addEventListener("pointerenter",()=>{ar(this,Ln).toggleComment(!1,!0)},{signal:$t}),dt.addEventListener("pointerleave",()=>{ar(this,Ln).toggleComment(!1,!1)},{signal:$t}),dt};var O0,Wm,f1,m1,x1,g1,b1,Uu,qm,Hu,Km,Gu,mR,$S,xR,SS,gR,_S;const X$=class X${constructor({container:dt,isPinchingDisabled:kt=null,isPinchingStopped:$t=null,onPinchStart:Tt=null,onPinching:Dt=null,onPinchEnd:Ft=null,signal:Ut}){yr(this,mR);yr(this,xR);yr(this,gR);yr(this,O0,void 0);yr(this,Wm,!1);yr(this,f1,null);yr(this,m1,void 0);yr(this,x1,void 0);yr(this,g1,void 0);yr(this,b1,void 0);yr(this,Uu,null);yr(this,qm,void 0);yr(this,Hu,null);yr(this,Km,void 0);yr(this,Gu,null);vr(this,O0,dt),vr(this,f1,$t),vr(this,m1,kt),vr(this,x1,Tt),vr(this,g1,Dt),vr(this,b1,Ft),vr(this,Km,new AbortController),vr(this,qm,AbortSignal.any([Ut,ar(this,Km).signal])),dt.addEventListener("touchstart",Br(this,mR,$S).bind(this),{passive:!1,signal:ar(this,qm)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var dt,kt;(dt=ar(this,Km))==null||dt.abort(),vr(this,Km,null),(kt=ar(this,Uu))==null||kt.abort(),vr(this,Uu,null)}};O0=new WeakMap,Wm=new WeakMap,f1=new WeakMap,m1=new WeakMap,x1=new WeakMap,g1=new WeakMap,b1=new WeakMap,Uu=new WeakMap,qm=new WeakMap,Hu=new WeakMap,Km=new WeakMap,Gu=new WeakMap,mR=new WeakSet,$S=function(dt){var Tt,Dt,Ft;if((Tt=ar(this,m1))!=null&&Tt.call(this))return;if(dt.touches.length===1){if(ar(this,Uu))return;const Ut=vr(this,Uu,new AbortController),Ht=AbortSignal.any([ar(this,qm),Ut.signal]),Kt=ar(this,O0),Yt={capture:!0,signal:Ht,passive:!1},Jt=Zt=>{var er;Zt.pointerType==="touch"&&((er=ar(this,Uu))==null||er.abort(),vr(this,Uu,null))};Kt.addEventListener("pointerdown",Zt=>{Zt.pointerType==="touch"&&(stopEvent(Zt),Jt(Zt))},Yt),Kt.addEventListener("pointerup",Jt,Yt),Kt.addEventListener("pointercancel",Jt,Yt);return}if(!ar(this,Gu)){vr(this,Gu,new AbortController);const Ut=AbortSignal.any([ar(this,qm),ar(this,Gu).signal]),Ht=ar(this,O0),Kt={signal:Ut,capture:!1,passive:!1};Ht.addEventListener("touchmove",Br(this,xR,SS).bind(this),Kt);const Yt=Br(this,gR,_S).bind(this);Ht.addEventListener("touchend",Yt,Kt),Ht.addEventListener("touchcancel",Yt,Kt),Kt.capture=!0,Ht.addEventListener("pointerdown",stopEvent,Kt),Ht.addEventListener("pointermove",stopEvent,Kt),Ht.addEventListener("pointercancel",stopEvent,Kt),Ht.addEventListener("pointerup",stopEvent,Kt),(Dt=ar(this,x1))==null||Dt.call(this)}if(stopEvent(dt),dt.touches.length!==2||(Ft=ar(this,f1))!=null&&Ft.call(this)){vr(this,Hu,null);return}let[kt,$t]=dt.touches;kt.identifier>$t.identifier&&([kt,$t]=[$t,kt]),vr(this,Hu,{touch0X:kt.screenX,touch0Y:kt.screenY,touch1X:$t.screenX,touch1Y:$t.screenY})},xR=new WeakSet,SS=function(dt){var cr;if(!ar(this,Hu)||dt.touches.length!==2)return;stopEvent(dt);let[kt,$t]=dt.touches;kt.identifier>$t.identifier&&([kt,$t]=[$t,kt]);const{screenX:Tt,screenY:Dt}=kt,{screenX:Ft,screenY:Ut}=$t,Ht=ar(this,Hu),{touch0X:Kt,touch0Y:Yt,touch1X:Jt,touch1Y:Zt}=Ht,er=Jt-Kt,rr=Zt-Yt,sr=Ft-Tt,nr=Ut-Dt,ir=Math.hypot(sr,nr)||1,lr=Math.hypot(er,rr)||1;if(!ar(this,Wm)&&Math.abs(lr-ir)<=X$.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(Ht.touch0X=Tt,Ht.touch0Y=Dt,Ht.touch1X=Ft,Ht.touch1Y=Ut,!ar(this,Wm)){vr(this,Wm,!0);return}const or=[(Tt+Ft)/2,(Dt+Ut)/2];(cr=ar(this,g1))==null||cr.call(this,or,lr,ir)},gR=new WeakSet,_S=function(dt){var kt;dt.touches.length>=2||(ar(this,Gu)&&(ar(this,Gu).abort(),vr(this,Gu,null),(kt=ar(this,b1))==null||kt.call(this)),ar(this,Hu)&&(stopEvent(dt),vr(this,Hu,null),vr(this,Wm,!1)))};let TouchManager=X$;var Ym,_c,Hn,Pn,Wu,B0,Vp,y1,bo,Xm,qu,bu,zp,v1,Qm,Qo,E1,Jm,Ku,yu,V0,z0,zl,Zm,j1,bR,w1,t$,R1,r$,U0,jw,yR,CS,vR,AS,k1,s$,H0,ww,$1,n$,ER,TS,jR,NS,wR,PS,S1,i$,RR,MS,_1,a$,kR,IS,$R,DS,SR,FS,C1,o$,ex,$v;const Us=class Us{constructor(dt){yr(this,w1);yr(this,U0);yr(this,yR);yr(this,vR);yr(this,k1);yr(this,H0);yr(this,$1);yr(this,ER);yr(this,jR);yr(this,wR);yr(this,S1);yr(this,RR);yr(this,_1);yr(this,kR);yr(this,$R);yr(this,SR);yr(this,C1);yr(this,ex);yr(this,Ym,null);yr(this,_c,null);yr(this,Hn,null);yr(this,Pn,null);yr(this,Wu,null);yr(this,B0,!1);yr(this,Vp,null);yr(this,y1,"");yr(this,bo,null);yr(this,Xm,null);yr(this,qu,null);yr(this,bu,null);yr(this,zp,null);yr(this,v1,"");yr(this,Qm,!1);yr(this,Qo,null);yr(this,E1,!1);yr(this,Jm,!1);yr(this,Ku,!1);yr(this,yu,null);yr(this,V0,0);yr(this,z0,0);yr(this,zl,null);yr(this,Zm,null);Es(this,"isSelected",!1);Es(this,"_isCopy",!1);Es(this,"_editToolbar",null);Es(this,"_initialOptions",Object.create(null));Es(this,"_initialData",null);Es(this,"_isVisible",!0);Es(this,"_uiManager",null);Es(this,"_focusEventsAllowed",!0);yr(this,j1,!1);yr(this,bR,Us._zIndex++);this.parent=dt.parent,this.id=dt.id,this.width=this.height=null,this.pageIndex=dt.parent.pageIndex,this.name=dt.name,this.div=null,this._uiManager=dt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=dt.isCentered,this._structTreeParentId=null,this.annotationElementId=dt.annotationElementId||null,this.creationDate=dt.creationDate||new Date,this.modificationDate=dt.modificationDate||null;const{rotation:kt,rawDims:{pageWidth:$t,pageHeight:Tt,pageX:Dt,pageY:Ft}}=this.parent.viewport;this.rotation=kt,this.pageRotation=(360+kt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[$t,Tt],this.pageTranslation=[Dt,Ft];const[Ut,Ht]=this.parentDimensions;this.x=dt.x/Ut,this.y=dt.y/Ht,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const dt=Us.prototype._resizeWithKeyboard,kt=AnnotationEditorUIManager.TRANSLATE_SMALL,$t=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],dt,{args:[-kt,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],dt,{args:[-$t,0]}],[["ArrowRight","mac+ArrowRight"],dt,{args:[kt,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],dt,{args:[$t,0]}],[["ArrowUp","mac+ArrowUp"],dt,{args:[0,-kt]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],dt,{args:[0,-$t]}],[["ArrowDown","mac+ArrowDown"],dt,{args:[0,kt]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],dt,{args:[0,$t]}],[["Escape","mac+Escape"],Us.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(dt){const kt=new FakeEditor({id:dt.parent.getNextId(),parent:dt.parent,uiManager:dt._uiManager});kt.annotationElementId=dt.annotationElementId,kt.deleted=!0,kt._uiManager.addToAnnotationStorage(kt)}static initialize(dt,kt){if(Us._l10n??(Us._l10n=dt),Us._l10nResizer||(Us._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Us._borderLineWidth!==-1)return;const $t=getComputedStyle(document.documentElement);Us._borderLineWidth=parseFloat($t.getPropertyValue("--outline-width"))||0}static updateDefaultParams(dt,kt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(dt){return!1}static paste(dt,kt){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ar(this,j1)}set _isDraggable(dt){var kt;vr(this,j1,dt),(kt=this.div)==null||kt.classList.toggle("draggable",dt)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[dt,kt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*kt/(dt*2),this.y+=this.width*dt/(kt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*kt/(dt*2),this.y-=this.width*dt/(kt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(dt){this._uiManager.addCommands(dt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ar(this,bR)}setParent(dt){var kt;dt!==null?(this.pageIndex=dt.pageIndex,this.pageDimensions=dt.pageDimensions):(Br(this,ex,$v).call(this),(kt=ar(this,bu))==null||kt.remove(),vr(this,bu,null)),this.parent=dt}focusin(dt){this._focusEventsAllowed&&(ar(this,Qm)?vr(this,Qm,!1):this.parent.setSelected(this))}focusout(dt){var $t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const kt=dt.relatedTarget;kt!=null&&kt.closest(`#${this.id}`)||(dt.preventDefault(),($t=this.parent)!=null&&$t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(dt,kt,$t,Tt){const[Dt,Ft]=this.parentDimensions;[$t,Tt]=this.screenToPageTranslation($t,Tt),this.x=(dt+$t)/Dt,this.y=(kt+Tt)/Ft,this.fixAndSetPosition()}_moveAfterPaste(dt,kt){const[$t,Tt]=this.parentDimensions;this.setAt(dt*$t,kt*Tt,this.width*$t,this.height*Tt),this._onTranslated()}translate(dt,kt){Br(this,w1,t$).call(this,this.parentDimensions,dt,kt)}translateInPage(dt,kt){ar(this,Qo)||vr(this,Qo,[this.x,this.y,this.width,this.height]),Br(this,w1,t$).call(this,this.pageDimensions,dt,kt),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(dt,kt){ar(this,Qo)||vr(this,Qo,[this.x,this.y,this.width,this.height]);const{div:$t,parentDimensions:[Tt,Dt]}=this;if(this.x+=dt/Tt,this.y+=kt/Dt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Jt,y:Zt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Jt,Zt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ft,y:Ut}=this;const[Ht,Kt]=this.getBaseTranslation();Ft+=Ht,Ut+=Kt;const{style:Yt}=$t;Yt.left=`${(100*Ft).toFixed(2)}%`,Yt.top=`${(100*Ut).toFixed(2)}%`,this._onTranslating(Ft,Ut),$t.scrollIntoView({block:"nearest"})}_onTranslating(dt,kt){}_onTranslated(dt,kt){}get _hasBeenMoved(){return!!ar(this,Qo)&&(ar(this,Qo)[0]!==this.x||ar(this,Qo)[1]!==this.y)}get _hasBeenResized(){return!!ar(this,Qo)&&(ar(this,Qo)[2]!==this.width||ar(this,Qo)[3]!==this.height)}getBaseTranslation(){const[dt,kt]=this.parentDimensions,{_borderLineWidth:$t}=Us,Tt=$t/dt,Dt=$t/kt;switch(this.rotation){case 90:return[-Tt,Dt];case 180:return[Tt,Dt];case 270:return[Tt,-Dt];default:return[-Tt,-Dt]}}get _mustFixPosition(){return!0}fixAndSetPosition(dt=this.rotation){const{div:{style:kt},pageDimensions:[$t,Tt]}=this;let{x:Dt,y:Ft,width:Ut,height:Ht}=this;if(Ut*=$t,Ht*=Tt,Dt*=$t,Ft*=Tt,this._mustFixPosition)switch(dt){case 0:Dt=MathClamp(Dt,0,$t-Ut),Ft=MathClamp(Ft,0,Tt-Ht);break;case 90:Dt=MathClamp(Dt,0,$t-Ht),Ft=MathClamp(Ft,Ut,Tt);break;case 180:Dt=MathClamp(Dt,Ut,$t),Ft=MathClamp(Ft,Ht,Tt);break;case 270:Dt=MathClamp(Dt,Ht,$t),Ft=MathClamp(Ft,0,Tt-Ut);break}this.x=Dt/=$t,this.y=Ft/=Tt;const[Kt,Yt]=this.getBaseTranslation();Dt+=Kt,Ft+=Yt,kt.left=`${(100*Dt).toFixed(2)}%`,kt.top=`${(100*Ft).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(dt,kt){var $t;return Br($t=Us,R1,r$).call($t,dt,kt,this.parentRotation)}pageTranslationToScreen(dt,kt){var $t;return Br($t=Us,R1,r$).call($t,dt,kt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:dt,pageDimensions:[kt,$t]}=this;return[kt*dt,$t*dt]}setDims(){const{div:{style:dt},width:kt,height:$t}=this;dt.width=`${(100*kt).toFixed(2)}%`,dt.height=`${(100*$t).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(dt){return Math.round(dt*1e4)/1e4}_onResizing(){}altTextFinish(){var dt;(dt=ar(this,Hn))==null||dt.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||ar(this,Jm))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:dt}=this;if(dt)for(const[kt,$t]of dt)await this._editToolbar.addButton(kt,$t);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var dt;(dt=this._editToolbar)==null||dt.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var dt;(dt=this._editToolbar)==null||dt.removeButton("comment")}removeEditToolbar(){var dt,kt;(dt=this._editToolbar)==null||dt.remove(),this._editToolbar=null,(kt=ar(this,Hn))==null||kt.destroy()}addContainer(dt){var $t;const kt=($t=this._editToolbar)==null?void 0:$t.div;kt?kt.before(dt):this.div.append(dt)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return ar(this,Hn)||(AltText.initialize(Us._l10n),vr(this,Hn,new AltText(this)),ar(this,Ym)&&(ar(this,Hn).data=ar(this,Ym),vr(this,Ym,null))),ar(this,Hn)}get altTextData(){var dt;return(dt=ar(this,Hn))==null?void 0:dt.data}set altTextData(dt){ar(this,Hn)&&(ar(this,Hn).data=dt)}get guessedAltText(){var dt;return(dt=ar(this,Hn))==null?void 0:dt.guessedText}async setGuessedAltText(dt){var kt;await((kt=ar(this,Hn))==null?void 0:kt.setGuessedText(dt))}serializeAltText(dt){var kt;return(kt=ar(this,Hn))==null?void 0:kt.serialize(dt)}hasAltText(){return!!ar(this,Hn)&&!ar(this,Hn).isEmpty()}hasAltTextData(){var dt;return((dt=ar(this,Hn))==null?void 0:dt.hasData())??!1}focusCommentButton(){var dt;(dt=ar(this,Pn))==null||dt.focusButton()}addCommentButton(){return ar(this,Pn)||vr(this,Pn,new Comment(this))}addStandaloneCommentButton(){if(ar(this,Wu)){this._uiManager.isEditingMode()&&ar(this,Wu).classList.remove("hidden");return}this.hasComment&&(vr(this,Wu,ar(this,Pn).renderForStandalone()),this.div.append(ar(this,Wu)))}removeStandaloneCommentButton(){ar(this,Pn).removeStandaloneCommentButton(),vr(this,Wu,null)}hideStandaloneCommentButton(){var dt;(dt=ar(this,Wu))==null||dt.classList.add("hidden")}get comment(){const{data:{richText:dt,text:kt,date:$t,deleted:Tt}}=ar(this,Pn);return{text:kt,richText:dt,date:$t,deleted:Tt,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(dt){ar(this,Pn)||vr(this,Pn,new Comment(this)),ar(this,Pn).data=dt,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:dt,popupRef:kt,richText:$t}){if(!kt||(ar(this,Pn)||vr(this,Pn,new Comment(this)),ar(this,Pn).setInitialText(dt,$t),!this.annotationElementId))return;const Tt=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);Tt&&this.updateFromAnnotationLayer(Tt)}get hasEditedComment(){var dt;return(dt=ar(this,Pn))==null?void 0:dt.hasBeenEdited()}get hasDeletedComment(){var dt;return(dt=ar(this,Pn))==null?void 0:dt.isDeleted()}get hasComment(){return!!ar(this,Pn)&&!ar(this,Pn).isEmpty()&&!ar(this,Pn).isDeleted()}async editComment(dt){ar(this,Pn)||vr(this,Pn,new Comment(this)),ar(this,Pn).edit(dt)}toggleComment(dt,kt=void 0){this.hasComment&&this._uiManager.toggleComment(this,dt,kt)}setSelectedCommentButton(dt){ar(this,Pn).setSelectedButton(dt)}addComment(dt){if(this.hasEditedComment){const[,,,Tt]=dt.rect,[Dt]=this.pageDimensions,[Ft]=this.pageTranslation,Ut=Ft+Dt+1,Ht=Tt-100,Kt=Ut+180;dt.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[Ut,Ht,Kt,Tt]}}}updateFromAnnotationLayer({popup:{contents:dt,deleted:kt}}){ar(this,Pn).data=kt?null:dt}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var Ft;const dt=this.div=document.createElement("div");dt.setAttribute("data-editor-rotation",(360-this.rotation)%360),dt.className=this.name,dt.setAttribute("id",this.id),dt.tabIndex=ar(this,B0)?-1:0,dt.setAttribute("role","application"),this.defaultL10nId&&dt.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||dt.classList.add("hidden"),this.setInForeground(),Br(this,_1,a$).call(this);const[kt,$t]=this.parentDimensions;this.parentRotation%180!==0&&(dt.style.maxWidth=`${(100*$t/kt).toFixed(2)}%`,dt.style.maxHeight=`${(100*kt/$t).toFixed(2)}%`);const[Tt,Dt]=this.getInitialTranslation();return this.translate(Tt,Dt),bindEvents(this,dt,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(ar(this,Zm)||vr(this,Zm,new TouchManager({container:dt,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Br(this,ER,TS).bind(this),onPinching:Br(this,jR,NS).bind(this),onPinchEnd:Br(this,wR,PS).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(Ft=this._uiManager._editorUndoBar)==null||Ft.hide(),dt}pointerdown(dt){const{isMac:kt}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&kt){dt.preventDefault();return}if(vr(this,Qm,!0),this._isDraggable){Br(this,RR,MS).call(this,dt);return}Br(this,S1,i$).call(this,dt)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){ar(this,yu)&&clearTimeout(ar(this,yu)),vr(this,yu,setTimeout(()=>{var dt;vr(this,yu,null),(dt=this.parent)==null||dt.moveEditorInDOM(this)},0))}_setParentAndPosition(dt,kt,$t){dt.changeParent(this),this.x=kt,this.y=$t,this.fixAndSetPosition(),this._onTranslated()}getRect(dt,kt,$t=this.rotation){const Tt=this.parentScale,[Dt,Ft]=this.pageDimensions,[Ut,Ht]=this.pageTranslation,Kt=dt/Tt,Yt=kt/Tt,Jt=this.x*Dt,Zt=this.y*Ft,er=this.width*Dt,rr=this.height*Ft;switch($t){case 0:return[Jt+Kt+Ut,Ft-Zt-Yt-rr+Ht,Jt+Kt+er+Ut,Ft-Zt-Yt+Ht];case 90:return[Jt+Yt+Ut,Ft-Zt+Kt+Ht,Jt+Yt+rr+Ut,Ft-Zt+Kt+er+Ht];case 180:return[Jt-Kt-er+Ut,Ft-Zt+Yt+Ht,Jt-Kt+Ut,Ft-Zt+Yt+rr+Ht];case 270:return[Jt-Yt-rr+Ut,Ft-Zt-Kt-er+Ht,Jt-Yt+Ut,Ft-Zt-Kt+Ht];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(dt,kt){const[$t,Tt,Dt,Ft]=dt,Ut=Dt-$t,Ht=Ft-Tt;switch(this.rotation){case 0:return[$t,kt-Ft,Ut,Ht];case 90:return[$t,kt-Tt,Ht,Ut];case 180:return[Dt,kt-Tt,Ut,Ht];case 270:return[Dt,kt-Ft,Ht,Ut];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Us._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var dt;(dt=ar(this,Pn))==null||dt.onUpdatedColor()}getData(){const{comment:{text:dt,color:kt,date:$t,opacity:Tt,deleted:Dt,richText:Ft},uid:Ut,pageIndex:Ht,creationDate:Kt,modificationDate:Yt}=this;return{id:Ut,pageIndex:Ht,rect:this.getPDFRect(),richText:Ft,contentsObj:{str:dt},creationDate:Kt,modificationDate:$t||Yt,popupRef:!Dt,color:kt,opacity:Tt}}onceAdded(dt){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),vr(this,Jm,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),vr(this,Jm,!1),!0):!1}isInEditMode(){return ar(this,Jm)}shouldGetKeyboardEvents(){return ar(this,Ku)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:dt,left:kt,bottom:$t,right:Tt}=this.getClientDimensions(),{innerHeight:Dt,innerWidth:Ft}=window;return kt<Ft&&Tt>0&&dt<Dt&&$t>0}rebuild(){Br(this,_1,a$).call(this)}rotate(dt){}resize(){}serializeDeleted(){var dt;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((dt=this._initialData)==null?void 0:dt.popupRef)||""}}serialize(dt=!1,kt=null){var $t;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(($t=this._initialData)==null?void 0:$t.popupRef)||""}}static async deserialize(dt,kt,$t){const Tt=new this.prototype.constructor({parent:kt,id:kt.getNextId(),uiManager:$t,annotationElementId:dt.annotationElementId,creationDate:dt.creationDate,modificationDate:dt.modificationDate});Tt.rotation=dt.rotation,vr(Tt,Ym,dt.accessibilityData),Tt._isCopy=dt.isCopy||!1;const[Dt,Ft]=Tt.pageDimensions,[Ut,Ht,Kt,Yt]=Tt.getRectInCurrentCoords(dt.rect,Ft);return Tt.x=Ut/Dt,Tt.y=Ht/Ft,Tt.width=Kt/Dt,Tt.height=Yt/Ft,Tt}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var dt,kt;if((dt=ar(this,zp))==null||dt.abort(),vr(this,zp,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),ar(this,yu)&&(clearTimeout(ar(this,yu)),vr(this,yu,null)),Br(this,ex,$v).call(this),this.removeEditToolbar(),ar(this,zl)){for(const $t of ar(this,zl).values())clearTimeout($t);vr(this,zl,null)}this.parent=null,(kt=ar(this,Zm))==null||kt.destroy(),vr(this,Zm,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Br(this,yR,CS).call(this),ar(this,bo).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[dt,kt]}=this,[$t,Tt,Dt,Ft]=this.getPDFRect();return[Us._round($t+(Dt-$t)*dt),Us._round(Tt+(Ft-Tt)*(1-kt))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return ar(this,Pn).commentPopupPositionInLayer}set commentPopupPosition(dt){ar(this,Pn).commentPopupPositionInLayer=dt}hasDefaultPopupPosition(){return ar(this,Pn).hasDefaultPopupPosition()}get commentButtonWidth(){return ar(this,Pn).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(dt){ar(this,Pn).setCommentButtonStates(dt)}keydown(dt){if(!this.isResizable||dt.target!==this.div||dt.key!=="Enter")return;this._uiManager.setSelected(this),vr(this,qu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const kt=ar(this,bo).children;if(!ar(this,_c)){vr(this,_c,Array.from(kt));const Ft=Br(this,kR,IS).bind(this),Ut=Br(this,$R,DS).bind(this),Ht=this._uiManager._signal;for(const Kt of ar(this,_c)){const Yt=Kt.getAttribute("data-resizer-name");Kt.setAttribute("role","spinbutton"),Kt.addEventListener("keydown",Ft,{signal:Ht}),Kt.addEventListener("blur",Ut,{signal:Ht}),Kt.addEventListener("focus",Br(this,SR,FS).bind(this,Yt),{signal:Ht}),Kt.setAttribute("data-l10n-id",Us._l10nResizer[Yt])}}const $t=ar(this,_c)[0];let Tt=0;for(const Ft of kt){if(Ft===$t)break;Tt++}const Dt=(360-this.rotation+this.parentRotation)%360/90*(ar(this,_c).length/4);if(Dt!==Tt){if(Dt<Tt)for(let Ut=0;Ut<Tt-Dt;Ut++)ar(this,bo).append(ar(this,bo).firstChild);else if(Dt>Tt)for(let Ut=0;Ut<Dt-Tt;Ut++)ar(this,bo).firstChild.before(ar(this,bo).lastChild);let Ft=0;for(const Ut of kt){const Kt=ar(this,_c)[Ft++].getAttribute("data-resizer-name");Ut.setAttribute("data-l10n-id",Us._l10nResizer[Kt])}}Br(this,C1,o$).call(this,0),vr(this,Ku,!0),ar(this,bo).firstChild.focus({focusVisible:!0}),dt.preventDefault(),dt.stopImmediatePropagation()}_resizeWithKeyboard(dt,kt){ar(this,Ku)&&Br(this,$1,n$).call(this,ar(this,v1),{deltaX:dt,deltaY:kt,fromKeyboard:!0})}_stopResizingWithKeyboard(){Br(this,ex,$v).call(this),this.div.focus()}select(){var dt,kt,$t;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(dt=this.div)==null||dt.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var Tt,Dt;(Tt=this.div)!=null&&Tt.classList.contains("selectedEditor")&&((Dt=this._editToolbar)==null||Dt.show())});return}(kt=this._editToolbar)==null||kt.show(),($t=ar(this,Hn))==null||$t.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var dt;return(dt=this.div)==null?void 0:dt.focus({preventScroll:!0})},0)}unselect(){var dt,kt,$t,Tt,Dt;this.isSelected&&(this.isSelected=!1,(dt=ar(this,bo))==null||dt.classList.add("hidden"),(kt=this.div)==null||kt.classList.remove("selectedEditor"),($t=this.div)!=null&&$t.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(Tt=this._editToolbar)==null||Tt.hide(),(Dt=ar(this,Hn))==null||Dt.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(dt,kt){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(dt){dt.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return ar(this,E1)}set isEditing(dt){vr(this,E1,dt),this.parent&&(dt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(dt,kt=!1){if(kt){ar(this,zl)||vr(this,zl,new Map);const{action:$t}=dt;let Tt=ar(this,zl).get($t);Tt&&clearTimeout(Tt),Tt=setTimeout(()=>{this._reportTelemetry(dt),ar(this,zl).delete($t),ar(this,zl).size===0&&vr(this,zl,null)},Us._telemetryTimeout),ar(this,zl).set($t,Tt);return}dt.type||(dt.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:dt}})}show(dt=this._isVisible){this.div.classList.toggle("hidden",!dt),this._isVisible=dt}enable(){this.div&&(this.div.tabIndex=0),vr(this,B0,!1)}disable(){this.div&&(this.div.tabIndex=-1),vr(this,B0,!0)}updateFakeAnnotationElement(dt){if(!ar(this,bu)&&!this.deleted){vr(this,bu,dt.addFakeAnnotation(this));return}if(this.deleted){ar(this,bu).remove(),vr(this,bu,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&ar(this,bu).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(dt){if(this.deleted)return dt.hide(),null;let kt=dt.container.querySelector(".annotationContent");if(!kt)kt=document.createElement("div"),kt.classList.add("annotationContent",this.editorType),dt.container.prepend(kt);else if(kt.nodeName==="CANVAS"){const $t=kt;kt=document.createElement("div"),kt.classList.add("annotationContent",this.editorType),$t.before(kt)}return kt}resetAnnotationElement(dt){const{firstChild:kt}=dt.container;(kt==null?void 0:kt.nodeName)==="DIV"&&kt.classList.contains("annotationContent")&&kt.remove()}};Ym=new WeakMap,_c=new WeakMap,Hn=new WeakMap,Pn=new WeakMap,Wu=new WeakMap,B0=new WeakMap,Vp=new WeakMap,y1=new WeakMap,bo=new WeakMap,Xm=new WeakMap,qu=new WeakMap,bu=new WeakMap,zp=new WeakMap,v1=new WeakMap,Qm=new WeakMap,Qo=new WeakMap,E1=new WeakMap,Jm=new WeakMap,Ku=new WeakMap,yu=new WeakMap,V0=new WeakMap,z0=new WeakMap,zl=new WeakMap,Zm=new WeakMap,j1=new WeakMap,bR=new WeakMap,w1=new WeakSet,t$=function([dt,kt],$t,Tt){[$t,Tt]=this.screenToPageTranslation($t,Tt),this.x+=$t/dt,this.y+=Tt/kt,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},R1=new WeakSet,r$=function(dt,kt,$t){switch($t){case 90:return[kt,-dt];case 180:return[-dt,-kt];case 270:return[-kt,dt];default:return[dt,kt]}},U0=new WeakSet,jw=function(dt){switch(dt){case 90:{const[kt,$t]=this.pageDimensions;return[0,-kt/$t,$t/kt,0]}case 180:return[-1,0,0,-1];case 270:{const[kt,$t]=this.pageDimensions;return[0,kt/$t,-$t/kt,0]}default:return[1,0,0,1]}},yR=new WeakSet,CS=function(){if(ar(this,bo))return;vr(this,bo,document.createElement("div")),ar(this,bo).classList.add("resizers");const dt=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],kt=this._uiManager._signal;for(const $t of dt){const Tt=document.createElement("div");ar(this,bo).append(Tt),Tt.classList.add("resizer",$t),Tt.setAttribute("data-resizer-name",$t),Tt.addEventListener("pointerdown",Br(this,vR,AS).bind(this,$t),{signal:kt}),Tt.addEventListener("contextmenu",noContextMenu,{signal:kt}),Tt.tabIndex=-1}this.div.prepend(ar(this,bo))},vR=new WeakSet,AS=function(dt,kt){var Yt;kt.preventDefault();const{isMac:$t}=util_FeatureTest.platform;if(kt.button!==0||kt.ctrlKey&&$t)return;(Yt=ar(this,Hn))==null||Yt.toggle(!1);const Tt=this._isDraggable;this._isDraggable=!1,vr(this,Xm,[kt.screenX,kt.screenY]);const Dt=new AbortController,Ft=this._uiManager.combinedSignal(Dt);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Br(this,$1,n$).bind(this,dt),{passive:!0,capture:!0,signal:Ft}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:Ft}),window.addEventListener("contextmenu",noContextMenu,{signal:Ft}),vr(this,qu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const Ut=this.parent.div.style.cursor,Ht=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(kt.target).cursor;const Kt=()=>{var Jt;Dt.abort(),this.parent.togglePointerEvents(!0),(Jt=ar(this,Hn))==null||Jt.toggle(!0),this._isDraggable=Tt,this.parent.div.style.cursor=Ut,this.div.style.cursor=Ht,Br(this,H0,ww).call(this)};window.addEventListener("pointerup",Kt,{signal:Ft}),window.addEventListener("blur",Kt,{signal:Ft})},k1=new WeakSet,s$=function(dt,kt,$t,Tt){this.width=$t,this.height=Tt,this.x=dt,this.y=kt,this.setDims(),this.fixAndSetPosition(),this._onResized()},H0=new WeakSet,ww=function(){if(!ar(this,qu))return;const{savedX:dt,savedY:kt,savedWidth:$t,savedHeight:Tt}=ar(this,qu);vr(this,qu,null);const Dt=this.x,Ft=this.y,Ut=this.width,Ht=this.height;Dt===dt&&Ft===kt&&Ut===$t&&Ht===Tt||this.addCommands({cmd:Br(this,k1,s$).bind(this,Dt,Ft,Ut,Ht),undo:Br(this,k1,s$).bind(this,dt,kt,$t,Tt),mustExec:!0})},$1=new WeakSet,n$=function(dt,kt){const[$t,Tt]=this.parentDimensions,Dt=this.x,Ft=this.y,Ut=this.width,Ht=this.height,Kt=Us.MIN_SIZE/$t,Yt=Us.MIN_SIZE/Tt,Jt=Br(this,U0,jw).call(this,this.rotation),Zt=(kr,Tr)=>[Jt[0]*kr+Jt[2]*Tr,Jt[1]*kr+Jt[3]*Tr],er=Br(this,U0,jw).call(this,360-this.rotation),rr=(kr,Tr)=>[er[0]*kr+er[2]*Tr,er[1]*kr+er[3]*Tr];let sr,nr,ir=!1,lr=!1;switch(dt){case"topLeft":ir=!0,sr=(kr,Tr)=>[0,0],nr=(kr,Tr)=>[kr,Tr];break;case"topMiddle":sr=(kr,Tr)=>[kr/2,0],nr=(kr,Tr)=>[kr/2,Tr];break;case"topRight":ir=!0,sr=(kr,Tr)=>[kr,0],nr=(kr,Tr)=>[0,Tr];break;case"middleRight":lr=!0,sr=(kr,Tr)=>[kr,Tr/2],nr=(kr,Tr)=>[0,Tr/2];break;case"bottomRight":ir=!0,sr=(kr,Tr)=>[kr,Tr],nr=(kr,Tr)=>[0,0];break;case"bottomMiddle":sr=(kr,Tr)=>[kr/2,Tr],nr=(kr,Tr)=>[kr/2,0];break;case"bottomLeft":ir=!0,sr=(kr,Tr)=>[0,Tr],nr=(kr,Tr)=>[kr,0];break;case"middleLeft":lr=!0,sr=(kr,Tr)=>[0,Tr/2],nr=(kr,Tr)=>[kr,Tr/2];break}const or=sr(Ut,Ht),cr=nr(Ut,Ht);let dr=Zt(...cr);const ur=Us._round(Dt+dr[0]),pr=Us._round(Ft+dr[1]);let mr=1,jr=1,Rr,br;if(kt.fromKeyboard)({deltaX:Rr,deltaY:br}=kt);else{const{screenX:kr,screenY:Tr}=kt,[xr,wr]=ar(this,Xm);[Rr,br]=this.screenToPageTranslation(kr-xr,Tr-wr),ar(this,Xm)[0]=kr,ar(this,Xm)[1]=Tr}if([Rr,br]=rr(Rr/$t,br/Tt),ir){const kr=Math.hypot(Ut,Ht);mr=jr=Math.max(Math.min(Math.hypot(cr[0]-or[0]-Rr,cr[1]-or[1]-br)/kr,1/Ut,1/Ht),Kt/Ut,Yt/Ht)}else lr?mr=MathClamp(Math.abs(cr[0]-or[0]-Rr),Kt,1)/Ut:jr=MathClamp(Math.abs(cr[1]-or[1]-br),Yt,1)/Ht;const _r=Us._round(Ut*mr),Mr=Us._round(Ht*jr);dr=Zt(...nr(_r,Mr));const Pr=ur-dr[0],Or=pr-dr[1];ar(this,Qo)||vr(this,Qo,[this.x,this.y,this.width,this.height]),this.width=_r,this.height=Mr,this.x=Pr,this.y=Or,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ER=new WeakSet,TS=function(){var dt;vr(this,qu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(dt=ar(this,Hn))==null||dt.toggle(!1),this.parent.togglePointerEvents(!1)},jR=new WeakSet,NS=function(dt,kt,$t){let Dt=.7*($t/kt)+1-.7;if(Dt===1)return;const Ft=Br(this,U0,jw).call(this,this.rotation),Ut=(ur,pr)=>[Ft[0]*ur+Ft[2]*pr,Ft[1]*ur+Ft[3]*pr],[Ht,Kt]=this.parentDimensions,Yt=this.x,Jt=this.y,Zt=this.width,er=this.height,rr=Us.MIN_SIZE/Ht,sr=Us.MIN_SIZE/Kt;Dt=Math.max(Math.min(Dt,1/Zt,1/er),rr/Zt,sr/er);const nr=Us._round(Zt*Dt),ir=Us._round(er*Dt);if(nr===Zt&&ir===er)return;ar(this,Qo)||vr(this,Qo,[Yt,Jt,Zt,er]);const lr=Ut(Zt/2,er/2),or=Us._round(Yt+lr[0]),cr=Us._round(Jt+lr[1]),dr=Ut(nr/2,ir/2);this.x=or-dr[0],this.y=cr-dr[1],this.width=nr,this.height=ir,this.setDims(),this.fixAndSetPosition(),this._onResizing()},wR=new WeakSet,PS=function(){var dt;(dt=ar(this,Hn))==null||dt.toggle(!0),this.parent.togglePointerEvents(!0),Br(this,H0,ww).call(this)},S1=new WeakSet,i$=function(dt){const{isMac:kt}=util_FeatureTest.platform;dt.ctrlKey&&!kt||dt.shiftKey||dt.metaKey&&kt?this.parent.toggleSelected(this):this.parent.setSelected(this)},RR=new WeakSet,MS=function(dt){const{isSelected:kt}=this;this._uiManager.setUpDragSession();let $t=!1;const Tt=new AbortController,Dt=this._uiManager.combinedSignal(Tt),Ft={capture:!0,passive:!1,signal:Dt},Ut=Kt=>{Tt.abort(),vr(this,Vp,null),vr(this,Qm,!1),this._uiManager.endDragSession()||Br(this,S1,i$).call(this,Kt),$t&&this._onStopDragging()};kt&&(vr(this,V0,dt.clientX),vr(this,z0,dt.clientY),vr(this,Vp,dt.pointerId),vr(this,y1,dt.pointerType),window.addEventListener("pointermove",Kt=>{$t||($t=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Yt,clientY:Jt,pointerId:Zt}=Kt;if(Zt!==ar(this,Vp)){stopEvent(Kt);return}const[er,rr]=this.screenToPageTranslation(Yt-ar(this,V0),Jt-ar(this,z0));vr(this,V0,Yt),vr(this,z0,Jt),this._uiManager.dragSelectedEditors(er,rr)},Ft),window.addEventListener("touchmove",stopEvent,Ft),window.addEventListener("pointerdown",Kt=>{Kt.pointerType===ar(this,y1)&&(ar(this,Zm)||Kt.isPrimary)&&Ut(Kt),stopEvent(Kt)},Ft));const Ht=Kt=>{if(!ar(this,Vp)||ar(this,Vp)===Kt.pointerId){Ut(Kt);return}stopEvent(Kt)};window.addEventListener("pointerup",Ht,{signal:Dt}),window.addEventListener("blur",Ht,{signal:Dt})},_1=new WeakSet,a$=function(){if(ar(this,zp)||!this.div)return;vr(this,zp,new AbortController);const dt=this._uiManager.combinedSignal(ar(this,zp));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:dt}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:dt})},kR=new WeakSet,IS=function(dt){Us._resizerKeyboardManager.exec(this,dt)},$R=new WeakSet,DS=function(dt){var kt;ar(this,Ku)&&((kt=dt.relatedTarget)==null?void 0:kt.parentNode)!==ar(this,bo)&&Br(this,ex,$v).call(this)},SR=new WeakSet,FS=function(dt){vr(this,v1,ar(this,Ku)?dt:"")},C1=new WeakSet,o$=function(dt){if(ar(this,_c))for(const kt of ar(this,_c))kt.tabIndex=dt},ex=new WeakSet,$v=function(){vr(this,Ku,!1),Br(this,C1,o$).call(this,-1),Br(this,H0,ww).call(this)},yr(Us,R1),Es(Us,"_l10n",null),Es(Us,"_l10nResizer",null),Es(Us,"_borderLineWidth",-1),Es(Us,"_colorManager",new ColorManager),Es(Us,"_zIndex",1),Es(Us,"_telemetryTimeout",1e3);let AnnotationEditor=Us;class FakeEditor extends AnnotationEditor{constructor(dt){super(dt),this.annotationElementId=dt.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(dt){this.h1=dt?dt&4294967295:SEED,this.h2=dt?dt&4294967295:SEED}update(dt){let kt,$t;if(typeof dt=="string"){kt=new Uint8Array(dt.length*2),$t=0;for(let sr=0,nr=dt.length;sr<nr;sr++){const ir=dt.charCodeAt(sr);ir<=255?kt[$t++]=ir:(kt[$t++]=ir>>>8,kt[$t++]=ir&255)}}else if(ArrayBuffer.isView(dt))kt=dt.slice(),$t=kt.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const Tt=$t>>2,Dt=$t-Tt*4,Ft=new Uint32Array(kt.buffer,0,Tt);let Ut=0,Ht=0,Kt=this.h1,Yt=this.h2;const Jt=3432918353,Zt=461845907,er=Jt&MASK_LOW,rr=Zt&MASK_LOW;for(let sr=0;sr<Tt;sr++)sr&1?(Ut=Ft[sr],Ut=Ut*Jt&MASK_HIGH|Ut*er&MASK_LOW,Ut=Ut<<15|Ut>>>17,Ut=Ut*Zt&MASK_HIGH|Ut*rr&MASK_LOW,Kt^=Ut,Kt=Kt<<13|Kt>>>19,Kt=Kt*5+3864292196):(Ht=Ft[sr],Ht=Ht*Jt&MASK_HIGH|Ht*er&MASK_LOW,Ht=Ht<<15|Ht>>>17,Ht=Ht*Zt&MASK_HIGH|Ht*rr&MASK_LOW,Yt^=Ht,Yt=Yt<<13|Yt>>>19,Yt=Yt*5+3864292196);switch(Ut=0,Dt){case 3:Ut^=kt[Tt*4+2]<<16;case 2:Ut^=kt[Tt*4+1]<<8;case 1:Ut^=kt[Tt*4],Ut=Ut*Jt&MASK_HIGH|Ut*er&MASK_LOW,Ut=Ut<<15|Ut>>>17,Ut=Ut*Zt&MASK_HIGH|Ut*rr&MASK_LOW,Tt&1?Kt^=Ut:Yt^=Ut}this.h1=Kt,this.h2=Yt}hexdigest(){let dt=this.h1,kt=this.h2;return dt^=kt>>>1,dt=dt*3981806797&MASK_HIGH|dt*36045&MASK_LOW,kt=kt*4283543511&MASK_HIGH|((kt<<16|dt>>>16)*2950163797&MASK_HIGH)>>>16,dt^=kt>>>1,dt=dt*444984403&MASK_HIGH|dt*60499&MASK_LOW,kt=kt*3301882366&MASK_HIGH|((kt<<16|dt>>>16)*3120437893&MASK_HIGH)>>>16,dt^=kt>>>1,(dt>>>0).toString(16).padStart(8,"0")+(kt>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var tx,rx,Yu,yo,_R,LS;class AnnotationStorage{constructor(){yr(this,_R);yr(this,tx,!1);yr(this,rx,null);yr(this,Yu,null);yr(this,yo,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(dt,kt){const $t=ar(this,yo).get(dt);return $t===void 0?kt:Object.assign(kt,$t)}getRawValue(dt){return ar(this,yo).get(dt)}remove(dt){const kt=ar(this,yo).get(dt);if(kt!==void 0&&(kt instanceof AnnotationEditor&&ar(this,Yu).delete(kt.annotationElementId),ar(this,yo).delete(dt),ar(this,yo).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const $t of ar(this,yo).values())if($t instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(dt,kt){const $t=ar(this,yo).get(dt);let Tt=!1;if($t!==void 0)for(const[Dt,Ft]of Object.entries(kt))$t[Dt]!==Ft&&(Tt=!0,$t[Dt]=Ft);else Tt=!0,ar(this,yo).set(dt,kt);Tt&&Br(this,_R,LS).call(this),kt instanceof AnnotationEditor&&((ar(this,Yu)||vr(this,Yu,new Map)).set(kt.annotationElementId,kt),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(kt.constructor._type))}has(dt){return ar(this,yo).has(dt)}get size(){return ar(this,yo).size}resetModified(){ar(this,tx)&&(vr(this,tx,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(ar(this,yo).size===0)return SerializableEmpty;const dt=new Map,kt=new MurmurHash3_64,$t=[],Tt=Object.create(null);let Dt=!1;for(const[Ft,Ut]of ar(this,yo)){const Ht=Ut instanceof AnnotationEditor?Ut.serialize(!1,Tt):Ut;Ht&&(dt.set(Ft,Ht),kt.update(`${Ft}:${JSON.stringify(Ht)}`),Dt||(Dt=!!Ht.bitmap))}if(Dt)for(const Ft of dt.values())Ft.bitmap&&$t.push(Ft.bitmap);return dt.size>0?{map:dt,hash:kt.hexdigest(),transfer:$t}:SerializableEmpty}get editorStats(){let dt=null;const kt=new Map;let $t=0,Tt=0;for(const Dt of ar(this,yo).values()){if(!(Dt instanceof AnnotationEditor)){Dt.popup&&(Dt.popup.deleted?Tt+=1:$t+=1);continue}Dt.isCommentDeleted?Tt+=1:Dt.hasEditedComment&&($t+=1);const Ft=Dt.telemetryFinalData;if(!Ft)continue;const{type:Ut}=Ft;kt.has(Ut)||kt.set(Ut,Object.getPrototypeOf(Dt).constructor),dt||(dt=Object.create(null));const Ht=dt[Ut]||(dt[Ut]=new Map);for(const[Kt,Yt]of Object.entries(Ft)){if(Kt==="type")continue;let Jt=Ht.get(Kt);Jt||(Jt=new Map,Ht.set(Kt,Jt));const Zt=Jt.get(Yt)??0;Jt.set(Yt,Zt+1)}}if((Tt>0||$t>0)&&(dt||(dt=Object.create(null)),dt.comments={deleted:Tt,edited:$t}),!dt)return null;for(const[Dt,Ft]of kt)dt[Dt]=Ft.computeTelemetryFinalData(dt[Dt]);return dt}resetModifiedIds(){vr(this,rx,null)}updateEditor(dt,kt){var Tt;const $t=(Tt=ar(this,Yu))==null?void 0:Tt.get(dt);return $t?($t.updateFromAnnotationLayer(kt),!0):!1}getEditor(dt){var kt;return((kt=ar(this,Yu))==null?void 0:kt.get(dt))||null}get modifiedIds(){if(ar(this,rx))return ar(this,rx);const dt=[];if(ar(this,Yu))for(const kt of ar(this,Yu).values())kt.serialize()&&dt.push(kt.annotationElementId);return vr(this,rx,{ids:new Set(dt),hash:dt.join(",")})}[Symbol.iterator](){return ar(this,yo).entries()}}tx=new WeakMap,rx=new WeakMap,Yu=new WeakMap,yo=new WeakMap,_R=new WeakSet,LS=function(){ar(this,tx)||(vr(this,tx,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var A1;class PrintAnnotationStorage extends AnnotationStorage{constructor(kt){super();yr(this,A1,void 0);const{map:$t,hash:Tt,transfer:Dt}=kt.serializable,Ft=structuredClone($t,Dt?{transfer:Dt}:null);vr(this,A1,{map:Ft,hash:Tt,transfer:Dt})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return ar(this,A1)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}A1=new WeakMap;var G0;class FontLoader{constructor({ownerDocument:dt=globalThis.document,styleElement:kt=null}){yr(this,G0,new Set);this._document=dt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(dt){this.nativeFontFaces.add(dt),this._document.fonts.add(dt)}removeNativeFontFace(dt){this.nativeFontFaces.delete(dt),this._document.fonts.delete(dt)}insertRule(dt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const kt=this.styleElement.sheet;kt.insertRule(dt,kt.cssRules.length)}clear(){for(const dt of this.nativeFontFaces)this._document.fonts.delete(dt);this.nativeFontFaces.clear(),ar(this,G0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:dt,disableFontFace:kt,_inspectFont:$t}){if(!(!dt||ar(this,G0).has(dt.loadedName))){if(assert(!kt,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Tt,src:Dt,style:Ft}=dt,Ut=new FontFace(Tt,Dt,Ft);this.addNativeFontFace(Ut);try{await Ut.load(),ar(this,G0).add(Tt),$t==null||$t(dt)}catch{warn(`Cannot load system font: ${dt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Ut)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(dt){if(dt.attached||dt.missingFile&&!dt.systemFontInfo)return;if(dt.attached=!0,dt.systemFontInfo){await this.loadSystemFont(dt);return}if(this.isFontLoadingAPISupported){const $t=dt.createNativeFontFace();if($t){this.addNativeFontFace($t);try{await $t.loaded}catch(Tt){throw warn(`Failed to load font '${$t.family}': '${Tt}'.`),dt.disableFontFace=!0,Tt}}return}const kt=dt.createFontFaceRule();if(kt){if(this.insertRule(kt),this.isSyncFontLoadingSupported)return;await new Promise($t=>{const Tt=this._queueLoadingCallback($t);this._prepareFontLoadEvent(dt,Tt)})}}get isFontLoadingAPISupported(){var kt;const dt=!!((kt=this._document)!=null&&kt.fonts);return shadow(this,"isFontLoadingAPISupported",dt)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(dt){function kt(){for(assert(!Tt.done,"completeRequest() cannot be called twice."),Tt.done=!0;$t.length>0&&$t[0].done;){const Dt=$t.shift();setTimeout(Dt.callback,0)}}const{loadingRequests:$t}=this,Tt={done:!1,complete:kt,callback:dt};return $t.push(Tt),Tt}get _loadTestFont(){const dt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",dt)}_prepareFontLoadEvent(dt,kt){function $t(cr,dr){return cr.charCodeAt(dr)<<24|cr.charCodeAt(dr+1)<<16|cr.charCodeAt(dr+2)<<8|cr.charCodeAt(dr+3)&255}function Tt(cr,dr,ur,pr){const mr=cr.substring(0,dr),jr=cr.substring(dr+ur);return mr+pr+jr}let Dt,Ft;const Ut=this._document.createElement("canvas");Ut.width=1,Ut.height=1;const Ht=Ut.getContext("2d");let Kt=0;function Yt(cr,dr){if(++Kt>30){warn("Load test font never loaded."),dr();return}if(Ht.font="30px "+cr,Ht.fillText(".",0,20),Ht.getImageData(0,0,1,1).data[3]>0){dr();return}setTimeout(Yt.bind(null,cr,dr))}const Jt=`lt${Date.now()}${this.loadTestFontId++}`;let Zt=this._loadTestFont;Zt=Tt(Zt,976,Jt.length,Jt);const rr=16,sr=1482184792;let nr=$t(Zt,rr);for(Dt=0,Ft=Jt.length-3;Dt<Ft;Dt+=4)nr=nr-sr+$t(Jt,Dt)|0;Dt<Jt.length&&(nr=nr-sr+$t(Jt+"XXX",Dt)|0),Zt=Tt(Zt,rr,4,string32(nr));const ir=`url(data:font/opentype;base64,${btoa(Zt)});`,lr=`@font-face {font-family:"${Jt}";src:${ir}}`;this.insertRule(lr);const or=this._document.createElement("div");or.style.visibility="hidden",or.style.width=or.style.height="10px",or.style.position="absolute",or.style.top=or.style.left="0px";for(const cr of[dt.loadedName,Jt]){const dr=this._document.createElement("span");dr.textContent="Hi",dr.style.fontFamily=cr,or.append(dr)}this._document.body.append(or),Yt(Jt,()=>{or.remove(),kt.complete()})}}G0=new WeakMap;var _n;class FontFaceObject{constructor(dt,kt=null,$t,Tt){yr(this,_n,void 0);this.compiledGlyphs=Object.create(null),vr(this,_n,dt),this._inspectFont=kt,$t&&Object.assign(this,$t),Tt&&(this.charProcOperatorList=Tt)}createNativeFontFace(){var kt;if(!this.data||this.disableFontFace)return null;let dt;if(!this.cssFontInfo)dt=new FontFace(this.loadedName,this.data,{});else{const $t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),dt=new FontFace(this.cssFontInfo.fontFamily,this.data,$t)}return(kt=this._inspectFont)==null||kt.call(this,this),dt}createFontFaceRule(){var $t;if(!this.data||this.disableFontFace)return null;const dt=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let kt;if(!this.cssFontInfo)kt=`@font-face {font-family:"${this.loadedName}";src:${dt}}`;else{let Tt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Tt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),kt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Tt}src:${dt}}`}return($t=this._inspectFont)==null||$t.call(this,this,dt),kt}getPathGenerator(dt,kt){if(this.compiledGlyphs[kt]!==void 0)return this.compiledGlyphs[kt];const $t=this.loadedName+"_path_"+kt;let Tt;try{Tt=dt.get($t)}catch(Ft){warn(`getPathGenerator - ignoring character: "${Ft}".`)}const Dt=new Path2D(Tt||"");return this.fontExtraProperties||dt.delete($t),this.compiledGlyphs[kt]=Dt}get black(){return ar(this,_n).black}get bold(){return ar(this,_n).bold}get disableFontFace(){return ar(this,_n).disableFontFace??!1}get fontExtraProperties(){return ar(this,_n).fontExtraProperties??!1}get isInvalidPDFjsFont(){return ar(this,_n).isInvalidPDFjsFont}get isType3Font(){return ar(this,_n).isType3Font}get italic(){return ar(this,_n).italic}get missingFile(){return ar(this,_n).missingFile}get remeasure(){return ar(this,_n).remeasure}get vertical(){return ar(this,_n).vertical}get ascent(){return ar(this,_n).ascent}get defaultWidth(){return ar(this,_n).defaultWidth}get descent(){return ar(this,_n).descent}get bbox(){return ar(this,_n).bbox}get fontMatrix(){return ar(this,_n).fontMatrix}get fallbackName(){return ar(this,_n).fallbackName}get loadedName(){return ar(this,_n).loadedName}get mimetype(){return ar(this,_n).mimetype}get name(){return ar(this,_n).name}get data(){return ar(this,_n).data}clearData(){ar(this,_n).clearData()}get cssFontInfo(){return ar(this,_n).cssFontInfo}get systemFontInfo(){return ar(this,_n).systemFontInfo}get defaultVMetrics(){return ar(this,_n).defaultVMetrics}}_n=new WeakMap;function getUrlProp(et){if(et instanceof URL)return et.href;if(typeof et=="string"){if(isNodeJS)return et;const dt=URL.parse(et,window.location);if(dt)return dt.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(et){if(isNodeJS&&typeof Buffer<"u"&&et instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength)return et;if(typeof et=="string")return stringToBytes(et);if(et instanceof ArrayBuffer||ArrayBuffer.isView(et)||typeof et=="object"&&!isNaN(et==null?void 0:et.length))return new Uint8Array(et);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(et){if(typeof et!="string")return null;if(et.endsWith("/"))return et;throw new Error(`Invalid factory url: "${et}" must include trailing slash.`)}const isRefProxy=et=>typeof et=="object"&&Number.isInteger(et==null?void 0:et.num)&&et.num>=0&&Number.isInteger(et==null?void 0:et.gen)&&et.gen>=0,isNameProxy=et=>typeof et=="object"&&typeof(et==null?void 0:et.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var Xu,AR;class LoopbackPort{constructor(){yr(this,Xu,new Map);yr(this,AR,Promise.resolve())}postMessage(dt,kt){const $t={data:structuredClone(dt,kt?{transfer:kt}:null)};ar(this,AR).then(()=>{for(const[Tt]of ar(this,Xu))Tt.call(this,$t)})}addEventListener(dt,kt,$t=null){let Tt=null;if(($t==null?void 0:$t.signal)instanceof AbortSignal){const{signal:Dt}=$t;if(Dt.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const Ft=()=>this.removeEventListener(dt,kt);Tt=()=>Dt.removeEventListener("abort",Ft),Dt.addEventListener("abort",Ft)}ar(this,Xu).set(kt,Tt)}removeEventListener(dt,kt){const $t=ar(this,Xu).get(kt);$t==null||$t(),ar(this,Xu).delete(kt)}terminate(){for(const[,dt]of ar(this,Xu))dt==null||dt();ar(this,Xu).clear()}}Xu=new WeakMap,AR=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(et){if(et instanceof AbortException||et instanceof InvalidPDFException||et instanceof PasswordException||et instanceof ResponseException||et instanceof UnknownErrorException)return et;switch(et instanceof Error||typeof et=="object"&&et!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),et.name){case"AbortException":return new AbortException(et.message);case"InvalidPDFException":return new InvalidPDFException(et.message);case"PasswordException":return new PasswordException(et.message,et.code);case"ResponseException":return new ResponseException(et.message,et.status,et.missing);case"UnknownErrorException":return new UnknownErrorException(et.message,et.details)}return new UnknownErrorException(et.message,et.toString())}var W0,TR,OS,NR,BS,PR,VS,q0,Rw;class MessageHandler{constructor(dt,kt,$t){yr(this,TR);yr(this,NR);yr(this,PR);yr(this,q0);yr(this,W0,new AbortController);this.sourceName=dt,this.targetName=kt,this.comObj=$t,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),$t.addEventListener("message",Br(this,TR,OS).bind(this),{signal:ar(this,W0).signal})}on(dt,kt){const $t=this.actionHandler;if($t[dt])throw new Error(`There is already an actionName called "${dt}"`);$t[dt]=kt}send(dt,kt,$t){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:dt,data:kt},$t)}sendWithPromise(dt,kt,$t){const Tt=this.callbackId++,Dt=Promise.withResolvers();this.callbackCapabilities[Tt]=Dt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:dt,callbackId:Tt,data:kt},$t)}catch(Ft){Dt.reject(Ft)}return Dt.promise}sendWithStream(dt,kt,$t,Tt){const Dt=this.streamId++,Ft=this.sourceName,Ut=this.targetName,Ht=this.comObj;return new ReadableStream({start:Kt=>{const Yt=Promise.withResolvers();return this.streamControllers[Dt]={controller:Kt,startCall:Yt,pullCall:null,cancelCall:null,isClosed:!1},Ht.postMessage({sourceName:Ft,targetName:Ut,action:dt,streamId:Dt,data:kt,desiredSize:Kt.desiredSize},Tt),Yt.promise},pull:Kt=>{const Yt=Promise.withResolvers();return this.streamControllers[Dt].pullCall=Yt,Ht.postMessage({sourceName:Ft,targetName:Ut,stream:StreamKind.PULL,streamId:Dt,desiredSize:Kt.desiredSize}),Yt.promise},cancel:Kt=>{assert(Kt instanceof Error,"cancel must have a valid reason");const Yt=Promise.withResolvers();return this.streamControllers[Dt].cancelCall=Yt,this.streamControllers[Dt].isClosed=!0,Ht.postMessage({sourceName:Ft,targetName:Ut,stream:StreamKind.CANCEL,streamId:Dt,reason:wrapReason(Kt)}),Yt.promise}},$t)}destroy(){var dt;(dt=ar(this,W0))==null||dt.abort(),vr(this,W0,null)}}W0=new WeakMap,TR=new WeakSet,OS=function({data:dt}){if(dt.targetName!==this.sourceName)return;if(dt.stream){Br(this,PR,VS).call(this,dt);return}if(dt.callback){const $t=dt.callbackId,Tt=this.callbackCapabilities[$t];if(!Tt)throw new Error(`Cannot resolve callback ${$t}`);if(delete this.callbackCapabilities[$t],dt.callback===CallbackKind.DATA)Tt.resolve(dt.data);else if(dt.callback===CallbackKind.ERROR)Tt.reject(wrapReason(dt.reason));else throw new Error("Unexpected callback case");return}const kt=this.actionHandler[dt.action];if(!kt)throw new Error(`Unknown action from worker: ${dt.action}`);if(dt.callbackId){const $t=this.sourceName,Tt=dt.sourceName,Dt=this.comObj;Promise.try(kt,dt.data).then(function(Ft){Dt.postMessage({sourceName:$t,targetName:Tt,callback:CallbackKind.DATA,callbackId:dt.callbackId,data:Ft})},function(Ft){Dt.postMessage({sourceName:$t,targetName:Tt,callback:CallbackKind.ERROR,callbackId:dt.callbackId,reason:wrapReason(Ft)})});return}if(dt.streamId){Br(this,NR,BS).call(this,dt);return}kt(dt.data)},NR=new WeakSet,BS=function(dt){const kt=dt.streamId,$t=this.sourceName,Tt=dt.sourceName,Dt=this.comObj,Ft=this,Ut=this.actionHandler[dt.action],Ht={enqueue(Kt,Yt=1,Jt){if(this.isCancelled)return;const Zt=this.desiredSize;this.desiredSize-=Yt,Zt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.ENQUEUE,streamId:kt,chunk:Kt},Jt)},close(){this.isCancelled||(this.isCancelled=!0,Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.CLOSE,streamId:kt}),delete Ft.streamSinks[kt])},error(Kt){assert(Kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.ERROR,streamId:kt,reason:wrapReason(Kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:dt.desiredSize,ready:null};Ht.sinkCapability.resolve(),Ht.ready=Ht.sinkCapability.promise,this.streamSinks[kt]=Ht,Promise.try(Ut,dt.data,Ht).then(function(){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.START_COMPLETE,streamId:kt,success:!0})},function(Kt){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.START_COMPLETE,streamId:kt,reason:wrapReason(Kt)})})},PR=new WeakSet,VS=function(dt){const kt=dt.streamId,$t=this.sourceName,Tt=dt.sourceName,Dt=this.comObj,Ft=this.streamControllers[kt],Ut=this.streamSinks[kt];switch(dt.stream){case StreamKind.START_COMPLETE:dt.success?Ft.startCall.resolve():Ft.startCall.reject(wrapReason(dt.reason));break;case StreamKind.PULL_COMPLETE:dt.success?Ft.pullCall.resolve():Ft.pullCall.reject(wrapReason(dt.reason));break;case StreamKind.PULL:if(!Ut){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.PULL_COMPLETE,streamId:kt,success:!0});break}Ut.desiredSize<=0&&dt.desiredSize>0&&Ut.sinkCapability.resolve(),Ut.desiredSize=dt.desiredSize,Promise.try(Ut.onPull||onFn).then(function(){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.PULL_COMPLETE,streamId:kt,success:!0})},function(Kt){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.PULL_COMPLETE,streamId:kt,reason:wrapReason(Kt)})});break;case StreamKind.ENQUEUE:if(assert(Ft,"enqueue should have stream controller"),Ft.isClosed)break;Ft.controller.enqueue(dt.chunk);break;case StreamKind.CLOSE:if(assert(Ft,"close should have stream controller"),Ft.isClosed)break;Ft.isClosed=!0,Ft.controller.close(),Br(this,q0,Rw).call(this,Ft,kt);break;case StreamKind.ERROR:assert(Ft,"error should have stream controller"),Ft.controller.error(wrapReason(dt.reason)),Br(this,q0,Rw).call(this,Ft,kt);break;case StreamKind.CANCEL_COMPLETE:dt.success?Ft.cancelCall.resolve():Ft.cancelCall.reject(wrapReason(dt.reason)),Br(this,q0,Rw).call(this,Ft,kt);break;case StreamKind.CANCEL:if(!Ut)break;const Ht=wrapReason(dt.reason);Promise.try(Ut.onCancel||onFn,Ht).then(function(){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.CANCEL_COMPLETE,streamId:kt,success:!0})},function(Kt){Dt.postMessage({sourceName:$t,targetName:Tt,stream:StreamKind.CANCEL_COMPLETE,streamId:kt,reason:wrapReason(Kt)})}),Ut.sinkCapability.reject(Ht),Ut.isCancelled=!0,delete this.streamSinks[kt];break;default:throw new Error("Unexpected stream case")}},q0=new WeakSet,Rw=async function(dt,kt){var $t,Tt,Dt;await Promise.allSettled([($t=dt.startCall)==null?void 0:$t.promise,(Tt=dt.pullCall)==null?void 0:Tt.promise,(Dt=dt.cancelCall)==null?void 0:Dt.promise]),delete this.streamControllers[kt]};var T1;class BaseCanvasFactory{constructor({enableHWA:dt=!1}){yr(this,T1,!1);vr(this,T1,dt)}create(dt,kt){if(dt<=0||kt<=0)throw new Error("Invalid canvas size");const $t=this._createCanvas(dt,kt);return{canvas:$t,context:$t.getContext("2d",{willReadFrequently:!ar(this,T1)})}}reset(dt,kt,$t){if(!dt.canvas)throw new Error("Canvas is not specified");if(kt<=0||$t<=0)throw new Error("Invalid canvas size");dt.canvas.width=kt,dt.canvas.height=$t}destroy(dt){if(!dt.canvas)throw new Error("Canvas is not specified");dt.canvas.width=0,dt.canvas.height=0,dt.canvas=null,dt.context=null}_createCanvas(dt,kt){unreachable("Abstract method `_createCanvas` called.")}}T1=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:dt=globalThis.document,enableHWA:kt=!1}){super({enableHWA:kt}),this._document=dt}_createCanvas(dt,kt){const $t=this._document.createElement("canvas");return $t.width=dt,$t.height=kt,$t}}class BaseCMapReaderFactory{constructor({baseUrl:dt=null,isCompressed:kt=!0}){this.baseUrl=dt,this.isCompressed=kt}async fetch({name:dt}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!dt)throw new Error("CMap name must be specified.");const kt=this.baseUrl+dt+(this.isCompressed?".bcmap":"");return this._fetch(kt).then($t=>({cMapData:$t,isCompressed:this.isCompressed})).catch($t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${kt}`)})}async _fetch(dt){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(dt){const kt=await fetchData(dt,this.isCompressed?"arraybuffer":"text");return kt instanceof ArrayBuffer?new Uint8Array(kt):stringToBytes(kt)}}class BaseFilterFactory{addFilter(dt){return"none"}addHCMFilter(dt,kt){return"none"}addAlphaFilter(dt){return"none"}addLuminosityFilter(dt){return"none"}addHighlightHCMFilter(dt,kt,$t,Tt,Dt){return"none"}destroy(dt=!1){}}var sx,K0,Qu,Ju,So,nx,ix,eo,Ro,ax,Sv,Up,u0,Y0,kw,Hp,h0,MR,zS,N1,l$,Gp,p0,ox,_v,lx,Cv,P1,c$,cx,Av;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:kt,ownerDocument:$t=globalThis.document}){super();yr(this,eo);yr(this,ax);yr(this,Up);yr(this,Y0);yr(this,Hp);yr(this,MR);yr(this,N1);yr(this,Gp);yr(this,ox);yr(this,lx);yr(this,P1);yr(this,cx);yr(this,sx,void 0);yr(this,K0,void 0);yr(this,Qu,void 0);yr(this,Ju,void 0);yr(this,So,void 0);yr(this,nx,void 0);yr(this,ix,0);vr(this,Ju,kt),vr(this,So,$t)}addFilter(kt){if(!kt)return"none";let $t=ar(this,eo,Ro).get(kt);if($t)return $t;const[Tt,Dt,Ft]=Br(this,Y0,kw).call(this,kt),Ut=kt.length===1?Tt:`${Tt}${Dt}${Ft}`;if($t=ar(this,eo,Ro).get(Ut),$t)return ar(this,eo,Ro).set(kt,$t),$t;const Ht=`g_${ar(this,Ju)}_transfer_map_${xa(this,ix)._++}`,Kt=Br(this,Hp,h0).call(this,Ht);ar(this,eo,Ro).set(kt,Kt),ar(this,eo,Ro).set(Ut,Kt);const Yt=Br(this,Gp,p0).call(this,Ht);return Br(this,lx,Cv).call(this,Tt,Dt,Ft,Yt),Kt}addHCMFilter(kt,$t){var rr;const Tt=`${kt}-${$t}`,Dt="base";let Ft=ar(this,ax,Sv).get(Dt);if((Ft==null?void 0:Ft.key)===Tt||(Ft?((rr=Ft.filter)==null||rr.remove(),Ft.key=Tt,Ft.url="none",Ft.filter=null):(Ft={key:Tt,url:"none",filter:null},ar(this,ax,Sv).set(Dt,Ft)),!kt||!$t))return Ft.url;const Ut=Br(this,cx,Av).call(this,kt);kt=Util.makeHexColor(...Ut);const Ht=Br(this,cx,Av).call(this,$t);if($t=Util.makeHexColor(...Ht),ar(this,Up,u0).style.color="",kt==="#000000"&&$t==="#ffffff"||kt===$t)return Ft.url;const Kt=new Array(256);for(let sr=0;sr<=255;sr++){const nr=sr/255;Kt[sr]=nr<=.03928?nr/12.92:((nr+.055)/1.055)**2.4}const Yt=Kt.join(","),Jt=`g_${ar(this,Ju)}_hcm_filter`,Zt=Ft.filter=Br(this,Gp,p0).call(this,Jt);Br(this,lx,Cv).call(this,Yt,Yt,Yt,Zt),Br(this,N1,l$).call(this,Zt);const er=(sr,nr)=>{const ir=Ut[sr]/255,lr=Ht[sr]/255,or=new Array(nr+1);for(let cr=0;cr<=nr;cr++)or[cr]=ir+cr/nr*(lr-ir);return or.join(",")};return Br(this,lx,Cv).call(this,er(0,5),er(1,5),er(2,5),Zt),Ft.url=Br(this,Hp,h0).call(this,Jt),Ft.url}addAlphaFilter(kt){let $t=ar(this,eo,Ro).get(kt);if($t)return $t;const[Tt]=Br(this,Y0,kw).call(this,[kt]),Dt=`alpha_${Tt}`;if($t=ar(this,eo,Ro).get(Dt),$t)return ar(this,eo,Ro).set(kt,$t),$t;const Ft=`g_${ar(this,Ju)}_alpha_map_${xa(this,ix)._++}`,Ut=Br(this,Hp,h0).call(this,Ft);ar(this,eo,Ro).set(kt,Ut),ar(this,eo,Ro).set(Dt,Ut);const Ht=Br(this,Gp,p0).call(this,Ft);return Br(this,P1,c$).call(this,Tt,Ht),Ut}addLuminosityFilter(kt){let $t=ar(this,eo,Ro).get(kt||"luminosity");if($t)return $t;let Tt,Dt;if(kt?([Tt]=Br(this,Y0,kw).call(this,[kt]),Dt=`luminosity_${Tt}`):Dt="luminosity",$t=ar(this,eo,Ro).get(Dt),$t)return ar(this,eo,Ro).set(kt,$t),$t;const Ft=`g_${ar(this,Ju)}_luminosity_map_${xa(this,ix)._++}`,Ut=Br(this,Hp,h0).call(this,Ft);ar(this,eo,Ro).set(kt,Ut),ar(this,eo,Ro).set(Dt,Ut);const Ht=Br(this,Gp,p0).call(this,Ft);return Br(this,MR,zS).call(this,Ht),kt&&Br(this,P1,c$).call(this,Tt,Ht),Ut}addHighlightHCMFilter(kt,$t,Tt,Dt,Ft){var lr;const Ut=`${$t}-${Tt}-${Dt}-${Ft}`;let Ht=ar(this,ax,Sv).get(kt);if((Ht==null?void 0:Ht.key)===Ut||(Ht?((lr=Ht.filter)==null||lr.remove(),Ht.key=Ut,Ht.url="none",Ht.filter=null):(Ht={key:Ut,url:"none",filter:null},ar(this,ax,Sv).set(kt,Ht)),!$t||!Tt))return Ht.url;const[Kt,Yt]=[$t,Tt].map(Br(this,cx,Av).bind(this));let Jt=Math.round(.2126*Kt[0]+.7152*Kt[1]+.0722*Kt[2]),Zt=Math.round(.2126*Yt[0]+.7152*Yt[1]+.0722*Yt[2]),[er,rr]=[Dt,Ft].map(Br(this,cx,Av).bind(this));Zt<Jt&&([Jt,Zt,er,rr]=[Zt,Jt,rr,er]),ar(this,Up,u0).style.color="";const sr=(or,cr,dr)=>{const ur=new Array(256),pr=(Zt-Jt)/dr,mr=or/255,jr=(cr-or)/(255*dr);let Rr=0;for(let br=0;br<=dr;br++){const _r=Math.round(Jt+br*pr),Mr=mr+br*jr;for(let Pr=Rr;Pr<=_r;Pr++)ur[Pr]=Mr;Rr=_r+1}for(let br=Rr;br<256;br++)ur[br]=ur[Rr-1];return ur.join(",")},nr=`g_${ar(this,Ju)}_hcm_${kt}_filter`,ir=Ht.filter=Br(this,Gp,p0).call(this,nr);return Br(this,N1,l$).call(this,ir),Br(this,lx,Cv).call(this,sr(er[0],rr[0],5),sr(er[1],rr[1],5),sr(er[2],rr[2],5),ir),Ht.url=Br(this,Hp,h0).call(this,nr),Ht.url}destroy(kt=!1){var $t,Tt,Dt,Ft;kt&&(($t=ar(this,nx))!=null&&$t.size)||((Tt=ar(this,Qu))==null||Tt.parentNode.parentNode.remove(),vr(this,Qu,null),(Dt=ar(this,K0))==null||Dt.clear(),vr(this,K0,null),(Ft=ar(this,nx))==null||Ft.clear(),vr(this,nx,null),vr(this,ix,0))}}sx=new WeakMap,K0=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,So=new WeakMap,nx=new WeakMap,ix=new WeakMap,eo=new WeakSet,Ro=function(){return ar(this,K0)||vr(this,K0,new Map)},ax=new WeakSet,Sv=function(){return ar(this,nx)||vr(this,nx,new Map)},Up=new WeakSet,u0=function(){if(!ar(this,Qu)){const kt=ar(this,So).createElement("div"),{style:$t}=kt;$t.visibility="hidden",$t.contain="strict",$t.width=$t.height=0,$t.position="absolute",$t.top=$t.left=0,$t.zIndex=-1;const Tt=ar(this,So).createElementNS(SVG_NS,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),vr(this,Qu,ar(this,So).createElementNS(SVG_NS,"defs")),kt.append(Tt),Tt.append(ar(this,Qu)),ar(this,So).body.append(kt)}return ar(this,Qu)},Y0=new WeakSet,kw=function(kt){if(kt.length===1){const Kt=kt[0],Yt=new Array(256);for(let Zt=0;Zt<256;Zt++)Yt[Zt]=Kt[Zt]/255;const Jt=Yt.join(",");return[Jt,Jt,Jt]}const[$t,Tt,Dt]=kt,Ft=new Array(256),Ut=new Array(256),Ht=new Array(256);for(let Kt=0;Kt<256;Kt++)Ft[Kt]=$t[Kt]/255,Ut[Kt]=Tt[Kt]/255,Ht[Kt]=Dt[Kt]/255;return[Ft.join(","),Ut.join(","),Ht.join(",")]},Hp=new WeakSet,h0=function(kt){if(ar(this,sx)===void 0){vr(this,sx,"");const $t=ar(this,So).URL;$t!==ar(this,So).baseURI&&(isDataScheme($t)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):vr(this,sx,updateUrlHash($t,"")))}return`url(${ar(this,sx)}#${kt})`},MR=new WeakSet,zS=function(kt){const $t=ar(this,So).createElementNS(SVG_NS,"feColorMatrix");$t.setAttribute("type","matrix"),$t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),kt.append($t)},N1=new WeakSet,l$=function(kt){const $t=ar(this,So).createElementNS(SVG_NS,"feColorMatrix");$t.setAttribute("type","matrix"),$t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),kt.append($t)},Gp=new WeakSet,p0=function(kt){const $t=ar(this,So).createElementNS(SVG_NS,"filter");return $t.setAttribute("color-interpolation-filters","sRGB"),$t.setAttribute("id",kt),ar(this,Up,u0).append($t),$t},ox=new WeakSet,_v=function(kt,$t,Tt){const Dt=ar(this,So).createElementNS(SVG_NS,$t);Dt.setAttribute("type","discrete"),Dt.setAttribute("tableValues",Tt),kt.append(Dt)},lx=new WeakSet,Cv=function(kt,$t,Tt,Dt){const Ft=ar(this,So).createElementNS(SVG_NS,"feComponentTransfer");Dt.append(Ft),Br(this,ox,_v).call(this,Ft,"feFuncR",kt),Br(this,ox,_v).call(this,Ft,"feFuncG",$t),Br(this,ox,_v).call(this,Ft,"feFuncB",Tt)},P1=new WeakSet,c$=function(kt,$t){const Tt=ar(this,So).createElementNS(SVG_NS,"feComponentTransfer");$t.append(Tt),Br(this,ox,_v).call(this,Tt,"feFuncA",kt)},cx=new WeakSet,Av=function(kt){return ar(this,Up,u0).style.color=kt,getRGB(getComputedStyle(ar(this,Up,u0)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:dt=null}){this.baseUrl=dt}async fetch({filename:dt}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!dt)throw new Error("Font filename must be specified.");const kt=`${this.baseUrl}${dt}`;return this._fetch(kt).catch($t=>{throw new Error(`Unable to load font data at: ${kt}`)})}async _fetch(dt){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(dt){const kt=await fetchData(dt,"arraybuffer");return new Uint8Array(kt)}}class BaseWasmFactory{constructor({baseUrl:dt=null}){this.baseUrl=dt}async fetch({filename:dt}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!dt)throw new Error("Wasm filename must be specified.");const kt=`${this.baseUrl}${dt}`;return this._fetch(kt).catch($t=>{throw new Error(`Unable to load wasm data at: ${kt}`)})}async _fetch(dt){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(dt){const kt=await fetchData(dt,"arraybuffer");return new Uint8Array(kt)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(et){const kt=await process.getBuiltinModule("fs").promises.readFile(et);return new Uint8Array(kt)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(dt,kt){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(dt,kt)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(dt){return node_utils_fetchData(dt)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(dt){return node_utils_fetchData(dt)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(dt){return node_utils_fetchData(dt)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(et,dt,kt,$t,Tt,Dt){et[dt*4+0]=Math.min(et[dt*4+0],kt),et[dt*4+1]=Math.min(et[dt*4+1],$t),et[dt*4+2]=Math.max(et[dt*4+2],Tt),et[dt*4+3]=Math.max(et[dt*4+3],Dt)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var X0,Wp;class BBoxReader{constructor(dt,kt){yr(this,X0,void 0);yr(this,Wp,void 0);vr(this,X0,dt),vr(this,Wp,kt)}get length(){return ar(this,X0).length}isEmpty(dt){return ar(this,X0)[dt]===EMPTY_BBOX}minX(dt){return ar(this,Wp)[dt*4+0]/256}minY(dt){return ar(this,Wp)[dt*4+1]/256}maxX(dt){return(ar(this,Wp)[dt*4+2]+1)/256}maxY(dt){return(ar(this,Wp)[dt*4+3]+1)/256}}X0=new WeakMap,Wp=new WeakMap;const ensureDebugMetadata=(et,dt)=>{if(!et)return;let kt=et.get(dt);return kt||(kt={dependencies:new Set,isRenderingOperation:!1},et.set(dt,kt)),kt};var Vo,zo,dx,_d,ux,Zu,$n,An,_h,Uo,M1,Q0,hx,fx,ep,Co,vu,I1,d$;class CanvasDependencyTracker{constructor(dt,kt,$t=!1){yr(this,I1);yr(this,Vo,{__proto__:null});yr(this,zo,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});yr(this,dx,new Map);yr(this,_d,[]);yr(this,ux,[]);yr(this,Zu,[[1,0,0,1,0,0]]);yr(this,$n,[-1/0,-1/0,1/0,1/0]);yr(this,An,new Float64Array([1/0,1/0,-1/0,-1/0]));yr(this,_h,-1);yr(this,Uo,new Set);yr(this,M1,new Map);yr(this,Q0,new Map);yr(this,hx,void 0);yr(this,fx,void 0);yr(this,ep,void 0);yr(this,Co,void 0);yr(this,vu,void 0);vr(this,hx,dt.width),vr(this,fx,dt.height),Br(this,I1,d$).call(this,kt),$t&&vr(this,vu,new Map)}growOperationsCount(dt){dt>=ar(this,Co).length&&Br(this,I1,d$).call(this,dt,ar(this,Co))}save(dt){return vr(this,Vo,{__proto__:ar(this,Vo)}),vr(this,zo,{__proto__:ar(this,zo),transform:{__proto__:ar(this,zo).transform},moveText:{__proto__:ar(this,zo).moveText},sameLineText:{__proto__:ar(this,zo).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:ar(this,zo)[FORCED_DEPENDENCY_LABEL]}}),vr(this,$n,{__proto__:ar(this,$n)}),ar(this,_d).push(dt),this}restore(dt){var Tt;const kt=Object.getPrototypeOf(ar(this,Vo));if(kt===null)return this;vr(this,Vo,kt),vr(this,zo,Object.getPrototypeOf(ar(this,zo))),vr(this,$n,Object.getPrototypeOf(ar(this,$n)));const $t=ar(this,_d).pop();return $t!==void 0&&((Tt=ensureDebugMetadata(ar(this,vu),dt))==null||Tt.dependencies.add($t),ar(this,Co)[dt]=ar(this,Co)[$t]),this}recordOpenMarker(dt){return ar(this,_d).push(dt),this}getOpenMarker(){return ar(this,_d).length===0?null:ar(this,_d).at(-1)}recordCloseMarker(dt){var $t;const kt=ar(this,_d).pop();return kt!==void 0&&(($t=ensureDebugMetadata(ar(this,vu),dt))==null||$t.dependencies.add(kt),ar(this,Co)[dt]=ar(this,Co)[kt]),this}beginMarkedContent(dt){return ar(this,ux).push(dt),this}endMarkedContent(dt){var $t;const kt=ar(this,ux).pop();return kt!==void 0&&(($t=ensureDebugMetadata(ar(this,vu),dt))==null||$t.dependencies.add(kt),ar(this,Co)[dt]=ar(this,Co)[kt]),this}pushBaseTransform(dt){return ar(this,Zu).push(Util.multiplyByDOMMatrix(ar(this,Zu).at(-1),dt.getTransform())),this}popBaseTransform(){return ar(this,Zu).length>1&&ar(this,Zu).pop(),this}recordSimpleData(dt,kt){return ar(this,Vo)[dt]=kt,this}recordIncrementalData(dt,kt){return ar(this,zo)[dt].push(kt),this}resetIncrementalData(dt,kt){return ar(this,zo)[dt].length=0,this}recordNamedData(dt,kt){return ar(this,dx).set(dt,kt),this}recordSimpleDataFromNamed(dt,kt,$t){ar(this,Vo)[dt]=ar(this,dx).get(kt)??$t}recordFutureForcedDependency(dt,kt){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,kt),this}inheritSimpleDataAsFutureForcedDependencies(dt){for(const kt of dt)kt in ar(this,Vo)&&this.recordFutureForcedDependency(kt,ar(this,Vo)[kt]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const dt of ar(this,Uo))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,dt);return this}resetBBox(dt){return ar(this,_h)!==dt&&(vr(this,_h,dt),ar(this,An)[0]=1/0,ar(this,An)[1]=1/0,ar(this,An)[2]=-1/0,ar(this,An)[3]=-1/0),this}recordClipBox(dt,kt,$t,Tt,Dt,Ft){const Ut=Util.multiplyByDOMMatrix(ar(this,Zu).at(-1),kt.getTransform()),Ht=[1/0,1/0,-1/0,-1/0];Util.axialAlignedBoundingBox([$t,Dt,Tt,Ft],Ut,Ht);const Kt=Util.intersect(ar(this,$n),Ht);return Kt?(ar(this,$n)[0]=Kt[0],ar(this,$n)[1]=Kt[1],ar(this,$n)[2]=Kt[2],ar(this,$n)[3]=Kt[3]):(ar(this,$n)[0]=ar(this,$n)[1]=1/0,ar(this,$n)[2]=ar(this,$n)[3]=-1/0),this}recordBBox(dt,kt,$t,Tt,Dt,Ft){const Ut=ar(this,$n);if(Ut[0]===1/0)return this;const Ht=Util.multiplyByDOMMatrix(ar(this,Zu).at(-1),kt.getTransform());if(Ut[0]===-1/0)return Util.axialAlignedBoundingBox([$t,Dt,Tt,Ft],Ht,ar(this,An)),this;const Kt=[1/0,1/0,-1/0,-1/0];return Util.axialAlignedBoundingBox([$t,Dt,Tt,Ft],Ht,Kt),ar(this,An)[0]=Math.min(ar(this,An)[0],Math.max(Kt[0],Ut[0])),ar(this,An)[1]=Math.min(ar(this,An)[1],Math.max(Kt[1],Ut[1])),ar(this,An)[2]=Math.max(ar(this,An)[2],Math.min(Kt[2],Ut[2])),ar(this,An)[3]=Math.max(ar(this,An)[3],Math.min(Kt[3],Ut[3])),this}recordCharacterBBox(dt,kt,$t,Tt=1,Dt=0,Ft=0,Ut){const Ht=$t.bbox;let Kt,Yt;if(Ht&&(Kt=Ht[2]!==Ht[0]&&Ht[3]!==Ht[1]&&ar(this,Q0).get($t),Kt!==!1&&(Yt=[0,0,0,0],Util.axialAlignedBoundingBox(Ht,$t.fontMatrix,Yt),(Tt!==1||Dt!==0||Ft!==0)&&Util.scaleMinMax([Tt,0,0,-Tt,Dt,Ft],Yt),Kt)))return this.recordBBox(dt,kt,Yt[0],Yt[2],Yt[1],Yt[3]);if(!Ut)return this.recordFullPageBBox(dt);const Jt=Ut();return Ht&&Yt&&Kt===void 0&&(Kt=Yt[0]<=Dt-Jt.actualBoundingBoxLeft&&Yt[2]>=Dt+Jt.actualBoundingBoxRight&&Yt[1]<=Ft-Jt.actualBoundingBoxAscent&&Yt[3]>=Ft+Jt.actualBoundingBoxDescent,ar(this,Q0).set($t,Kt),Kt)?this.recordBBox(dt,kt,Yt[0],Yt[2],Yt[1],Yt[3]):this.recordBBox(dt,kt,Dt-Jt.actualBoundingBoxLeft,Dt+Jt.actualBoundingBoxRight,Ft-Jt.actualBoundingBoxAscent,Ft+Jt.actualBoundingBoxDescent)}recordFullPageBBox(dt){return ar(this,An)[0]=Math.max(0,ar(this,$n)[0]),ar(this,An)[1]=Math.max(0,ar(this,$n)[1]),ar(this,An)[2]=Math.min(ar(this,hx),ar(this,$n)[2]),ar(this,An)[3]=Math.min(ar(this,fx),ar(this,$n)[3]),this}getSimpleIndex(dt){return ar(this,Vo)[dt]}recordDependencies(dt,kt){const $t=ar(this,Uo),Tt=ar(this,Vo),Dt=ar(this,zo);for(const Ft of kt)Ft in ar(this,Vo)?$t.add(Tt[Ft]):Ft in Dt&&Dt[Ft].forEach($t.add,$t);return this}recordNamedDependency(dt,kt){return ar(this,dx).has(kt)&&ar(this,Uo).add(ar(this,dx).get(kt)),this}recordOperation(dt,kt=!1){if(this.recordDependencies(dt,[FORCED_DEPENDENCY_LABEL]),ar(this,vu)){const $t=ensureDebugMetadata(ar(this,vu),dt),{dependencies:Tt}=$t;ar(this,Uo).forEach(Tt.add,Tt),ar(this,_d).forEach(Tt.add,Tt),ar(this,ux).forEach(Tt.add,Tt),Tt.delete(dt),$t.isRenderingOperation=!0}if(ar(this,_h)===dt){const $t=floor(ar(this,An)[0]*256/ar(this,hx)),Tt=floor(ar(this,An)[1]*256/ar(this,fx)),Dt=ceil(ar(this,An)[2]*256/ar(this,hx)),Ft=ceil(ar(this,An)[3]*256/ar(this,fx));expandBBox(ar(this,ep),dt,$t,Tt,Dt,Ft);for(const Ut of ar(this,Uo))Ut!==dt&&expandBBox(ar(this,ep),Ut,$t,Tt,Dt,Ft);for(const Ut of ar(this,_d))Ut!==dt&&expandBBox(ar(this,ep),Ut,$t,Tt,Dt,Ft);for(const Ut of ar(this,ux))Ut!==dt&&expandBBox(ar(this,ep),Ut,$t,Tt,Dt,Ft);kt||(ar(this,Uo).clear(),vr(this,_h,-1))}return this}recordShowTextOperation(dt,kt=!1){const $t=Array.from(ar(this,Uo));this.recordOperation(dt,kt),this.recordIncrementalData("sameLineText",dt);for(const Tt of $t)this.recordIncrementalData("sameLineText",Tt);return this}bboxToClipBoxDropOperation(dt,kt=!1){return ar(this,_h)===dt&&(vr(this,_h,-1),ar(this,$n)[0]=Math.max(ar(this,$n)[0],ar(this,An)[0]),ar(this,$n)[1]=Math.max(ar(this,$n)[1],ar(this,An)[1]),ar(this,$n)[2]=Math.min(ar(this,$n)[2],ar(this,An)[2]),ar(this,$n)[3]=Math.min(ar(this,$n)[3],ar(this,An)[3]),kt||ar(this,Uo).clear()),this}_takePendingDependencies(){const dt=ar(this,Uo);return vr(this,Uo,new Set),dt}_extractOperation(dt){const kt=ar(this,M1).get(dt);return ar(this,M1).delete(dt),kt}_pushPendingDependencies(dt){for(const kt of dt)ar(this,Uo).add(kt)}take(){return ar(this,Q0).clear(),new BBoxReader(ar(this,Co),ar(this,ep))}takeDebugMetadata(){return ar(this,vu)}}Vo=new WeakMap,zo=new WeakMap,dx=new WeakMap,_d=new WeakMap,ux=new WeakMap,Zu=new WeakMap,$n=new WeakMap,An=new WeakMap,_h=new WeakMap,Uo=new WeakMap,M1=new WeakMap,Q0=new WeakMap,hx=new WeakMap,fx=new WeakMap,ep=new WeakMap,Co=new WeakMap,vu=new WeakMap,I1=new WeakSet,d$=function(dt,kt){const $t=new ArrayBuffer(dt*4);vr(this,ep,new Uint8ClampedArray($t)),vr(this,Co,new Uint32Array($t)),kt&&kt.length>0?(ar(this,Co).set(kt),ar(this,Co).fill(EMPTY_BBOX,kt.length)):ar(this,Co).fill(EMPTY_BBOX)};var In,Yn,eu,J0,Z0;const Q$=class Q${constructor(dt,kt,$t){yr(this,In,void 0);yr(this,Yn,void 0);yr(this,eu,void 0);yr(this,J0,0);yr(this,Z0,0);if(dt instanceof Q$&&ar(dt,eu)===!!$t)return dt;vr(this,In,dt),vr(this,Yn,kt),vr(this,eu,!!$t)}growOperationsCount(){throw new Error("Unreachable")}save(dt){return xa(this,Z0)._++,ar(this,In).save(ar(this,Yn)),this}restore(dt){return ar(this,Z0)>0&&(ar(this,In).restore(ar(this,Yn)),xa(this,Z0)._--),this}recordOpenMarker(dt){return xa(this,J0)._++,this}getOpenMarker(){return ar(this,J0)>0?ar(this,Yn):ar(this,In).getOpenMarker()}recordCloseMarker(dt){return xa(this,J0)._--,this}beginMarkedContent(dt){return this}endMarkedContent(dt){return this}pushBaseTransform(dt){return ar(this,In).pushBaseTransform(dt),this}popBaseTransform(){return ar(this,In).popBaseTransform(),this}recordSimpleData(dt,kt){return ar(this,In).recordSimpleData(dt,ar(this,Yn)),this}recordIncrementalData(dt,kt){return ar(this,In).recordIncrementalData(dt,ar(this,Yn)),this}resetIncrementalData(dt,kt){return ar(this,In).resetIncrementalData(dt,ar(this,Yn)),this}recordNamedData(dt,kt){return this}recordSimpleDataFromNamed(dt,kt,$t){return ar(this,In).recordSimpleDataFromNamed(dt,kt,ar(this,Yn)),this}recordFutureForcedDependency(dt,kt){return ar(this,In).recordFutureForcedDependency(dt,ar(this,Yn)),this}inheritSimpleDataAsFutureForcedDependencies(dt){return ar(this,In).inheritSimpleDataAsFutureForcedDependencies(dt),this}inheritPendingDependenciesAsFutureForcedDependencies(){return ar(this,In).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(dt){return ar(this,eu)||ar(this,In).resetBBox(ar(this,Yn)),this}recordClipBox(dt,kt,$t,Tt,Dt,Ft){return ar(this,eu)||ar(this,In).recordClipBox(ar(this,Yn),kt,$t,Tt,Dt,Ft),this}recordBBox(dt,kt,$t,Tt,Dt,Ft){return ar(this,eu)||ar(this,In).recordBBox(ar(this,Yn),kt,$t,Tt,Dt,Ft),this}recordCharacterBBox(dt,kt,$t,Tt,Dt,Ft,Ut){return ar(this,eu)||ar(this,In).recordCharacterBBox(ar(this,Yn),kt,$t,Tt,Dt,Ft,Ut),this}recordFullPageBBox(dt){return ar(this,eu)||ar(this,In).recordFullPageBBox(ar(this,Yn)),this}getSimpleIndex(dt){return ar(this,In).getSimpleIndex(dt)}recordDependencies(dt,kt){return ar(this,In).recordDependencies(ar(this,Yn),kt),this}recordNamedDependency(dt,kt){return ar(this,In).recordNamedDependency(ar(this,Yn),kt),this}recordOperation(dt){return ar(this,In).recordOperation(ar(this,Yn),!0),this}recordShowTextOperation(dt){return ar(this,In).recordShowTextOperation(ar(this,Yn),!0),this}bboxToClipBoxDropOperation(dt){return ar(this,eu)||ar(this,In).bboxToClipBoxDropOperation(ar(this,Yn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};In=new WeakMap,Yn=new WeakMap,eu=new WeakMap,J0=new WeakMap,Z0=new WeakMap;let CanvasNestedDependencyTracker=Q$;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(et,dt){if(!dt)return;const kt=dt[2]-dt[0],$t=dt[3]-dt[1],Tt=new Path2D;Tt.rect(dt[0],dt[1],kt,$t),et.clip(Tt)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(dt){super(),this._type=dt[1],this._bbox=dt[2],this._colorStops=dt[3],this._p0=dt[4],this._p1=dt[5],this._r0=dt[6],this._r1=dt[7],this.matrix=null}_createGradient(dt){let kt;this._type==="axial"?kt=dt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(kt=dt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const $t of this._colorStops)kt.addColorStop($t[0],$t[1]);return kt}getPattern(dt,kt,$t,Tt){let Dt;if(Tt===PathType.STROKE||Tt===PathType.FILL){const Ft=kt.current.getClippedPathBoundingBox(Tt,getCurrentTransform(dt))||[0,0,0,0],Ut=Math.ceil(Ft[2]-Ft[0])||1,Ht=Math.ceil(Ft[3]-Ft[1])||1,Kt=kt.cachedCanvases.getCanvas("pattern",Ut,Ht),Yt=Kt.context;Yt.clearRect(0,0,Yt.canvas.width,Yt.canvas.height),Yt.beginPath(),Yt.rect(0,0,Yt.canvas.width,Yt.canvas.height),Yt.translate(-Ft[0],-Ft[1]),$t=Util.transform($t,[1,0,0,1,Ft[0],Ft[1]]),Yt.transform(...kt.baseTransform),this.matrix&&Yt.transform(...this.matrix),applyBoundingBox(Yt,this._bbox),Yt.fillStyle=this._createGradient(Yt),Yt.fill(),Dt=dt.createPattern(Kt.canvas,"no-repeat");const Jt=new DOMMatrix($t);Dt.setTransform(Jt)}else applyBoundingBox(dt,this._bbox),Dt=this._createGradient(dt);return Dt}}function drawTriangle(et,dt,kt,$t,Tt,Dt,Ft,Ut){const Ht=dt.coords,Kt=dt.colors,Yt=et.data,Jt=et.width*4;let Zt;Ht[kt+1]>Ht[$t+1]&&(Zt=kt,kt=$t,$t=Zt,Zt=Dt,Dt=Ft,Ft=Zt),Ht[$t+1]>Ht[Tt+1]&&(Zt=$t,$t=Tt,Tt=Zt,Zt=Ft,Ft=Ut,Ut=Zt),Ht[kt+1]>Ht[$t+1]&&(Zt=kt,kt=$t,$t=Zt,Zt=Dt,Dt=Ft,Ft=Zt);const er=(Ht[kt]+dt.offsetX)*dt.scaleX,rr=(Ht[kt+1]+dt.offsetY)*dt.scaleY,sr=(Ht[$t]+dt.offsetX)*dt.scaleX,nr=(Ht[$t+1]+dt.offsetY)*dt.scaleY,ir=(Ht[Tt]+dt.offsetX)*dt.scaleX,lr=(Ht[Tt+1]+dt.offsetY)*dt.scaleY;if(rr>=lr)return;const or=Kt[Dt],cr=Kt[Dt+1],dr=Kt[Dt+2],ur=Kt[Ft],pr=Kt[Ft+1],mr=Kt[Ft+2],jr=Kt[Ut],Rr=Kt[Ut+1],br=Kt[Ut+2],_r=Math.round(rr),Mr=Math.round(lr);let Pr,Or,kr,Tr,xr,wr,zr,Hr;for(let Yr=_r;Yr<=Mr;Yr++){if(Yr<nr){const Wr=Yr<rr?0:(rr-Yr)/(rr-nr);Pr=er-(er-sr)*Wr,Or=or-(or-ur)*Wr,kr=cr-(cr-pr)*Wr,Tr=dr-(dr-mr)*Wr}else{let Wr;Yr>lr?Wr=1:nr===lr?Wr=0:Wr=(nr-Yr)/(nr-lr),Pr=sr-(sr-ir)*Wr,Or=ur-(ur-jr)*Wr,kr=pr-(pr-Rr)*Wr,Tr=mr-(mr-br)*Wr}let rs;Yr<rr?rs=0:Yr>lr?rs=1:rs=(rr-Yr)/(rr-lr),xr=er-(er-ir)*rs,wr=or-(or-jr)*rs,zr=cr-(cr-Rr)*rs,Hr=dr-(dr-br)*rs;const as=Math.round(Math.min(Pr,xr)),es=Math.round(Math.max(Pr,xr));let Xr=Jt*Yr+as*4;for(let Wr=as;Wr<=es;Wr++)rs=(Pr-Wr)/(Pr-xr),rs<0?rs=0:rs>1&&(rs=1),Yt[Xr++]=Or-(Or-wr)*rs|0,Yt[Xr++]=kr-(kr-zr)*rs|0,Yt[Xr++]=Tr-(Tr-Hr)*rs|0,Yt[Xr++]=255}}function drawFigure(et,dt,kt){const $t=dt.coords,Tt=dt.colors;let Dt,Ft;switch(dt.type){case"lattice":const Ut=dt.verticesPerRow,Ht=Math.floor($t.length/Ut)-1,Kt=Ut-1;for(Dt=0;Dt<Ht;Dt++){let Yt=Dt*Ut;for(let Jt=0;Jt<Kt;Jt++,Yt++)drawTriangle(et,kt,$t[Yt],$t[Yt+1],$t[Yt+Ut],Tt[Yt],Tt[Yt+1],Tt[Yt+Ut]),drawTriangle(et,kt,$t[Yt+Ut+1],$t[Yt+1],$t[Yt+Ut],Tt[Yt+Ut+1],Tt[Yt+1],Tt[Yt+Ut])}break;case"triangles":for(Dt=0,Ft=$t.length;Dt<Ft;Dt+=3)drawTriangle(et,kt,$t[Dt],$t[Dt+1],$t[Dt+2],Tt[Dt],Tt[Dt+1],Tt[Dt+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(dt){super(),this._coords=dt[2],this._colors=dt[3],this._figures=dt[4],this._bounds=dt[5],this._bbox=dt[6],this._background=dt[7],this.matrix=null}_createMeshCanvas(dt,kt,$t){const Ut=Math.floor(this._bounds[0]),Ht=Math.floor(this._bounds[1]),Kt=Math.ceil(this._bounds[2])-Ut,Yt=Math.ceil(this._bounds[3])-Ht,Jt=Math.min(Math.ceil(Math.abs(Kt*dt[0]*1.1)),3e3),Zt=Math.min(Math.ceil(Math.abs(Yt*dt[1]*1.1)),3e3),er=Kt/Jt,rr=Yt/Zt,sr={coords:this._coords,colors:this._colors,offsetX:-Ut,offsetY:-Ht,scaleX:1/er,scaleY:1/rr},nr=Jt+2*2,ir=Zt+2*2,lr=$t.getCanvas("mesh",nr,ir),or=lr.context,cr=or.createImageData(Jt,Zt);if(kt){const ur=cr.data;for(let pr=0,mr=ur.length;pr<mr;pr+=4)ur[pr]=kt[0],ur[pr+1]=kt[1],ur[pr+2]=kt[2],ur[pr+3]=255}for(const ur of this._figures)drawFigure(cr,ur,sr);return or.putImageData(cr,2,2),{canvas:lr.canvas,offsetX:Ut-2*er,offsetY:Ht-2*rr,scaleX:er,scaleY:rr}}isModifyingCurrentTransform(){return!0}getPattern(dt,kt,$t,Tt){applyBoundingBox(dt,this._bbox);const Dt=new Float32Array(2);if(Tt===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(dt),Dt);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,Dt);const[Ut,Ht]=Dt;Util.singularValueDecompose2dScale(kt.baseTransform,Dt),Dt[0]*=Ut,Dt[1]*=Ht}else Util.singularValueDecompose2dScale(kt.baseTransform,Dt);const Ft=this._createMeshCanvas(Dt,Tt===PathType.SHADING?null:this._background,kt.cachedCanvases);return Tt!==PathType.SHADING&&(dt.setTransform(...kt.baseTransform),this.matrix&&dt.transform(...this.matrix)),dt.translate(Ft.offsetX,Ft.offsetY),dt.scale(Ft.scaleX,Ft.scaleY),dt.createPattern(Ft.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(et){switch(et[0]){case"RadialAxial":return new RadialAxialShadingPattern(et);case"Mesh":return new MeshShadingPattern(et);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${et[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},IR=class IR{constructor(dt,kt,$t,Tt){this.color=dt[1],this.operatorList=dt[2],this.matrix=dt[3],this.bbox=dt[4],this.xstep=dt[5],this.ystep=dt[6],this.paintType=dt[7],this.tilingType=dt[8],this.ctx=kt,this.canvasGraphicsFactory=$t,this.baseTransform=Tt}createPatternCanvas(dt,kt){var wr,zr;const{bbox:$t,operatorList:Tt,paintType:Dt,tilingType:Ft,color:Ut,canvasGraphicsFactory:Ht}=this;let{xstep:Kt,ystep:Yt}=this;Kt=Math.abs(Kt),Yt=Math.abs(Yt),info("TilingType: "+Ft);const Jt=$t[0],Zt=$t[1],er=$t[2],rr=$t[3],sr=er-Jt,nr=rr-Zt,ir=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,ir);const[lr,or]=ir;Util.singularValueDecompose2dScale(this.baseTransform,ir);const cr=lr*ir[0],dr=or*ir[1];let ur=sr,pr=nr,mr=!1,jr=!1;const Rr=Math.ceil(Kt*cr),br=Math.ceil(Yt*dr),_r=Math.ceil(sr*cr),Mr=Math.ceil(nr*dr);Rr>=_r?ur=Kt:mr=!0,br>=Mr?pr=Yt:jr=!0;const Pr=this.getSizeAndScale(ur,this.ctx.canvas.width,cr),Or=this.getSizeAndScale(pr,this.ctx.canvas.height,dr),kr=dt.cachedCanvases.getCanvas("pattern",Pr.size,Or.size),Tr=kr.context,xr=Ht.createCanvasGraphics(Tr,kt);if(xr.groupLevel=dt.groupLevel,this.setFillAndStrokeStyleToContext(xr,Dt,Ut),Tr.translate(-Pr.scale*Jt,-Or.scale*Zt),xr.transform(0,Pr.scale,0,0,Or.scale,0,0),Tr.save(),(wr=xr.dependencyTracker)==null||wr.save(),this.clipBbox(xr,Jt,Zt,er,rr),xr.baseTransform=getCurrentTransform(xr.ctx),xr.executeOperatorList(Tt),xr.endDrawing(),(zr=xr.dependencyTracker)==null||zr.restore(),Tr.restore(),mr||jr){const Hr=kr.canvas;mr&&(ur=Kt),jr&&(pr=Yt);const Yr=this.getSizeAndScale(ur,this.ctx.canvas.width,cr),rs=this.getSizeAndScale(pr,this.ctx.canvas.height,dr),as=Yr.size,es=rs.size,Xr=dt.cachedCanvases.getCanvas("pattern-workaround",as,es),Wr=Xr.context,cs=mr?Math.floor(sr/Kt):0,ns=jr?Math.floor(nr/Yt):0;for(let us=0;us<=cs;us++)for(let fs=0;fs<=ns;fs++)Wr.drawImage(Hr,as*us,es*fs,as,es,0,0,as,es);return{canvas:Xr.canvas,scaleX:Yr.scale,scaleY:rs.scale,offsetX:Jt,offsetY:Zt}}return{canvas:kr.canvas,scaleX:Pr.scale,scaleY:Or.scale,offsetX:Jt,offsetY:Zt}}getSizeAndScale(dt,kt,$t){const Tt=Math.max(IR.MAX_PATTERN_SIZE,kt);let Dt=Math.ceil(dt*$t);return Dt>=Tt?Dt=Tt:$t=Dt/dt,{scale:$t,size:Dt}}clipBbox(dt,kt,$t,Tt,Dt){const Ft=Tt-kt,Ut=Dt-$t;dt.ctx.rect(kt,$t,Ft,Ut),Util.axialAlignedBoundingBox([kt,$t,Tt,Dt],getCurrentTransform(dt.ctx),dt.current.minMax),dt.clip(),dt.endPath()}setFillAndStrokeStyleToContext(dt,kt,$t){const Tt=dt.ctx,Dt=dt.current;switch(kt){case PaintType.COLORED:const{fillStyle:Ft,strokeStyle:Ut}=this.ctx;Tt.fillStyle=Dt.fillColor=Ft,Tt.strokeStyle=Dt.strokeColor=Ut;break;case PaintType.UNCOLORED:Tt.fillStyle=Tt.strokeStyle=$t,Dt.fillColor=Dt.strokeColor=$t;break;default:throw new FormatError(`Unsupported paint type: ${kt}`)}}isModifyingCurrentTransform(){return!1}getPattern(dt,kt,$t,Tt,Dt){let Ft=$t;Tt!==PathType.SHADING&&(Ft=Util.transform(Ft,kt.baseTransform),this.matrix&&(Ft=Util.transform(Ft,this.matrix)));const Ut=this.createPatternCanvas(kt,Dt);let Ht=new DOMMatrix(Ft);Ht=Ht.translate(Ut.offsetX,Ut.offsetY),Ht=Ht.scale(1/Ut.scaleX,1/Ut.scaleY);const Kt=dt.createPattern(Ut.canvas,"repeat");return Kt.setTransform(Ht),Kt}};Es(IR,"MAX_PATTERN_SIZE",3e3);let TilingPattern=IR;function convertBlackAndWhiteToRGBA({src:et,srcPos:dt=0,dest:kt,width:$t,height:Tt,nonBlackColor:Dt=4294967295,inverseDecode:Ft=!1}){const Ut=util_FeatureTest.isLittleEndian?4278190080:255,[Ht,Kt]=Ft?[Dt,Ut]:[Ut,Dt],Yt=$t>>3,Jt=$t&7,Zt=et.length;kt=new Uint32Array(kt.buffer);let er=0;for(let rr=0;rr<Tt;rr++){for(const nr=dt+Yt;dt<nr;dt++){const ir=dt<Zt?et[dt]:255;kt[er++]=ir&128?Kt:Ht,kt[er++]=ir&64?Kt:Ht,kt[er++]=ir&32?Kt:Ht,kt[er++]=ir&16?Kt:Ht,kt[er++]=ir&8?Kt:Ht,kt[er++]=ir&4?Kt:Ht,kt[er++]=ir&2?Kt:Ht,kt[er++]=ir&1?Kt:Ht}if(Jt===0)continue;const sr=dt<Zt?et[dt++]:255;for(let nr=0;nr<Jt;nr++)kt[er++]=sr&1<<7-nr?Kt:Ht}return{srcPos:dt,destPos:er}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(et,dt){if(et._removeMirroring)throw new Error("Context is already forwarding operations.");et.__originalSave=et.save,et.__originalRestore=et.restore,et.__originalRotate=et.rotate,et.__originalScale=et.scale,et.__originalTranslate=et.translate,et.__originalTransform=et.transform,et.__originalSetTransform=et.setTransform,et.__originalResetTransform=et.resetTransform,et.__originalClip=et.clip,et.__originalMoveTo=et.moveTo,et.__originalLineTo=et.lineTo,et.__originalBezierCurveTo=et.bezierCurveTo,et.__originalRect=et.rect,et.__originalClosePath=et.closePath,et.__originalBeginPath=et.beginPath,et._removeMirroring=()=>{et.save=et.__originalSave,et.restore=et.__originalRestore,et.rotate=et.__originalRotate,et.scale=et.__originalScale,et.translate=et.__originalTranslate,et.transform=et.__originalTransform,et.setTransform=et.__originalSetTransform,et.resetTransform=et.__originalResetTransform,et.clip=et.__originalClip,et.moveTo=et.__originalMoveTo,et.lineTo=et.__originalLineTo,et.bezierCurveTo=et.__originalBezierCurveTo,et.rect=et.__originalRect,et.closePath=et.__originalClosePath,et.beginPath=et.__originalBeginPath,delete et._removeMirroring},et.save=function(){dt.save(),this.__originalSave()},et.restore=function(){dt.restore(),this.__originalRestore()},et.translate=function(kt,$t){dt.translate(kt,$t),this.__originalTranslate(kt,$t)},et.scale=function(kt,$t){dt.scale(kt,$t),this.__originalScale(kt,$t)},et.transform=function(kt,$t,Tt,Dt,Ft,Ut){dt.transform(kt,$t,Tt,Dt,Ft,Ut),this.__originalTransform(kt,$t,Tt,Dt,Ft,Ut)},et.setTransform=function(kt,$t,Tt,Dt,Ft,Ut){dt.setTransform(kt,$t,Tt,Dt,Ft,Ut),this.__originalSetTransform(kt,$t,Tt,Dt,Ft,Ut)},et.resetTransform=function(){dt.resetTransform(),this.__originalResetTransform()},et.rotate=function(kt){dt.rotate(kt),this.__originalRotate(kt)},et.clip=function(kt){dt.clip(kt),this.__originalClip(kt)},et.moveTo=function(kt,$t){dt.moveTo(kt,$t),this.__originalMoveTo(kt,$t)},et.lineTo=function(kt,$t){dt.lineTo(kt,$t),this.__originalLineTo(kt,$t)},et.bezierCurveTo=function(kt,$t,Tt,Dt,Ft,Ut){dt.bezierCurveTo(kt,$t,Tt,Dt,Ft,Ut),this.__originalBezierCurveTo(kt,$t,Tt,Dt,Ft,Ut)},et.rect=function(kt,$t,Tt,Dt){dt.rect(kt,$t,Tt,Dt),this.__originalRect(kt,$t,Tt,Dt)},et.closePath=function(){dt.closePath(),this.__originalClosePath()},et.beginPath=function(){dt.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(dt){this.canvasFactory=dt,this.cache=Object.create(null)}getCanvas(dt,kt,$t){let Tt;return this.cache[dt]!==void 0?(Tt=this.cache[dt],this.canvasFactory.reset(Tt,kt,$t)):(Tt=this.canvasFactory.create(kt,$t),this.cache[dt]=Tt),Tt}delete(dt){delete this.cache[dt]}clear(){for(const dt in this.cache){const kt=this.cache[dt];this.canvasFactory.destroy(kt),delete this.cache[dt]}}}function drawImageAtIntegerCoords(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt){const[Yt,Jt,Zt,er,rr,sr]=getCurrentTransform(et);if(Jt===0&&Zt===0){const lr=Ft*Yt+rr,or=Math.round(lr),cr=Ut*er+sr,dr=Math.round(cr),ur=(Ft+Ht)*Yt+rr,pr=Math.abs(Math.round(ur)-or)||1,mr=(Ut+Kt)*er+sr,jr=Math.abs(Math.round(mr)-dr)||1;return et.setTransform(Math.sign(Yt),0,0,Math.sign(er),or,dr),et.drawImage(dt,kt,$t,Tt,Dt,0,0,pr,jr),et.setTransform(Yt,Jt,Zt,er,rr,sr),[pr,jr]}if(Yt===0&&er===0){const lr=Ut*Zt+rr,or=Math.round(lr),cr=Ft*Jt+sr,dr=Math.round(cr),ur=(Ut+Kt)*Zt+rr,pr=Math.abs(Math.round(ur)-or)||1,mr=(Ft+Ht)*Jt+sr,jr=Math.abs(Math.round(mr)-dr)||1;return et.setTransform(0,Math.sign(Jt),Math.sign(Zt),0,or,dr),et.drawImage(dt,kt,$t,Tt,Dt,0,0,jr,pr),et.setTransform(Yt,Jt,Zt,er,rr,sr),[jr,pr]}et.drawImage(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt);const nr=Math.hypot(Yt,Jt),ir=Math.hypot(Zt,er);return[nr*Ht,ir*Kt]}class CanvasExtraState{constructor(dt,kt,$t){Es(this,"alphaIsShape",!1);Es(this,"fontSize",0);Es(this,"fontSizeScale",1);Es(this,"textMatrix",null);Es(this,"textMatrixScale",1);Es(this,"fontMatrix",FONT_IDENTITY_MATRIX);Es(this,"leading",0);Es(this,"x",0);Es(this,"y",0);Es(this,"lineX",0);Es(this,"lineY",0);Es(this,"charSpacing",0);Es(this,"wordSpacing",0);Es(this,"textHScale",1);Es(this,"textRenderingMode",TextRenderingMode.FILL);Es(this,"textRise",0);Es(this,"fillColor","#000000");Es(this,"strokeColor","#000000");Es(this,"patternFill",!1);Es(this,"patternStroke",!1);Es(this,"fillAlpha",1);Es(this,"strokeAlpha",1);Es(this,"lineWidth",1);Es(this,"activeSMask",null);Es(this,"transferMaps","none");$t==null||$t(this),this.clipBox=new Float32Array([0,0,dt,kt]),this.minMax=MIN_MAX_INIT.slice()}clone(){const dt=Object.create(this);return dt.clipBox=this.clipBox.slice(),dt.minMax=this.minMax.slice(),dt}getPathBoundingBox(dt=PathType.FILL,kt=null){const $t=this.minMax.slice();if(dt===PathType.STROKE){kt||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(kt,XY);const Tt=XY[0]*this.lineWidth/2,Dt=XY[1]*this.lineWidth/2;$t[0]-=Tt,$t[1]-=Dt,$t[2]+=Tt,$t[3]+=Dt}return $t}updateClipFromPath(){const dt=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(dt||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(dt){this.clipBox.set(dt,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(dt=PathType.FILL,kt=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(dt,kt))}}function putBinaryImageData(et,dt){if(dt instanceof ImageData){et.putImageData(dt,0,0);return}const kt=dt.height,$t=dt.width,Tt=kt%FULL_CHUNK_HEIGHT,Dt=(kt-Tt)/FULL_CHUNK_HEIGHT,Ft=Tt===0?Dt:Dt+1,Ut=et.createImageData($t,FULL_CHUNK_HEIGHT);let Ht=0,Kt;const Yt=dt.data,Jt=Ut.data;let Zt,er,rr,sr;if(dt.kind===util_ImageKind.GRAYSCALE_1BPP){const nr=Yt.byteLength,ir=new Uint32Array(Jt.buffer,0,Jt.byteLength>>2),lr=ir.length,or=$t+7>>3,cr=4294967295,dr=util_FeatureTest.isLittleEndian?4278190080:255;for(Zt=0;Zt<Ft;Zt++){for(rr=Zt<Dt?FULL_CHUNK_HEIGHT:Tt,Kt=0,er=0;er<rr;er++){const ur=nr-Ht;let pr=0;const mr=ur>or?$t:ur*8-7,jr=mr&-8;let Rr=0,br=0;for(;pr<jr;pr+=8)br=Yt[Ht++],ir[Kt++]=br&128?cr:dr,ir[Kt++]=br&64?cr:dr,ir[Kt++]=br&32?cr:dr,ir[Kt++]=br&16?cr:dr,ir[Kt++]=br&8?cr:dr,ir[Kt++]=br&4?cr:dr,ir[Kt++]=br&2?cr:dr,ir[Kt++]=br&1?cr:dr;for(;pr<mr;pr++)Rr===0&&(br=Yt[Ht++],Rr=128),ir[Kt++]=br&Rr?cr:dr,Rr>>=1}for(;Kt<lr;)ir[Kt++]=0;et.putImageData(Ut,0,Zt*FULL_CHUNK_HEIGHT)}}else if(dt.kind===util_ImageKind.RGBA_32BPP){for(er=0,sr=$t*FULL_CHUNK_HEIGHT*4,Zt=0;Zt<Dt;Zt++)Jt.set(Yt.subarray(Ht,Ht+sr)),Ht+=sr,et.putImageData(Ut,0,er),er+=FULL_CHUNK_HEIGHT;Zt<Ft&&(sr=$t*Tt*4,Jt.set(Yt.subarray(Ht,Ht+sr)),et.putImageData(Ut,0,er))}else if(dt.kind===util_ImageKind.RGB_24BPP)for(rr=FULL_CHUNK_HEIGHT,sr=$t*rr,Zt=0;Zt<Ft;Zt++){for(Zt>=Dt&&(rr=Tt,sr=$t*rr),Kt=0,er=sr;er--;)Jt[Kt++]=Yt[Ht++],Jt[Kt++]=Yt[Ht++],Jt[Kt++]=Yt[Ht++],Jt[Kt++]=255;et.putImageData(Ut,0,Zt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${dt.kind}`)}function putBinaryImageMask(et,dt){if(dt.bitmap){et.drawImage(dt.bitmap,0,0);return}const kt=dt.height,$t=dt.width,Tt=kt%FULL_CHUNK_HEIGHT,Dt=(kt-Tt)/FULL_CHUNK_HEIGHT,Ft=Tt===0?Dt:Dt+1,Ut=et.createImageData($t,FULL_CHUNK_HEIGHT);let Ht=0;const Kt=dt.data,Yt=Ut.data;for(let Jt=0;Jt<Ft;Jt++){const Zt=Jt<Dt?FULL_CHUNK_HEIGHT:Tt;({srcPos:Ht}=convertBlackAndWhiteToRGBA({src:Kt,srcPos:Ht,dest:Yt,width:$t,height:Zt,nonBlackColor:0})),et.putImageData(Ut,0,Jt*FULL_CHUNK_HEIGHT)}}function copyCtxState(et,dt){const kt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const $t of kt)et[$t]!==void 0&&(dt[$t]=et[$t]);et.setLineDash!==void 0&&(dt.setLineDash(et.getLineDash()),dt.lineDashOffset=et.lineDashOffset)}function resetCtxToDefault(et){et.strokeStyle=et.fillStyle="#000000",et.fillRule="nonzero",et.globalAlpha=1,et.lineWidth=1,et.lineCap="butt",et.lineJoin="miter",et.miterLimit=10,et.globalCompositeOperation="source-over",et.font="10px sans-serif",et.setLineDash!==void 0&&(et.setLineDash([]),et.lineDashOffset=0);const{filter:dt}=et;dt!=="none"&&dt!==""&&(et.filter="none")}function getImageSmoothingEnabled(et,dt){if(dt)return!0;Util.singularValueDecompose2dScale(et,XY);const kt=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=kt&&XY[1]<=kt}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var D1,u$,F1,h$,L1,p$;const J$=class J${constructor(dt,kt,$t,Tt,Dt,{optionalContentConfig:Ft,markedContentStack:Ut=null},Ht,Kt,Yt){yr(this,D1);yr(this,F1);yr(this,L1);this.ctx=dt,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=kt,this.objs=$t,this.canvasFactory=Tt,this.filterFactory=Dt,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ut||[],this.optionalContentConfig=Ft,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ht,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Yt??null}getObject(dt,kt,$t=null){var Tt;return typeof kt=="string"?((Tt=this.dependencyTracker)==null||Tt.recordNamedDependency(dt,kt),kt.startsWith("g_")?this.commonObjs.get(kt):this.objs.get(kt)):$t}beginDrawing({transform:dt,viewport:kt,transparency:$t=!1,background:Tt=null}){const Dt=this.ctx.canvas.width,Ft=this.ctx.canvas.height,Ut=this.ctx.fillStyle;if(this.ctx.fillStyle=Tt||"#ffffff",this.ctx.fillRect(0,0,Dt,Ft),this.ctx.fillStyle=Ut,$t){const Ht=this.cachedCanvases.getCanvas("transparent",Dt,Ft);this.compositeCtx=this.ctx,this.transparentCanvas=Ht.canvas,this.ctx=Ht.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),dt&&(this.ctx.transform(...dt),this.outputScaleX=dt[0],this.outputScaleY=dt[0]),this.ctx.transform(...kt.transform),this.viewportScale=kt.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(dt,kt,$t,Tt,Dt){var ir;const Ft=dt.argsArray,Ut=dt.fnArray;let Ht=kt||0;const Kt=Ft.length;if(Kt===Ht)return Ht;const Yt=Kt-Ht>EXECUTION_STEPS&&typeof $t=="function",Jt=Yt?Date.now()+EXECUTION_TIME:0;let Zt=0;const er=this.commonObjs,rr=this.objs;let sr,nr;for(;;){if(Tt!==void 0&&Ht===Tt.nextBreakPoint)return Tt.breakIt(Ht,$t),Ht;if(!Dt||Dt(Ht))if(sr=Ut[Ht],nr=Ft[Ht]??null,sr!==OPS.dependency)nr===null?this[sr](Ht):this[sr](Ht,...nr);else for(const lr of nr){(ir=this.dependencyTracker)==null||ir.recordNamedData(lr,Ht);const or=lr.startsWith("g_")?er:rr;if(!or.has(lr))return or.get(lr,$t),Ht}if(Ht++,Ht===Kt)return Ht;if(Yt&&++Zt>EXECUTION_STEPS){if(Date.now()>Jt)return $t(),Ht;Zt=0}}}endDrawing(){Br(this,D1,u$).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const dt of this._cachedBitmapsMap.values()){for(const kt of dt.values())typeof HTMLCanvasElement<"u"&&kt instanceof HTMLCanvasElement&&(kt.width=kt.height=0);dt.clear()}this._cachedBitmapsMap.clear(),Br(this,F1,h$).call(this)}_scaleImage(dt,kt){const $t=dt.width??dt.displayWidth,Tt=dt.height??dt.displayHeight;let Dt=Math.max(Math.hypot(kt[0],kt[1]),1),Ft=Math.max(Math.hypot(kt[2],kt[3]),1),Ut=$t,Ht=Tt,Kt="prescale1",Yt,Jt;for(;Dt>2&&Ut>1||Ft>2&&Ht>1;){let Zt=Ut,er=Ht;Dt>2&&Ut>1&&(Zt=Ut>=16384?Math.floor(Ut/2)-1||1:Math.ceil(Ut/2),Dt/=Ut/Zt),Ft>2&&Ht>1&&(er=Ht>=16384?Math.floor(Ht/2)-1||1:Math.ceil(Ht)/2,Ft/=Ht/er),Yt=this.cachedCanvases.getCanvas(Kt,Zt,er),Jt=Yt.context,Jt.clearRect(0,0,Zt,er),Jt.drawImage(dt,0,0,Ut,Ht,0,0,Zt,er),dt=Yt.canvas,Ut=Zt,Ht=er,Kt=Kt==="prescale1"?"prescale2":"prescale1"}return{img:dt,paintWidth:Ut,paintHeight:Ht}}_createMaskCanvas(dt,kt){var Rr,br;const $t=this.ctx,{width:Tt,height:Dt}=kt,Ft=this.current.fillColor,Ut=this.current.patternFill,Ht=getCurrentTransform($t);let Kt,Yt,Jt,Zt;if((kt.bitmap||kt.data)&&kt.count>1){const _r=kt.bitmap||kt.data.buffer;Yt=JSON.stringify(Ut?Ht:[Ht.slice(0,4),Ft]),Kt=this._cachedBitmapsMap.get(_r),Kt||(Kt=new Map,this._cachedBitmapsMap.set(_r,Kt));const Mr=Kt.get(Yt);if(Mr&&!Ut){const Pr=Math.round(Math.min(Ht[0],Ht[2])+Ht[4]),Or=Math.round(Math.min(Ht[1],Ht[3])+Ht[5]);return(Rr=this.dependencyTracker)==null||Rr.recordDependencies(dt,Dependencies.transformAndFill),{canvas:Mr,offsetX:Pr,offsetY:Or}}Jt=Mr}Jt||(Zt=this.cachedCanvases.getCanvas("maskCanvas",Tt,Dt),putBinaryImageMask(Zt.context,kt));let er=Util.transform(Ht,[1/Tt,0,0,-1/Dt,0,0]);er=Util.transform(er,[1,0,0,1,0,-Dt]);const rr=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,Tt,Dt],er,rr);const[sr,nr,ir,lr]=rr,or=Math.round(ir-sr)||1,cr=Math.round(lr-nr)||1,dr=this.cachedCanvases.getCanvas("fillCanvas",or,cr),ur=dr.context,pr=sr,mr=nr;ur.translate(-pr,-mr),ur.transform(...er),Jt||(Jt=this._scaleImage(Zt.canvas,getCurrentTransformInverse(ur)),Jt=Jt.img,Kt&&Ut&&Kt.set(Yt,Jt)),ur.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ur),kt.interpolate),drawImageAtIntegerCoords(ur,Jt,0,0,Jt.width,Jt.height,0,0,Tt,Dt),ur.globalCompositeOperation="source-in";const jr=Util.transform(getCurrentTransformInverse(ur),[1,0,0,1,-pr,-mr]);return ur.fillStyle=Ut?Ft.getPattern($t,this,jr,PathType.FILL,dt):Ft,ur.fillRect(0,0,Tt,Dt),Kt&&!Ut&&(this.cachedCanvases.delete("fillCanvas"),Kt.set(Yt,dr.canvas)),(br=this.dependencyTracker)==null||br.recordDependencies(dt,Dependencies.transformAndFill),{canvas:dr.canvas,offsetX:Math.round(pr),offsetY:Math.round(mr)}}setLineWidth(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("lineWidth",dt),kt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=kt,this.ctx.lineWidth=kt}setLineCap(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("lineCap",dt),this.ctx.lineCap=LINE_CAP_STYLES[kt]}setLineJoin(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("lineJoin",dt),this.ctx.lineJoin=LINE_JOIN_STYLES[kt]}setMiterLimit(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("miterLimit",dt),this.ctx.miterLimit=kt}setDash(dt,kt,$t){var Dt;(Dt=this.dependencyTracker)==null||Dt.recordSimpleData("dash",dt);const Tt=this.ctx;Tt.setLineDash!==void 0&&(Tt.setLineDash(kt),Tt.lineDashOffset=$t)}setRenderingIntent(dt,kt){}setFlatness(dt,kt){}setGState(dt,kt){var $t,Tt,Dt,Ft,Ut;for(const[Ht,Kt]of kt)switch(Ht){case"LW":this.setLineWidth(dt,Kt);break;case"LC":this.setLineCap(dt,Kt);break;case"LJ":this.setLineJoin(dt,Kt);break;case"ML":this.setMiterLimit(dt,Kt);break;case"D":this.setDash(dt,Kt[0],Kt[1]);break;case"RI":this.setRenderingIntent(dt,Kt);break;case"FL":this.setFlatness(dt,Kt);break;case"Font":this.setFont(dt,Kt[0],Kt[1]);break;case"CA":($t=this.dependencyTracker)==null||$t.recordSimpleData("strokeAlpha",dt),this.current.strokeAlpha=Kt;break;case"ca":(Tt=this.dependencyTracker)==null||Tt.recordSimpleData("fillAlpha",dt),this.ctx.globalAlpha=this.current.fillAlpha=Kt;break;case"BM":(Dt=this.dependencyTracker)==null||Dt.recordSimpleData("globalCompositeOperation",dt),this.ctx.globalCompositeOperation=Kt;break;case"SMask":(Ft=this.dependencyTracker)==null||Ft.recordSimpleData("SMask",dt),this.current.activeSMask=Kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(Ut=this.dependencyTracker)==null||Ut.recordSimpleData("filter",dt),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const dt=this.inSMaskMode;this.current.activeSMask&&!dt?this.beginSMaskMode():!this.current.activeSMask&&dt&&this.endSMaskMode()}beginSMaskMode(dt){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const kt=this.ctx.canvas.width,$t=this.ctx.canvas.height,Tt="smaskGroupAt"+this.groupLevel,Dt=this.cachedCanvases.getCanvas(Tt,kt,$t);this.suspendedCtx=this.ctx;const Ft=this.ctx=Dt.context;Ft.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,Ft),mirrorContextOperations(Ft,this.suspendedCtx),this.setGState(dt,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dt){if(!this.current.activeSMask)return;dt?(dt[0]=Math.floor(dt[0]),dt[1]=Math.floor(dt[1]),dt[2]=Math.ceil(dt[2]),dt[3]=Math.ceil(dt[3])):dt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const kt=this.current.activeSMask,$t=this.suspendedCtx;this.composeSMask($t,kt,this.ctx,dt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(dt,kt,$t,Tt){const Dt=Tt[0],Ft=Tt[1],Ut=Tt[2]-Dt,Ht=Tt[3]-Ft;Ut===0||Ht===0||(this.genericComposeSMask(kt.context,$t,Ut,Ht,kt.subtype,kt.backdrop,kt.transferMap,Dt,Ft,kt.offsetX,kt.offsetY),dt.save(),dt.globalAlpha=1,dt.globalCompositeOperation="source-over",dt.setTransform(1,0,0,1,0,0),dt.drawImage($t.canvas,0,0),dt.restore())}genericComposeSMask(dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt){let Zt=dt.canvas,er=Ht-Yt,rr=Kt-Jt;if(Ft)if(er<0||rr<0||er+$t>Zt.width||rr+Tt>Zt.height){const nr=this.cachedCanvases.getCanvas("maskExtension",$t,Tt),ir=nr.context;ir.drawImage(Zt,-er,-rr),ir.globalCompositeOperation="destination-atop",ir.fillStyle=Ft,ir.fillRect(0,0,$t,Tt),ir.globalCompositeOperation="source-over",Zt=nr.canvas,er=rr=0}else{dt.save(),dt.globalAlpha=1,dt.setTransform(1,0,0,1,0,0);const nr=new Path2D;nr.rect(er,rr,$t,Tt),dt.clip(nr),dt.globalCompositeOperation="destination-atop",dt.fillStyle=Ft,dt.fillRect(er,rr,$t,Tt),dt.restore()}kt.save(),kt.globalAlpha=1,kt.setTransform(1,0,0,1,0,0),Dt==="Alpha"&&Ut?kt.filter=this.filterFactory.addAlphaFilter(Ut):Dt==="Luminosity"&&(kt.filter=this.filterFactory.addLuminosityFilter(Ut));const sr=new Path2D;sr.rect(Ht,Kt,$t,Tt),kt.clip(sr),kt.globalCompositeOperation="destination-in",kt.drawImage(Zt,er,rr,$t,Tt,Ht,Kt,$t,Tt),kt.restore()}save(dt){var $t;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const kt=this.current;this.stateStack.push(kt),this.current=kt.clone(),($t=this.dependencyTracker)==null||$t.save(dt)}restore(dt){var kt;if((kt=this.dependencyTracker)==null||kt.restore(dt),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(dt,kt,$t,Tt,Dt,Ft,Ut){var Ht;(Ht=this.dependencyTracker)==null||Ht.recordIncrementalData("transform",dt),this.ctx.transform(kt,$t,Tt,Dt,Ft,Ut),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(dt,kt,$t,Tt){let[Dt]=$t;if(!Tt){Dt||(Dt=$t[0]=new Path2D),this[kt](dt,Dt);return}if(this.dependencyTracker!==null){const Ft=kt===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(dt).recordBBox(dt,this.ctx,Tt[0]-Ft,Tt[2]+Ft,Tt[1]-Ft,Tt[3]+Ft).recordDependencies(dt,["transform"])}if(!(Dt instanceof Path2D)){const Ft=$t[0]=new Path2D;for(let Ut=0,Ht=Dt.length;Ut<Ht;)switch(Dt[Ut++]){case DrawOPS.moveTo:Ft.moveTo(Dt[Ut++],Dt[Ut++]);break;case DrawOPS.lineTo:Ft.lineTo(Dt[Ut++],Dt[Ut++]);break;case DrawOPS.curveTo:Ft.bezierCurveTo(Dt[Ut++],Dt[Ut++],Dt[Ut++],Dt[Ut++],Dt[Ut++],Dt[Ut++]);break;case DrawOPS.closePath:Ft.closePath();break;default:warn(`Unrecognized drawing path operator: ${Dt[Ut-1]}`);break}Dt=Ft}Util.axialAlignedBoundingBox(Tt,getCurrentTransform(this.ctx),this.current.minMax),this[kt](dt,Dt),this._pathStartIdx=dt}closePath(dt){this.ctx.closePath()}stroke(dt,kt,$t=!0){var Ft;const Tt=this.ctx,Dt=this.current.strokeColor;if(Tt.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof Dt=="object"&&(Dt!=null&&Dt.getPattern)){const Ut=Dt.isModifyingCurrentTransform()?Tt.getTransform():null;if(Tt.save(),Tt.strokeStyle=Dt.getPattern(Tt,this,getCurrentTransformInverse(Tt),PathType.STROKE,dt),Ut){const Ht=new Path2D;Ht.addPath(kt,Tt.getTransform().invertSelf().multiplySelf(Ut)),kt=Ht}this.rescaleAndStroke(kt,!1),Tt.restore()}else this.rescaleAndStroke(kt,!0);(Ft=this.dependencyTracker)==null||Ft.recordDependencies(dt,Dependencies.stroke),$t&&this.consumePath(dt,kt,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),Tt.globalAlpha=this.current.fillAlpha}closeStroke(dt,kt){this.stroke(dt,kt)}fill(dt,kt,$t=!0){var Kt,Yt,Jt;const Tt=this.ctx,Dt=this.current.fillColor,Ft=this.current.patternFill;let Ut=!1;if(Ft){const Zt=Dt.isModifyingCurrentTransform()?Tt.getTransform():null;if((Kt=this.dependencyTracker)==null||Kt.save(dt),Tt.save(),Tt.fillStyle=Dt.getPattern(Tt,this,getCurrentTransformInverse(Tt),PathType.FILL,dt),Zt){const er=new Path2D;er.addPath(kt,Tt.getTransform().invertSelf().multiplySelf(Zt)),kt=er}Ut=!0}const Ht=this.current.getClippedPathBoundingBox();this.contentVisible&&Ht!==null&&(this.pendingEOFill?(Tt.fill(kt,"evenodd"),this.pendingEOFill=!1):Tt.fill(kt)),(Yt=this.dependencyTracker)==null||Yt.recordDependencies(dt,Dependencies.fill),Ut&&(Tt.restore(),(Jt=this.dependencyTracker)==null||Jt.restore(dt)),$t&&this.consumePath(dt,kt,Ht)}eoFill(dt,kt){this.pendingEOFill=!0,this.fill(dt,kt)}fillStroke(dt,kt){this.fill(dt,kt,!1),this.stroke(dt,kt,!1),this.consumePath(dt,kt)}eoFillStroke(dt,kt){this.pendingEOFill=!0,this.fillStroke(dt,kt)}closeFillStroke(dt,kt){this.fillStroke(dt,kt)}closeEOFillStroke(dt,kt){this.pendingEOFill=!0,this.fillStroke(dt,kt)}endPath(dt,kt){this.consumePath(dt,kt)}rawFillPath(dt,kt){var $t;this.ctx.fill(kt),($t=this.dependencyTracker)==null||$t.recordDependencies(dt,Dependencies.rawFillPath).recordOperation(dt)}clip(dt){var kt;(kt=this.dependencyTracker)==null||kt.recordFutureForcedDependency("clipMode",dt),this.pendingClip=NORMAL_CLIP}eoClip(dt){var kt;(kt=this.dependencyTracker)==null||kt.recordFutureForcedDependency("clipMode",dt),this.pendingClip=EO_CLIP}beginText(dt){var kt;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(kt=this.dependencyTracker)==null||kt.recordOpenMarker(dt).resetIncrementalData("sameLineText").resetIncrementalData("moveText",dt)}endText(dt){const kt=this.pendingTextPaths,$t=this.ctx;if(this.dependencyTracker){const{dependencyTracker:Tt}=this;kt!==void 0&&Tt.recordFutureForcedDependency("textClip",Tt.getOpenMarker()).recordFutureForcedDependency("textClip",dt),Tt.recordCloseMarker(dt)}if(kt!==void 0){const Tt=new Path2D,Dt=$t.getTransform().invertSelf();for(const{transform:Ft,x:Ut,y:Ht,fontSize:Kt,path:Yt}of kt)Yt&&Tt.addPath(Yt,new DOMMatrix(Ft).preMultiplySelf(Dt).translate(Ut,Ht).scale(Kt,-Kt));$t.clip(Tt)}delete this.pendingTextPaths}setCharSpacing(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("charSpacing",dt),this.current.charSpacing=kt}setWordSpacing(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("wordSpacing",dt),this.current.wordSpacing=kt}setHScale(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("hScale",dt),this.current.textHScale=kt/100}setLeading(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("leading",dt),this.current.leading=-kt}setFont(dt,kt,$t){var Jt,Zt;(Jt=this.dependencyTracker)==null||Jt.recordSimpleData("font",dt).recordSimpleDataFromNamed("fontObj",kt,dt);const Tt=this.commonObjs.get(kt),Dt=this.current;if(!Tt)throw new Error(`Can't find font for ${kt}`);if(Dt.fontMatrix=Tt.fontMatrix||FONT_IDENTITY_MATRIX,(Dt.fontMatrix[0]===0||Dt.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+kt),$t<0?($t=-$t,Dt.fontDirection=-1):Dt.fontDirection=1,this.current.font=Tt,this.current.fontSize=$t,Tt.isType3Font)return;const Ft=Tt.loadedName||"sans-serif",Ut=((Zt=Tt.systemFontInfo)==null?void 0:Zt.css)||`"${Ft}", ${Tt.fallbackName}`;let Ht="normal";Tt.black?Ht="900":Tt.bold&&(Ht="bold");const Kt=Tt.italic?"italic":"normal";let Yt=$t;$t<MIN_FONT_SIZE?Yt=MIN_FONT_SIZE:$t>MAX_FONT_SIZE&&(Yt=MAX_FONT_SIZE),this.current.fontSizeScale=$t/Yt,this.ctx.font=`${Kt} ${Ht} ${Yt}px ${Ut}`}setTextRenderingMode(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("textRenderingMode",dt),this.current.textRenderingMode=kt}setTextRise(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("textRise",dt),this.current.textRise=kt}moveText(dt,kt,$t){var Tt;(Tt=this.dependencyTracker)==null||Tt.resetIncrementalData("sameLineText").recordIncrementalData("moveText",dt),this.current.x=this.current.lineX+=kt,this.current.y=this.current.lineY+=$t}setLeadingMoveText(dt,kt,$t){this.setLeading(dt,-$t),this.moveText(dt,kt,$t)}setTextMatrix(dt,kt){var Tt;(Tt=this.dependencyTracker)==null||Tt.recordSimpleData("textMatrix",dt);const{current:$t}=this;$t.textMatrix=kt,$t.textMatrixScale=Math.hypot(kt[0],kt[1]),$t.x=$t.lineX=0,$t.y=$t.lineY=0}nextLine(dt){var kt;this.moveText(dt,0,this.current.leading),(kt=this.dependencyTracker)==null||kt.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??dt)}paintChar(dt,kt,$t,Tt,Dt,Ft){var ir,lr,or,cr;const Ut=this.ctx,Ht=this.current,Kt=Ht.font,Yt=Ht.textRenderingMode,Jt=Ht.fontSize/Ht.fontSizeScale,Zt=Yt&TextRenderingMode.FILL_STROKE_MASK,er=!!(Yt&TextRenderingMode.ADD_TO_PATH_FLAG),rr=Ht.patternFill&&!Kt.missingFile,sr=Ht.patternStroke&&!Kt.missingFile;let nr;if((Kt.disableFontFace||er||rr||sr)&&!Kt.missingFile&&(nr=Kt.getPathGenerator(this.commonObjs,kt)),nr&&(Kt.disableFontFace||rr||sr)){Ut.save(),Ut.translate($t,Tt),Ut.scale(Jt,-Jt),(ir=this.dependencyTracker)==null||ir.recordCharacterBBox(dt,Ut,Kt);let dr;if(Zt===TextRenderingMode.FILL||Zt===TextRenderingMode.FILL_STROKE)if(Dt){dr=Ut.getTransform(),Ut.setTransform(...Dt);const ur=Br(this,L1,p$).call(this,nr,dr,Dt);Ut.fill(ur)}else Ut.fill(nr);if(Zt===TextRenderingMode.STROKE||Zt===TextRenderingMode.FILL_STROKE)if(Ft){dr||(dr=Ut.getTransform()),Ut.setTransform(...Ft);const{a:ur,b:pr,c:mr,d:jr}=dr,Rr=Util.inverseTransform(Ft),br=Util.transform([ur,pr,mr,jr,0,0],Rr);Util.singularValueDecompose2dScale(br,XY),Ut.lineWidth*=Math.max(XY[0],XY[1])/Jt,Ut.stroke(Br(this,L1,p$).call(this,nr,dr,Ft))}else Ut.lineWidth/=Jt,Ut.stroke(nr);Ut.restore()}else(Zt===TextRenderingMode.FILL||Zt===TextRenderingMode.FILL_STROKE)&&(Ut.fillText(kt,$t,Tt),(lr=this.dependencyTracker)==null||lr.recordCharacterBBox(dt,Ut,Kt,Jt,$t,Tt,()=>Ut.measureText(kt))),(Zt===TextRenderingMode.STROKE||Zt===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((or=this.dependencyTracker)==null||or.recordCharacterBBox(dt,Ut,Kt,Jt,$t,Tt,()=>Ut.measureText(kt)).recordDependencies(dt,Dependencies.stroke)),Ut.strokeText(kt,$t,Tt));er&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(Ut),x:$t,y:Tt,fontSize:Jt,path:nr}),(cr=this.dependencyTracker)==null||cr.recordCharacterBBox(dt,Ut,Kt,Jt,$t,Tt))}get isFontSubpixelAAEnabled(){const{context:dt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);dt.scale(1.5,1),dt.fillText("I",0,10);const kt=dt.getImageData(0,0,10,10).data;let $t=!1;for(let Tt=3;Tt<kt.length;Tt+=4)if(kt[Tt]>0&&kt[Tt]<255){$t=!0;break}return shadow(this,"isFontSubpixelAAEnabled",$t)}showText(dt,kt){var mr,jr,Rr,br;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(dt,Dependencies.showText).resetBBox(dt),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",dt).inheritPendingDependenciesAsFutureForcedDependencies());const $t=this.current,Tt=$t.font;if(Tt.isType3Font){this.showType3Text(dt,kt),(mr=this.dependencyTracker)==null||mr.recordShowTextOperation(dt);return}const Dt=$t.fontSize;if(Dt===0){(jr=this.dependencyTracker)==null||jr.recordOperation(dt);return}const Ft=this.ctx,Ut=$t.fontSizeScale,Ht=$t.charSpacing,Kt=$t.wordSpacing,Yt=$t.fontDirection,Jt=$t.textHScale*Yt,Zt=kt.length,er=Tt.vertical,rr=er?1:-1,sr=Tt.defaultVMetrics,nr=Dt*$t.fontMatrix[0],ir=$t.textRenderingMode===TextRenderingMode.FILL&&!Tt.disableFontFace&&!$t.patternFill;Ft.save(),$t.textMatrix&&Ft.transform(...$t.textMatrix),Ft.translate($t.x,$t.y+$t.textRise),Yt>0?Ft.scale(Jt,-1):Ft.scale(Jt,1);let lr,or;if($t.patternFill){Ft.save();const _r=$t.fillColor.getPattern(Ft,this,getCurrentTransformInverse(Ft),PathType.FILL,dt);lr=getCurrentTransform(Ft),Ft.restore(),Ft.fillStyle=_r}if($t.patternStroke){Ft.save();const _r=$t.strokeColor.getPattern(Ft,this,getCurrentTransformInverse(Ft),PathType.STROKE,dt);or=getCurrentTransform(Ft),Ft.restore(),Ft.strokeStyle=_r}let cr=$t.lineWidth;const dr=$t.textMatrixScale;if(dr===0||cr===0){const _r=$t.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(_r===TextRenderingMode.STROKE||_r===TextRenderingMode.FILL_STROKE)&&(cr=this.getSinglePixelWidth())}else cr/=dr;if(Ut!==1&&(Ft.scale(Ut,Ut),cr/=Ut),Ft.lineWidth=cr,Tt.isInvalidPDFjsFont){const _r=[];let Mr=0;for(const Or of kt)_r.push(Or.unicode),Mr+=Or.width;const Pr=_r.join("");if(Ft.fillText(Pr,0,0),this.dependencyTracker!==null){const Or=Ft.measureText(Pr);this.dependencyTracker.recordBBox(dt,this.ctx,-Or.actualBoundingBoxLeft,Or.actualBoundingBoxRight,-Or.actualBoundingBoxAscent,Or.actualBoundingBoxDescent).recordShowTextOperation(dt)}$t.x+=Mr*nr*Jt,Ft.restore(),this.compose();return}let ur=0,pr;for(pr=0;pr<Zt;++pr){const _r=kt[pr];if(typeof _r=="number"){ur+=rr*_r*Dt/1e3;continue}let Mr=!1;const Pr=(_r.isSpace?Kt:0)+Ht,Or=_r.fontChar,kr=_r.accent;let Tr,xr,wr=_r.width;if(er){const Yr=_r.vmetric||sr,rs=-(_r.vmetric?Yr[1]:wr*.5)*nr,as=Yr[2]*nr;wr=Yr?-Yr[0]:wr,Tr=rs/Ut,xr=(ur+as)/Ut}else Tr=ur/Ut,xr=0;let zr;if(Tt.remeasure&&wr>0){zr=Ft.measureText(Or);const Yr=zr.width*1e3/Dt*Ut;if(wr<Yr&&this.isFontSubpixelAAEnabled){const rs=wr/Yr;Mr=!0,Ft.save(),Ft.scale(rs,1),Tr/=rs}else wr!==Yr&&(Tr+=(wr-Yr)/2e3*Dt/Ut)}if(this.contentVisible&&(_r.isInFont||Tt.missingFile)){if(ir&&!kr)Ft.fillText(Or,Tr,xr),(Rr=this.dependencyTracker)==null||Rr.recordCharacterBBox(dt,Ft,zr?{bbox:null}:Tt,Dt/Ut,Tr,xr,()=>zr??Ft.measureText(Or));else if(this.paintChar(dt,Or,Tr,xr,lr,or),kr){const Yr=Tr+Dt*kr.offset.x/Ut,rs=xr-Dt*kr.offset.y/Ut;this.paintChar(dt,kr.fontChar,Yr,rs,lr,or)}}const Hr=er?wr*nr-Pr*Yt:wr*nr+Pr*Yt;ur+=Hr,Mr&&Ft.restore()}er?$t.y-=ur:$t.x+=ur*Jt,Ft.restore(),this.compose(),(br=this.dependencyTracker)==null||br.recordShowTextOperation(dt)}showType3Text(dt,kt){const $t=this.ctx,Tt=this.current,Dt=Tt.font,Ft=Tt.fontSize,Ut=Tt.fontDirection,Ht=Dt.vertical?1:-1,Kt=Tt.charSpacing,Yt=Tt.wordSpacing,Jt=Tt.textHScale*Ut,Zt=Tt.fontMatrix||FONT_IDENTITY_MATRIX,er=kt.length,rr=Tt.textRenderingMode===TextRenderingMode.INVISIBLE;let sr,nr,ir,lr;if(rr||Ft===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,$t.save(),Tt.textMatrix&&$t.transform(...Tt.textMatrix),$t.translate(Tt.x,Tt.y+Tt.textRise),$t.scale(Jt,Ut);const or=this.dependencyTracker;for(this.dependencyTracker=or?new CanvasNestedDependencyTracker(or,dt):null,sr=0;sr<er;++sr){if(nr=kt[sr],typeof nr=="number"){lr=Ht*nr*Ft/1e3,this.ctx.translate(lr,0),Tt.x+=lr*Jt;continue}const cr=(nr.isSpace?Yt:0)+Kt,dr=Dt.charProcOperatorList[nr.operatorListId];dr?this.contentVisible&&(this.save(),$t.scale(Ft,Ft),$t.transform(...Zt),this.executeOperatorList(dr),this.restore()):warn(`Type3 character "${nr.operatorListId}" is not available.`);const ur=[nr.width,0];Util.applyTransform(ur,Zt),ir=ur[0]*Ft+cr,$t.translate(ir,0),Tt.x+=ir*Jt}$t.restore(),or&&(this.dependencyTracker=or)}setCharWidth(dt,kt,$t){}setCharWidthAndBounds(dt,kt,$t,Tt,Dt,Ft,Ut){var Kt;const Ht=new Path2D;Ht.rect(Tt,Dt,Ft-Tt,Ut-Dt),this.ctx.clip(Ht),(Kt=this.dependencyTracker)==null||Kt.recordBBox(dt,this.ctx,Tt,Ft,Dt,Ut).recordClipBox(dt,this.ctx,Tt,Ft,Dt,Ut),this.endPath(dt)}getColorN_Pattern(dt,kt){let $t;if(kt[0]==="TilingPattern"){const Tt=this.baseTransform||getCurrentTransform(this.ctx),Dt={createCanvasGraphics:(Ft,Ut)=>new J$(Ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,Ut,!0):null)};$t=new TilingPattern(kt,this.ctx,Dt,Tt)}else $t=this._getPattern(dt,kt[1],kt[2]);return $t}setStrokeColorN(dt,...kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("strokeColor",dt),this.current.strokeColor=this.getColorN_Pattern(dt,kt),this.current.patternStroke=!0}setFillColorN(dt,...kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("fillColor",dt),this.current.fillColor=this.getColorN_Pattern(dt,kt),this.current.patternFill=!0}setStrokeRGBColor(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("strokeColor",dt),this.ctx.strokeStyle=this.current.strokeColor=kt,this.current.patternStroke=!1}setStrokeTransparent(dt){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("strokeColor",dt),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("fillColor",dt),this.ctx.fillStyle=this.current.fillColor=kt,this.current.patternFill=!1}setFillTransparent(dt){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("fillColor",dt),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(dt,kt,$t=null){let Tt;return this.cachedPatterns.has(kt)?Tt=this.cachedPatterns.get(kt):(Tt=getShadingPattern(this.getObject(dt,kt)),this.cachedPatterns.set(kt,Tt)),$t&&(Tt.matrix=$t),Tt}shadingFill(dt,kt){var Ft;if(!this.contentVisible)return;const $t=this.ctx;this.save(dt);const Tt=this._getPattern(dt,kt);$t.fillStyle=Tt.getPattern($t,this,getCurrentTransformInverse($t),PathType.SHADING,dt);const Dt=getCurrentTransformInverse($t);if(Dt){const{width:Ut,height:Ht}=$t.canvas,Kt=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,Ut,Ht],Dt,Kt);const[Yt,Jt,Zt,er]=Kt;this.ctx.fillRect(Yt,Jt,Zt-Yt,er-Jt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(Ft=this.dependencyTracker)==null||Ft.resetBBox(dt).recordFullPageBBox(dt).recordDependencies(dt,Dependencies.transform).recordDependencies(dt,Dependencies.fill).recordOperation(dt),this.compose(this.current.getClippedPathBoundingBox()),this.restore(dt)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(dt,kt,$t){var Tt;if(this.contentVisible&&(this.save(dt),this.baseTransformStack.push(this.baseTransform),kt&&this.transform(dt,...kt),this.baseTransform=getCurrentTransform(this.ctx),$t)){Util.axialAlignedBoundingBox($t,this.baseTransform,this.current.minMax);const[Dt,Ft,Ut,Ht]=$t,Kt=new Path2D;Kt.rect(Dt,Ft,Ut-Dt,Ht-Ft),this.ctx.clip(Kt),(Tt=this.dependencyTracker)==null||Tt.recordClipBox(dt,this.ctx,Dt,Ut,Ft,Ht),this.endPath(dt)}}paintFormXObjectEnd(dt){this.contentVisible&&(this.restore(dt),this.baseTransform=this.baseTransformStack.pop())}beginGroup(dt,kt){var or;if(!this.contentVisible)return;this.save(dt),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const $t=this.ctx;kt.isolated||info("TODO: Support non-isolated groups."),kt.knockout&&warn("Knockout groups not supported.");const Tt=getCurrentTransform($t);if(kt.matrix&&$t.transform(...kt.matrix),!kt.bbox)throw new Error("Bounding box is required.");let Dt=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(kt.bbox,getCurrentTransform($t),Dt);const Ft=[0,0,$t.canvas.width,$t.canvas.height];Dt=Util.intersect(Dt,Ft)||[0,0,0,0];const Ut=Math.floor(Dt[0]),Ht=Math.floor(Dt[1]),Kt=Math.max(Math.ceil(Dt[2])-Ut,1),Yt=Math.max(Math.ceil(Dt[3])-Ht,1);this.current.startNewPathAndClipBox([0,0,Kt,Yt]);let Jt="groupAt"+this.groupLevel;kt.smask&&(Jt+="_smask_"+this.smaskCounter++%2);const Zt=this.cachedCanvases.getCanvas(Jt,Kt,Yt),er=Zt.context;er.translate(-Ut,-Ht),er.transform(...Tt);let rr=new Path2D;const[sr,nr,ir,lr]=kt.bbox;if(rr.rect(sr,nr,ir-sr,lr-nr),kt.matrix){const cr=new Path2D;cr.addPath(rr,new DOMMatrix(kt.matrix)),rr=cr}er.clip(rr),kt.smask&&this.smaskStack.push({canvas:Zt.canvas,context:er,offsetX:Ut,offsetY:Ht,subtype:kt.smask.subtype,backdrop:kt.smask.backdrop,transferMap:kt.smask.transferMap||null,startTransformInverse:null}),(!kt.smask||this.dependencyTracker)&&($t.setTransform(1,0,0,1,0,0),$t.translate(Ut,Ht),$t.save()),copyCtxState($t,er),this.ctx=er,(or=this.dependencyTracker)==null||or.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform($t),this.setGState(dt,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push($t),this.groupLevel++}endGroup(dt,kt){var Dt;if(!this.contentVisible)return;this.groupLevel--;const $t=this.ctx,Tt=this.groupStack.pop();if(this.ctx=Tt,this.ctx.imageSmoothingEnabled=!1,(Dt=this.dependencyTracker)==null||Dt.popBaseTransform(),kt.smask)this.tempSMask=this.smaskStack.pop(),this.restore(dt),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const Ft=getCurrentTransform(this.ctx);this.restore(dt),this.ctx.save(),this.ctx.setTransform(...Ft);const Ut=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,$t.canvas.width,$t.canvas.height],Ft,Ut),this.ctx.drawImage($t.canvas,0,0),this.ctx.restore(),this.compose(Ut)}}beginAnnotation(dt,kt,$t,Tt,Dt,Ft){if(Br(this,D1,u$).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(dt),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),$t){const Ut=$t[2]-$t[0],Ht=$t[3]-$t[1];if(Ft&&this.annotationCanvasMap){Tt=Tt.slice(),Tt[4]-=$t[0],Tt[5]-=$t[1],$t=$t.slice(),$t[0]=$t[1]=0,$t[2]=Ut,$t[3]=Ht,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:Kt}=this,Yt=Math.ceil(Ut*this.outputScaleX*Kt),Jt=Math.ceil(Ht*this.outputScaleY*Kt);this.annotationCanvas=this.canvasFactory.create(Yt,Jt);const{canvas:Zt,context:er}=this.annotationCanvas;this.annotationCanvasMap.set(kt,Zt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=er,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,Ht*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(dt);const Kt=new Path2D;Kt.rect($t[0],$t[1],Ut,Ht),this.ctx.clip(Kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(dt,...Tt),this.transform(dt,...Dt)}endAnnotation(dt){this.annotationCanvas&&(this.ctx.restore(),Br(this,F1,h$).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(dt,kt){var Ut;if(!this.contentVisible)return;const $t=kt.count;kt=this.getObject(dt,kt.data,kt),kt.count=$t;const Tt=this.ctx,Dt=this._createMaskCanvas(dt,kt),Ft=Dt.canvas;Tt.save(),Tt.setTransform(1,0,0,1,0,0),Tt.drawImage(Ft,Dt.offsetX,Dt.offsetY),(Ut=this.dependencyTracker)==null||Ut.resetBBox(dt).recordBBox(dt,this.ctx,Dt.offsetX,Dt.offsetX+Ft.width,Dt.offsetY,Dt.offsetY+Ft.height).recordOperation(dt),Tt.restore(),this.compose()}paintImageMaskXObjectRepeat(dt,kt,$t,Tt=0,Dt=0,Ft,Ut){var Jt,Zt,er;if(!this.contentVisible)return;kt=this.getObject(dt,kt.data,kt);const Ht=this.ctx;Ht.save();const Kt=getCurrentTransform(Ht);Ht.transform($t,Tt,Dt,Ft,0,0);const Yt=this._createMaskCanvas(dt,kt);Ht.setTransform(1,0,0,1,Yt.offsetX-Kt[4],Yt.offsetY-Kt[5]),(Jt=this.dependencyTracker)==null||Jt.resetBBox(dt);for(let rr=0,sr=Ut.length;rr<sr;rr+=2){const nr=Util.transform(Kt,[$t,Tt,Dt,Ft,Ut[rr],Ut[rr+1]]);Ht.drawImage(Yt.canvas,nr[4],nr[5]),(Zt=this.dependencyTracker)==null||Zt.recordBBox(dt,this.ctx,nr[4],nr[4]+Yt.canvas.width,nr[5],nr[5]+Yt.canvas.height)}Ht.restore(),this.compose(),(er=this.dependencyTracker)==null||er.recordOperation(dt)}paintImageMaskXObjectGroup(dt,kt){var Ft,Ut,Ht;if(!this.contentVisible)return;const $t=this.ctx,Tt=this.current.fillColor,Dt=this.current.patternFill;(Ft=this.dependencyTracker)==null||Ft.resetBBox(dt).recordDependencies(dt,Dependencies.transformAndFill);for(const Kt of kt){const{data:Yt,width:Jt,height:Zt,transform:er}=Kt,rr=this.cachedCanvases.getCanvas("maskCanvas",Jt,Zt),sr=rr.context;sr.save();const nr=this.getObject(dt,Yt,Kt);putBinaryImageMask(sr,nr),sr.globalCompositeOperation="source-in",sr.fillStyle=Dt?Tt.getPattern(sr,this,getCurrentTransformInverse($t),PathType.FILL,dt):Tt,sr.fillRect(0,0,Jt,Zt),sr.restore(),$t.save(),$t.transform(...er),$t.scale(1,-1),drawImageAtIntegerCoords($t,rr.canvas,0,0,Jt,Zt,0,-1,1,1),(Ut=this.dependencyTracker)==null||Ut.recordBBox(dt,$t,0,Jt,0,Zt),$t.restore()}this.compose(),(Ht=this.dependencyTracker)==null||Ht.recordOperation(dt)}paintImageXObject(dt,kt){if(!this.contentVisible)return;const $t=this.getObject(dt,kt);if(!$t){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(dt,$t)}paintImageXObjectRepeat(dt,kt,$t,Tt,Dt){if(!this.contentVisible)return;const Ft=this.getObject(dt,kt);if(!Ft){warn("Dependent image isn't ready yet");return}const Ut=Ft.width,Ht=Ft.height,Kt=[];for(let Yt=0,Jt=Dt.length;Yt<Jt;Yt+=2)Kt.push({transform:[$t,0,0,Tt,Dt[Yt],Dt[Yt+1]],x:0,y:0,w:Ut,h:Ht});this.paintInlineImageXObjectGroup(dt,Ft,Kt)}applyTransferMapsToCanvas(dt){return this.current.transferMaps!=="none"&&(dt.filter=this.current.transferMaps,dt.drawImage(dt.canvas,0,0),dt.filter="none"),dt.canvas}applyTransferMapsToBitmap(dt){if(this.current.transferMaps==="none")return dt.bitmap;const{bitmap:kt,width:$t,height:Tt}=dt,Dt=this.cachedCanvases.getCanvas("inlineImage",$t,Tt),Ft=Dt.context;return Ft.filter=this.current.transferMaps,Ft.drawImage(kt,0,0),Ft.filter="none",Dt.canvas}paintInlineImageXObject(dt,kt){var Kt;if(!this.contentVisible)return;const $t=kt.width,Tt=kt.height,Dt=this.ctx;this.save(dt);const{filter:Ft}=Dt;Ft!=="none"&&Ft!==""&&(Dt.filter="none"),Dt.scale(1/$t,-1/Tt);let Ut;if(kt.bitmap)Ut=this.applyTransferMapsToBitmap(kt);else if(typeof HTMLElement=="function"&&kt instanceof HTMLElement||!kt.data)Ut=kt;else{const Jt=this.cachedCanvases.getCanvas("inlineImage",$t,Tt).context;putBinaryImageData(Jt,kt),Ut=this.applyTransferMapsToCanvas(Jt)}const Ht=this._scaleImage(Ut,getCurrentTransformInverse(Dt));Dt.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(Dt),kt.interpolate),(Kt=this.dependencyTracker)==null||Kt.resetBBox(dt).recordBBox(dt,Dt,0,$t,-Tt,0).recordDependencies(dt,Dependencies.imageXObject).recordOperation(dt),drawImageAtIntegerCoords(Dt,Ht.img,0,0,Ht.paintWidth,Ht.paintHeight,0,-Tt,$t,Tt),this.compose(),this.restore(dt)}paintInlineImageXObjectGroup(dt,kt,$t){var Ft,Ut,Ht;if(!this.contentVisible)return;const Tt=this.ctx;let Dt;if(kt.bitmap)Dt=kt.bitmap;else{const Kt=kt.width,Yt=kt.height,Zt=this.cachedCanvases.getCanvas("inlineImage",Kt,Yt).context;putBinaryImageData(Zt,kt),Dt=this.applyTransferMapsToCanvas(Zt)}(Ft=this.dependencyTracker)==null||Ft.resetBBox(dt);for(const Kt of $t)Tt.save(),Tt.transform(...Kt.transform),Tt.scale(1,-1),drawImageAtIntegerCoords(Tt,Dt,Kt.x,Kt.y,Kt.w,Kt.h,0,-1,1,1),(Ut=this.dependencyTracker)==null||Ut.recordBBox(dt,Tt,0,1,-1,0),Tt.restore();(Ht=this.dependencyTracker)==null||Ht.recordOperation(dt),this.compose()}paintSolidColorImageMask(dt){var kt;this.contentVisible&&((kt=this.dependencyTracker)==null||kt.resetBBox(dt).recordBBox(dt,this.ctx,0,1,0,1).recordDependencies(dt,Dependencies.fill).recordOperation(dt),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(dt,kt){}markPointProps(dt,kt,$t){}beginMarkedContent(dt,kt){var $t;($t=this.dependencyTracker)==null||$t.beginMarkedContent(dt),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(dt,kt,$t){var Tt;(Tt=this.dependencyTracker)==null||Tt.beginMarkedContent(dt),kt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible($t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(dt){var kt;(kt=this.dependencyTracker)==null||kt.endMarkedContent(dt),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(dt){}endCompat(dt){}consumePath(dt,kt,$t){var Ft,Ut;const Tt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose($t);const Dt=this.ctx;this.pendingClip?(Tt||(this.pendingClip===EO_CLIP?Dt.clip(kt,"evenodd"):Dt.clip(kt)),this.pendingClip=null,(Ft=this.dependencyTracker)==null||Ft.bboxToClipBoxDropOperation(dt).recordFutureForcedDependency("clipPath",dt)):(Ut=this.dependencyTracker)==null||Ut.recordOperation(dt),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const dt=getCurrentTransform(this.ctx);if(dt[1]===0&&dt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(dt[0]),Math.abs(dt[3]));else{const kt=Math.abs(dt[0]*dt[3]-dt[2]*dt[1]),$t=Math.hypot(dt[0],dt[2]),Tt=Math.hypot(dt[1],dt[3]);this._cachedGetSinglePixelWidth=Math.max($t,Tt)/kt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:dt}=this.current,{a:kt,b:$t,c:Tt,d:Dt}=this.ctx.getTransform();let Ft,Ut;if($t===0&&Tt===0){const Ht=Math.abs(kt),Kt=Math.abs(Dt);if(Ht===Kt)if(dt===0)Ft=Ut=1/Ht;else{const Yt=Ht*dt;Ft=Ut=Yt<1?1/Yt:1}else if(dt===0)Ft=1/Ht,Ut=1/Kt;else{const Yt=Ht*dt,Jt=Kt*dt;Ft=Yt<1?1/Yt:1,Ut=Jt<1?1/Jt:1}}else{const Ht=Math.abs(kt*Dt-$t*Tt),Kt=Math.hypot(kt,$t),Yt=Math.hypot(Tt,Dt);if(dt===0)Ft=Yt/Ht,Ut=Kt/Ht;else{const Jt=dt*Ht;Ft=Yt>Jt?Yt/Jt:1,Ut=Kt>Jt?Kt/Jt:1}}this._cachedScaleForStroking[0]=Ft,this._cachedScaleForStroking[1]=Ut}return this._cachedScaleForStroking}rescaleAndStroke(dt,kt){const{ctx:$t,current:{lineWidth:Tt}}=this,[Dt,Ft]=this.getScaleForStroking();if(Dt===Ft){$t.lineWidth=(Tt||1)*Dt,$t.stroke(dt);return}const Ut=$t.getLineDash();kt&&$t.save(),$t.scale(Dt,Ft),SCALE_MATRIX.a=1/Dt,SCALE_MATRIX.d=1/Ft;const Ht=new Path2D;if(Ht.addPath(dt,SCALE_MATRIX),Ut.length>0){const Kt=Math.max(Dt,Ft);$t.setLineDash(Ut.map(Yt=>Yt/Kt)),$t.lineDashOffset/=Kt}$t.lineWidth=Tt||1,$t.stroke(Ht),kt&&$t.restore()}isContentVisible(){for(let dt=this.markedContentStack.length-1;dt>=0;dt--)if(!this.markedContentStack[dt].visible)return!1;return!0}};D1=new WeakSet,u$=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},F1=new WeakSet,h$=function(){if(this.pageColors){const dt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(dt!=="none"){const kt=this.ctx.filter;this.ctx.filter=dt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=kt}}},L1=new WeakSet,p$=function(dt,kt,$t){const Tt=new Path2D;return Tt.addPath(dt,new DOMMatrix($t).invertSelf().multiplySelf(kt)),Tt};let CanvasGraphics=J$;for(const et in OPS)CanvasGraphics.prototype[et]!==void 0&&(CanvasGraphics.prototype[OPS[et]]=CanvasGraphics.prototype[et]);var _b,ey,O1,ty,$w;const g0=class g0{constructor(dt){yr(this,ty);yr(this,_b,void 0);yr(this,ey,void 0);yr(this,O1,void 0);vr(this,_b,dt),vr(this,ey,new DataView(ar(this,_b))),vr(this,O1,new TextDecoder)}static write(dt){const kt=new TextEncoder,$t={};let Tt=0;for(const Kt of g0.strings){const Yt=kt.encode(dt[Kt]);$t[Kt]=Yt,Tt+=4+Yt.length}const Dt=new ArrayBuffer(Tt),Ft=new Uint8Array(Dt),Ut=new DataView(Dt);let Ht=0;for(const Kt of g0.strings){const Yt=$t[Kt],Jt=Yt.length;Ut.setUint32(Ht,Jt),Ft.set(Yt,Ht+4),Ht+=4+Jt}return assert(Ht===Dt.byteLength,"CssFontInfo.write: Buffer overflow"),Dt}get fontFamily(){return Br(this,ty,$w).call(this,0)}get fontWeight(){return Br(this,ty,$w).call(this,1)}get italicAngle(){return Br(this,ty,$w).call(this,2)}};_b=new WeakMap,ey=new WeakMap,O1=new WeakMap,ty=new WeakSet,$w=function(dt){assert(dt<g0.strings.length,"Invalid string index");let kt=0;for(let Tt=0;Tt<dt;Tt++)kt+=ar(this,ey).getUint32(kt)+4;const $t=ar(this,ey).getUint32(kt);return ar(this,O1).decode(new Uint8Array(ar(this,_b),kt+4,$t))},Es(g0,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=g0;var qp,Eu,mx,xx,Tv;const b0=class b0{constructor(dt){yr(this,xx);yr(this,qp,void 0);yr(this,Eu,void 0);yr(this,mx,void 0);vr(this,qp,dt),vr(this,Eu,new DataView(ar(this,qp))),vr(this,mx,new TextDecoder)}static write(dt){const kt=new TextEncoder,$t={};let Tt=0;for(const Zt of b0.strings){const er=kt.encode(dt[Zt]);$t[Zt]=er,Tt+=4+er.length}Tt+=4;let Dt,Ft,Ut=1+Tt;dt.style&&(Dt=kt.encode(dt.style.style),Ft=kt.encode(dt.style.weight),Ut+=4+Dt.length+4+Ft.length);const Ht=new ArrayBuffer(Ut),Kt=new Uint8Array(Ht),Yt=new DataView(Ht);let Jt=0;Yt.setUint8(Jt++,dt.guessFallback?1:0),Yt.setUint32(Jt,0),Jt+=4,Tt=0;for(const Zt of b0.strings){const er=$t[Zt],rr=er.length;Tt+=4+rr,Yt.setUint32(Jt,rr),Kt.set(er,Jt+4),Jt+=4+rr}return Yt.setUint32(Jt-Tt-4,Tt),dt.style&&(Yt.setUint32(Jt,Dt.length),Kt.set(Dt,Jt+4),Jt+=4+Dt.length,Yt.setUint32(Jt,Ft.length),Kt.set(Ft,Jt+4),Jt+=4+Ft.length),assert(Jt<=Ht.byteLength,"SubstitionInfo.write: Buffer overflow"),Ht.transferToFixedLength(Jt)}get guessFallback(){return ar(this,Eu).getUint8(0)!==0}get css(){return Br(this,xx,Tv).call(this,0)}get loadedName(){return Br(this,xx,Tv).call(this,1)}get baseFontName(){return Br(this,xx,Tv).call(this,2)}get src(){return Br(this,xx,Tv).call(this,3)}get style(){let dt=1;dt+=4+ar(this,Eu).getUint32(dt);const kt=ar(this,Eu).getUint32(dt),$t=ar(this,mx).decode(new Uint8Array(ar(this,qp),dt+4,kt));dt+=4+kt;const Tt=ar(this,Eu).getUint32(dt),Dt=ar(this,mx).decode(new Uint8Array(ar(this,qp),dt+4,Tt));return{style:$t,weight:Dt}}};qp=new WeakMap,Eu=new WeakMap,mx=new WeakMap,xx=new WeakSet,Tv=function(dt){assert(dt<b0.strings.length,"Invalid string index");let kt=5;for(let Tt=0;Tt<dt;Tt++)kt+=ar(this,Eu).getUint32(kt)+4;const $t=ar(this,Eu).getUint32(kt);return ar(this,mx).decode(new Uint8Array(ar(this,qp),kt+4,$t))},Es(b0,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=b0;var ry,sy,ny,iy,Jo,ju,B1,Tn,Zo,Yl,ay,Sw,gx,Nv;const Hs=class Hs{constructor({data:dt,extra:kt}){yr(this,Zo);yr(this,ay);yr(this,gx);yr(this,ju,void 0);yr(this,B1,void 0);yr(this,Tn,void 0);vr(this,ju,dt),vr(this,B1,new TextDecoder),vr(this,Tn,new DataView(ar(this,ju))),kt&&Object.assign(this,kt)}get black(){return Br(this,Zo,Yl).call(this,0)}get bold(){return Br(this,Zo,Yl).call(this,1)}get disableFontFace(){return Br(this,Zo,Yl).call(this,2)}get fontExtraProperties(){return Br(this,Zo,Yl).call(this,3)}get isInvalidPDFjsFont(){return Br(this,Zo,Yl).call(this,4)}get isType3Font(){return Br(this,Zo,Yl).call(this,5)}get italic(){return Br(this,Zo,Yl).call(this,6)}get missingFile(){return Br(this,Zo,Yl).call(this,7)}get remeasure(){return Br(this,Zo,Yl).call(this,8)}get vertical(){return Br(this,Zo,Yl).call(this,9)}get ascent(){return Br(this,ay,Sw).call(this,0)}get defaultWidth(){return Br(this,ay,Sw).call(this,1)}get descent(){return Br(this,ay,Sw).call(this,2)}get bbox(){let dt=ar(Hs,sy);if(ar(this,Tn).getUint8(dt)===0)return;dt+=1;const $t=[];for(let Tt=0;Tt<4;Tt++)$t.push(ar(this,Tn).getInt16(dt,!0)),dt+=2;return $t}get fontMatrix(){let dt=ar(Hs,ny);if(ar(this,Tn).getUint8(dt)===0)return;dt+=1;const $t=[];for(let Tt=0;Tt<6;Tt++)$t.push(ar(this,Tn).getFloat64(dt,!0)),dt+=8;return $t}get defaultVMetrics(){let dt=ar(Hs,iy);if(ar(this,Tn).getUint8(dt)===0)return;dt+=1;const $t=[];for(let Tt=0;Tt<3;Tt++)$t.push(ar(this,Tn).getInt16(dt,!0)),dt+=2;return $t}get fallbackName(){return Br(this,gx,Nv).call(this,0)}get loadedName(){return Br(this,gx,Nv).call(this,1)}get mimetype(){return Br(this,gx,Nv).call(this,2)}get name(){return Br(this,gx,Nv).call(this,3)}get data(){let dt=ar(Hs,Jo);const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const Tt=ar(this,Tn).getUint32(dt);dt+=4+Tt;const Dt=ar(this,Tn).getUint32(dt);if(Dt!==0)return new Uint8Array(ar(this,ju),dt+4,Dt)}clearData(){let dt=ar(Hs,Jo);const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const Tt=ar(this,Tn).getUint32(dt);dt+=4+Tt;const Dt=ar(this,Tn).getUint32(dt);new Uint8Array(ar(this,ju),dt+4,Dt).fill(0),ar(this,Tn).setUint32(dt,0)}get cssFontInfo(){let dt=ar(Hs,Jo);const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const Tt=ar(this,Tn).getUint32(dt);if(Tt===0)return null;const Dt=new Uint8Array(Tt);return Dt.set(new Uint8Array(ar(this,ju),dt+4,Tt)),new CssFontInfo(Dt.buffer)}get systemFontInfo(){let dt=ar(Hs,Jo);const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const $t=ar(this,Tn).getUint32(dt);if($t===0)return null;const Tt=new Uint8Array($t);return Tt.set(new Uint8Array(ar(this,ju),dt+4,$t)),new SystemFontInfo(Tt.buffer)}static write(dt){const kt=dt.systemFontInfo?SystemFontInfo.write(dt.systemFontInfo):null,$t=dt.cssFontInfo?CssFontInfo.write(dt.cssFontInfo):null,Tt=new TextEncoder,Dt={};let Ft=0;for(const sr of Hs.strings)Dt[sr]=Tt.encode(dt[sr]),Ft+=4+Dt[sr].length;const Ut=ar(Hs,Jo)+4+Ft+4+(kt?kt.byteLength:0)+4+($t?$t.byteLength:0)+4+(dt.data?dt.data.length:0),Ht=new ArrayBuffer(Ut),Kt=new Uint8Array(Ht),Yt=new DataView(Ht);let Jt=0;const Zt=Hs.bools.length;let er=0,rr=0;for(let sr=0;sr<Zt;sr++){const nr=dt[Hs.bools[sr]];er|=(nr===void 0?0:nr?2:1)<<rr,rr+=2,(rr===8||sr===Zt-1)&&(Yt.setUint8(Jt++,er),er=0,rr=0)}assert(Jt===ar(Hs,ry),"FontInfo.write: Boolean properties offset mismatch");for(const sr of Hs.numbers)Yt.setFloat64(Jt,dt[sr]),Jt+=8;if(assert(Jt===ar(Hs,sy),"FontInfo.write: Number properties offset mismatch"),dt.bbox){Yt.setUint8(Jt++,4);for(const sr of dt.bbox)Yt.setInt16(Jt,sr,!0),Jt+=2}else Yt.setUint8(Jt++,0),Jt+=2*4;if(assert(Jt===ar(Hs,ny),"FontInfo.write: BBox properties offset mismatch"),dt.fontMatrix){Yt.setUint8(Jt++,6);for(const sr of dt.fontMatrix)Yt.setFloat64(Jt,sr,!0),Jt+=8}else Yt.setUint8(Jt++,0),Jt+=8*6;if(assert(Jt===ar(Hs,iy),"FontInfo.write: FontMatrix properties offset mismatch"),dt.defaultVMetrics){Yt.setUint8(Jt++,1);for(const sr of dt.defaultVMetrics)Yt.setInt16(Jt,sr,!0),Jt+=2}else Yt.setUint8(Jt++,0),Jt+=3*2;assert(Jt===ar(Hs,Jo),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Yt.setUint32(ar(Hs,Jo),0),Jt+=4;for(const sr of Hs.strings){const nr=Dt[sr],ir=nr.length;Yt.setUint32(Jt,ir),Kt.set(nr,Jt+4),Jt+=4+ir}if(Yt.setUint32(ar(Hs,Jo),Jt-ar(Hs,Jo)-4),!kt)Yt.setUint32(Jt,0),Jt+=4;else{const sr=kt.byteLength;Yt.setUint32(Jt,sr),assert(Jt+4+sr<=Ht.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),Kt.set(new Uint8Array(kt),Jt+4),Jt+=4+sr}if(!$t)Yt.setUint32(Jt,0),Jt+=4;else{const sr=$t.byteLength;Yt.setUint32(Jt,sr),assert(Jt+4+sr<=Ht.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),Kt.set(new Uint8Array($t),Jt+4),Jt+=4+sr}return dt.data===void 0?(Yt.setUint32(Jt,0),Jt+=4):(Yt.setUint32(Jt,dt.data.length),Kt.set(dt.data,Jt+4),Jt+=4+dt.data.length),assert(Jt<=Ht.byteLength,"FontInfo.write: Buffer overflow"),Ht.transferToFixedLength(Jt)}};ry=new WeakMap,sy=new WeakMap,ny=new WeakMap,iy=new WeakMap,Jo=new WeakMap,ju=new WeakMap,B1=new WeakMap,Tn=new WeakMap,Zo=new WeakSet,Yl=function(dt){assert(dt<Hs.bools.length,"Invalid boolean index");const kt=Math.floor(dt/4),$t=dt*2%8,Tt=ar(this,Tn).getUint8(kt)>>$t&3;return Tt===0?void 0:Tt===2},ay=new WeakSet,Sw=function(dt){return assert(dt<Hs.numbers.length,"Invalid number index"),ar(this,Tn).getFloat64(ar(Hs,ry)+dt*8)},gx=new WeakSet,Nv=function(dt){assert(dt<Hs.strings.length,"Invalid string index");let kt=ar(Hs,Jo)+4;for(let Dt=0;Dt<dt;Dt++)kt+=ar(this,Tn).getUint32(kt)+4;const $t=ar(this,Tn).getUint32(kt),Tt=new Uint8Array($t);return Tt.set(new Uint8Array(ar(this,ju),kt+4,$t)),ar(this,B1).decode(Tt)},Es(Hs,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Es(Hs,"numbers",["ascent","defaultWidth","descent"]),Es(Hs,"strings",["fallbackName","loadedName","mimetype","name"]),yr(Hs,ry,Math.ceil(Hs.bools.length*2/8)),yr(Hs,sy,ar(Hs,ry)+Hs.numbers.length*8),yr(Hs,ny,ar(Hs,sy)+1+2*4),yr(Hs,iy,ar(Hs,ny)+1+8*6),yr(Hs,Jo,ar(Hs,iy)+1+2*3);let FontInfo=Hs;var V1,z1;class GlobalWorkerOptions{static get workerPort(){return ar(this,V1)}static set workerPort(dt){if(!(typeof Worker<"u"&&dt instanceof Worker)&&dt!==null)throw new Error("Invalid `workerPort` type.");vr(this,V1,dt)}static get workerSrc(){return ar(this,z1)}static set workerSrc(dt){if(typeof dt!="string")throw new Error("Invalid `workerSrc` type.");vr(this,z1,dt)}}V1=new WeakMap,z1=new WeakMap,yr(GlobalWorkerOptions,V1,null),yr(GlobalWorkerOptions,z1,"");var oy,U1;class Metadata{constructor({parsedData:dt,rawData:kt}){yr(this,oy,void 0);yr(this,U1,void 0);vr(this,oy,dt),vr(this,U1,kt)}getRaw(){return ar(this,U1)}get(dt){return ar(this,oy).get(dt)??null}[Symbol.iterator](){return ar(this,oy).entries()}}oy=new WeakMap,U1=new WeakMap;const INTERNAL=Symbol("INTERNAL");var H1,G1,W1,ly;class OptionalContentGroup{constructor(dt,{name:kt,intent:$t,usage:Tt,rbGroups:Dt}){yr(this,H1,!1);yr(this,G1,!1);yr(this,W1,!1);yr(this,ly,!0);vr(this,H1,!!(dt&RenderingIntentFlag.DISPLAY)),vr(this,G1,!!(dt&RenderingIntentFlag.PRINT)),this.name=kt,this.intent=$t,this.usage=Tt,this.rbGroups=Dt}get visible(){if(ar(this,W1))return ar(this,ly);if(!ar(this,ly))return!1;const{print:dt,view:kt}=this.usage;return ar(this,H1)?(kt==null?void 0:kt.viewState)!=="OFF":ar(this,G1)?(dt==null?void 0:dt.printState)!=="OFF":!0}_setVisible(dt,kt,$t=!1){dt!==INTERNAL&&unreachable("Internal method `_setVisible` called."),vr(this,W1,$t),vr(this,ly,kt)}}H1=new WeakMap,G1=new WeakMap,W1=new WeakMap,ly=new WeakMap;var Kp,Nn,cy,dy,q1,f$;class OptionalContentConfig{constructor(dt,kt=RenderingIntentFlag.DISPLAY){yr(this,q1);yr(this,Kp,null);yr(this,Nn,new Map);yr(this,cy,null);yr(this,dy,null);if(this.renderingIntent=kt,this.name=null,this.creator=null,dt!==null){this.name=dt.name,this.creator=dt.creator,vr(this,dy,dt.order);for(const $t of dt.groups)ar(this,Nn).set($t.id,new OptionalContentGroup(kt,$t));if(dt.baseState==="OFF")for(const $t of ar(this,Nn).values())$t._setVisible(INTERNAL,!1);for(const $t of dt.on)ar(this,Nn).get($t)._setVisible(INTERNAL,!0);for(const $t of dt.off)ar(this,Nn).get($t)._setVisible(INTERNAL,!1);vr(this,cy,this.getHash())}}isVisible(dt){if(ar(this,Nn).size===0)return!0;if(!dt)return info("Optional content group not defined."),!0;if(dt.type==="OCG")return ar(this,Nn).has(dt.id)?ar(this,Nn).get(dt.id).visible:(warn(`Optional content group not found: ${dt.id}`),!0);if(dt.type==="OCMD"){if(dt.expression)return Br(this,q1,f$).call(this,dt.expression);if(!dt.policy||dt.policy==="AnyOn"){for(const kt of dt.ids){if(!ar(this,Nn).has(kt))return warn(`Optional content group not found: ${kt}`),!0;if(ar(this,Nn).get(kt).visible)return!0}return!1}else if(dt.policy==="AllOn"){for(const kt of dt.ids){if(!ar(this,Nn).has(kt))return warn(`Optional content group not found: ${kt}`),!0;if(!ar(this,Nn).get(kt).visible)return!1}return!0}else if(dt.policy==="AnyOff"){for(const kt of dt.ids){if(!ar(this,Nn).has(kt))return warn(`Optional content group not found: ${kt}`),!0;if(!ar(this,Nn).get(kt).visible)return!0}return!1}else if(dt.policy==="AllOff"){for(const kt of dt.ids){if(!ar(this,Nn).has(kt))return warn(`Optional content group not found: ${kt}`),!0;if(ar(this,Nn).get(kt).visible)return!1}return!0}return warn(`Unknown optional content policy ${dt.policy}.`),!0}return warn(`Unknown group type ${dt.type}.`),!0}setVisibility(dt,kt=!0,$t=!0){var Dt;const Tt=ar(this,Nn).get(dt);if(!Tt){warn(`Optional content group not found: ${dt}`);return}if($t&&kt&&Tt.rbGroups.length)for(const Ft of Tt.rbGroups)for(const Ut of Ft)Ut!==dt&&((Dt=ar(this,Nn).get(Ut))==null||Dt._setVisible(INTERNAL,!1,!0));Tt._setVisible(INTERNAL,!!kt,!0),vr(this,Kp,null)}setOCGState({state:dt,preserveRB:kt}){let $t;for(const Tt of dt){switch(Tt){case"ON":case"OFF":case"Toggle":$t=Tt;continue}const Dt=ar(this,Nn).get(Tt);if(Dt)switch($t){case"ON":this.setVisibility(Tt,!0,kt);break;case"OFF":this.setVisibility(Tt,!1,kt);break;case"Toggle":this.setVisibility(Tt,!Dt.visible,kt);break}}vr(this,Kp,null)}get hasInitialVisibility(){return ar(this,cy)===null||this.getHash()===ar(this,cy)}getOrder(){return ar(this,Nn).size?ar(this,dy)?ar(this,dy).slice():[...ar(this,Nn).keys()]:null}getGroup(dt){return ar(this,Nn).get(dt)||null}getHash(){if(ar(this,Kp)!==null)return ar(this,Kp);const dt=new MurmurHash3_64;for(const[kt,$t]of ar(this,Nn))dt.update(`${kt}:${$t.visible}`);return vr(this,Kp,dt.hexdigest())}[Symbol.iterator](){return ar(this,Nn).entries()}}Kp=new WeakMap,Nn=new WeakMap,cy=new WeakMap,dy=new WeakMap,q1=new WeakSet,f$=function(dt){const kt=dt.length;if(kt<2)return!0;const $t=dt[0];for(let Tt=1;Tt<kt;Tt++){const Dt=dt[Tt];let Ft;if(Array.isArray(Dt))Ft=Br(this,q1,f$).call(this,Dt);else if(ar(this,Nn).has(Dt))Ft=ar(this,Nn).get(Dt).visible;else return warn(`Optional content group not found: ${Dt}`),!0;switch($t){case"And":if(!Ft)return!1;break;case"Or":if(Ft)return!0;break;case"Not":return!Ft;default:return!0}}return $t==="And"};class PDFDataTransportStream{constructor(dt,{disableRange:kt=!1,disableStream:$t=!1}){assert(dt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:Tt,initialData:Dt,progressiveDone:Ft,contentDispositionFilename:Ut}=dt;if(this._queuedChunks=[],this._progressiveDone=Ft,this._contentDispositionFilename=Ut,(Dt==null?void 0:Dt.length)>0){const Ht=Dt instanceof Uint8Array&&Dt.byteLength===Dt.buffer.byteLength?Dt.buffer:new Uint8Array(Dt).buffer;this._queuedChunks.push(Ht)}this._pdfDataRangeTransport=dt,this._isStreamingSupported=!$t,this._isRangeSupported=!kt,this._contentLength=Tt,this._fullRequestReader=null,this._rangeReaders=[],dt.addRangeListener((Ht,Kt)=>{this._onReceiveData({begin:Ht,chunk:Kt})}),dt.addProgressListener((Ht,Kt)=>{this._onProgress({loaded:Ht,total:Kt})}),dt.addProgressiveReadListener(Ht=>{this._onReceiveData({chunk:Ht})}),dt.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),dt.transportReady()}_onReceiveData({begin:dt,chunk:kt}){const $t=kt instanceof Uint8Array&&kt.byteLength===kt.buffer.byteLength?kt.buffer:new Uint8Array(kt).buffer;if(dt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue($t):this._queuedChunks.push($t);else{const Tt=this._rangeReaders.some(function(Dt){return Dt._begin!==dt?!1:(Dt._enqueue($t),!0)});assert(Tt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}_onProgress(dt){var kt,$t,Tt,Dt;dt.total===void 0?($t=(kt=this._rangeReaders[0])==null?void 0:kt.onProgress)==null||$t.call(kt,{loaded:dt.loaded}):(Dt=(Tt=this._fullRequestReader)==null?void 0:Tt.onProgress)==null||Dt.call(Tt,{loaded:dt.loaded,total:dt.total})}_onProgressiveDone(){var dt;(dt=this._fullRequestReader)==null||dt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(dt){const kt=this._rangeReaders.indexOf(dt);kt>=0&&this._rangeReaders.splice(kt,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const dt=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,dt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(dt,kt){if(kt<=this._progressiveDataLength)return null;const $t=new PDFDataTransportStreamRangeReader(this,dt,kt);return this._pdfDataRangeTransport.requestDataRange(dt,kt),this._rangeReaders.push($t),$t}cancelAllRequests(dt){var kt;(kt=this._fullRequestReader)==null||kt.cancel(dt);for(const $t of this._rangeReaders.slice(0))$t.cancel(dt);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(dt,kt,$t=!1,Tt=null){this._stream=dt,this._done=$t||!1,this._filename=isPdfFile(Tt)?Tt:null,this._queuedChunks=kt||[],this._loaded=0;for(const Dt of this._queuedChunks)this._loaded+=Dt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),dt._fullRequestReader=this,this.onProgress=null}_enqueue(dt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:dt,done:!1}):this._queuedChunks.push(dt),this._loaded+=dt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0;for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(dt,kt,$t){this._stream=dt,this._begin=kt,this._end=$t,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(dt){if(!this._done){if(this._requests.length===0)this._queuedChunk=dt;else{this._requests.shift().resolve({value:dt,done:!1});for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const kt=this._queuedChunk;return this._queuedChunk=null,{value:kt,done:!1}}if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0;for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(et){let dt=!0,kt=$t("filename\\*","i").exec(et);if(kt){kt=kt[1];let Yt=Ut(kt);return Yt=unescape(Yt),Yt=Ht(Yt),Yt=Kt(Yt),Dt(Yt)}if(kt=Ft(et),kt){const Yt=Kt(kt);return Dt(Yt)}if(kt=$t("filename","i").exec(et),kt){kt=kt[1];let Yt=Ut(kt);return Yt=Kt(Yt),Dt(Yt)}function $t(Yt,Jt){return new RegExp("(?:^|;)\\s*"+Yt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Jt)}function Tt(Yt,Jt){if(Yt){if(!/^[\x00-\xFF]+$/.test(Jt))return Jt;try{const Zt=new TextDecoder(Yt,{fatal:!0}),er=stringToBytes(Jt);Jt=Zt.decode(er),dt=!1}catch{}}return Jt}function Dt(Yt){return dt&&/[\x80-\xff]/.test(Yt)&&(Yt=Tt("utf-8",Yt),dt&&(Yt=Tt("iso-8859-1",Yt))),Yt}function Ft(Yt){const Jt=[];let Zt;const er=$t("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Zt=er.exec(Yt))!==null;){let[,sr,nr,ir]=Zt;if(sr=parseInt(sr,10),sr in Jt){if(sr===0)break;continue}Jt[sr]=[nr,ir]}const rr=[];for(let sr=0;sr<Jt.length&&sr in Jt;++sr){let[nr,ir]=Jt[sr];ir=Ut(ir),nr&&(ir=unescape(ir),sr===0&&(ir=Ht(ir))),rr.push(ir)}return rr.join("")}function Ut(Yt){if(Yt.startsWith('"')){const Jt=Yt.slice(1).split('\\"');for(let Zt=0;Zt<Jt.length;++Zt){const er=Jt[Zt].indexOf('"');er!==-1&&(Jt[Zt]=Jt[Zt].slice(0,er),Jt.length=Zt+1),Jt[Zt]=Jt[Zt].replaceAll(/\\(.)/g,"$1")}Yt=Jt.join('"')}return Yt}function Ht(Yt){const Jt=Yt.indexOf("'");if(Jt===-1)return Yt;const Zt=Yt.slice(0,Jt),rr=Yt.slice(Jt+1).replace(/^[^']*'/,"");return Tt(Zt,rr)}function Kt(Yt){return!Yt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Yt)?Yt:Yt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Jt,Zt,er,rr){if(er==="q"||er==="Q")return rr=rr.replaceAll("_"," "),rr=rr.replaceAll(/=([0-9a-fA-F]{2})/g,function(sr,nr){return String.fromCharCode(parseInt(nr,16))}),Tt(Zt,rr);try{rr=atob(rr)}catch{}return Tt(Zt,rr)})}return""}function createHeaders(et,dt){const kt=new Headers;if(!et||!dt||typeof dt!="object")return kt;for(const $t in dt){const Tt=dt[$t];Tt!==void 0&&kt.append($t,Tt)}return kt}function getResponseOrigin(et){var dt;return((dt=URL.parse(et))==null?void 0:dt.origin)??null}function validateRangeRequestCapabilities({responseHeaders:et,isHttp:dt,rangeChunkSize:kt,disableRange:$t}){const Tt={allowRangeRequests:!1,suggestedLength:void 0},Dt=parseInt(et.get("Content-Length"),10);return!Number.isInteger(Dt)||(Tt.suggestedLength=Dt,Dt<=2*kt)||$t||!dt||et.get("Accept-Ranges")!=="bytes"||(et.get("Content-Encoding")||"identity")!=="identity"||(Tt.allowRangeRequests=!0),Tt}function extractFilenameFromHeader(et){const dt=et.get("Content-Disposition");if(dt){let kt=getFilenameFromContentDispositionHeader(dt);if(kt.includes("%"))try{kt=decodeURIComponent(kt)}catch{}if(isPdfFile(kt))return kt}return null}function createResponseError(et,dt){return new ResponseException(`Unexpected server response (${et}) while retrieving PDF "${dt}".`,et,et===404||et===0&&dt.startsWith("file:"))}function validateResponseStatus(et){return et===200||et===206}function createFetchOptions(et,dt,kt){return{method:"GET",headers:et,signal:kt.signal,mode:"cors",credentials:dt?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(et){return et instanceof Uint8Array?et.buffer:et instanceof ArrayBuffer?et:(warn(`getArrayBuffer - unexpected data format: ${et}`),new Uint8Array(et).buffer)}class PDFFetchStream{constructor(dt){Es(this,"_responseOrigin",null);this.source=dt,this.isHttp=/^https?:/i.test(dt.url),this.headers=createHeaders(this.isHttp,dt.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(dt,kt){if(kt<=this._progressiveDataLength)return null;const $t=new PDFFetchStreamRangeReader(this,dt,kt);return this._rangeRequestReaders.push($t),$t}cancelAllRequests(dt){var kt;(kt=this._fullRequestReader)==null||kt.cancel(dt);for(const $t of this._rangeRequestReaders.slice(0))$t.cancel(dt)}}class PDFFetchStreamReader{constructor(dt){this._stream=dt,this._reader=null,this._loaded=0,this._filename=null;const kt=dt.source;this._withCredentials=kt.withCredentials||!1,this._contentLength=kt.length,this._headersCapability=Promise.withResolvers(),this._disableRange=kt.disableRange||!1,this._rangeChunkSize=kt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!kt.disableStream,this._isRangeSupported=!kt.disableRange;const $t=new Headers(dt.headers),Tt=kt.url;fetch(Tt,createFetchOptions($t,this._withCredentials,this._abortController)).then(Dt=>{if(dt._responseOrigin=getResponseOrigin(Dt.url),!validateResponseStatus(Dt.status))throw createResponseError(Dt.status,Tt);this._reader=Dt.body.getReader(),this._headersCapability.resolve();const Ft=Dt.headers,{allowRangeRequests:Ut,suggestedLength:Ht}=validateRangeRequestCapabilities({responseHeaders:Ft,isHttp:dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ut,this._contentLength=Ht||this._contentLength,this._filename=extractFilenameFromHeader(Ft),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var $t;await this._headersCapability.promise;const{value:dt,done:kt}=await this._reader.read();return kt?{value:dt,done:kt}:(this._loaded+=dt.byteLength,($t=this.onProgress)==null||$t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(dt),done:!1})}cancel(dt){var kt;(kt=this._reader)==null||kt.cancel(dt),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(dt,kt,$t){this._stream=dt,this._reader=null,this._loaded=0;const Tt=dt.source;this._withCredentials=Tt.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!Tt.disableStream,this._abortController=new AbortController;const Dt=new Headers(dt.headers);Dt.append("Range",`bytes=${kt}-${$t-1}`);const Ft=Tt.url;fetch(Ft,createFetchOptions(Dt,this._withCredentials,this._abortController)).then(Ut=>{const Ht=getResponseOrigin(Ut.url);if(Ht!==dt._responseOrigin)throw new Error(`Expected range response-origin "${Ht}" to match "${dt._responseOrigin}".`);if(!validateResponseStatus(Ut.status))throw createResponseError(Ut.status,Ft);this._readCapability.resolve(),this._reader=Ut.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var $t;await this._readCapability.promise;const{value:dt,done:kt}=await this._reader.read();return kt?{value:dt,done:kt}:(this._loaded+=dt.byteLength,($t=this.onProgress)==null||$t.call(this,{loaded:this._loaded}),{value:getArrayBuffer(dt),done:!1})}cancel(dt){var kt;(kt=this._reader)==null||kt.cancel(dt),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(et){const dt=et.response;return typeof dt!="string"?dt:stringToBytes(dt).buffer}class NetworkManager{constructor({url:dt,httpHeaders:kt,withCredentials:$t}){Es(this,"_responseOrigin",null);this.url=dt,this.isHttp=/^https?:/i.test(dt),this.headers=createHeaders(this.isHttp,kt),this.withCredentials=$t||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(dt){const kt=new XMLHttpRequest,$t=this.currXhrId++,Tt=this.pendingRequests[$t]={xhr:kt};kt.open("GET",this.url),kt.withCredentials=this.withCredentials;for(const[Dt,Ft]of this.headers)kt.setRequestHeader(Dt,Ft);return this.isHttp&&"begin"in dt&&"end"in dt?(kt.setRequestHeader("Range",`bytes=${dt.begin}-${dt.end-1}`),Tt.expectedStatus=PARTIAL_CONTENT_RESPONSE):Tt.expectedStatus=OK_RESPONSE,kt.responseType="arraybuffer",assert(dt.onError,"Expected `onError` callback to be provided."),kt.onerror=()=>{dt.onError(kt.status)},kt.onreadystatechange=this.onStateChange.bind(this,$t),kt.onprogress=this.onProgress.bind(this,$t),Tt.onHeadersReceived=dt.onHeadersReceived,Tt.onDone=dt.onDone,Tt.onError=dt.onError,Tt.onProgress=dt.onProgress,kt.send(null),$t}onProgress(dt,kt){var Tt;const $t=this.pendingRequests[dt];$t&&((Tt=$t.onProgress)==null||Tt.call($t,kt))}onStateChange(dt,kt){const $t=this.pendingRequests[dt];if(!$t)return;const Tt=$t.xhr;if(Tt.readyState>=2&&$t.onHeadersReceived&&($t.onHeadersReceived(),delete $t.onHeadersReceived),Tt.readyState!==4||!(dt in this.pendingRequests))return;if(delete this.pendingRequests[dt],Tt.status===0&&this.isHttp){$t.onError(Tt.status);return}const Dt=Tt.status||OK_RESPONSE;if(!(Dt===OK_RESPONSE&&$t.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&Dt!==$t.expectedStatus){$t.onError(Tt.status);return}const Ut=network_getArrayBuffer(Tt);if(Dt===PARTIAL_CONTENT_RESPONSE){const Ht=Tt.getResponseHeader("Content-Range"),Kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ht);Kt?$t.onDone({begin:parseInt(Kt[1],10),chunk:Ut}):(warn('Missing or invalid "Content-Range" header.'),$t.onError(0))}else Ut?$t.onDone({begin:0,chunk:Ut}):$t.onError(Tt.status)}getRequestXhr(dt){return this.pendingRequests[dt].xhr}isPendingRequest(dt){return dt in this.pendingRequests}abortRequest(dt){const kt=this.pendingRequests[dt].xhr;delete this.pendingRequests[dt],kt.abort()}}class PDFNetworkStream{constructor(dt){this._source=dt,this._manager=new NetworkManager(dt),this._rangeChunkSize=dt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(dt){const kt=this._rangeRequestReaders.indexOf(dt);kt>=0&&this._rangeRequestReaders.splice(kt,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(dt,kt){const $t=new PDFNetworkStreamRangeRequestReader(this._manager,dt,kt);return $t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push($t),$t}cancelAllRequests(dt){var kt;(kt=this._fullRequestReader)==null||kt.cancel(dt);for(const $t of this._rangeRequestReaders.slice(0))$t.cancel(dt)}}class PDFNetworkStreamFullRequestReader{constructor(dt,kt){this._manager=dt,this._url=kt.url,this._fullRequestId=dt.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=kt.disableRange||!1,this._contentLength=kt.length,this._rangeChunkSize=kt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const dt=this._fullRequestId,kt=this._manager.getRequestXhr(dt);this._manager._responseOrigin=getResponseOrigin(kt.responseURL);const $t=kt.getAllResponseHeaders(),Tt=new Headers($t?$t.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(Ut=>{const[Ht,...Kt]=Ut.split(": ");return[Ht,Kt.join(": ")]}):[]),{allowRangeRequests:Dt,suggestedLength:Ft}=validateRangeRequestCapabilities({responseHeaders:Tt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Dt&&(this._isRangeSupported=!0),this._contentLength=Ft||this._contentLength,this._filename=extractFilenameFromHeader(Tt),this._isRangeSupported&&this._manager.abortRequest(dt),this._headersCapability.resolve()}_onDone(dt){if(dt&&(this._requests.length>0?this._requests.shift().resolve({value:dt.chunk,done:!1}):this._cachedChunks.push(dt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(dt){this._storedError=createResponseError(dt,this._url),this._headersCapability.reject(this._storedError);for(const kt of this._requests)kt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(dt){var kt;(kt=this.onProgress)==null||kt.call(this,{loaded:dt.loaded,total:dt.lengthComputable?dt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0,this._headersCapability.reject(dt);for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(dt,kt,$t){this._manager=dt,this._url=dt.url,this._requestId=dt.request({begin:kt,end:$t,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var kt;const dt=getResponseOrigin((kt=this._manager.getRequestXhr(this._requestId))==null?void 0:kt.responseURL);dt!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${dt}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var dt;(dt=this.onClosed)==null||dt.call(this,this)}_onDone(dt){const kt=dt.chunk;this._requests.length>0?this._requests.shift().resolve({value:kt,done:!1}):this._queuedChunk=kt,this._done=!0;for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(dt){this._storedError??(this._storedError=createResponseError(dt,this._url));for(const kt of this._requests)kt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(dt){var kt;this.isStreamingSupported||(kt=this.onProgress)==null||kt.call(this,{loaded:dt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const kt=this._queuedChunk;return this._queuedChunk=null,{value:kt,done:!1}}if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0;for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(et){if(urlRegex.test(et))return new URL(et);const dt=process.getBuiltinModule("url");return new URL(dt.pathToFileURL(et))}class PDFNodeStream{constructor(dt){this.source=dt,this.url=parseUrlOrPath(dt.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(dt,kt){if(kt<=this._progressiveDataLength)return null;const $t=new PDFNodeStreamFsRangeReader(this,dt,kt);return this._rangeRequestReaders.push($t),$t}cancelAllRequests(dt){var kt;(kt=this._fullRequestReader)==null||kt.cancel(dt);for(const $t of this._rangeRequestReaders.slice(0))$t.cancel(dt)}}class PDFNodeStreamFsFullReader{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const kt=dt.source;this._contentLength=kt.length,this._loaded=0,this._filename=null,this._disableRange=kt.disableRange||!1,this._rangeChunkSize=kt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!kt.disableStream,this._isRangeSupported=!kt.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const $t=process.getBuiltinModule("fs");$t.promises.lstat(this._url).then(Tt=>{this._contentLength=Tt.size,this._setReadableStream($t.createReadStream(this._url)),this._headersCapability.resolve()},Tt=>{Tt.code==="ENOENT"&&(Tt=createResponseError(0,this._url.href)),this._storedError=Tt,this._headersCapability.reject(Tt)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var $t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=dt.length,($t=this.onProgress)==null||$t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",kt=>{this._error(kt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(dt,kt,$t){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const Tt=dt.source;this._isStreamingSupported=!Tt.disableStream;const Dt=process.getBuiltinModule("fs");this._setReadableStream(Dt.createReadStream(this._url,{start:kt,end:$t-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var $t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=dt.length,($t=this.onProgress)==null||$t.call(this,{loaded:this._loaded}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",kt=>{this._error(kt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var xl,K1,m$;class PDFObjects{constructor(){yr(this,K1);yr(this,xl,Object.create(null))}get(dt,kt=null){if(kt){const Tt=Br(this,K1,m$).call(this,dt);return Tt.promise.then(()=>kt(Tt.data)),null}const $t=ar(this,xl)[dt];if(!$t||$t.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${dt}.`);return $t.data}has(dt){const kt=ar(this,xl)[dt];return!!kt&&kt.data!==INITIAL_DATA}delete(dt){const kt=ar(this,xl)[dt];return!kt||kt.data===INITIAL_DATA?!1:(delete ar(this,xl)[dt],!0)}resolve(dt,kt=null){const $t=Br(this,K1,m$).call(this,dt);$t.data=kt,$t.resolve()}clear(){var dt;for(const kt in ar(this,xl)){const{data:$t}=ar(this,xl)[kt];(dt=$t==null?void 0:$t.bitmap)==null||dt.close()}vr(this,xl,Object.create(null))}*[Symbol.iterator](){for(const dt in ar(this,xl)){const{data:kt}=ar(this,xl)[dt];kt!==INITIAL_DATA&&(yield[dt,kt])}}}xl=new WeakMap,K1=new WeakSet,m$=function(dt){var kt;return(kt=ar(this,xl))[dt]||(kt[dt]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var rS,Yp,Ho,Y1,X1,bx,tp,Q1,J1,yx,uy,hy,Xp,py,Z1,fy,vx,eE,tE,Wn,my,Ex,rE,Qp,xy,DR,US,FR,HS,sE,x$,gy,_w,nE,g$,LR,GS,OR,qS;let TextLayer$1=(Wn=class{constructor({textContentSource:dt,container:kt,viewport:$t}){yr(this,DR);yr(this,FR);yr(this,sE);yr(this,Yp,Promise.withResolvers());yr(this,Ho,null);yr(this,Y1,!1);yr(this,X1,!!((rS=globalThis.FontInspector)!=null&&rS.enabled));yr(this,bx,null);yr(this,tp,null);yr(this,Q1,0);yr(this,J1,0);yr(this,yx,null);yr(this,uy,null);yr(this,hy,0);yr(this,Xp,0);yr(this,py,Object.create(null));yr(this,Z1,[]);yr(this,fy,null);yr(this,vx,[]);yr(this,eE,new WeakMap);yr(this,tE,null);var Ht;if(dt instanceof ReadableStream)vr(this,fy,dt);else if(typeof dt=="object")vr(this,fy,new ReadableStream({start(Kt){Kt.enqueue(dt),Kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');vr(this,Ho,vr(this,uy,kt)),vr(this,Xp,$t.scale*OutputScale.pixelRatio),vr(this,hy,$t.rotation),vr(this,tp,{div:null,properties:null,ctx:null});const{pageWidth:Tt,pageHeight:Dt,pageX:Ft,pageY:Ut}=$t.rawDims;vr(this,tE,[1,0,0,-1,-Ft,Ut+Dt]),vr(this,J1,Tt),vr(this,Q1,Dt),Br(Ht=Wn,LR,GS).call(Ht),setLayerDimensions(kt,$t),ar(this,Yp).promise.finally(()=>{ar(Wn,xy).delete(this),vr(this,tp,null),vr(this,py,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:dt,isFirefox:kt}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${dt&&kt?"Calibri, ":""}sans-serif`],["monospace",`${dt&&kt?"Lucida Console, ":""}monospace`]]))}render(){const dt=()=>{ar(this,yx).read().then(({value:kt,done:$t})=>{if($t){ar(this,Yp).resolve();return}ar(this,bx)??vr(this,bx,kt.lang),Object.assign(ar(this,py),kt.styles),Br(this,DR,US).call(this,kt.items),dt()},ar(this,Yp).reject)};return vr(this,yx,ar(this,fy).getReader()),ar(Wn,xy).add(this),dt(),ar(this,Yp).promise}update({viewport:dt,onBefore:kt=null}){var Dt;const $t=dt.scale*OutputScale.pixelRatio,Tt=dt.rotation;if(Tt!==ar(this,hy)&&(kt==null||kt(),vr(this,hy,Tt),setLayerDimensions(ar(this,uy),{rotation:Tt})),$t!==ar(this,Xp)){kt==null||kt(),vr(this,Xp,$t);const Ft={div:null,properties:null,ctx:Br(Dt=Wn,gy,_w).call(Dt,ar(this,bx))};for(const Ut of ar(this,vx))Ft.properties=ar(this,eE).get(Ut),Ft.div=Ut,Br(this,sE,x$).call(this,Ft)}}cancel(){var kt;const dt=new AbortException("TextLayer task cancelled.");(kt=ar(this,yx))==null||kt.cancel(dt).catch(()=>{}),vr(this,yx,null),ar(this,Yp).reject(dt)}get textDivs(){return ar(this,vx)}get textContentItemsStr(){return ar(this,Z1)}static cleanup(){if(!(ar(this,xy).size>0)){ar(this,my).clear();for(const{canvas:dt}of ar(this,Ex).values())dt.remove();ar(this,Ex).clear()}}},Yp=new WeakMap,Ho=new WeakMap,Y1=new WeakMap,X1=new WeakMap,bx=new WeakMap,tp=new WeakMap,Q1=new WeakMap,J1=new WeakMap,yx=new WeakMap,uy=new WeakMap,hy=new WeakMap,Xp=new WeakMap,py=new WeakMap,Z1=new WeakMap,fy=new WeakMap,vx=new WeakMap,eE=new WeakMap,tE=new WeakMap,my=new WeakMap,Ex=new WeakMap,rE=new WeakMap,Qp=new WeakMap,xy=new WeakMap,DR=new WeakSet,US=function(dt){var Tt,Dt;if(ar(this,Y1))return;(Dt=ar(this,tp)).ctx??(Dt.ctx=Br(Tt=Wn,gy,_w).call(Tt,ar(this,bx)));const kt=ar(this,vx),$t=ar(this,Z1);for(const Ft of dt){if(kt.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),vr(this,Y1,!0);return}if(Ft.str===void 0){if(Ft.type==="beginMarkedContentProps"||Ft.type==="beginMarkedContent"){const Ut=ar(this,Ho);vr(this,Ho,document.createElement("span")),ar(this,Ho).classList.add("markedContent"),Ft.id&&ar(this,Ho).setAttribute("id",`${Ft.id}`),Ut.append(ar(this,Ho))}else Ft.type==="endMarkedContent"&&vr(this,Ho,ar(this,Ho).parentNode);continue}$t.push(Ft.str),Br(this,FR,HS).call(this,Ft)}},FR=new WeakSet,HS=function(dt){var sr;const kt=document.createElement("span"),$t={angle:0,canvasWidth:0,hasText:dt.str!=="",hasEOL:dt.hasEOL,fontSize:0};ar(this,vx).push(kt);const Tt=Util.transform(ar(this,tE),dt.transform);let Dt=Math.atan2(Tt[1],Tt[0]);const Ft=ar(this,py)[dt.fontName];Ft.vertical&&(Dt+=Math.PI/2);let Ut=ar(this,X1)&&Ft.fontSubstitution||Ft.fontFamily;Ut=Wn.fontFamilyMap.get(Ut)||Ut;const Ht=Math.hypot(Tt[2],Tt[3]),Kt=Ht*Br(sr=Wn,OR,qS).call(sr,Ut,Ft,ar(this,bx));let Yt,Jt;Dt===0?(Yt=Tt[4],Jt=Tt[5]-Kt):(Yt=Tt[4]+Kt*Math.sin(Dt),Jt=Tt[5]-Kt*Math.cos(Dt));const Zt="calc(var(--total-scale-factor) *",er=kt.style;ar(this,Ho)===ar(this,uy)?(er.left=`${(100*Yt/ar(this,J1)).toFixed(2)}%`,er.top=`${(100*Jt/ar(this,Q1)).toFixed(2)}%`):(er.left=`${Zt}${Yt.toFixed(2)}px)`,er.top=`${Zt}${Jt.toFixed(2)}px)`),er.fontSize=`${Zt}${(ar(Wn,Qp)*Ht).toFixed(2)}px)`,er.fontFamily=Ut,$t.fontSize=Ht,kt.setAttribute("role","presentation"),kt.textContent=dt.str,kt.dir=dt.dir,ar(this,X1)&&(kt.dataset.fontName=Ft.fontSubstitutionLoadedName||dt.fontName),Dt!==0&&($t.angle=Dt*(180/Math.PI));let rr=!1;if(dt.str.length>1)rr=!0;else if(dt.str!==" "&&dt.transform[0]!==dt.transform[3]){const nr=Math.abs(dt.transform[0]),ir=Math.abs(dt.transform[3]);nr!==ir&&Math.max(nr,ir)/Math.min(nr,ir)>1.5&&(rr=!0)}if(rr&&($t.canvasWidth=Ft.vertical?dt.height:dt.width),ar(this,eE).set(kt,$t),ar(this,tp).div=kt,ar(this,tp).properties=$t,Br(this,sE,x$).call(this,ar(this,tp)),$t.hasText&&ar(this,Ho).append(kt),$t.hasEOL){const nr=document.createElement("br");nr.setAttribute("role","presentation"),ar(this,Ho).append(nr)}},sE=new WeakSet,x$=function(dt){var Ut;const{div:kt,properties:$t,ctx:Tt}=dt,{style:Dt}=kt;let Ft="";if(ar(Wn,Qp)>1&&(Ft=`scale(${1/ar(Wn,Qp)})`),$t.canvasWidth!==0&&$t.hasText){const{fontFamily:Ht}=Dt,{canvasWidth:Kt,fontSize:Yt}=$t;Br(Ut=Wn,nE,g$).call(Ut,Tt,Yt*ar(this,Xp),Ht);const{width:Jt}=Tt.measureText(kt.textContent);Jt>0&&(Ft=`scaleX(${Kt*ar(this,Xp)/Jt}) ${Ft}`)}$t.angle!==0&&(Ft=`rotate(${$t.angle}deg) ${Ft}`),Ft.length>0&&(Dt.transform=Ft)},gy=new WeakSet,_w=function(dt=null){let kt=ar(this,Ex).get(dt||(dt=""));if(!kt){const $t=document.createElement("canvas");$t.className="hiddenCanvasElement",$t.lang=dt,document.body.append($t),kt=$t.getContext("2d",{alpha:!1,willReadFrequently:!0}),ar(this,Ex).set(dt,kt),ar(this,rE).set(kt,{size:0,family:""})}return kt},nE=new WeakSet,g$=function(dt,kt,$t){const Tt=ar(this,rE).get(dt);kt===Tt.size&&$t===Tt.family||(dt.font=`${kt}px ${$t}`,Tt.size=kt,Tt.family=$t)},LR=new WeakSet,GS=function(){if(ar(this,Qp)!==null)return;const dt=document.createElement("div");dt.style.opacity=0,dt.style.lineHeight=1,dt.style.fontSize="1px",dt.style.position="absolute",dt.textContent="X",document.body.append(dt),vr(this,Qp,dt.getBoundingClientRect().height),dt.remove()},OR=new WeakSet,qS=function(dt,kt,$t){const Tt=ar(this,my).get(dt);if(Tt)return Tt;const Dt=Br(this,gy,_w).call(this,$t);Dt.canvas.width=Dt.canvas.height=DEFAULT_FONT_SIZE,Br(this,nE,g$).call(this,Dt,DEFAULT_FONT_SIZE,dt);const Ft=Dt.measureText(""),Ut=Ft.fontBoundingBoxAscent,Ht=Math.abs(Ft.fontBoundingBoxDescent);Dt.canvas.width=Dt.canvas.height=0;let Kt=.8;return Ut?Kt=Ut/(Ut+Ht):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),kt.ascent?Kt=kt.ascent:kt.descent&&(Kt=1+kt.descent)),ar(this,my).set(dt,Kt),Kt},yr(Wn,gy),yr(Wn,nE),yr(Wn,LR),yr(Wn,OR),yr(Wn,my,new Map),yr(Wn,Ex,new Map),yr(Wn,rE,new WeakMap),yr(Wn,Qp,null),yr(Wn,xy,new Set),Wn);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(et={}){typeof et=="string"||et instanceof URL?et={url:et}:(et instanceof ArrayBuffer||ArrayBuffer.isView(et))&&(et={data:et});const dt=new PDFDocumentLoadingTask,{docId:kt}=dt,$t=et.url?getUrlProp(et.url):null,Tt=et.data?getDataProp(et.data):null,Dt=et.httpHeaders||null,Ft=et.withCredentials===!0,Ut=et.password??null,Ht=et.range instanceof PDFDataRangeTransport$1?et.range:null,Kt=Number.isInteger(et.rangeChunkSize)&&et.rangeChunkSize>0?et.rangeChunkSize:2**16;let Yt=et.worker instanceof PDFWorker?et.worker:null;const Jt=et.verbosity,Zt=typeof et.docBaseUrl=="string"&&!isDataScheme(et.docBaseUrl)?et.docBaseUrl:null,er=getFactoryUrlProp(et.cMapUrl),rr=et.cMapPacked!==!1,sr=et.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),nr=getFactoryUrlProp(et.iccUrl),ir=getFactoryUrlProp(et.standardFontDataUrl),lr=et.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),or=getFactoryUrlProp(et.wasmUrl),cr=et.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),dr=et.stopAtErrors!==!0,ur=Number.isInteger(et.maxImageSize)&&et.maxImageSize>-1?et.maxImageSize:-1,pr=et.isEvalSupported!==!1,mr=typeof et.isOffscreenCanvasSupported=="boolean"?et.isOffscreenCanvasSupported:!isNodeJS,jr=typeof et.isImageDecoderSupported=="boolean"?et.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),Rr=Number.isInteger(et.canvasMaxAreaInBytes)?et.canvasMaxAreaInBytes:-1,br=typeof et.disableFontFace=="boolean"?et.disableFontFace:isNodeJS,_r=et.fontExtraProperties===!0,Mr=et.enableXfa===!0,Pr=et.ownerDocument||globalThis.document,Or=et.disableRange===!0,kr=et.disableStream===!0,Tr=et.disableAutoFetch===!0,xr=et.pdfBug===!0,wr=et.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),zr=et.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),Hr=et.enableHWA===!0,Yr=et.useWasm!==!1,rs=Ht?Ht.length:et.length??NaN,as=typeof et.useSystemFonts=="boolean"?et.useSystemFonts:!isNodeJS&&!br,es=typeof et.useWorkerFetch=="boolean"?et.useWorkerFetch:!!(sr===DOMCMapReaderFactory&&lr===DOMStandardFontDataFactory&&cr===DOMWasmFactory&&er&&ir&&or&&isValidFetchUrl(er,document.baseURI)&&isValidFetchUrl(ir,document.baseURI)&&isValidFetchUrl(or,document.baseURI)),Xr=null;setVerbosityLevel(Jt);const Wr={canvasFactory:new wr({ownerDocument:Pr,enableHWA:Hr}),filterFactory:new zr({docId:kt,ownerDocument:Pr}),cMapReaderFactory:es?null:new sr({baseUrl:er,isCompressed:rr}),standardFontDataFactory:es?null:new lr({baseUrl:ir}),wasmFactory:es?null:new cr({baseUrl:or})};Yt||(Yt=PDFWorker.create({verbosity:Jt,port:GlobalWorkerOptions.workerPort}),dt._worker=Yt);const cs={docId:kt,apiVersion:"5.4.296",data:Tt,password:Ut,disableAutoFetch:Tr,rangeChunkSize:Kt,length:rs,docBaseUrl:Zt,enableXfa:Mr,evaluatorOptions:{maxImageSize:ur,disableFontFace:br,ignoreErrors:dr,isEvalSupported:pr,isOffscreenCanvasSupported:mr,isImageDecoderSupported:jr,canvasMaxAreaInBytes:Rr,fontExtraProperties:_r,useSystemFonts:as,useWasm:Yr,useWorkerFetch:es,cMapUrl:er,iccUrl:nr,standardFontDataUrl:ir,wasmUrl:or}},ns={ownerDocument:Pr,pdfBug:xr,styleElement:Xr,loadingParams:{disableAutoFetch:Tr,enableXfa:Mr}};return Yt.promise.then(function(){if(dt.destroyed)throw new Error("Loading aborted");if(Yt.destroyed)throw new Error("Worker was destroyed");const us=Yt.messageHandler.sendWithPromise("GetDocRequest",cs,Tt?[Tt.buffer]:null);let fs;if(Ht)fs=new PDFDataTransportStream(Ht,{disableRange:Or,disableStream:kr});else if(!Tt){if(!$t)throw new Error("getDocument - no `url` parameter provided.");const ss=isValidFetchUrl($t)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;fs=new ss({url:$t,length:rs,httpHeaders:Dt,withCredentials:Ft,rangeChunkSize:Kt,disableRange:Or,disableStream:kr})}return us.then(ss=>{if(dt.destroyed)throw new Error("Loading aborted");if(Yt.destroyed)throw new Error("Worker was destroyed");const ps=new MessageHandler(kt,ss,Yt.port),ls=new WorkerTransport(ps,dt,fs,ns,Wr,Hr);dt._transport=ls,ps.send("Ready",null)})}).catch(dt._capability.reject),dt}var BR;const VR=class VR{constructor(){Es(this,"_capability",Promise.withResolvers());Es(this,"_transport",null);Es(this,"_worker",null);Es(this,"docId",`d${xa(VR,BR)._++}`);Es(this,"destroyed",!1);Es(this,"onPassword",null);Es(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var dt,kt,$t,Tt;this.destroyed=!0;try{(dt=this._worker)!=null&&dt.port&&(this._worker._pendingDestroy=!0),await((kt=this._transport)==null?void 0:kt.destroy())}catch(Dt){throw($t=this._worker)!=null&&$t.port&&delete this._worker._pendingDestroy,Dt}this._transport=null,(Tt=this._worker)==null||Tt.destroy(),this._worker=null}async getData(){return this._transport.getData()}};BR=new WeakMap,yr(VR,BR,0);let PDFDocumentLoadingTask=VR;var jx,iE,aE,oE,lE,sS;let PDFDataRangeTransport$1=(sS=class{constructor(dt,kt,$t=!1,Tt=null){yr(this,jx,Promise.withResolvers());yr(this,iE,[]);yr(this,aE,[]);yr(this,oE,[]);yr(this,lE,[]);this.length=dt,this.initialData=kt,this.progressiveDone=$t,this.contentDispositionFilename=Tt}addRangeListener(dt){ar(this,lE).push(dt)}addProgressListener(dt){ar(this,oE).push(dt)}addProgressiveReadListener(dt){ar(this,aE).push(dt)}addProgressiveDoneListener(dt){ar(this,iE).push(dt)}onDataRange(dt,kt){for(const $t of ar(this,lE))$t(dt,kt)}onDataProgress(dt,kt){ar(this,jx).promise.then(()=>{for(const $t of ar(this,oE))$t(dt,kt)})}onDataProgressiveRead(dt){ar(this,jx).promise.then(()=>{for(const kt of ar(this,aE))kt(dt)})}onDataProgressiveDone(){ar(this,jx).promise.then(()=>{for(const dt of ar(this,iE))dt()})}transportReady(){ar(this,jx).resolve()}requestDataRange(dt,kt){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},jx=new WeakMap,iE=new WeakMap,aE=new WeakMap,oE=new WeakMap,lE=new WeakMap,sS);class PDFDocumentProxy{constructor(dt,kt){this._pdfInfo=dt,this._transport=kt}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(dt){return this._transport.getPage(dt)}getPageIndex(dt){return this._transport.getPageIndex(dt)}getDestinations(){return this._transport.getDestinations()}getDestination(dt){return this._transport.getDestination(dt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(dt,kt){return this._transport.getAnnotationsByType(dt,kt)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:dt="display"}={}){const{renderingIntent:kt}=this._transport.getRenderingIntent(dt);return this._transport.getOptionalContentConfig(kt)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(dt=!1){return this._transport.startCleanup(dt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(dt){return this._transport.cachedPageNumber(dt)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var rp,wx,Pv;class PDFPageProxy{constructor(dt,kt,$t,Tt=!1){yr(this,wx);yr(this,rp,!1);this._pageIndex=dt,this._pageInfo=kt,this._transport=$t,this._stats=Tt?new StatTimer:null,this._pdfBug=Tt,this.commonObjs=$t.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:dt,rotation:kt=this.rotate,offsetX:$t=0,offsetY:Tt=0,dontFlip:Dt=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:dt,rotation:kt,offsetX:$t,offsetY:Tt,dontFlip:Dt})}getAnnotations({intent:dt="display"}={}){const{renderingIntent:kt}=this._transport.getRenderingIntent(dt);return this._transport.getAnnotations(this._pageIndex,kt)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var dt;return((dt=this._transport._htmlForXfa)==null?void 0:dt.children[this._pageIndex])||null}render({canvasContext:dt,canvas:kt=dt.canvas,viewport:$t,intent:Tt="display",annotationMode:Dt=AnnotationMode.ENABLE,transform:Ft=null,background:Ut=null,optionalContentConfigPromise:Ht=null,annotationCanvasMap:Kt=null,pageColors:Yt=null,printAnnotationStorage:Jt=null,isEditing:Zt=!1,recordOperations:er=!1,operationsFilter:rr=null}){var jr,Rr,br;(jr=this._stats)==null||jr.time("Overall");const sr=this._transport.getRenderingIntent(Tt,Dt,Jt,Zt),{renderingIntent:nr,cacheKey:ir}=sr;vr(this,rp,!1),Ht||(Ht=this._transport.getOptionalContentConfig(nr));let lr=this._intentStates.get(ir);lr||(lr=Object.create(null),this._intentStates.set(ir,lr)),lr.streamReaderCancelTimeout&&(clearTimeout(lr.streamReaderCancelTimeout),lr.streamReaderCancelTimeout=null);const or=!!(nr&RenderingIntentFlag.PRINT);lr.displayReadyCapability||(lr.displayReadyCapability=Promise.withResolvers(),lr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Rr=this._stats)==null||Rr.time("Page Request"),this._pumpOperatorList(sr));const cr=!!(this._pdfBug&&((br=globalThis.StepperManager)!=null&&br.enabled)),dr=!this.recordedBBoxes&&(er||cr),ur=_r=>{var Mr,Pr;if(lr.renderTasks.delete(pr),dr){const Or=(Mr=pr.gfx)==null?void 0:Mr.dependencyTracker.take();Or&&(pr.stepper&&pr.stepper.setOperatorBBoxes(Or,pr.gfx.dependencyTracker.takeDebugMetadata()),er&&(this.recordedBBoxes=Or))}or&&vr(this,rp,!0),Br(this,wx,Pv).call(this),_r?(pr.capability.reject(_r),this._abortOperatorList({intentState:lr,reason:_r instanceof Error?_r:new Error(_r)})):pr.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Pr=globalThis.Stats)!=null&&Pr.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},pr=new InternalRenderTask({callback:ur,params:{canvas:kt,canvasContext:dt,dependencyTracker:dr?new CanvasDependencyTracker(kt,lr.operatorList.length,cr):null,viewport:$t,transform:Ft,background:Ut},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Kt,operatorList:lr.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!or,pdfBug:this._pdfBug,pageColors:Yt,enableHWA:this._transport.enableHWA,operationsFilter:rr});(lr.renderTasks||(lr.renderTasks=new Set)).add(pr);const mr=pr.task;return Promise.all([lr.displayReadyCapability.promise,Ht]).then(([_r,Mr])=>{var Pr;if(this.destroyed){ur();return}if((Pr=this._stats)==null||Pr.time("Rendering"),!(Mr.renderingIntent&nr))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");pr.initializeGraphics({transparency:_r,optionalContentConfig:Mr}),pr.operatorListChanged()}).catch(ur),mr}getOperatorList({intent:dt="display",annotationMode:kt=AnnotationMode.ENABLE,printAnnotationStorage:$t=null,isEditing:Tt=!1}={}){var Kt;function Dt(){Ut.operatorList.lastChunk&&(Ut.opListReadCapability.resolve(Ut.operatorList),Ut.renderTasks.delete(Ht))}const Ft=this._transport.getRenderingIntent(dt,kt,$t,Tt,!0);let Ut=this._intentStates.get(Ft.cacheKey);Ut||(Ut=Object.create(null),this._intentStates.set(Ft.cacheKey,Ut));let Ht;return Ut.opListReadCapability||(Ht=Object.create(null),Ht.operatorListChanged=Dt,Ut.opListReadCapability=Promise.withResolvers(),(Ut.renderTasks||(Ut.renderTasks=new Set)).add(Ht),Ut.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Kt=this._stats)==null||Kt.time("Page Request"),this._pumpOperatorList(Ft)),Ut.opListReadCapability.promise}streamTextContent({includeMarkedContent:dt=!1,disableNormalization:kt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:dt===!0,disableNormalization:kt===!0},{highWaterMark:100,size(Tt){return Tt.items.length}})}getTextContent(dt={}){if(this._transport._htmlForXfa)return this.getXfa().then($t=>XfaText.textContent($t));const kt=this.streamTextContent(dt);return new Promise(function($t,Tt){function Dt(){Ft.read().then(function({value:Ht,done:Kt}){if(Kt){$t(Ut);return}Ut.lang??(Ut.lang=Ht.lang),Object.assign(Ut.styles,Ht.styles),Ut.items.push(...Ht.items),Dt()},Tt)}const Ft=kt.getReader(),Ut={items:[],styles:Object.create(null),lang:null};Dt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const dt=[];for(const kt of this._intentStates.values())if(this._abortOperatorList({intentState:kt,reason:new Error("Page was destroyed."),force:!0}),!kt.opListReadCapability)for(const $t of kt.renderTasks)dt.push($t.completed),$t.cancel();return this.objs.clear(),vr(this,rp,!1),Promise.all(dt)}cleanup(dt=!1){vr(this,rp,!0);const kt=Br(this,wx,Pv).call(this);return dt&&kt&&this._stats&&(this._stats=new StatTimer),kt}_startRenderPage(dt,kt){var Tt,Dt;const $t=this._intentStates.get(kt);$t&&((Tt=this._stats)==null||Tt.timeEnd("Page Request"),(Dt=$t.displayReadyCapability)==null||Dt.resolve(dt))}_renderPageChunk(dt,kt){for(let $t=0,Tt=dt.length;$t<Tt;$t++)kt.operatorList.fnArray.push(dt.fnArray[$t]),kt.operatorList.argsArray.push(dt.argsArray[$t]);kt.operatorList.lastChunk=dt.lastChunk,kt.operatorList.separateAnnots=dt.separateAnnots;for(const $t of kt.renderTasks)$t.operatorListChanged();dt.lastChunk&&Br(this,wx,Pv).call(this)}_pumpOperatorList({renderingIntent:dt,cacheKey:kt,annotationStorageSerializable:$t,modifiedIds:Tt}){const{map:Dt,transfer:Ft}=$t,Ht=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:dt,cacheKey:kt,annotationStorage:Dt,modifiedIds:Tt},Ft).getReader(),Kt=this._intentStates.get(kt);Kt.streamReader=Ht;const Yt=()=>{Ht.read().then(({value:Jt,done:Zt})=>{if(Zt){Kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Jt,Kt),Yt())},Jt=>{if(Kt.streamReader=null,!this._transport.destroyed){if(Kt.operatorList){Kt.operatorList.lastChunk=!0;for(const Zt of Kt.renderTasks)Zt.operatorListChanged();Br(this,wx,Pv).call(this)}if(Kt.displayReadyCapability)Kt.displayReadyCapability.reject(Jt);else if(Kt.opListReadCapability)Kt.opListReadCapability.reject(Jt);else throw Jt}})};Yt()}_abortOperatorList({intentState:dt,reason:kt,force:$t=!1}){if(dt.streamReader){if(dt.streamReaderCancelTimeout&&(clearTimeout(dt.streamReaderCancelTimeout),dt.streamReaderCancelTimeout=null),!$t){if(dt.renderTasks.size>0)return;if(kt instanceof RenderingCancelledException){let Tt=RENDERING_CANCELLED_TIMEOUT;kt.extraDelay>0&&kt.extraDelay<1e3&&(Tt+=kt.extraDelay),dt.streamReaderCancelTimeout=setTimeout(()=>{dt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:dt,reason:kt,force:!0})},Tt);return}}if(dt.streamReader.cancel(new AbortException(kt.message)).catch(()=>{}),dt.streamReader=null,!this._transport.destroyed){for(const[Tt,Dt]of this._intentStates)if(Dt===dt){this._intentStates.delete(Tt);break}this.cleanup()}}}get stats(){return this._stats}}rp=new WeakMap,wx=new WeakSet,Pv=function(){if(!ar(this,rp)||this.destroyed)return!1;for(const{renderTasks:dt,operatorList:kt}of this._intentStates.values())if(dt.size>0||!kt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),vr(this,rp,!1),!0};var Jp,tu,sp,Rx,zR,kx,$x,by,Cw,UR,KS,HR,YS,Sx,Mv,yy,Aw;const Un=class Un{constructor({name:dt=null,port:kt=null,verbosity:$t=getVerbosityLevel()}={}){yr(this,by);yr(this,UR);yr(this,HR);yr(this,Sx);yr(this,Jp,Promise.withResolvers());yr(this,tu,null);yr(this,sp,null);yr(this,Rx,null);if(this.name=dt,this.destroyed=!1,this.verbosity=$t,kt){if(ar(Un,$x).has(kt))throw new Error("Cannot use more than one PDFWorker per port.");ar(Un,$x).set(kt,this),Br(this,UR,KS).call(this,kt)}else Br(this,HR,YS).call(this)}get promise(){return ar(this,Jp).promise}get port(){return ar(this,sp)}get messageHandler(){return ar(this,tu)}destroy(){var dt,kt;this.destroyed=!0,(dt=ar(this,Rx))==null||dt.terminate(),vr(this,Rx,null),ar(Un,$x).delete(ar(this,sp)),vr(this,sp,null),(kt=ar(this,tu))==null||kt.destroy(),vr(this,tu,null)}static create(dt){const kt=ar(this,$x).get(dt==null?void 0:dt.port);if(kt){if(kt._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return kt}return new Un(dt)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>ar(this,yy,Aw)?ar(this,yy,Aw):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Jp=new WeakMap,tu=new WeakMap,sp=new WeakMap,Rx=new WeakMap,zR=new WeakMap,kx=new WeakMap,$x=new WeakMap,by=new WeakSet,Cw=function(){ar(this,Jp).resolve(),ar(this,tu).send("configure",{verbosity:this.verbosity})},UR=new WeakSet,KS=function(dt){vr(this,sp,dt),vr(this,tu,new MessageHandler("main","worker",dt)),ar(this,tu).on("ready",()=>{}),Br(this,by,Cw).call(this)},HR=new WeakSet,YS=function(){if(ar(Un,kx)||ar(Un,yy,Aw)){Br(this,Sx,Mv).call(this);return}let{workerSrc:dt}=Un;try{Un._isSameOrigin(window.location,dt)||(dt=Un._createCDNWrapper(new URL(dt,window.location).href));const kt=new Worker(dt,{type:"module"}),$t=new MessageHandler("main","worker",kt),Tt=()=>{Dt.abort(),$t.destroy(),kt.terminate(),this.destroyed?ar(this,Jp).reject(new Error("Worker was destroyed")):Br(this,Sx,Mv).call(this)},Dt=new AbortController;kt.addEventListener("error",()=>{ar(this,Rx)||Tt()},{signal:Dt.signal}),$t.on("test",Ut=>{if(Dt.abort(),this.destroyed||!Ut){Tt();return}vr(this,tu,$t),vr(this,sp,kt),vr(this,Rx,kt),Br(this,by,Cw).call(this)}),$t.on("ready",Ut=>{if(Dt.abort(),this.destroyed){Tt();return}try{Ft()}catch{Br(this,Sx,Mv).call(this)}});const Ft=()=>{const Ut=new Uint8Array;$t.send("test",Ut,[Ut.buffer])};Ft();return}catch{info("The worker has been disabled.")}Br(this,Sx,Mv).call(this)},Sx=new WeakSet,Mv=function(){ar(Un,kx)||(warn("Setting up fake worker."),vr(Un,kx,!0)),Un._setupFakeWorkerGlobal.then(dt=>{if(this.destroyed){ar(this,Jp).reject(new Error("Worker was destroyed"));return}const kt=new LoopbackPort;vr(this,sp,kt);const $t=`fake${xa(Un,zR)._++}`,Tt=new MessageHandler($t+"_worker",$t,kt);dt.setup(Tt,kt),vr(this,tu,new MessageHandler($t,$t+"_worker",kt)),Br(this,by,Cw).call(this)}).catch(dt=>{ar(this,Jp).reject(new Error(`Setting up fake worker failed: "${dt.message}".`))})},yy=new WeakSet,Aw=function(){var dt;try{return((dt=globalThis.pdfjsWorker)==null?void 0:dt.WorkerMessageHandler)||null}catch{return null}},yr(Un,yy),yr(Un,zR,0),yr(Un,kx,!1),yr(Un,$x,new WeakMap),isNodeJS&&(vr(Un,kx,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Un._isSameOrigin=(dt,kt)=>{const $t=URL.parse(dt);if(!($t!=null&&$t.origin)||$t.origin==="null")return!1;const Tt=new URL(kt,$t);return $t.origin===Tt.origin},Un._createCDNWrapper=dt=>{const kt=`await import("${dt}");`;return URL.createObjectURL(new Blob([kt],{type:"text/javascript"}))},Un.fromPort=dt=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(dt!=null&&dt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Un.create(dt)};let PDFWorker=Un;var np,wu,vy,Ey,ap,_x,Iv;class WorkerTransport{constructor(dt,kt,$t,Tt,Dt,Ft){yr(this,_x);yr(this,np,new Map);yr(this,wu,new Map);yr(this,vy,new Map);yr(this,Ey,new Map);yr(this,ap,null);this.messageHandler=dt,this.loadingTask=kt,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:Tt.ownerDocument,styleElement:Tt.styleElement}),this.loadingParams=Tt.loadingParams,this._params=Tt,this.canvasFactory=Dt.canvasFactory,this.filterFactory=Dt.filterFactory,this.cMapReaderFactory=Dt.cMapReaderFactory,this.standardFontDataFactory=Dt.standardFontDataFactory,this.wasmFactory=Dt.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=$t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=Ft,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(dt,kt=AnnotationMode.ENABLE,$t=null,Tt=!1,Dt=!1){let Ft=RenderingIntentFlag.DISPLAY,Ut=SerializableEmpty;switch(dt){case"any":Ft=RenderingIntentFlag.ANY;break;case"display":break;case"print":Ft=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${dt}`)}const Ht=Ft&RenderingIntentFlag.PRINT&&$t instanceof PrintAnnotationStorage?$t:this.annotationStorage;switch(kt){case AnnotationMode.DISABLE:Ft+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:Ft+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:Ft+=RenderingIntentFlag.ANNOTATIONS_STORAGE,Ut=Ht.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${kt}`)}Tt&&(Ft+=RenderingIntentFlag.IS_EDITING),Dt&&(Ft+=RenderingIntentFlag.OPLIST);const{ids:Kt,hash:Yt}=Ht.modifiedIds,Jt=[Ft,Ut.hash,Yt];return{renderingIntent:Ft,cacheKey:Jt.join("_"),annotationStorageSerializable:Ut,modifiedIds:Kt}}destroy(){var $t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),($t=ar(this,ap))==null||$t.reject(new Error("Worker was destroyed during onPassword callback"));const dt=[];for(const Tt of ar(this,wu).values())dt.push(Tt._destroy());ar(this,wu).clear(),ar(this,vy).clear(),ar(this,Ey).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const kt=this.messageHandler.sendWithPromise("Terminate",null);return dt.push(kt),Promise.all(dt).then(()=>{var Tt,Dt;this.commonObjs.clear(),this.fontLoader.clear(),ar(this,np).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(Tt=this._networkStream)==null||Tt.cancelAllRequests(new AbortException("Worker was terminated.")),(Dt=this.messageHandler)==null||Dt.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:dt,loadingTask:kt}=this;dt.on("GetReader",($t,Tt)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Dt=>{this._lastProgress={loaded:Dt.loaded,total:Dt.total}},Tt.onPull=()=>{this._fullReader.read().then(function({value:Dt,done:Ft}){if(Ft){Tt.close();return}assert(Dt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Tt.enqueue(new Uint8Array(Dt),1,[Dt])}).catch(Dt=>{Tt.error(Dt)})},Tt.onCancel=Dt=>{this._fullReader.cancel(Dt),Tt.ready.catch(Ft=>{if(!this.destroyed)throw Ft})}}),dt.on("ReaderHeadersReady",async $t=>{var Ut;await this._fullReader.headersReady;const{isStreamingSupported:Tt,isRangeSupported:Dt,contentLength:Ft}=this._fullReader;return(!Tt||!Dt)&&(this._lastProgress&&((Ut=kt.onProgress)==null||Ut.call(kt,this._lastProgress)),this._fullReader.onProgress=Ht=>{var Kt;(Kt=kt.onProgress)==null||Kt.call(kt,{loaded:Ht.loaded,total:Ht.total})}),{isStreamingSupported:Tt,isRangeSupported:Dt,contentLength:Ft}}),dt.on("GetRangeReader",($t,Tt)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Dt=this._networkStream.getRangeReader($t.begin,$t.end);if(!Dt){Tt.close();return}Tt.onPull=()=>{Dt.read().then(function({value:Ft,done:Ut}){if(Ut){Tt.close();return}assert(Ft instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Tt.enqueue(new Uint8Array(Ft),1,[Ft])}).catch(Ft=>{Tt.error(Ft)})},Tt.onCancel=Ft=>{Dt.cancel(Ft),Tt.ready.catch(Ut=>{if(!this.destroyed)throw Ut})}}),dt.on("GetDoc",({pdfInfo:$t})=>{this._numPages=$t.numPages,this._htmlForXfa=$t.htmlForXfa,delete $t.htmlForXfa,kt._capability.resolve(new PDFDocumentProxy($t,this))}),dt.on("DocException",$t=>{kt._capability.reject(wrapReason($t))}),dt.on("PasswordRequest",$t=>{vr(this,ap,Promise.withResolvers());try{if(!kt.onPassword)throw wrapReason($t);const Tt=Dt=>{Dt instanceof Error?ar(this,ap).reject(Dt):ar(this,ap).resolve({password:Dt})};kt.onPassword(Tt,$t.code)}catch(Tt){ar(this,ap).reject(Tt)}return ar(this,ap).promise}),dt.on("DataLoaded",$t=>{var Tt;(Tt=kt.onProgress)==null||Tt.call(kt,{loaded:$t.length,total:$t.length}),this.downloadInfoCapability.resolve($t)}),dt.on("StartRenderPage",$t=>{if(this.destroyed)return;ar(this,wu).get($t.pageIndex)._startRenderPage($t.transparency,$t.cacheKey)}),dt.on("commonobj",([$t,Tt,Dt])=>{var Ft;if(this.destroyed||this.commonObjs.has($t))return null;switch(Tt){case"Font":if("error"in Dt){const Jt=Dt.error;warn(`Error during font loading: ${Jt}`),this.commonObjs.resolve($t,Jt);break}const Ut=new FontInfo(Dt),Ht=this._params.pdfBug&&((Ft=globalThis.FontInspector)!=null&&Ft.enabled)?(Jt,Zt)=>globalThis.FontInspector.fontAdded(Jt,Zt):null,Kt=new FontFaceObject(Ut,Ht,Dt.extra,Dt.charProcOperatorList);this.fontLoader.bind(Kt).catch(()=>dt.sendWithPromise("FontFallback",{id:$t})).finally(()=>{!Kt.fontExtraProperties&&Kt.data&&Kt.clearData(),this.commonObjs.resolve($t,Kt)});break;case"CopyLocalImage":const{imageRef:Yt}=Dt;assert(Yt,"The imageRef must be defined.");for(const Jt of ar(this,wu).values())for(const[,Zt]of Jt.objs)if((Zt==null?void 0:Zt.ref)===Yt)return Zt.dataLen?(this.commonObjs.resolve($t,structuredClone(Zt)),Zt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve($t,Dt);break;default:throw new Error(`Got unknown common object type ${Tt}`)}return null}),dt.on("obj",([$t,Tt,Dt,Ft])=>{var Ht;if(this.destroyed)return;const Ut=ar(this,wu).get(Tt);if(!Ut.objs.has($t)){if(Ut._intentStates.size===0){(Ht=Ft==null?void 0:Ft.bitmap)==null||Ht.close();return}switch(Dt){case"Image":case"Pattern":Ut.objs.resolve($t,Ft);break;default:throw new Error(`Got unknown object type ${Dt}`)}}}),dt.on("DocProgress",$t=>{var Tt;this.destroyed||(Tt=kt.onProgress)==null||Tt.call(kt,{loaded:$t.loaded,total:$t.total})}),dt.on("FetchBinaryData",async $t=>{if(this.destroyed)throw new Error("Worker was destroyed.");const Tt=this[$t.type];if(!Tt)throw new Error(`${$t.type} not initialized, see the \`useWorkerFetch\` parameter.`);return Tt.fetch($t)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var $t;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:dt,transfer:kt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:dt,filename:(($t=this._fullReader)==null?void 0:$t.filename)??null},kt).finally(()=>{this.annotationStorage.resetModified()})}getPage(dt){if(!Number.isInteger(dt)||dt<=0||dt>this._numPages)return Promise.reject(new Error("Invalid page request."));const kt=dt-1,$t=ar(this,vy).get(kt);if($t)return $t;const Tt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:kt}).then(Dt=>{if(this.destroyed)throw new Error("Transport destroyed");Dt.refStr&&ar(this,Ey).set(Dt.refStr,dt);const Ft=new PDFPageProxy(kt,Dt,this,this._params.pdfBug);return ar(this,wu).set(kt,Ft),Ft});return ar(this,vy).set(kt,Tt),Tt}getPageIndex(dt){return isRefProxy(dt)?this.messageHandler.sendWithPromise("GetPageIndex",{num:dt.num,gen:dt.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(dt,kt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:dt,intent:kt})}getFieldObjects(){return Br(this,_x,Iv).call(this,"GetFieldObjects")}hasJSActions(){return Br(this,_x,Iv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(dt){return typeof dt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:dt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(dt,kt){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:dt,pageIndexesToSkip:kt})}getDocJSActions(){return Br(this,_x,Iv).call(this,"GetDocJSActions")}getPageJSActions(dt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:dt})}getStructTree(dt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:dt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(dt){return Br(this,_x,Iv).call(this,"GetOptionalContentConfig").then(kt=>new OptionalContentConfig(kt,dt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const dt="GetMetadata",kt=ar(this,np).get(dt);if(kt)return kt;const $t=this.messageHandler.sendWithPromise(dt,null).then(Tt=>{var Dt,Ft;return{info:Tt[0],metadata:Tt[1]?new Metadata(Tt[1]):null,contentDispositionFilename:((Dt=this._fullReader)==null?void 0:Dt.filename)??null,contentLength:((Ft=this._fullReader)==null?void 0:Ft.contentLength)??null}});return ar(this,np).set(dt,$t),$t}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(dt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const kt of ar(this,wu).values())if(!kt.cleanup())throw new Error(`startCleanup: Page ${kt.pageNumber} is currently rendering.`);this.commonObjs.clear(),dt||this.fontLoader.clear(),ar(this,np).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(dt){if(!isRefProxy(dt))return null;const kt=dt.gen===0?`${dt.num}R`:`${dt.num}R${dt.gen}`;return ar(this,Ey).get(kt)??null}}np=new WeakMap,wu=new WeakMap,vy=new WeakMap,Ey=new WeakMap,ap=new WeakMap,_x=new WeakSet,Iv=function(dt,kt=null){const $t=ar(this,np).get(dt);if($t)return $t;const Tt=this.messageHandler.sendWithPromise(dt,kt);return ar(this,np).set(dt,Tt),Tt};var Zp;class RenderTask{constructor(dt){yr(this,Zp,null);Es(this,"onContinue",null);Es(this,"onError",null);vr(this,Zp,dt)}get promise(){return ar(this,Zp).capability.promise}cancel(dt=0){ar(this,Zp).cancel(null,dt)}get separateAnnots(){const{separateAnnots:dt}=ar(this,Zp).operatorList;if(!dt)return!1;const{annotationCanvasMap:kt}=ar(this,Zp);return dt.form||dt.canvas&&(kt==null?void 0:kt.size)>0}}Zp=new WeakMap;var _f,Cx;const Tm=class Tm{constructor({callback:dt,params:kt,objs:$t,commonObjs:Tt,annotationCanvasMap:Dt,operatorList:Ft,pageIndex:Ut,canvasFactory:Ht,filterFactory:Kt,useRequestAnimationFrame:Yt=!1,pdfBug:Jt=!1,pageColors:Zt=null,enableHWA:er=!1,operationsFilter:rr=null}){yr(this,_f,null);this.callback=dt,this.params=kt,this.objs=$t,this.commonObjs=Tt,this.annotationCanvasMap=Dt,this.operatorListIdx=null,this.operatorList=Ft,this._pageIndex=Ut,this.canvasFactory=Ht,this.filterFactory=Kt,this._pdfBug=Jt,this.pageColors=Zt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Yt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=kt.canvas,this._canvasContext=kt.canvas?null:kt.canvasContext,this._enableHWA=er,this._dependencyTracker=kt.dependencyTracker,this._operationsFilter=rr}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:dt=!1,optionalContentConfig:kt}){var Ht,Kt;if(this.cancelled)return;if(this._canvas){if(ar(Tm,Cx).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ar(Tm,Cx).add(this._canvas)}this._pdfBug&&((Ht=globalThis.StepperManager)!=null&&Ht.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:$t,transform:Tt,background:Dt,dependencyTracker:Ft}=this.params,Ut=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(Ut,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:kt},this.annotationCanvasMap,this.pageColors,Ft),this.gfx.beginDrawing({transform:Tt,viewport:$t,transparency:dt,background:Dt}),this.operatorListIdx=0,this.graphicsReady=!0,(Kt=this.graphicsReadyCallback)==null||Kt.call(this)}cancel(dt=null,kt=0){var $t,Tt,Dt;this.running=!1,this.cancelled=!0,($t=this.gfx)==null||$t.endDrawing(),ar(this,_f)&&(window.cancelAnimationFrame(ar(this,_f)),vr(this,_f,null)),ar(Tm,Cx).delete(this._canvas),dt||(dt=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,kt)),this.callback(dt),(Dt=(Tt=this.task).onError)==null||Dt.call(Tt,dt)}operatorListChanged(){var dt,kt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(dt=this.gfx.dependencyTracker)==null||dt.growOperationsCount(this.operatorList.fnArray.length),(kt=this.stepper)==null||kt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?vr(this,_f,window.requestAnimationFrame(()=>{vr(this,_f,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ar(Tm,Cx).delete(this._canvas),this.callback())))}};_f=new WeakMap,Cx=new WeakMap,yr(Tm,Cx,new WeakSet);let InternalRenderTask=Tm;const version="5.4.296",build="f56dc8601";var yl,Ax,jy,$a,cE,wy,lp,dE,em,ru,uE,hE,b$,pE,y$,fE,v$,cp,Sm,GR,XS,Ru,wp;const Oo=class Oo{constructor({editor:dt=null,uiManager:kt=null}){yr(this,hE);yr(this,pE);yr(this,fE);yr(this,cp);yr(this,GR);yr(this,Ru);yr(this,yl,null);yr(this,Ax,null);yr(this,jy,void 0);yr(this,$a,null);yr(this,cE,!1);yr(this,wy,!1);yr(this,lp,null);yr(this,dE,void 0);yr(this,em,null);yr(this,ru,null);var $t,Tt;dt?(vr(this,wy,!1),vr(this,lp,dt)):vr(this,wy,!0),vr(this,ru,(dt==null?void 0:dt._uiManager)||kt),vr(this,dE,ar(this,ru)._eventBus),vr(this,jy,(($t=dt==null?void 0:dt.color)==null?void 0:$t.toUpperCase())||((Tt=ar(this,ru))==null?void 0:Tt.highlightColors.values().next().value)||"#FFFF98"),ar(Oo,uE)||vr(Oo,uE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],Oo.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Oo.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Oo.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Oo.prototype._moveToPrevious],[["Home","mac+Home"],Oo.prototype._moveToBeginning],[["End","mac+End"],Oo.prototype._moveToEnd]]))}renderButton(){const dt=vr(this,yl,document.createElement("button"));dt.className="colorPicker",dt.tabIndex="0",dt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),dt.ariaHasPopup="true",ar(this,lp)&&(dt.ariaControls=`${ar(this,lp).id}_colorpicker_dropdown`);const kt=ar(this,ru)._signal;dt.addEventListener("click",Br(this,cp,Sm).bind(this),{signal:kt}),dt.addEventListener("keydown",Br(this,fE,v$).bind(this),{signal:kt});const $t=vr(this,Ax,document.createElement("span"));return $t.className="swatch",$t.ariaHidden="true",$t.style.backgroundColor=ar(this,jy),dt.append($t),dt}renderMainDropdown(){const dt=vr(this,$a,Br(this,hE,b$).call(this));return dt.ariaOrientation="horizontal",dt.ariaLabelledBy="highlightColorPickerLabel",dt}_colorSelectFromKeyboard(dt){if(dt.target===ar(this,yl)){Br(this,cp,Sm).call(this,dt);return}const kt=dt.target.getAttribute("data-color");kt&&Br(this,pE,y$).call(this,kt,dt)}_moveToNext(dt){var kt,$t;if(!ar(this,Ru,wp)){Br(this,cp,Sm).call(this,dt);return}if(dt.target===ar(this,yl)){(kt=ar(this,$a).firstChild)==null||kt.focus();return}($t=dt.target.nextSibling)==null||$t.focus()}_moveToPrevious(dt){var kt,$t;if(dt.target===((kt=ar(this,$a))==null?void 0:kt.firstChild)||dt.target===ar(this,yl)){ar(this,Ru,wp)&&this._hideDropdownFromKeyboard();return}ar(this,Ru,wp)||Br(this,cp,Sm).call(this,dt),($t=dt.target.previousSibling)==null||$t.focus()}_moveToBeginning(dt){var kt;if(!ar(this,Ru,wp)){Br(this,cp,Sm).call(this,dt);return}(kt=ar(this,$a).firstChild)==null||kt.focus()}_moveToEnd(dt){var kt;if(!ar(this,Ru,wp)){Br(this,cp,Sm).call(this,dt);return}(kt=ar(this,$a).lastChild)==null||kt.focus()}hideDropdown(){var dt,kt;(dt=ar(this,$a))==null||dt.classList.add("hidden"),ar(this,yl).ariaExpanded="false",(kt=ar(this,em))==null||kt.abort(),vr(this,em,null)}_hideDropdownFromKeyboard(){var dt;if(!ar(this,wy)){if(!ar(this,Ru,wp)){(dt=ar(this,lp))==null||dt.unselect();return}this.hideDropdown(),ar(this,yl).focus({preventScroll:!0,focusVisible:ar(this,cE)})}}updateColor(dt){if(ar(this,Ax)&&(ar(this,Ax).style.backgroundColor=dt),!ar(this,$a))return;const kt=ar(this,ru).highlightColors.values();for(const $t of ar(this,$a).children)$t.ariaSelected=kt.next().value===dt.toUpperCase()}destroy(){var dt,kt;(dt=ar(this,yl))==null||dt.remove(),vr(this,yl,null),vr(this,Ax,null),(kt=ar(this,$a))==null||kt.remove(),vr(this,$a,null)}};yl=new WeakMap,Ax=new WeakMap,jy=new WeakMap,$a=new WeakMap,cE=new WeakMap,wy=new WeakMap,lp=new WeakMap,dE=new WeakMap,em=new WeakMap,ru=new WeakMap,uE=new WeakMap,hE=new WeakSet,b$=function(){const dt=document.createElement("div"),kt=ar(this,ru)._signal;dt.addEventListener("contextmenu",noContextMenu,{signal:kt}),dt.className="dropdown",dt.role="listbox",dt.ariaMultiSelectable="false",dt.ariaOrientation="vertical",dt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),ar(this,lp)&&(dt.id=`${ar(this,lp).id}_colorpicker_dropdown`);for(const[$t,Tt]of ar(this,ru).highlightColors){const Dt=document.createElement("button");Dt.tabIndex="0",Dt.role="option",Dt.setAttribute("data-color",Tt),Dt.title=$t,Dt.setAttribute("data-l10n-id",ar(Oo,uE)[$t]);const Ft=document.createElement("span");Dt.append(Ft),Ft.className="swatch",Ft.style.backgroundColor=Tt,Dt.ariaSelected=Tt===ar(this,jy),Dt.addEventListener("click",Br(this,pE,y$).bind(this,Tt),{signal:kt}),dt.append(Dt)}return dt.addEventListener("keydown",Br(this,fE,v$).bind(this),{signal:kt}),dt},pE=new WeakSet,y$=function(dt,kt){kt.stopPropagation(),ar(this,dE).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:dt}),this.updateColor(dt)},fE=new WeakSet,v$=function(dt){Oo._keyboardManager.exec(this,dt)},cp=new WeakSet,Sm=function(dt){if(ar(this,Ru,wp)){this.hideDropdown();return}if(vr(this,cE,dt.detail===0),ar(this,em)||(vr(this,em,new AbortController),window.addEventListener("pointerdown",Br(this,GR,XS).bind(this),{signal:ar(this,ru).combinedSignal(ar(this,em))})),ar(this,yl).ariaExpanded="true",ar(this,$a)){ar(this,$a).classList.remove("hidden");return}const kt=vr(this,$a,Br(this,hE,b$).call(this));ar(this,yl).append(kt)},GR=new WeakSet,XS=function(dt){var kt;(kt=ar(this,$a))!=null&&kt.contains(dt.target)||this.hideDropdown()},Ru=new WeakSet,wp=function(){return ar(this,$a)&&!ar(this,$a).classList.contains("hidden")},yr(Oo,uE,null);let ColorPicker=Oo;var ku,mE,Ry,xE;const Nm=class Nm{constructor(dt){yr(this,ku,null);yr(this,mE,null);yr(this,Ry,null);vr(this,mE,dt),vr(this,Ry,dt._uiManager),ar(Nm,xE)||vr(Nm,xE,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(ar(this,ku))return ar(this,ku);const{editorType:dt,colorType:kt,colorValue:$t}=ar(this,mE),Tt=vr(this,ku,document.createElement("input"));return Tt.type="color",Tt.value=$t||"#000000",Tt.className="basicColorPicker",Tt.tabIndex=0,Tt.setAttribute("data-l10n-id",ar(Nm,xE)[dt]),Tt.addEventListener("input",()=>{ar(this,Ry).updateParams(kt,Tt.value)},{signal:ar(this,Ry)._signal}),Tt}update(dt){ar(this,ku)&&(ar(this,ku).value=dt)}destroy(){var dt;(dt=ar(this,ku))==null||dt.remove(),vr(this,ku,null)}hideDropdown(){}};ku=new WeakMap,mE=new WeakMap,Ry=new WeakMap,xE=new WeakMap,yr(Nm,xE,null);let BasicColorPicker=Nm;function makeColorComp(et){return Math.floor(Math.max(0,Math.min(1,et))*255).toString(16).padStart(2,"0")}function scaleAndClamp(et){return Math.max(0,Math.min(255,255*et))}class ColorConverters{static CMYK_G([dt,kt,$t,Tt]){return["G",1-Math.min(1,.3*dt+.59*$t+.11*kt+Tt)]}static G_CMYK([dt]){return["CMYK",0,0,0,1-dt]}static G_RGB([dt]){return["RGB",dt,dt,dt]}static G_rgb([dt]){return dt=scaleAndClamp(dt),[dt,dt,dt]}static G_HTML([dt]){const kt=makeColorComp(dt);return`#${kt}${kt}${kt}`}static RGB_G([dt,kt,$t]){return["G",.3*dt+.59*kt+.11*$t]}static RGB_rgb(dt){return dt.map(scaleAndClamp)}static RGB_HTML(dt){return`#${dt.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([dt,kt,$t,Tt]){return["RGB",1-Math.min(1,dt+Tt),1-Math.min(1,$t+Tt),1-Math.min(1,kt+Tt)]}static CMYK_rgb([dt,kt,$t,Tt]){return[scaleAndClamp(1-Math.min(1,dt+Tt)),scaleAndClamp(1-Math.min(1,$t+Tt)),scaleAndClamp(1-Math.min(1,kt+Tt))]}static CMYK_HTML(dt){const kt=this.CMYK_RGB(dt).slice(1);return this.RGB_HTML(kt)}static RGB_CMYK([dt,kt,$t]){const Tt=1-dt,Dt=1-kt,Ft=1-$t,Ut=Math.min(Tt,Dt,Ft);return["CMYK",Tt,Dt,Ft,Ut]}}class BaseSVGFactory{create(dt,kt,$t=!1){if(dt<=0||kt<=0)throw new Error("Invalid SVG dimensions");const Tt=this._createSVG("svg:svg");return Tt.setAttribute("version","1.1"),$t||(Tt.setAttribute("width",`${dt}px`),Tt.setAttribute("height",`${kt}px`)),Tt.setAttribute("preserveAspectRatio","none"),Tt.setAttribute("viewBox",`0 0 ${dt} ${kt}`),Tt}createElement(dt){if(typeof dt!="string")throw new Error("Invalid SVG element type");return this._createSVG(dt)}_createSVG(dt){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(dt){return document.createElementNS(SVG_NS,dt)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(dt){switch(dt.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(dt);case AnnotationType.TEXT:return new TextAnnotationElement(dt);case AnnotationType.WIDGET:switch(dt.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(dt);case"Btn":return dt.data.radioButton?new RadioButtonWidgetAnnotationElement(dt):dt.data.checkBox?new CheckboxWidgetAnnotationElement(dt):new PushButtonWidgetAnnotationElement(dt);case"Ch":return new ChoiceWidgetAnnotationElement(dt);case"Sig":return new SignatureWidgetAnnotationElement(dt)}return new WidgetAnnotationElement(dt);case AnnotationType.POPUP:return new PopupAnnotationElement(dt);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(dt);case AnnotationType.LINE:return new LineAnnotationElement(dt);case AnnotationType.SQUARE:return new SquareAnnotationElement(dt);case AnnotationType.CIRCLE:return new CircleAnnotationElement(dt);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(dt);case AnnotationType.CARET:return new CaretAnnotationElement(dt);case AnnotationType.INK:return new InkAnnotationElement(dt);case AnnotationType.POLYGON:return new PolygonAnnotationElement(dt);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(dt);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(dt);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(dt);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(dt);case AnnotationType.STAMP:return new StampAnnotationElement(dt);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(dt);default:return new AnnotationElement(dt)}}}var Tx,ky,Ul,gE,E$;const Z$=class Z${constructor(dt,{isRenderable:kt=!1,ignoreBorder:$t=!1,createQuadrilaterals:Tt=!1}={}){yr(this,gE);yr(this,Tx,null);yr(this,ky,!1);yr(this,Ul,null);this.isRenderable=kt,this.data=dt.data,this.layer=dt.layer,this.linkService=dt.linkService,this.downloadManager=dt.downloadManager,this.imageResourcesPath=dt.imageResourcesPath,this.renderForms=dt.renderForms,this.svgFactory=dt.svgFactory,this.annotationStorage=dt.annotationStorage,this.enableComment=dt.enableComment,this.enableScripting=dt.enableScripting,this.hasJSActions=dt.hasJSActions,this._fieldObjects=dt.fieldObjects,this.parent=dt.parent,kt&&(this.container=this._createContainer($t)),Tt&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:dt,richText:kt}){return!!(dt!=null&&dt.str||kt!=null&&kt.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Z$._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var $t;const{data:dt}=this,kt=($t=this.annotationStorage)==null?void 0:$t.getEditor(dt.id);return kt?kt.getData():dt}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var Ut;const dt=(Ut=this.annotationStorage)==null?void 0:Ut.getEditor(this.data.id);if(dt)return dt.commentButtonPositionInPage;const{quadPoints:kt,inkLists:$t,rect:Tt}=this.data;let Dt=-1/0,Ft=-1/0;if((kt==null?void 0:kt.length)>=8){for(let Ht=0;Ht<kt.length;Ht+=8)kt[Ht+1]>Ft?(Ft=kt[Ht+1],Dt=kt[Ht+2]):kt[Ht+1]===Ft&&(Dt=Math.max(Dt,kt[Ht+2]));return[Dt,Ft]}if(($t==null?void 0:$t.length)>=1){for(const Ht of $t)for(let Kt=0,Yt=Ht.length;Kt<Yt;Kt+=2)Ht[Kt+1]>Ft?(Ft=Ht[Kt+1],Dt=Ht[Kt]):Ht[Kt+1]===Ft&&(Dt=Math.max(Dt,Ht[Kt]));if(Dt!==1/0)return[Dt,Ft]}return Tt?[Tt[2],Tt[3]]:null}_normalizePoint(dt){const{page:{view:kt},viewport:{rawDims:{pageWidth:$t,pageHeight:Tt,pageX:Dt,pageY:Ft}}}=this.parent;return dt[1]=kt[3]-dt[1]+kt[1],dt[0]=100*(dt[0]-Dt)/$t,dt[1]=100*(dt[1]-Ft)/Tt,dt}get commentText(){var kt,$t,Tt;const{data:dt}=this;return(($t=(kt=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${dt.id}`))==null?void 0:kt.popup)==null?void 0:$t.contents)||((Tt=dt.contentsObj)==null?void 0:Tt.str)||""}set commentText(dt){const{data:kt}=this,$t={deleted:!dt,contents:dt||""};this.annotationStorage.updateEditor(kt.id,{popup:$t})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${kt.id}`,{id:kt.id,annotationType:kt.annotationType,pageIndex:this.parent.page._pageIndex,popup:$t,popupRef:kt.popupRef,modificationDate:new Date}),dt||this.removePopup()}removePopup(){var dt,kt;(kt=((dt=ar(this,Ul))==null?void 0:dt.popup)||this.popup)==null||kt.remove(),vr(this,Ul,this.popup=null)}updateEdited(dt){var Dt;if(!this.container)return;dt.rect&&(ar(this,Tx)||vr(this,Tx,{rect:this.data.rect.slice(0)}));const{rect:kt,popup:$t}=dt;kt&&Br(this,gE,E$).call(this,kt);let Tt=((Dt=ar(this,Ul))==null?void 0:Dt.popup)||this.popup;!Tt&&($t!=null&&$t.text)&&(this._createPopup($t),Tt=ar(this,Ul).popup),Tt&&(Tt.updateEdited(dt),$t!=null&&$t.deleted&&(Tt.remove(),vr(this,Ul,null),this.popup=null))}resetEdited(){var dt;ar(this,Tx)&&(Br(this,gE,E$).call(this,ar(this,Tx).rect),(dt=ar(this,Ul))==null||dt.popup.resetEdited(),vr(this,Tx,null))}_createContainer(dt){const{data:kt,parent:{page:$t,viewport:Tt}}=this,Dt=document.createElement("section");Dt.setAttribute("data-annotation-id",kt.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(Dt.tabIndex=0);const{style:Ft}=Dt;if(Ft.zIndex=this.parent.zIndex,this.parent.zIndex+=2,kt.alternativeText&&(Dt.title=kt.alternativeText),kt.noRotate&&Dt.classList.add("norotate"),!kt.rect||this instanceof PopupAnnotationElement){const{rotation:sr}=kt;return!kt.hasOwnCanvas&&sr!==0&&this.setRotation(sr,Dt),Dt}const{width:Ut,height:Ht}=this;if(!dt&&kt.borderStyle.width>0){Ft.borderWidth=`${kt.borderStyle.width}px`;const sr=kt.borderStyle.horizontalCornerRadius,nr=kt.borderStyle.verticalCornerRadius;if(sr>0||nr>0){const lr=`calc(${sr}px * var(--total-scale-factor)) / calc(${nr}px * var(--total-scale-factor))`;Ft.borderRadius=lr}else if(this instanceof RadioButtonWidgetAnnotationElement){const lr=`calc(${Ut}px * var(--total-scale-factor)) / calc(${Ht}px * var(--total-scale-factor))`;Ft.borderRadius=lr}switch(kt.borderStyle.style){case AnnotationBorderStyleType.SOLID:Ft.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:Ft.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:Ft.borderBottomStyle="solid";break}const ir=kt.borderColor||null;ir?(vr(this,ky,!0),Ft.borderColor=Util.makeHexColor(ir[0]|0,ir[1]|0,ir[2]|0)):Ft.borderWidth=0}const Kt=Util.normalizeRect([kt.rect[0],$t.view[3]-kt.rect[1]+$t.view[1],kt.rect[2],$t.view[3]-kt.rect[3]+$t.view[1]]),{pageWidth:Yt,pageHeight:Jt,pageX:Zt,pageY:er}=Tt.rawDims;Ft.left=`${100*(Kt[0]-Zt)/Yt}%`,Ft.top=`${100*(Kt[1]-er)/Jt}%`;const{rotation:rr}=kt;return kt.hasOwnCanvas||rr===0?(Ft.width=`${100*Ut/Yt}%`,Ft.height=`${100*Ht/Jt}%`):this.setRotation(rr,Dt),Dt}setRotation(dt,kt=this.container){if(!this.data.rect)return;const{pageWidth:$t,pageHeight:Tt}=this.parent.viewport.rawDims;let{width:Dt,height:Ft}=this;dt%180!==0&&([Dt,Ft]=[Ft,Dt]),kt.style.width=`${100*Dt/$t}%`,kt.style.height=`${100*Ft/Tt}%`,kt.setAttribute("data-main-rotation",(360-dt)%360)}get _commonActions(){const dt=(kt,$t,Tt)=>{const Dt=Tt.detail[kt],Ft=Dt[0],Ut=Dt.slice(1);Tt.target.style[$t]=ColorConverters[`${Ft}_HTML`](Ut),this.annotationStorage.setValue(this.data.id,{[$t]:ColorConverters[`${Ft}_rgb`](Ut)})};return shadow(this,"_commonActions",{display:kt=>{const{display:$t}=kt.detail,Tt=$t%2===1;this.container.style.visibility=Tt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Tt,noPrint:$t===1||$t===2})},print:kt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!kt.detail.print})},hidden:kt=>{const{hidden:$t}=kt.detail;this.container.style.visibility=$t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:$t,noView:$t})},focus:kt=>{setTimeout(()=>kt.target.focus({preventScroll:!1}),0)},userName:kt=>{kt.target.title=kt.detail.userName},readonly:kt=>{kt.target.disabled=kt.detail.readonly},required:kt=>{this._setRequired(kt.target,kt.detail.required)},bgColor:kt=>{dt("bgColor","backgroundColor",kt)},fillColor:kt=>{dt("fillColor","backgroundColor",kt)},fgColor:kt=>{dt("fgColor","color",kt)},textColor:kt=>{dt("textColor","color",kt)},borderColor:kt=>{dt("borderColor","borderColor",kt)},strokeColor:kt=>{dt("strokeColor","borderColor",kt)},rotation:kt=>{const $t=kt.detail.rotation;this.setRotation($t),this.annotationStorage.setValue(this.data.id,{rotation:$t})}})}_dispatchEventFromSandbox(dt,kt){const $t=this._commonActions;for(const Tt of Object.keys(kt.detail)){const Dt=dt[Tt]||$t[Tt];Dt==null||Dt(kt)}}_setDefaultPropertiesFromJS(dt){if(!this.enableScripting)return;const kt=this.annotationStorage.getRawValue(this.data.id);if(!kt)return;const $t=this._commonActions;for(const[Tt,Dt]of Object.entries(kt)){const Ft=$t[Tt];if(Ft){const Ut={detail:{[Tt]:Dt},target:dt};Ft(Ut),delete kt[Tt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:dt}=this.data;if(!dt)return;const[kt,$t,Tt,Dt]=this.data.rect.map(sr=>Math.fround(sr));if(dt.length===8){const[sr,nr,ir,lr]=dt.subarray(2,6);if(Tt===sr&&Dt===nr&&kt===ir&&$t===lr)return}const{style:Ft}=this.container;let Ut;if(ar(this,ky)){const{borderColor:sr,borderWidth:nr}=Ft;Ft.borderWidth=0,Ut=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${sr}" stroke-width="${nr}">`],this.container.classList.add("hasBorder")}const Ht=Tt-kt,Kt=Dt-$t,{svgFactory:Yt}=this,Jt=Yt.createElement("svg");Jt.classList.add("quadrilateralsContainer"),Jt.setAttribute("width",0),Jt.setAttribute("height",0),Jt.role="none";const Zt=Yt.createElement("defs");Jt.append(Zt);const er=Yt.createElement("clipPath"),rr=`clippath_${this.data.id}`;er.setAttribute("id",rr),er.setAttribute("clipPathUnits","objectBoundingBox"),Zt.append(er);for(let sr=2,nr=dt.length;sr<nr;sr+=8){const ir=dt[sr],lr=dt[sr+1],or=dt[sr+2],cr=dt[sr+3],dr=Yt.createElement("rect"),ur=(or-kt)/Ht,pr=(Dt-lr)/Kt,mr=(ir-or)/Ht,jr=(lr-cr)/Kt;dr.setAttribute("x",ur),dr.setAttribute("y",pr),dr.setAttribute("width",mr),dr.setAttribute("height",jr),er.append(dr),Ut==null||Ut.push(`<rect vector-effect="non-scaling-stroke" x="${ur}" y="${pr}" width="${mr}" height="${jr}"/>`)}ar(this,ky)&&(Ut.push("</g></svg>')"),Ft.backgroundImage=Ut.join("")),this.container.append(Jt),this.container.style.clipPath=`url(#${rr})`}_createPopup(dt=null){const{data:kt}=this;let $t,Tt;dt?($t={str:dt.text},Tt=dt.date):($t=kt.contentsObj,Tt=kt.modificationDate);const Dt=vr(this,Ul,new PopupAnnotationElement({data:{color:kt.color,titleObj:kt.titleObj,modificationDate:Tt,contentsObj:$t,richText:kt.richText,parentRect:kt.rect,borderStyle:0,id:`popup_${kt.id}`,rotation:kt.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(Dt.render())}get hasPopupElement(){return!!(ar(this,Ul)||this.popup||this.data.popupRef)}get extraPopupElement(){return ar(this,Ul)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(dt,kt=null){const $t=[];if(this._fieldObjects){const Tt=this._fieldObjects[dt];if(Tt)for(const{page:Dt,id:Ft,exportValues:Ut}of Tt){if(Dt===-1||Ft===kt)continue;const Ht=typeof Ut=="string"?Ut:null,Kt=document.querySelector(`[data-element-id="${Ft}"]`);if(Kt&&!GetElementsByNameSet.has(Kt)){warn(`_getElementsByName - element not allowed: ${Ft}`);continue}$t.push({id:Ft,exportValue:Ht,domElement:Kt})}return $t}for(const Tt of document.getElementsByName(dt)){const{exportValue:Dt}=Tt,Ft=Tt.getAttribute("data-element-id");Ft!==kt&&GetElementsByNameSet.has(Tt)&&$t.push({id:Ft,exportValue:Dt,domElement:Tt})}return $t}show(){var dt;this.container&&(this.container.hidden=!1),(dt=this.popup)==null||dt.maybeShow()}hide(){var dt;this.container&&(this.container.hidden=!0),(dt=this.popup)==null||dt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const dt=this.getElementsToTriggerPopup();if(Array.isArray(dt))for(const kt of dt)kt.classList.add("highlightArea");else dt.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:dt,data:{id:kt}}=this;this.container.addEventListener("dblclick",()=>{var $t;($t=this.linkService.eventBus)==null||$t.dispatch("switchannotationeditormode",{source:this,mode:dt,editId:kt,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Tx=new WeakMap,ky=new WeakMap,Ul=new WeakMap,gE=new WeakSet,E$=function(dt){const{container:{style:kt},data:{rect:$t,rotation:Tt},parent:{viewport:{rawDims:{pageWidth:Dt,pageHeight:Ft,pageX:Ut,pageY:Ht}}}}=this;$t==null||$t.splice(0,4,...dt),kt.left=`${100*(dt[0]-Ut)/Dt}%`,kt.top=`${100*(Ft-dt[3]+Ht)/Ft}%`,Tt===0?(kt.width=`${100*(dt[2]-dt[0])/Dt}%`,kt.height=`${100*(dt[3]-dt[1])/Ft}%`):this.setRotation(Tt)};let AnnotationElement=Z$;class EditorAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.editor=dt.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:dt}=this;dt.hasComment&&(this._createPopup(dt.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(dt){this.editor.comment=dt,dt||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var dp,_m,WR,QS,qR,JS;class LinkAnnotationElement extends AnnotationElement{constructor(kt,$t=null){super(kt,{isRenderable:!0,ignoreBorder:!!($t!=null&&$t.ignoreBorder),createQuadrilaterals:!0});yr(this,dp);yr(this,WR);yr(this,qR);this.isTooltipOnly=kt.data.isTooltipOnly}render(){const{data:kt,linkService:$t}=this,Tt=document.createElement("a");Tt.setAttribute("data-element-id",kt.id);let Dt=!1;return kt.url?($t.addLinkAttributes(Tt,kt.url,kt.newWindow),Dt=!0):kt.action?(this._bindNamedAction(Tt,kt.action,kt.overlaidText),Dt=!0):kt.attachment?(Br(this,WR,QS).call(this,Tt,kt.attachment,kt.overlaidText,kt.attachmentDest),Dt=!0):kt.setOCGState?(Br(this,qR,JS).call(this,Tt,kt.setOCGState,kt.overlaidText),Dt=!0):kt.dest?(this._bindLink(Tt,kt.dest,kt.overlaidText),Dt=!0):(kt.actions&&(kt.actions.Action||kt.actions["Mouse Up"]||kt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Tt,kt),Dt=!0),kt.resetForm?(this._bindResetFormAction(Tt,kt.resetForm),Dt=!0):this.isTooltipOnly&&!Dt&&(this._bindLink(Tt,""),Dt=!0)),this.container.classList.add("linkAnnotation"),Dt&&this.container.append(Tt),this.container}_bindLink(kt,$t,Tt=""){kt.href=this.linkService.getDestinationHash($t),kt.onclick=()=>($t&&this.linkService.goToDestination($t),!1),($t||$t==="")&&Br(this,dp,_m).call(this),Tt&&(kt.title=Tt)}_bindNamedAction(kt,$t,Tt=""){kt.href=this.linkService.getAnchorUrl(""),kt.onclick=()=>(this.linkService.executeNamedAction($t),!1),Tt&&(kt.title=Tt),Br(this,dp,_m).call(this)}_bindJSAction(kt,$t){kt.href=this.linkService.getAnchorUrl("");const Tt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Dt of Object.keys($t.actions)){const Ft=Tt.get(Dt);Ft&&(kt[Ft]=()=>{var Ut;return(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t.id,name:Dt}}),!1})}$t.overlaidText&&(kt.title=$t.overlaidText),kt.onclick||(kt.onclick=()=>!1),Br(this,dp,_m).call(this)}_bindResetFormAction(kt,$t){const Tt=kt.onclick;if(Tt||(kt.href=this.linkService.getAnchorUrl("")),Br(this,dp,_m).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Tt||(kt.onclick=()=>!1);return}kt.onclick=()=>{var Jt;Tt==null||Tt();const{fields:Dt,refs:Ft,include:Ut}=$t,Ht=[];if(Dt.length!==0||Ft.length!==0){const Zt=new Set(Ft);for(const er of Dt){const rr=this._fieldObjects[er]||[];for(const{id:sr}of rr)Zt.add(sr)}for(const er of Object.values(this._fieldObjects))for(const rr of er)Zt.has(rr.id)===Ut&&Ht.push(rr)}else for(const Zt of Object.values(this._fieldObjects))Ht.push(...Zt);const Kt=this.annotationStorage,Yt=[];for(const Zt of Ht){const{id:er}=Zt;switch(Yt.push(er),Zt.type){case"text":{const sr=Zt.defaultValue||"";Kt.setValue(er,{value:sr});break}case"checkbox":case"radiobutton":{const sr=Zt.defaultValue===Zt.exportValues;Kt.setValue(er,{value:sr});break}case"combobox":case"listbox":{const sr=Zt.defaultValue||"";Kt.setValue(er,{value:sr});break}default:continue}const rr=document.querySelector(`[data-element-id="${er}"]`);if(rr){if(!GetElementsByNameSet.has(rr)){warn(`_bindResetFormAction - element not allowed: ${er}`);continue}}else continue;rr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Yt,name:"ResetForm"}})),!1}}}dp=new WeakSet,_m=function(){this.container.setAttribute("data-internal-link","")},WR=new WeakSet,QS=function(kt,$t,Tt="",Dt=null){kt.href=this.linkService.getAnchorUrl(""),$t.description?kt.title=$t.description:Tt&&(kt.title=Tt),kt.onclick=()=>{var Ft;return(Ft=this.downloadManager)==null||Ft.openOrDownloadData($t.content,$t.filename,Dt),!1},Br(this,dp,_m).call(this)},qR=new WeakSet,JS=function(kt,$t,Tt=""){kt.href=this.linkService.getAnchorUrl(""),kt.onclick=()=>(this.linkService.executeSetOCGState($t),!1),Tt&&(kt.title=Tt),Br(this,dp,_m).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const dt=document.createElement("img");return dt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",dt.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),dt.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(dt),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(dt){var kt;this.data.hasOwnCanvas&&(((kt=dt.previousSibling)==null?void 0:kt.nodeName)==="CANVAS"&&(dt.previousSibling.hidden=!0),dt.hidden=!1)}_getKeyModifier(dt){return util_FeatureTest.platform.isMac?dt.metaKey:dt.ctrlKey}_setEventListener(dt,kt,$t,Tt,Dt){$t.includes("mouse")?dt.addEventListener($t,Ft=>{var Ut;(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Tt,value:Dt(Ft),shift:Ft.shiftKey,modifier:this._getKeyModifier(Ft)}})}):dt.addEventListener($t,Ft=>{var Ut;if($t==="blur"){if(!kt.focused||!Ft.relatedTarget)return;kt.focused=!1}else if($t==="focus"){if(kt.focused)return;kt.focused=!0}Dt&&((Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Tt,value:Dt(Ft)}}))})}_setEventListeners(dt,kt,$t,Tt){var Dt,Ft,Ut;for(const[Ht,Kt]of $t)(Kt==="Action"||(Dt=this.data.actions)!=null&&Dt[Kt])&&((Kt==="Focus"||Kt==="Blur")&&(kt||(kt={focused:!1})),this._setEventListener(dt,kt,Ht,Kt,Tt),Kt==="Focus"&&!((Ft=this.data.actions)!=null&&Ft.Blur)?this._setEventListener(dt,kt,"blur","Blur",null):Kt==="Blur"&&!((Ut=this.data.actions)!=null&&Ut.Focus)&&this._setEventListener(dt,kt,"focus","Focus",null))}_setBackgroundColor(dt){const kt=this.data.backgroundColor||null;dt.style.backgroundColor=kt===null?"transparent":Util.makeHexColor(kt[0],kt[1],kt[2])}_setTextStyle(dt){const kt=["left","center","right"],{fontColor:$t}=this.data.defaultAppearanceData,Tt=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,Dt=dt.style;let Ft;const Ut=2,Ht=Kt=>Math.round(10*Kt)/10;if(this.data.multiLine){const Kt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ut),Yt=Math.round(Kt/(LINE_FACTOR*Tt))||1,Jt=Kt/Yt;Ft=Math.min(Tt,Ht(Jt/LINE_FACTOR))}else{const Kt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ut);Ft=Math.min(Tt,Ht(Kt/LINE_FACTOR))}Dt.fontSize=`calc(${Ft}px * var(--total-scale-factor))`,Dt.color=Util.makeHexColor($t[0],$t[1],$t[2]),this.data.textAlignment!==null&&(Dt.textAlign=kt[this.data.textAlignment])}_setRequired(dt,kt){kt?dt.setAttribute("required",!0):dt.removeAttribute("required"),dt.setAttribute("aria-required",kt)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){const kt=dt.renderForms||dt.data.hasOwnCanvas||!dt.data.hasAppearance&&!!dt.data.fieldValue;super(dt,{isRenderable:kt})}setPropertyOnSiblings(dt,kt,$t,Tt){const Dt=this.annotationStorage;for(const Ft of this._getElementsByName(dt.name,dt.id))Ft.domElement&&(Ft.domElement[kt]=$t),Dt.setValue(Ft.id,{[Tt]:$t})}render(){var Tt,Dt;const dt=this.annotationStorage,kt=this.data.id;this.container.classList.add("textWidgetAnnotation");let $t=null;if(this.renderForms){const Ft=dt.getValue(kt,{value:this.data.fieldValue});let Ut=Ft.value||"";const Ht=dt.getValue(kt,{charLimit:this.data.maxLen}).charLimit;Ht&&Ut.length>Ht&&(Ut=Ut.slice(0,Ht));let Kt=Ft.formattedValue||((Tt=this.data.textContent)==null?void 0:Tt.join(`
`))||null;Kt&&this.data.comb&&(Kt=Kt.replaceAll(/\s+/g,""));const Yt={userValue:Ut,formattedValue:Kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?($t=document.createElement("textarea"),$t.textContent=Kt??Ut,this.data.doNotScroll&&($t.style.overflowY="hidden")):($t=document.createElement("input"),$t.type=this.data.password?"password":"text",$t.setAttribute("value",Kt??Ut),this.data.doNotScroll&&($t.style.overflowX="hidden")),this.data.hasOwnCanvas&&($t.hidden=!0),GetElementsByNameSet.add($t),$t.setAttribute("data-element-id",kt),$t.disabled=this.data.readOnly,$t.name=this.data.fieldName,$t.tabIndex=0;const{datetimeFormat:Jt,datetimeType:Zt,timeStep:er}=this.data,rr=!!Zt&&this.enableScripting;Jt&&($t.title=Jt),this._setRequired($t,this.data.required),Ht&&($t.maxLength=Ht),$t.addEventListener("input",nr=>{dt.setValue(kt,{value:nr.target.value}),this.setPropertyOnSiblings($t,"value",nr.target.value,"value"),Yt.formattedValue=null}),$t.addEventListener("resetform",nr=>{const ir=this.data.defaultFieldValue??"";$t.value=Yt.userValue=ir,Yt.formattedValue=null});let sr=nr=>{const{formattedValue:ir}=Yt;ir!=null&&(nr.target.value=ir),nr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){$t.addEventListener("focus",ir=>{var or;if(Yt.focused)return;const{target:lr}=ir;if(rr&&(lr.type=Zt,er&&(lr.step=er)),Yt.userValue){const cr=Yt.userValue;if(rr)if(Zt==="time"){const dr=new Date(cr),ur=[dr.getHours(),dr.getMinutes(),dr.getSeconds()];lr.value=ur.map(pr=>pr.toString().padStart(2,"0")).join(":")}else lr.value=new Date(cr-TIMEZONE_OFFSET).toISOString().split(Zt==="date"?"T":".",1)[0];else lr.value=cr}Yt.lastCommittedValue=lr.value,Yt.commitKey=1,(or=this.data.actions)!=null&&or.Focus||(Yt.focused=!0)}),$t.addEventListener("updatefromsandbox",ir=>{this.showElementAndHideCanvas(ir.target);const lr={value(or){Yt.userValue=or.detail.value??"",rr||dt.setValue(kt,{value:Yt.userValue.toString()}),or.target.value=Yt.userValue},formattedValue(or){const{formattedValue:cr}=or.detail;Yt.formattedValue=cr,cr!=null&&or.target!==document.activeElement&&(or.target.value=cr);const dr={formattedValue:cr};rr&&(dr.value=cr),dt.setValue(kt,dr)},selRange(or){or.target.setSelectionRange(...or.detail.selRange)},charLimit:or=>{var pr;const{charLimit:cr}=or.detail,{target:dr}=or;if(cr===0){dr.removeAttribute("maxLength");return}dr.setAttribute("maxLength",cr);let ur=Yt.userValue;!ur||ur.length<=cr||(ur=ur.slice(0,cr),dr.value=Yt.userValue=ur,dt.setValue(kt,{value:ur}),(pr=this.linkService.eventBus)==null||pr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:ur,willCommit:!0,commitKey:1,selStart:dr.selectionStart,selEnd:dr.selectionEnd}}))}};this._dispatchEventFromSandbox(lr,ir)}),$t.addEventListener("keydown",ir=>{var cr;Yt.commitKey=1;let lr=-1;if(ir.key==="Escape"?lr=0:ir.key==="Enter"&&!this.data.multiLine?lr=2:ir.key==="Tab"&&(Yt.commitKey=3),lr===-1)return;const{value:or}=ir.target;Yt.lastCommittedValue!==or&&(Yt.lastCommittedValue=or,Yt.userValue=or,(cr=this.linkService.eventBus)==null||cr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:or,willCommit:!0,commitKey:lr,selStart:ir.target.selectionStart,selEnd:ir.target.selectionEnd}}))});const nr=sr;sr=null,$t.addEventListener("blur",ir=>{var cr,dr;if(!Yt.focused||!ir.relatedTarget)return;(cr=this.data.actions)!=null&&cr.Blur||(Yt.focused=!1);const{target:lr}=ir;let{value:or}=lr;if(rr){if(or&&Zt==="time"){const ur=or.split(":").map(pr=>parseInt(pr,10));or=new Date(2e3,0,1,ur[0],ur[1],ur[2]||0).valueOf(),lr.step=""}else or.includes("T")||(or=`${or}T00:00`),or=new Date(or).valueOf();lr.type="text"}Yt.userValue=or,Yt.lastCommittedValue!==or&&((dr=this.linkService.eventBus)==null||dr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:or,willCommit:!0,commitKey:Yt.commitKey,selStart:ir.target.selectionStart,selEnd:ir.target.selectionEnd}})),nr(ir)}),(Dt=this.data.actions)!=null&&Dt.Keystroke&&$t.addEventListener("beforeinput",ir=>{var jr;Yt.lastCommittedValue=null;const{data:lr,target:or}=ir,{value:cr,selectionStart:dr,selectionEnd:ur}=or;let pr=dr,mr=ur;switch(ir.inputType){case"deleteWordBackward":{const Rr=cr.substring(0,dr).match(/\w*[^\w]*$/);Rr&&(pr-=Rr[0].length);break}case"deleteWordForward":{const Rr=cr.substring(dr).match(/^[^\w]*\w*/);Rr&&(mr+=Rr[0].length);break}case"deleteContentBackward":dr===ur&&(pr-=1);break;case"deleteContentForward":dr===ur&&(mr+=1);break}ir.preventDefault(),(jr=this.linkService.eventBus)==null||jr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:cr,change:lr||"",willCommit:!1,selStart:pr,selEnd:mr}})}),this._setEventListeners($t,Yt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ir=>ir.target.value)}if(sr&&$t.addEventListener("blur",sr),this.data.comb){const ir=(this.data.rect[2]-this.data.rect[0])/Ht;$t.classList.add("comb"),$t.style.letterSpacing=`calc(${ir}px * var(--total-scale-factor) - 1ch)`}}else $t=document.createElement("div"),$t.textContent=this.data.fieldValue,$t.style.verticalAlign="middle",$t.style.display="table-cell",this.data.hasOwnCanvas&&($t.hidden=!0);return this._setTextStyle($t),this._setBackgroundColor($t),this._setDefaultPropertiesFromJS($t),this.container.append($t),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:!!dt.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){const dt=this.annotationStorage,kt=this.data,$t=kt.id;let Tt=dt.getValue($t,{value:kt.exportValue===kt.fieldValue}).value;typeof Tt=="string"&&(Tt=Tt!=="Off",dt.setValue($t,{value:Tt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Dt=document.createElement("input");return GetElementsByNameSet.add(Dt),Dt.setAttribute("data-element-id",$t),Dt.disabled=kt.readOnly,this._setRequired(Dt,this.data.required),Dt.type="checkbox",Dt.name=kt.fieldName,Tt&&Dt.setAttribute("checked",!0),Dt.setAttribute("exportValue",kt.exportValue),Dt.tabIndex=0,Dt.addEventListener("change",Ft=>{const{name:Ut,checked:Ht}=Ft.target;for(const Kt of this._getElementsByName(Ut,$t)){const Yt=Ht&&Kt.exportValue===kt.exportValue;Kt.domElement&&(Kt.domElement.checked=Yt),dt.setValue(Kt.id,{value:Yt})}dt.setValue($t,{value:Ht})}),Dt.addEventListener("resetform",Ft=>{const Ut=kt.defaultFieldValue||"Off";Ft.target.checked=Ut===kt.exportValue}),this.enableScripting&&this.hasJSActions&&(Dt.addEventListener("updatefromsandbox",Ft=>{const Ut={value(Ht){Ht.target.checked=Ht.detail.value!=="Off",dt.setValue($t,{value:Ht.target.checked})}};this._dispatchEventFromSandbox(Ut,Ft)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ft=>Ft.target.checked)),this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const dt=this.annotationStorage,kt=this.data,$t=kt.id;let Tt=dt.getValue($t,{value:kt.fieldValue===kt.buttonValue}).value;if(typeof Tt=="string"&&(Tt=Tt!==kt.buttonValue,dt.setValue($t,{value:Tt})),Tt)for(const Ft of this._getElementsByName(kt.fieldName,$t))dt.setValue(Ft.id,{value:!1});const Dt=document.createElement("input");if(GetElementsByNameSet.add(Dt),Dt.setAttribute("data-element-id",$t),Dt.disabled=kt.readOnly,this._setRequired(Dt,this.data.required),Dt.type="radio",Dt.name=kt.fieldName,Tt&&Dt.setAttribute("checked",!0),Dt.tabIndex=0,Dt.addEventListener("change",Ft=>{const{name:Ut,checked:Ht}=Ft.target;for(const Kt of this._getElementsByName(Ut,$t))dt.setValue(Kt.id,{value:!1});dt.setValue($t,{value:Ht})}),Dt.addEventListener("resetform",Ft=>{const Ut=kt.defaultFieldValue;Ft.target.checked=Ut!=null&&Ut===kt.buttonValue}),this.enableScripting&&this.hasJSActions){const Ft=kt.buttonValue;Dt.addEventListener("updatefromsandbox",Ut=>{const Ht={value:Kt=>{const Yt=Ft===Kt.detail.value;for(const Jt of this._getElementsByName(Kt.target.name)){const Zt=Yt&&Jt.id===$t;Jt.domElement&&(Jt.domElement.checked=Zt),dt.setValue(Jt.id,{value:Zt})}}};this._dispatchEventFromSandbox(Ht,Ut)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ut=>Ut.target.checked)}return this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(dt){super(dt,{ignoreBorder:dt.data.hasAppearance})}render(){const dt=super.render();dt.classList.add("buttonWidgetAnnotation","pushButton");const kt=dt.lastChild;return this.enableScripting&&this.hasJSActions&&kt&&(this._setDefaultPropertiesFromJS(kt),kt.addEventListener("updatefromsandbox",$t=>{this._dispatchEventFromSandbox({},$t)})),dt}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const dt=this.annotationStorage,kt=this.data.id,$t=dt.getValue(kt,{value:this.data.fieldValue}),Tt=document.createElement("select");GetElementsByNameSet.add(Tt),Tt.setAttribute("data-element-id",kt),Tt.disabled=this.data.readOnly,this._setRequired(Tt,this.data.required),Tt.name=this.data.fieldName,Tt.tabIndex=0;let Dt=this.data.combo&&this.data.options.length>0;this.data.combo||(Tt.size=this.data.options.length,this.data.multiSelect&&(Tt.multiple=!0)),Tt.addEventListener("resetform",Yt=>{const Jt=this.data.defaultFieldValue;for(const Zt of Tt.options)Zt.selected=Zt.value===Jt});for(const Yt of this.data.options){const Jt=document.createElement("option");Jt.textContent=Yt.displayValue,Jt.value=Yt.exportValue,$t.value.includes(Yt.exportValue)&&(Jt.setAttribute("selected",!0),Dt=!1),Tt.append(Jt)}let Ft=null;if(Dt){const Yt=document.createElement("option");Yt.value=" ",Yt.setAttribute("hidden",!0),Yt.setAttribute("selected",!0),Tt.prepend(Yt),Ft=()=>{Yt.remove(),Tt.removeEventListener("input",Ft),Ft=null},Tt.addEventListener("input",Ft)}const Ut=Yt=>{const Jt=Yt?"value":"textContent",{options:Zt,multiple:er}=Tt;return er?Array.prototype.filter.call(Zt,rr=>rr.selected).map(rr=>rr[Jt]):Zt.selectedIndex===-1?null:Zt[Zt.selectedIndex][Jt]};let Ht=Ut(!1);const Kt=Yt=>{const Jt=Yt.target.options;return Array.prototype.map.call(Jt,Zt=>({displayValue:Zt.textContent,exportValue:Zt.value}))};return this.enableScripting&&this.hasJSActions?(Tt.addEventListener("updatefromsandbox",Yt=>{const Jt={value(Zt){Ft==null||Ft();const er=Zt.detail.value,rr=new Set(Array.isArray(er)?er:[er]);for(const sr of Tt.options)sr.selected=rr.has(sr.value);dt.setValue(kt,{value:Ut(!0)}),Ht=Ut(!1)},multipleSelection(Zt){Tt.multiple=!0},remove(Zt){const er=Tt.options,rr=Zt.detail.remove;er[rr].selected=!1,Tt.remove(rr),er.length>0&&Array.prototype.findIndex.call(er,nr=>nr.selected)===-1&&(er[0].selected=!0),dt.setValue(kt,{value:Ut(!0),items:Kt(Zt)}),Ht=Ut(!1)},clear(Zt){for(;Tt.length!==0;)Tt.remove(0);dt.setValue(kt,{value:null,items:[]}),Ht=Ut(!1)},insert(Zt){const{index:er,displayValue:rr,exportValue:sr}=Zt.detail.insert,nr=Tt.children[er],ir=document.createElement("option");ir.textContent=rr,ir.value=sr,nr?nr.before(ir):Tt.append(ir),dt.setValue(kt,{value:Ut(!0),items:Kt(Zt)}),Ht=Ut(!1)},items(Zt){const{items:er}=Zt.detail;for(;Tt.length!==0;)Tt.remove(0);for(const rr of er){const{displayValue:sr,exportValue:nr}=rr,ir=document.createElement("option");ir.textContent=sr,ir.value=nr,Tt.append(ir)}Tt.options.length>0&&(Tt.options[0].selected=!0),dt.setValue(kt,{value:Ut(!0),items:Kt(Zt)}),Ht=Ut(!1)},indices(Zt){const er=new Set(Zt.detail.indices);for(const rr of Zt.target.options)rr.selected=er.has(rr.index);dt.setValue(kt,{value:Ut(!0)}),Ht=Ut(!1)},editable(Zt){Zt.target.disabled=!Zt.detail.editable}};this._dispatchEventFromSandbox(Jt,Yt)}),Tt.addEventListener("input",Yt=>{var er;const Jt=Ut(!0),Zt=Ut(!1);dt.setValue(kt,{value:Jt}),Yt.preventDefault(),(er=this.linkService.eventBus)==null||er.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:Ht,change:Zt,changeEx:Jt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Tt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Yt=>Yt.target.value)):Tt.addEventListener("input",function(Yt){dt.setValue(kt,{value:Ut(!0)})}),this.data.combo&&this._setTextStyle(Tt),this._setBackgroundColor(Tt),this._setDefaultPropertiesFromJS(Tt),this.container.append(Tt),this.container}}var bE,j$;class PopupAnnotationElement extends AnnotationElement{constructor(kt){const{data:$t,elements:Tt,parent:Dt}=kt,Ft=!!Dt._commentManager;super(kt,{isRenderable:!Ft&&AnnotationElement._hasPopupData($t)});yr(this,bE);if(this.elements=Tt,Ft&&AnnotationElement._hasPopupData($t)){const Ut=this.popup=Br(this,bE,j$).call(this);for(const Ht of Tt)Ht.popup=Ut}else this.popup=null}render(){const{container:kt}=this;kt.classList.add("popupAnnotation"),kt.role="comment";const $t=this.popup=Br(this,bE,j$).call(this),Tt=[];for(const Dt of this.elements)Dt.popup=$t,Dt.container.ariaHasPopup="dialog",Tt.push(Dt.data.id),Dt.addHighlightArea();return this.container.setAttribute("aria-controls",Tt.map(Dt=>`${AnnotationPrefix}${Dt}`).join(",")),this.container}}bE=new WeakSet,j$=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var El,tm,KR,YR,$y,Sy,Xn,$u,sm,Nx,_y,Cy,Su,wl,up,hp,oo,pp,im,yE,fp,Ay,Px,am,Ao,om,Ty,Tw,vE,w$,EE,R$,jE,k$,Ny,Nw,wE,$$,XR,ZS,QR,e_,JR,t_,ZR,r_,Py,Pw,My,Mw,RE,S$;class PopupElement{constructor({container:dt,color:kt,elements:$t,titleObj:Tt,modificationDate:Dt,contentsObj:Ft,richText:Ut,parent:Ht,rect:Kt,parentRect:Yt,open:Jt,commentManager:Zt=null}){yr(this,Ty);yr(this,vE);yr(this,EE);yr(this,jE);yr(this,Ny);yr(this,wE);yr(this,XR);yr(this,QR);yr(this,JR);yr(this,ZR);yr(this,Py);yr(this,My);yr(this,RE);yr(this,El,null);yr(this,tm,Br(this,JR,t_).bind(this));yr(this,KR,Br(this,RE,S$).bind(this));yr(this,YR,Br(this,My,Mw).bind(this));yr(this,$y,Br(this,Py,Pw).bind(this));yr(this,Sy,null);yr(this,Xn,null);yr(this,$u,null);yr(this,sm,null);yr(this,Nx,null);yr(this,_y,null);yr(this,Cy,null);yr(this,Su,!1);yr(this,wl,null);yr(this,up,null);yr(this,hp,null);yr(this,oo,null);yr(this,pp,null);yr(this,im,null);yr(this,yE,null);yr(this,fp,null);yr(this,Ay,null);yr(this,Px,null);yr(this,am,!1);yr(this,Ao,null);yr(this,om,null);vr(this,Xn,dt),vr(this,Ay,Tt),vr(this,$u,Ft),vr(this,fp,Ut),vr(this,_y,Ht),vr(this,Sy,kt),vr(this,yE,Kt),vr(this,Cy,Yt),vr(this,Nx,$t),vr(this,El,Zt),vr(this,Ao,$t[0]),vr(this,sm,PDFDateString.toDateObject(Dt)),this.trigger=$t.flatMap(er=>er.getElementsToTriggerPopup()),Zt?this.renderCommentButton():(Br(this,Ty,Tw).call(this),ar(this,Xn).hidden=!0,Jt&&Br(this,Py,Pw).call(this))}renderCommentButton(){if(ar(this,oo)||(ar(this,pp)||Br(this,vE,w$).call(this),!ar(this,pp)))return;const{signal:dt}=vr(this,up,new AbortController),kt=!!ar(this,Ao).extraPopupElement,$t=()=>{ar(this,El).toggleCommentPopup(this,!0,void 0,!kt)},Tt=()=>{ar(this,El).toggleCommentPopup(this,!1,!0,!kt)},Dt=()=>{ar(this,El).toggleCommentPopup(this,!1,!1)};if(kt){vr(this,oo,ar(this,Ao).container);for(const Ft of this.trigger)Ft.ariaHasPopup="dialog",Ft.ariaControls="commentPopup",Ft.addEventListener("keydown",ar(this,tm),{signal:dt}),Ft.addEventListener("click",$t,{signal:dt}),Ft.addEventListener("pointerenter",Tt,{signal:dt}),Ft.addEventListener("pointerleave",Dt,{signal:dt}),Ft.classList.add("popupTriggerArea")}else{const Ft=vr(this,oo,document.createElement("button"));Ft.className="annotationCommentButton";const Ut=ar(this,Ao).container;Ft.style.zIndex=Ut.style.zIndex+1,Ft.tabIndex=0,Ft.ariaHasPopup="dialog",Ft.ariaControls="commentPopup",Ft.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Br(this,jE,k$).call(this),Br(this,EE,R$).call(this),Ft.addEventListener("keydown",ar(this,tm),{signal:dt}),Ft.addEventListener("click",$t,{signal:dt}),Ft.addEventListener("pointerenter",Tt,{signal:dt}),Ft.addEventListener("pointerleave",Dt,{signal:dt}),Ut.after(Ft)}}get commentButtonColor(){const{color:dt,opacity:kt}=ar(this,Ao).commentData;return dt?ar(this,_y)._commentManager.makeCommentColor(dt,kt):null}focusCommentButton(){setTimeout(()=>{var dt;(dt=ar(this,oo))==null||dt.focus()},0)}getData(){const{richText:dt,color:kt,opacity:$t,creationDate:Tt,modificationDate:Dt}=ar(this,Ao).commentData;return{contentsObj:{str:this.comment},richText:dt,color:kt,opacity:$t,creationDate:Tt,modificationDate:Dt}}get elementBeforePopup(){return ar(this,oo)}get comment(){return ar(this,om)||vr(this,om,ar(this,Ao).commentText),ar(this,om)}set comment(dt){dt!==this.comment&&(ar(this,Ao).commentText=vr(this,om,dt))}get parentBoundingClientRect(){return ar(this,Ao).layer.getBoundingClientRect()}setCommentButtonStates({selected:dt,hasPopup:kt}){ar(this,oo)&&(ar(this,oo).classList.toggle("selected",dt),ar(this,oo).ariaExpanded=kt)}setSelectedCommentButton(dt){ar(this,oo).classList.toggle("selected",dt)}get commentPopupPosition(){if(ar(this,im))return ar(this,im);const{x:dt,y:kt,height:$t}=ar(this,oo).getBoundingClientRect(),{x:Tt,y:Dt,width:Ft,height:Ut}=ar(this,Ao).layer.getBoundingClientRect();return[(dt-Tt)/Ft,(kt+$t-Dt)/Ut]}set commentPopupPosition(dt){vr(this,im,dt)}hasDefaultPopupPosition(){return ar(this,im)===null}get commentButtonPosition(){return ar(this,pp)}get commentButtonWidth(){return ar(this,oo).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(dt){const[kt,$t]=ar(this,im)||this.commentButtonPosition.map(Kt=>Kt/100),Tt=this.parentBoundingClientRect,{x:Dt,y:Ft,width:Ut,height:Ht}=Tt;ar(this,El).showDialog(null,this,Dt+kt*Ut,Ft+$t*Ht,{...dt,parentDimensions:Tt})}render(){var $t,Tt;if(ar(this,wl))return;const dt=vr(this,wl,document.createElement("div"));if(dt.className="popup",ar(this,Sy)){const Dt=dt.style.outlineColor=Util.makeHexColor(...ar(this,Sy));dt.style.backgroundColor=`color-mix(in srgb, ${Dt} 30%, white)`}const kt=document.createElement("span");if(kt.className="header",($t=ar(this,Ay))!=null&&$t.str){const Dt=document.createElement("span");Dt.className="title",kt.append(Dt),{dir:Dt.dir,str:Dt.textContent}=ar(this,Ay)}if(dt.append(kt),ar(this,sm)){const Dt=document.createElement("time");Dt.className="popupDate",Dt.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),Dt.setAttribute("data-l10n-args",JSON.stringify({dateObj:ar(this,sm).valueOf()})),Dt.dateTime=ar(this,sm).toISOString(),kt.append(Dt)}renderRichText({html:ar(this,Ny,Nw)||ar(this,$u).str,dir:(Tt=ar(this,$u))==null?void 0:Tt.dir,className:"popupContent"},dt),ar(this,Xn).append(dt)}updateEdited({rect:dt,popup:kt,deleted:$t}){var Tt;if(ar(this,El)){$t?(this.remove(),vr(this,om,null)):kt&&(kt.deleted?this.remove():(Br(this,jE,k$).call(this),vr(this,om,kt.text))),dt&&(vr(this,pp,null),Br(this,vE,w$).call(this),Br(this,EE,R$).call(this));return}if($t||kt!=null&&kt.deleted){this.remove();return}Br(this,Ty,Tw).call(this),ar(this,Px)||vr(this,Px,{contentsObj:ar(this,$u),richText:ar(this,fp)}),dt&&vr(this,hp,null),kt&&kt.text&&(vr(this,fp,Br(this,QR,e_).call(this,kt.text)),vr(this,sm,PDFDateString.toDateObject(kt.date)),vr(this,$u,null)),(Tt=ar(this,wl))==null||Tt.remove(),vr(this,wl,null)}resetEdited(){var dt;ar(this,Px)&&({contentsObj:xa(this,$u)._,richText:xa(this,fp)._}=ar(this,Px),vr(this,Px,null),(dt=ar(this,wl))==null||dt.remove(),vr(this,wl,null),vr(this,hp,null))}remove(){var dt,kt,$t;if((dt=ar(this,up))==null||dt.abort(),vr(this,up,null),(kt=ar(this,wl))==null||kt.remove(),vr(this,wl,null),vr(this,am,!1),vr(this,Su,!1),($t=ar(this,oo))==null||$t.remove(),vr(this,oo,null),this.trigger)for(const Tt of this.trigger)Tt.classList.remove("popupTriggerArea")}forceHide(){vr(this,am,this.isVisible),ar(this,am)&&(ar(this,Xn).hidden=!0)}maybeShow(){ar(this,El)||(Br(this,Ty,Tw).call(this),ar(this,am)&&(ar(this,wl)||Br(this,My,Mw).call(this),vr(this,am,!1),ar(this,Xn).hidden=!1))}get isVisible(){return ar(this,El)?!1:ar(this,Xn).hidden===!1}}El=new WeakMap,tm=new WeakMap,KR=new WeakMap,YR=new WeakMap,$y=new WeakMap,Sy=new WeakMap,Xn=new WeakMap,$u=new WeakMap,sm=new WeakMap,Nx=new WeakMap,_y=new WeakMap,Cy=new WeakMap,Su=new WeakMap,wl=new WeakMap,up=new WeakMap,hp=new WeakMap,oo=new WeakMap,pp=new WeakMap,im=new WeakMap,yE=new WeakMap,fp=new WeakMap,Ay=new WeakMap,Px=new WeakMap,am=new WeakMap,Ao=new WeakMap,om=new WeakMap,Ty=new WeakSet,Tw=function(){var kt;if(ar(this,up))return;vr(this,up,new AbortController);const{signal:dt}=ar(this,up);for(const $t of this.trigger)$t.addEventListener("click",ar(this,$y),{signal:dt}),$t.addEventListener("pointerenter",ar(this,YR),{signal:dt}),$t.addEventListener("pointerleave",ar(this,KR),{signal:dt}),$t.classList.add("popupTriggerArea");for(const $t of ar(this,Nx))(kt=$t.container)==null||kt.addEventListener("keydown",ar(this,tm),{signal:dt})},vE=new WeakSet,w$=function(){const dt=ar(this,Nx).find(kt=>kt.hasCommentButton);dt&&vr(this,pp,dt._normalizePoint(dt.commentButtonPosition))},EE=new WeakSet,R$=function(){if(ar(this,Ao).extraPopupElement&&!ar(this,Ao).editor)return;this.renderCommentButton();const[dt,kt]=ar(this,pp),{style:$t}=ar(this,oo);$t.left=`calc(${dt}%)`,$t.top=`calc(${kt}% - var(--comment-button-dim))`},jE=new WeakSet,k$=function(){ar(this,Ao).extraPopupElement||(this.renderCommentButton(),ar(this,oo).style.backgroundColor=this.commentButtonColor||"")},Ny=new WeakSet,Nw=function(){const dt=ar(this,fp),kt=ar(this,$u);return dt!=null&&dt.str&&(!(kt!=null&&kt.str)||kt.str===dt.str)&&ar(this,fp).html||null},wE=new WeakSet,$$=function(){var dt,kt,$t;return(($t=(kt=(dt=ar(this,Ny,Nw))==null?void 0:dt.attributes)==null?void 0:kt.style)==null?void 0:$t.fontSize)||0},XR=new WeakSet,ZS=function(){var dt,kt,$t;return(($t=(kt=(dt=ar(this,Ny,Nw))==null?void 0:dt.attributes)==null?void 0:kt.style)==null?void 0:$t.color)||null},QR=new WeakSet,e_=function(dt){const kt=[],$t={str:dt,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:kt}]}},Tt={style:{color:ar(this,XR,ZS),fontSize:ar(this,wE,$$)?`calc(${ar(this,wE,$$)}px * var(--total-scale-factor))`:""}};for(const Dt of dt.split(`
`))kt.push({name:"span",value:Dt,attributes:Tt});return $t},JR=new WeakSet,t_=function(dt){dt.altKey||dt.shiftKey||dt.ctrlKey||dt.metaKey||(dt.key==="Enter"||dt.key==="Escape"&&ar(this,Su))&&Br(this,Py,Pw).call(this)},ZR=new WeakSet,r_=function(){if(ar(this,hp)!==null)return;const{page:{view:dt},viewport:{rawDims:{pageWidth:kt,pageHeight:$t,pageX:Tt,pageY:Dt}}}=ar(this,_y);let Ft=!!ar(this,Cy),Ut=Ft?ar(this,Cy):ar(this,yE);for(const rr of ar(this,Nx))if(!Ut||Util.intersect(rr.data.rect,Ut)!==null){Ut=rr.data.rect,Ft=!0;break}const Ht=Util.normalizeRect([Ut[0],dt[3]-Ut[1]+dt[1],Ut[2],dt[3]-Ut[3]+dt[1]]),Kt=5,Yt=Ft?Ut[2]-Ut[0]+Kt:0,Jt=Ht[0]+Yt,Zt=Ht[1];vr(this,hp,[100*(Jt-Tt)/kt,100*(Zt-Dt)/$t]);const{style:er}=ar(this,Xn);er.left=`${ar(this,hp)[0]}%`,er.top=`${ar(this,hp)[1]}%`},Py=new WeakSet,Pw=function(){if(ar(this,El)){ar(this,El).toggleCommentPopup(this,!1);return}vr(this,Su,!ar(this,Su)),ar(this,Su)?(Br(this,My,Mw).call(this),ar(this,Xn).addEventListener("click",ar(this,$y)),ar(this,Xn).addEventListener("keydown",ar(this,tm))):(Br(this,RE,S$).call(this),ar(this,Xn).removeEventListener("click",ar(this,$y)),ar(this,Xn).removeEventListener("keydown",ar(this,tm)))},My=new WeakSet,Mw=function(){ar(this,wl)||this.render(),this.isVisible?ar(this,Su)&&ar(this,Xn).classList.add("focused"):(Br(this,ZR,r_).call(this),ar(this,Xn).hidden=!1,ar(this,Xn).style.zIndex=parseInt(ar(this,Xn).style.zIndex)+1e3)},RE=new WeakSet,S$=function(){ar(this,Xn).classList.remove("focused"),!(ar(this,Su)||!this.isVisible)&&(ar(this,Xn).hidden=!0,ar(this,Xn).style.zIndex=parseInt(ar(this,Xn).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=dt.data.textContent,this.textPosition=dt.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const dt=document.createElement("div");dt.classList.add("annotationTextContent"),dt.setAttribute("role","comment");for(const kt of this.textContent){const $t=document.createElement("span");$t.textContent=kt,dt.append($t)}this.container.append(dt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kE;class LineAnnotationElement extends AnnotationElement{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});yr(this,kE,null)}render(){this.container.classList.add("lineAnnotation");const{data:kt,width:$t,height:Tt}=this,Dt=this.svgFactory.create($t,Tt,!0),Ft=vr(this,kE,this.svgFactory.createElement("svg:line"));return Ft.setAttribute("x1",kt.rect[2]-kt.lineCoordinates[0]),Ft.setAttribute("y1",kt.rect[3]-kt.lineCoordinates[1]),Ft.setAttribute("x2",kt.rect[2]-kt.lineCoordinates[2]),Ft.setAttribute("y2",kt.rect[3]-kt.lineCoordinates[3]),Ft.setAttribute("stroke-width",kt.borderStyle.width||1),Ft.setAttribute("stroke","transparent"),Ft.setAttribute("fill","transparent"),Dt.append(Ft),this.container.append(Dt),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,kE)}addHighlightArea(){this.container.classList.add("highlightArea")}}kE=new WeakMap;var $E;class SquareAnnotationElement extends AnnotationElement{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});yr(this,$E,null)}render(){this.container.classList.add("squareAnnotation");const{data:kt,width:$t,height:Tt}=this,Dt=this.svgFactory.create($t,Tt,!0),Ft=kt.borderStyle.width,Ut=vr(this,$E,this.svgFactory.createElement("svg:rect"));return Ut.setAttribute("x",Ft/2),Ut.setAttribute("y",Ft/2),Ut.setAttribute("width",$t-Ft),Ut.setAttribute("height",Tt-Ft),Ut.setAttribute("stroke-width",Ft||1),Ut.setAttribute("stroke","transparent"),Ut.setAttribute("fill","transparent"),Dt.append(Ut),this.container.append(Dt),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,$E)}addHighlightArea(){this.container.classList.add("highlightArea")}}$E=new WeakMap;var SE;class CircleAnnotationElement extends AnnotationElement{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});yr(this,SE,null)}render(){this.container.classList.add("circleAnnotation");const{data:kt,width:$t,height:Tt}=this,Dt=this.svgFactory.create($t,Tt,!0),Ft=kt.borderStyle.width,Ut=vr(this,SE,this.svgFactory.createElement("svg:ellipse"));return Ut.setAttribute("cx",$t/2),Ut.setAttribute("cy",Tt/2),Ut.setAttribute("rx",$t/2-Ft/2),Ut.setAttribute("ry",Tt/2-Ft/2),Ut.setAttribute("stroke-width",Ft||1),Ut.setAttribute("stroke","transparent"),Ut.setAttribute("fill","transparent"),Dt.append(Ut),this.container.append(Dt),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,SE)}addHighlightArea(){this.container.classList.add("highlightArea")}}SE=new WeakMap;var _E;class PolylineAnnotationElement extends AnnotationElement{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});yr(this,_E,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:kt,vertices:$t,borderStyle:Tt,popupRef:Dt},width:Ft,height:Ut}=this;if(!$t)return this.container;const Ht=this.svgFactory.create(Ft,Ut,!0);let Kt=[];for(let Jt=0,Zt=$t.length;Jt<Zt;Jt+=2){const er=$t[Jt]-kt[0],rr=kt[3]-$t[Jt+1];Kt.push(`${er},${rr}`)}Kt=Kt.join(" ");const Yt=vr(this,_E,this.svgFactory.createElement(this.svgElementName));return Yt.setAttribute("points",Kt),Yt.setAttribute("stroke-width",Tt.width||1),Yt.setAttribute("stroke","transparent"),Yt.setAttribute("fill","transparent"),Ht.append(Yt),this.container.append(Ht),!Dt&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,_E)}addHighlightArea(){this.container.classList.add("highlightArea")}}_E=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(dt){super(dt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var CE,Mx,AE,_$;class InkAnnotationElement extends AnnotationElement{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});yr(this,AE);yr(this,CE,null);yr(this,Mx,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:kt,rotation:$t,inkLists:Tt,borderStyle:Dt,popupRef:Ft}}=this,{transform:Ut,width:Ht,height:Kt}=Br(this,AE,_$).call(this,$t,kt),Yt=this.svgFactory.create(Ht,Kt,!0),Jt=vr(this,CE,this.svgFactory.createElement("svg:g"));Yt.append(Jt),Jt.setAttribute("stroke-width",Dt.width||1),Jt.setAttribute("stroke-linecap","round"),Jt.setAttribute("stroke-linejoin","round"),Jt.setAttribute("stroke-miterlimit",10),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Jt.setAttribute("transform",Ut);for(let Zt=0,er=Tt.length;Zt<er;Zt++){const rr=this.svgFactory.createElement(this.svgElementName);ar(this,Mx).push(rr),rr.setAttribute("points",Tt[Zt].join(",")),Jt.append(rr)}return!Ft&&this.hasPopupData&&this._createPopup(),this.container.append(Yt),this._editOnDoubleClick(),this.container}updateEdited(kt){super.updateEdited(kt);const{thickness:$t,points:Tt,rect:Dt}=kt,Ft=ar(this,CE);if($t>=0&&Ft.setAttribute("stroke-width",$t||1),Tt)for(let Ut=0,Ht=ar(this,Mx).length;Ut<Ht;Ut++)ar(this,Mx)[Ut].setAttribute("points",Tt[Ut].join(","));if(Dt){const{transform:Ut,width:Ht,height:Kt}=Br(this,AE,_$).call(this,this.data.rotation,Dt);Ft.parentElement.setAttribute("viewBox",`0 0 ${Ht} ${Kt}`),Ft.setAttribute("transform",Ut)}}getElementsToTriggerPopup(){return ar(this,Mx)}addHighlightArea(){this.container.classList.add("highlightArea")}}CE=new WeakMap,Mx=new WeakMap,AE=new WeakSet,_$=function(kt,$t){switch(kt){case 90:return{transform:`rotate(90) translate(${-$t[0]},${$t[1]}) scale(1,-1)`,width:$t[3]-$t[1],height:$t[2]-$t[0]};case 180:return{transform:`rotate(180) translate(${-$t[2]},${$t[1]}) scale(1,-1)`,width:$t[2]-$t[0],height:$t[3]-$t[1]};case 270:return{transform:`rotate(270) translate(${-$t[2]},${$t[3]}) scale(1,-1)`,width:$t[3]-$t[1],height:$t[2]-$t[0]};default:return{transform:`translate(${-$t[0]},${$t[3]}) scale(1,-1)`,width:$t[2]-$t[0],height:$t[3]-$t[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:dt,popupRef:kt}}=this;if(!kt&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),dt){const $t=document.createElement("mark");$t.classList.add("overlaidText"),$t.textContent=dt,this.container.append($t)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:dt,popupRef:kt}}=this;if(!kt&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),dt){const $t=document.createElement("u");$t.classList.add("overlaidText"),$t.textContent=dt,this.container.append($t)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:dt,popupRef:kt}}=this;if(!kt&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),dt){const $t=document.createElement("u");$t.classList.add("overlaidText"),$t.textContent=dt,this.container.append($t)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:dt,popupRef:kt}}=this;if(!kt&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),dt){const $t=document.createElement("s");$t.classList.add("overlaidText"),$t.textContent=dt,this.container.append($t)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var TE,NE,C$;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(kt){var Tt;super(kt,{isRenderable:!0});yr(this,NE);yr(this,TE,null);const{file:$t}=this.data;this.filename=$t.filename,this.content=$t.content,(Tt=this.linkService.eventBus)==null||Tt.dispatch("fileattachmentannotation",{source:this,...$t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:kt,data:$t}=this;let Tt;$t.hasAppearance||$t.fillAlpha===0?Tt=document.createElement("div"):(Tt=document.createElement("img"),Tt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test($t.name)?"paperclip":"pushpin"}.svg`,$t.fillAlpha&&$t.fillAlpha<1&&(Tt.style=`filter: opacity(${Math.round($t.fillAlpha*100)}%);`)),Tt.addEventListener("dblclick",Br(this,NE,C$).bind(this)),vr(this,TE,Tt);const{isMac:Dt}=util_FeatureTest.platform;return kt.addEventListener("keydown",Ft=>{Ft.key==="Enter"&&(Dt?Ft.metaKey:Ft.ctrlKey)&&Br(this,NE,C$).call(this)}),!$t.popupRef&&this.hasPopupData?this._createPopup():Tt.classList.add("popupTriggerArea"),kt.append(Tt),kt}getElementsToTriggerPopup(){return ar(this,TE)}addHighlightArea(){this.container.classList.add("highlightArea")}}TE=new WeakMap,NE=new WeakSet,C$=function(){var kt;(kt=this.downloadManager)==null||kt.openOrDownloadData(this.content,this.filename)};var Iy,Ix,Dy,lm,PE,Dx,ME,A$,IE,T$,DE;let AnnotationLayer$1=(DE=class{constructor({div:dt,accessibilityManager:kt,annotationCanvasMap:$t,annotationEditorUIManager:Tt,page:Dt,viewport:Ft,structTreeLayer:Ut,commentManager:Ht,linkService:Kt,annotationStorage:Yt}){yr(this,ME);yr(this,IE);yr(this,Iy,null);yr(this,Ix,null);yr(this,Dy,null);yr(this,lm,new Map);yr(this,PE,null);yr(this,Dx,null);this.div=dt,vr(this,Iy,kt),vr(this,Ix,$t),vr(this,PE,Ut||null),vr(this,Dx,Kt||null),vr(this,Dy,Yt||new AnnotationStorage),this.page=Dt,this.viewport=Ft,this.zIndex=0,this._annotationEditorUIManager=Tt,this._commentManager=Ht||null}hasEditableAnnotations(){return ar(this,lm).size>0}async render(dt){var Ft,Ut,Ht;const{annotations:kt}=dt,$t=this.div;setLayerDimensions($t,this.viewport);const Tt=new Map,Dt={data:null,layer:$t,linkService:ar(this,Dx),downloadManager:dt.downloadManager,imageResourcesPath:dt.imageResourcesPath||"",renderForms:dt.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:ar(this,Dy),enableComment:dt.enableComment===!0,enableScripting:dt.enableScripting===!0,hasJSActions:dt.hasJSActions,fieldObjects:dt.fieldObjects,parent:this,elements:null};for(const Kt of kt){if(Kt.noHTML)continue;const Yt=Kt.annotationType===AnnotationType.POPUP;if(Yt){const er=Tt.get(Kt.id);if(!er)continue;Dt.elements=er}else if(Kt.rect[2]===Kt.rect[0]||Kt.rect[3]===Kt.rect[1])continue;Dt.data=Kt;const Jt=AnnotationElementFactory.create(Dt);if(!Jt.isRenderable)continue;if(!Yt&&Kt.popupRef){const er=Tt.get(Kt.popupRef);er?er.push(Jt):Tt.set(Kt.popupRef,[Jt])}const Zt=Jt.render();Kt.hidden&&(Zt.style.visibility="hidden"),await Br(this,ME,A$).call(this,Zt,Kt.id,Dt.elements),(Ut=(Ft=Jt.extraPopupElement)==null?void 0:Ft.popup)==null||Ut.renderCommentButton(),Jt._isEditable&&(ar(this,lm).set(Jt.data.id,Jt),(Ht=this._annotationEditorUIManager)==null||Ht.renderAnnotationElement(Jt))}Br(this,IE,T$).call(this)}async addLinkAnnotations(dt){const kt={data:null,layer:this.div,linkService:ar(this,Dx),svgFactory:new DOMSVGFactory,parent:this};for(const $t of dt){$t.borderStyle||($t.borderStyle=DE._defaultBorderStyle),kt.data=$t;const Tt=AnnotationElementFactory.create(kt);if(!Tt.isRenderable)continue;const Dt=Tt.render();await Br(this,ME,A$).call(this,Dt,$t.id,null)}}update({viewport:dt}){const kt=this.div;this.viewport=dt,setLayerDimensions(kt,{rotation:dt.rotation}),Br(this,IE,T$).call(this),kt.hidden=!1}getEditableAnnotations(){return Array.from(ar(this,lm).values())}getEditableAnnotation(dt){return ar(this,lm).get(dt)}addFakeAnnotation(dt){var Ut;const{div:kt}=this,{id:$t,rotation:Tt}=dt,Dt=new EditorAnnotationElement({data:{id:$t,rect:dt.getPDFRect(),rotation:Tt},editor:dt,layer:kt,parent:this,enableComment:!!this._commentManager,linkService:ar(this,Dx),annotationStorage:ar(this,Dy)}),Ft=Dt.render();return kt.append(Ft),(Ut=ar(this,Iy))==null||Ut.moveElementInDOM(kt,Ft,Ft,!1),Dt.createOrUpdatePopup(),Dt}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Iy=new WeakMap,Ix=new WeakMap,Dy=new WeakMap,lm=new WeakMap,PE=new WeakMap,Dx=new WeakMap,ME=new WeakSet,A$=async function(dt,kt,$t){var Ut,Ht;const Tt=dt.firstChild||dt,Dt=Tt.id=`${AnnotationPrefix}${kt}`,Ft=await((Ut=ar(this,PE))==null?void 0:Ut.getAriaAttributes(Dt));if(Ft)for(const[Kt,Yt]of Ft)Tt.setAttribute(Kt,Yt);$t?$t.at(-1).container.after(dt):(this.div.append(dt),(Ht=ar(this,Iy))==null||Ht.moveElementInDOM(this.div,dt,Tt,!1))},IE=new WeakSet,T$=function(){var kt;if(!ar(this,Ix))return;const dt=this.div;for(const[$t,Tt]of ar(this,Ix)){const Dt=dt.querySelector(`[data-annotation-id="${$t}"]`);if(!Dt)continue;Tt.className="annotationContent";const{firstChild:Ft}=Dt;Ft?Ft.nodeName==="CANVAS"?Ft.replaceWith(Tt):Ft.classList.contains("annotationContent")?Ft.after(Tt):Ft.before(Tt):Dt.append(Tt);const Ut=ar(this,lm).get($t);Ut&&(Ut._hasNoCanvas?((kt=this._annotationEditorUIManager)==null||kt.setMissingCanvas($t,Dt.id,Tt),Ut._hasNoCanvas=!1):Ut.canvas=Tt)}ar(this,Ix).clear()},DE);const EOL_PATTERN=/\r\n?|\n/g;var Rl,FE,Fx,$l,t2,s_,r2,n_,s2,i_,Fy,Iw,Ly,Dw,Oy,Fw,n2,a_,LE,N$,i2,o_;const Fn=class Fn extends AnnotationEditor{constructor(kt){super({...kt,name:"freeTextEditor"});yr(this,t2);yr(this,r2);yr(this,s2);yr(this,Fy);yr(this,Oy);yr(this,n2);yr(this,i2);yr(this,Rl,"");yr(this,FE,`${this.id}-editor`);yr(this,Fx,null);yr(this,$l,void 0);Es(this,"_colorPicker",null);this.color=kt.color||Fn._defaultColor||AnnotationEditor._defaultLineColor,vr(this,$l,kt.fontSize||Fn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const kt=Fn.prototype,$t=Ft=>Ft.isEmpty(),Tt=AnnotationEditorUIManager.TRANSLATE_SMALL,Dt=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],kt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],kt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],kt._translateEmpty,{args:[-Tt,0],checker:$t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],kt._translateEmpty,{args:[-Dt,0],checker:$t}],[["ArrowRight","mac+ArrowRight"],kt._translateEmpty,{args:[Tt,0],checker:$t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],kt._translateEmpty,{args:[Dt,0],checker:$t}],[["ArrowUp","mac+ArrowUp"],kt._translateEmpty,{args:[0,-Tt],checker:$t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],kt._translateEmpty,{args:[0,-Dt],checker:$t}],[["ArrowDown","mac+ArrowDown"],kt._translateEmpty,{args:[0,Tt],checker:$t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],kt._translateEmpty,{args:[0,Dt],checker:$t}]]))}static initialize(kt,$t){AnnotationEditor.initialize(kt,$t);const Tt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Tt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(kt,$t){switch(kt){case AnnotationEditorParamsType.FREETEXT_SIZE:Fn._defaultFontSize=$t;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Fn._defaultColor=$t;break}}updateParams(kt,$t){switch(kt){case AnnotationEditorParamsType.FREETEXT_SIZE:Br(this,t2,s_).call(this,$t);break;case AnnotationEditorParamsType.FREETEXT_COLOR:Br(this,r2,n_).call(this,$t);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Fn._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Fn._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,ar(this,$l)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var kt;this.editorDiv.style.color=this.color,(kt=this._colorPicker)==null||kt.update(this.color),super.onUpdatedColor()}_translateEmpty(kt,$t){this._uiManager.translateSelectedEditors(kt,$t,!0)}getInitialTranslation(){const kt=this.parentScale;return[-Fn._internalPadding*kt,-(Fn._internalPadding+ar(this,$l))*kt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),vr(this,Fx,new AbortController);const kt=this._uiManager.combinedSignal(ar(this,Fx));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:kt}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:kt}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:kt}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:kt}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:kt}),!0}disableEditMode(){var kt;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ar(this,FE)),this._isDraggable=!0,(kt=ar(this,Fx))==null||kt.abort(),vr(this,Fx,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(kt){this._focusEventsAllowed&&(super.focusin(kt),kt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(kt){var $t;this.width||(this.enableEditMode(),kt&&this.editorDiv.focus(),($t=this._initialOptions)!=null&&$t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const kt=ar(this,Rl),$t=vr(this,Rl,Br(this,s2,i_).call(this).trimEnd());if(kt===$t)return;const Tt=Dt=>{if(vr(this,Rl,Dt),!Dt){this.remove();return}Br(this,Oy,Fw).call(this),this._uiManager.rebuild(this),Br(this,Fy,Iw).call(this)};this.addCommands({cmd:()=>{Tt($t)},undo:()=>{Tt(kt)},mustExec:!1}),Br(this,Fy,Iw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(kt){kt.target===this.div&&kt.key==="Enter"&&(this.enterInEditMode(),kt.preventDefault())}editorDivKeydown(kt){Fn._keyboardManager.exec(this,kt)}editorDivFocus(kt){this.isEditing=!0}editorDivBlur(kt){this.isEditing=!1}editorDivInput(kt){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let kt,$t;(this._isCopy||this.annotationElementId)&&(kt=this.x,$t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ar(this,FE)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:Tt}=this.editorDiv;if(Tt.fontSize=`calc(${ar(this,$l)}px * var(--total-scale-factor))`,Tt.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[Dt,Ft]=this.parentDimensions;if(this.annotationElementId){const{position:Ut}=this._initialData;let[Ht,Kt]=this.getInitialTranslation();[Ht,Kt]=this.pageTranslationToScreen(Ht,Kt);const[Yt,Jt]=this.pageDimensions,[Zt,er]=this.pageTranslation;let rr,sr;switch(this.rotation){case 0:rr=kt+(Ut[0]-Zt)/Yt,sr=$t+this.height-(Ut[1]-er)/Jt;break;case 90:rr=kt+(Ut[0]-Zt)/Yt,sr=$t-(Ut[1]-er)/Jt,[Ht,Kt]=[Kt,-Ht];break;case 180:rr=kt-this.width+(Ut[0]-Zt)/Yt,sr=$t-(Ut[1]-er)/Jt,[Ht,Kt]=[-Ht,-Kt];break;case 270:rr=kt+(Ut[0]-Zt-this.height*Jt)/Yt,sr=$t+(Ut[1]-er-this.width*Yt)/Jt,[Ht,Kt]=[-Kt,Ht];break}this.setAt(rr*Dt,sr*Ft,Ht,Kt)}else this._moveAfterPaste(kt,$t);Br(this,Oy,Fw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(kt){var rr,sr,nr;const $t=kt.clipboardData||window.clipboardData,{types:Tt}=$t;if(Tt.length===1&&Tt[0]==="text/plain")return;kt.preventDefault();const Dt=Br(rr=Fn,LE,N$).call(rr,$t.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!Dt)return;const Ft=window.getSelection();if(!Ft.rangeCount)return;this.editorDiv.normalize(),Ft.deleteFromDocument();const Ut=Ft.getRangeAt(0);if(!Dt.includes(`
`)){Ut.insertNode(document.createTextNode(Dt)),this.editorDiv.normalize(),Ft.collapseToStart();return}const{startContainer:Ht,startOffset:Kt}=Ut,Yt=[],Jt=[];if(Ht.nodeType===Node.TEXT_NODE){const ir=Ht.parentElement;if(Jt.push(Ht.nodeValue.slice(Kt).replaceAll(EOL_PATTERN,"")),ir!==this.editorDiv){let lr=Yt;for(const or of this.editorDiv.childNodes){if(or===ir){lr=Jt;continue}lr.push(Br(sr=Fn,Ly,Dw).call(sr,or))}}Yt.push(Ht.nodeValue.slice(0,Kt).replaceAll(EOL_PATTERN,""))}else if(Ht===this.editorDiv){let ir=Yt,lr=0;for(const or of this.editorDiv.childNodes)lr++===Kt&&(ir=Jt),ir.push(Br(nr=Fn,Ly,Dw).call(nr,or))}vr(this,Rl,`${Yt.join(`
`)}${Dt}${Jt.join(`
`)}`),Br(this,Oy,Fw).call(this);const Zt=new Range;let er=Math.sumPrecise(Yt.map(ir=>ir.length));for(const{firstChild:ir}of this.editorDiv.childNodes)if(ir.nodeType===Node.TEXT_NODE){const lr=ir.nodeValue.length;if(er<=lr){Zt.setStart(ir,er),Zt.setEnd(ir,er);break}er-=lr}Ft.removeAllRanges(),Ft.addRange(Zt)}get contentDiv(){return this.editorDiv}getPDFRect(){const kt=Fn._internalPadding*this.parentScale;return this.getRect(kt,kt)}static async deserialize(kt,$t,Tt){var Ut;let Dt=null;if(kt instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ht,fontColor:Kt},rect:Yt,rotation:Jt,id:Zt,popupRef:er,richText:rr,contentsObj:sr,creationDate:nr,modificationDate:ir},textContent:lr,textPosition:or,parent:{page:{pageNumber:cr}}}=kt;if(!lr||lr.length===0)return null;Dt=kt={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(Kt),fontSize:Ht,value:lr.join(`
`),position:or,pageIndex:cr-1,rect:Yt.slice(0),rotation:Jt,annotationElementId:Zt,id:Zt,deleted:!1,popupRef:er,comment:(sr==null?void 0:sr.str)||null,richText:rr,creationDate:nr,modificationDate:ir}}const Ft=await super.deserialize(kt,$t,Tt);return vr(Ft,$l,kt.fontSize),Ft.color=Util.makeHexColor(...kt.color),vr(Ft,Rl,Br(Ut=Fn,LE,N$).call(Ut,kt.value)),Ft._initialData=Dt,kt.comment&&Ft.setCommentData(kt),Ft}serialize(kt=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const $t=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),Tt=Object.assign(super.serialize(kt),{color:$t,fontSize:ar(this,$l),value:Br(this,n2,a_).call(this)});return this.addComment(Tt),kt?(Tt.isCopy=!0,Tt):this.annotationElementId&&!Br(this,i2,o_).call(this,Tt)?null:(Tt.id=this.annotationElementId,Tt)}renderAnnotationElement(kt){const $t=super.renderAnnotationElement(kt);if(!$t)return null;const{style:Tt}=$t;Tt.fontSize=`calc(${ar(this,$l)}px * var(--total-scale-factor))`,Tt.color=this.color,$t.replaceChildren();for(const Dt of ar(this,Rl).split(`
`)){const Ft=document.createElement("div");Ft.append(Dt?document.createTextNode(Dt):document.createElement("br")),$t.append(Ft)}return kt.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:ar(this,Rl)}}),$t}resetAnnotationElement(kt){super.resetAnnotationElement(kt),kt.resetEdited()}};Rl=new WeakMap,FE=new WeakMap,Fx=new WeakMap,$l=new WeakMap,t2=new WeakSet,s_=function(kt){const $t=Dt=>{this.editorDiv.style.fontSize=`calc(${Dt}px * var(--total-scale-factor))`,this.translate(0,-(Dt-ar(this,$l))*this.parentScale),vr(this,$l,Dt),Br(this,Fy,Iw).call(this)},Tt=ar(this,$l);this.addCommands({cmd:$t.bind(this,kt),undo:$t.bind(this,Tt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},r2=new WeakSet,n_=function(kt){const $t=Dt=>{this.color=Dt,this.onUpdatedColor()},Tt=this.color;this.addCommands({cmd:$t.bind(this,kt),undo:$t.bind(this,Tt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s2=new WeakSet,i_=function(){var Tt;const kt=[];this.editorDiv.normalize();let $t=null;for(const Dt of this.editorDiv.childNodes)($t==null?void 0:$t.nodeType)===Node.TEXT_NODE&&Dt.nodeName==="BR"||(kt.push(Br(Tt=Fn,Ly,Dw).call(Tt,Dt)),$t=Dt);return kt.join(`
`)},Fy=new WeakSet,Iw=function(){const[kt,$t]=this.parentDimensions;let Tt;if(this.isAttachedToDOM)Tt=this.div.getBoundingClientRect();else{const{currentLayer:Dt,div:Ft}=this,Ut=Ft.style.display,Ht=Ft.classList.contains("hidden");Ft.classList.remove("hidden"),Ft.style.display="hidden",Dt.div.append(this.div),Tt=Ft.getBoundingClientRect(),Ft.remove(),Ft.style.display=Ut,Ft.classList.toggle("hidden",Ht)}this.rotation%180===this.parentRotation%180?(this.width=Tt.width/kt,this.height=Tt.height/$t):(this.width=Tt.height/kt,this.height=Tt.width/$t),this.fixAndSetPosition()},Ly=new WeakSet,Dw=function(kt){return(kt.nodeType===Node.TEXT_NODE?kt.nodeValue:kt.innerText).replaceAll(EOL_PATTERN,"")},Oy=new WeakSet,Fw=function(){if(this.editorDiv.replaceChildren(),!!ar(this,Rl))for(const kt of ar(this,Rl).split(`
`)){const $t=document.createElement("div");$t.append(kt?document.createTextNode(kt):document.createElement("br")),this.editorDiv.append($t)}},n2=new WeakSet,a_=function(){return ar(this,Rl).replaceAll(""," ")},LE=new WeakSet,N$=function(kt){return kt.replaceAll(" ","")},i2=new WeakSet,o_=function(kt){const{value:$t,fontSize:Tt,color:Dt,pageIndex:Ft}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||kt.value!==$t||kt.fontSize!==Tt||kt.color.some((Ut,Ht)=>Ut!==Dt[Ht])||kt.pageIndex!==Ft},yr(Fn,Ly),yr(Fn,LE),Es(Fn,"_freeTextDefaultContent",""),Es(Fn,"_internalPadding",0),Es(Fn,"_defaultColor",null),Es(Fn,"_defaultFontSize",10),Es(Fn,"_type","freetext"),Es(Fn,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Fn;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(dt,kt){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(dt,kt,$t,Tt,Dt,Ft){Ft||(Ft=new Float32Array(dt.length));for(let Ut=0,Ht=dt.length;Ut<Ht;Ut+=2)Ft[Ut]=kt+dt[Ut]*Tt,Ft[Ut+1]=$t+dt[Ut+1]*Dt;return Ft}static _rescaleAndSwap(dt,kt,$t,Tt,Dt,Ft){Ft||(Ft=new Float32Array(dt.length));for(let Ut=0,Ht=dt.length;Ut<Ht;Ut+=2)Ft[Ut]=kt+dt[Ut+1]*Tt,Ft[Ut+1]=$t+dt[Ut]*Dt;return Ft}static _translate(dt,kt,$t,Tt){Tt||(Tt=new Float32Array(dt.length));for(let Dt=0,Ft=dt.length;Dt<Ft;Dt+=2)Tt[Dt]=kt+dt[Dt],Tt[Dt+1]=$t+dt[Dt+1];return Tt}static svgRound(dt){return Math.round(dt*1e4)}static _normalizePoint(dt,kt,$t,Tt,Dt){switch(Dt){case 90:return[1-kt/$t,dt/Tt];case 180:return[1-dt/$t,1-kt/Tt];case 270:return[kt/$t,1-dt/Tt];default:return[dt/$t,kt/Tt]}}static _normalizePagePoint(dt,kt,$t){switch($t){case 90:return[1-kt,dt];case 180:return[1-dt,1-kt];case 270:return[kt,1-dt];default:return[dt,kt]}}static createBezierPoints(dt,kt,$t,Tt,Dt,Ft){return[(dt+5*$t)/6,(kt+5*Tt)/6,(5*$t+Dt)/6,(5*Tt+Ft)/6,($t+Dt)/2,(Tt+Ft)/2]}}Es(Outline,"PRECISION",1e-4);var Sl,su,By,Vy,_u,Ys,Lx,Ox,OE,BE,zy,Uy,cm,VE,a2,o2,Bx,Dv,l2,l_,d2,c_,u2,d_,h2,u_,p2,h_,f2,p_;const Lu=class Lu{constructor({x:dt,y:kt},$t,Tt,Dt,Ft,Ut=0){yr(this,Bx);yr(this,l2);yr(this,d2);yr(this,u2);yr(this,h2);yr(this,p2);yr(this,f2);yr(this,Sl,void 0);yr(this,su,[]);yr(this,By,void 0);yr(this,Vy,void 0);yr(this,_u,[]);yr(this,Ys,new Float32Array(18));yr(this,Lx,void 0);yr(this,Ox,void 0);yr(this,OE,void 0);yr(this,BE,void 0);yr(this,zy,void 0);yr(this,Uy,void 0);yr(this,cm,[]);vr(this,Sl,$t),vr(this,Uy,Dt*Tt),vr(this,Vy,Ft),ar(this,Ys).set([NaN,NaN,NaN,NaN,dt,kt],6),vr(this,By,Ut),vr(this,BE,ar(Lu,VE)*Tt),vr(this,OE,ar(Lu,o2)*Tt),vr(this,zy,Tt),ar(this,cm).push(dt,kt)}isEmpty(){return isNaN(ar(this,Ys)[8])}add({x:dt,y:kt}){var jr;vr(this,Lx,dt),vr(this,Ox,kt);const[$t,Tt,Dt,Ft]=ar(this,Sl);let[Ut,Ht,Kt,Yt]=ar(this,Ys).subarray(8,12);const Jt=dt-Kt,Zt=kt-Yt,er=Math.hypot(Jt,Zt);if(er<ar(this,OE))return!1;const rr=er-ar(this,BE),sr=rr/er,nr=sr*Jt,ir=sr*Zt;let lr=Ut,or=Ht;Ut=Kt,Ht=Yt,Kt+=nr,Yt+=ir,(jr=ar(this,cm))==null||jr.push(dt,kt);const cr=-ir/rr,dr=nr/rr,ur=cr*ar(this,Uy),pr=dr*ar(this,Uy);return ar(this,Ys).set(ar(this,Ys).subarray(2,8),0),ar(this,Ys).set([Kt+ur,Yt+pr],4),ar(this,Ys).set(ar(this,Ys).subarray(14,18),12),ar(this,Ys).set([Kt-ur,Yt-pr],16),isNaN(ar(this,Ys)[6])?(ar(this,_u).length===0&&(ar(this,Ys).set([Ut+ur,Ht+pr],2),ar(this,_u).push(NaN,NaN,NaN,NaN,(Ut+ur-$t)/Dt,(Ht+pr-Tt)/Ft),ar(this,Ys).set([Ut-ur,Ht-pr],14),ar(this,su).push(NaN,NaN,NaN,NaN,(Ut-ur-$t)/Dt,(Ht-pr-Tt)/Ft)),ar(this,Ys).set([lr,or,Ut,Ht,Kt,Yt],6),!this.isEmpty()):(ar(this,Ys).set([lr,or,Ut,Ht,Kt,Yt],6),Math.abs(Math.atan2(or-Ht,lr-Ut)-Math.atan2(ir,nr))<Math.PI/2?([Ut,Ht,Kt,Yt]=ar(this,Ys).subarray(2,6),ar(this,_u).push(NaN,NaN,NaN,NaN,((Ut+Kt)/2-$t)/Dt,((Ht+Yt)/2-Tt)/Ft),[Ut,Ht,lr,or]=ar(this,Ys).subarray(14,18),ar(this,su).push(NaN,NaN,NaN,NaN,((lr+Ut)/2-$t)/Dt,((or+Ht)/2-Tt)/Ft),!0):([lr,or,Ut,Ht,Kt,Yt]=ar(this,Ys).subarray(0,6),ar(this,_u).push(((lr+5*Ut)/6-$t)/Dt,((or+5*Ht)/6-Tt)/Ft,((5*Ut+Kt)/6-$t)/Dt,((5*Ht+Yt)/6-Tt)/Ft,((Ut+Kt)/2-$t)/Dt,((Ht+Yt)/2-Tt)/Ft),[Kt,Yt,Ut,Ht,lr,or]=ar(this,Ys).subarray(12,18),ar(this,su).push(((lr+5*Ut)/6-$t)/Dt,((or+5*Ht)/6-Tt)/Ft,((5*Ut+Kt)/6-$t)/Dt,((5*Ht+Yt)/6-Tt)/Ft,((Ut+Kt)/2-$t)/Dt,((Ht+Yt)/2-Tt)/Ft),!0))}toSVGPath(){if(this.isEmpty())return"";const dt=ar(this,_u),kt=ar(this,su);if(isNaN(ar(this,Ys)[6])&&!this.isEmpty())return Br(this,l2,l_).call(this);const $t=[];$t.push(`M${dt[4]} ${dt[5]}`);for(let Tt=6;Tt<dt.length;Tt+=6)isNaN(dt[Tt])?$t.push(`L${dt[Tt+4]} ${dt[Tt+5]}`):$t.push(`C${dt[Tt]} ${dt[Tt+1]} ${dt[Tt+2]} ${dt[Tt+3]} ${dt[Tt+4]} ${dt[Tt+5]}`);Br(this,u2,d_).call(this,$t);for(let Tt=kt.length-6;Tt>=6;Tt-=6)isNaN(kt[Tt])?$t.push(`L${kt[Tt+4]} ${kt[Tt+5]}`):$t.push(`C${kt[Tt]} ${kt[Tt+1]} ${kt[Tt+2]} ${kt[Tt+3]} ${kt[Tt+4]} ${kt[Tt+5]}`);return Br(this,d2,c_).call(this,$t),$t.join(" ")}newFreeDrawOutline(dt,kt,$t,Tt,Dt,Ft){return new FreeDrawOutline(dt,kt,$t,Tt,Dt,Ft)}getOutlines(){var Jt;const dt=ar(this,_u),kt=ar(this,su),$t=ar(this,Ys),[Tt,Dt,Ft,Ut]=ar(this,Sl),Ht=new Float32Array((((Jt=ar(this,cm))==null?void 0:Jt.length)??0)+2);for(let Zt=0,er=Ht.length-2;Zt<er;Zt+=2)Ht[Zt]=(ar(this,cm)[Zt]-Tt)/Ft,Ht[Zt+1]=(ar(this,cm)[Zt+1]-Dt)/Ut;if(Ht[Ht.length-2]=(ar(this,Lx)-Tt)/Ft,Ht[Ht.length-1]=(ar(this,Ox)-Dt)/Ut,isNaN($t[6])&&!this.isEmpty())return Br(this,h2,u_).call(this,Ht);const Kt=new Float32Array(ar(this,_u).length+24+ar(this,su).length);let Yt=dt.length;for(let Zt=0;Zt<Yt;Zt+=2){if(isNaN(dt[Zt])){Kt[Zt]=Kt[Zt+1]=NaN;continue}Kt[Zt]=dt[Zt],Kt[Zt+1]=dt[Zt+1]}Yt=Br(this,f2,p_).call(this,Kt,Yt);for(let Zt=kt.length-6;Zt>=6;Zt-=6)for(let er=0;er<6;er+=2){if(isNaN(kt[Zt+er])){Kt[Yt]=Kt[Yt+1]=NaN,Yt+=2;continue}Kt[Yt]=kt[Zt+er],Kt[Yt+1]=kt[Zt+er+1],Yt+=2}return Br(this,p2,h_).call(this,Kt,Yt),this.newFreeDrawOutline(Kt,Ht,ar(this,Sl),ar(this,zy),ar(this,By),ar(this,Vy))}};Sl=new WeakMap,su=new WeakMap,By=new WeakMap,Vy=new WeakMap,_u=new WeakMap,Ys=new WeakMap,Lx=new WeakMap,Ox=new WeakMap,OE=new WeakMap,BE=new WeakMap,zy=new WeakMap,Uy=new WeakMap,cm=new WeakMap,VE=new WeakMap,a2=new WeakMap,o2=new WeakMap,Bx=new WeakSet,Dv=function(){const dt=ar(this,Ys).subarray(4,6),kt=ar(this,Ys).subarray(16,18),[$t,Tt,Dt,Ft]=ar(this,Sl);return[(ar(this,Lx)+(dt[0]-kt[0])/2-$t)/Dt,(ar(this,Ox)+(dt[1]-kt[1])/2-Tt)/Ft,(ar(this,Lx)+(kt[0]-dt[0])/2-$t)/Dt,(ar(this,Ox)+(kt[1]-dt[1])/2-Tt)/Ft]},l2=new WeakSet,l_=function(){const[dt,kt,$t,Tt]=ar(this,Sl),[Dt,Ft,Ut,Ht]=Br(this,Bx,Dv).call(this);return`M${(ar(this,Ys)[2]-dt)/$t} ${(ar(this,Ys)[3]-kt)/Tt} L${(ar(this,Ys)[4]-dt)/$t} ${(ar(this,Ys)[5]-kt)/Tt} L${Dt} ${Ft} L${Ut} ${Ht} L${(ar(this,Ys)[16]-dt)/$t} ${(ar(this,Ys)[17]-kt)/Tt} L${(ar(this,Ys)[14]-dt)/$t} ${(ar(this,Ys)[15]-kt)/Tt} Z`},d2=new WeakSet,c_=function(dt){const kt=ar(this,su);dt.push(`L${kt[4]} ${kt[5]} Z`)},u2=new WeakSet,d_=function(dt){const[kt,$t,Tt,Dt]=ar(this,Sl),Ft=ar(this,Ys).subarray(4,6),Ut=ar(this,Ys).subarray(16,18),[Ht,Kt,Yt,Jt]=Br(this,Bx,Dv).call(this);dt.push(`L${(Ft[0]-kt)/Tt} ${(Ft[1]-$t)/Dt} L${Ht} ${Kt} L${Yt} ${Jt} L${(Ut[0]-kt)/Tt} ${(Ut[1]-$t)/Dt}`)},h2=new WeakSet,u_=function(dt){const kt=ar(this,Ys),[$t,Tt,Dt,Ft]=ar(this,Sl),[Ut,Ht,Kt,Yt]=Br(this,Bx,Dv).call(this),Jt=new Float32Array(36);return Jt.set([NaN,NaN,NaN,NaN,(kt[2]-$t)/Dt,(kt[3]-Tt)/Ft,NaN,NaN,NaN,NaN,(kt[4]-$t)/Dt,(kt[5]-Tt)/Ft,NaN,NaN,NaN,NaN,Ut,Ht,NaN,NaN,NaN,NaN,Kt,Yt,NaN,NaN,NaN,NaN,(kt[16]-$t)/Dt,(kt[17]-Tt)/Ft,NaN,NaN,NaN,NaN,(kt[14]-$t)/Dt,(kt[15]-Tt)/Ft],0),this.newFreeDrawOutline(Jt,dt,ar(this,Sl),ar(this,zy),ar(this,By),ar(this,Vy))},p2=new WeakSet,h_=function(dt,kt){const $t=ar(this,su);return dt.set([NaN,NaN,NaN,NaN,$t[4],$t[5]],kt),kt+=6},f2=new WeakSet,p_=function(dt,kt){const $t=ar(this,Ys).subarray(4,6),Tt=ar(this,Ys).subarray(16,18),[Dt,Ft,Ut,Ht]=ar(this,Sl),[Kt,Yt,Jt,Zt]=Br(this,Bx,Dv).call(this);return dt.set([NaN,NaN,NaN,NaN,($t[0]-Dt)/Ut,($t[1]-Ft)/Ht,NaN,NaN,NaN,NaN,Kt,Yt,NaN,NaN,NaN,NaN,Jt,Zt,NaN,NaN,NaN,NaN,(Tt[0]-Dt)/Ut,(Tt[1]-Ft)/Ht],kt),kt+=24},yr(Lu,VE,8),yr(Lu,a2,2),yr(Lu,o2,ar(Lu,VE)+ar(Lu,a2));let FreeDrawOutliner=Lu;var Hy,Vx,mp,zE,_l,UE,Jn,m2,f_;class FreeDrawOutline extends Outline{constructor(kt,$t,Tt,Dt,Ft,Ut){super();yr(this,m2);yr(this,Hy,void 0);yr(this,Vx,new Float32Array(4));yr(this,mp,void 0);yr(this,zE,void 0);yr(this,_l,void 0);yr(this,UE,void 0);yr(this,Jn,void 0);vr(this,Jn,kt),vr(this,_l,$t),vr(this,Hy,Tt),vr(this,UE,Dt),vr(this,mp,Ft),vr(this,zE,Ut),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Br(this,m2,f_).call(this,Ut);const[Ht,Kt,Yt,Jt]=ar(this,Vx);for(let Zt=0,er=kt.length;Zt<er;Zt+=2)kt[Zt]=(kt[Zt]-Ht)/Yt,kt[Zt+1]=(kt[Zt+1]-Kt)/Jt;for(let Zt=0,er=$t.length;Zt<er;Zt+=2)$t[Zt]=($t[Zt]-Ht)/Yt,$t[Zt+1]=($t[Zt+1]-Kt)/Jt}toSVGPath(){const kt=[`M${ar(this,Jn)[4]} ${ar(this,Jn)[5]}`];for(let $t=6,Tt=ar(this,Jn).length;$t<Tt;$t+=6){if(isNaN(ar(this,Jn)[$t])){kt.push(`L${ar(this,Jn)[$t+4]} ${ar(this,Jn)[$t+5]}`);continue}kt.push(`C${ar(this,Jn)[$t]} ${ar(this,Jn)[$t+1]} ${ar(this,Jn)[$t+2]} ${ar(this,Jn)[$t+3]} ${ar(this,Jn)[$t+4]} ${ar(this,Jn)[$t+5]}`)}return kt.push("Z"),kt.join(" ")}serialize([kt,$t,Tt,Dt],Ft){const Ut=Tt-kt,Ht=Dt-$t;let Kt,Yt;switch(Ft){case 0:Kt=Outline._rescale(ar(this,Jn),kt,Dt,Ut,-Ht),Yt=Outline._rescale(ar(this,_l),kt,Dt,Ut,-Ht);break;case 90:Kt=Outline._rescaleAndSwap(ar(this,Jn),kt,$t,Ut,Ht),Yt=Outline._rescaleAndSwap(ar(this,_l),kt,$t,Ut,Ht);break;case 180:Kt=Outline._rescale(ar(this,Jn),Tt,$t,-Ut,Ht),Yt=Outline._rescale(ar(this,_l),Tt,$t,-Ut,Ht);break;case 270:Kt=Outline._rescaleAndSwap(ar(this,Jn),Tt,Dt,-Ut,-Ht),Yt=Outline._rescaleAndSwap(ar(this,_l),Tt,Dt,-Ut,-Ht);break}return{outline:Array.from(Kt),points:[Array.from(Yt)]}}get box(){return ar(this,Vx)}newOutliner(kt,$t,Tt,Dt,Ft,Ut=0){return new FreeDrawOutliner(kt,$t,Tt,Dt,Ft,Ut)}getNewOutline(kt,$t){const[Tt,Dt,Ft,Ut]=ar(this,Vx),[Ht,Kt,Yt,Jt]=ar(this,Hy),Zt=Ft*Yt,er=Ut*Jt,rr=Tt*Yt+Ht,sr=Dt*Jt+Kt,nr=this.newOutliner({x:ar(this,_l)[0]*Zt+rr,y:ar(this,_l)[1]*er+sr},ar(this,Hy),ar(this,UE),kt,ar(this,zE),$t??ar(this,mp));for(let ir=2;ir<ar(this,_l).length;ir+=2)nr.add({x:ar(this,_l)[ir]*Zt+rr,y:ar(this,_l)[ir+1]*er+sr});return nr.getOutlines()}}Hy=new WeakMap,Vx=new WeakMap,mp=new WeakMap,zE=new WeakMap,_l=new WeakMap,UE=new WeakMap,Jn=new WeakMap,m2=new WeakSet,f_=function(kt){const $t=ar(this,Jn);let Tt=$t[4],Dt=$t[5];const Ft=[Tt,Dt,Tt,Dt];let Ut=Tt,Ht=Dt,Kt=Tt,Yt=Dt;const Jt=kt?Math.max:Math.min,Zt=new Float32Array(4);for(let rr=6,sr=$t.length;rr<sr;rr+=6){const nr=$t[rr+4],ir=$t[rr+5];isNaN($t[rr])?(Util.pointBoundingBox(nr,ir,Ft),Ht>ir?(Ut=nr,Ht=ir):Ht===ir&&(Ut=Jt(Ut,nr)),Yt<ir?(Kt=nr,Yt=ir):Yt===ir&&(Kt=Jt(Kt,nr))):(Zt[0]=Zt[1]=1/0,Zt[2]=Zt[3]=-1/0,Util.bezierBoundingBox(Tt,Dt,...$t.slice(rr,rr+6),Zt),Util.rectBoundingBox(Zt[0],Zt[1],Zt[2],Zt[3],Ft),Ht>Zt[1]?(Ut=Zt[0],Ht=Zt[1]):Ht===Zt[1]&&(Ut=Jt(Ut,Zt[0])),Yt<Zt[3]?(Kt=Zt[2],Yt=Zt[3]):Yt===Zt[3]&&(Kt=Jt(Kt,Zt[2]))),Tt=nr,Dt=ir}const er=ar(this,Vx);er[0]=Ft[0]-ar(this,mp),er[1]=Ft[1]-ar(this,mp),er[2]=Ft[2]-Ft[0]+2*ar(this,mp),er[3]=Ft[3]-Ft[1]+2*ar(this,mp),this.firstPoint=[Ut,Ht],this.lastPoint=[Kt,Yt]};var HE,GE,WE,dm,nu,x2,m_,Gy,Lw,g2,x_,b2,g_,qE,P$;class HighlightOutliner{constructor(dt,kt=0,$t=0,Tt=!0){yr(this,x2);yr(this,Gy);yr(this,g2);yr(this,b2);yr(this,qE);yr(this,HE,void 0);yr(this,GE,void 0);yr(this,WE,void 0);yr(this,dm,[]);yr(this,nu,[]);const Dt=[1/0,1/0,-1/0,-1/0],Ut=10**-4;for(const{x:nr,y:ir,width:lr,height:or}of dt){const cr=Math.floor((nr-kt)/Ut)*Ut,dr=Math.ceil((nr+lr+kt)/Ut)*Ut,ur=Math.floor((ir-kt)/Ut)*Ut,pr=Math.ceil((ir+or+kt)/Ut)*Ut,mr=[cr,ur,pr,!0],jr=[dr,ur,pr,!1];ar(this,dm).push(mr,jr),Util.rectBoundingBox(cr,ur,dr,pr,Dt)}const Ht=Dt[2]-Dt[0]+2*$t,Kt=Dt[3]-Dt[1]+2*$t,Yt=Dt[0]-$t,Jt=Dt[1]-$t;let Zt=Tt?-1/0:1/0,er=1/0;const rr=ar(this,dm).at(Tt?-1:-2),sr=[rr[0],rr[2]];for(const nr of ar(this,dm)){const[ir,lr,or,cr]=nr;!cr&&Tt?lr<er?(er=lr,Zt=ir):lr===er&&(Zt=Math.max(Zt,ir)):cr&&!Tt&&(lr<er?(er=lr,Zt=ir):lr===er&&(Zt=Math.min(Zt,ir))),nr[0]=(ir-Yt)/Ht,nr[1]=(lr-Jt)/Kt,nr[2]=(or-Jt)/Kt}vr(this,HE,new Float32Array([Yt,Jt,Ht,Kt])),vr(this,GE,[Zt,er]),vr(this,WE,sr)}getOutlines(){ar(this,dm).sort((kt,$t)=>kt[0]-$t[0]||kt[1]-$t[1]||kt[2]-$t[2]);const dt=[];for(const kt of ar(this,dm))kt[3]?(dt.push(...Br(this,qE,P$).call(this,kt)),Br(this,g2,x_).call(this,kt)):(Br(this,b2,g_).call(this,kt),dt.push(...Br(this,qE,P$).call(this,kt)));return Br(this,x2,m_).call(this,dt)}}HE=new WeakMap,GE=new WeakMap,WE=new WeakMap,dm=new WeakMap,nu=new WeakMap,x2=new WeakSet,m_=function(dt){const kt=[],$t=new Set;for(const Ft of dt){const[Ut,Ht,Kt]=Ft;kt.push([Ut,Ht,Ft],[Ut,Kt,Ft])}kt.sort((Ft,Ut)=>Ft[1]-Ut[1]||Ft[0]-Ut[0]);for(let Ft=0,Ut=kt.length;Ft<Ut;Ft+=2){const Ht=kt[Ft][2],Kt=kt[Ft+1][2];Ht.push(Kt),Kt.push(Ht),$t.add(Ht),$t.add(Kt)}const Tt=[];let Dt;for(;$t.size>0;){const Ft=$t.values().next().value;let[Ut,Ht,Kt,Yt,Jt]=Ft;$t.delete(Ft);let Zt=Ut,er=Ht;for(Dt=[Ut,Kt],Tt.push(Dt);;){let rr;if($t.has(Yt))rr=Yt;else if($t.has(Jt))rr=Jt;else break;$t.delete(rr),[Ut,Ht,Kt,Yt,Jt]=rr,Zt!==Ut&&(Dt.push(Zt,er,Ut,er===Ht?Ht:Kt),Zt=Ut),er=er===Ht?Kt:Ht}Dt.push(Zt,er)}return new HighlightOutline(Tt,ar(this,HE),ar(this,GE),ar(this,WE))},Gy=new WeakSet,Lw=function(dt){const kt=ar(this,nu);let $t=0,Tt=kt.length-1;for(;$t<=Tt;){const Dt=$t+Tt>>1,Ft=kt[Dt][0];if(Ft===dt)return Dt;Ft<dt?$t=Dt+1:Tt=Dt-1}return Tt+1},g2=new WeakSet,x_=function([,dt,kt]){const $t=Br(this,Gy,Lw).call(this,dt);ar(this,nu).splice($t,0,[dt,kt])},b2=new WeakSet,g_=function([,dt,kt]){const $t=Br(this,Gy,Lw).call(this,dt);for(let Tt=$t;Tt<ar(this,nu).length;Tt++){const[Dt,Ft]=ar(this,nu)[Tt];if(Dt!==dt)break;if(Dt===dt&&Ft===kt){ar(this,nu).splice(Tt,1);return}}for(let Tt=$t-1;Tt>=0;Tt--){const[Dt,Ft]=ar(this,nu)[Tt];if(Dt!==dt)break;if(Dt===dt&&Ft===kt){ar(this,nu).splice(Tt,1);return}}},qE=new WeakSet,P$=function(dt){const[kt,$t,Tt]=dt,Dt=[[kt,$t,Tt]],Ft=Br(this,Gy,Lw).call(this,Tt);for(let Ut=0;Ut<Ft;Ut++){const[Ht,Kt]=ar(this,nu)[Ut];for(let Yt=0,Jt=Dt.length;Yt<Jt;Yt++){const[,Zt,er]=Dt[Yt];if(!(Kt<=Zt||er<=Ht)){if(Zt>=Ht){if(er>Kt)Dt[Yt][1]=Kt;else{if(Jt===1)return[];Dt.splice(Yt,1),Yt--,Jt--}continue}Dt[Yt][2]=Ht,er>Kt&&Dt.push([kt,Kt,er])}}}return Dt};var KE,Wy;class HighlightOutline extends Outline{constructor(kt,$t,Tt,Dt){super();yr(this,KE,void 0);yr(this,Wy,void 0);vr(this,Wy,kt),vr(this,KE,$t),this.firstPoint=Tt,this.lastPoint=Dt}toSVGPath(){const kt=[];for(const $t of ar(this,Wy)){let[Tt,Dt]=$t;kt.push(`M${Tt} ${Dt}`);for(let Ft=2;Ft<$t.length;Ft+=2){const Ut=$t[Ft],Ht=$t[Ft+1];Ut===Tt?(kt.push(`V${Ht}`),Dt=Ht):Ht===Dt&&(kt.push(`H${Ut}`),Tt=Ut)}kt.push("Z")}return kt.join(" ")}serialize([kt,$t,Tt,Dt],Ft){const Ut=[],Ht=Tt-kt,Kt=Dt-$t;for(const Yt of ar(this,Wy)){const Jt=new Array(Yt.length);for(let Zt=0;Zt<Yt.length;Zt+=2)Jt[Zt]=kt+Yt[Zt]*Ht,Jt[Zt+1]=Dt-Yt[Zt+1]*Kt;Ut.push(Jt)}return Ut}get box(){return ar(this,KE)}get classNamesForOutlining(){return["highlightOutline"]}}KE=new WeakMap,Wy=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(dt,kt,$t,Tt,Dt,Ft){return new FreeHighlightOutline(dt,kt,$t,Tt,Dt,Ft)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(dt,kt,$t,Tt,Dt,Ft=0){return new FreeHighlightOutliner(dt,kt,$t,Tt,Dt,Ft)}}var qy,YE,xp,zx,XE,Go,QE,JE,Ux,Cl,Al,vo,Ky,Yy,To,Xy,Hl,ZE,$j,M$,Qy,Ow,y2,b_,v2,y_,E2,v_,_j,I$,gp,Cm,um,f0,j2,E_,Jy,Bw,Zy,Vw,w2,j_,R2,w_,k2,R_,$2,k_,S2,$_;const ln=class ln extends AnnotationEditor{constructor(kt){super({...kt,name:"highlightEditor"});yr(this,$j);yr(this,Qy);yr(this,y2);yr(this,v2);yr(this,E2);yr(this,_j);yr(this,gp);yr(this,j2);yr(this,Jy);yr(this,Zy);yr(this,w2);yr(this,R2);yr(this,S2);yr(this,qy,null);yr(this,YE,0);yr(this,xp,void 0);yr(this,zx,null);yr(this,XE,null);yr(this,Go,null);yr(this,QE,null);yr(this,JE,0);yr(this,Ux,null);yr(this,Cl,null);yr(this,Al,null);yr(this,vo,!1);yr(this,Ky,null);yr(this,Yy,null);yr(this,To,null);yr(this,Xy,"");yr(this,Hl,void 0);yr(this,ZE,"");this.color=kt.color||ln._defaultColor,vr(this,Hl,kt.thickness||ln._defaultThickness),this.opacity=kt.opacity||ln._defaultOpacity,vr(this,xp,kt.boxes||null),vr(this,ZE,kt.methodOfCreation||""),vr(this,Xy,kt.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",kt.highlightId>-1?(vr(this,vo,!0),Br(this,Qy,Ow).call(this,kt),Br(this,gp,Cm).call(this)):ar(this,xp)&&(vr(this,qy,kt.anchorNode),vr(this,YE,kt.anchorOffset),vr(this,QE,kt.focusNode),vr(this,JE,kt.focusOffset),Br(this,$j,M$).call(this),Br(this,gp,Cm).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const kt=ln.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],kt._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],kt._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],kt._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],kt._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:ar(this,vo)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:ar(this,Hl),methodOfCreation:ar(this,ZE)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(kt){return{numberOfColors:kt.get("color").size}}static initialize(kt,$t){var Tt;AnnotationEditor.initialize(kt,$t),ln._defaultColor||(ln._defaultColor=((Tt=$t.highlightColors)==null?void 0:Tt.values().next().value)||"#fff066")}static updateDefaultParams(kt,$t){switch(kt){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:ln._defaultColor=$t;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:ln._defaultThickness=$t;break}}translateInPage(kt,$t){}get toolbarPosition(){return ar(this,Yy)}get commentButtonPosition(){return ar(this,Ky)}updateParams(kt,$t){switch(kt){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Br(this,y2,b_).call(this,$t);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Br(this,v2,y_).call(this,$t);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,ln._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,ln._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||ln._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,ar(this,Hl)||ln._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,ar(this,vo)]]}onUpdatedColor(){var kt,$t;(kt=this.parent)==null||kt.drawLayer.updateProperties(ar(this,Al),{root:{fill:this.color,"fill-opacity":this.opacity}}),($t=ar(this,XE))==null||$t.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",vr(this,XE,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Br(this,Zy,Vw).call(this))}getBaseTranslation(){return[0,0]}getRect(kt,$t){return super.getRect(kt,$t,Br(this,Zy,Vw).call(this))}onceAdded(kt){this.annotationElementId||this.parent.addUndoableEditor(this),kt&&this.div.focus()}remove(){Br(this,_j,I$).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Br(this,gp,Cm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(kt){var Tt;let $t=!1;this.parent&&!kt?Br(this,_j,I$).call(this):kt&&(Br(this,gp,Cm).call(this,kt),$t=!this.parent&&((Tt=this.div)==null?void 0:Tt.classList.contains("selectedEditor"))),super.setParent(kt),this.show(this._isVisible),$t&&this.select()}rotate(kt){var Dt,Ft,Ut;const{drawLayer:$t}=this.parent;let Tt;ar(this,vo)?(kt=(kt-this.rotation+360)%360,Tt=Br(Dt=ln,um,f0).call(Dt,ar(this,Cl).box,kt)):Tt=Br(Ft=ln,um,f0).call(Ft,[this.x,this.y,this.width,this.height],kt),$t.updateProperties(ar(this,Al),{bbox:Tt,root:{"data-main-rotation":kt}}),$t.updateProperties(ar(this,To),{bbox:Br(Ut=ln,um,f0).call(Ut,ar(this,Go).box,kt),root:{"data-main-rotation":kt}})}render(){if(this.div)return this.div;const kt=super.render();ar(this,Xy)&&(kt.setAttribute("aria-label",ar(this,Xy)),kt.setAttribute("role","mark")),ar(this,vo)?kt.classList.add("free"):this.div.addEventListener("keydown",Br(this,j2,E_).bind(this),{signal:this._uiManager._signal});const $t=vr(this,Ux,document.createElement("div"));return kt.append($t),$t.setAttribute("aria-hidden","true"),$t.className="internal",$t.style.clipPath=ar(this,zx),this.setDims(this.width,this.height),bindEvents(this,ar(this,Ux),["pointerover","pointerleave"]),this.enableEditing(),kt}pointerover(){var kt;this.isSelected||(kt=this.parent)==null||kt.drawLayer.updateProperties(ar(this,To),{rootClass:{hovered:!0}})}pointerleave(){var kt;this.isSelected||(kt=this.parent)==null||kt.drawLayer.updateProperties(ar(this,To),{rootClass:{hovered:!1}})}_moveCaret(kt){switch(this.parent.unselect(this),kt){case 0:case 2:Br(this,Jy,Bw).call(this,!0);break;case 1:case 3:Br(this,Jy,Bw).call(this,!1);break}}select(){var kt;super.select(),ar(this,To)&&((kt=this.parent)==null||kt.drawLayer.updateProperties(ar(this,To),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var kt;super.unselect(),ar(this,To)&&((kt=this.parent)==null||kt.drawLayer.updateProperties(ar(this,To),{rootClass:{selected:!1}}),ar(this,vo)||Br(this,Jy,Bw).call(this,!1))}get _mustFixPosition(){return!ar(this,vo)}show(kt=this._isVisible){super.show(kt),this.parent&&(this.parent.drawLayer.updateProperties(ar(this,Al),{rootClass:{hidden:!kt}}),this.parent.drawLayer.updateProperties(ar(this,To),{rootClass:{hidden:!kt}}))}static startHighlighting(kt,$t,{target:Tt,x:Dt,y:Ft}){const{x:Ut,y:Ht,width:Kt,height:Yt}=Tt.getBoundingClientRect(),Jt=new AbortController,Zt=kt.combinedSignal(Jt),er=rr=>{Jt.abort(),Br(this,$2,k_).call(this,kt,rr)};window.addEventListener("blur",er,{signal:Zt}),window.addEventListener("pointerup",er,{signal:Zt}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:Zt}),window.addEventListener("contextmenu",noContextMenu,{signal:Zt}),Tt.addEventListener("pointermove",Br(this,k2,R_).bind(this,kt),{signal:Zt}),this._freeHighlight=new FreeHighlightOutliner({x:Dt,y:Ft},[Ut,Ht,Kt,Yt],kt.scale,this._defaultThickness/2,$t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=kt.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(kt,$t,Tt){var sr,nr,ir,lr;let Dt=null;if(kt instanceof HighlightAnnotationElement){const{data:{quadPoints:or,rect:cr,rotation:dr,id:ur,color:pr,opacity:mr,popupRef:jr,richText:Rr,contentsObj:br,creationDate:_r,modificationDate:Mr},parent:{page:{pageNumber:Pr}}}=kt;Dt=kt={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(pr),opacity:mr,quadPoints:or,boxes:null,pageIndex:Pr-1,rect:cr.slice(0),rotation:dr,annotationElementId:ur,id:ur,deleted:!1,popupRef:jr,richText:Rr,comment:(br==null?void 0:br.str)||null,creationDate:_r,modificationDate:Mr}}else if(kt instanceof InkAnnotationElement){const{data:{inkLists:or,rect:cr,rotation:dr,id:ur,color:pr,borderStyle:{rawWidth:mr},popupRef:jr,richText:Rr,contentsObj:br,creationDate:_r,modificationDate:Mr},parent:{page:{pageNumber:Pr}}}=kt;Dt=kt={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(pr),thickness:mr,inkLists:or,boxes:null,pageIndex:Pr-1,rect:cr.slice(0),rotation:dr,annotationElementId:ur,id:ur,deleted:!1,popupRef:jr,richText:Rr,comment:(br==null?void 0:br.str)||null,creationDate:_r,modificationDate:Mr}}const{color:Ft,quadPoints:Ut,inkLists:Ht,opacity:Kt}=kt,Yt=await super.deserialize(kt,$t,Tt);Yt.color=Util.makeHexColor(...Ft),Yt.opacity=Kt||1,Ht&&vr(Yt,Hl,kt.thickness),Yt._initialData=Dt,kt.comment&&Yt.setCommentData(kt);const[Jt,Zt]=Yt.pageDimensions,[er,rr]=Yt.pageTranslation;if(Ut){const or=vr(Yt,xp,[]);for(let cr=0;cr<Ut.length;cr+=8)or.push({x:(Ut[cr]-er)/Jt,y:1-(Ut[cr+1]-rr)/Zt,width:(Ut[cr+2]-Ut[cr])/Jt,height:(Ut[cr+1]-Ut[cr+5])/Zt});Br(sr=Yt,$j,M$).call(sr),Br(nr=Yt,gp,Cm).call(nr),Yt.rotate(Yt.rotation)}else if(Ht){vr(Yt,vo,!0);const or=Ht[0],cr={x:or[0]-er,y:Zt-(or[1]-rr)},dr=new FreeHighlightOutliner(cr,[0,0,Jt,Zt],1,ar(Yt,Hl)/2,!0,.001);for(let mr=0,jr=or.length;mr<jr;mr+=2)cr.x=or[mr]-er,cr.y=Zt-(or[mr+1]-rr),dr.add(cr);const{id:ur,clipPathId:pr}=$t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Yt.color,"fill-opacity":Yt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:dr.toSVGPath()}},!0,!0);Br(ir=Yt,Qy,Ow).call(ir,{highlightOutlines:dr.getOutlines(),highlightId:ur,clipPathId:pr}),Br(lr=Yt,gp,Cm).call(lr),Yt.rotate(Yt.parentRotation)}return Yt}serialize(kt=!1){if(this.isEmpty()||kt)return null;if(this.deleted)return this.serializeDeleted();const $t=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),Tt=super.serialize(kt);return Object.assign(Tt,{color:$t,opacity:this.opacity,thickness:ar(this,Hl),quadPoints:Br(this,w2,j_).call(this),outlines:Br(this,R2,w_).call(this,Tt.rect)}),this.addComment(Tt),this.annotationElementId&&!Br(this,S2,$_).call(this,Tt)?null:(Tt.id=this.annotationElementId,Tt)}renderAnnotationElement(kt){return this.deleted?(kt.hide(),null):(kt.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};qy=new WeakMap,YE=new WeakMap,xp=new WeakMap,zx=new WeakMap,XE=new WeakMap,Go=new WeakMap,QE=new WeakMap,JE=new WeakMap,Ux=new WeakMap,Cl=new WeakMap,Al=new WeakMap,vo=new WeakMap,Ky=new WeakMap,Yy=new WeakMap,To=new WeakMap,Xy=new WeakMap,Hl=new WeakMap,ZE=new WeakMap,$j=new WeakSet,M$=function(){const kt=new HighlightOutliner(ar(this,xp),.001);vr(this,Cl,kt.getOutlines()),[this.x,this.y,this.width,this.height]=ar(this,Cl).box;const $t=new HighlightOutliner(ar(this,xp),.0025,.001,this._uiManager.direction==="ltr");vr(this,Go,$t.getOutlines());const{firstPoint:Tt}=ar(this,Cl);vr(this,Ky,[(Tt[0]-this.x)/this.width,(Tt[1]-this.y)/this.height]);const{lastPoint:Dt}=ar(this,Go);vr(this,Yy,[(Dt[0]-this.x)/this.width,(Dt[1]-this.y)/this.height])},Qy=new WeakSet,Ow=function({highlightOutlines:kt,highlightId:$t,clipPathId:Tt}){var Zt,er;vr(this,Cl,kt);const Dt=1.5;if(vr(this,Go,kt.getNewOutline(ar(this,Hl)/2+Dt,.0025)),$t>=0)vr(this,Al,$t),vr(this,zx,Tt),this.parent.drawLayer.finalizeDraw($t,{bbox:kt.box,path:{d:kt.toSVGPath()}}),vr(this,To,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:ar(this,Go).box,path:{d:ar(this,Go).toSVGPath()}},!0));else if(this.parent){const rr=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(ar(this,Al),{bbox:Br(Zt=ln,um,f0).call(Zt,ar(this,Cl).box,(rr-this.rotation+360)%360),path:{d:kt.toSVGPath()}}),this.parent.drawLayer.updateProperties(ar(this,To),{bbox:Br(er=ln,um,f0).call(er,ar(this,Go).box,rr),path:{d:ar(this,Go).toSVGPath()}})}const[Ft,Ut,Ht,Kt]=kt.box;switch(this.rotation){case 0:this.x=Ft,this.y=Ut,this.width=Ht,this.height=Kt;break;case 90:{const[rr,sr]=this.parentDimensions;this.x=Ut,this.y=1-Ft,this.width=Ht*sr/rr,this.height=Kt*rr/sr;break}case 180:this.x=1-Ft,this.y=1-Ut,this.width=Ht,this.height=Kt;break;case 270:{const[rr,sr]=this.parentDimensions;this.x=1-Ut,this.y=Ft,this.width=Ht*sr/rr,this.height=Kt*rr/sr;break}}const{firstPoint:Yt}=kt;vr(this,Ky,[(Yt[0]-Ft)/Ht,(Yt[1]-Ut)/Kt]);const{lastPoint:Jt}=ar(this,Go);vr(this,Yy,[(Jt[0]-Ft)/Ht,(Jt[1]-Ut)/Kt])},y2=new WeakSet,b_=function(kt){const $t=(Ft,Ut)=>{this.color=Ft,this.opacity=Ut,this.onUpdatedColor()},Tt=this.color,Dt=this.opacity;this.addCommands({cmd:$t.bind(this,kt,ln._defaultOpacity),undo:$t.bind(this,Tt,Dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(kt)},!0)},v2=new WeakSet,y_=function(kt){const $t=ar(this,Hl),Tt=Dt=>{vr(this,Hl,Dt),Br(this,E2,v_).call(this,Dt)};this.addCommands({cmd:Tt.bind(this,kt),undo:Tt.bind(this,$t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:kt},!0)},E2=new WeakSet,v_=function(kt){ar(this,vo)&&(Br(this,Qy,Ow).call(this,{highlightOutlines:ar(this,Cl).getNewOutline(kt/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},_j=new WeakSet,I$=function(){ar(this,Al)===null||!this.parent||(this.parent.drawLayer.remove(ar(this,Al)),vr(this,Al,null),this.parent.drawLayer.remove(ar(this,To)),vr(this,To,null))},gp=new WeakSet,Cm=function(kt=this.parent){ar(this,Al)===null&&({id:xa(this,Al)._,clipPathId:xa(this,zx)._}=kt.drawLayer.draw({bbox:ar(this,Cl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:ar(this,vo)},path:{d:ar(this,Cl).toSVGPath()}},!1,!0),vr(this,To,kt.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:ar(this,vo)},bbox:ar(this,Go).box,path:{d:ar(this,Go).toSVGPath()}},ar(this,vo))),ar(this,Ux)&&(ar(this,Ux).style.clipPath=ar(this,zx)))},um=new WeakSet,f0=function([kt,$t,Tt,Dt],Ft){switch(Ft){case 90:return[1-$t-Dt,kt,Dt,Tt];case 180:return[1-kt-Tt,1-$t-Dt,Tt,Dt];case 270:return[$t,1-kt-Tt,Dt,Tt]}return[kt,$t,Tt,Dt]},j2=new WeakSet,E_=function(kt){ln._keyboardManager.exec(this,kt)},Jy=new WeakSet,Bw=function(kt){if(!ar(this,qy))return;const $t=window.getSelection();kt?$t.setPosition(ar(this,qy),ar(this,YE)):$t.setPosition(ar(this,QE),ar(this,JE))},Zy=new WeakSet,Vw=function(){return ar(this,vo)?this.rotation:0},w2=new WeakSet,j_=function(){if(ar(this,vo))return null;const[kt,$t]=this.pageDimensions,[Tt,Dt]=this.pageTranslation,Ft=ar(this,xp),Ut=new Float32Array(Ft.length*8);let Ht=0;for(const{x:Kt,y:Yt,width:Jt,height:Zt}of Ft){const er=Kt*kt+Tt,rr=(1-Yt)*$t+Dt;Ut[Ht]=Ut[Ht+4]=er,Ut[Ht+1]=Ut[Ht+3]=rr,Ut[Ht+2]=Ut[Ht+6]=er+Jt*kt,Ut[Ht+5]=Ut[Ht+7]=rr-Zt*$t,Ht+=8}return Ut},R2=new WeakSet,w_=function(kt){return ar(this,Cl).serialize(kt,Br(this,Zy,Vw).call(this))},k2=new WeakSet,R_=function(kt,$t){this._freeHighlight.add($t)&&kt.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},$2=new WeakSet,k_=function(kt,$t){this._freeHighlight.isEmpty()?kt.drawLayer.remove(this._freeHighlightId):kt.createAndAddNewEditor($t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},S2=new WeakSet,$_=function(kt){const{color:$t}=this._initialData;return this.hasEditedComment||kt.color.some((Tt,Dt)=>Tt!==$t[Dt])},yr(ln,um),yr(ln,k2),yr(ln,$2),Es(ln,"_defaultColor",null),Es(ln,"_defaultOpacity",1),Es(ln,"_defaultThickness",12),Es(ln,"_type","highlight"),Es(ln,"_editorType",AnnotationEditorType.HIGHLIGHT),Es(ln,"_freeHighlightId",-1),Es(ln,"_freeHighlight",null),Es(ln,"_freeHighlightClipId","");let HighlightEditor=ln;var Hx;class DrawingOptions{constructor(){yr(this,Hx,Object.create(null))}updateProperty(dt,kt){this[dt]=kt,this.updateSVGProperty(dt,kt)}updateProperties(dt){if(dt)for(const[kt,$t]of Object.entries(dt))kt.startsWith("_")||this.updateProperty(kt,$t)}updateSVGProperty(dt,kt){ar(this,Hx)[dt]=kt}toSVGProperties(){const dt=ar(this,Hx);return vr(this,Hx,Object.create(null)),{root:dt}}reset(){vr(this,Hx,Object.create(null))}updateAll(dt=this){this.updateProperties(dt)}clone(){unreachable("Not implemented")}}Hx=new WeakMap;var Tl,ev,co,Gx,Wx,hm,pm,fm,qx,ew,D$,tw,F$,rw,L$,Kx,Fv,_2,S_,tv,zw,Yx,Lv,mm,m0;const Cs=class Cs extends AnnotationEditor{constructor(kt){super(kt);yr(this,ew);yr(this,tw);yr(this,rw);yr(this,Kx);yr(this,_2);yr(this,tv);yr(this,Yx);yr(this,mm);yr(this,Tl,null);yr(this,ev,void 0);Es(this,"_colorPicker",null);Es(this,"_drawId",null);vr(this,ev,kt.mustBeCommitted||!1),this._addOutlines(kt)}onUpdatedColor(){var kt;(kt=this._colorPicker)==null||kt.update(this.color),super.onUpdatedColor()}_addOutlines(kt){kt.drawOutlines&&(Br(this,ew,D$).call(this,kt),Br(this,Kx,Fv).call(this))}static _mergeSVGProperties(kt,$t){const Tt=new Set(Object.keys(kt));for(const[Dt,Ft]of Object.entries($t))Tt.has(Dt)?Object.assign(kt[Dt],Ft):kt[Dt]=Ft;return kt}static getDefaultDrawingOptions(kt){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(kt,$t){const Tt=this.typesMap.get(kt);Tt&&this._defaultDrawingOptions.updateProperty(Tt,$t),this._currentParent&&(ar(Cs,co).updateProperty(Tt,$t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(kt,$t){const Tt=this.constructor.typesMap.get(kt);Tt&&this._updateProperty(kt,Tt,$t)}static get defaultPropertiesToUpdate(){const kt=[],$t=this._defaultDrawingOptions;for(const[Tt,Dt]of this.typesMap)kt.push([Tt,$t[Dt]]);return kt}get propertiesToUpdate(){const kt=[],{_drawingOptions:$t}=this;for(const[Tt,Dt]of this.constructor.typesMap)kt.push([Tt,$t[Dt]]);return kt}_updateProperty(kt,$t,Tt){const Dt=this._drawingOptions,Ft=Dt[$t],Ut=Ht=>{var Yt;Dt.updateProperty($t,Ht);const Kt=ar(this,Tl).updateProperty($t,Ht);Kt&&Br(this,Yx,Lv).call(this,Kt),(Yt=this.parent)==null||Yt.drawLayer.updateProperties(this._drawId,Dt.toSVGProperties()),kt===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:Ut.bind(this,Tt),undo:Ut.bind(this,Ft),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var kt;(kt=this.parent)==null||kt.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties(ar(this,Tl).getPathResizingSVGProperties(Br(this,tv,zw).call(this)),{bbox:Br(this,mm,m0).call(this)}))}_onResized(){var kt;(kt=this.parent)==null||kt.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties(ar(this,Tl).getPathResizedSVGProperties(Br(this,tv,zw).call(this)),{bbox:Br(this,mm,m0).call(this)}))}_onTranslating(kt,$t){var Tt;(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,{bbox:Br(this,mm,m0).call(this)})}_onTranslated(){var kt;(kt=this.parent)==null||kt.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties(ar(this,Tl).getPathTranslatedSVGProperties(Br(this,tv,zw).call(this),this.parentDimensions),{bbox:Br(this,mm,m0).call(this)}))}_onStartDragging(){var kt;(kt=this.parent)==null||kt.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var kt;(kt=this.parent)==null||kt.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(kt){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,ar(this,ev)&&(vr(this,ev,!1),this.commit(),this.parent.setSelected(this),kt&&this.isOnScreen&&this.div.focus())}remove(){Br(this,rw,L$).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Br(this,Kx,Fv).call(this),Br(this,Yx,Lv).call(this,ar(this,Tl).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(kt){var Tt;let $t=!1;this.parent&&!kt?(this._uiManager.removeShouldRescale(this),Br(this,rw,L$).call(this)):kt&&(this._uiManager.addShouldRescale(this),Br(this,Kx,Fv).call(this,kt),$t=!this.parent&&((Tt=this.div)==null?void 0:Tt.classList.contains("selectedEditor"))),super.setParent(kt),$t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties({bbox:Br(this,mm,m0).call(this)},ar(this,Tl).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Br(this,Yx,Lv).call(this,ar(this,Tl).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let kt,$t;this._isCopy&&(kt=this.x,$t=this.y);const Tt=super.render();Tt.classList.add("draw");const Dt=document.createElement("div");return Tt.append(Dt),Dt.setAttribute("aria-hidden","true"),Dt.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(kt,$t),Tt}static createDrawerInstance(kt,$t,Tt,Dt,Ft){unreachable("Not implemented")}static startDrawing(kt,$t,Tt,Dt){var nr;const{target:Ft,offsetX:Ut,offsetY:Ht,pointerId:Kt,pointerType:Yt}=Dt;if(ar(Cs,pm)&&ar(Cs,pm)!==Yt)return;const{viewport:{rotation:Jt}}=kt,{width:Zt,height:er}=Ft.getBoundingClientRect(),rr=vr(Cs,Gx,new AbortController),sr=kt.combinedSignal(rr);if(ar(Cs,hm)||vr(Cs,hm,Kt),ar(Cs,pm)??vr(Cs,pm,Yt),window.addEventListener("pointerup",ir=>{var lr;ar(Cs,hm)===ir.pointerId?this._endDraw(ir):(lr=ar(Cs,fm))==null||lr.delete(ir.pointerId)},{signal:sr}),window.addEventListener("pointercancel",ir=>{var lr;ar(Cs,hm)===ir.pointerId?this._currentParent.endDrawingSession():(lr=ar(Cs,fm))==null||lr.delete(ir.pointerId)},{signal:sr}),window.addEventListener("pointerdown",ir=>{ar(Cs,pm)===ir.pointerType&&((ar(Cs,fm)||vr(Cs,fm,new Set)).add(ir.pointerId),ar(Cs,co).isCancellable()&&(ar(Cs,co).removeLastElement(),ar(Cs,co).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:sr}),window.addEventListener("contextmenu",noContextMenu,{signal:sr}),Ft.addEventListener("pointermove",this._drawMove.bind(this),{signal:sr}),Ft.addEventListener("touchmove",ir=>{ir.timeStamp===ar(Cs,qx)&&stopEvent(ir)},{signal:sr}),kt.toggleDrawing(),(nr=$t._editorUndoBar)==null||nr.hide(),ar(Cs,co)){kt.drawLayer.updateProperties(this._currentDrawId,ar(Cs,co).startNew(Ut,Ht,Zt,er,Jt));return}$t.updateUIForDefaultProperties(this),vr(Cs,co,this.createDrawerInstance(Ut,Ht,Zt,er,Jt)),vr(Cs,Wx,this.getDefaultDrawingOptions()),this._currentParent=kt,{id:this._currentDrawId}=kt.drawLayer.draw(this._mergeSVGProperties(ar(Cs,Wx).toSVGProperties(),ar(Cs,co).defaultSVGProperties),!0,!1)}static _drawMove(kt){var Ft;if(vr(Cs,qx,-1),!ar(Cs,co))return;const{offsetX:$t,offsetY:Tt,pointerId:Dt}=kt;if(ar(Cs,hm)===Dt){if(((Ft=ar(Cs,fm))==null?void 0:Ft.size)>=1){this._endDraw(kt);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ar(Cs,co).add($t,Tt)),vr(Cs,qx,kt.timeStamp),stopEvent(kt)}}static _cleanup(kt){kt&&(this._currentDrawId=-1,this._currentParent=null,vr(Cs,co,null),vr(Cs,Wx,null),vr(Cs,pm,null),vr(Cs,qx,NaN)),ar(Cs,Gx)&&(ar(Cs,Gx).abort(),vr(Cs,Gx,null),vr(Cs,hm,NaN),vr(Cs,fm,null))}static _endDraw(kt){const $t=this._currentParent;if($t){if($t.toggleDrawing(!0),this._cleanup(!1),(kt==null?void 0:kt.target)===$t.div&&$t.drawLayer.updateProperties(this._currentDrawId,ar(Cs,co).end(kt.offsetX,kt.offsetY)),this.supportMultipleDrawings){const Tt=ar(Cs,co),Dt=this._currentDrawId,Ft=Tt.getLastElement();$t.addCommands({cmd:()=>{$t.drawLayer.updateProperties(Dt,Tt.setLastElement(Ft))},undo:()=>{$t.drawLayer.updateProperties(Dt,Tt.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(kt){const $t=this._currentParent;if(!$t)return null;if($t.toggleDrawing(!0),$t.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!ar(Cs,co).isEmpty()){const{pageDimensions:[Tt,Dt],scale:Ft}=$t,Ut=$t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ar(Cs,co).getOutlines(Tt*Ft,Dt*Ft,Ft,this._INNER_MARGIN),drawingOptions:ar(Cs,Wx),mustBeCommitted:!kt});return this._cleanup(!0),Ut}return $t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(kt){}static deserializeDraw(kt,$t,Tt,Dt,Ft,Ut){unreachable("Not implemented")}static async deserialize(kt,$t,Tt){var Jt,Zt;const{rawDims:{pageWidth:Dt,pageHeight:Ft,pageX:Ut,pageY:Ht}}=$t.viewport,Kt=this.deserializeDraw(Ut,Ht,Dt,Ft,this._INNER_MARGIN,kt),Yt=await super.deserialize(kt,$t,Tt);return Yt.createDrawingOptions(kt),Br(Jt=Yt,ew,D$).call(Jt,{drawOutlines:Kt}),Br(Zt=Yt,Kx,Fv).call(Zt),Yt.onScaleChanging(),Yt.rotate(),Yt}serializeDraw(kt){const[$t,Tt]=this.pageTranslation,[Dt,Ft]=this.pageDimensions;return ar(this,Tl).serialize([$t,Tt,Dt,Ft],kt)}renderAnnotationElement(kt){return kt.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Tl=new WeakMap,ev=new WeakMap,co=new WeakMap,Gx=new WeakMap,Wx=new WeakMap,hm=new WeakMap,pm=new WeakMap,fm=new WeakMap,qx=new WeakMap,ew=new WeakSet,D$=function({drawOutlines:kt,drawId:$t,drawingOptions:Tt}){vr(this,Tl,kt),this._drawingOptions||(this._drawingOptions=Tt),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),$t>=0?(this._drawId=$t,this.parent.drawLayer.finalizeDraw($t,kt.defaultProperties)):this._drawId=Br(this,tw,F$).call(this,kt,this.parent),Br(this,Yx,Lv).call(this,kt.box)},tw=new WeakSet,F$=function(kt,$t){const{id:Tt}=$t.drawLayer.draw(Cs._mergeSVGProperties(this._drawingOptions.toSVGProperties(),kt.defaultSVGProperties),!1,!1);return Tt},rw=new WeakSet,L$=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Kx=new WeakSet,Fv=function(kt=this.parent){if(!(this._drawId!==null&&this.parent===kt)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,kt.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=Br(this,tw,F$).call(this,ar(this,Tl),kt)}},_2=new WeakSet,S_=function([kt,$t,Tt,Dt]){const{parentDimensions:[Ft,Ut],rotation:Ht}=this;switch(Ht){case 90:return[$t,1-kt,Tt*(Ut/Ft),Dt*(Ft/Ut)];case 180:return[1-kt,1-$t,Tt,Dt];case 270:return[1-$t,kt,Tt*(Ut/Ft),Dt*(Ft/Ut)];default:return[kt,$t,Tt,Dt]}},tv=new WeakSet,zw=function(){const{x:kt,y:$t,width:Tt,height:Dt,parentDimensions:[Ft,Ut],rotation:Ht}=this;switch(Ht){case 90:return[1-$t,kt,Tt*(Ft/Ut),Dt*(Ut/Ft)];case 180:return[1-kt,1-$t,Tt,Dt];case 270:return[$t,1-kt,Tt*(Ft/Ut),Dt*(Ut/Ft)];default:return[kt,$t,Tt,Dt]}},Yx=new WeakSet,Lv=function(kt){[this.x,this.y,this.width,this.height]=Br(this,_2,S_).call(this,kt),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},mm=new WeakSet,m0=function(){const{x:kt,y:$t,width:Tt,height:Dt,rotation:Ft,parentRotation:Ut,parentDimensions:[Ht,Kt]}=this;switch((Ft*4+Ut)/90){case 1:return[1-$t-Dt,kt,Dt,Tt];case 2:return[1-kt-Tt,1-$t-Dt,Tt,Dt];case 3:return[$t,1-kt-Tt,Dt,Tt];case 4:return[kt,$t-Tt*(Ht/Kt),Dt*(Kt/Ht),Tt*(Ht/Kt)];case 5:return[1-$t,kt,Tt*(Ht/Kt),Dt*(Kt/Ht)];case 6:return[1-kt-Dt*(Kt/Ht),1-$t,Dt*(Kt/Ht),Tt*(Ht/Kt)];case 7:return[$t-Tt*(Ht/Kt),1-kt-Dt*(Kt/Ht),Tt*(Ht/Kt),Dt*(Kt/Ht)];case 8:return[kt-Tt,$t-Dt,Tt,Dt];case 9:return[1-$t,kt-Tt,Dt,Tt];case 10:return[1-kt,1-$t,Tt,Dt];case 11:return[$t-Dt,1-kt,Dt,Tt];case 12:return[kt-Dt*(Kt/Ht),$t,Dt*(Kt/Ht),Tt*(Ht/Kt)];case 13:return[1-$t-Tt*(Ht/Kt),kt-Dt*(Kt/Ht),Tt*(Ht/Kt),Dt*(Kt/Ht)];case 14:return[1-kt,1-$t-Tt*(Ht/Kt),Dt*(Kt/Ht),Tt*(Ht/Kt)];case 15:return[$t,1-kt,Tt*(Ht/Kt),Dt*(Kt/Ht)];default:return[kt,$t,Tt,Dt]}},Es(Cs,"_currentDrawId",-1),Es(Cs,"_currentParent",null),yr(Cs,co,null),yr(Cs,Gx,null),yr(Cs,Wx,null),yr(Cs,hm,NaN),yr(Cs,pm,null),yr(Cs,fm,null),yr(Cs,qx,NaN),Es(Cs,"_INNER_MARGIN",3);let DrawingEditor=Cs;var Cu,uo,ho,Xx,rv,Io,Eo,Gl,Qx,Jx,Zx,sv,Uw;class InkDrawOutliner{constructor(dt,kt,$t,Tt,Dt,Ft){yr(this,sv);yr(this,Cu,new Float64Array(6));yr(this,uo,void 0);yr(this,ho,void 0);yr(this,Xx,void 0);yr(this,rv,void 0);yr(this,Io,void 0);yr(this,Eo,"");yr(this,Gl,0);yr(this,Qx,new InkDrawOutline);yr(this,Jx,void 0);yr(this,Zx,void 0);vr(this,Jx,$t),vr(this,Zx,Tt),vr(this,Xx,Dt),vr(this,rv,Ft),[dt,kt]=Br(this,sv,Uw).call(this,dt,kt);const Ut=vr(this,uo,[NaN,NaN,NaN,NaN,dt,kt]);vr(this,Io,[dt,kt]),vr(this,ho,[{line:Ut,points:ar(this,Io)}]),ar(this,Cu).set(Ut,0)}updateProperty(dt,kt){dt==="stroke-width"&&vr(this,rv,kt)}isEmpty(){return!ar(this,ho)||ar(this,ho).length===0}isCancellable(){return ar(this,Io).length<=10}add(dt,kt){[dt,kt]=Br(this,sv,Uw).call(this,dt,kt);const[$t,Tt,Dt,Ft]=ar(this,Cu).subarray(2,6),Ut=dt-Dt,Ht=kt-Ft;return Math.hypot(ar(this,Jx)*Ut,ar(this,Zx)*Ht)<=2?null:(ar(this,Io).push(dt,kt),isNaN($t)?(ar(this,Cu).set([Dt,Ft,dt,kt],2),ar(this,uo).push(NaN,NaN,NaN,NaN,dt,kt),{path:{d:this.toSVGPath()}}):(isNaN(ar(this,Cu)[0])&&ar(this,uo).splice(6,6),ar(this,Cu).set([$t,Tt,Dt,Ft,dt,kt],0),ar(this,uo).push(...Outline.createBezierPoints($t,Tt,Dt,Ft,dt,kt)),{path:{d:this.toSVGPath()}}))}end(dt,kt){const $t=this.add(dt,kt);return $t||(ar(this,Io).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(dt,kt,$t,Tt,Dt){vr(this,Jx,$t),vr(this,Zx,Tt),vr(this,Xx,Dt),[dt,kt]=Br(this,sv,Uw).call(this,dt,kt);const Ft=vr(this,uo,[NaN,NaN,NaN,NaN,dt,kt]);vr(this,Io,[dt,kt]);const Ut=ar(this,ho).at(-1);return Ut&&(Ut.line=new Float32Array(Ut.line),Ut.points=new Float32Array(Ut.points)),ar(this,ho).push({line:Ft,points:ar(this,Io)}),ar(this,Cu).set(Ft,0),vr(this,Gl,0),this.toSVGPath(),null}getLastElement(){return ar(this,ho).at(-1)}setLastElement(dt){return ar(this,ho)?(ar(this,ho).push(dt),vr(this,uo,dt.line),vr(this,Io,dt.points),vr(this,Gl,0),{path:{d:this.toSVGPath()}}):ar(this,Qx).setLastElement(dt)}removeLastElement(){if(!ar(this,ho))return ar(this,Qx).removeLastElement();ar(this,ho).pop(),vr(this,Eo,"");for(let dt=0,kt=ar(this,ho).length;dt<kt;dt++){const{line:$t,points:Tt}=ar(this,ho)[dt];vr(this,uo,$t),vr(this,Io,Tt),vr(this,Gl,0),this.toSVGPath()}return{path:{d:ar(this,Eo)}}}toSVGPath(){const dt=Outline.svgRound(ar(this,uo)[4]),kt=Outline.svgRound(ar(this,uo)[5]);if(ar(this,Io).length===2)return vr(this,Eo,`${ar(this,Eo)} M ${dt} ${kt} Z`),ar(this,Eo);if(ar(this,Io).length<=6){const Tt=ar(this,Eo).lastIndexOf("M");vr(this,Eo,`${ar(this,Eo).slice(0,Tt)} M ${dt} ${kt}`),vr(this,Gl,6)}if(ar(this,Io).length===4){const Tt=Outline.svgRound(ar(this,uo)[10]),Dt=Outline.svgRound(ar(this,uo)[11]);return vr(this,Eo,`${ar(this,Eo)} L ${Tt} ${Dt}`),vr(this,Gl,12),ar(this,Eo)}const $t=[];ar(this,Gl)===0&&($t.push(`M ${dt} ${kt}`),vr(this,Gl,6));for(let Tt=ar(this,Gl),Dt=ar(this,uo).length;Tt<Dt;Tt+=6){const[Ft,Ut,Ht,Kt,Yt,Jt]=ar(this,uo).slice(Tt,Tt+6).map(Outline.svgRound);$t.push(`C${Ft} ${Ut} ${Ht} ${Kt} ${Yt} ${Jt}`)}return vr(this,Eo,ar(this,Eo)+$t.join(" ")),vr(this,Gl,ar(this,uo).length),ar(this,Eo)}getOutlines(dt,kt,$t,Tt){const Dt=ar(this,ho).at(-1);return Dt.line=new Float32Array(Dt.line),Dt.points=new Float32Array(Dt.points),ar(this,Qx).build(ar(this,ho),dt,kt,$t,ar(this,Xx),ar(this,rv),Tt),vr(this,Cu,null),vr(this,uo,null),vr(this,ho,null),vr(this,Eo,null),ar(this,Qx)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Cu=new WeakMap,uo=new WeakMap,ho=new WeakMap,Xx=new WeakMap,rv=new WeakMap,Io=new WeakMap,Eo=new WeakMap,Gl=new WeakMap,Qx=new WeakMap,Jx=new WeakMap,Zx=new WeakMap,sv=new WeakSet,Uw=function(dt,kt){return Outline._normalizePoint(dt,kt,ar(this,Jx),ar(this,Zx),ar(this,Xx))};var Do,sw,nw,Pl,Au,Tu,nv,iv,_g,iu,Du,C2,__,A2,C_,T2,A_;class InkDrawOutline extends Outline{constructor(){super(...arguments);yr(this,iu);yr(this,C2);yr(this,A2);yr(this,T2);yr(this,Do,void 0);yr(this,sw,0);yr(this,nw,void 0);yr(this,Pl,void 0);yr(this,Au,void 0);yr(this,Tu,void 0);yr(this,nv,void 0);yr(this,iv,void 0);yr(this,_g,void 0)}build(kt,$t,Tt,Dt,Ft,Ut,Ht){vr(this,Au,$t),vr(this,Tu,Tt),vr(this,nv,Dt),vr(this,iv,Ft),vr(this,_g,Ut),vr(this,nw,Ht??0),vr(this,Pl,kt),Br(this,A2,C_).call(this)}get thickness(){return ar(this,_g)}setLastElement(kt){return ar(this,Pl).push(kt),{path:{d:this.toSVGPath()}}}removeLastElement(){return ar(this,Pl).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const kt=[];for(const{line:$t}of ar(this,Pl)){if(kt.push(`M${Outline.svgRound($t[4])} ${Outline.svgRound($t[5])}`),$t.length===6){kt.push("Z");continue}if($t.length===12&&isNaN($t[6])){kt.push(`L${Outline.svgRound($t[10])} ${Outline.svgRound($t[11])}`);continue}for(let Tt=6,Dt=$t.length;Tt<Dt;Tt+=6){const[Ft,Ut,Ht,Kt,Yt,Jt]=$t.subarray(Tt,Tt+6).map(Outline.svgRound);kt.push(`C${Ft} ${Ut} ${Ht} ${Kt} ${Yt} ${Jt}`)}}return kt.join("")}serialize([kt,$t,Tt,Dt],Ft){const Ut=[],Ht=[],[Kt,Yt,Jt,Zt]=Br(this,C2,__).call(this);let er,rr,sr,nr,ir,lr,or,cr,dr;switch(ar(this,iv)){case 0:dr=Outline._rescale,er=kt,rr=$t+Dt,sr=Tt,nr=-Dt,ir=kt+Kt*Tt,lr=$t+(1-Yt-Zt)*Dt,or=kt+(Kt+Jt)*Tt,cr=$t+(1-Yt)*Dt;break;case 90:dr=Outline._rescaleAndSwap,er=kt,rr=$t,sr=Tt,nr=Dt,ir=kt+Yt*Tt,lr=$t+Kt*Dt,or=kt+(Yt+Zt)*Tt,cr=$t+(Kt+Jt)*Dt;break;case 180:dr=Outline._rescale,er=kt+Tt,rr=$t,sr=-Tt,nr=Dt,ir=kt+(1-Kt-Jt)*Tt,lr=$t+Yt*Dt,or=kt+(1-Kt)*Tt,cr=$t+(Yt+Zt)*Dt;break;case 270:dr=Outline._rescaleAndSwap,er=kt+Tt,rr=$t+Dt,sr=-Tt,nr=-Dt,ir=kt+(1-Yt-Zt)*Tt,lr=$t+(1-Kt-Jt)*Dt,or=kt+(1-Yt)*Tt,cr=$t+(1-Kt)*Dt;break}for(const{line:ur,points:pr}of ar(this,Pl))Ut.push(dr(ur,er,rr,sr,nr,Ft?new Array(ur.length):null)),Ht.push(dr(pr,er,rr,sr,nr,Ft?new Array(pr.length):null));return{lines:Ut,points:Ht,rect:[ir,lr,or,cr]}}static deserialize(kt,$t,Tt,Dt,Ft,{paths:{lines:Ut,points:Ht},rotation:Kt,thickness:Yt}){const Jt=[];let Zt,er,rr,sr,nr;switch(Kt){case 0:nr=Outline._rescale,Zt=-kt/Tt,er=$t/Dt+1,rr=1/Tt,sr=-1/Dt;break;case 90:nr=Outline._rescaleAndSwap,Zt=-$t/Dt,er=-kt/Tt,rr=1/Dt,sr=1/Tt;break;case 180:nr=Outline._rescale,Zt=kt/Tt+1,er=-$t/Dt,rr=-1/Tt,sr=1/Dt;break;case 270:nr=Outline._rescaleAndSwap,Zt=$t/Dt+1,er=kt/Tt+1,rr=-1/Dt,sr=-1/Tt;break}if(!Ut){Ut=[];for(const lr of Ht){const or=lr.length;if(or===2){Ut.push(new Float32Array([NaN,NaN,NaN,NaN,lr[0],lr[1]]));continue}if(or===4){Ut.push(new Float32Array([NaN,NaN,NaN,NaN,lr[0],lr[1],NaN,NaN,NaN,NaN,lr[2],lr[3]]));continue}const cr=new Float32Array(3*(or-2));Ut.push(cr);let[dr,ur,pr,mr]=lr.subarray(0,4);cr.set([NaN,NaN,NaN,NaN,dr,ur],0);for(let jr=4;jr<or;jr+=2){const Rr=lr[jr],br=lr[jr+1];cr.set(Outline.createBezierPoints(dr,ur,pr,mr,Rr,br),(jr-2)*3),[dr,ur,pr,mr]=[pr,mr,Rr,br]}}}for(let lr=0,or=Ut.length;lr<or;lr++)Jt.push({line:nr(Ut[lr].map(cr=>cr??NaN),Zt,er,rr,sr),points:nr(Ht[lr].map(cr=>cr??NaN),Zt,er,rr,sr)});const ir=new this.prototype.constructor;return ir.build(Jt,Tt,Dt,1,Kt,Yt,Ft),ir}get box(){return ar(this,Do)}updateProperty(kt,$t){return kt==="stroke-width"?Br(this,T2,A_).call(this,$t):null}updateParentDimensions([kt,$t],Tt){const[Dt,Ft]=Br(this,iu,Du).call(this);vr(this,Au,kt),vr(this,Tu,$t),vr(this,nv,Tt);const[Ut,Ht]=Br(this,iu,Du).call(this),Kt=Ut-Dt,Yt=Ht-Ft,Jt=ar(this,Do);return Jt[0]-=Kt,Jt[1]-=Yt,Jt[2]+=2*Kt,Jt[3]+=2*Yt,Jt}updateRotation(kt){return vr(this,sw,kt),{path:{transform:this.rotationTransform}}}get viewBox(){return ar(this,Do).map(Outline.svgRound).join(" ")}get defaultProperties(){const[kt,$t]=ar(this,Do);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(kt)} ${Outline.svgRound($t)}`}}}get rotationTransform(){const[,,kt,$t]=ar(this,Do);let Tt=0,Dt=0,Ft=0,Ut=0,Ht=0,Kt=0;switch(ar(this,sw)){case 90:Dt=$t/kt,Ft=-kt/$t,Ht=kt;break;case 180:Tt=-1,Ut=-1,Ht=kt,Kt=$t;break;case 270:Dt=-$t/kt,Ft=kt/$t,Kt=$t;break;default:return""}return`matrix(${Tt} ${Dt} ${Ft} ${Ut} ${Outline.svgRound(Ht)} ${Outline.svgRound(Kt)})`}getPathResizingSVGProperties([kt,$t,Tt,Dt]){const[Ft,Ut]=Br(this,iu,Du).call(this),[Ht,Kt,Yt,Jt]=ar(this,Do);if(Math.abs(Yt-Ft)<=Outline.PRECISION||Math.abs(Jt-Ut)<=Outline.PRECISION){const nr=kt+Tt/2-(Ht+Yt/2),ir=$t+Dt/2-(Kt+Jt/2);return{path:{"transform-origin":`${Outline.svgRound(kt)} ${Outline.svgRound($t)}`,transform:`${this.rotationTransform} translate(${nr} ${ir})`}}}const Zt=(Tt-2*Ft)/(Yt-2*Ft),er=(Dt-2*Ut)/(Jt-2*Ut),rr=Yt/Tt,sr=Jt/Dt;return{path:{"transform-origin":`${Outline.svgRound(Ht)} ${Outline.svgRound(Kt)}`,transform:`${this.rotationTransform} scale(${rr} ${sr}) translate(${Outline.svgRound(Ft)} ${Outline.svgRound(Ut)}) scale(${Zt} ${er}) translate(${Outline.svgRound(-Ft)} ${Outline.svgRound(-Ut)})`}}}getPathResizedSVGProperties([kt,$t,Tt,Dt]){const[Ft,Ut]=Br(this,iu,Du).call(this),Ht=ar(this,Do),[Kt,Yt,Jt,Zt]=Ht;if(Ht[0]=kt,Ht[1]=$t,Ht[2]=Tt,Ht[3]=Dt,Math.abs(Jt-Ft)<=Outline.PRECISION||Math.abs(Zt-Ut)<=Outline.PRECISION){const ir=kt+Tt/2-(Kt+Jt/2),lr=$t+Dt/2-(Yt+Zt/2);for(const{line:or,points:cr}of ar(this,Pl))Outline._translate(or,ir,lr,or),Outline._translate(cr,ir,lr,cr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(kt)} ${Outline.svgRound($t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const er=(Tt-2*Ft)/(Jt-2*Ft),rr=(Dt-2*Ut)/(Zt-2*Ut),sr=-er*(Kt+Ft)+kt+Ft,nr=-rr*(Yt+Ut)+$t+Ut;if(er!==1||rr!==1||sr!==0||nr!==0)for(const{line:ir,points:lr}of ar(this,Pl))Outline._rescale(ir,sr,nr,er,rr,ir),Outline._rescale(lr,sr,nr,er,rr,lr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(kt)} ${Outline.svgRound($t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([kt,$t],Tt){const[Dt,Ft]=Tt,Ut=ar(this,Do),Ht=kt-Ut[0],Kt=$t-Ut[1];if(ar(this,Au)===Dt&&ar(this,Tu)===Ft)for(const{line:Yt,points:Jt}of ar(this,Pl))Outline._translate(Yt,Ht,Kt,Yt),Outline._translate(Jt,Ht,Kt,Jt);else{const Yt=ar(this,Au)/Dt,Jt=ar(this,Tu)/Ft;vr(this,Au,Dt),vr(this,Tu,Ft);for(const{line:Zt,points:er}of ar(this,Pl))Outline._rescale(Zt,Ht,Kt,Yt,Jt,Zt),Outline._rescale(er,Ht,Kt,Yt,Jt,er);Ut[2]*=Yt,Ut[3]*=Jt}return Ut[0]=kt,Ut[1]=$t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(kt)} ${Outline.svgRound($t)}`}}}get defaultSVGProperties(){const kt=ar(this,Do);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(kt[0])} ${Outline.svgRound(kt[1])}`,transform:this.rotationTransform||null},bbox:kt}}}Do=new WeakMap,sw=new WeakMap,nw=new WeakMap,Pl=new WeakMap,Au=new WeakMap,Tu=new WeakMap,nv=new WeakMap,iv=new WeakMap,_g=new WeakMap,iu=new WeakSet,Du=function(kt=ar(this,_g)){const $t=ar(this,nw)+kt/2*ar(this,nv);return ar(this,iv)%180===0?[$t/ar(this,Au),$t/ar(this,Tu)]:[$t/ar(this,Tu),$t/ar(this,Au)]},C2=new WeakSet,__=function(){const[kt,$t,Tt,Dt]=ar(this,Do),[Ft,Ut]=Br(this,iu,Du).call(this,0);return[kt+Ft,$t+Ut,Tt-2*Ft,Dt-2*Ut]},A2=new WeakSet,C_=function(){const kt=vr(this,Do,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:Dt}of ar(this,Pl)){if(Dt.length<=12){for(let Ht=4,Kt=Dt.length;Ht<Kt;Ht+=6)Util.pointBoundingBox(Dt[Ht],Dt[Ht+1],kt);continue}let Ft=Dt[4],Ut=Dt[5];for(let Ht=6,Kt=Dt.length;Ht<Kt;Ht+=6){const[Yt,Jt,Zt,er,rr,sr]=Dt.subarray(Ht,Ht+6);Util.bezierBoundingBox(Ft,Ut,Yt,Jt,Zt,er,rr,sr,kt),Ft=rr,Ut=sr}}const[$t,Tt]=Br(this,iu,Du).call(this);kt[0]=MathClamp(kt[0]-$t,0,1),kt[1]=MathClamp(kt[1]-Tt,0,1),kt[2]=MathClamp(kt[2]+$t,0,1),kt[3]=MathClamp(kt[3]+Tt,0,1),kt[2]-=kt[0],kt[3]-=kt[1]},T2=new WeakSet,A_=function(kt){const[$t,Tt]=Br(this,iu,Du).call(this);vr(this,_g,kt);const[Dt,Ft]=Br(this,iu,Du).call(this),[Ut,Ht]=[Dt-$t,Ft-Tt],Kt=ar(this,Do);return Kt[0]-=Ut,Kt[1]-=Ht,Kt[2]+=2*Ut,Kt[3]+=2*Ht,Kt};class InkDrawingOptions extends DrawingOptions{constructor(dt){super(),this._viewParameters=dt,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(dt,kt){dt==="stroke-width"&&(kt??(kt=this["stroke-width"]),kt*=this._viewParameters.realScale),super.updateSVGProperty(dt,kt)}clone(){const dt=new InkDrawingOptions(this._viewParameters);return dt.updateAll(this),dt}}var N2,T_;const y0=class y0 extends DrawingEditor{constructor(kt){super({...kt,name:"inkEditor"});yr(this,N2);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(kt,$t){AnnotationEditor.initialize(kt,$t),this._defaultDrawingOptions=new InkDrawingOptions($t.viewParameters)}static getDefaultDrawingOptions(kt){const $t=this._defaultDrawingOptions.clone();return $t.updateProperties(kt),$t}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(kt,$t,Tt,Dt,Ft){return new InkDrawOutliner(kt,$t,Tt,Dt,Ft,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(kt,$t,Tt,Dt,Ft,Ut){return InkDrawOutline.deserialize(kt,$t,Tt,Dt,Ft,Ut)}static async deserialize(kt,$t,Tt){let Dt=null;if(kt instanceof InkAnnotationElement){const{data:{inkLists:Ut,rect:Ht,rotation:Kt,id:Yt,color:Jt,opacity:Zt,borderStyle:{rawWidth:er},popupRef:rr,richText:sr,contentsObj:nr,creationDate:ir,modificationDate:lr},parent:{page:{pageNumber:or}}}=kt;Dt=kt={annotationType:AnnotationEditorType.INK,color:Array.from(Jt),thickness:er,opacity:Zt,paths:{points:Ut},boxes:null,pageIndex:or-1,rect:Ht.slice(0),rotation:Kt,annotationElementId:Yt,id:Yt,deleted:!1,popupRef:rr,richText:sr,comment:(nr==null?void 0:nr.str)||null,creationDate:ir,modificationDate:lr}}const Ft=await super.deserialize(kt,$t,Tt);return Ft._initialData=Dt,kt.comment&&Ft.setCommentData(kt),Ft}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:kt,_drawingOptions:$t,parent:Tt}=this;$t.updateSVGProperty("stroke-width"),Tt.drawLayer.updateProperties(kt,$t.toSVGProperties())}static onScaleChangingWhenDrawing(){const kt=this._currentParent;kt&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),kt.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:kt,thickness:$t,opacity:Tt}){this._drawingOptions=y0.getDefaultDrawingOptions({stroke:Util.makeHexColor(...kt),"stroke-width":$t,"stroke-opacity":Tt})}serialize(kt=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:$t,points:Tt}=this.serializeDraw(kt),{_drawingOptions:{stroke:Dt,"stroke-opacity":Ft,"stroke-width":Ut}}=this,Ht=Object.assign(super.serialize(kt),{color:AnnotationEditor._colorManager.convert(Dt),opacity:Ft,thickness:Ut,paths:{lines:$t,points:Tt}});return this.addComment(Ht),kt?(Ht.isCopy=!0,Ht):this.annotationElementId&&!Br(this,N2,T_).call(this,Ht)?null:(Ht.id=this.annotationElementId,Ht)}renderAnnotationElement(kt){if(this.deleted)return kt.hide(),null;const{points:$t,rect:Tt}=this.serializeDraw(!1);return kt.updateEdited({rect:Tt,thickness:this._drawingOptions["stroke-width"],points:$t,popup:this.comment}),null}};N2=new WeakSet,T_=function(kt){const{color:$t,thickness:Tt,opacity:Dt,pageIndex:Ft}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||kt.color.some((Ut,Ht)=>Ut!==$t[Ht])||kt.thickness!==Tt||kt.opacity!==Dt||kt.pageIndex!==Ft},Es(y0,"_type","ink"),Es(y0,"_editorType",AnnotationEditorType.INK),Es(y0,"_defaultDrawingOptions",null);let InkEditor=y0;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let dt=super.toSVGPath();return dt.endsWith("Z")||(dt+="Z"),dt}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var e0,iw,O$,au,P2,N_,M2,P_,aw,B$,av,Hw,I2,M_,D2,I_,F2,D_,ow,V$,lw,z$,L2,F_;class SignatureExtractor{static extractContoursFromText(dt,{fontFamily:kt,fontStyle:$t,fontWeight:Tt},Dt,Ft,Ut,Ht){let Kt=new OffscreenCanvas(1,1),Yt=Kt.getContext("2d",{alpha:!1});const Jt=200,Zt=Yt.font=`${$t} ${Tt} ${Jt}px ${kt}`,{actualBoundingBoxLeft:er,actualBoundingBoxRight:rr,actualBoundingBoxAscent:sr,actualBoundingBoxDescent:nr,fontBoundingBoxAscent:ir,fontBoundingBoxDescent:lr,width:or}=Yt.measureText(dt),cr=1.5,dr=Math.ceil(Math.max(Math.abs(er)+Math.abs(rr)||0,or)*cr),ur=Math.ceil(Math.max(Math.abs(sr)+Math.abs(nr)||Jt,Math.abs(ir)+Math.abs(lr)||Jt)*cr);Kt=new OffscreenCanvas(dr,ur),Yt=Kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Yt.font=Zt,Yt.filter="grayscale(1)",Yt.fillStyle="white",Yt.fillRect(0,0,dr,ur),Yt.fillStyle="black",Yt.fillText(dt,dr*(cr-1)/2,ur*(3-cr)/2);const pr=Br(this,ow,V$).call(this,Yt.getImageData(0,0,dr,ur).data),mr=Br(this,F2,D_).call(this,pr),jr=Br(this,lw,z$).call(this,mr),Rr=Br(this,aw,B$).call(this,pr,dr,ur,jr);return this.processDrawnLines({lines:{curves:Rr,width:dr,height:ur},pageWidth:Dt,pageHeight:Ft,rotation:Ut,innerMargin:Ht,mustSmooth:!0,areContours:!0})}static process(dt,kt,$t,Tt,Dt){const[Ft,Ut,Ht]=Br(this,L2,F_).call(this,dt),[Kt,Yt]=Br(this,D2,I_).call(this,Ft,Ut,Ht,Math.hypot(Ut,Ht)*ar(this,e0).sigmaSFactor,ar(this,e0).sigmaR,ar(this,e0).kernelSize),Jt=Br(this,lw,z$).call(this,Yt),Zt=Br(this,aw,B$).call(this,Kt,Ut,Ht,Jt);return this.processDrawnLines({lines:{curves:Zt,width:Ut,height:Ht},pageWidth:kt,pageHeight:$t,rotation:Tt,innerMargin:Dt,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:dt,pageWidth:kt,pageHeight:$t,rotation:Tt,innerMargin:Dt,mustSmooth:Ft,areContours:Ut}){Tt%180!==0&&([kt,$t]=[$t,kt]);const{curves:Ht,width:Kt,height:Yt}=dt,Jt=dt.thickness??0,Zt=[],er=Math.min(kt/Kt,$t/Yt),rr=er/kt,sr=er/$t,nr=[];for(const{points:lr}of Ht){const or=Ft?Br(this,I2,M_).call(this,lr):lr;if(!or)continue;nr.push(or);const cr=or.length,dr=new Float32Array(cr),ur=new Float32Array(3*(cr===2?2:cr-2));if(Zt.push({line:ur,points:dr}),cr===2){dr[0]=or[0]*rr,dr[1]=or[1]*sr,ur.set([NaN,NaN,NaN,NaN,dr[0],dr[1]],0);continue}let[pr,mr,jr,Rr]=or;pr*=rr,mr*=sr,jr*=rr,Rr*=sr,dr.set([pr,mr,jr,Rr],0),ur.set([NaN,NaN,NaN,NaN,pr,mr],0);for(let br=4;br<cr;br+=2){const _r=dr[br]=or[br]*rr,Mr=dr[br+1]=or[br+1]*sr;ur.set(Outline.createBezierPoints(pr,mr,jr,Rr,_r,Mr),(br-2)*3),[pr,mr,jr,Rr]=[jr,Rr,_r,Mr]}}if(Zt.length===0)return null;const ir=Ut?new ContourDrawOutline:new InkDrawOutline;return ir.build(Zt,kt,$t,1,Tt,Ut?0:Jt,Dt),{outline:ir,newCurves:nr,areContours:Ut,thickness:Jt,width:Kt,height:Yt}}static async compressSignature({outlines:dt,areContours:kt,thickness:$t,width:Tt,height:Dt}){let Ft=1/0,Ut=-1/0,Ht=0;for(const or of dt){Ht+=or.length;for(let cr=2,dr=or.length;cr<dr;cr++){const ur=or[cr]-or[cr-2];Ft=Math.min(Ft,ur),Ut=Math.max(Ut,ur)}}let Kt;Ft>=-128&&Ut<=127?Kt=Int8Array:Ft>=-32768&&Ut<=32767?Kt=Int16Array:Kt=Int32Array;const Yt=dt.length,Jt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Yt,Zt=new Uint32Array(Jt);let er=0;Zt[er++]=Jt*Uint32Array.BYTES_PER_ELEMENT+(Ht-2*Yt)*Kt.BYTES_PER_ELEMENT,Zt[er++]=0,Zt[er++]=Tt,Zt[er++]=Dt,Zt[er++]=kt?0:1,Zt[er++]=Math.max(0,Math.floor($t??0)),Zt[er++]=Yt,Zt[er++]=Kt.BYTES_PER_ELEMENT;for(const or of dt)Zt[er++]=or.length-2,Zt[er++]=or[0],Zt[er++]=or[1];const rr=new CompressionStream("deflate-raw"),sr=rr.writable.getWriter();await sr.ready,sr.write(Zt);const nr=Kt.prototype.constructor;for(const or of dt){const cr=new nr(or.length-2);for(let dr=2,ur=or.length;dr<ur;dr++)cr[dr-2]=or[dr]-or[dr-2];sr.write(cr)}sr.close();const ir=await new Response(rr.readable).arrayBuffer(),lr=new Uint8Array(ir);return toBase64Util(lr)}static async decompressSignature(dt){try{const kt=fromBase64Util(dt),{readable:$t,writable:Tt}=new DecompressionStream("deflate-raw"),Dt=Tt.getWriter();await Dt.ready,Dt.write(kt).then(async()=>{await Dt.ready,await Dt.close()}).catch(()=>{});let Ft=null,Ut=0;for await(const or of $t)Ft||(Ft=new Uint8Array(new Uint32Array(or.buffer,0,4)[0])),Ft.set(or,Ut),Ut+=or.length;const Ht=new Uint32Array(Ft.buffer,0,Ft.length>>2),Kt=Ht[1];if(Kt!==0)throw new Error(`Invalid version: ${Kt}`);const Yt=Ht[2],Jt=Ht[3],Zt=Ht[4]===0,er=Ht[5],rr=Ht[6],sr=Ht[7],nr=[],ir=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*rr)*Uint32Array.BYTES_PER_ELEMENT;let lr;switch(sr){case Int8Array.BYTES_PER_ELEMENT:lr=new Int8Array(Ft.buffer,ir);break;case Int16Array.BYTES_PER_ELEMENT:lr=new Int16Array(Ft.buffer,ir);break;case Int32Array.BYTES_PER_ELEMENT:lr=new Int32Array(Ft.buffer,ir);break}Ut=0;for(let or=0;or<rr;or++){const cr=Ht[POINTS_PROPERTIES_NUMBER*or+BASE_HEADER_LENGTH],dr=new Float32Array(cr+2);nr.push(dr);for(let ur=0;ur<POINTS_PROPERTIES_NUMBER-1;ur++)dr[ur]=Ht[POINTS_PROPERTIES_NUMBER*or+BASE_HEADER_LENGTH+ur+1];for(let ur=0;ur<cr;ur++)dr[ur+2]=dr[ur]+lr[Ut++]}return{areContours:Zt,thickness:er,outlines:nr,width:Yt,height:Jt}}catch(kt){return warn(`decompressSignature: ${kt}`),null}}}e0=new WeakMap,iw=new WeakSet,O$=function(dt,kt,$t,Tt){return $t-=dt,Tt-=kt,$t===0?Tt>0?0:4:$t===1?Tt+6:2-Tt},au=new WeakMap,P2=new WeakSet,N_=function(dt,kt,$t,Tt,Dt,Ft,Ut){const Ht=Br(this,iw,O$).call(this,$t,Tt,Dt,Ft);for(let Kt=0;Kt<8;Kt++){const Yt=(-Kt+Ht-Ut+16)%8,Jt=ar(this,au)[2*Yt],Zt=ar(this,au)[2*Yt+1];if(dt[($t+Jt)*kt+(Tt+Zt)]!==0)return Yt}return-1},M2=new WeakSet,P_=function(dt,kt,$t,Tt,Dt,Ft,Ut){const Ht=Br(this,iw,O$).call(this,$t,Tt,Dt,Ft);for(let Kt=0;Kt<8;Kt++){const Yt=(Kt+Ht+Ut+16)%8,Jt=ar(this,au)[2*Yt],Zt=ar(this,au)[2*Yt+1];if(dt[($t+Jt)*kt+(Tt+Zt)]!==0)return Yt}return-1},aw=new WeakSet,B$=function(dt,kt,$t,Tt){const Dt=dt.length,Ft=new Int32Array(Dt);for(let Yt=0;Yt<Dt;Yt++)Ft[Yt]=dt[Yt]<=Tt?1:0;for(let Yt=1;Yt<$t-1;Yt++)Ft[Yt*kt]=Ft[Yt*kt+kt-1]=0;for(let Yt=0;Yt<kt;Yt++)Ft[Yt]=Ft[kt*$t-1-Yt]=0;let Ut=1,Ht;const Kt=[];for(let Yt=1;Yt<$t-1;Yt++){Ht=1;for(let Jt=1;Jt<kt-1;Jt++){const Zt=Yt*kt+Jt,er=Ft[Zt];if(er===0)continue;let rr=Yt,sr=Jt;if(er===1&&Ft[Zt-1]===0)Ut+=1,sr-=1;else if(er>=1&&Ft[Zt+1]===0)Ut+=1,sr+=1,er>1&&(Ht=er);else{er!==1&&(Ht=Math.abs(er));continue}const nr=[Jt,Yt],ir=sr===Jt+1,lr={isHole:ir,points:nr,id:Ut,parent:0};Kt.push(lr);let or;for(const br of Kt)if(br.id===Ht){or=br;break}or?or.isHole?lr.parent=ir?or.parent:Ht:lr.parent=ir?Ht:or.parent:lr.parent=ir?Ht:0;const cr=Br(this,P2,N_).call(this,Ft,kt,Yt,Jt,rr,sr,0);if(cr===-1){Ft[Zt]=-Ut,Ft[Zt]!==1&&(Ht=Math.abs(Ft[Zt]));continue}let dr=ar(this,au)[2*cr],ur=ar(this,au)[2*cr+1];const pr=Yt+dr,mr=Jt+ur;rr=pr,sr=mr;let jr=Yt,Rr=Jt;for(;;){const br=Br(this,M2,P_).call(this,Ft,kt,jr,Rr,rr,sr,1);dr=ar(this,au)[2*br],ur=ar(this,au)[2*br+1];const _r=jr+dr,Mr=Rr+ur;nr.push(Mr,_r);const Pr=jr*kt+Rr;if(Ft[Pr+1]===0?Ft[Pr]=-Ut:Ft[Pr]===1&&(Ft[Pr]=Ut),_r===Yt&&Mr===Jt&&jr===pr&&Rr===mr){Ft[Zt]!==1&&(Ht=Math.abs(Ft[Zt]));break}else rr=jr,sr=Rr,jr=_r,Rr=Mr}}}return Kt},av=new WeakSet,Hw=function(dt,kt,$t,Tt){if($t-kt<=4){for(let pr=kt;pr<$t-2;pr+=2)Tt.push(dt[pr],dt[pr+1]);return}const Dt=dt[kt],Ft=dt[kt+1],Ut=dt[$t-4]-Dt,Ht=dt[$t-3]-Ft,Kt=Math.hypot(Ut,Ht),Yt=Ut/Kt,Jt=Ht/Kt,Zt=Yt*Ft-Jt*Dt,er=Ht/Ut,rr=1/Kt,sr=Math.atan(er),nr=Math.cos(sr),ir=Math.sin(sr),lr=rr*(Math.abs(nr)+Math.abs(ir)),or=rr*(1-lr+lr**2),cr=Math.max(Math.atan(Math.abs(ir+nr)*or),Math.atan(Math.abs(ir-nr)*or));let dr=0,ur=kt;for(let pr=kt+2;pr<$t-2;pr+=2){const mr=Math.abs(Zt-Yt*dt[pr+1]+Jt*dt[pr]);mr>dr&&(ur=pr,dr=mr)}dr>(Kt*cr)**2?(Br(this,av,Hw).call(this,dt,kt,ur+2,Tt),Br(this,av,Hw).call(this,dt,ur,$t,Tt)):Tt.push(Dt,Ft)},I2=new WeakSet,M_=function(dt){const kt=[],$t=dt.length;return Br(this,av,Hw).call(this,dt,0,$t,kt),kt.push(dt[$t-2],dt[$t-1]),kt.length<=4?null:kt},D2=new WeakSet,I_=function(dt,kt,$t,Tt,Dt,Ft){const Ut=new Float32Array(Ft**2),Ht=-2*Tt**2,Kt=Ft>>1;for(let sr=0;sr<Ft;sr++){const nr=(sr-Kt)**2;for(let ir=0;ir<Ft;ir++)Ut[sr*Ft+ir]=Math.exp((nr+(ir-Kt)**2)/Ht)}const Yt=new Float32Array(256),Jt=-2*Dt**2;for(let sr=0;sr<256;sr++)Yt[sr]=Math.exp(sr**2/Jt);const Zt=dt.length,er=new Uint8Array(Zt),rr=new Uint32Array(256);for(let sr=0;sr<$t;sr++)for(let nr=0;nr<kt;nr++){const ir=sr*kt+nr,lr=dt[ir];let or=0,cr=0;for(let ur=0;ur<Ft;ur++){const pr=sr+ur-Kt;if(!(pr<0||pr>=$t))for(let mr=0;mr<Ft;mr++){const jr=nr+mr-Kt;if(jr<0||jr>=kt)continue;const Rr=dt[pr*kt+jr],br=Ut[ur*Ft+mr]*Yt[Math.abs(Rr-lr)];or+=Rr*br,cr+=br}}const dr=er[ir]=Math.round(or/cr);rr[dr]++}return[er,rr]},F2=new WeakSet,D_=function(dt){const kt=new Uint32Array(256);for(const $t of dt)kt[$t]++;return kt},ow=new WeakSet,V$=function(dt){const kt=dt.length,$t=new Uint8ClampedArray(kt>>2);let Tt=-1/0,Dt=1/0;for(let Ut=0,Ht=$t.length;Ut<Ht;Ut++){const Kt=$t[Ut]=dt[Ut<<2];Tt=Math.max(Tt,Kt),Dt=Math.min(Dt,Kt)}const Ft=255/(Tt-Dt);for(let Ut=0,Ht=$t.length;Ut<Ht;Ut++)$t[Ut]=($t[Ut]-Dt)*Ft;return $t},lw=new WeakSet,z$=function(dt){let kt,$t=-1/0,Tt=-1/0;const Dt=dt.findIndex(Ht=>Ht!==0);let Ft=Dt,Ut=Dt;for(kt=Dt;kt<256;kt++){const Ht=dt[kt];Ht>$t&&(kt-Ft>Tt&&(Tt=kt-Ft,Ut=kt-1),$t=Ht,Ft=kt)}for(kt=Ut-1;kt>=0&&!(dt[kt]>dt[kt+1]);kt--);return kt},L2=new WeakSet,F_=function(dt){const kt=dt,{width:$t,height:Tt}=dt,{maxDim:Dt}=ar(this,e0);let Ft=$t,Ut=Tt;if($t>Dt||Tt>Dt){let Zt=$t,er=Tt,rr=Math.log2(Math.max($t,Tt)/Dt);const sr=Math.floor(rr);rr=rr===sr?sr-1:sr;for(let ir=0;ir<rr;ir++){Ft=Math.ceil(Zt/2),Ut=Math.ceil(er/2);const lr=new OffscreenCanvas(Ft,Ut);lr.getContext("2d").drawImage(dt,0,0,Zt,er,0,0,Ft,Ut),Zt=Ft,er=Ut,dt!==kt&&dt.close(),dt=lr.transferToImageBitmap()}const nr=Math.min(Dt/Ft,Dt/Ut);Ft=Math.round(Ft*nr),Ut=Math.round(Ut*nr)}const Kt=new OffscreenCanvas(Ft,Ut).getContext("2d",{willReadFrequently:!0});Kt.fillStyle="white",Kt.fillRect(0,0,Ft,Ut),Kt.filter="grayscale(1)",Kt.drawImage(dt,0,0,dt.width,dt.height,0,0,Ft,Ut);const Yt=Kt.getImageData(0,0,Ft,Ut).data;return[Br(this,ow,V$).call(this,Yt),Ft,Ut]},yr(SignatureExtractor,iw),yr(SignatureExtractor,P2),yr(SignatureExtractor,M2),yr(SignatureExtractor,aw),yr(SignatureExtractor,av),yr(SignatureExtractor,I2),yr(SignatureExtractor,D2),yr(SignatureExtractor,F2),yr(SignatureExtractor,ow),yr(SignatureExtractor,lw),yr(SignatureExtractor,L2),yr(SignatureExtractor,e0,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),yr(SignatureExtractor,au,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const dt=new SignatureOptions;return dt.updateAll(this),dt}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(dt){super(dt),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const dt=new DrawnSignatureOptions(this._viewParameters);return dt.updateAll(this),dt}}var xm,Nu,gm,r0;const Ko=class Ko extends DrawingEditor{constructor(kt){super({...kt,mustBeCommitted:!0,name:"signatureEditor"});yr(this,xm,!1);yr(this,Nu,null);yr(this,gm,null);yr(this,r0,null);this._willKeepAspectRatio=!0,vr(this,gm,kt.signatureData||null),vr(this,Nu,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(kt,$t){AnnotationEditor.initialize(kt,$t),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions($t.viewParameters)}static getDefaultDrawingOptions(kt){const $t=this._defaultDrawingOptions.clone();return $t.updateProperties(kt),$t}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!ar(this,Nu)}}static computeTelemetryFinalData(kt){const $t=kt.get("hasDescription");return{hasAltText:$t.get(!0)??0,hasNoAltText:$t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let kt,$t;const{_isCopy:Tt}=this;if(Tt&&(this._isCopy=!1,kt=this.x,$t=this.y),super.render(),this._drawId===null)if(ar(this,gm)){const{lines:Dt,mustSmooth:Ft,areContours:Ut,description:Ht,uuid:Kt,heightInPage:Yt}=ar(this,gm),{rawDims:{pageWidth:Jt,pageHeight:Zt},rotation:er}=this.parent.viewport,rr=SignatureExtractor.processDrawnLines({lines:Dt,pageWidth:Jt,pageHeight:Zt,rotation:er,innerMargin:Ko._INNER_MARGIN,mustSmooth:Ft,areContours:Ut});this.addSignature(rr,Yt,Ht,Kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:ar(this,Nu)||""}));return Tt&&(this._isCopy=!0,this._moveAfterPaste(kt,$t)),this.div}setUuid(kt){vr(this,r0,kt),this.addEditToolbar()}getUuid(){return ar(this,r0)}get description(){return ar(this,Nu)}set description(kt){vr(this,Nu,kt),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:kt})),super.addEditToolbar().then($t=>{$t==null||$t.updateEditSignatureButton(kt)}))}getSignaturePreview(){const{newCurves:kt,areContours:$t,thickness:Tt,width:Dt,height:Ft}=ar(this,gm),Ut=Math.max(Dt,Ft),Ht=SignatureExtractor.processDrawnLines({lines:{curves:kt.map(Kt=>({points:Kt})),thickness:Tt,width:Dt,height:Ft},pageWidth:Ut,pageHeight:Ut,rotation:0,innerMargin:0,mustSmooth:!1,areContours:$t});return{areContours:$t,outline:Ht.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(kt,$t,Tt,Dt){const{x:Ft,y:Ut}=this,{outline:Ht}=vr(this,gm,kt);vr(this,xm,Ht instanceof ContourDrawOutline),this.description=Tt;let Kt;ar(this,xm)?Kt=Ko.getDefaultDrawingOptions():(Kt=Ko._defaultDrawnSignatureOptions.clone(),Kt.updateProperties({"stroke-width":Ht.thickness})),this._addOutlines({drawOutlines:Ht,drawingOptions:Kt});const[,Yt]=this.pageDimensions;let Jt=$t/Yt;Jt=Jt>=1?.5:Jt,this.width*=Jt/this.height,this.width>=1&&(Jt*=.9/this.width,this.width=.9),this.height=Jt,this.setDims(),this.x=Ft,this.y=Ut,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(Dt),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!Dt,hasDescription:!!Tt}}),this.div.hidden=!1}getFromImage(kt){const{rawDims:{pageWidth:$t,pageHeight:Tt},rotation:Dt}=this.parent.viewport;return SignatureExtractor.process(kt,$t,Tt,Dt,Ko._INNER_MARGIN)}getFromText(kt,$t){const{rawDims:{pageWidth:Tt,pageHeight:Dt},rotation:Ft}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(kt,$t,Tt,Dt,Ft,Ko._INNER_MARGIN)}getDrawnSignature(kt){const{rawDims:{pageWidth:$t,pageHeight:Tt},rotation:Dt}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:kt,pageWidth:$t,pageHeight:Tt,rotation:Dt,innerMargin:Ko._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:kt,thickness:$t}){kt?this._drawingOptions=Ko.getDefaultDrawingOptions():(this._drawingOptions=Ko._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":$t}))}serialize(kt=!1){if(this.isEmpty())return null;const{lines:$t,points:Tt}=this.serializeDraw(kt),{_drawingOptions:{"stroke-width":Dt}}=this,Ft=Object.assign(super.serialize(kt),{isSignature:!0,areContours:ar(this,xm),color:[0,0,0],thickness:ar(this,xm)?0:Dt});return this.addComment(Ft),kt?(Ft.paths={lines:$t,points:Tt},Ft.uuid=ar(this,r0),Ft.isCopy=!0):Ft.lines=$t,ar(this,Nu)&&(Ft.accessibilityData={type:"Figure",alt:ar(this,Nu)}),Ft}static deserializeDraw(kt,$t,Tt,Dt,Ft,Ut){return Ut.areContours?ContourDrawOutline.deserialize(kt,$t,Tt,Dt,Ft,Ut):InkDrawOutline.deserialize(kt,$t,Tt,Dt,Ft,Ut)}static async deserialize(kt,$t,Tt){var Ft;const Dt=await super.deserialize(kt,$t,Tt);return vr(Dt,xm,kt.areContours),Dt.description=((Ft=kt.accessibilityData)==null?void 0:Ft.alt)||"",vr(Dt,r0,kt.uuid),Dt}};xm=new WeakMap,Nu=new WeakMap,gm=new WeakMap,r0=new WeakMap,Es(Ko,"_type","signature"),Es(Ko,"_editorType",AnnotationEditorType.SIGNATURE),Es(Ko,"_defaultDrawingOptions",null);let SignatureEditor=Ko;var Gn,po,bm,bp,ym,ov,yp,s0,Pu,Ml,lv,n0,Ov,i0,Bv,cv,Gw,dv,Ww,uv,qw,cw,U$,hv,Kw,O2,L_;class StampEditor extends AnnotationEditor{constructor(kt){super({...kt,name:"stampEditor"});yr(this,n0);yr(this,i0);yr(this,cv);yr(this,dv);yr(this,uv);yr(this,cw);yr(this,hv);yr(this,O2);yr(this,Gn,null);yr(this,po,null);yr(this,bm,null);yr(this,bp,null);yr(this,ym,null);yr(this,ov,"");yr(this,yp,null);yr(this,s0,!1);yr(this,Pu,null);yr(this,Ml,!1);yr(this,lv,!1);vr(this,bp,kt.bitmapUrl),vr(this,ym,kt.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(kt,$t){AnnotationEditor.initialize(kt,$t)}static isHandlingMimeForPasting(kt){return SupportedImageMimeTypes.includes(kt)}static paste(kt,$t){$t.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:kt.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var kt;return{type:"stamp",hasAltText:!!((kt=this.altTextData)!=null&&kt.altText)}}static computeTelemetryFinalData(kt){const $t=kt.get("hasAltText");return{hasAltText:$t.get(!0)??0,hasNoAltText:$t.get(!1)??0}}async mlGuessAltText(kt=null,$t=!0){if(this.hasAltTextData())return null;const{mlManager:Tt}=this._uiManager;if(!Tt)throw new Error("No ML.");if(!await Tt.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:Dt,width:Ft,height:Ut}=kt||this.copyCanvas(null,null,!0).imageData,Ht=await Tt.guess({name:"altText",request:{data:Dt,width:Ft,height:Ut,channels:Dt.length/(Ft*Ut)}});if(!Ht)throw new Error("No response from the AI service.");if(Ht.error)throw new Error("Error from the AI service.");if(Ht.cancel)return null;if(!Ht.output)throw new Error("No valid response from the AI service.");const Kt=Ht.output;return await this.setGuessedAltText(Kt),$t&&!this.hasAltTextData()&&(this.altTextData={alt:Kt,decorative:!1}),Kt}remove(){var kt;ar(this,po)&&(vr(this,Gn,null),this._uiManager.imageManager.deleteId(ar(this,po)),(kt=ar(this,yp))==null||kt.remove(),vr(this,yp,null),ar(this,Pu)&&(clearTimeout(ar(this,Pu)),vr(this,Pu,null))),super.remove()}rebuild(){if(!this.parent){ar(this,po)&&Br(this,cv,Gw).call(this);return}super.rebuild(),this.div!==null&&(ar(this,po)&&ar(this,yp)===null&&Br(this,cv,Gw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(kt){this._isDraggable=!0,kt&&this.div.focus()}isEmpty(){return!(ar(this,bm)||ar(this,Gn)||ar(this,bp)||ar(this,ym)||ar(this,po)||ar(this,s0))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let kt,$t;return this._isCopy&&(kt=this.x,$t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),ar(this,s0)||(ar(this,Gn)?Br(this,dv,Ww).call(this):Br(this,cv,Gw).call(this)),this._isCopy&&this._moveAfterPaste(kt,$t),this._uiManager.addShouldRescale(this),this.div}setCanvas(kt,$t){const{id:Tt,bitmap:Dt}=this._uiManager.imageManager.getFromCanvas(kt,$t);$t.remove(),Tt&&this._uiManager.imageManager.isValidId(Tt)&&(vr(this,po,Tt),Dt&&vr(this,Gn,Dt),vr(this,s0,!1),Br(this,dv,Ww).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;ar(this,Pu)!==null&&clearTimeout(ar(this,Pu)),vr(this,Pu,setTimeout(()=>{vr(this,Pu,null),Br(this,cw,U$).call(this)},200))}copyCanvas(kt,$t,Tt=!1){kt||(kt=224);const{width:Dt,height:Ft}=ar(this,Gn),Ut=new OutputScale;let Ht=ar(this,Gn),Kt=Dt,Yt=Ft,Jt=null;if($t){if(Dt>$t||Ft>$t){const pr=Math.min($t/Dt,$t/Ft);Kt=Math.floor(Dt*pr),Yt=Math.floor(Ft*pr)}Jt=document.createElement("canvas");const er=Jt.width=Math.ceil(Kt*Ut.sx),rr=Jt.height=Math.ceil(Yt*Ut.sy);ar(this,Ml)||(Ht=Br(this,uv,qw).call(this,er,rr));const sr=Jt.getContext("2d");sr.filter=this._uiManager.hcmFilter;let nr="white",ir="#cfcfd8";this._uiManager.hcmFilter!=="none"?ir="black":ColorScheme.isDarkMode&&(nr="#8f8f9d",ir="#42414d");const lr=15,or=lr*Ut.sx,cr=lr*Ut.sy,dr=new OffscreenCanvas(or*2,cr*2),ur=dr.getContext("2d");ur.fillStyle=nr,ur.fillRect(0,0,or*2,cr*2),ur.fillStyle=ir,ur.fillRect(0,0,or,cr),ur.fillRect(or,cr,or,cr),sr.fillStyle=sr.createPattern(dr,"repeat"),sr.fillRect(0,0,er,rr),sr.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,er,rr)}let Zt=null;if(Tt){let er,rr;if(Ut.symmetric&&Ht.width<kt&&Ht.height<kt)er=Ht.width,rr=Ht.height;else if(Ht=ar(this,Gn),Dt>kt||Ft>kt){const ir=Math.min(kt/Dt,kt/Ft);er=Math.floor(Dt*ir),rr=Math.floor(Ft*ir),ar(this,Ml)||(Ht=Br(this,uv,qw).call(this,er,rr))}const nr=new OffscreenCanvas(er,rr).getContext("2d",{willReadFrequently:!0});nr.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,er,rr),Zt={width:er,height:rr,data:nr.getImageData(0,0,er,rr).data}}return{canvas:Jt,width:Kt,height:Yt,imageData:Zt}}static async deserialize(kt,$t,Tt){var nr;let Dt=null,Ft=!1;if(kt instanceof StampAnnotationElement){const{data:{rect:ir,rotation:lr,id:or,structParent:cr,popupRef:dr,richText:ur,contentsObj:pr,creationDate:mr,modificationDate:jr},container:Rr,parent:{page:{pageNumber:br}},canvas:_r}=kt;let Mr,Pr;_r?(delete kt.canvas,{id:Mr,bitmap:Pr}=Tt.imageManager.getFromCanvas(Rr.id,_r),_r.remove()):(Ft=!0,kt._hasNoCanvas=!0);const Or=((nr=await $t._structTree.getAriaAttributes(`${AnnotationPrefix}${or}`))==null?void 0:nr.get("aria-label"))||"";Dt=kt={annotationType:AnnotationEditorType.STAMP,bitmapId:Mr,bitmap:Pr,pageIndex:br-1,rect:ir.slice(0),rotation:lr,annotationElementId:or,id:or,deleted:!1,accessibilityData:{decorative:!1,altText:Or},isSvg:!1,structParent:cr,popupRef:dr,richText:ur,comment:(pr==null?void 0:pr.str)||null,creationDate:mr,modificationDate:jr}}const Ut=await super.deserialize(kt,$t,Tt),{rect:Ht,bitmap:Kt,bitmapUrl:Yt,bitmapId:Jt,isSvg:Zt,accessibilityData:er}=kt;Ft?(Tt.addMissingCanvas(kt.id,Ut),vr(Ut,s0,!0)):Jt&&Tt.imageManager.isValidId(Jt)?(vr(Ut,po,Jt),Kt&&vr(Ut,Gn,Kt)):vr(Ut,bp,Yt),vr(Ut,Ml,Zt);const[rr,sr]=Ut.pageDimensions;return Ut.width=(Ht[2]-Ht[0])/rr,Ut.height=(Ht[3]-Ht[1])/sr,er&&(Ut.altTextData=er),Ut._initialData=Dt,kt.comment&&Ut.setCommentData(kt),vr(Ut,lv,!!Dt),Ut}serialize(kt=!1,$t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const Tt=Object.assign(super.serialize(kt),{bitmapId:ar(this,po),isSvg:ar(this,Ml)});if(this.addComment(Tt),kt)return Tt.bitmapUrl=Br(this,hv,Kw).call(this,!0),Tt.accessibilityData=this.serializeAltText(!0),Tt.isCopy=!0,Tt;const{decorative:Dt,altText:Ft}=this.serializeAltText(!1);if(!Dt&&Ft&&(Tt.accessibilityData={type:"Figure",alt:Ft}),this.annotationElementId){const Ht=Br(this,O2,L_).call(this,Tt);return Ht.isSame?null:(Ht.isSameAltText?delete Tt.accessibilityData:Tt.accessibilityData.structParent=this._initialData.structParent??-1,Tt.id=this.annotationElementId,delete Tt.bitmapId,Tt)}if($t===null)return Tt;$t.stamps||($t.stamps=new Map);const Ut=ar(this,Ml)?(Tt.rect[2]-Tt.rect[0])*(Tt.rect[3]-Tt.rect[1]):null;if(!$t.stamps.has(ar(this,po)))$t.stamps.set(ar(this,po),{area:Ut,serialized:Tt}),Tt.bitmap=Br(this,hv,Kw).call(this,!1);else if(ar(this,Ml)){const Ht=$t.stamps.get(ar(this,po));Ut>Ht.area&&(Ht.area=Ut,Ht.serialized.bitmap.close(),Ht.serialized.bitmap=Br(this,hv,Kw).call(this,!1))}return Tt}renderAnnotationElement(kt){return this.deleted?(kt.hide(),null):(kt.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Gn=new WeakMap,po=new WeakMap,bm=new WeakMap,bp=new WeakMap,ym=new WeakMap,ov=new WeakMap,yp=new WeakMap,s0=new WeakMap,Pu=new WeakMap,Ml=new WeakMap,lv=new WeakMap,n0=new WeakSet,Ov=function(kt,$t=!1){if(!kt){this.remove();return}vr(this,Gn,kt.bitmap),$t||(vr(this,po,kt.id),vr(this,Ml,kt.isSvg)),kt.file&&vr(this,ov,kt.file.name),Br(this,dv,Ww).call(this)},i0=new WeakSet,Bv=function(){if(vr(this,bm,null),this._uiManager.enableWaiting(!1),!!ar(this,yp)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&ar(this,Gn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&ar(this,Gn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},cv=new WeakSet,Gw=function(){if(ar(this,po)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(ar(this,po)).then(Tt=>Br(this,n0,Ov).call(this,Tt,!0)).finally(()=>Br(this,i0,Bv).call(this));return}if(ar(this,bp)){const Tt=ar(this,bp);vr(this,bp,null),this._uiManager.enableWaiting(!0),vr(this,bm,this._uiManager.imageManager.getFromUrl(Tt).then(Dt=>Br(this,n0,Ov).call(this,Dt)).finally(()=>Br(this,i0,Bv).call(this)));return}if(ar(this,ym)){const Tt=ar(this,ym);vr(this,ym,null),this._uiManager.enableWaiting(!0),vr(this,bm,this._uiManager.imageManager.getFromFile(Tt).then(Dt=>Br(this,n0,Ov).call(this,Dt)).finally(()=>Br(this,i0,Bv).call(this)));return}const kt=document.createElement("input");kt.type="file",kt.accept=SupportedImageMimeTypes.join(",");const $t=this._uiManager._signal;vr(this,bm,new Promise(Tt=>{kt.addEventListener("change",async()=>{if(!kt.files||kt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Dt=await this._uiManager.imageManager.getFromFile(kt.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Br(this,n0,Ov).call(this,Dt)}Tt()},{signal:$t}),kt.addEventListener("cancel",()=>{this.remove(),Tt()},{signal:$t})}).finally(()=>Br(this,i0,Bv).call(this))),kt.click()},dv=new WeakSet,Ww=function(){var Kt;const{div:kt}=this;let{width:$t,height:Tt}=ar(this,Gn);const[Dt,Ft]=this.pageDimensions,Ut=.75;if(this.width)$t=this.width*Dt,Tt=this.height*Ft;else if($t>Ut*Dt||Tt>Ut*Ft){const Yt=Math.min(Ut*Dt/$t,Ut*Ft/Tt);$t*=Yt,Tt*=Yt}this._uiManager.enableWaiting(!1);const Ht=vr(this,yp,document.createElement("canvas"));Ht.setAttribute("role","img"),this.addContainer(Ht),this.width=$t/Dt,this.height=Tt/Ft,this.setDims(),(Kt=this._initialOptions)!=null&&Kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(kt.hidden=!1),Br(this,cw,U$).call(this),ar(this,lv)||(this.parent.addUndoableEditor(this),vr(this,lv,!0)),this._reportTelemetry({action:"inserted_image"}),ar(this,ov)&&this.div.setAttribute("aria-description",ar(this,ov)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},uv=new WeakSet,qw=function(kt,$t){const{width:Tt,height:Dt}=ar(this,Gn);let Ft=Tt,Ut=Dt,Ht=ar(this,Gn);for(;Ft>2*kt||Ut>2*$t;){const Kt=Ft,Yt=Ut;Ft>2*kt&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2)),Ut>2*$t&&(Ut=Ut>=16384?Math.floor(Ut/2)-1:Math.ceil(Ut/2));const Jt=new OffscreenCanvas(Ft,Ut);Jt.getContext("2d").drawImage(Ht,0,0,Kt,Yt,0,0,Ft,Ut),Ht=Jt.transferToImageBitmap()}return Ht},cw=new WeakSet,U$=function(){const[kt,$t]=this.parentDimensions,{width:Tt,height:Dt}=this,Ft=new OutputScale,Ut=Math.ceil(Tt*kt*Ft.sx),Ht=Math.ceil(Dt*$t*Ft.sy),Kt=ar(this,yp);if(!Kt||Kt.width===Ut&&Kt.height===Ht)return;Kt.width=Ut,Kt.height=Ht;const Yt=ar(this,Ml)?ar(this,Gn):Br(this,uv,qw).call(this,Ut,Ht),Jt=Kt.getContext("2d");Jt.filter=this._uiManager.hcmFilter,Jt.drawImage(Yt,0,0,Yt.width,Yt.height,0,0,Ut,Ht)},hv=new WeakSet,Kw=function(kt){if(kt){if(ar(this,Ml)){const Dt=this._uiManager.imageManager.getSvgUrl(ar(this,po));if(Dt)return Dt}const $t=document.createElement("canvas");return{width:$t.width,height:$t.height}=ar(this,Gn),$t.getContext("2d").drawImage(ar(this,Gn),0,0),$t.toDataURL()}if(ar(this,Ml)){const[$t,Tt]=this.pageDimensions,Dt=Math.round(this.width*$t*PixelsPerInch.PDF_TO_CSS_UNITS),Ft=Math.round(this.height*Tt*PixelsPerInch.PDF_TO_CSS_UNITS),Ut=new OffscreenCanvas(Dt,Ft);return Ut.getContext("2d").drawImage(ar(this,Gn),0,0,ar(this,Gn).width,ar(this,Gn).height,0,0,Dt,Ft),Ut.transferToImageBitmap()}return structuredClone(ar(this,Gn))},O2=new WeakSet,L_=function(kt){var Ut;const{pageIndex:$t,accessibilityData:{altText:Tt}}=this._initialData,Dt=kt.pageIndex===$t,Ft=(((Ut=kt.accessibilityData)==null?void 0:Ut.alt)||"")===Tt;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&Dt&&Ft,isSameAltText:Ft}},Es(StampEditor,"_type","stamp"),Es(StampEditor,"_editorType",AnnotationEditorType.STAMP);var a0,pv,vm,Em,vp,Wo,jm,fv,mv,ou,Ep,fo,jp,wm,xv,Ns,Rm,dw,H$,B2,O_,Wl,cu,uw,G$,hw,W$,gv,Yw;const Xl=class Xl{constructor({uiManager:dt,pageIndex:kt,div:$t,structTreeLayer:Tt,accessibilityManager:Dt,annotationLayer:Ft,drawLayer:Ut,textLayer:Ht,viewport:Kt,l10n:Yt}){yr(this,dw);yr(this,B2);yr(this,Wl);yr(this,uw);yr(this,hw);yr(this,gv);yr(this,a0,void 0);yr(this,pv,!1);yr(this,vm,null);yr(this,Em,null);yr(this,vp,null);yr(this,Wo,new Map);yr(this,jm,!1);yr(this,fv,!1);yr(this,mv,!1);yr(this,ou,null);yr(this,Ep,null);yr(this,fo,null);yr(this,jp,null);yr(this,wm,null);yr(this,xv,-1);yr(this,Ns,void 0);const Jt=[...ar(Xl,Rm).values()];if(!Xl._initialized){Xl._initialized=!0;for(const Zt of Jt)Zt.initialize(Yt,dt)}dt.registerEditorTypes(Jt),vr(this,Ns,dt),this.pageIndex=kt,this.div=$t,vr(this,a0,Dt),vr(this,vm,Ft),this.viewport=Kt,vr(this,fo,Ht),this.drawLayer=Ut,this._structTree=Tt,ar(this,Ns).addLayer(this)}get isEmpty(){return ar(this,Wo).size===0}get isInvisible(){return this.isEmpty&&ar(this,Ns).getMode()===AnnotationEditorType.NONE}updateToolbar(dt){ar(this,Ns).updateToolbar(dt)}updateMode(dt=ar(this,Ns).getMode()){switch(Br(this,gv,Yw).call(this),dt){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:kt}=this.div;if(kt.toggle("nonEditing",!1),dt===AnnotationEditorType.POPUP)kt.toggle("commentEditing",!0);else{kt.toggle("commentEditing",!1);for(const $t of ar(Xl,Rm).values())kt.toggle(`${$t._type}Editing`,dt===$t._editorType)}this.div.hidden=!1}hasTextLayer(dt){var kt;return dt===((kt=ar(this,fo))==null?void 0:kt.div)}setEditingState(dt){ar(this,Ns).setEditingState(dt)}addCommands(dt){ar(this,Ns).addCommands(dt)}cleanUndoStack(dt){ar(this,Ns).cleanUndoStack(dt)}toggleDrawing(dt=!1){this.div.classList.toggle("drawing",!dt)}togglePointerEvents(dt=!1){this.div.classList.toggle("disabled",!dt)}toggleAnnotationLayerPointerEvents(dt=!1){var kt;(kt=ar(this,vm))==null||kt.div.classList.toggle("disabled",!dt)}async enable(){var $t;vr(this,mv,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),($t=ar(this,wm))==null||$t.abort(),vr(this,wm,null);const dt=new Set;for(const Tt of ar(this,dw,H$))Tt.enableEditing(),Tt.show(!0),Tt.annotationElementId&&(ar(this,Ns).removeChangedExistingAnnotation(Tt),dt.add(Tt.annotationElementId));const kt=ar(this,vm);if(kt)for(const Tt of kt.getEditableAnnotations()){if(Tt.hide(),ar(this,Ns).isDeletedAnnotationElement(Tt.data.id)||dt.has(Tt.data.id))continue;const Dt=await this.deserialize(Tt);Dt&&(this.addOrRebuild(Dt),Dt.enableEditing())}vr(this,mv,!1),ar(this,Ns)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var $t;if(vr(this,fv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),ar(this,fo)&&!ar(this,wm)){vr(this,wm,new AbortController);const Tt=ar(this,Ns).combinedSignal(ar(this,wm));ar(this,fo).div.addEventListener("pointerdown",Dt=>{const{clientX:Ut,clientY:Ht,timeStamp:Kt}=Dt,Yt=ar(this,xv);if(Kt-Yt>500){vr(this,xv,Kt);return}vr(this,xv,-1);const{classList:Jt}=this.div;Jt.toggle("getElements",!0);const Zt=document.elementsFromPoint(Ut,Ht);if(Jt.toggle("getElements",!1),!this.div.contains(Zt[0]))return;let er;const rr=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const nr of Zt)if(rr.test(nr.id)){er=nr.id;break}if(!er)return;const sr=ar(this,Wo).get(er);(sr==null?void 0:sr.annotationElementId)===null&&(Dt.stopPropagation(),Dt.preventDefault(),sr.dblclick(Dt))},{signal:Tt,capture:!0})}const dt=ar(this,vm);if(dt){const Tt=new Map,Dt=new Map;for(const Ut of ar(this,dw,H$)){if(Ut.disableEditing(),!Ut.annotationElementId){Ut.updateFakeAnnotationElement(dt);continue}if(Ut.serialize()!==null){Tt.set(Ut.annotationElementId,Ut);continue}else Dt.set(Ut.annotationElementId,Ut);($t=this.getEditableAnnotation(Ut.annotationElementId))==null||$t.show(),Ut.remove()}const Ft=dt.getEditableAnnotations();for(const Ut of Ft){const{id:Ht}=Ut.data;if(ar(this,Ns).isDeletedAnnotationElement(Ht)){Ut.updateEdited({deleted:!0});continue}let Kt=Dt.get(Ht);if(Kt){Kt.resetAnnotationElement(Ut),Kt.show(!1),Ut.show();continue}Kt=Tt.get(Ht),Kt&&(ar(this,Ns).addChangedExistingAnnotation(Kt),Kt.renderAnnotationElement(Ut)&&Kt.show(!1)),Ut.show()}}Br(this,gv,Yw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:kt}=this.div;for(const Tt of ar(Xl,Rm).values())kt.remove(`${Tt._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),vr(this,fv,!1)}getEditableAnnotation(dt){var kt;return((kt=ar(this,vm))==null?void 0:kt.getEditableAnnotation(dt))||null}setActiveEditor(dt){ar(this,Ns).getActive()!==dt&&ar(this,Ns).setActiveEditor(dt)}enableTextSelection(){var dt;if(this.div.tabIndex=-1,(dt=ar(this,fo))!=null&&dt.div&&!ar(this,jp)){vr(this,jp,new AbortController);const kt=ar(this,Ns).combinedSignal(ar(this,jp));ar(this,fo).div.addEventListener("pointerdown",Br(this,B2,O_).bind(this),{signal:kt}),ar(this,fo).div.classList.add("highlighting")}}disableTextSelection(){var dt;this.div.tabIndex=0,(dt=ar(this,fo))!=null&&dt.div&&ar(this,jp)&&(ar(this,jp).abort(),vr(this,jp,null),ar(this,fo).div.classList.remove("highlighting"))}enableClick(){if(ar(this,Em))return;vr(this,Em,new AbortController);const dt=ar(this,Ns).combinedSignal(ar(this,Em));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:dt});const kt=this.pointerup.bind(this);this.div.addEventListener("pointerup",kt,{signal:dt}),this.div.addEventListener("pointercancel",kt,{signal:dt})}disableClick(){var dt;(dt=ar(this,Em))==null||dt.abort(),vr(this,Em,null)}attach(dt){ar(this,Wo).set(dt.id,dt);const{annotationElementId:kt}=dt;kt&&ar(this,Ns).isDeletedAnnotationElement(kt)&&ar(this,Ns).removeDeletedAnnotationElement(dt)}detach(dt){var kt;ar(this,Wo).delete(dt.id),(kt=ar(this,a0))==null||kt.removePointerInTextLayer(dt.contentDiv),!ar(this,fv)&&dt.annotationElementId&&ar(this,Ns).addDeletedAnnotationElement(dt)}remove(dt){this.detach(dt),ar(this,Ns).removeEditor(dt),dt.div.remove(),dt.isAttachedToDOM=!1}changeParent(dt){var kt;dt.parent!==this&&(dt.parent&&dt.annotationElementId&&(ar(this,Ns).addDeletedAnnotationElement(dt.annotationElementId),AnnotationEditor.deleteAnnotationElement(dt),dt.annotationElementId=null),this.attach(dt),(kt=dt.parent)==null||kt.detach(dt),dt.setParent(this),dt.div&&dt.isAttachedToDOM&&(dt.div.remove(),this.div.append(dt.div)))}add(dt){if(!(dt.parent===this&&dt.isAttachedToDOM)){if(this.changeParent(dt),ar(this,Ns).addEditor(dt),this.attach(dt),!dt.isAttachedToDOM){const kt=dt.render();this.div.append(kt),dt.isAttachedToDOM=!0}dt.fixAndSetPosition(),dt.onceAdded(!ar(this,mv)),ar(this,Ns).addToAnnotationStorage(dt),dt._reportTelemetry(dt.telemetryInitialData)}}moveEditorInDOM(dt){var $t;if(!dt.isAttachedToDOM)return;const{activeElement:kt}=document;dt.div.contains(kt)&&!ar(this,vp)&&(dt._focusEventsAllowed=!1,vr(this,vp,setTimeout(()=>{vr(this,vp,null),dt.div.contains(document.activeElement)?dt._focusEventsAllowed=!0:(dt.div.addEventListener("focusin",()=>{dt._focusEventsAllowed=!0},{once:!0,signal:ar(this,Ns)._signal}),kt.focus())},0))),dt._structTreeParentId=($t=ar(this,a0))==null?void 0:$t.moveElementInDOM(this.div,dt.div,dt.contentDiv,!0)}addOrRebuild(dt){dt.needsToBeRebuilt()?(dt.parent||(dt.parent=this),dt.rebuild(),dt.show()):this.add(dt)}addUndoableEditor(dt){const kt=()=>dt._uiManager.rebuild(dt),$t=()=>{dt.remove()};this.addCommands({cmd:kt,undo:$t,mustExec:!1})}getEditorByUID(dt){for(const kt of ar(this,Wo).values())if(kt.uid===dt)return kt;return null}getNextId(){return ar(this,Ns).getId()}combinedSignal(dt){return ar(this,Ns).combinedSignal(dt)}canCreateNewEmptyEditor(){var dt;return(dt=ar(this,Wl,cu))==null?void 0:dt.canCreateNewEmptyEditor()}async pasteEditor(dt,kt){this.updateToolbar(dt),await ar(this,Ns).updateMode(dt.mode);const{offsetX:$t,offsetY:Tt}=Br(this,hw,W$).call(this),Dt=this.getNextId(),Ft=Br(this,uw,G$).call(this,{parent:this,id:Dt,x:$t,y:Tt,uiManager:ar(this,Ns),isCentered:!0,...kt});Ft&&this.add(Ft)}async deserialize(dt){var kt;return await((kt=ar(Xl,Rm).get(dt.annotationType??dt.annotationEditorType))==null?void 0:kt.deserialize(dt,this,ar(this,Ns)))||null}createAndAddNewEditor(dt,kt,$t={}){const Tt=this.getNextId(),Dt=Br(this,uw,G$).call(this,{parent:this,id:Tt,x:dt.offsetX,y:dt.offsetY,uiManager:ar(this,Ns),isCentered:kt,...$t});return Dt&&this.add(Dt),Dt}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(dt={}){this.createAndAddNewEditor(Br(this,hw,W$).call(this),!0,dt)}setSelected(dt){ar(this,Ns).setSelected(dt)}toggleSelected(dt){ar(this,Ns).toggleSelected(dt)}unselect(dt){ar(this,Ns).unselect(dt)}pointerup(dt){var Tt;const{isMac:kt}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&kt||dt.target!==this.div||!ar(this,jm)||(vr(this,jm,!1),(Tt=ar(this,Wl,cu))!=null&&Tt.isDrawer&&ar(this,Wl,cu).supportMultipleDrawings))return;if(!ar(this,pv)){vr(this,pv,!0);return}const $t=ar(this,Ns).getMode();if($t===AnnotationEditorType.STAMP||$t===AnnotationEditorType.SIGNATURE){ar(this,Ns).unselectAll();return}this.createAndAddNewEditor(dt,!1)}pointerdown(dt){var Tt;if(ar(this,Ns).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),ar(this,jm)){vr(this,jm,!1);return}const{isMac:kt}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&kt||dt.target!==this.div)return;if(vr(this,jm,!0),(Tt=ar(this,Wl,cu))!=null&&Tt.isDrawer){this.startDrawingSession(dt);return}const $t=ar(this,Ns).getActive();vr(this,pv,!$t||$t.isEmpty())}startDrawingSession(dt){if(this.div.focus({preventScroll:!0}),ar(this,ou)){ar(this,Wl,cu).startDrawing(this,ar(this,Ns),!1,dt);return}ar(this,Ns).setCurrentDrawingSession(this),vr(this,ou,new AbortController);const kt=ar(this,Ns).combinedSignal(ar(this,ou));this.div.addEventListener("blur",({relatedTarget:$t})=>{$t&&!this.div.contains($t)&&(vr(this,Ep,null),this.commitOrRemove())},{signal:kt}),ar(this,Wl,cu).startDrawing(this,ar(this,Ns),!1,dt)}pause(dt){if(dt){const{activeElement:kt}=document;this.div.contains(kt)&&vr(this,Ep,kt);return}ar(this,Ep)&&setTimeout(()=>{var kt;(kt=ar(this,Ep))==null||kt.focus(),vr(this,Ep,null)},0)}endDrawingSession(dt=!1){return ar(this,ou)?(ar(this,Ns).setCurrentDrawingSession(null),ar(this,ou).abort(),vr(this,ou,null),vr(this,Ep,null),ar(this,Wl,cu).endDrawing(dt)):null}findNewParent(dt,kt,$t){const Tt=ar(this,Ns).findParent(kt,$t);return Tt===null||Tt===this?!1:(Tt.changeParent(dt),!0)}commitOrRemove(){return ar(this,ou)?(this.endDrawingSession(),!0):!1}onScaleChanging(){ar(this,ou)&&ar(this,Wl,cu).onScaleChangingWhenDrawing(this)}destroy(){var dt,kt;this.commitOrRemove(),((dt=ar(this,Ns).getActive())==null?void 0:dt.parent)===this&&(ar(this,Ns).commitOrRemove(),ar(this,Ns).setActiveEditor(null)),ar(this,vp)&&(clearTimeout(ar(this,vp)),vr(this,vp,null));for(const $t of ar(this,Wo).values())(kt=ar(this,a0))==null||kt.removePointerInTextLayer($t.contentDiv),$t.setParent(null),$t.isAttachedToDOM=!1,$t.div.remove();this.div=null,ar(this,Wo).clear(),ar(this,Ns).removeLayer(this)}render({viewport:dt}){this.viewport=dt,setLayerDimensions(this.div,dt);for(const kt of ar(this,Ns).getEditors(this.pageIndex))this.add(kt),kt.rebuild();this.updateMode()}update({viewport:dt}){ar(this,Ns).commitOrRemove(),Br(this,gv,Yw).call(this);const kt=this.viewport.rotation,$t=dt.rotation;if(this.viewport=dt,setLayerDimensions(this.div,{rotation:$t}),kt!==$t)for(const Tt of ar(this,Wo).values())Tt.rotate($t)}get pageDimensions(){const{pageWidth:dt,pageHeight:kt}=this.viewport.rawDims;return[dt,kt]}get scale(){return ar(this,Ns).viewParameters.realScale}};a0=new WeakMap,pv=new WeakMap,vm=new WeakMap,Em=new WeakMap,vp=new WeakMap,Wo=new WeakMap,jm=new WeakMap,fv=new WeakMap,mv=new WeakMap,ou=new WeakMap,Ep=new WeakMap,fo=new WeakMap,jp=new WeakMap,wm=new WeakMap,xv=new WeakMap,Ns=new WeakMap,Rm=new WeakMap,dw=new WeakSet,H$=function(){return ar(this,Wo).size!==0?ar(this,Wo).values():ar(this,Ns).getEditors(this.pageIndex)},B2=new WeakSet,O_=function(dt){ar(this,Ns).unselectAll();const{target:kt}=dt;if(kt===ar(this,fo).div||(kt.getAttribute("role")==="img"||kt.classList.contains("endOfContent"))&&ar(this,fo).div.contains(kt)){const{isMac:$t}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&$t)return;ar(this,Ns).showAllEditors("highlight",!0,!0),ar(this,fo).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,ar(this,Ns).direction==="ltr",{target:ar(this,fo).div,x:dt.x,y:dt.y}),ar(this,fo).div.addEventListener("pointerup",()=>{ar(this,fo).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:ar(this,Ns)._signal}),dt.preventDefault()}},Wl=new WeakSet,cu=function(){return ar(Xl,Rm).get(ar(this,Ns).getMode())},uw=new WeakSet,G$=function(dt){const kt=ar(this,Wl,cu);return kt?new kt.prototype.constructor(dt):null},hw=new WeakSet,W$=function(){const{x:dt,y:kt,width:$t,height:Tt}=this.boundingClientRect,Dt=Math.max(0,dt),Ft=Math.max(0,kt),Ut=Math.min(window.innerWidth,dt+$t),Ht=Math.min(window.innerHeight,kt+Tt),Kt=(Dt+Ut)/2-dt,Yt=(Ft+Ht)/2-kt,[Jt,Zt]=this.viewport.rotation%180===0?[Kt,Yt]:[Yt,Kt];return{offsetX:Jt,offsetY:Zt}},gv=new WeakSet,Yw=function(){for(const dt of ar(this,Wo).values())dt.isEmpty()&&dt.remove()},Es(Xl,"_initialized",!1),yr(Xl,Rm,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(dt=>[dt._editorType,dt])));let AnnotationEditorLayer=Xl;var lu,Fo,o0,pw,V2,B_,fw,q$,z2,V_,mw,K$;const ga=class ga{constructor({pageIndex:dt}){yr(this,fw);yr(this,z2);yr(this,mw);yr(this,lu,null);yr(this,Fo,new Map);yr(this,o0,new Map);this.pageIndex=dt}setParent(dt){if(!ar(this,lu)){vr(this,lu,dt);return}if(ar(this,lu)!==dt){if(ar(this,Fo).size>0)for(const kt of ar(this,Fo).values())kt.remove(),dt.append(kt);vr(this,lu,dt)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(dt,kt=!1,$t=!1){const Tt=xa(ga,pw)._++,Dt=Br(this,fw,q$).call(this),Ft=ga._svgFactory.createElement("defs");Dt.append(Ft);const Ut=ga._svgFactory.createElement("path");Ft.append(Ut);const Ht=`path_p${this.pageIndex}_${Tt}`;Ut.setAttribute("id",Ht),Ut.setAttribute("vector-effect","non-scaling-stroke"),kt&&ar(this,o0).set(Tt,Ut);const Kt=$t?Br(this,z2,V_).call(this,Ft,Ht):null,Yt=ga._svgFactory.createElement("use");return Dt.append(Yt),Yt.setAttribute("href",`#${Ht}`),this.updateProperties(Dt,dt),ar(this,Fo).set(Tt,Dt),{id:Tt,clipPathId:`url(#${Kt})`}}drawOutline(dt,kt){const $t=xa(ga,pw)._++,Tt=Br(this,fw,q$).call(this),Dt=ga._svgFactory.createElement("defs");Tt.append(Dt);const Ft=ga._svgFactory.createElement("path");Dt.append(Ft);const Ut=`path_p${this.pageIndex}_${$t}`;Ft.setAttribute("id",Ut),Ft.setAttribute("vector-effect","non-scaling-stroke");let Ht;if(kt){const Jt=ga._svgFactory.createElement("mask");Dt.append(Jt),Ht=`mask_p${this.pageIndex}_${$t}`,Jt.setAttribute("id",Ht),Jt.setAttribute("maskUnits","objectBoundingBox");const Zt=ga._svgFactory.createElement("rect");Jt.append(Zt),Zt.setAttribute("width","1"),Zt.setAttribute("height","1"),Zt.setAttribute("fill","white");const er=ga._svgFactory.createElement("use");Jt.append(er),er.setAttribute("href",`#${Ut}`),er.setAttribute("stroke","none"),er.setAttribute("fill","black"),er.setAttribute("fill-rule","nonzero"),er.classList.add("mask")}const Kt=ga._svgFactory.createElement("use");Tt.append(Kt),Kt.setAttribute("href",`#${Ut}`),Ht&&Kt.setAttribute("mask",`url(#${Ht})`);const Yt=Kt.cloneNode();return Tt.append(Yt),Kt.classList.add("mainOutline"),Yt.classList.add("secondaryOutline"),this.updateProperties(Tt,dt),ar(this,Fo).set($t,Tt),$t}finalizeDraw(dt,kt){ar(this,o0).delete(dt),this.updateProperties(dt,kt)}updateProperties(dt,kt){var Ht;if(!kt)return;const{root:$t,bbox:Tt,rootClass:Dt,path:Ft}=kt,Ut=typeof dt=="number"?ar(this,Fo).get(dt):dt;if(Ut){if($t&&Br(this,mw,K$).call(this,Ut,$t),Tt&&Br(Ht=ga,V2,B_).call(Ht,Ut,Tt),Dt){const{classList:Kt}=Ut;for(const[Yt,Jt]of Object.entries(Dt))Kt.toggle(Yt,Jt)}if(Ft){const Yt=Ut.firstChild.firstChild;Br(this,mw,K$).call(this,Yt,Ft)}}}updateParent(dt,kt){if(kt===this)return;const $t=ar(this,Fo).get(dt);$t&&(ar(kt,lu).append($t),ar(this,Fo).delete(dt),ar(kt,Fo).set(dt,$t))}remove(dt){ar(this,o0).delete(dt),ar(this,lu)!==null&&(ar(this,Fo).get(dt).remove(),ar(this,Fo).delete(dt))}destroy(){vr(this,lu,null);for(const dt of ar(this,Fo).values())dt.remove();ar(this,Fo).clear(),ar(this,o0).clear()}};lu=new WeakMap,Fo=new WeakMap,o0=new WeakMap,pw=new WeakMap,V2=new WeakSet,B_=function(dt,[kt,$t,Tt,Dt]){const{style:Ft}=dt;Ft.top=`${100*$t}%`,Ft.left=`${100*kt}%`,Ft.width=`${100*Tt}%`,Ft.height=`${100*Dt}%`},fw=new WeakSet,q$=function(){const dt=ga._svgFactory.create(1,1,!0);return ar(this,lu).append(dt),dt.setAttribute("aria-hidden",!0),dt},z2=new WeakSet,V_=function(dt,kt){const $t=ga._svgFactory.createElement("clipPath");dt.append($t);const Tt=`clip_${kt}`;$t.setAttribute("id",Tt),$t.setAttribute("clipPathUnits","objectBoundingBox");const Dt=ga._svgFactory.createElement("use");return $t.append(Dt),Dt.setAttribute("href",`#${kt}`),Dt.classList.add("clip"),Tt},mw=new WeakSet,K$=function(dt,kt){for(const[$t,Tt]of Object.entries(kt))Tt===null?dt.removeAttribute($t):dt.setAttribute($t,Tt)},yr(ga,V2),yr(ga,pw,0);let DrawLayer=ga;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(et,dt,kt){for(kt of et.keys())if(dequal(kt,dt))return kt}function dequal(et,dt){var kt,$t,Tt;if(et===dt)return!0;if(et&&dt&&(kt=et.constructor)===dt.constructor){if(kt===Date)return et.getTime()===dt.getTime();if(kt===RegExp)return et.toString()===dt.toString();if(kt===Array){if(($t=et.length)===dt.length)for(;$t--&&dequal(et[$t],dt[$t]););return $t===-1}if(kt===Set){if(et.size!==dt.size)return!1;for($t of et)if(Tt=$t,Tt&&typeof Tt=="object"&&(Tt=find(dt,Tt),!Tt)||!dt.has(Tt))return!1;return!0}if(kt===Map){if(et.size!==dt.size)return!1;for($t of et)if(Tt=$t[0],Tt&&typeof Tt=="object"&&(Tt=find(dt,Tt),!Tt)||!dequal($t[1],dt.get(Tt)))return!1;return!0}if(kt===ArrayBuffer)et=new Uint8Array(et),dt=new Uint8Array(dt);else if(kt===DataView){if(($t=et.byteLength)===dt.byteLength)for(;$t--&&et.getInt8($t)===dt.getInt8($t););return $t===-1}if(ArrayBuffer.isView(et)){if(($t=et.byteLength)===dt.byteLength)for(;$t--&&et[$t]===dt[$t];);return $t===-1}if(!kt||typeof et=="object"){$t=0;for(kt in et)if(has.call(et,kt)&&++$t&&!has.call(dt,kt)||!(kt in dt)||!dequal(et[kt],dt[kt]))return!1;return Object.keys(dt).length===$t}}return et!==et&&dt!==dt}function makeCancellablePromise(et){let dt=!1;return{promise:new Promise(($t,Tt)=>{et.then(Dt=>!dt&&$t(Dt)).catch(Dt=>!dt&&Tt(Dt))}),cancel(){dt=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(et,dt){const kt={};for(const $t of allEvents){const Tt=et[$t];Tt&&(dt?kt[$t]=Dt=>Tt(Dt,dt($t)):kt[$t]=Tt)}return kt}var isProduction=!0,prefix$6="Invariant failed";function invariant(et,dt){if(!et){if(isProduction)throw new Error(prefix$6);var kt=typeof dt=="function"?dt():dt,$t=kt?"".concat(prefix$6,": ").concat(kt):prefix$6;throw new Error($t)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(dt){this.pdfDocument=dt}setViewer(dt){this.pdfViewer=dt}setExternalLinkRel(dt){this.externalLinkRel=dt}setExternalLinkTarget(dt){this.externalLinkTarget=dt}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(dt){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=dt}get rotation(){return 0}set rotation(dt){}addLinkAttributes(dt,kt,$t){dt.href=kt,dt.rel=this.externalLinkRel||DEFAULT_LINK_REL,dt.target=$t?"_blank":this.externalLinkTarget||""}goToDestination(dt){return new Promise(kt=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(dt,"Destination is not specified."),typeof dt=="string"?this.pdfDocument.getDestination(dt).then(kt):Array.isArray(dt)?kt(dt):dt.then(kt)}).then(kt=>{invariant(Array.isArray(kt),`"${kt}" is not a valid destination array.`);const $t=kt[0];new Promise(Tt=>{invariant(this.pdfDocument,"PDF document not loaded."),$t instanceof Object?this.pdfDocument.getPageIndex($t).then(Dt=>{Tt(Dt)}).catch(()=>{invariant(!1,`"${$t}" is not a valid page reference.`)}):typeof $t=="number"?Tt($t):invariant(!1,`"${$t}" is not a valid destination reference.`)}).then(Tt=>{const Dt=Tt+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(Dt>=1&&Dt<=this.pagesCount,`"${Dt}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:kt,pageIndex:Tt,pageNumber:Dt})})})}goToPage(dt){const kt=dt-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(dt>=1&&dt<=this.pagesCount,`"${dt}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:kt,pageNumber:dt})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(dt){this.goToDestination(dt)}}function Message({children:et,type:dt}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${dt}`,children:et})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer$1(et,dt){switch(dt.type){case"RESOLVE":return{value:dt.value,error:void 0};case"REJECT":return{value:!1,error:dt.error};case"RESET":return{value:void 0,error:void 0};default:return et}}function useResolver(){return reactExports.useReducer(reducer$1,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(et){return typeof et<"u"}function isProvided(et){return isDefined(et)&&et!==null}function isString$1(et){return typeof et=="string"}function isArrayBuffer(et){return et instanceof ArrayBuffer}function isBlob(et){return invariant(isBrowser,"isBlob can only be used in a browser environment"),et instanceof Blob}function isDataURI(et){return isString$1(et)&&/^data:/.test(et)}function dataURItoByteString(et){invariant(isDataURI(et),"Invalid data URI.");const[dt="",kt=""]=et.split(",");return dt.split(";").indexOf("base64")!==-1?atob(kt):unescape(kt)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(et){et!=null&&et.cancel&&et.cancel()}function makePageCallback(et,dt){return Object.defineProperty(et,"width",{get(){return this.view[2]*dt},configurable:!0}),Object.defineProperty(et,"height",{get(){return this.view[3]*dt},configurable:!0}),Object.defineProperty(et,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(et,"originalHeight",{get(){return this.view[3]},configurable:!0}),et}function isCancelException(et){return et.name==="RenderingCancelledException"}function loadFromFile(et){return new Promise((dt,kt)=>{const $t=new FileReader;$t.onload=()=>{if(!$t.result)return kt(new Error("Error while reading a file."));dt($t.result)},$t.onerror=Tt=>{if(!Tt.target)return kt(new Error("Error while reading a file."));const{error:Dt}=Tt.target;if(!Dt)return kt(new Error("Error while reading a file."));switch(Dt.code){case Dt.NOT_FOUND_ERR:return kt(new Error("Error while reading a file: File not found."));case Dt.SECURITY_ERR:return kt(new Error("Error while reading a file: Security error."));case Dt.ABORT_ERR:return kt(new Error("Error while reading a file: Aborted."));default:return kt(new Error("Error while reading a file."))}},$t.readAsArrayBuffer(et)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(et,dt)=>{switch(dt){case PasswordResponses$1.NEED_PASSWORD:{const kt=prompt("Enter the password to open this PDF file.");et(kt);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const kt=prompt("Invalid password. Please try again.");et(kt);break}}};function isParameterObject(et){return typeof et=="object"&&et!==null&&("data"in et||"range"in et||"url"in et)}const Document=reactExports.forwardRef(function et({children:dt,className:kt,error:$t="Failed to load PDF file.",externalLinkRel:Tt,externalLinkTarget:Dt,file:Ft,inputRef:Ut,imageResourcesPath:Ht,loading:Kt="Loading PDF",noData:Yt="No PDF file specified.",onItemClick:Jt,onLoadError:Zt,onLoadProgress:er,onLoadSuccess:rr,onPassword:sr=defaultOnPassword,onSourceError:nr,onSourceSuccess:ir,options:lr,renderMode:or,rotate:cr,scale:dr,...ur},pr){const[mr,jr]=useResolver(),{value:Rr,error:br}=mr,[_r,Mr]=useResolver(),{value:Pr,error:Or}=_r,kr=reactExports.useRef(new LinkService),Tr=reactExports.useRef([]),xr=reactExports.useRef(void 0),wr=reactExports.useRef(void 0);Ft&&Ft!==xr.current&&isParameterObject(Ft)&&(warning$1(!dequal(Ft,xr.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),xr.current=Ft),lr&&lr!==wr.current&&(warning$1(!dequal(lr,wr.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),wr.current=lr);const zr=reactExports.useRef({scrollPageIntoView:ps=>{const{dest:ls,pageNumber:js,pageIndex:$s=js-1}=ps;if(Jt){Jt({dest:ls,pageIndex:$s,pageNumber:js});return}const Ds=Tr.current[$s];if(Ds){Ds.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${js} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(pr,()=>({linkService:kr,pages:Tr,viewer:zr}),[]);function Hr(){ir&&ir()}function Yr(){br&&(warning$1(!1,br.toString()),nr&&nr(br))}function rs(){jr({type:"RESET"})}reactExports.useEffect(rs,[Ft,jr]);const as=reactExports.useCallback(async()=>{if(!Ft)return null;if(typeof Ft=="string")return isDataURI(Ft)?{data:dataURItoByteString(Ft)}:(displayCORSWarning(),{url:Ft});if(Ft instanceof PDFDataRangeTransport)return{range:Ft};if(isArrayBuffer(Ft))return{data:Ft};if(isBrowser&&isBlob(Ft))return{data:await loadFromFile(Ft)};if(invariant(typeof Ft=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(Ft),"Invalid parameter object: need either .data, .range or .url"),"url"in Ft&&typeof Ft.url=="string"){if(isDataURI(Ft.url)){const{url:ps,...ls}=Ft;return{data:dataURItoByteString(ps),...ls}}displayCORSWarning()}return Ft},[Ft]);reactExports.useEffect(()=>{const ps=makeCancellablePromise(as());return ps.promise.then(ls=>{jr({type:"RESOLVE",value:ls})}).catch(ls=>{jr({type:"REJECT",error:ls})}),()=>{cancelRunningTask(ps)}},[as,jr]),reactExports.useEffect(()=>{if(!(typeof Rr>"u")){if(Rr===!1){Yr();return}Hr()}},[Rr]);function es(){Pr&&(rr&&rr(Pr),Tr.current=new Array(Pr.numPages),kr.current.setDocument(Pr))}function Xr(){Or&&(warning$1(!1,Or.toString()),Zt&&Zt(Or))}reactExports.useEffect(function(){Mr({type:"RESET"})},[Mr,Rr]),reactExports.useEffect(function(){if(!Rr)return;const ls=lr?{...Rr,...lr}:Rr,js=getDocument(ls);er&&(js.onProgress=er),sr&&(js.onPassword=sr);const $s=js,Ds=$s.promise.then(Ts=>{Mr({type:"RESOLVE",value:Ts})}).catch(Ts=>{$s.destroyed||Mr({type:"REJECT",error:Ts})});return()=>{Ds.finally(()=>$s.destroy())}},[lr,Mr,Rr]),reactExports.useEffect(()=>{if(!(typeof Pr>"u")){if(Pr===!1){Xr();return}es()}},[Pr]),reactExports.useEffect(function(){kr.current.setViewer(zr.current),kr.current.setExternalLinkRel(Tt),kr.current.setExternalLinkTarget(Dt)},[Tt,Dt]);const Wr=reactExports.useCallback((ps,ls)=>{Tr.current[ps]=ls},[]),cs=reactExports.useCallback(ps=>{delete Tr.current[ps]},[]),ns=reactExports.useMemo(()=>({imageResourcesPath:Ht,linkService:kr.current,onItemClick:Jt,pdf:Pr,registerPage:Wr,renderMode:or,rotate:cr,scale:dr,unregisterPage:cs}),[Ht,Jt,Pr,Wr,or,cr,dr,cs]),us=reactExports.useMemo(()=>makeEventProps(ur,()=>Pr),[ur,Pr]);function fs(){function ps(js){return!!(js!=null&&js.pdf)}if(!ps(ns))throw new Error("pdf is undefined");const ls=typeof dt=="function"?dt(ns):dt;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:ns,children:ls})}function ss(){return Ft?Pr==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof Kt=="function"?Kt():Kt}):Pr===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof $t=="function"?$t():$t}):fs():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Yt=="function"?Yt():Yt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",kt),ref:Ut,...us,children:ss()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var et=[],dt=0;dt<arguments.length;dt++)et[dt]=arguments[dt];var kt=et.filter(Boolean);if(kt.length<=1){var $t=kt[0];return $t||null}return function(Dt){for(var Ft=0,Ut=kt;Ft<Ut.length;Ft++){var Ht=Ut[Ft];typeof Ht=="function"?Ht(Dt):Ht&&(Ht.current=Dt)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const et=useDocumentContext(),dt=usePageContext();invariant(dt,"Unable to find Page context.");const kt={...et,...dt},{imageResourcesPath:$t,linkService:Tt,onGetAnnotationsError:Dt,onGetAnnotationsSuccess:Ft,onRenderAnnotationLayerError:Ut,onRenderAnnotationLayerSuccess:Ht,page:Kt,pdf:Yt,renderForms:Jt,rotate:Zt,scale:er=1}=kt;invariant(Yt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(Kt,"Attempted to load page annotations, but no page was specified."),invariant(Tt,"Attempted to load page annotations, but no linkService was specified.");const[rr,sr]=useResolver(),{value:nr,error:ir}=rr,lr=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function or(){nr&&Ft&&Ft(nr)}function cr(){ir&&(warning$1(!1,ir.toString()),Dt&&Dt(ir))}reactExports.useEffect(function(){sr({type:"RESET"})},[sr,Kt]),reactExports.useEffect(function(){if(!Kt)return;const jr=makeCancellablePromise(Kt.getAnnotations()),Rr=jr;return jr.promise.then(br=>{sr({type:"RESOLVE",value:br})}).catch(br=>{sr({type:"REJECT",error:br})}),()=>{cancelRunningTask(Rr)}},[sr,Kt]),reactExports.useEffect(()=>{if(nr!==void 0){if(nr===!1){cr();return}or()}},[nr]);function dr(){Ht&&Ht()}function ur(mr){warning$1(!1,`${mr}`),Ut&&Ut(mr)}const pr=reactExports.useMemo(()=>Kt.getViewport({scale:er,rotation:Zt}),[Kt,Zt,er]);return reactExports.useEffect(function(){if(!Yt||!Kt||!Tt||!nr)return;const{current:jr}=lr;if(!jr)return;const Rr=pr.clone({dontFlip:!0}),br={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Yt.annotationStorage,commentManager:null,div:jr,l10n:null,linkService:Tt,page:Kt,structTreeLayer:null,viewport:Rr},_r={annotations:nr,annotationStorage:Yt.annotationStorage,div:jr,imageResourcesPath:$t,linkService:Tt,page:Kt,renderForms:Jt,viewport:Rr};jr.innerHTML="";try{new AnnotationLayer$1(br).render(_r),dr()}catch(Mr){ur(Mr)}return()=>{}},[nr,$t,Tt,Kt,Yt,Jt,pr]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:lr})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(et){return et in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(et){return"children"in et}function isStructTreeNodeWithOnlyContentChild(et){return isStructTreeNode(et)?et.children.length===1&&0 in et.children&&"id"in et.children[0]:!1}function getRoleAttributes(et){const dt={};if(isStructTreeNode(et)){const{role:kt}=et,$t=kt.match(HEADING_PATTERN);if($t)dt.role="heading",dt["aria-level"]=Number($t[1]);else if(isPdfRole(kt)){const Tt=PDF_ROLE_TO_HTML_ROLE[kt];Tt&&(dt.role=Tt)}}return dt}function getBaseAttributes(et){const dt={};if(isStructTreeNode(et)){if(et.alt!==void 0&&(dt["aria-label"]=et.alt),et.lang!==void 0&&(dt.lang=et.lang),isStructTreeNodeWithOnlyContentChild(et)){const[kt]=et.children;if(kt){const $t=getBaseAttributes(kt);return{...dt,...$t}}}}else"id"in et&&(dt["aria-owns"]=et.id);return dt}function getAttributes(et){return et?{...getRoleAttributes(et),...getBaseAttributes(et)}:null}function StructTreeItem({className:et,node:dt}){const kt=reactExports.useMemo(()=>getAttributes(dt),[dt]),$t=reactExports.useMemo(()=>!isStructTreeNode(dt)||isStructTreeNodeWithOnlyContentChild(dt)?null:dt.children.map((Tt,Dt)=>jsxRuntimeExports.jsx(StructTreeItem,{node:Tt},Dt)),[dt]);return jsxRuntimeExports.jsx("span",{className:et,...kt,children:$t})}function StructTree(){const et=usePageContext();invariant(et,"Unable to find Page context.");const{onGetStructTreeError:dt,onGetStructTreeSuccess:kt}=et,[$t,Tt]=useResolver(),{value:Dt,error:Ft}=$t,{customTextRenderer:Ut,page:Ht}=et;function Kt(){Dt&&kt&&kt(Dt)}function Yt(){Ft&&(warning$1(!1,Ft.toString()),dt&&dt(Ft))}return reactExports.useEffect(function(){Tt({type:"RESET"})},[Tt,Ht]),reactExports.useEffect(function(){if(Ut||!Ht)return;const Zt=makeCancellablePromise(Ht.getStructTree()),er=Zt;return Zt.promise.then(rr=>{Tt({type:"RESOLVE",value:rr})}).catch(rr=>{Tt({type:"REJECT",error:rr})}),()=>cancelRunningTask(er)},[Ut,Ht,Tt]),reactExports.useEffect(()=>{if(Dt!==void 0){if(Dt===!1){Yt();return}Kt()}},[Dt]),Dt?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:Dt}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(et){const dt=usePageContext();invariant(dt,"Unable to find Page context.");const kt={...dt,...et},{_className:$t,canvasBackground:Tt,devicePixelRatio:Dt=getDevicePixelRatio(),onRenderError:Ft,onRenderSuccess:Ut,page:Ht,renderForms:Kt,renderTextLayer:Yt,rotate:Jt,scale:Zt}=kt,{canvasRef:er}=et;invariant(Ht,"Attempted to render page canvas, but no page was specified.");const rr=reactExports.useRef(null);function sr(){Ht&&Ut&&Ut(makePageCallback(Ht,Zt))}function nr(cr){isCancelException(cr)||(warning$1(!1,cr.toString()),Ft&&Ft(cr))}const ir=reactExports.useMemo(()=>Ht.getViewport({scale:Zt*Dt,rotation:Jt}),[Dt,Ht,Jt,Zt]),lr=reactExports.useMemo(()=>Ht.getViewport({scale:Zt,rotation:Jt}),[Ht,Jt,Zt]);reactExports.useEffect(function(){if(!Ht)return;Ht.cleanup();const{current:dr}=rr;if(!dr)return;dr.width=ir.width,dr.height=ir.height,dr.style.width=`${Math.floor(lr.width)}px`,dr.style.height=`${Math.floor(lr.height)}px`,dr.style.visibility="hidden";const ur={annotationMode:Kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:dr,canvasContext:dr.getContext("2d",{alpha:!1}),viewport:ir};Tt&&(ur.background=Tt);const pr=Ht.render(ur),mr=pr;return pr.promise.then(()=>{dr.style.visibility="",sr()}).catch(nr),()=>cancelRunningTask(mr)},[Tt,Ht,Kt,ir,lr]);const or=reactExports.useCallback(()=>{const{current:cr}=rr;cr&&(cr.width=0,cr.height=0)},[]);return reactExports.useEffect(()=>or,[or]),jsxRuntimeExports.jsx("canvas",{className:`${$t}__canvas`,dir:"ltr",ref:mergeRefs(er,rr),style:{display:"block",userSelect:"none"},children:Yt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(et){return"str"in et}function TextLayer(){const et=usePageContext();invariant(et,"Unable to find Page context.");const{customTextRenderer:dt,onGetTextError:kt,onGetTextSuccess:$t,onRenderTextLayerError:Tt,onRenderTextLayerSuccess:Dt,page:Ft,pageIndex:Ut,pageNumber:Ht,rotate:Kt,scale:Yt}=et;invariant(Ft,"Attempted to load page text content, but no page was specified.");const[Jt,Zt]=useResolver(),{value:er,error:rr}=Jt,sr=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function nr(){er&&$t&&$t(er)}function ir(){rr&&(warning$1(!1,rr.toString()),kt&&kt(rr))}reactExports.useEffect(function(){Zt({type:"RESET"})},[Ft,Zt]),reactExports.useEffect(function(){if(!Ft)return;const mr=makeCancellablePromise(Ft.getTextContent()),jr=mr;return mr.promise.then(Rr=>{Zt({type:"RESOLVE",value:Rr})}).catch(Rr=>{Zt({type:"REJECT",error:Rr})}),()=>cancelRunningTask(jr)},[Ft,Zt]),reactExports.useEffect(()=>{if(er!==void 0){if(er===!1){ir();return}nr()}},[er]);const lr=reactExports.useCallback(()=>{Dt&&Dt()},[Dt]),or=reactExports.useCallback(pr=>{warning$1(!1,pr.toString()),Tt&&Tt(pr)},[Tt]);function cr(){const pr=sr.current;pr&&pr.classList.add("selecting")}function dr(){const pr=sr.current;pr&&pr.classList.remove("selecting")}const ur=reactExports.useMemo(()=>Ft.getViewport({scale:Yt,rotation:Kt}),[Ft,Kt,Yt]);return reactExports.useLayoutEffect(function(){if(!Ft||!er)return;const{current:mr}=sr;if(!mr)return;mr.innerHTML="";const jr=Ft.streamTextContent({includeMarkedContent:!0}),Rr={container:mr,textContentSource:jr,viewport:ur},br=new TextLayer$1(Rr),_r=br;return br.render().then(()=>{const Mr=document.createElement("div");Mr.className="endOfContent",mr.append(Mr);const Pr=mr.querySelectorAll('[role="presentation"]');if(dt){let Or=0;er.items.forEach((kr,Tr)=>{if(!isTextItem(kr))return;const xr=Pr[Or];if(!xr)return;const wr=dt({pageIndex:Ut,pageNumber:Ht,itemIndex:Tr,...kr});xr.innerHTML=wr,Or+=kr.str&&kr.hasEOL?2:1})}lr()}).catch(or),()=>cancelRunningTask(_r)},[dt,or,lr,Ft,Ut,Ht,er,ur]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:dr,onMouseDown:cr,ref:sr})}const defaultScale=1;function Page(et){const kt={...useDocumentContext(),...et},{_className:$t="react-pdf__Page",_enableRegisterUnregisterPage:Tt=!0,canvasBackground:Dt,canvasRef:Ft,children:Ut,className:Ht,customRenderer:Kt,customTextRenderer:Yt,devicePixelRatio:Jt,error:Zt="Failed to load the page.",height:er,inputRef:rr,loading:sr="Loading page",noData:nr="No page specified.",onGetAnnotationsError:ir,onGetAnnotationsSuccess:lr,onGetStructTreeError:or,onGetStructTreeSuccess:cr,onGetTextError:dr,onGetTextSuccess:ur,onLoadError:pr,onLoadSuccess:mr,onRenderAnnotationLayerError:jr,onRenderAnnotationLayerSuccess:Rr,onRenderError:br,onRenderSuccess:_r,onRenderTextLayerError:Mr,onRenderTextLayerSuccess:Pr,pageIndex:Or,pageNumber:kr,pdf:Tr,registerPage:xr,renderAnnotationLayer:wr=!0,renderForms:zr=!1,renderMode:Hr="canvas",renderTextLayer:Yr=!0,rotate:rs,scale:as=defaultScale,unregisterPage:es,width:Xr,...Wr}=kt,[cs,ns]=useResolver(),{value:us,error:fs}=cs,ss=reactExports.useRef(null);invariant(Tr,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ps=isProvided(kr)?kr-1:Or??null,ls=kr??(isProvided(Or)?Or+1:null),js=rs??(us?us.rotate:null),$s=reactExports.useMemo(()=>{if(!us)return null;let Bs=1;const qs=as??defaultScale;if(Xr||er){const Ks=us.getViewport({scale:1,rotation:js});Xr?Bs=Xr/Ks.width:er&&(Bs=er/Ks.height)}return qs*Bs},[er,us,js,as,Xr]);reactExports.useEffect(function(){return()=>{isProvided(ps)&&Tt&&es&&es(ps)}},[Tt,Tr,ps,es]);function Ds(){if(mr){if(!us||!$s)return;mr(makePageCallback(us,$s))}if(Tt&&xr){if(!isProvided(ps)||!ss.current)return;xr(ps,ss.current)}}function Ts(){fs&&(warning$1(!1,fs.toString()),pr&&pr(fs))}reactExports.useEffect(function(){ns({type:"RESET"})},[ns,Tr,ps]),reactExports.useEffect(function(){if(!Tr||!ls)return;const qs=makeCancellablePromise(Tr.getPage(ls)),Ks=qs;return qs.promise.then(yn=>{ns({type:"RESOLVE",value:yn})}).catch(yn=>{ns({type:"REJECT",error:yn})}),()=>cancelRunningTask(Ks)},[ns,Tr,ls]),reactExports.useEffect(()=>{if(us!==void 0){if(us===!1){Ts();return}Ds()}},[us,$s]);const As=reactExports.useMemo(()=>isProvided(ps)&&ls&&isProvided(js)&&isProvided($s)?{_className:$t,canvasBackground:Dt,customTextRenderer:Yt,devicePixelRatio:Jt,onGetAnnotationsError:ir,onGetAnnotationsSuccess:lr,onGetStructTreeError:or,onGetStructTreeSuccess:cr,onGetTextError:dr,onGetTextSuccess:ur,onRenderAnnotationLayerError:jr,onRenderAnnotationLayerSuccess:Rr,onRenderError:br,onRenderSuccess:_r,onRenderTextLayerError:Mr,onRenderTextLayerSuccess:Pr,page:us,pageIndex:ps,pageNumber:ls,renderForms:zr,renderTextLayer:Yr,rotate:js,scale:$s}:null,[$t,Dt,Yt,Jt,ir,lr,or,cr,dr,ur,jr,Rr,br,_r,Mr,Pr,us,ps,ls,zr,Yr,js,$s]),_s=reactExports.useMemo(()=>makeEventProps(Wr,()=>us&&($s?makePageCallback(us,$s):void 0)),[Wr,us,$s]),Ms=`${ps}@${$s}/${js}`;function Vs(){switch(Hr){case"custom":return invariant(Kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(Kt,{},`${Ms}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:Ft},`${Ms}_canvas`)}}function Gs(){return Yr?jsxRuntimeExports.jsx(TextLayer,{},`${Ms}_text`):null}function Ws(){return wr?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Ms}_annotations`):null}function Xs(){function Bs(Ks){return!!(Ks!=null&&Ks.page)}if(!Bs(As))throw new Error("page is undefined");const qs=typeof Ut=="function"?Ut(As):Ut;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:As,children:[Vs(),Gs(),Ws(),qs]})}function Qs(){return ls?Tr===null||us===void 0||us===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof sr=="function"?sr():sr}):Tr===!1||us===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof Zt=="function"?Zt():Zt}):Xs():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof nr=="function"?nr():nr})}return jsxRuntimeExports.jsx("div",{className:clsx($t,Ht),"data-page-number":ls,ref:mergeRefs(rr,ss),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${$s}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:Dt||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},..._s,children:Qs()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";function DownloadLockWarningModal({open:et,onCancel:dt,onConfirm:kt}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[999] px-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0f19] border border-gray-800 rounded-2xl p-8 max-w-md w-full shadow-xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:" Final Download Warning"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:["Downloading this book will permanently lock editing for this document.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"You will still be able to view and download it again, but you wont be able to make any further changes."]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-gray-800 border border-gray-700 text-gray-300 px-5 py-2.5 rounded-lg hover:bg-gray-700 transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:kt,className:"bg-red-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-red-600/90 transition",children:"Download & Lock"})]})]})}):null}GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:et,fileTitle:dt,partNumber:kt,sourceType:$t="magnet",magnetId:Tt,onClose:Dt}){const{user:Ft}=useAuth(),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(1.2),[Jt,Zt]=reactExports.useState(!1),[er,rr]=reactExports.useState(!1),[sr,nr]=reactExports.useState(null),[ir,lr]=reactExports.useState(!1),[or,cr]=reactExports.useState(!1),[dr,ur]=reactExports.useState(!1),pr=$t==="magnet",mr=reactExports.useMemo(()=>Math.min(window.innerWidth-40,900),[]),jr=reactExports.useMemo(()=>et?{url:`https://themessyattic.com/api/pdf/proxy?url=${encodeURIComponent(et)}&preview=1`}:null,[et]);if(!et)return null;reactExports.useEffect(()=>{if(!et)return;let br,_r=0;const Mr=async()=>{if(!Jt)try{const Or=(await axiosInstance.head(jr.url)).headers["content-type"];if(Or!=null&&Or.includes("pdf")){Zt(!0);return}_r<10?(_r++,br=setTimeout(Mr,1500)):nr("PDF is still being finalized. Try again in a few seconds.")}catch{_r<10?(_r++,br=setTimeout(Mr,1500)):nr("PDF is still being finalized. Try again shortly.")}};return Mr(),()=>clearTimeout(br)},[et,jr.url,Jt]);const Rr=async()=>{if((Ft==null?void 0:Ft.has_free_magnet)===1&&(Ft==null?void 0:Ft.magnet_slots)===1){lr(!0);return}try{rr(!0);const _r=(dt||"Cre8tly_Download").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),Mr=`https://themessyattic.com/api/pdf/proxy?url=${encodeURIComponent(et)}&title=${encodeURIComponent(_r)}${$t==="magnet"&&Tt?`&magnetId=${Tt}`:""}`,Pr=await fetch(Mr);if(!Pr.ok)throw new Error(`Failed: ${Pr.status} ${Pr.statusText}`);const Or=await Pr.blob(),kr=URL.createObjectURL(Or),Tr=document.createElement("a");Tr.href=kr,Tr.download=`${_r}.pdf`,document.body.appendChild(Tr),Tr.click(),document.body.removeChild(Tr),URL.revokeObjectURL(kr),await new Promise(xr=>setTimeout(xr,2e3))}catch(_r){console.error("Download error:",_r),alert(" Download failed. Please try again.")}finally{rr(!1)}};return reactExports.useEffect(()=>{if(!et){Zt(!1),nr(null),rr(!1),Ht(null),Yt(1.2);return}Zt(!1),nr(null),rr(!1),Ht(null),Yt(1.2)},[et]),reactExports.useEffect(()=>{const br=()=>Yt(_r=>window.innerWidth<640?Math.min(_r,.8):_r);return window.addEventListener("resize",br),br(),()=>window.removeEventListener("resize",br)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:" PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Yt(Kt+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>Yt(Math.max(Kt-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>{pr?cr(!0):Rr()},disabled:er,className:`p-2 rounded-lg transition text-white ${er?"bg-green cursor-wait":"bg-green/90 hover:bg-green/80"}`,title:"Download",children:er?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Dt,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$5,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!Jt&&!sr&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:" Finalizing your PDF  just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),sr&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:sr})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${Jt?"opacity-100":"opacity-0"}`,children:Jt&&!sr&&jsxRuntimeExports.jsx(Document$1,{file:jr,onLoadSuccess:({numPages:br})=>{Ht(br),ur(!0)},onLoadError:br=>{console.error("PDF load error:",br),nr("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(Ut||0),(br,_r)=>jsxRuntimeExports.jsx(Page,{pageNumber:_r+1,scale:Kt,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:mr},`page_${_r+1}`))})})})]}),ir&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/90 flex flex-col items-center justify-center z-[999] px-6 text-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0f19] border border-gray-800 rounded-2xl p-8 max-w-md w-full shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:" Upgrade Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-6 leading-relaxed",children:"Downloads are available for Pro users only. Upgrade your plan to unlock high-quality PDF exports, full lead magnet access, and more."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/plans",className:"bg-green text-black px-5 py-2.5 rounded-lg font-semibold hover:opacity-90 transition",children:"Upgrade Now"}),jsxRuntimeExports.jsx("button",{onClick:()=>lr(!1),className:"bg-gray-800 border border-gray-700 text-gray-300 px-5 py-2.5 rounded-lg hover:bg-gray-700 transition",children:"Maybe Later"})]})]})}),pr&&jsxRuntimeExports.jsx(DownloadLockWarningModal,{open:or,onCancel:()=>cr(!1),onConfirm:async()=>{cr(!1),await Rr()}})]})}function BookPartsModal({bookId:et,onEditChapter:dt,onClose:kt}){const[$t,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(null),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState(null),[ir,lr]=reactExports.useState(!1),[or,cr]=reactExports.useState(!1),dr=sr!==null;reactExports.useEffect(()=>{async function jr(){try{const Rr=await axiosInstance.get(`/books/${et}/parts`);Tt(Rr.data)}catch(Rr){console.error(" Failed to load book parts:",Rr)}finally{Ft(!1)}}jr()},[et]),reactExports.useEffect(()=>{async function jr(){try{const Rr=await axiosInstance.get(`/books/${et}`);rr(Rr.data.epub_url||null),nr(!!Rr.data.is_complete)}catch(Rr){console.error(" Failed to load book metadata:",Rr)}}jr()},[et]);const ur=$t.length>0&&$t.every(jr=>jr.file_url);async function pr(){var jr,Rr;Yt(!0),Zt(null);try{const br=await axiosInstance.post(`/books/${et}/epub/generate`);rr(br.data.epubUrl)}catch(br){console.error(" EPUB publish failed:",br),Zt(((Rr=(jr=br==null?void 0:br.response)==null?void 0:jr.data)==null?void 0:Rr.error)||"Failed to generate EPUB")}finally{Yt(!1)}}async function mr(){var jr,Rr;cr(!0);try{await axiosInstance.post(`/books/${et}/finalize`),nr(!0),lr(!1)}catch(br){console.error(" Finalize failed:",br),alert(((Rr=(jr=br==null?void 0:br.response)==null?void 0:jr.data)==null?void 0:Rr.error)||"Failed to finalize book")}finally{cr(!1)}}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0b0b] border border-gray-700 rounded-2xl w-full max-w-3xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:" Book Parts"}),Dt?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):$t.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:$t.map(jr=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0 pr-6",children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold break-words leading-snug",children:["Part ",jr.part_number,": ",jr.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",jr.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(jr.created_at).toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ht({url:jr.file_url,title:jr.title,partNumber:jr.part_number}),className:"px-3 py-1 bg-bookBtnColor rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"}),jsxRuntimeExports.jsx("button",{onClick:()=>{kt(),dt(et,jr.part_number)},disabled:sr,className:`px-3 py-1 rounded text-sm font-semibold transition
                      ${sr?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-gray-900 border border-gray-700 text-white hover:bg-gray-700"}`,children:"Edit Chapter"})]})]},jr.id))}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:"Book Status"}),dr&&(sr?jsxRuntimeExports.jsx("p",{className:"text-green font-medium",children:" This book has been finalized"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"When you finalize this book, all chapters will be locked and the book can be published as a full EPUB."}),jsxRuntimeExports.jsx("button",{onClick:()=>lr(!0),className:"w-full py-3 rounded-xl font-semibold bg-yellow hover:bg-yellow/80 text-black transition",children:"Finalize Book"})]}))]}),sr&&jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6 flex flex-col items-center gap-3",children:[Jt&&jsxRuntimeExports.jsx("p",{className:"text-red-400 text-sm text-center",children:Jt}),jsxRuntimeExports.jsx("button",{onClick:pr,disabled:!ur||Kt,className:`w-full py-3 rounded-xl font-semibold transition
        ${ur?"bg-white hover:bg-green text-black":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:Kt?"Publishing EPUB...":"Publish Full Book as EPUB"}),!ur&&jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs text-center",children:"All chapters must be completed before publishing"}),er&&jsxRuntimeExports.jsx("a",{href:er,target:"_blank",rel:"noopener noreferrer",className:"w-full text-center py-3 rounded-xl font-semibold bg-blue hover:bg-blue/80 text-white transition",children:"Download EPUB"})]}),jsxRuntimeExports.jsx("button",{onClick:kt,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:""})]})}),ir&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0b0b] border border-gray-700 rounded-2xl w-full max-w-md p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-3 text-center",children:"Finalize Book?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm text-center mb-6",children:[jsxRuntimeExports.jsx("strong",{children:"This action cannot be undone."}),jsxRuntimeExports.jsx("br",{})," Once finalized, chapters can no longer be edited ",jsxRuntimeExports.jsx("br",{}),"and the book will be prepared for EPUB publishing."]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>lr(!1),className:"flex-1 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-700 transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:mr,className:"flex-1 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-white font-semibold transition",disabled:or,children:or?"Finalizing...":"Yes, Finalize"})]})]})}),Ut&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:Ut.url,fileTitle:Ut.title,partNumber:Ut.partNumber,sourceType:"book",onClose:()=>Ht(null)})]})}function BookCardList({books:et=[],onAddPrompt:dt,onGenerateNext:kt,onArchiveBook:$t}){const[Tt,Dt]=reactExports.useState(!1),[Ft,Ut]=reactExports.useState(null),{accessToken:Ht}=useAuth();function Kt(Yt){Ut(Yt),Dt(!0)}return!Array.isArray(et)||et.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[et.map(Yt=>{const Zt=!(Yt.is_complete===1)&&Yt.pages<750,er=Yt.is_draft===1||Yt.draft_text&&Yt.draft_text.trim().length>0;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:`
            relative group
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            rounded-xl p-4
            transition-all
          `,children:[jsxRuntimeExports.jsx("h3",{className:"text-dashboard-text-light dark:text-dashboard-text-dark text-sm font-semibold truncate mb-1",children:Yt.book_name||"Untitled Book"}),jsxRuntimeExports.jsx("div",{className:`text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark
              flex justify-between mb-2`,children:jsxRuntimeExports.jsxs("span",{children:["Part ",Yt.part_number||1]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:`w-full rounded-full h-2
              bg-dashboard-border-light
              dark:bg-dashboard-border-dark`,children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Yt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:`text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark
`,children:[Yt.pages||0,"/750 pages used"]}),jsxRuntimeExports.jsx(Tooltip,{text:"Pages are counted across the entire book. You can write, edit, and export PDFs freely until you reach 750 total pages. Downloads do not lock your book."})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Yt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Yt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Yt.is_complete===1?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Finalized"}):Yt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Yt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:`text-dashboard-muted-light dark:text-dashboard-muted-dark
`})}),jsxRuntimeExports.jsx("div",{className:`text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark
              text-center mt-2 flex items-center justify-center gap-1`,children:Yt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{children:[new Date(Yt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Yt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}),jsxRuntimeExports.jsx(Tooltip,{text:"This is the date and time this chapter was generated. Purchase dates are shown in Settings."})]}):jsxRuntimeExports.jsx("span",{className:`italic text-dashboard-muted-light dark:text-dashboard-muted-dark
`,children:"Not generated yet"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[er&&!Yt.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(Yt.id,Yt.part_number||1),className:`
                    w-full
                    bg-blue
                    text-white
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:opacity-90
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Continue Draft",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),!er&&!Yt.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(Yt.id,Yt.part_number||1),className:`
                    w-full
                    bg-dashboard-hover-light
                    dark:bg-dashboard-hover-dark
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-green hover:text-black
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Create Chapter",children:[jsxRuntimeExports.jsx(Plus,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]}),Yt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Kt(Yt.id),className:`w-full bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  hover:opacity-90 rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition`,children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),Yt.prompt&&Zt&&jsxRuntimeExports.jsxs("button",{onClick:()=>Yt.pages>=750?Kt(Yt.id):kt(Yt.id,(Yt.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2 mt-3",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Yt.pages>=750?"Finish Book":`Continue Story (Part ${(Yt.part_number||1)+1})`})]}),!Yt.is_complete&&Yt.status!=="pending"&&jsxRuntimeExports.jsx("button",{onClick:()=>$t(Yt.id),className:`
                    w-full
                    border border-red-500/40
                    text-red-400
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-red-500/10
                    transition
                  `,title:"Archive Book",children:"Archive Book"})]})]},Yt.id)}),Tt&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:Ft,accessToken:Ht,onClose:()=>Dt(!1)})]})}function NewBookModal({onCreate:et,onClose:dt}){const[kt,$t]=reactExports.useState(""),[Tt,Dt]=reactExports.useState(""),[Ft,Ut]=reactExports.useState(""),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(!1);function Zt(){if(!(kt!=null&&kt.trim())){y$4.error("Please enter a book name");return}if(!(Tt!=null&&Tt.trim())){y$4.error("Please enter an author name");return}if(!Ft){y$4.error("Please select a book type before continuing");return}Jt(!0)}return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 sm:p-0",children:[jsxRuntimeExports.jsxs("div",{className:`
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        p-4 sm:p-6
        rounded-xl
        w-full max-w-2xl
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        shadow-lg
        max-h-[90vh] overflow-y-auto
      `,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center text-dashboard-text-light dark:text-dashboard-text-dark",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:kt,onChange:er=>$t(er.target.value),className:`
            w-full p-2 rounded
            bg-dashboard-bg-light
            dark:bg-dashboard-bg-dark
            text-dashboard-text-light
            dark:text-dashboard-text-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            focus:outline-none
            focus:ring-2 focus:ring-green
          `})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:Tt,onChange:er=>Dt(er.target.value),className:`
            w-full p-2 rounded
            bg-dashboard-bg-light
            dark:bg-dashboard-bg-dark
            text-dashboard-text-light
            dark:text-dashboard-text-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            focus:outline-none
            focus:ring-2 focus:ring-green
          `})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3",children:"Select Book Type"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg p-3 border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              hover:opacity-90
              transition`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:"fiction",checked:Ft==="fiction",onChange:er=>Ut(er.target.value),className:"mt-1 accent-royalPurple"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark font-medium",children:"Fiction"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark leading-relaxed",children:"For novels, short stories, and narrative driven work. This mode collaborates with you to develop characters, expand scenes, and shape a cinematic narrative arc. It may introduce supporting characters and story elements while staying aligned with your vision, tone, and story world."})]})]}),jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg p-3 border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              hover:opacity-90
              transition `,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:"non-fiction",checked:Ft==="non-fiction",onChange:er=>Ut(er.target.value),className:"mt-1 accent-royalPurple"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark font-medium",children:"Non-Fiction"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark leading-relaxed",children:"For true stories, memoirs, and personal histories. Non Fiction mode does not invent or add details. It works strictly with your words, refining clarity, structure, pacing, and voice while keeping every fact, event, and meaning intact."})]})]}),jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg p-3 border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              hover:opacity-90
              transition`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:"educational",checked:Ft==="educational",onChange:er=>Ut(er.target.value),className:"mt-1 accent-royalPurple"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark font-medium",children:"Educational"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark leading-relaxed",children:"For guides, courses, workbooks, and instructional material. Educational mode acts as a strict editor, improving clarity and readability without adding, removing, or restructuring content. Your instructional logic and sequencing remain fully intact."})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:` px-4 py-2 rounded font-semibold transition bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
            text-dashboard-text-light
            dark:text-dashboard-text-dark
            hover:opacity-90`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Zt,disabled:Ht,className:"bg-bookBtnColor px-4 py-2 rounded text-black font-semibold hover:opacity-90 transition",children:Ht?"Saving...":"Continue"})]})]}),Yt&&jsxRuntimeExports.jsx("div",{className:`
      fixed inset-0 
      backdrop-blur-md 
      bg-black/60 
      flex items-center justify-center 
      z-[9999] 
      animate-fadeIn
    `,children:jsxRuntimeExports.jsxs("div",{className:`
        bg-black/90 
        border border-white/10 
        shadow-[0_0_30px_rgba(0,0,0,0.6)] 
        rounded-2xl 
        px-6 py-5 
        w-[90%] max-w-sm 
        text-center 
        animate-slideDown
      `,children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-[#7bed9f] drop-shadow-sm",children:"Confirm Action"}),jsxRuntimeExports.jsxs("p",{className:"text-dashboard-muted-light dark:text-gray-300 text-sm leading-relaxed mt-3",children:["You will ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"NOT"})," be able to change the book type or author name after continuing."]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 pt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Jt(!1),className:`
            px-4 py-2 
            rounded-lg 
            bg-gray-700 
            text-gray-300 
            hover:bg-gray-600 
            transition
          `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{Kt(!0);const er=await axiosInstance.post("/books/create-book",{bookName:kt,authorName:Tt,bookType:Ft});Jt(!1),et({bookId:er.data.id,bookName:kt,authorName:Tt,bookType:Ft})}catch(er){console.error("Failed to create book:",er),y$4.error("Failed to create book")}finally{Kt(!1)}},className:`
            px-5 py-2 
            rounded-lg 
            bg-[#7bed9f] 
            text-black 
            font-semibold 
            hover:bg-[#63e28b] 
            transition 
            shadow-[0_0_12px_rgba(123,237,159,0.6)]
          `,children:"Continue"})]})]})})]})}const SIDEBAR_SECTIONS=[{section:"Community",items:[{key:"community",label:"Community",icon:MessagesSquare,badge:"communityCount",isParent:!0},{key:"community-topics",label:"Home",path:"/community",icon:House,allowCommunity:!0,isSubItem:!0},{key:"posts",label:"My Posts",path:"/community/posts",icon:FileText,allowCommunity:!0,isSubItem:!0},{key:"my-fragments",label:"My Fragments",path:"/community/my-fragments",icon:Feather,allowCommunity:!0,isSubItem:!0},{key:"saved",label:"Saved",path:"/community/bookmarks",icon:Bookmark,allowCommunity:!0,isSubItem:!0},{key:"notifications",label:"Notifications",path:"/community-alerts",icon:BellRing,badge:"communityCount",allowCommunity:!0,isSubItem:!0},{key:"subscriptions",label:"Subscriptions",path:"/community/subscriptions",icon:Mail,allowCommunity:!0,isSubItem:!0},{key:"my subscriptions",label:"My Subscriptions",path:"/community/my-subscriptions",icon:Star,allowCommunity:!0,isSubItem:!0},{key:"profile",label:"Profile",path:"/community/profile",icon:User,allowCommunity:!0,isSubItem:!0},{key:"profile-settings",label:"Profile Settings",path:"/community/settings",icon:Cog,allowCommunity:!0,isSubItem:!0},{key:"subscriber-templates",label:"Email Templates",path:"/community/email-templates",icon:MailCheck,allowCommunity:!0,isSubItem:!0}]},{section:"Tools",items:[{key:"assistant",label:"Assistant",path:"/books",icon:BookOpen,access:"books"}]},{section:"Growth",access:"pro",items:[{key:"landing",label:"Landing Pages",path:"/landing-page-builder",icon:LayoutTemplate,access:"pro"},{key:"analytics",label:"Analytics",path:"/landing-analytics",icon:ChartNoAxesColumn,access:"pro"},{key:"seller",label:"Seller Dashboard",path:"/seller-dashboard",icon:Landmark,access:"seller"}]},{section:"Account",items:[{key:"inbox",label:"Inbox",path:"/notifications",icon:Inbox$1,badge:"unreadCount",allowCommunity:!0},{key:"settings",label:"Settings",path:"/settings",icon:Settings,indicator:"brandConfigured",allowCommunity:!0},{key:"docs",label:"Help",path:"/docs",icon:CircleQuestionMark,allowCommunity:!0}]}];function SidebarToggleIcon({size:et=18,stroke:dt="currentColor"}){return jsxRuntimeExports.jsxs("svg",{width:et,height:et,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"4",width:"14",height:"2",rx:"1",fill:dt}),jsxRuntimeExports.jsx("rect",{x:"3",y:"9",width:"10",height:"2",rx:"1",fill:dt}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"12",height:"2",rx:"1",fill:dt})]})}function UpgradeRequiredModal({open:et,onClose:dt}){const kt=useNavigate();return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-md rounded-xl p-6 shadow-xl
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Upgrade Required!"}),jsxRuntimeExports.jsx("p",{className:"text-sm mb-6 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"You cant use this feature on your current plan. Upgrade to unlock it and continue."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:`
            px-4 py-2 rounded-lg text-sm transition
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            text-dashboard-text-light dark:text-dashboard-text-dark
            hover:opacity-90
          `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(),kt("/plans")},className:`
            px-4 py-2 rounded-lg text-sm font-medium transition
            bg-green text-black hover:opacity-90
          `,children:"View Plans"})]})]})}):null}const SIDEBAR_COLLAPSE_KEY="cre8tly_sidebar_collapsed";function useIsDesktop(){const[et,dt]=reactExports.useState(()=>window.matchMedia("(min-width: 1024px)").matches);return reactExports.useEffect(()=>{const kt=window.matchMedia("(min-width: 1024px)"),$t=Tt=>dt(Tt.matches);return kt.addEventListener("change",$t),()=>kt.removeEventListener("change",$t)},[]),et}function DashboardLayout({children:et}){const dt=useNavigate(),kt=reactExports.useRef(null),$t=useLocation(),Tt=["/","/community"],Dt=window.history.length>1&&!Tt.includes($t.pathname),{user:Ft,logout:Ut,updateTheme:Ht}=useAuth(),Kt=260,Yt=72,[Jt,Zt]=reactExports.useState(0),[er,rr]=reactExports.useState(0),[sr,nr]=reactExports.useState(!1),[ir,lr]=reactExports.useState(()=>{try{return localStorage.getItem(SIDEBAR_COLLAPSE_KEY)==="true"}catch{return!1}}),[or,cr]=reactExports.useState(()=>typeof window>"u"?!1:localStorage.getItem("communityOpen")==="true"),dr=(Ft==null?void 0:Ft.has_free_magnet)===1&&(Ft==null?void 0:Ft.magnet_slots)===1,ur=!!(Ft!=null&&Ft.authors_assistant_override)||(Ft==null?void 0:Ft.subscription_status)==="active"&&(Ft==null?void 0:Ft.has_book)===1,pr=(Ft==null?void 0:Ft.is_member)===1&&!ur&&!(Ft!=null&&Ft.free_trial_expires_at),mr=useIsDesktop(),[jr,Rr]=reactExports.useState(!1);reactExports.useEffect(()=>{if(!(Ft!=null&&Ft.id))return;const Mr=async()=>{try{const Or=await axiosInstance.get("/messages/user/count");Zt(Or.data.count||0)}catch(Or){console.error("Failed to fetch unread count:",Or)}};Mr();const Pr=setInterval(Mr,3e4);return()=>clearInterval(Pr)},[Ft==null?void 0:Ft.id]),reactExports.useEffect(()=>{mr&&localStorage.setItem("communityOpen",String(or))},[or,mr]),reactExports.useEffect(()=>{mr||cr(!1)},[$t.pathname,mr]),reactExports.useEffect(()=>{if(!(Ft!=null&&Ft.id))return;const Mr=async()=>{try{const Or=await axiosInstance.get("/notifications/count");rr(Or.data.count||0)}catch(Or){console.error("Failed to fetch community notifications:",Or)}};Mr();const Pr=setInterval(Mr,3e4);return()=>clearInterval(Pr)},[Ft==null?void 0:Ft.id]),reactExports.useEffect(()=>{try{localStorage.setItem(SIDEBAR_COLLAPSE_KEY,String(ir))}catch{}},[ir]),reactExports.useEffect(()=>{var Mr;(Mr=document.scrollingElement)==null||Mr.scrollTo({top:0,behavior:"auto"})},[$t.pathname]);function br(Mr){return Mr.access==="books"?ur:!(Mr.access==="pro"&&dr||Mr.access==="seller"&&!(Ft!=null&&Ft.stripe_connect_account_id))}function _r(Mr){const Pr=$t.pathname===Mr.path,Or=Mr.icon||null,kr=pr&&!ur&&!Mr.allowCommunity,Tr=Mr.isSubItem,xr=Mr.isParent;return jsxRuntimeExports.jsxs("button",{onClick:()=>{if(xr){cr(wr=>!wr);return}if(kr){nr(!0);return}dt(Mr.path)},className:`w-full flex items-center rounded-lg transition
${ir?"justify-center px-3 py-3":`gap-3 px-4 py-3 text-left ${Tr?"pl-10 text-sm opacity-80":""}`}
${Pr?ir?"bg-green/20 text-green":"bg-green/10 text-green border border-green/30":"text-dashboard-muted-light dark:text-dashboard-muted-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
${kr?"opacity-50 cursor-pointer":""}
`,children:[Or&&jsxRuntimeExports.jsx(Or,{size:18}),!ir&&jsxRuntimeExports.jsxs("div",{className:"flex items-center flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"font-medium leading-tight",children:Mr.label}),jsxRuntimeExports.jsx("span",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Mr.description})]}),Mr.isParent&&jsxRuntimeExports.jsx(ChevronDown,{size:16,className:`ml-auto transition-transform ${or?"rotate-180":""}`})]}),Mr.badge==="unreadCount"&&Jt>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:Jt>98?"99+":Jt}),Mr.badge==="communityCount"&&er>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:er>98?"99+":er}),Mr.indicator==="brandConfigured"&&(Ft==null?void 0:Ft.brand_identity_file)&&jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-green animate-pulse"})]},Mr.key)}return jsxRuntimeExports.jsxs("div",{className:`dashboard relative min-h-screen 
  bg-dashboard-bg-light
  dark:bg-dashboard-bg-dark
  text-dashboard-text-light
  dark:text-dashboard-text-dark`,children:[mr&&jsxRuntimeExports.jsxs("aside",{className:`fixed top-0 left-0 h-full overflow-hidden
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border-r border-dashboard-border-light dark:border-dashboard-border-dark
        flex flex-col transform transition-all duration-300 z-[60]
       lg:translate-x-0`,style:{width:ir?`${Yt}px`:`${Kt}px`},children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:`flex items-center ${ir?"justify-center":"justify-start gap-3"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>lr(!ir),className:`w-9 h-9 flex items-center justify-center rounded-md transition
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark`,title:ir?"Expand sidebar":"Collapse sidebar",children:jsxRuntimeExports.jsx(SidebarToggleIcon,{size:18})}),!ir&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[90%] h-[90%] rounded-full bg-green-400/25 blur-lg animate-pulse"}),jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col leading-tight",children:[jsxRuntimeExports.jsx("span",{className:"logoText text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark.  ",children:"The Messy"}),jsxRuntimeExports.jsx("span",{className:"logoText text-dashboard-text-light dark:text-dashboard-text-dark",children:"Attic"})]})]})]})}),jsxRuntimeExports.jsx("nav",{className:`flex-1 overflow-y-auto pb-6 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent ${ir?"px-2":"px-6"}`,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-5 mt-2",children:SIDEBAR_SECTIONS.map(Mr=>jsxRuntimeExports.jsxs("div",{children:[!ir&&jsxRuntimeExports.jsx("p",{className:`px-4 mb-2 text-xs uppercase tracking-wide
text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:Mr.section}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1",children:Mr.items.filter(br).filter(Pr=>!(Pr.isSubItem&&!or)).map(_r)})]},Mr.section))})}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-dashboard-border-light dark:border-dashboard-border-dark space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center ${ir?"justify-center":"gap-3 px-2"}`,children:[jsxRuntimeExports.jsx("img",{src:(Ft==null?void 0:Ft.profile_image)||defaultImage,alt:"Profile",className:"w-9 h-9 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}),!ir&&jsxRuntimeExports.jsx("span",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark truncate",children:(Ft==null?void 0:Ft.name)||"Account"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ht((Ft==null?void 0:Ft.theme)==="dark"?"light":"dark"),className:`
    w-full flex items-center rounded-lg transition
    ${ir?"justify-center px-3 py-3":"gap-3 px-4 py-3"}
    text-dashboard-muted-light dark:text-dashboard-muted-dark
    hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
  `,children:[(Ft==null?void 0:Ft.theme)==="dark"?jsxRuntimeExports.jsx(Sun,{size:18}):jsxRuntimeExports.jsx(Moon,{size:18}),!ir&&jsxRuntimeExports.jsx("span",{className:"font-medium",children:(Ft==null?void 0:Ft.theme)==="dark"?"Light mode":"Dark mode"})]}),jsxRuntimeExports.jsxs("button",{onClick:Ut,className:`w-full flex items-center rounded-lg transition ${ir?"justify-center px-3 py-3":"gap-3 px-4 py-3"} text-red-500 hover:bg-red-600/10`,children:[jsxRuntimeExports.jsx(LogOut,{size:20}),!ir&&jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),!mr&&jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-40 bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"h-14 px-3 flex items-center justify-between",children:[Dt?jsxRuntimeExports.jsx("button",{onClick:()=>dt(-1),className:`
            w-10 h-10
            flex items-center justify-center
            rounded-lg
             bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            hover:bg-dashboard-hover-light
            dark:hover:bg-dashboard-hover-dark
            transition
          `,"aria-label":"Back",children:jsxRuntimeExports.jsx(ChevronLeft,{size:22})}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10"}),jsxRuntimeExports.jsx("button",{onClick:()=>Rr(!0),className:`
          w-10 h-10
          flex items-center justify-center
          rounded-lg
          hover:bg-dashboard-hover-light
          dark:hover:bg-dashboard-hover-dark
          transition
        `,"aria-label":"Menu",children:jsxRuntimeExports.jsx(Menu,{size:22})})]})}),!mr&&jr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-dashboard-bg-light dark:bg-dashboard-bg-dark overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold",children:"Menu"}),jsxRuntimeExports.jsx("button",{onClick:()=>Rr(!1),children:jsxRuntimeExports.jsx(X$5,{size:22})})]}),SIDEBAR_SECTIONS.map(Mr=>jsxRuntimeExports.jsxs("div",{className:"space-y-3 pb-4 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Mr.section}),Mr.items.filter(br).filter(Pr=>!Pr.isSubItem||or).map(Pr=>jsxRuntimeExports.jsx("button",{onClick:()=>{if(Pr.isParent){cr(Or=>!Or);return}if(pr&&!Pr.allowCommunity){nr(!0);return}dt(Pr.path),Rr(!1)},className:`
                      w-full
                      px-4 py-4
                      rounded-xl
                      text-left
                      text-dashboard-text-light dark:text-dashboard-text-dark
                      flex
                      border
                      transition
                      shadow-sm
                      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                      border-dashboard-border-light dark:border-dashboard-border-dark
                      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
                      active:scale-[0.98]
                      ${Pr.isSubItem?"opacity-90":""}
                    `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center w-full gap-3",children:[Pr.isSubItem&&jsxRuntimeExports.jsx("span",{className:"w-1 h-6 rounded-full bg-green/40"}),Pr.icon&&jsxRuntimeExports.jsx(Pr.icon,{size:18,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${Pr.isSubItem?"text-sm opacity-90":""}`,children:Pr.label}),Pr.badge==="unreadCount"&&Jt>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto mr-2 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:Jt>98?"99+":Jt}),Pr.badge==="communityCount"&&er>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto mr-2 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:er>98?"99+":er}),Pr.isParent&&jsxRuntimeExports.jsx(ChevronDown,{size:18,className:`ml-auto transition-transform ${or?"rotate-180":""}`})]})},Pr.key))]},Mr.section)),jsxRuntimeExports.jsxs("div",{className:"pt-4 mt-4 border-t border-dashboard-border-light dark:border-dashboard-border-dark space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 px-2",children:[jsxRuntimeExports.jsx("img",{src:(Ft==null?void 0:Ft.profile_image)||defaultImage,alt:"Profile",className:"w-9 h-9 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark truncate",children:(Ft==null?void 0:Ft.name)||"Account"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ht((Ft==null?void 0:Ft.theme)==="dark"?"light":"dark"),Rr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl
      text-dashboard-muted-light dark:text-dashboard-muted-dark
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light dark:border-dashboard-border-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      transition`,children:[(Ft==null?void 0:Ft.theme)==="dark"?jsxRuntimeExports.jsx(Sun,{size:18}):jsxRuntimeExports.jsx(Moon,{size:18}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:(Ft==null?void 0:Ft.theme)==="dark"?"Light mode":"Dark mode"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ut(),Rr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl
                text-red-500
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                hover:bg-red-600/10
                transition`,children:[jsxRuntimeExports.jsx(LogOut,{size:20}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}),jsxRuntimeExports.jsx("main",{ref:kt,className:`
    flex-1
    ${mr?ir?"ml-[72px]":"ml-[260px]":""}
    px-4 pb-24
  `,children:et}),jsxRuntimeExports.jsx(UpgradeRequiredModal,{open:sr,onClose:()=>nr(!1)})]})}function OnboardingGuide({steps:et=[],onFinish:dt}){const[kt,$t]=reactExports.useState(0),[Tt,Dt]=reactExports.useState(null);reactExports.useEffect(()=>{if(et.length>0&&et[kt]){const Kt=document.querySelector(et[kt].target);if(Kt){const Yt=Kt.getBoundingClientRect();Dt(Yt)}}},[kt,et]);function Ft(){kt<et.length-1?$t(kt+1):dt==null||dt()}function Ut(){kt>0&&$t(kt-1)}if(!et.length||!Tt)return null;const Ht=et[kt];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:Tt.top-8,left:Tt.left-8,width:Tt.width+16,height:Tt.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:Tt.bottom+12,left:Tt.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:Ht.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:Ut,disabled:kt===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${kt===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:Ft,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:kt===et.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:et=[],onAddPrompt:dt,onGenerateNext:kt,onArchiveBook:$t}){const[Tt,Dt]=reactExports.useState(null),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(null),[Yt,Jt]=reactExports.useState(!1),{user:Zt,refreshUser:er}=useAuth(),rr=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages youve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your books current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(et.length>0&&Zt&&!Zt.has_completed_book_onboarding){const nr=setTimeout(()=>Jt(!0),800);return()=>clearTimeout(nr)}},[et,Zt]);function sr(nr){Kt(nr),Ut(!0)}return!Array.isArray(et)||et.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:et.map(nr=>{const lr=!(nr.is_complete===1)&&nr.pages<750,or=nr.is_draft===1||nr.draft_text&&nr.draft_text.trim().length>0;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:`
              relative group
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              rounded-2xl p-4
              transition-all
              hover:border-green
              hover:shadow-[0_0_15px_rgba(0,255,150,0.25)]
            `,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:`book-title text-dashboard-text-light
dark:text-dashboard-text-dark text-sm font-semibold truncate mb-2`,children:nr.book_name||"Untitled Book"}),jsxRuntimeExports.jsx("div",{className:`flex items-center justify-between text-[11px] text-dashboard-muted-light
dark:text-dashboard-muted-dark
 mb-2`,children:jsxRuntimeExports.jsxs("span",{children:["Part ",nr.part_number||1]})}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:`
                  w-full rounded-full h-2
                  bg-dashboard-border-light
                  dark:bg-dashboard-border-dark
`,children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(nr.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[jsxRuntimeExports.jsxs("p",{className:`text-xs text-dashboard-muted-light
dark:text-dashboard-muted-dark
`,children:[nr.pages||0,"/750 pages used"]}),jsxRuntimeExports.jsx(Tooltip,{text:"Pages are counted across the entire book. You can write, edit, and export PDFs freely until you reach 750 total pages. Downloads do not lock your book."})]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:nr.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):nr.status==="failed"?jsxRuntimeExports.jsx("span",{className:`bg-red-500 text-dashboard-text-light
dark:text-dashboard-text-dark px-3 py-[3px] rounded-full`,children:"Failed"}):nr.is_complete===1?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Finalized"}):nr.pages>0?jsxRuntimeExports.jsx("span",{className:`bg-blue text-dashboard-text-light
dark:text-dashboard-text-dark px-3 py-[3px] rounded-full`,children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:`
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  px-3 py-[3px] rounded-full
                `,children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:nr.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"})}),jsxRuntimeExports.jsx("div",{className:`text-[11px] text-dashboard-muted-light
dark:text-dashboard-muted-dark
 text-center mt-2 flex items-center justify-center gap-1`,children:nr.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{children:[new Date(nr.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(nr.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}),jsxRuntimeExports.jsx(Tooltip,{text:"This is the date and time this chapter was generated. Purchase dates are shown in Settings."})]}):jsxRuntimeExports.jsx("span",{className:"italic text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Not generated yet"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[or&&!nr.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(nr.id,nr.part_number||1),className:`
                    w-full
                    bg-blue
                    text-white
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:opacity-90
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Continue Draft",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),!or&&!nr.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(nr.id,nr.part_number||1),className:`
                    w-full
                    bg-dashboard-hover-light
                    dark:bg-dashboard-hover-dark
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-green hover:text-black
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Create Chapter",children:[jsxRuntimeExports.jsx(Plus,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]}),nr.pdf_url&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("button",{onClick:()=>sr(nr.id),className:`
                      w-full
                      bg-dashboard-hover-light
                      dark:bg-dashboard-hover-dark
                      text-dashboard-text-light
                      dark:text-dashboard-text-dark
                      rounded-lg py-2 text-sm
                      flex items-center justify-center gap-2
                      hover:opacity-90
                      transition
                    `,title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})}),nr.prompt&&lr&&jsxRuntimeExports.jsxs("button",{onClick:()=>nr.pages>=750?sr(nr.id):kt(nr.id,(nr.part_number||1)+1),className:"w-full bg-bookBtnColor text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:nr.pages>=750?"Finish Book":`Continue Story (Part ${(nr.part_number||1)+1})`})]}),!nr.is_complete&&nr.status!=="pending"&&jsxRuntimeExports.jsx("button",{onClick:()=>$t(nr.id),className:`
                    w-full
                    border border-red-500/40
                    text-red-400
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-red-500/10
                    transition
                  `,title:"Archive Book",children:"Archive Book"})]})]},nr.id)})}),Tt&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:Tt.url,fileTitle:Tt.title,partNumber:Tt.partNumber,sourceType:"book",onClose:()=>Dt(null)}),Ft&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:Ht,onEditChapter:dt,onClose:()=>Ut(!1)}),Yt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:rr,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Jt(!1),await axiosInstance.post("/books/book-complete",{userId:Zt==null?void 0:Zt.id}),await er()}catch(nr){console.error(" Failed to save onboarding status:",nr)}}})]})}function BooksDashboardHeader({availableSlots:et,onCheckout:dt,onCreateBook:kt}){var Tt;const{user:$t}=useAuth();return $t?jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:`
            text-3xl font-bold normal-case
            text-dashboard-text-light
            dark:text-dashboard-text-dark
`,children:"My Books"}),jsxRuntimeExports.jsxs("div",{className:`
            text-sm mt-1
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
          `,children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:`
              font-semibold
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:((Tt=$t==null?void 0:$t.name)==null?void 0:Tt.split(" ")[0])||"Author"})]}),jsxRuntimeExports.jsxs("p",{className:`
            mt-2
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
          `,children:["You currently have ",et," book slots remaining."]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full md:w-auto md:flex-row items-stretch md:items-start gap-3",children:[et>0&&jsxRuntimeExports.jsx("button",{onClick:kt,className:`
              w-full md:w-auto
              px-4 py-2.5
              rounded-lg
              bg-green text-black font-semibold
              hover:opacity-90 transition
            `,children:"New Book"}),jsxRuntimeExports.jsxs(Link$2,{to:"/docs/authors-assistant",className:`
            inline-flex items-center justify-center gap-2
            w-full md:w-auto
            rounded-lg px-4 py-3 text-sm transition
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
            text-black dark:text-green
            hover:opacity-90
          `,children:[jsxRuntimeExports.jsx(FilePen,{className:"w-4 h-4 text-black dark:text-green"}),"Docs",jsxRuntimeExports.jsx(ExternalLink,{className:"w-3.5 h-3.5"})]})]})]}),et===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]}):null}function BooksDashboard(){const{accessToken:et,authLoading:dt,user:kt,refreshUser:$t}=useAuth(),{books:Tt,setBooks:Dt,fetchBooks:Ft,loading:Ut}=useBooks(),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(null),[Zt,er]=reactExports.useState(!1),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(1),[lr,or]=reactExports.useState(!1),[cr,dr]=reactExports.useState(null),ur=useNavigate(),pr=12,mr=[...Tt].sort((Yr,rs)=>new Date(rs.created_at)-new Date(Yr.created_at)),jr=Math.ceil(mr.length/pr),Rr=(nr-1)*pr,br=mr.slice(Rr,Rr+pr);async function _r(Yr,rs=1){let as=Tt.find(cs=>cs.id===Yr);try{const cs=await axiosInstance.get(`/books/${Yr}`);cs.data&&(as={...as,...cs.data})}catch(cs){console.error(" Failed to fetch book by ID:",cs),y$4.error("Could not refresh book info  using cached version")}if(!as)return;const es=as.book_name||as.title||"",Xr=!as.author_name||as.author_name.trim()==="",Wr=!es||es.trim()===""||es==="Untitled"||es==="Untitled Book";if((Xr||Wr)&&!as.is_draft){Jt({id:Yr,part_number:rs}),or(!0);return}Jt({id:as.id,part_number:rs,book_name:es,author_name:as.author_name||"",book_type:as.bookType||as.book_type||"fiction"}),Kt(!0)}function Mr(Yr,rs){Dt(as=>as.map(es=>es.id===Yr?{...es,prompt:rs,status:"pending"}:es)),setTimeout(Ft,3e3)}function Pr({bookId:Yr,bookName:rs,authorName:as,bookType:es}){dr({bookName:rs,authorName:as,bookType:es}),Jt({id:Yr,part_number:1,book_name:rs,author_name:as,book_type:es}),or(!1),Kt(!0)}async function Or(){var Yr;try{const rs=await axiosInstance.post("/books/get-new-book");await Ft()}catch(rs){if(((Yr=rs.response)==null?void 0:Yr.status)===400){sr(!0);return}console.error("Failed to create new book",rs),y$4.error("Could not create a new book")}}async function kr(){try{const Yr=await $t();Yr&&(setSubscriptionStatus(Yr.subscription_status),await Ft())}catch(Yr){console.error("Failed to refresh slots:",Yr)}}async function Tr(Yr){try{await axiosInstance.post(`/books/${Yr}/archive`),Dt(rs=>rs.filter(as=>as.id!==Yr)),await kr()}catch(rs){console.error("Failed to archive book",rs),y$4.error("Failed to archive book")}}if(dt||!kt)return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LoadingState,{label:"Checking subscription"})});if(!(!!(kt!=null&&kt.authors_assistant_override)||(kt==null?void 0:kt.subscription_status)==="active"&&(kt==null?void 0:kt.has_book)===1))return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(EmptyState,{type:"subscription",onCheckout:()=>ur("/plans"),title:"Authors Assistant is not active",description:"Upgrade or activate Authors Assistant to continue writing."})});const wr=3,zr=Tt.filter(Yr=>Yr.is_complete===0&&!Yr.deleted_at).length,Hr=Math.max(wr-zr,0);return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:`
    flex flex-col min-h-screen
    px-4 lg:px-8 py-6
    bg-dashboard-bg-light
    dark:bg-dashboard-bg-dark
  `,children:[jsxRuntimeExports.jsx(BooksDashboardHeader,{activeBookCount:zr,availableSlots:Hr,onCheckout:()=>ur("/plans"),onCreateBook:Or}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:Ut?jsxRuntimeExports.jsx(LoadingState,{label:"Loading your books..."}):Tt.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>ur("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:br,onAddPrompt:(Yr,rs)=>_r(Yr,rs),onGenerateNext:(Yr,rs)=>_r(Yr,rs),onArchiveBook:Tr}),jsxRuntimeExports.jsx(BookCardList,{books:br,onAddPrompt:(Yr,rs)=>_r(Yr,rs),onGenerateNext:(Yr,rs)=>_r(Yr,rs),onArchiveBook:Tr})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-auto pt-6",children:[jsxRuntimeExports.jsx(PaginationControls,{currentPage:nr,totalPages:jr,onPageChange:ir}),jsxRuntimeExports.jsx(SupportTab,{})]}),lr&&Yt&&jsxRuntimeExports.jsx(NewBookModal,{accessToken:et,onCreate:Pr,onClose:()=>or(!1)}),Yt&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:Ht,onClose:()=>Kt(!1),bookId:Yt.id,partNumber:Yt.part_number,accessToken:et,setShowGenerating:er,onSubmitted:Mr,onCompleted:()=>{Ft(),er(!1)},initialBookData:{bookName:(cr==null?void 0:cr.bookName)||Yt.book_name||Yt.title||"",authorName:(cr==null?void 0:cr.authorName)||Yt.author_name||"",bookType:(cr==null?void 0:cr.bookType)||Yt.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:rr,onClose:()=>sr(!1),onRefresh:kr,context:"books"}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:Zt,type:"book",onClose:()=>er(!1)})]})})}var lib={},propTypes$2={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function et($t,Tt,Dt,Ft,Ut,Ht){if(Ht!==ReactPropTypesSecret){var Kt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Kt.name="Invariant Violation",Kt}}et.isRequired=et;function dt(){return et}var kt={array:et,bigint:et,bool:et,func:et,number:et,object:et,string:et,symbol:et,any:et,arrayOf:dt,element:et,elementType:et,instanceOf:dt,node:et,objectOf:dt,oneOf:dt,oneOfType:dt,shape:dt,exact:dt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return kt.PropTypes=kt,kt};propTypes$2.exports=factoryWithThrowingShims();var propTypesExports=propTypes$2.exports,ErrorCorrectLevel={L:1,M:0,Q:3,H:2},mode$1={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},mode=mode$1;function QR8bitByte(et){this.mode=mode.MODE_8BIT_BYTE,this.data=et}QR8bitByte.prototype={getLength:function(et){return this.data.length},write:function(et){for(var dt=0;dt<this.data.length;dt++)et.put(this.data.charCodeAt(dt),8)}};var _8BitByte=QR8bitByte,ECL=ErrorCorrectLevel;function QRRSBlock(et,dt){this.totalCount=et,this.dataCount=dt}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(et,dt){var kt=QRRSBlock.getRsBlockTable(et,dt);if(kt==null)throw new Error("bad rs block @ typeNumber:"+et+"/errorCorrectLevel:"+dt);for(var $t=kt.length/3,Tt=new Array,Dt=0;Dt<$t;Dt++)for(var Ft=kt[Dt*3+0],Ut=kt[Dt*3+1],Ht=kt[Dt*3+2],Kt=0;Kt<Ft;Kt++)Tt.push(new QRRSBlock(Ut,Ht));return Tt};QRRSBlock.getRsBlockTable=function(et,dt){switch(dt){case ECL.L:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+0];case ECL.M:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+1];case ECL.Q:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+2];case ECL.H:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+3];default:return}};var RSBlock$1=QRRSBlock;function QRBitBuffer(){this.buffer=new Array,this.length=0}QRBitBuffer.prototype={get:function(et){var dt=Math.floor(et/8);return(this.buffer[dt]>>>7-et%8&1)==1},put:function(et,dt){for(var kt=0;kt<dt;kt++)this.putBit((et>>>dt-kt-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(et){var dt=Math.floor(this.length/8);this.buffer.length<=dt&&this.buffer.push(0),et&&(this.buffer[dt]|=128>>>this.length%8),this.length++}};var BitBuffer$1=QRBitBuffer,QRMath={glog:function(et){if(et<1)throw new Error("glog("+et+")");return QRMath.LOG_TABLE[et]},gexp:function(et){for(;et<0;)et+=255;for(;et>=256;)et-=255;return QRMath.EXP_TABLE[et]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i$3=0;i$3<8;i$3++)QRMath.EXP_TABLE[i$3]=1<<i$3;for(var i$3=8;i$3<256;i$3++)QRMath.EXP_TABLE[i$3]=QRMath.EXP_TABLE[i$3-4]^QRMath.EXP_TABLE[i$3-5]^QRMath.EXP_TABLE[i$3-6]^QRMath.EXP_TABLE[i$3-8];for(var i$3=0;i$3<255;i$3++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i$3]]=i$3;var math$2=QRMath,math$1=math$2;function QRPolynomial(et,dt){if(et.length==null)throw new Error(et.length+"/"+dt);for(var kt=0;kt<et.length&&et[kt]==0;)kt++;this.num=new Array(et.length-kt+dt);for(var $t=0;$t<et.length-kt;$t++)this.num[$t]=et[$t+kt]}QRPolynomial.prototype={get:function(et){return this.num[et]},getLength:function(){return this.num.length},multiply:function(et){for(var dt=new Array(this.getLength()+et.getLength()-1),kt=0;kt<this.getLength();kt++)for(var $t=0;$t<et.getLength();$t++)dt[kt+$t]^=math$1.gexp(math$1.glog(this.get(kt))+math$1.glog(et.get($t)));return new QRPolynomial(dt,0)},mod:function(et){if(this.getLength()-et.getLength()<0)return this;for(var dt=math$1.glog(this.get(0))-math$1.glog(et.get(0)),kt=new Array(this.getLength()),$t=0;$t<this.getLength();$t++)kt[$t]=this.get($t);for(var $t=0;$t<et.getLength();$t++)kt[$t]^=math$1.gexp(math$1.glog(et.get($t))+dt);return new QRPolynomial(kt,0).mod(et)}};var Polynomial$2=QRPolynomial,Mode=mode$1,Polynomial$1=Polynomial$2,math=math$2,QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(et){for(var dt=et<<10;QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)dt^=QRUtil.G15<<QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G15);return(et<<10|dt)^QRUtil.G15_MASK},getBCHTypeNumber:function(et){for(var dt=et<<12;QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)dt^=QRUtil.G18<<QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G18);return et<<12|dt},getBCHDigit:function(et){for(var dt=0;et!=0;)dt++,et>>>=1;return dt},getPatternPosition:function(et){return QRUtil.PATTERN_POSITION_TABLE[et-1]},getMask:function(et,dt,kt){switch(et){case QRMaskPattern.PATTERN000:return(dt+kt)%2==0;case QRMaskPattern.PATTERN001:return dt%2==0;case QRMaskPattern.PATTERN010:return kt%3==0;case QRMaskPattern.PATTERN011:return(dt+kt)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(dt/2)+Math.floor(kt/3))%2==0;case QRMaskPattern.PATTERN101:return dt*kt%2+dt*kt%3==0;case QRMaskPattern.PATTERN110:return(dt*kt%2+dt*kt%3)%2==0;case QRMaskPattern.PATTERN111:return(dt*kt%3+(dt+kt)%2)%2==0;default:throw new Error("bad maskPattern:"+et)}},getErrorCorrectPolynomial:function(et){for(var dt=new Polynomial$1([1],0),kt=0;kt<et;kt++)dt=dt.multiply(new Polynomial$1([1,math.gexp(kt)],0));return dt},getLengthInBits:function(et,dt){if(1<=dt&&dt<10)switch(et){case Mode.MODE_NUMBER:return 10;case Mode.MODE_ALPHA_NUM:return 9;case Mode.MODE_8BIT_BYTE:return 8;case Mode.MODE_KANJI:return 8;default:throw new Error("mode:"+et)}else if(dt<27)switch(et){case Mode.MODE_NUMBER:return 12;case Mode.MODE_ALPHA_NUM:return 11;case Mode.MODE_8BIT_BYTE:return 16;case Mode.MODE_KANJI:return 10;default:throw new Error("mode:"+et)}else if(dt<41)switch(et){case Mode.MODE_NUMBER:return 14;case Mode.MODE_ALPHA_NUM:return 13;case Mode.MODE_8BIT_BYTE:return 16;case Mode.MODE_KANJI:return 12;default:throw new Error("mode:"+et)}else throw new Error("type:"+dt)},getLostPoint:function(et){for(var dt=et.getModuleCount(),kt=0,$t=0;$t<dt;$t++)for(var Tt=0;Tt<dt;Tt++){for(var Dt=0,Ft=et.isDark($t,Tt),Ut=-1;Ut<=1;Ut++)if(!($t+Ut<0||dt<=$t+Ut))for(var Ht=-1;Ht<=1;Ht++)Tt+Ht<0||dt<=Tt+Ht||Ut==0&&Ht==0||Ft==et.isDark($t+Ut,Tt+Ht)&&Dt++;Dt>5&&(kt+=3+Dt-5)}for(var $t=0;$t<dt-1;$t++)for(var Tt=0;Tt<dt-1;Tt++){var Kt=0;et.isDark($t,Tt)&&Kt++,et.isDark($t+1,Tt)&&Kt++,et.isDark($t,Tt+1)&&Kt++,et.isDark($t+1,Tt+1)&&Kt++,(Kt==0||Kt==4)&&(kt+=3)}for(var $t=0;$t<dt;$t++)for(var Tt=0;Tt<dt-6;Tt++)et.isDark($t,Tt)&&!et.isDark($t,Tt+1)&&et.isDark($t,Tt+2)&&et.isDark($t,Tt+3)&&et.isDark($t,Tt+4)&&!et.isDark($t,Tt+5)&&et.isDark($t,Tt+6)&&(kt+=40);for(var Tt=0;Tt<dt;Tt++)for(var $t=0;$t<dt-6;$t++)et.isDark($t,Tt)&&!et.isDark($t+1,Tt)&&et.isDark($t+2,Tt)&&et.isDark($t+3,Tt)&&et.isDark($t+4,Tt)&&!et.isDark($t+5,Tt)&&et.isDark($t+6,Tt)&&(kt+=40);for(var Yt=0,Tt=0;Tt<dt;Tt++)for(var $t=0;$t<dt;$t++)et.isDark($t,Tt)&&Yt++;var Jt=Math.abs(100*Yt/dt/dt-50)/5;return kt+=Jt*10,kt}},util$1=QRUtil,BitByte=_8BitByte,RSBlock=RSBlock$1,BitBuffer=BitBuffer$1,util=util$1,Polynomial=Polynomial$2;function QRCode$1(et,dt){this.typeNumber=et,this.errorCorrectLevel=dt,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var proto=QRCode$1.prototype;proto.addData=function(et){var dt=new BitByte(et);this.dataList.push(dt),this.dataCache=null};proto.isDark=function(et,dt){if(et<0||this.moduleCount<=et||dt<0||this.moduleCount<=dt)throw new Error(et+","+dt);return this.modules[et][dt]};proto.getModuleCount=function(){return this.moduleCount};proto.make=function(){if(this.typeNumber<1){var et=1;for(et=1;et<40;et++){for(var dt=RSBlock.getRSBlocks(et,this.errorCorrectLevel),kt=new BitBuffer,$t=0,Tt=0;Tt<dt.length;Tt++)$t+=dt[Tt].dataCount;for(var Tt=0;Tt<this.dataList.length;Tt++){var Dt=this.dataList[Tt];kt.put(Dt.mode,4),kt.put(Dt.getLength(),util.getLengthInBits(Dt.mode,et)),Dt.write(kt)}if(kt.getLengthInBits()<=$t*8)break}this.typeNumber=et}this.makeImpl(!1,this.getBestMaskPattern())};proto.makeImpl=function(et,dt){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var kt=0;kt<this.moduleCount;kt++){this.modules[kt]=new Array(this.moduleCount);for(var $t=0;$t<this.moduleCount;$t++)this.modules[kt][$t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(et,dt),this.typeNumber>=7&&this.setupTypeNumber(et),this.dataCache==null&&(this.dataCache=QRCode$1.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,dt)};proto.setupPositionProbePattern=function(et,dt){for(var kt=-1;kt<=7;kt++)if(!(et+kt<=-1||this.moduleCount<=et+kt))for(var $t=-1;$t<=7;$t++)dt+$t<=-1||this.moduleCount<=dt+$t||(0<=kt&&kt<=6&&($t==0||$t==6)||0<=$t&&$t<=6&&(kt==0||kt==6)||2<=kt&&kt<=4&&2<=$t&&$t<=4?this.modules[et+kt][dt+$t]=!0:this.modules[et+kt][dt+$t]=!1)};proto.getBestMaskPattern=function(){for(var et=0,dt=0,kt=0;kt<8;kt++){this.makeImpl(!0,kt);var $t=util.getLostPoint(this);(kt==0||et>$t)&&(et=$t,dt=kt)}return dt};proto.createMovieClip=function(et,dt,kt){var $t=et.createEmptyMovieClip(dt,kt),Tt=1;this.make();for(var Dt=0;Dt<this.modules.length;Dt++)for(var Ft=Dt*Tt,Ut=0;Ut<this.modules[Dt].length;Ut++){var Ht=Ut*Tt,Kt=this.modules[Dt][Ut];Kt&&($t.beginFill(0,100),$t.moveTo(Ht,Ft),$t.lineTo(Ht+Tt,Ft),$t.lineTo(Ht+Tt,Ft+Tt),$t.lineTo(Ht,Ft+Tt),$t.endFill())}return $t};proto.setupTimingPattern=function(){for(var et=8;et<this.moduleCount-8;et++)this.modules[et][6]==null&&(this.modules[et][6]=et%2==0);for(var dt=8;dt<this.moduleCount-8;dt++)this.modules[6][dt]==null&&(this.modules[6][dt]=dt%2==0)};proto.setupPositionAdjustPattern=function(){for(var et=util.getPatternPosition(this.typeNumber),dt=0;dt<et.length;dt++)for(var kt=0;kt<et.length;kt++){var $t=et[dt],Tt=et[kt];if(this.modules[$t][Tt]==null)for(var Dt=-2;Dt<=2;Dt++)for(var Ft=-2;Ft<=2;Ft++)Dt==-2||Dt==2||Ft==-2||Ft==2||Dt==0&&Ft==0?this.modules[$t+Dt][Tt+Ft]=!0:this.modules[$t+Dt][Tt+Ft]=!1}};proto.setupTypeNumber=function(et){for(var dt=util.getBCHTypeNumber(this.typeNumber),kt=0;kt<18;kt++){var $t=!et&&(dt>>kt&1)==1;this.modules[Math.floor(kt/3)][kt%3+this.moduleCount-8-3]=$t}for(var kt=0;kt<18;kt++){var $t=!et&&(dt>>kt&1)==1;this.modules[kt%3+this.moduleCount-8-3][Math.floor(kt/3)]=$t}};proto.setupTypeInfo=function(et,dt){for(var kt=this.errorCorrectLevel<<3|dt,$t=util.getBCHTypeInfo(kt),Tt=0;Tt<15;Tt++){var Dt=!et&&($t>>Tt&1)==1;Tt<6?this.modules[Tt][8]=Dt:Tt<8?this.modules[Tt+1][8]=Dt:this.modules[this.moduleCount-15+Tt][8]=Dt}for(var Tt=0;Tt<15;Tt++){var Dt=!et&&($t>>Tt&1)==1;Tt<8?this.modules[8][this.moduleCount-Tt-1]=Dt:Tt<9?this.modules[8][15-Tt-1+1]=Dt:this.modules[8][15-Tt-1]=Dt}this.modules[this.moduleCount-8][8]=!et};proto.mapData=function(et,dt){for(var kt=-1,$t=this.moduleCount-1,Tt=7,Dt=0,Ft=this.moduleCount-1;Ft>0;Ft-=2)for(Ft==6&&Ft--;;){for(var Ut=0;Ut<2;Ut++)if(this.modules[$t][Ft-Ut]==null){var Ht=!1;Dt<et.length&&(Ht=(et[Dt]>>>Tt&1)==1);var Kt=util.getMask(dt,$t,Ft-Ut);Kt&&(Ht=!Ht),this.modules[$t][Ft-Ut]=Ht,Tt--,Tt==-1&&(Dt++,Tt=7)}if($t+=kt,$t<0||this.moduleCount<=$t){$t-=kt,kt=-kt;break}}};QRCode$1.PAD0=236;QRCode$1.PAD1=17;QRCode$1.createData=function(et,dt,kt){for(var $t=RSBlock.getRSBlocks(et,dt),Tt=new BitBuffer,Dt=0;Dt<kt.length;Dt++){var Ft=kt[Dt];Tt.put(Ft.mode,4),Tt.put(Ft.getLength(),util.getLengthInBits(Ft.mode,et)),Ft.write(Tt)}for(var Ut=0,Dt=0;Dt<$t.length;Dt++)Ut+=$t[Dt].dataCount;if(Tt.getLengthInBits()>Ut*8)throw new Error("code length overflow. ("+Tt.getLengthInBits()+">"+Ut*8+")");for(Tt.getLengthInBits()+4<=Ut*8&&Tt.put(0,4);Tt.getLengthInBits()%8!=0;)Tt.putBit(!1);for(;!(Tt.getLengthInBits()>=Ut*8||(Tt.put(QRCode$1.PAD0,8),Tt.getLengthInBits()>=Ut*8));)Tt.put(QRCode$1.PAD1,8);return QRCode$1.createBytes(Tt,$t)};QRCode$1.createBytes=function(et,dt){for(var kt=0,$t=0,Tt=0,Dt=new Array(dt.length),Ft=new Array(dt.length),Ut=0;Ut<dt.length;Ut++){var Ht=dt[Ut].dataCount,Kt=dt[Ut].totalCount-Ht;$t=Math.max($t,Ht),Tt=Math.max(Tt,Kt),Dt[Ut]=new Array(Ht);for(var Yt=0;Yt<Dt[Ut].length;Yt++)Dt[Ut][Yt]=255&et.buffer[Yt+kt];kt+=Ht;var Jt=util.getErrorCorrectPolynomial(Kt),Zt=new Polynomial(Dt[Ut],Jt.getLength()-1),er=Zt.mod(Jt);Ft[Ut]=new Array(Jt.getLength()-1);for(var Yt=0;Yt<Ft[Ut].length;Yt++){var rr=Yt+er.getLength()-Ft[Ut].length;Ft[Ut][Yt]=rr>=0?er.get(rr):0}}for(var sr=0,Yt=0;Yt<dt.length;Yt++)sr+=dt[Yt].totalCount;for(var nr=new Array(sr),ir=0,Yt=0;Yt<$t;Yt++)for(var Ut=0;Ut<dt.length;Ut++)Yt<Dt[Ut].length&&(nr[ir++]=Dt[Ut][Yt]);for(var Yt=0;Yt<Tt;Yt++)for(var Ut=0;Ut<dt.length;Ut++)Yt<Ft[Ut].length&&(nr[ir++]=Ft[Ut][Yt]);return nr};var QRCode_1=QRCode$1,QRCodeSvg$1={};Object.defineProperty(QRCodeSvg$1,"__esModule",{value:!0});var _extends$1=Object.assign||function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)Object.prototype.hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},_propTypes$1=propTypesExports,_propTypes2$1=_interopRequireDefault$1(_propTypes$1),_react$1=reactExports,_react2$1=_interopRequireDefault$1(_react$1);function _interopRequireDefault$1(et){return et&&et.__esModule?et:{default:et}}function _objectWithoutProperties$1(et,dt){var kt={};for(var $t in et)dt.indexOf($t)>=0||Object.prototype.hasOwnProperty.call(et,$t)&&(kt[$t]=et[$t]);return kt}var propTypes$1={bgColor:_propTypes2$1.default.oneOfType([_propTypes2$1.default.object,_propTypes2$1.default.string]).isRequired,bgD:_propTypes2$1.default.string.isRequired,fgColor:_propTypes2$1.default.oneOfType([_propTypes2$1.default.object,_propTypes2$1.default.string]).isRequired,fgD:_propTypes2$1.default.string.isRequired,size:_propTypes2$1.default.number.isRequired,title:_propTypes2$1.default.string,viewBoxSize:_propTypes2$1.default.number.isRequired,xmlns:_propTypes2$1.default.string},QRCodeSvg=(0,_react$1.forwardRef)(function(et,dt){var kt=et.bgColor,$t=et.bgD,Tt=et.fgD,Dt=et.fgColor,Ft=et.size,Ut=et.title,Ht=et.viewBoxSize,Kt=et.xmlns,Yt=Kt===void 0?"http://www.w3.org/2000/svg":Kt,Jt=_objectWithoutProperties$1(et,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return _react2$1.default.createElement("svg",_extends$1({},Jt,{height:Ft,ref:dt,viewBox:"0 0 "+Ht+" "+Ht,width:Ft,xmlns:Yt}),Ut?_react2$1.default.createElement("title",null,Ut):null,_react2$1.default.createElement("path",{d:$t,fill:kt}),_react2$1.default.createElement("path",{d:Tt,fill:Dt}))});QRCodeSvg.displayName="QRCodeSvg";QRCodeSvg.propTypes=propTypes$1;QRCodeSvg$1.default=QRCodeSvg;Object.defineProperty(lib,"__esModule",{value:!0});lib.QRCode=void 0;var _extends=Object.assign||function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)Object.prototype.hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_ErrorCorrectLevel=ErrorCorrectLevel,_ErrorCorrectLevel2=_interopRequireDefault(_ErrorCorrectLevel),_QRCode=QRCode_1,_QRCode2=_interopRequireDefault(_QRCode),_react=reactExports,_react2=_interopRequireDefault(_react),_QRCodeSvg=QRCodeSvg$1,_QRCodeSvg2=_interopRequireDefault(_QRCodeSvg);function _interopRequireDefault(et){return et&&et.__esModule?et:{default:et}}function _objectWithoutProperties(et,dt){var kt={};for(var $t in et)dt.indexOf($t)>=0||Object.prototype.hasOwnProperty.call(et,$t)&&(kt[$t]=et[$t]);return kt}var propTypes={bgColor:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),fgColor:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),level:_propTypes2.default.string,size:_propTypes2.default.number,value:_propTypes2.default.string.isRequired},QRCode=(0,_react.forwardRef)(function(et,dt){var kt=et.bgColor,$t=kt===void 0?"#FFFFFF":kt,Tt=et.fgColor,Dt=Tt===void 0?"#000000":Tt,Ft=et.level,Ut=Ft===void 0?"L":Ft,Ht=et.size,Kt=Ht===void 0?256:Ht,Yt=et.value,Jt=_objectWithoutProperties(et,["bgColor","fgColor","level","size","value"]),Zt=new _QRCode2.default(-1,_ErrorCorrectLevel2.default[Ut]);Zt.addData(Yt),Zt.make();var er=Zt.modules;return _react2.default.createElement(_QRCodeSvg2.default,_extends({},Jt,{bgColor:$t,bgD:er.map(function(rr,sr){return rr.map(function(nr,ir){return nr?"":"M "+ir+" "+sr+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:Dt,fgD:er.map(function(rr,sr){return rr.map(function(nr,ir){return nr?"M "+ir+" "+sr+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:dt,size:Kt,viewBoxSize:er.length}))});lib.QRCode=QRCode;QRCode.displayName="QRCode";QRCode.propTypes=propTypes;var _default=lib.default=QRCode;function _typeof(et){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dt){return typeof dt}:function(dt){return dt&&typeof Symbol=="function"&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt},_typeof(et)}function toPrimitive(et,dt){if(_typeof(et)!="object"||!et)return et;var kt=et[Symbol.toPrimitive];if(kt!==void 0){var $t=kt.call(et,dt||"default");if(_typeof($t)!="object")return $t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(dt==="string"?String:Number)(et)}function toPropertyKey(et){var dt=toPrimitive(et,"string");return _typeof(dt)=="symbol"?dt:dt+""}function _defineProperty$1(et,dt,kt){return(dt=toPropertyKey(dt))in et?Object.defineProperty(et,dt,{value:kt,enumerable:!0,configurable:!0,writable:!0}):et[dt]=kt,et}function _objectWithoutPropertiesLoose(et,dt){if(et==null)return{};var kt={};for(var $t in et)if({}.hasOwnProperty.call(et,$t)){if(dt.includes($t))continue;kt[$t]=et[$t]}return kt}var imagePromiseFactory=function(et){var dt=et.decode,kt=dt===void 0?!0:dt,$t=et.crossOrigin,Tt=$t===void 0?"":$t;return function(Dt){return new Promise(function(Ft,Ut){var Ht=new Image;Tt&&(Ht.crossOrigin=Tt),Ht.onload=function(){kt&&Ht.decode?Ht.decode().then(Ft).catch(Ut):Ft()},Ht.onerror=Ut,Ht.src=Dt})}};function ownKeys$1(et,dt){var kt=Object.keys(et);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(et);dt&&($t=$t.filter(function(Tt){return Object.getOwnPropertyDescriptor(et,Tt).enumerable})),kt.push.apply(kt,$t)}return kt}function _objectSpread$1(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt]!=null?arguments[dt]:{};dt%2?ownKeys$1(Object(kt),!0).forEach(function($t){_defineProperty$1(et,$t,kt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(kt)):ownKeys$1(Object(kt)).forEach(function($t){Object.defineProperty(et,$t,Object.getOwnPropertyDescriptor(kt,$t))})}return et}var removeBlankArrayElements=function et(dt){return dt.filter(function(kt){return kt})},stringToArray=function et(dt){return Array.isArray(dt)?dt:[dt]},cache={},promiseFind=function et(dt,kt){var $t=!1;return new Promise(function(Tt,Dt){var Ft=function(Ht){return kt(Ht).then(function(){$t=!0,Tt(Ht)})};dt.reduce(function(Ut,Ht){return Ut.catch(function(){if(!$t)return Ft(Ht)})},Ft(dt.shift())).catch(Dt)})};function useImage(et){var dt=et.srcList,kt=et.imgPromise,$t=kt===void 0?imagePromiseFactory({decode:!0}):kt,Tt=et.useSuspense,Dt=Tt===void 0?!0:Tt,Ft=reactExports.useState(!1),Ut=Ft[1],Ht=removeBlankArrayElements(stringToArray(dt)),Kt=Ht.join("");if(cache[Kt]||(cache[Kt]={promise:promiseFind(Ht,$t),cache:"pending",error:null}),cache[Kt].cache==="resolved")return{src:cache[Kt].src,isLoading:!1,error:null};if(cache[Kt].cache==="rejected"){if(Dt)throw cache[Kt].error;return{isLoading:!1,error:cache[Kt].error,src:void 0}}if(cache[Kt].promise.then(function(Yt){cache[Kt]=_objectSpread$1(_objectSpread$1({},cache[Kt]),{},{cache:"resolved",src:Yt}),Dt||Ut(Kt)}).catch(function(Yt){cache[Kt]=_objectSpread$1(_objectSpread$1({},cache[Kt]),{},{cache:"rejected",error:Yt}),Dt||Ut(Kt)}),Dt)throw cache[Kt].promise;return{isLoading:!0,src:void 0,error:null}}var _excluded=["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"];function ownKeys(et,dt){var kt=Object.keys(et);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(et);dt&&($t=$t.filter(function(Tt){return Object.getOwnPropertyDescriptor(et,Tt).enumerable})),kt.push.apply(kt,$t)}return kt}function _objectSpread(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt]!=null?arguments[dt]:{};dt%2?ownKeys(Object(kt),!0).forEach(function($t){_defineProperty$1(et,$t,kt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(kt)):ownKeys(Object(kt)).forEach(function($t){Object.defineProperty(et,$t,Object.getOwnPropertyDescriptor(kt,$t))})}return et}var passthroughContainer=function et(dt){return dt};function Img(et){var dt=et.decode,kt=dt===void 0?!0:dt,$t=et.src,Tt=$t===void 0?[]:$t,Dt=et.loader,Ft=Dt===void 0?null:Dt,Ut=et.unloader,Ht=Ut===void 0?null:Ut,Kt=et.container,Yt=Kt===void 0?passthroughContainer:Kt,Jt=et.loaderContainer,Zt=Jt===void 0?passthroughContainer:Jt,er=et.unloaderContainer,rr=er===void 0?passthroughContainer:er,sr=et.imgPromise,nr=et.crossorigin,ir=et.useSuspense,lr=ir===void 0?!1:ir,or=_objectWithoutPropertiesLoose(et,_excluded);sr=sr||imagePromiseFactory({decode:kt,crossOrigin:nr});var cr=useImage({srcList:Tt,imgPromise:sr,useSuspense:lr}),dr=cr.src,ur=cr.isLoading;return dr?Yt(React$2.createElement("img",_objectSpread({src:dr},or))):!lr&&ur?Zt(Ft):!lr&&Ht?rr(Ht):null}var extendStatics=function(et,dt){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,$t){kt.__proto__=$t}||function(kt,$t){for(var Tt in $t)Object.prototype.hasOwnProperty.call($t,Tt)&&(kt[Tt]=$t[Tt])},extendStatics(et,dt)};function __extends(et,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");extendStatics(et,dt);function kt(){this.constructor=et}et.prototype=dt===null?Object.create(dt):(kt.prototype=dt.prototype,new kt)}var __assign=function(){return __assign=Object.assign||function(dt){for(var kt,$t=1,Tt=arguments.length;$t<Tt;$t++){kt=arguments[$t];for(var Dt in kt)Object.prototype.hasOwnProperty.call(kt,Dt)&&(dt[Dt]=kt[Dt])}return dt},__assign.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var _populated=!1,_ie,_firefox,_opera,_webkit,_chrome,_ie_real_version,_osx,_windows,_linux,_android,_win64,_iphone,_ipad,_native,_mobile;function _populate(){if(!_populated){_populated=!0;var et=navigator.userAgent,dt=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(et),kt=/(Mac OS X)|(Windows)|(Linux)/.exec(et);if(_iphone=/\b(iPhone|iP[ao]d)/.exec(et),_ipad=/\b(iP[ao]d)/.exec(et),_android=/Android/i.exec(et),_native=/FBAN\/\w+;/i.exec(et),_mobile=/Mobile/i.exec(et),_win64=!!/Win64/.exec(et),dt){_ie=dt[1]?parseFloat(dt[1]):dt[5]?parseFloat(dt[5]):NaN,_ie&&document&&document.documentMode&&(_ie=document.documentMode);var $t=/(?:Trident\/(\d+.\d+))/.exec(et);_ie_real_version=$t?parseFloat($t[1])+4:_ie,_firefox=dt[2]?parseFloat(dt[2]):NaN,_opera=dt[3]?parseFloat(dt[3]):NaN,_webkit=dt[4]?parseFloat(dt[4]):NaN,_webkit?(dt=/(?:Chrome\/(\d+\.\d+))/.exec(et),_chrome=dt&&dt[1]?parseFloat(dt[1]):NaN):_chrome=NaN}else _ie=_firefox=_opera=_chrome=_webkit=NaN;if(kt){if(kt[1]){var Tt=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(et);_osx=Tt?parseFloat(Tt[1].replace("_",".")):!0}else _osx=!1;_windows=!!kt[2],_linux=!!kt[3]}else _osx=_windows=_linux=!1}}var UserAgent_DEPRECATED$1={ie:function(){return _populate()||_ie},ieCompatibilityMode:function(){return _populate()||_ie_real_version>_ie},ie64:function(){return UserAgent_DEPRECATED$1.ie()&&_win64},firefox:function(){return _populate()||_firefox},opera:function(){return _populate()||_opera},webkit:function(){return _populate()||_webkit},safari:function(){return UserAgent_DEPRECATED$1.webkit()},chrome:function(){return _populate()||_chrome},windows:function(){return _populate()||_windows},osx:function(){return _populate()||_osx},linux:function(){return _populate()||_linux},iphone:function(){return _populate()||_iphone},mobile:function(){return _populate()||_iphone||_ipad||_android||_mobile},nativeApp:function(){return _populate()||_native},android:function(){return _populate()||_android},ipad:function(){return _populate()||_ipad}},UserAgent_DEPRECATED_1=UserAgent_DEPRECATED$1,canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement),ExecutionEnvironment$1={canUseDOM:canUseDOM$1,canUseWorkers:typeof Worker<"u",canUseEventListeners:canUseDOM$1&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM$1&&!!window.screen,isInWorker:!canUseDOM$1},ExecutionEnvironment_1=ExecutionEnvironment$1,ExecutionEnvironment=ExecutionEnvironment_1,useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function isEventSupported$1(et,dt){if(!ExecutionEnvironment.canUseDOM||dt&&!("addEventListener"in document))return!1;var kt="on"+et,$t=kt in document;if(!$t){var Tt=document.createElement("div");Tt.setAttribute(kt,"return;"),$t=typeof Tt[kt]=="function"}return!$t&&useHasFeature&&et==="wheel"&&($t=document.implementation.hasFeature("Events.wheel","3.0")),$t}var isEventSupported_1=isEventSupported$1,UserAgent_DEPRECATED=UserAgent_DEPRECATED_1,isEventSupported=isEventSupported_1,PIXEL_STEP=10,LINE_HEIGHT=40,PAGE_HEIGHT=800;function normalizeWheel$2(et){var dt=0,kt=0,$t=0,Tt=0;return"detail"in et&&(kt=et.detail),"wheelDelta"in et&&(kt=-et.wheelDelta/120),"wheelDeltaY"in et&&(kt=-et.wheelDeltaY/120),"wheelDeltaX"in et&&(dt=-et.wheelDeltaX/120),"axis"in et&&et.axis===et.HORIZONTAL_AXIS&&(dt=kt,kt=0),$t=dt*PIXEL_STEP,Tt=kt*PIXEL_STEP,"deltaY"in et&&(Tt=et.deltaY),"deltaX"in et&&($t=et.deltaX),($t||Tt)&&et.deltaMode&&(et.deltaMode==1?($t*=LINE_HEIGHT,Tt*=LINE_HEIGHT):($t*=PAGE_HEIGHT,Tt*=PAGE_HEIGHT)),$t&&!dt&&(dt=$t<1?-1:1),Tt&&!kt&&(kt=Tt<1?-1:1),{spinX:dt,spinY:kt,pixelX:$t,pixelY:Tt}}normalizeWheel$2.getEventType=function(){return UserAgent_DEPRECATED.firefox()?"DOMMouseScroll":isEventSupported("wheel")?"wheel":"mousewheel"};var normalizeWheel_1=normalizeWheel$2,normalizeWheel=normalizeWheel_1;const normalizeWheel$1=getDefaultExportFromCjs(normalizeWheel);function getCropSize(et,dt,kt,$t,Tt,Dt){Dt===void 0&&(Dt=0);var Ft=rotateSize(et,dt,Dt),Ut=Ft.width,Ht=Ft.height,Kt=Math.min(Ut,kt),Yt=Math.min(Ht,$t);return Kt>Yt*Tt?{width:Yt*Tt,height:Yt}:{width:Kt,height:Kt/Tt}}function getMediaZoom(et){return et.width>et.height?et.width/et.naturalWidth:et.height/et.naturalHeight}function restrictPosition(et,dt,kt,$t,Tt){Tt===void 0&&(Tt=0);var Dt=rotateSize(dt.width,dt.height,Tt),Ft=Dt.width,Ut=Dt.height;return{x:restrictPositionCoord(et.x,Ft,kt.width,$t),y:restrictPositionCoord(et.y,Ut,kt.height,$t)}}function restrictPositionCoord(et,dt,kt,$t){var Tt=dt*$t/2-kt/2;return clamp$5(et,-Tt,Tt)}function getDistanceBetweenPoints(et,dt){return Math.sqrt(Math.pow(et.y-dt.y,2)+Math.pow(et.x-dt.x,2))}function getRotationBetweenPoints(et,dt){return Math.atan2(dt.y-et.y,dt.x-et.x)*180/Math.PI}function computeCroppedArea(et,dt,kt,$t,Tt,Dt,Ft){Dt===void 0&&(Dt=0),Ft===void 0&&(Ft=!0);var Ut=Ft?limitArea:noOp,Ht=rotateSize(dt.width,dt.height,Dt),Kt=rotateSize(dt.naturalWidth,dt.naturalHeight,Dt),Yt={x:Ut(100,((Ht.width-kt.width/Tt)/2-et.x/Tt)/Ht.width*100),y:Ut(100,((Ht.height-kt.height/Tt)/2-et.y/Tt)/Ht.height*100),width:Ut(100,kt.width/Ht.width*100/Tt),height:Ut(100,kt.height/Ht.height*100/Tt)},Jt=Math.round(Ut(Kt.width,Yt.width*Kt.width/100)),Zt=Math.round(Ut(Kt.height,Yt.height*Kt.height/100)),er=Kt.width>=Kt.height*$t,rr=er?{width:Math.round(Zt*$t),height:Zt}:{width:Jt,height:Math.round(Jt/$t)},sr=__assign(__assign({},rr),{x:Math.round(Ut(Kt.width-rr.width,Yt.x*Kt.width/100)),y:Math.round(Ut(Kt.height-rr.height,Yt.y*Kt.height/100))});return{croppedAreaPercentages:Yt,croppedAreaPixels:sr}}function limitArea(et,dt){return Math.min(et,Math.max(0,dt))}function noOp(et,dt){return dt}function getInitialCropFromCroppedAreaPercentages(et,dt,kt,$t,Tt,Dt){var Ft=rotateSize(dt.width,dt.height,kt),Ut=clamp$5($t.width/Ft.width*(100/et.width),Tt,Dt),Ht={x:Ut*Ft.width/2-$t.width/2-Ft.width*Ut*(et.x/100),y:Ut*Ft.height/2-$t.height/2-Ft.height*Ut*(et.y/100)};return{crop:Ht,zoom:Ut}}function getZoomFromCroppedAreaPixels(et,dt,kt){var $t=getMediaZoom(dt);return kt.height>kt.width?kt.height/(et.height*$t):kt.width/(et.width*$t)}function getInitialCropFromCroppedAreaPixels(et,dt,kt,$t,Tt,Dt){kt===void 0&&(kt=0);var Ft=rotateSize(dt.naturalWidth,dt.naturalHeight,kt),Ut=clamp$5(getZoomFromCroppedAreaPixels(et,dt,$t),Tt,Dt),Ht=$t.height>$t.width?$t.height/et.height:$t.width/et.width,Kt={x:((Ft.width-et.width)/2-et.x)*Ht,y:((Ft.height-et.height)/2-et.y)*Ht};return{crop:Kt,zoom:Ut}}function getCenter(et,dt){return{x:(dt.x+et.x)/2,y:(dt.y+et.y)/2}}function getRadianAngle(et){return et*Math.PI/180}function rotateSize(et,dt,kt){var $t=getRadianAngle(kt);return{width:Math.abs(Math.cos($t)*et)+Math.abs(Math.sin($t)*dt),height:Math.abs(Math.sin($t)*et)+Math.abs(Math.cos($t)*dt)}}function clamp$5(et,dt,kt){return Math.min(Math.max(et,dt),kt)}function classNames(){for(var et=[],dt=0;dt<arguments.length;dt++)et[dt]=arguments[dt];return et.filter(function(kt){return typeof kt=="string"&&kt.length>0}).join(" ").trim()}var css_248z=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,MIN_ZOOM=1,MAX_ZOOM=3,KEYBOARD_STEP=1,Cropper=function(et){__extends(dt,et);function dt(){var kt=et!==null&&et.apply(this,arguments)||this;return kt.cropperRef=reactExports.createRef(),kt.imageRef=reactExports.createRef(),kt.videoRef=reactExports.createRef(),kt.containerPosition={x:0,y:0},kt.containerRef=null,kt.styleRef=null,kt.containerRect=null,kt.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},kt.dragStartPosition={x:0,y:0},kt.dragStartCrop={x:0,y:0},kt.gestureZoomStart=0,kt.gestureRotationStart=0,kt.isTouching=!1,kt.lastPinchDistance=0,kt.lastPinchRotation=0,kt.rafDragTimeout=null,kt.rafPinchTimeout=null,kt.wheelTimer=null,kt.currentDoc=typeof document<"u"?document:null,kt.currentWindow=typeof window<"u"?window:null,kt.resizeObserver=null,kt.previousCropSize=null,kt.isInitialized=!1,kt.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},kt.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!kt.containerRef)){var $t=!0;kt.resizeObserver=new window.ResizeObserver(function(Tt){if($t){$t=!1;return}kt.computeSizes()}),kt.resizeObserver.observe(kt.containerRef)}},kt.preventZoomSafari=function($t){return $t.preventDefault()},kt.cleanEvents=function(){kt.currentDoc&&(kt.currentDoc.removeEventListener("mousemove",kt.onMouseMove),kt.currentDoc.removeEventListener("mouseup",kt.onDragStopped),kt.currentDoc.removeEventListener("touchmove",kt.onTouchMove),kt.currentDoc.removeEventListener("touchend",kt.onDragStopped),kt.currentDoc.removeEventListener("gesturechange",kt.onGestureChange),kt.currentDoc.removeEventListener("gestureend",kt.onGestureEnd),kt.currentDoc.removeEventListener("scroll",kt.onScroll))},kt.clearScrollEvent=function(){kt.containerRef&&kt.containerRef.removeEventListener("wheel",kt.onWheel),kt.wheelTimer&&clearTimeout(kt.wheelTimer)},kt.onMediaLoad=function(){var $t=kt.computeSizes();$t&&(kt.previousCropSize=$t,kt.emitCropData(),kt.setInitialCrop($t),kt.isInitialized=!0),kt.props.onMediaLoaded&&kt.props.onMediaLoaded(kt.mediaSize)},kt.setInitialCrop=function($t){if(kt.props.initialCroppedAreaPercentages){var Tt=getInitialCropFromCroppedAreaPercentages(kt.props.initialCroppedAreaPercentages,kt.mediaSize,kt.props.rotation,$t,kt.props.minZoom,kt.props.maxZoom),Dt=Tt.crop,Ft=Tt.zoom;kt.props.onCropChange(Dt),kt.props.onZoomChange&&kt.props.onZoomChange(Ft)}else if(kt.props.initialCroppedAreaPixels){var Ut=getInitialCropFromCroppedAreaPixels(kt.props.initialCroppedAreaPixels,kt.mediaSize,kt.props.rotation,$t,kt.props.minZoom,kt.props.maxZoom),Dt=Ut.crop,Ft=Ut.zoom;kt.props.onCropChange(Dt),kt.props.onZoomChange&&kt.props.onZoomChange(Ft)}},kt.computeSizes=function(){var $t,Tt,Dt,Ft,Ut,Ht,Kt=kt.imageRef.current||kt.videoRef.current;if(Kt&&kt.containerRef){kt.containerRect=kt.containerRef.getBoundingClientRect(),kt.saveContainerPosition();var Yt=kt.containerRect.width/kt.containerRect.height,Jt=(($t=kt.imageRef.current)===null||$t===void 0?void 0:$t.naturalWidth)||((Tt=kt.videoRef.current)===null||Tt===void 0?void 0:Tt.videoWidth)||0,Zt=((Dt=kt.imageRef.current)===null||Dt===void 0?void 0:Dt.naturalHeight)||((Ft=kt.videoRef.current)===null||Ft===void 0?void 0:Ft.videoHeight)||0,er=Kt.offsetWidth<Jt||Kt.offsetHeight<Zt,rr=Jt/Zt,sr=void 0;if(er)switch(kt.state.mediaObjectFit){default:case"contain":sr=Yt>rr?{width:kt.containerRect.height*rr,height:kt.containerRect.height}:{width:kt.containerRect.width,height:kt.containerRect.width/rr};break;case"horizontal-cover":sr={width:kt.containerRect.width,height:kt.containerRect.width/rr};break;case"vertical-cover":sr={width:kt.containerRect.height*rr,height:kt.containerRect.height};break}else sr={width:Kt.offsetWidth,height:Kt.offsetHeight};kt.mediaSize=__assign(__assign({},sr),{naturalWidth:Jt,naturalHeight:Zt}),kt.props.setMediaSize&&kt.props.setMediaSize(kt.mediaSize);var nr=kt.props.cropSize?kt.props.cropSize:getCropSize(kt.mediaSize.width,kt.mediaSize.height,kt.containerRect.width,kt.containerRect.height,kt.props.aspect,kt.props.rotation);return(((Ut=kt.state.cropSize)===null||Ut===void 0?void 0:Ut.height)!==nr.height||((Ht=kt.state.cropSize)===null||Ht===void 0?void 0:Ht.width)!==nr.width)&&kt.props.onCropSizeChange&&kt.props.onCropSizeChange(nr),kt.setState({cropSize:nr},kt.recomputeCropPosition),kt.props.setCropSize&&kt.props.setCropSize(nr),nr}},kt.saveContainerPosition=function(){if(kt.containerRef){var $t=kt.containerRef.getBoundingClientRect();kt.containerPosition={x:$t.left,y:$t.top}}},kt.onMouseDown=function($t){kt.currentDoc&&($t.preventDefault(),kt.currentDoc.addEventListener("mousemove",kt.onMouseMove),kt.currentDoc.addEventListener("mouseup",kt.onDragStopped),kt.saveContainerPosition(),kt.onDragStart(dt.getMousePoint($t)))},kt.onMouseMove=function($t){return kt.onDrag(dt.getMousePoint($t))},kt.onScroll=function($t){kt.currentDoc&&($t.preventDefault(),kt.saveContainerPosition())},kt.onTouchStart=function($t){kt.currentDoc&&(kt.isTouching=!0,!(kt.props.onTouchRequest&&!kt.props.onTouchRequest($t))&&(kt.currentDoc.addEventListener("touchmove",kt.onTouchMove,{passive:!1}),kt.currentDoc.addEventListener("touchend",kt.onDragStopped),kt.saveContainerPosition(),$t.touches.length===2?kt.onPinchStart($t):$t.touches.length===1&&kt.onDragStart(dt.getTouchPoint($t.touches[0]))))},kt.onTouchMove=function($t){$t.preventDefault(),$t.touches.length===2?kt.onPinchMove($t):$t.touches.length===1&&kt.onDrag(dt.getTouchPoint($t.touches[0]))},kt.onGestureStart=function($t){kt.currentDoc&&($t.preventDefault(),kt.currentDoc.addEventListener("gesturechange",kt.onGestureChange),kt.currentDoc.addEventListener("gestureend",kt.onGestureEnd),kt.gestureZoomStart=kt.props.zoom,kt.gestureRotationStart=kt.props.rotation)},kt.onGestureChange=function($t){if($t.preventDefault(),!kt.isTouching){var Tt=dt.getMousePoint($t),Dt=kt.gestureZoomStart-1+$t.scale;if(kt.setNewZoom(Dt,Tt,{shouldUpdatePosition:!0}),kt.props.onRotationChange){var Ft=kt.gestureRotationStart+$t.rotation;kt.props.onRotationChange(Ft)}}},kt.onGestureEnd=function($t){kt.cleanEvents()},kt.onDragStart=function($t){var Tt,Dt,Ft=$t.x,Ut=$t.y;kt.dragStartPosition={x:Ft,y:Ut},kt.dragStartCrop=__assign({},kt.props.crop),(Dt=(Tt=kt.props).onInteractionStart)===null||Dt===void 0||Dt.call(Tt)},kt.onDrag=function($t){var Tt=$t.x,Dt=$t.y;kt.currentWindow&&(kt.rafDragTimeout&&kt.currentWindow.cancelAnimationFrame(kt.rafDragTimeout),kt.rafDragTimeout=kt.currentWindow.requestAnimationFrame(function(){if(kt.state.cropSize&&!(Tt===void 0||Dt===void 0)){var Ft=Tt-kt.dragStartPosition.x,Ut=Dt-kt.dragStartPosition.y,Ht={x:kt.dragStartCrop.x+Ft,y:kt.dragStartCrop.y+Ut},Kt=kt.props.restrictPosition?restrictPosition(Ht,kt.mediaSize,kt.state.cropSize,kt.props.zoom,kt.props.rotation):Ht;kt.props.onCropChange(Kt)}}))},kt.onDragStopped=function(){var $t,Tt;kt.isTouching=!1,kt.cleanEvents(),kt.emitCropData(),(Tt=($t=kt.props).onInteractionEnd)===null||Tt===void 0||Tt.call($t)},kt.onWheel=function($t){if(kt.currentWindow&&!(kt.props.onWheelRequest&&!kt.props.onWheelRequest($t))){$t.preventDefault();var Tt=dt.getMousePoint($t),Dt=normalizeWheel$1($t).pixelY,Ft=kt.props.zoom-Dt*kt.props.zoomSpeed/200;kt.setNewZoom(Ft,Tt,{shouldUpdatePosition:!0}),kt.state.hasWheelJustStarted||kt.setState({hasWheelJustStarted:!0},function(){var Ut,Ht;return(Ht=(Ut=kt.props).onInteractionStart)===null||Ht===void 0?void 0:Ht.call(Ut)}),kt.wheelTimer&&clearTimeout(kt.wheelTimer),kt.wheelTimer=kt.currentWindow.setTimeout(function(){return kt.setState({hasWheelJustStarted:!1},function(){var Ut,Ht;return(Ht=(Ut=kt.props).onInteractionEnd)===null||Ht===void 0?void 0:Ht.call(Ut)})},250)}},kt.getPointOnContainer=function($t,Tt){var Dt=$t.x,Ft=$t.y;if(!kt.containerRect)throw new Error("The Cropper is not mounted");return{x:kt.containerRect.width/2-(Dt-Tt.x),y:kt.containerRect.height/2-(Ft-Tt.y)}},kt.getPointOnMedia=function($t){var Tt=$t.x,Dt=$t.y,Ft=kt.props,Ut=Ft.crop,Ht=Ft.zoom;return{x:(Tt+Ut.x)/Ht,y:(Dt+Ut.y)/Ht}},kt.setNewZoom=function($t,Tt,Dt){var Ft=Dt===void 0?{}:Dt,Ut=Ft.shouldUpdatePosition,Ht=Ut===void 0?!0:Ut;if(!(!kt.state.cropSize||!kt.props.onZoomChange)){var Kt=clamp$5($t,kt.props.minZoom,kt.props.maxZoom);if(Ht){var Yt=kt.getPointOnContainer(Tt,kt.containerPosition),Jt=kt.getPointOnMedia(Yt),Zt={x:Jt.x*Kt-Yt.x,y:Jt.y*Kt-Yt.y},er=kt.props.restrictPosition?restrictPosition(Zt,kt.mediaSize,kt.state.cropSize,Kt,kt.props.rotation):Zt;kt.props.onCropChange(er)}kt.props.onZoomChange(Kt)}},kt.getCropData=function(){if(!kt.state.cropSize)return null;var $t=kt.props.restrictPosition?restrictPosition(kt.props.crop,kt.mediaSize,kt.state.cropSize,kt.props.zoom,kt.props.rotation):kt.props.crop;return computeCroppedArea($t,kt.mediaSize,kt.state.cropSize,kt.getAspect(),kt.props.zoom,kt.props.rotation,kt.props.restrictPosition)},kt.emitCropData=function(){var $t=kt.getCropData();if($t){var Tt=$t.croppedAreaPercentages,Dt=$t.croppedAreaPixels;kt.props.onCropComplete&&kt.props.onCropComplete(Tt,Dt),kt.props.onCropAreaChange&&kt.props.onCropAreaChange(Tt,Dt)}},kt.emitCropAreaChange=function(){var $t=kt.getCropData();if($t){var Tt=$t.croppedAreaPercentages,Dt=$t.croppedAreaPixels;kt.props.onCropAreaChange&&kt.props.onCropAreaChange(Tt,Dt)}},kt.recomputeCropPosition=function(){var $t,Tt;if(kt.state.cropSize){var Dt=kt.props.crop;if(kt.isInitialized&&(!(($t=kt.previousCropSize)===null||$t===void 0)&&$t.width)&&(!((Tt=kt.previousCropSize)===null||Tt===void 0)&&Tt.height)){var Ft=Math.abs(kt.previousCropSize.width-kt.state.cropSize.width)>1e-6||Math.abs(kt.previousCropSize.height-kt.state.cropSize.height)>1e-6;if(Ft){var Ut=kt.state.cropSize.width/kt.previousCropSize.width,Ht=kt.state.cropSize.height/kt.previousCropSize.height;Dt={x:kt.props.crop.x*Ut,y:kt.props.crop.y*Ht}}}var Kt=kt.props.restrictPosition?restrictPosition(Dt,kt.mediaSize,kt.state.cropSize,kt.props.zoom,kt.props.rotation):Dt;kt.previousCropSize=kt.state.cropSize,kt.props.onCropChange(Kt),kt.emitCropData()}},kt.onKeyDown=function($t){var Tt,Dt,Ft=kt.props,Ut=Ft.crop,Ht=Ft.onCropChange,Kt=Ft.keyboardStep,Yt=Ft.zoom,Jt=Ft.rotation,Zt=Kt;if(kt.state.cropSize){$t.shiftKey&&(Zt*=.2);var er=__assign({},Ut);switch($t.key){case"ArrowUp":er.y-=Zt,$t.preventDefault();break;case"ArrowDown":er.y+=Zt,$t.preventDefault();break;case"ArrowLeft":er.x-=Zt,$t.preventDefault();break;case"ArrowRight":er.x+=Zt,$t.preventDefault();break;default:return}kt.props.restrictPosition&&(er=restrictPosition(er,kt.mediaSize,kt.state.cropSize,Yt,Jt)),$t.repeat||(Dt=(Tt=kt.props).onInteractionStart)===null||Dt===void 0||Dt.call(Tt),Ht(er)}},kt.onKeyUp=function($t){var Tt,Dt;switch($t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":$t.preventDefault();break;default:return}kt.emitCropData(),(Dt=(Tt=kt.props).onInteractionEnd)===null||Dt===void 0||Dt.call(Tt)},kt}return dt.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=css_248z,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},dt.prototype.componentWillUnmount=function(){var kt,$t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(kt=this.resizeObserver)===null||kt===void 0||kt.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(($t=this.styleRef.parentNode)===null||$t===void 0||$t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},dt.prototype.componentDidUpdate=function(kt){var $t,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt;kt.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):kt.aspect!==this.props.aspect?this.computeSizes():kt.objectFit!==this.props.objectFit?this.computeSizes():kt.zoom!==this.props.zoom?this.recomputeCropPosition():(($t=kt.cropSize)===null||$t===void 0?void 0:$t.height)!==((Tt=this.props.cropSize)===null||Tt===void 0?void 0:Tt.height)||((Dt=kt.cropSize)===null||Dt===void 0?void 0:Dt.width)!==((Ft=this.props.cropSize)===null||Ft===void 0?void 0:Ft.width)?this.computeSizes():(((Ut=kt.crop)===null||Ut===void 0?void 0:Ut.x)!==((Ht=this.props.crop)===null||Ht===void 0?void 0:Ht.x)||((Kt=kt.crop)===null||Kt===void 0?void 0:Kt.y)!==((Yt=this.props.crop)===null||Yt===void 0?void 0:Yt.y))&&this.emitCropAreaChange(),kt.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),kt.video!==this.props.video&&((Jt=this.videoRef.current)===null||Jt===void 0||Jt.load());var Zt=this.getObjectFit();Zt!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:Zt},this.computeSizes)},dt.prototype.getAspect=function(){var kt=this.props,$t=kt.cropSize,Tt=kt.aspect;return $t?$t.width/$t.height:Tt},dt.prototype.getObjectFit=function(){var kt,$t,Tt,Dt;if(this.props.objectFit==="cover"){var Ft=this.imageRef.current||this.videoRef.current;if(Ft&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var Ut=this.containerRect.width/this.containerRect.height,Ht=((kt=this.imageRef.current)===null||kt===void 0?void 0:kt.naturalWidth)||(($t=this.videoRef.current)===null||$t===void 0?void 0:$t.videoWidth)||0,Kt=((Tt=this.imageRef.current)===null||Tt===void 0?void 0:Tt.naturalHeight)||((Dt=this.videoRef.current)===null||Dt===void 0?void 0:Dt.videoHeight)||0,Yt=Ht/Kt;return Yt<Ut?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},dt.prototype.onPinchStart=function(kt){var $t=dt.getTouchPoint(kt.touches[0]),Tt=dt.getTouchPoint(kt.touches[1]);this.lastPinchDistance=getDistanceBetweenPoints($t,Tt),this.lastPinchRotation=getRotationBetweenPoints($t,Tt),this.onDragStart(getCenter($t,Tt))},dt.prototype.onPinchMove=function(kt){var $t=this;if(!(!this.currentDoc||!this.currentWindow)){var Tt=dt.getTouchPoint(kt.touches[0]),Dt=dt.getTouchPoint(kt.touches[1]),Ft=getCenter(Tt,Dt);this.onDrag(Ft),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var Ut=getDistanceBetweenPoints(Tt,Dt),Ht=$t.props.zoom*(Ut/$t.lastPinchDistance);$t.setNewZoom(Ht,Ft,{shouldUpdatePosition:!1}),$t.lastPinchDistance=Ut;var Kt=getRotationBetweenPoints(Tt,Dt),Yt=$t.props.rotation+(Kt-$t.lastPinchRotation);$t.props.onRotationChange&&$t.props.onRotationChange(Yt),$t.lastPinchRotation=Kt})}},dt.prototype.render=function(){var kt=this,$t,Tt=this.props,Dt=Tt.image,Ft=Tt.video,Ut=Tt.mediaProps,Ht=Tt.cropperProps,Kt=Tt.transform,Yt=Tt.crop,Jt=Yt.x,Zt=Yt.y,er=Tt.rotation,rr=Tt.zoom,sr=Tt.cropShape,nr=Tt.showGrid,ir=Tt.roundCropAreaPixels,lr=Tt.style,or=lr.containerStyle,cr=lr.cropAreaStyle,dr=lr.mediaStyle,ur=Tt.classes,pr=ur.containerClassName,mr=ur.cropAreaClassName,jr=ur.mediaClassName,Rr=($t=this.state.mediaObjectFit)!==null&&$t!==void 0?$t:this.getObjectFit();return reactExports.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(_r){return kt.containerRef=_r},"data-testid":"container",style:or,className:classNames("reactEasyCrop_Container",pr)},Dt?reactExports.createElement("img",__assign({alt:"",className:classNames("reactEasyCrop_Image",Rr==="contain"&&"reactEasyCrop_Contain",Rr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Rr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",jr)},Ut,{src:Dt,ref:this.imageRef,style:__assign(__assign({},dr),{transform:Kt||"translate(".concat(Jt,"px, ").concat(Zt,"px) rotate(").concat(er,"deg) scale(").concat(rr,")")}),onLoad:this.onMediaLoad})):Ft&&reactExports.createElement("video",__assign({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:classNames("reactEasyCrop_Video",Rr==="contain"&&"reactEasyCrop_Contain",Rr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Rr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",jr)},Ut,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:__assign(__assign({},dr),{transform:Kt||"translate(".concat(Jt,"px, ").concat(Zt,"px) rotate(").concat(er,"deg) scale(").concat(rr,")")}),controls:!1}),(Array.isArray(Ft)?Ft:[{src:Ft}]).map(function(br){return reactExports.createElement("source",__assign({key:br.src},br))})),this.state.cropSize&&reactExports.createElement("div",__assign({ref:this.cropperRef,style:__assign(__assign({},cr),{width:ir?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:ir?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:classNames("reactEasyCrop_CropArea",sr==="round"&&"reactEasyCrop_CropAreaRound",nr&&"reactEasyCrop_CropAreaGrid",mr)},Ht)))},dt.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:MAX_ZOOM,minZoom:MIN_ZOOM,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:KEYBOARD_STEP},dt.getMousePoint=function(kt){return{x:Number(kt.clientX),y:Number(kt.clientY)}},dt.getTouchPoint=function(kt){return{x:Number(kt.clientX),y:Number(kt.clientY)}},dt}(reactExports.Component);function DashboardSettings(){const{user:et,setUser:dt,refreshUser:kt}=useAuth(),$t=useLocation(),Tt=useNavigate(),[Dt,Ft]=reactExports.useState(null),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState((et==null?void 0:et.twofa_enabled)===1),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState(null),[ir,lr]=reactExports.useState(""),[or,cr]=reactExports.useState(!1),[dr,ur]=reactExports.useState(null),[pr,mr]=reactExports.useState({x:0,y:0}),[jr,Rr]=reactExports.useState(1),[br,_r]=reactExports.useState(null),[Mr,Pr]=reactExports.useState(!1);function Or(es){let Xr;if(es instanceof ArrayBuffer)Xr=new Uint8Array(es);else if(ArrayBuffer.isView(es))Xr=new Uint8Array(es.buffer);else throw new Error("Invalid buffer type passed to bufferToBase64URL");let Wr="";for(let cs=0;cs<Xr.length;cs++)Wr+=String.fromCharCode(Xr[cs]);return btoa(Wr).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const kr=async()=>{try{const es=await axiosInstance.post("/auth/user/enable-2fa");rr(es.data.qr),nr(es.data.secret),y$4.info("Scan the QR code with Google Authenticator or Authy.")}catch(es){console.error("2FA setup error:",es),y$4.error("Failed to start 2FA setup.")}},Tr=async()=>{if(!ir.trim())return y$4.warning("Enter the 6-digit code");cr(!0);try{const es=await axiosInstance.post("/auth/user/verify-login-2fa",{token:ir});es.data.success||es.data.verified?(Zt(!0),rr(null),nr(null),lr(""),dt({...et,twofa_enabled:1}),localStorage.setItem("user",JSON.stringify({...et,twofa_enabled:1})),y$4.success(" Two-Factor Authentication enabled!")):y$4.error("Invalid 2FA code. Try again.")}catch(es){console.error("2FA verify error:",es),y$4.error("Invalid or expired code.")}finally{cr(!1)}},xr=async()=>{var es,Xr,Wr,cs;try{let ns=function(As){const _s=new Uint8Array(As);let Ms="";for(let Vs=0;Vs<_s.byteLength;Vs++)Ms+=String.fromCharCode(_s[Vs]);return btoa(Ms).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};const{data:us}=await axiosInstance.post("/auth/webauthn/register-options",{email:et.email}),fs=us.challenge||((es=us.publicKey)==null?void 0:es.challenge);if(!fs)throw new Error("Missing challenge from server response");const ss=Uint8Array.from(atob(fs.replace(/-/g,"+").replace(/_/g,"/")),As=>As.charCodeAt(0)),ps=((Xr=us.user)==null?void 0:Xr.id)||((cs=(Wr=us.publicKey)==null?void 0:Wr.user)==null?void 0:cs.id)||"",ls=Uint8Array.from(ps,As=>As.charCodeAt(0)),js=await navigator.credentials.create({publicKey:{...us,challenge:ss,user:{...us.user,id:ls}}}),$s=ns(js.rawId),Ds={id:$s,rawId:$s,type:js.type,response:{attestationObject:Or(js.response.attestationObject),clientDataJSON:Or(js.response.clientDataJSON)}},{data:Ts}=await axiosInstance.post("/auth/webauthn/register-verify",{email:et.email,attResp:Ds});Ts.success?(y$4.success(" Passkey registered successfully!"),dt({...et,has_passkey:1}),localStorage.setItem("user",JSON.stringify({...et,has_passkey:1}))):y$4.error("Passkey registration failed.")}catch(ns){console.error(" Passkey registration error:",ns),y$4.error("Passkey registration failed. Try again.")}},wr=async()=>{try{(await axiosInstance.post("/auth/webauthn/remove-passkey")).data.success?(y$4.info(" Passkey removed successfully."),dt({...et,has_passkey:0}),localStorage.setItem("user",JSON.stringify({...et,has_passkey:0}))):y$4.warning("Failed to remove passkey. Try again.")}catch(es){console.error(" Passkey removal error:",es),y$4.error("Error removing passkey.")}};function zr(es,Xr,Wr){const cs=es.getImageData(0,0,Xr,Wr).data;for(let ns=3;ns<cs.length;ns+=4)if(cs[ns]<255)return!0;return!1}reactExports.useEffect(()=>{if($t.search.includes("connected=true")){kt(),y$4.success(" Stripe account connected successfully!");const es=new URL(window.location);es.searchParams.delete("connected"),window.history.replaceState({},"",es)}},[$t.search]),reactExports.useEffect(()=>{if(!(et!=null&&et.id))return;(async()=>{try{const Xr=await axiosInstance.get(`/upload-data/user/settings/${et.id}`);Ft(Xr.data.settings)}catch(Xr){console.error("Failed to load settings:",Xr),y$4.error("Failed to load brand settings.")}})()},[et==null?void 0:et.id]);const Hr=async()=>{if(!Ut)return y$4.warning("Crop and select an image first");try{Yt(!0);const es=new FileReader;es.onloadend=async()=>{const Xr=await axiosInstance.post("/upload-data/upload-avatar",{userId:et.id,profileImage:es.result});if(Xr.data.profileImage){const Wr={...et,profile_image:Xr.data.profileImage,profile_image_url:Xr.data.profileImage};dt(Wr),localStorage.setItem("user",JSON.stringify(Wr)),URL.revokeObjectURL(dr),y$4.success("Profile image updated!"),Ht(null)}},es.readAsDataURL(Ut)}catch{y$4.error("Upload failed")}finally{Yt(!1)}},rs=(()=>{const es=[];return et.plan==="business_builder_pack"&&et.billing_type==="monthly"&&et.pro_status==="active"?es.push({title:"Business Builder",planKey:"business_builder_pack_monthly",billing:"monthly",description:"Monthly plan with 15 lead magnet slots and full premium tools.",remainingSlots:et.magnet_slots}):et.plan==="business_builder_pack"&&et.billing_type==="annual"&&et.pro_status==="active"&&es.push({title:"Business Builder",planKey:"business_builder_pack_annual",billing:"annual",description:"Annual plan with 15 lead magnet slots and full premium tools.",remainingSlots:et.magnet_slots}),et.plan==="business_basic_builder"&&et.basic_annual===1&&es.push({title:"Business Basic",planKey:"business_basic_builder",billing:"annual",description:"Annual basic plan with 7 lead magnet slots and core selling tools.",remainingSlots:et.magnet_slots}),!et.plan&&et.has_free_magnet===1&&es.push({title:"Free Trial",planKey:"free",billing:"trial",description:"Your Free Trial includes 1 lead magnet slot and 7 day access.",expires:et.free_trial_expires_at,remainingSlots:et.magnet_slots}),et.has_book===1&&es.push({title:"Authors Assistant",planKey:"assistant",billing:"one_time",description:"Create up to 750 pages with the AI Book Builder.",remainingPages:et.book_slots}),es})(),as=(et==null?void 0:et.pro_status)==="active"&&(et==null?void 0:et.plan)==="business_builder_pack";return jsxRuntimeExports.jsxs("div",{className:`
      flex justify-center w-full min-h-screen
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark
      text-dashboard-text-light
      dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:`
          mb-10 pb-6 border-b
          border-dashboard-border-light
          dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsx("h1",{className:`
            text-3xl font-bold design-text normal-case
            text-dashboard-text-light
            dark:text-dashboard-text-dark
  `,children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:`
            mt-2
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-2xl p-8 mb-10 shadow-lg`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:`text-xl font-semibold text-dashboard-text-light
            dark:text-dashboard-text-dark
`,children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:`text-sm text-dashboard-muted-light
            dark:text-dashboard-muted-dark
`,children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),rs.length>0?jsxRuntimeExports.jsx("div",{className:`grid gap-6 ${rs.length===1?"grid-cols-1 place-items-center":"grid-cols-1 sm:grid-cols-2"}`,children:rs.map((es,Xr)=>{let Wr="Active",cs="text-green bg-green/10";return(es.planKey==="free"||es.billing==="trial")&&(Wr="Free Trial",cs="text-amber-400 bg-amber-500/10"),es.planKey==="business_basic_builder"&&(Wr="Basic",cs="text-emerald-400 bg-emerald-500/10"),es.billing==="trial"&&es.expires&&new Date(es.expires)<new Date&&(Wr="Expired",cs="text-red-400 bg-red-400/10"),jsxRuntimeExports.jsxs("div",{className:`
                    relative flex flex-col justify-between transition-all
                    rounded-xl p-5 border shadow-inner
                    bg-dashboard-sidebar-light
                    dark:bg-dashboard-hover-dark
                    border-dashboard-border-light
                    dark:border-dashboard-border-dark
                    hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]
`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${cs}`,children:Wr}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[es.planKey==="assistant"&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),es.planKey.startsWith("business_builder_pack")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),es.planKey==="business_basic_builder"&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-emerald-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:`text-lg font-semibold text-dashboard-text-light
                        dark:text-dashboard-text-dark
`,children:es.title})]}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                      leading-relaxed`,children:es.description}),jsxRuntimeExports.jsxs("p",{className:`text-xs mt-2 text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
`,children:[es.billing==="monthly"&&"Billed Monthly",es.billing==="annual"&&"Billed Annually",es.billing==="trial"&&`Trial Ends: ${new Date(es.expires).toLocaleDateString()}`,es.billing==="one_time"&&"One-Time Purchase"]}),es.planKey==="free"&&jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/plans",className:`mt-4 px-5 py-2.5 bg-royalPurple 
                      text-dashboard-text-light
                        dark:text-dashboard-text-dark
                        font-semibold rounded-lg shadow-md hover:opacity-90 transition`,children:"Upgrade Plan"})]},Xr)})}):jsxRuntimeExports.jsx("p",{className:`text-dashboard-muted-light
            dark:text-dashboard-muted-dark
              text-sm text-center py-4`,children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Profile Avatar"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[jsxRuntimeExports.jsx(Img,{src:et==null?void 0:et.profile_image,loader:jsxRuntimeExports.jsx("div",{className:`
                  w-20 h-20 rounded-full animate-pulse object-cover
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  transition-opacity duration-300
`}),unloader:jsxRuntimeExports.jsx("img",{src:defaultImage,className:`
                  w-20 h-20 rounded-full object-cover
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
`,alt:"avatar"}),decode:!0,alt:"avatar",className:"w-20 h-20 rounded-full object-cover border border-gray-700 transition-opacity duration-300"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:es=>{const Xr=es.target.files[0];Xr&&ur(URL.createObjectURL(Xr))},className:`w-full text-sm text-dashboard-text-light
              dark:text-dashboard-text-dark file:mr-3 file:py-2 file:px-4 
                   file:rounded-lg file:border-0 file:text-sm file:bg-white 
                   file:font-semibold hover:file:opacity-90`}),dr&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{className:"relative w-full h-[260px] rounded-lg overflow-hidden bg-black/40",children:jsxRuntimeExports.jsx(Cropper,{image:dr,crop:pr,zoom:jr,aspect:1,cropShape:"round",showGrid:!1,onCropChange:mr,onZoomChange:Rr,onCropComplete:(es,Xr)=>_r(Xr)})}),jsxRuntimeExports.jsx("input",{type:"range",min:1,max:3,step:.01,value:jr,onChange:es=>Rr(Number(es.target.value)),className:"w-full mt-4"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{disabled:Kt,className:"px-4 py-2 bg-green text-dashboard-bg-dark rounded font-semibold",onClick:async()=>{if(!br)return;const es=document.createElement("canvas"),Xr=es.getContext("2d"),Wr=new Image;Wr.crossOrigin="anonymous",Wr.src=dr,await new Promise($s=>Wr.onload=$s);const{width:cs,height:ns,x:us,y:fs}=br;es.width=cs,es.height=ns,Xr.clearRect(0,0,cs,ns),Xr.drawImage(Wr,us,fs,cs,ns,0,0,cs,ns);const ss=zr(Xr,cs,ns),ps=ss?"image/png":"image/jpeg",ls=ss?void 0:.9,js=await new Promise($s=>es.toBlob($s,ps,ls));Ht(js),ur(null),mr({x:0,y:0}),Rr(1)},children:"Use Image"}),jsxRuntimeExports.jsx("button",{className:`
                      px-4 py-2 rounded
                      bg-dashboard-hover-light
                      dark:bg-dashboard-hover-dark
                      text-dashboard-text-light
                      dark:text-dashboard-text-dark
`,onClick:()=>{URL.revokeObjectURL(dr),ur(null)},children:"Cancel"})]})]}),jsxRuntimeExports.jsx("button",{onClick:Hr,disabled:Kt,className:`mt-3 px-5 py-2 rounded-lg bg-green text-dashboard-bg-dark font-semibold 
                   hover:opacity-90 disabled:opacity-50 transition`,children:Kt?"Uploading...":"Upload Avatar"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 space-y-4 shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Two-Factor Authentication"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark
`,children:"Add an extra layer of security to your Messy Attic account."}),Jt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:" 2FA is enabled"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                dark:text-dashboard-muted-dark
`,children:"Your account is protected with two-factor authentication."})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{(await axiosInstance.post("/auth/user/disable-2fa")).data.success?(Zt(!1),dt({...et,twofa_enabled:0}),localStorage.setItem("user",JSON.stringify({...et,twofa_enabled:0})),y$4.info("2FA has been disabled.")):y$4.error("Failed to disable 2FA. Try again.")}catch(es){console.error("Disable 2FA error:",es),y$4.error("Server error disabling 2FA.")}},className:`
                px-5 py-2
                bg-red-600 hover:bg-red-700
                text-white
                dark:text-dashboard-text-dark
                rounded-lg font-semibold transition
              `,children:"Disable 2FA"})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:er?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx(_default,{value:er,size:160,bgColor:"#0B0F19",fgColor:"#00ffae"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                    text-center`,children:"Scan this code with your Authenticator app, then enter the 6-digit code below."}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter 6-digit code",value:ir,onChange:es=>lr(es.target.value),className:`w-40 text-center py-2 px-3 rounded-md bg-dashboard-hover-light dark:bg-dashboard-hover-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light
                  dark:text-dashboard-text-dark
                    focus:ring-2 focus:ring-green outline-none placeholder-dashboard-muted-light
  dark:placeholder-dashboard-muted-dark`}),jsxRuntimeExports.jsx("button",{onClick:Tr,disabled:or,className:`px-5 py-2 rounded-lg font-semibold transition-all ${or?"opacity-60 cursor-not-allowed bg-green-700":"bg-green text-dashboard-bg-dark hover:opacity-90"}`,children:or?"Verifying...":"Verify 2FA Code"})]}):jsxRuntimeExports.jsx("button",{onClick:kr,className:"mt-2 px-6 py-2.5 bg-green text-dashboard-bg-dark font-semibold rounded-lg hover:opacity-90 transition",children:"Enable 2FA"})})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 space-y-4  shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Passkey Authentication"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark
`,children:"Securely sign in using Face ID, Touch ID, or your devices security key."}),et!=null&&et.has_passkey?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:" Passkey Registered"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                dark:text-dashboard-muted-dark
`,children:"You can now use Sign in with Passkey on the login screen."})]}),jsxRuntimeExports.jsx("button",{onClick:wr,className:`
                px-5 py-2
                bg-red-600 hover:bg-red-700
                text-white
                rounded-lg font-semibold transition
  `,children:"Remove Passkey"})]}):jsxRuntimeExports.jsx("button",{onClick:xr,className:`px-6 py-2.5 bg-blue text-white
            dark:text-dashboard-text-dark
            font-semibold rounded-lg hover:opacity-90 transition`,children:"Register Passkey"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Seller Payouts (Stripe Connect)"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark mb-4`,children:"Connect Stripe to receive tips and future payouts."}),et!=null&&et.stripe_connected?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:" Connected"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
`,children:"Your Stripe account is active and ready for payouts."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://dashboard.stripe.com/express","_blank"),className:`
                    px-5 py-2
                    bg-blue hover:bg-blue/80
                    text-white
                    rounded-lg font-semibold transition
`,children:"Open Stripe Dashboard"})]}):et!=null&&et.stripe_connect_account_id?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-yellow-400 font-semibold",children:" Pending Setup"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
`,children:"Your Stripe account was created but not completed."})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{const{data:es}=await axiosInstance.post("/seller/create-account-link");es.url&&(window.location.href=es.url)}catch(es){console.error("Stripe connect error:",es),y$4.error("Failed to resume Stripe onboarding. Try again.")}},className:`px-6 py-2.5 bg-amber-500 text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    font-semibold rounded-lg hover:opacity-90 transition`,children:"Complete Setup"})]}):jsxRuntimeExports.jsx("button",{onClick:async es=>{try{const{data:Xr}=await axiosInstance.post("/seller/create-account-link");Xr.url&&(window.location.href=Xr.url)}catch(Xr){console.error("Stripe connect error:",Xr),y$4.error("Failed to start Stripe onboarding. Try again.")}},className:`
                  px-6 py-2.5
                  font-semibold
                  rounded-lg
                  transition
                  bg-royalPurple
                  hover:opacity-90
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                `,children:"Connect with Stripe"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-8 relative overflow-hidden`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Custom Domains"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark mb-4`,children:"Connect your own domain to host landing pages on your brand."}),as?jsxRuntimeExports.jsx("button",{onClick:()=>Tt("/settings/domains"),className:`px-6 py-2.5 bg-royalPurple text-white
            dark:text-dashboard-text-dark
            font-semibold rounded-lg hover:opacity-90 transition`,children:"Manage Custom Domains "}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center text-center px-6",children:[jsxRuntimeExports.jsxs("p",{className:`
                  text-sm mb-4 max-w-[360px]
                  text-dashboard-text-dark
                  dark:text-dashboard-text-dark
  `,children:["available on the"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Business Builder"})," ","plan only."]}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt("/plans"),className:`px-6 py-2.5 bg-royalPurple text-dashboard-text-dark
                  dark:text-dashboard-text-dark
                  font-semibold rounded-lg hover:opacity-90 transition`,children:"Upgrade to Unlock"})]})})]}),jsxRuntimeExports.jsx("div",{className:`
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          rounded-xl p-6 space-y-4 shadow-lg mt-8
  `,children:et!=null&&et.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                rounded-xl p-6 shadow-lg mt-8
`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
                dark:text-dashboard-text-dark
                mb-2`,children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  mb-4`,children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${et==null?void 0:et.accessToken}`}}),y$4.success(" Tour reset! It will replay next time you open Book Builder.")}catch(es){console.error(" Failed to reset onboarding:",es),y$4.error("Could not reset tour. Please try again.")}},className:`
                  px-5 py-2.5 rounded-lg
                  bg-bookBtnColor
                  text-black
                  font-semibold
                  hover:opacity-90
                  transition
                `,children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                rounded-xl p-6 shadow-lg mt-8
`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  mb-2`,children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  mb-4 leading-relaxed`,children:"Need an ISBN for your book? The Messy Attic can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-dashboard-bg-dark font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside The Messy Attic!"),className:"flex-1 bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark font-semibold py-2.5 rounded-lg border border-dashboard-border-light dark:border-dashboard-border-dark hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  italic mt-3`,children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null})]}),jsxRuntimeExports.jsx(UpgradeRequiredModal,{open:Mr,onClose:()=>Pr(!1)})]})}function Inbox(){const[et,dt]=reactExports.useState([]),[kt,$t]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Yt()},[]);async function Yt(){try{const rr=await axiosInstance.get("/messages/user/");dt(rr.data||[])}catch(rr){console.error("Failed to load messages:",rr),y$4.error("Failed to load inbox.")}finally{Dt(!1)}}async function Jt(rr){if($t(rr),!rr.read_status)try{Ut(!0),await axiosInstance.post(`/messages/user/${rr.id}/read`),dt(sr=>sr.map(nr=>nr.id===rr.id?{...nr,read_status:1}:nr))}catch(sr){console.error("Failed to mark message as read:",sr)}finally{Ut(!1)}}async function Zt(rr){y$4.dismiss(),y$4(({closeToast:sr})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{Kt(!0),await axiosInstance.delete(`/messages/user/user/${rr}`),dt(nr=>nr.filter(ir=>ir.id!==rr)),$t(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(nr){console.error("Failed to delete message:",nr),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{Kt(!1),sr()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:sr,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function er(){$t(null)}return jsxRuntimeExports.jsxs("div",{className:`
      w-full min-h-screen flex flex-col lg:flex-row
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark
      text-dashboard-text-light
      dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
        flex-1 lg:max-w-[380px] h-screen overflow-y-auto p-6
        border-r border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
          border-b pb-4 mb-6 flex items-center justify-between
          border-dashboard-border-light
          dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text normal-case",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:`
          text-dashboard-muted-light
          dark:text-green
  `})]}),Tt?jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"Loading messages..."}):et.length===0?jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:et.map(rr=>jsxRuntimeExports.jsxs("li",{onClick:()=>Jt(rr),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${rr.id===(kt==null?void 0:kt.id)?`
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              border-dashboard-border-light
              dark:border-dashboard-border-dark
            `:rr.read_status?`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border-dashboard-border-light
                dark:border-dashboard-border-dark
              `:`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border-green
              `}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${rr.read_status?"text-dashboard-muted-light dark:text-dashboard-muted-dark":"text-dashboard-text-light dark:text-dashboard-text-dark"}`,children:rr.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:new Date(rr.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${rr.read_status?"text-dashboard-muted-light dark:text-dashboard-muted-dark":"text-dashboard-text-light dark:text-dashboard-text-dark"}`,children:rr.message}),!rr.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},rr.id))})]}),jsxRuntimeExports.jsx("div",{className:`
        flex-1 p-6 overflow-y-auto h-screen
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
  `,children:kt?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:er,className:`
                flex items-center gap-2 text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                hover:text-dashboard-text-light
                dark:hover:text-dashboard-text-dark
`,children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:`
              rounded-2xl p-6 shadow-lg
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
                flex flex-col sm:flex-row sm:items-center sm:justify-between
                border-b border-dashboard-border-light
                dark:border-dashboard-border-dark
                pb-4 mb-4`,children:[jsxRuntimeExports.jsx("h2",{className:`text-2xl font-bold leading-tight
                text-dashboard-text-light
                dark:text-dashboard-text-dark
`,children:kt.title}),jsxRuntimeExports.jsxs("div",{className:`
                  flex items-center gap-2 text-sm mt-2 sm:mt-0
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
  `,children:[jsxRuntimeExports.jsx(Calendar,{size:14,className:"opacity-75 relative top-[1px]"}),new Date(kt.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:`
                text-sm leading-relaxed whitespace-pre-line
                text-dashboard-text-light
                dark:text-dashboard-text-dark
  `,children:kt.message}),jsxRuntimeExports.jsxs("div",{className:`
                mt-6 pt-4 flex items-center justify-between text-xs
                border-t border-dashboard-border-light
                dark:border-dashboard-border-dark
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
  `,children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Zt(kt.id),disabled:Ht,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${Ht?"bg-red-900 text-dashboard-muted-dark opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),Ht?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:`
            flex flex-col items-center justify-center h-full text-center
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:[jsxRuntimeExports.jsx(Mail,{size:40,className:`
              mb-4
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
  `}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}function useMaintenance(){const[et,dt]=reactExports.useState(!1),[kt,$t]=reactExports.useState(!0);return reactExports.useEffect(()=>{async function Tt(){try{const{data:Dt}=await axiosInstance.get("/admin/settings/maintenance");dt(Dt.maintenance)}catch{dt(!1)}finally{$t(!1)}}Tt()},[]),{maintenance:et,loading:kt}}function MaintenanceScreen(){return jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0f0f10] text-white text-center px-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:" Down for Maintenance"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-400 max-w-md mb-8",children:["The Messy Attic is"," ",jsxRuntimeExports.jsx("span",{className:"text-yellow",children:"temporarily offline"})," while we make improvements.",jsxRuntimeExports.jsx("br",{}),"Well be back shortly, thank you for your patience."]}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 bg-green hover:bg-emerald-600 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:"Return Home"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-sm text-gray-600",children:jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," The Messy Attic"]})})]})}function adjustForLandingOverlay(et,dt="rgba(255,255,255,0.04)"){if(!et)return"#000";if(et.includes("linear-gradient"))return et;const kt=et.replace("#","");if(kt.length!==6)return et;const $t=parseInt(kt.substring(0,2),16),Tt=parseInt(kt.substring(2,4),16),Dt=parseInt(kt.substring(4,6),16),Ft=dt.match(/rgba?\(([^)]+)\)/);if(!Ft)return et;const[Ut,Ht,Kt,Yt=1]=Ft[1].split(",").map(sr=>parseFloat(sr.trim())),Jt=Yt||.04,Zt=Math.round(Ut*Jt+$t*(1-Jt)),er=Math.round(Ht*Jt+Tt*(1-Jt)),rr=Math.round(Kt*Jt+Dt*(1-Jt));return`rgb(${Zt}, ${er}, ${rr})`}function HeadingBlock({block:et,index:dt,updateBlock:kt,openAIModal:$t,updateChildBlock:Tt,containerIndex:Dt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"font-semibold text-sm mb-1",children:et.type==="heading"?"Heading (H1)":et.type==="subheading"?"Subheading (H2)":"Sub-Subheading (H3)"}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t({blockType:et.type,blockIndex:dt,containerIndex:Dt,updateChildBlock:Tt,currentText:et.text,role:et.aiRole||"body"}),onPointerDown:Ft=>Ft.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Use AI to write or improve this copy",children:"AI"})}),jsxRuntimeExports.jsx("textarea",{rows:2,placeholder:et.type==="heading"?"Enter your main headline":et.type==="subheading"?"Enter your subheading":"Enter your supporting header",value:et.text,onChange:Ft=>{const Ut=Ft.target.value;Ft.target.style.height="auto",Ft.target.style.height=`${Ft.target.scrollHeight}px`,Tt?Tt(dt,"text",Ut):kt(dt,"text",Ut)},onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),onKeyDown:Ft=>Ft.stopPropagation(),className:`w-full mt-1 p-2 border border-gray-600 rounded-lg bg-black text-white 
                   focus:ring-2 focus:ring-green focus:border-gray-400 
                   placeholder-gray-400 leading-snug resize-none transition-all duration-200`,style:{minHeight:"3.5rem",lineHeight:"1.4"}}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-3",children:["left","center","right"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:Ut=>{Ut.stopPropagation(),kt(dt,"alignment",Ft)},className:`px-3 py-1 text-xs rounded border transition-all
              ${et.alignment===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
            `,children:Ft.charAt(0).toUpperCase()+Ft.slice(1)},Ft))})]})}function ListHeadingBlock({block:et,index:dt,updateBlock:kt,updateChildBlock:$t,openAIModal:Tt,containerIndex:Dt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"font-semibold text-sm mb-1",children:"List Heading (bold line above bullet list)"}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tt({blockType:"list_heading",blockIndex:dt,updateChildBlock:$t,containerIndex:Dt,currentText:et.text,role:et.aiRole||"body"}),onPointerDown:Ft=>Ft.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Use AI to write or improve this copy",children:"AI"})}),jsxRuntimeExports.jsx("textarea",{rows:2,placeholder:"e.g. LABEL FOR YOUR BULLETED LISTS",value:et.text,onChange:Ft=>{Ft.target.style.height="auto",Ft.target.style.height=`${Ft.target.scrollHeight}px`,kt(dt,"text",Ft.target.value)},onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),onKeyDown:Ft=>Ft.stopPropagation(),className:`w-full mt-1 p-2 border border-gray-600 rounded-lg bg-black text-white 
                   focus:ring-2 focus:ring-green focus:border-gray-400 
                   placeholder-gray-400 leading-snug resize-none transition-all duration-200`,style:{minHeight:"3.5rem",lineHeight:"1.4"}}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-3",children:["left","center","right"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:Ut=>{Ut.stopPropagation(),kt(dt,"alignment",Ft)},className:`px-3 py-1 text-xs rounded border transition-all
              ${et.alignment===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
            `,children:Ft.charAt(0).toUpperCase()+Ft.slice(1)},Ft))})]})}function ParagraphBlock({block:et,index:dt,updateBlock:kt,updateChildBlock:$t,openAIModal:Tt,containerIndex:Dt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-1",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Paragraph"})}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tt({blockType:"paragraph",blockIndex:dt,updateChildBlock:$t,containerIndex:Dt,currentText:et.text,role:et.aiRole||"body"}),onPointerDown:Ft=>Ft.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Use AI to write or improve this copy",children:"AI"})}),jsxRuntimeExports.jsx("textarea",{value:et.text,onChange:Ft=>kt(dt,"text",Ft.target.value),onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),onKeyDown:Ft=>Ft.stopPropagation(),className:"w-full mt-1 p-2 border rounded h-24 bg-black text-white border-gray-600",placeholder:et.bulleted?"Enter list items, one per line":"Enter your paragraph text"}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[jsxRuntimeExports.jsxs("select",{value:et.alignment||"left",onChange:Ft=>kt(dt,"alignment",Ft.target.value),onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),className:`appearance-none bg-black text-white border border-gray-600 rounded-md px-3 py-2 pr-8 
                     text-sm focus:ring-2 focus:ring-silver focus:outline-none cursor-pointer w-fit`,children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-400",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.bulleted||!1,onChange:Ft=>kt(dt,"bulleted",Ft.target.checked),onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),className:"w-4 h-4 accent-green-500"}),"Bullet List"]})]})]})}function normalizeVideoUrl(et){if(!et)return"";const dt=et.trim();return dt.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${dt.split("watch?v=")[1].split(/[?&]/)[0]}?rel=0&modestbranding=1`:dt.includes("youtube.com/shorts/")?`https://www.youtube.com/embed/${dt.split("shorts/")[1].split(/[?&]/)[0]}?rel=0&modestbranding=1`:dt.includes("youtu.be/")?`https://www.youtube.com/embed/${dt.split("youtu.be/")[1].split(/[?&]/)[0]}?rel=0&modestbranding=1`:dt.includes("vimeo.com")&&!dt.includes("player.vimeo.com")?`https://player.vimeo.com/video/${dt.split("vimeo.com/")[1].split(/[?&]/)[0]}`:dt}function VideoBlock({block:et,index:dt,updateBlock:kt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-1",children:"Video URL (YouTube or Vimeo)"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://www.youtube.com/watch?v=xxxx",value:et.url||"",onChange:$t=>kt(dt,"url",$t.target.value),className:"w-full mb-3 p-2 rounded-md bg-[#0F172A] border border-gray-700 text-gray-100"}),jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-1",children:"Caption (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter caption text",value:et.caption||"",onChange:$t=>kt(dt,"caption",$t.target.value),className:"w-full mb-4 p-2 rounded-md bg-[#0F172A] border border-gray-700 text-gray-100"}),et.url&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("iframe",{src:normalizeVideoUrl(et.url),title:"Video Preview",className:"w-full aspect-video rounded-lg border border-gray-700 shadow-md",allow:"autoplay; fullscreen"})})]})}function DividerBlock({block:et,index:dt,updateBlock:kt}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[jsxRuntimeExports.jsx("label",{children:"Height (px)"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.height||40,onChange:$t=>kt(dt,"height",parseInt($t.target.value)),className:"w-24 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-white"}),jsxRuntimeExports.jsx("label",{children:"Line Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.color||"#FFFFFF",onChange:$t=>kt(dt,"color",$t.target.value)}),jsxRuntimeExports.jsx("label",{children:"Style"}),jsxRuntimeExports.jsxs("select",{value:et.style||"line",onChange:$t=>kt(dt,"style",$t.target.value),className:"bg-gray-800 border border-gray-600 rounded px-2 py-1 text-white",children:[jsxRuntimeExports.jsx("option",{value:"line",children:"Line Divider"}),jsxRuntimeExports.jsx("option",{value:"space",children:"Spacer Only"})]})]})}const getLabelContrast=et=>{if(!et)return"#1f2937";const dt=et.replace("#",""),kt=parseInt(dt.substring(0,2),16),$t=parseInt(dt.substring(2,4),16),Tt=parseInt(dt.substring(4,6),16);return(kt*299+$t*587+Tt*114)/1e3>160?"#1f2937":"#f3f4f6"};function OfferBannerBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t}){return jsxRuntimeExports.jsx("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 bg-[#0b0f19]",children:jsxRuntimeExports.jsxs("div",{className:"rounded-lg p-6 mb-8",style:{background:$t,outline:"1px dashed rgba(255,255,255,0.15)"},children:[jsxRuntimeExports.jsxs("div",{className:"mt-20 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold mb-4",style:{color:et.text_color||"#000000"},children:et.text||" Limited Time Offer! Get your free eBook today!"}),et.button_text&&jsxRuntimeExports.jsx("button",{className:"inline-block px-6 py-3 rounded-lg font-semibold shadow-lg transition-transform transform hover:scale-105",style:{background:et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.bg_color||"#F285C3",color:et.button_text_color||et.text_color||"#ffffff",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:et.button_text})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||$t)},children:"Banner Message"}),jsxRuntimeExports.jsx("textarea",{placeholder:" Limited Time Offer! Get your free eBook today!",value:et.text||"",onChange:Tt=>kt(dt,"text",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1 resize-none h-20"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||$t)},children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:Tt=>kt(dt,"text_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer color-circle"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color||"#ffffff"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||$t)},children:"Use Gradient Button"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Tt=>kt(dt,"use_gradient",Tt.target.checked)})]}),et.use_gradient?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-400",children:"Start Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:Tt=>kt(dt,"gradient_start",Tt.target.value),className:"w-full h-10 rounded cursor-pointer color-circle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-400",children:"End Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:Tt=>kt(dt,"gradient_end",Tt.target.value),className:"w-full h-10 rounded cursor-pointer color-circle"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-400",children:"Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Tt=>kt(dt,"gradient_direction",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold mt-3",style:{color:getLabelContrast(et.bg_color||$t)},children:"Solid Button Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#F285C3",onChange:Tt=>kt(dt,"bg_color",Tt.target.value),className:"color-circle"}),jsxRuntimeExports.jsx("div",{className:"w-24",children:jsxRuntimeExports.jsx("input",{type:"text",value:(et.bg_color||"#F285C3").toUpperCase(),onChange:Tt=>{const Dt=Tt.target.value.toUpperCase();kt(dt,"bg_color",Dt)},className:"w-full text-xs bg-black border border-gray-700 rounded px-2 py-1 text-gray-300",placeholder:"#F285C3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||$t)},children:"Button Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_text_color||"#ffffff",onChange:Tt=>kt(dt,"button_text_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer color-circle"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_text_color})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Claim Offer",value:et.button_text||"",onChange:Tt=>kt(dt,"button_text",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"mt-5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||$t)},children:"Offer Type"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsxs("select",{value:et.offer_type||"free",onChange:Tt=>kt(dt,"offer_type",Tt.target.value),className:"w-full p-2 pr-10 border border-gray-600 rounded bg-black text-white appearance-none",children:[jsxRuntimeExports.jsx("option",{value:"free",children:"Email Download"}),jsxRuntimeExports.jsx("option",{value:"paid",children:"Stripe Checkout"})]}),jsxRuntimeExports.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-300",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-4 h-4",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]})]})]})})}function CalendlyBlock({block:et,index:dt,updateBlock:kt}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 shadow-inner bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Calendly URL"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://calendly.com/yourname/meeting",value:et.calendly_url||"",onChange:$t=>kt(dt,"calendly_url",$t.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4",children:"Section Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Book a Call",value:et.title||"",onChange:$t=>kt(dt,"title",$t.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Title Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.title_color||"#FFFFFF",onChange:$t=>kt(dt,"title_color",$t.target.value),className:"w-10 h-10 rounded cursor-pointer color-circle"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.title_color||"#FFFFFF"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4",children:"Embed Height (px)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"400",max:"1200",step:"10",placeholder:"700",value:et.height||700,onChange:$t=>kt(dt,"height",parseInt($t.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"})]})}function SocialLinksBlock({block:et,index:dt,updateBlock:kt}){const $t=!!et.show_borders,Tt=["instagram","threads","twitter","youtube","linkedin","facebook","tiktok","pinterest","substack"],Dt={instagram:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg",threads:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/threads.svg",twitter:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg",youtube:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg",linkedin:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg",facebook:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg",tiktok:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg",pinterest:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/pinterest.svg",substack:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/substack.svg"};return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#1f2937] border border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Social Links Row"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Tt.map(Ft=>{var Ut;return jsxRuntimeExports.jsx("input",{type:"url",placeholder:`${Ft.charAt(0).toUpperCase()+Ft.slice(1)} URL`,value:((Ut=et.links)==null?void 0:Ut[Ft])||"",onChange:Ht=>kt(dt,"links",{...et.links,[Ft]:Ht.target.value}),className:"w-full p-2 rounded bg-black text-white text-sm border border-gray-700 placeholder-gray-400"},Ft)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:Ft=>kt(dt,"alignment",Ft.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Icon Style"}),jsxRuntimeExports.jsxs("select",{value:et.icon_style||"color",onChange:Ft=>{const Ut=Ft.target.value;kt(dt,"icon_style",Ut),Ut!=="mono"&&kt(dt,"show_borders",!1)},className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"color",children:"Full Color"}),jsxRuntimeExports.jsx("option",{value:"mono",children:"Monochrome"})]})]}),et.icon_style==="mono"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Icon Borders"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(dt,"show_borders",!$t),className:`px-4 py-2 rounded-md text-sm border transition
        ${$t?"bg-white text-black border-white":"bg-black text-white border-gray-700"}`,children:$t?"On":"Off"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 w-32",children:"Icon Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.icon_color||"#ffffff",onChange:Ft=>kt(dt,"icon_color",Ft.target.value),className:"w-10 h-10 rounded border border-gray-600 cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.icon_color||"#ffffff",onChange:Ft=>{const Ut=Ft.target.value;/^#([0-9A-Fa-f]{0,6})$/.test(Ut)&&kt(dt,"icon_color",Ut)},placeholder:"#ffffff",className:"w-24 p-2 rounded bg-black text-white text-sm border border-gray-700 placeholder-gray-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 mb-2 tracking-wide",children:"Live Preview"}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-white/10 bg-black/20 px-6 py-5",children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4 flex-wrap",style:{justifyContent:et.alignment==="center"?"center":et.alignment==="right"?"flex-end":"flex-start"},children:Object.entries(et.links||{}).filter(([Ft,Ut])=>Ut).map(([Ft],Ut)=>{const Ht=et.icon_style==="mono"?"rgba(255,255,255,0.75)":et.icon_color||"#ffffff";return jsxRuntimeExports.jsx("div",{title:Ft,className:"flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-110 hover:opacity-90 hover:shadow-[0_0_12px_rgba(255,255,255,0.35)]",style:{width:$t?34:26,height:$t?34:26,borderRadius:$t?10:0,border:$t?`1.25px solid ${Ht}`:"none"},children:jsxRuntimeExports.jsx("div",{style:{width:20,height:20,WebkitMask:`url(${Dt[Ft]}) no-repeat center / contain`,mask:`url(${Dt[Ft]}) no-repeat center / contain`,backgroundColor:Ht}})},Ft)})})})]})]})}function VerifiedReviewsBlock({block:et,index:dt,updateBlock:kt}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Verified Reviews"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Show Reviews Section"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.enabled!==!1,onChange:$t=>kt(dt,"enabled",$t.target.checked)})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded bg-black/40 text-xs text-gray-400",children:"This section automatically displays verified customer reviews. Styling and layout are managed by the system. This will not show in preview panel."}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Reviews Text Color",jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-gray-400 mt-1",children:"Used only for the reviews section on the live page"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.reviews_text_color||"#000000",onChange:$t=>kt(dt,"reviews_text_color",$t.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.reviews_text_color||"",onChange:$t=>{const Tt=$t.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Tt)&&kt(dt,"reviews_text_color",Tt.startsWith("#")?Tt:`#${Tt}`)},placeholder:"#000000",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]})]})]})}function CountdownTimerPreview({targetDate:et,variant:dt="minimal",bgTheme:kt,glowColor:$t,textColor:Tt}){const[Dt,Ft]=reactExports.useState("");reactExports.useEffect(()=>{if(!et)return;const er=setInterval(()=>{const rr=new Date,nr=new Date(et)-rr;if(nr<=0){Ft("00:00:00:00"),clearInterval(er);return}const ir=Math.floor(nr/(1e3*60*60*24)),lr=Math.floor(nr/(1e3*60*60)%24),or=Math.floor(nr/(1e3*60)%60),cr=Math.floor(nr/1e3%60);Ft(`${String(ir).padStart(2,"0")}:${String(lr).padStart(2,"0")}:${String(or).padStart(2,"0")}:${String(cr).padStart(2,"0")}`)},1e3);return()=>clearInterval(er)},[et]);const Ht=(()=>!kt||kt.includes("emerald")?"#10b981":kt.includes("royal")||kt.includes("purple")?"#8b5cf6":kt.includes("pink")||kt.includes("rose")?"#ec4899":kt.includes("yellow")||kt.includes("amber")?"#facc15":kt.includes("blue")?"#3b82f6":kt.includes("red")?"#ef4444":"#10b981")(),Kt=Tt,Yt=$t||Ht,Jt="font-mono tracking-widest transition-all duration-500 inline-block",Zt={minimal:"text-3xl",boxed:"text-3xl bg-[#0f172a] border border-gray-700 px-6 py-3 rounded-lg shadow-md",glow:"text-3xl animate-pulse"};return jsxRuntimeExports.jsx("div",{className:`${Jt} ${Zt[dt]||Zt.minimal}`,style:{color:Kt,...dt==="glow"?{textShadow:`
          0 0 6px ${Yt},
          0 0 14px ${Yt},
          0 0 28px ${Yt}
        `}:{}},children:Dt||"00:00:00:00"})}function CountdownBlock({block:et,index:dt,updateBlock:kt}){const $t={minimal:"border-gray-700 bg-transparent",boxed:"bg-black/60 border border-gray-600 shadow-md",glow:"bg-black/70 border border-green/50 shadow-[0_0_20px_rgba(34,197,94,0.35)]"};return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Countdown Timer Settings"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Headline Text"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Offer Ends In:",value:et.text||"",onChange:Tt=>kt(dt,"text",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#FFFFFF",onChange:Tt=>kt(dt,"text_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color||"",onChange:Tt=>{const Dt=Tt.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Dt)&&kt(dt,"text_color",Dt.startsWith("#")?Dt:`#${Dt}`)},placeholder:"#ffffff",className:"w-24 flex-none px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),et.style_variant==="glow"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Glow Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.glow_color||"#10b981",onChange:Tt=>kt(dt,"glow_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.glow_color||"",onChange:Tt=>{const Dt=Tt.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Dt)&&kt(dt,"glow_color",Dt.startsWith("#")?Dt:`#${Dt}`)},placeholder:"#10b981",className:"w-24 flex-none px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Target Date & Time"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:et.target_date?new Date(et.target_date).toISOString().slice(0,16):"",onChange:Tt=>{const Dt=new Date(Tt.target.value).toISOString();kt(dt,"target_date",Dt)},onFocus:Tt=>Tt.stopPropagation(),onPointerDown:Tt=>Tt.stopPropagation(),onClick:Tt=>{var Dt,Ft;Tt.stopPropagation(),(Ft=(Dt=Tt.currentTarget).showPicker)==null||Ft.call(Dt)},className:"w-full mt-1 p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:Tt=>kt(dt,"alignment",Tt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Style"}),jsxRuntimeExports.jsxs("select",{value:et.style_variant||"minimal",onChange:Tt=>kt(dt,"style_variant",Tt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"minimal",children:"Minimal"}),jsxRuntimeExports.jsx("option",{value:"boxed",children:"Boxed"}),jsxRuntimeExports.jsx("option",{value:"glow",children:"Neon Glow"})]})]}),jsxRuntimeExports.jsxs("div",{className:`
    mt-6
    p-4
    rounded-lg
    text-center
    transition-all
    duration-300
    ${$t[et.style_variant||"minimal"]}
  `,style:{color:et.text_color||"#FFFFFF"},children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-2",children:et.text}),jsxRuntimeExports.jsx(CountdownTimerPreview,{targetDate:et.target_date,variant:et.style_variant,textColor:et.text_color||"#FFFFFF",glowColor:et.glow_color})]})]})}function StripeCheckoutBlock({block:et,index:dt,updateBlock:kt,pdfList:$t,bgTheme:Tt,landing:Dt}){const[Ft,Ut]=reactExports.useState(!1),Ht=et.product_source||"internal",Kt=!!et.pdf_url||!!et.external_file_url;return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Stripe Checkout Button"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 mb-12 p-6 text-center border border-gray-700 rounded-lg",style:{textAlign:et.alignment,background:et.match_main_bg?adjustForLandingOverlay(Tt):Tt||"#0F172A"},children:[jsxRuntimeExports.jsx("button",{disabled:!Kt,style:{pointerEvents:Kt?"auto":"none",background:et.button_color||"#10b981",color:et.text_color||"#000000"},className:`px-6 py-3 rounded-lg font-semibold shadow-lg transition-transform
    ${Kt?"hover:scale-105":"opacity-50 cursor-not-allowed"}
  `,children:et.button_text||"Buy & Download Book"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2",children:Kt?`$${Number(et.price)>0?Number(et.price).toFixed(2):"10.00"}`:"Select a product to enable checkout"})]}),et.external_file_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Uploaded File:",jsxRuntimeExports.jsx("a",{href:et.external_file_url,target:"_blank",rel:"noopener noreferrer",className:"text-green underline ml-1",children:"Preview File"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Product Source"}),jsxRuntimeExports.jsxs("select",{value:Ht,onChange:Yt=>{const Jt=Yt.target.value;kt(dt,"product_source",Jt),Jt==="internal"&&(kt(dt,"external_file_url",""),kt(dt,"external_file_name","")),Jt==="external"&&kt(dt,"pdf_url","")},className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select product source"}),jsxRuntimeExports.jsx("option",{value:"internal",children:"The Messy Attic Product"}),jsxRuntimeExports.jsx("option",{value:"external",children:"Upload Existing Product"})]}),et.product_source==="internal"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Select Book to Sell"}),jsxRuntimeExports.jsxs("select",{value:et.pdf_url||"",onChange:Yt=>kt(dt,"pdf_url",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Select a Completed Book --"}),$t==null?void 0:$t.filter(Yt=>Yt.status==="completed"&&Yt.pdf_url).map(Yt=>jsxRuntimeExports.jsxs("option",{value:Yt.pdf_url,children:[Yt.title||"Untitled Book","  (Ready)"]},Yt.id))]})]}),et.product_source==="external"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4",children:"Upload Your Product"}),jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.zip",onChange:async Yt=>{var Zt,er,rr,sr;const Jt=(Zt=Yt.target.files)==null?void 0:Zt[0];if(Jt&&!Ft){Ut(!0);try{if(!["application/pdf","application/zip"].includes(Jt.type)){alert("Only Book or ZIP files are allowed");return}const nr=new FormData;nr.append("file",Jt),nr.append("landingId",Dt.id),nr.append("blockId",et.id);const lr=(await axiosInstance.post("/landing/upload-product",nr,{headers:{"Content-Type":"multipart/form-data"}})).data;if(!(lr!=null&&lr.success)){console.error(" Upload failed:",lr),alert((lr==null?void 0:lr.message)||"Upload failed");return}kt(dt,"product_source","external"),kt(dt,"external_file_url",lr.url),kt(dt,"external_file_name",lr.file_name||Jt.name),Yt.target.value=""}catch(nr){console.error(" Upload error:",((er=nr.response)==null?void 0:er.data)||nr.message),alert(((sr=(rr=nr.response)==null?void 0:rr.data)==null?void 0:sr.message)||"Upload failed")}finally{Ut(!1)}}},disabled:Ft,className:`w-full p-2 bg-black border border-gray-700 rounded text-white
    ${Ft?"opacity-50 cursor-not-allowed":""}
  `}),et.external_file_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green mt-2",children:["Uploaded: ",et.external_file_name]})]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Selected File:",jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-green underline ml-1",children:"Preview Book"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buy & Download Book",value:et.button_text||"",onChange:Yt=>kt(dt,"button_text",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Price (USD)"}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"decimal",value:et.price??"",onChange:Yt=>kt(dt,"price",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-8 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Background"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_color||"#10b981",onChange:Yt=>kt(dt,"button_color",Yt.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter hex",value:et.button_color||"",onChange:Yt=>kt(dt,"button_color",Yt.target.value),className:"flex-1 p-2 rounded bg-black text-white border border-gray-700 text-sm"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_color})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3 sm:mt-0",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:Yt=>kt(dt,"text_color",Yt.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter hex",value:et.text_color||"",onChange:Yt=>kt(dt,"text_color",Yt.target.value),className:"flex-1 p-2 rounded bg-black text-white border border-gray-700 text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:Yt=>kt(dt,"alignment",Yt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]})]})}function ReferralButtonBlock({block:et,index:dt,updateBlock:kt}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Referral Signup Button"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Sign Up Now",value:et.button_text||"",onChange:$t=>{const Tt=$t.target.value;kt(dt,"button_text",Tt),kt(dt,"text",Tt)},className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-8 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Background"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_color||"#10b981",onChange:$t=>kt(dt,"button_color",$t.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_color||"#10b981"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3 sm:mt-0",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:$t=>kt(dt,"text_color",$t.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color||"#000000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:$t=>kt(dt,"alignment",$t.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-6 text-center border border-gray-700 rounded-lg",style:{textAlign:et.alignment},children:[jsxRuntimeExports.jsx("button",{className:"px-6 py-3 rounded-lg font-semibold shadow-lg transition-transform hover:scale-105",style:{background:et.button_color||"#10b981",color:et.text_color||"#000000"},children:et.button_text||"Sign Up Now"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 italic",children:"This button will automatically track new signups under your referral."})]})]})}function useCombinedRefs(){for(var et=arguments.length,dt=new Array(et),kt=0;kt<et;kt++)dt[kt]=arguments[kt];return reactExports.useMemo(()=>$t=>{dt.forEach(Tt=>Tt($t))},dt)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(et){const dt=Object.prototype.toString.call(et);return dt==="[object Window]"||dt==="[object global]"}function isNode(et){return"nodeType"in et}function getWindow(et){var dt,kt;return et?isWindow(et)?et:isNode(et)&&(dt=(kt=et.ownerDocument)==null?void 0:kt.defaultView)!=null?dt:window:window}function isDocument(et){const{Document:dt}=getWindow(et);return et instanceof dt}function isHTMLElement(et){return isWindow(et)?!1:et instanceof getWindow(et).HTMLElement}function isSVGElement(et){return et instanceof getWindow(et).SVGElement}function getOwnerDocument(et){return et?isWindow(et)?et.document:isNode(et)?isDocument(et)?et:isHTMLElement(et)||isSVGElement(et)?et.ownerDocument:document:document:document}const useIsomorphicLayoutEffect$6=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(et){const dt=reactExports.useRef(et);return useIsomorphicLayoutEffect$6(()=>{dt.current=et}),reactExports.useCallback(function(){for(var kt=arguments.length,$t=new Array(kt),Tt=0;Tt<kt;Tt++)$t[Tt]=arguments[Tt];return dt.current==null?void 0:dt.current(...$t)},[])}function useInterval(){const et=reactExports.useRef(null),dt=reactExports.useCallback(($t,Tt)=>{et.current=setInterval($t,Tt)},[]),kt=reactExports.useCallback(()=>{et.current!==null&&(clearInterval(et.current),et.current=null)},[]);return[dt,kt]}function useLatestValue(et,dt){dt===void 0&&(dt=[et]);const kt=reactExports.useRef(et);return useIsomorphicLayoutEffect$6(()=>{kt.current!==et&&(kt.current=et)},dt),kt}function useLazyMemo(et,dt){const kt=reactExports.useRef();return reactExports.useMemo(()=>{const $t=et(kt.current);return kt.current=$t,$t},[...dt])}function useNodeRef(et){const dt=useEvent(et),kt=reactExports.useRef(null),$t=reactExports.useCallback(Tt=>{Tt!==kt.current&&(dt==null||dt(Tt,kt.current)),kt.current=Tt},[]);return[kt,$t]}function usePrevious(et){const dt=reactExports.useRef();return reactExports.useEffect(()=>{dt.current=et},[et]),dt.current}let ids={};function useUniqueId(et,dt){return reactExports.useMemo(()=>{if(dt)return dt;const kt=ids[et]==null?0:ids[et]+1;return ids[et]=kt,et+"-"+kt},[et,dt])}function createAdjustmentFn(et){return function(dt){for(var kt=arguments.length,$t=new Array(kt>1?kt-1:0),Tt=1;Tt<kt;Tt++)$t[Tt-1]=arguments[Tt];return $t.reduce((Dt,Ft)=>{const Ut=Object.entries(Ft);for(const[Ht,Kt]of Ut){const Yt=Dt[Ht];Yt!=null&&(Dt[Ht]=Yt+et*Kt)}return Dt},{...dt})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(et){return"clientX"in et&&"clientY"in et}function isKeyboardEvent(et){if(!et)return!1;const{KeyboardEvent:dt}=getWindow(et.target);return dt&&et instanceof dt}function isTouchEvent(et){if(!et)return!1;const{TouchEvent:dt}=getWindow(et.target);return dt&&et instanceof dt}function getEventCoordinates(et){if(isTouchEvent(et)){if(et.touches&&et.touches.length){const{clientX:dt,clientY:kt}=et.touches[0];return{x:dt,y:kt}}else if(et.changedTouches&&et.changedTouches.length){const{clientX:dt,clientY:kt}=et.changedTouches[0];return{x:dt,y:kt}}}return hasViewportRelativeCoordinates(et)?{x:et.clientX,y:et.clientY}:null}const CSS=Object.freeze({Translate:{toString(et){if(!et)return;const{x:dt,y:kt}=et;return"translate3d("+(dt?Math.round(dt):0)+"px, "+(kt?Math.round(kt):0)+"px, 0)"}},Scale:{toString(et){if(!et)return;const{scaleX:dt,scaleY:kt}=et;return"scaleX("+dt+") scaleY("+kt+")"}},Transform:{toString(et){if(et)return[CSS.Translate.toString(et),CSS.Scale.toString(et)].join(" ")}},Transition:{toString(et){let{property:dt,duration:kt,easing:$t}=et;return dt+" "+kt+"ms "+$t}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(et){return et.matches(SELECTOR)?et:et.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(et){let{id:dt,value:kt}=et;return React$2.createElement("div",{id:dt,style:hiddenStyles},kt)}function LiveRegion(et){let{id:dt,announcement:kt,ariaLiveType:$t="assertive"}=et;const Tt={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React$2.createElement("div",{id:dt,style:Tt,role:"status","aria-live":$t,"aria-atomic":!0},kt)}function useAnnouncement(){const[et,dt]=reactExports.useState("");return{announce:reactExports.useCallback($t=>{$t!=null&&dt($t)},[]),announcement:et}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(et){const dt=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!dt)throw new Error("useDndMonitor must be used within a children of <DndContext>");return dt(et)},[et,dt])}function useDndMonitorProvider(){const[et]=reactExports.useState(()=>new Set),dt=reactExports.useCallback($t=>(et.add($t),()=>et.delete($t)),[et]);return[reactExports.useCallback($t=>{let{type:Tt,event:Dt}=$t;et.forEach(Ft=>{var Ut;return(Ut=Ft[Tt])==null?void 0:Ut.call(Ft,Dt)})},[et]),dt]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(et){let{active:dt}=et;return"Picked up draggable item "+dt.id+"."},onDragOver(et){let{active:dt,over:kt}=et;return kt?"Draggable item "+dt.id+" was moved over droppable area "+kt.id+".":"Draggable item "+dt.id+" is no longer over a droppable area."},onDragEnd(et){let{active:dt,over:kt}=et;return kt?"Draggable item "+dt.id+" was dropped over droppable area "+kt.id:"Draggable item "+dt.id+" was dropped."},onDragCancel(et){let{active:dt}=et;return"Dragging was cancelled. Draggable item "+dt.id+" was dropped."}};function Accessibility(et){let{announcements:dt=defaultAnnouncements,container:kt,hiddenTextDescribedById:$t,screenReaderInstructions:Tt=defaultScreenReaderInstructions}=et;const{announce:Dt,announcement:Ft}=useAnnouncement(),Ut=useUniqueId("DndLiveRegion"),[Ht,Kt]=reactExports.useState(!1);if(reactExports.useEffect(()=>{Kt(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(Jt){let{active:Zt}=Jt;Dt(dt.onDragStart({active:Zt}))},onDragMove(Jt){let{active:Zt,over:er}=Jt;dt.onDragMove&&Dt(dt.onDragMove({active:Zt,over:er}))},onDragOver(Jt){let{active:Zt,over:er}=Jt;Dt(dt.onDragOver({active:Zt,over:er}))},onDragEnd(Jt){let{active:Zt,over:er}=Jt;Dt(dt.onDragEnd({active:Zt,over:er}))},onDragCancel(Jt){let{active:Zt,over:er}=Jt;Dt(dt.onDragCancel({active:Zt,over:er}))}}),[Dt,dt])),!Ht)return null;const Yt=React$2.createElement(React$2.Fragment,null,React$2.createElement(HiddenText,{id:$t,value:Tt.draggable}),React$2.createElement(LiveRegion,{id:Ut,announcement:Ft}));return kt?reactDomExports.createPortal(Yt,kt):Yt}var Action;(function(et){et.DragStart="dragStart",et.DragMove="dragMove",et.DragEnd="dragEnd",et.DragCancel="dragCancel",et.DragOver="dragOver",et.RegisterDroppable="registerDroppable",et.SetDroppableDisabled="setDroppableDisabled",et.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop$9(){}function useSensor(et,dt){return reactExports.useMemo(()=>({sensor:et,options:dt??{}}),[et,dt])}function useSensors(){for(var et=arguments.length,dt=new Array(et),kt=0;kt<et;kt++)dt[kt]=arguments[kt];return reactExports.useMemo(()=>[...dt].filter($t=>$t!=null),[...dt])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(et,dt){return Math.sqrt(Math.pow(et.x-dt.x,2)+Math.pow(et.y-dt.y,2))}function sortCollisionsAsc(et,dt){let{data:{value:kt}}=et,{data:{value:$t}}=dt;return kt-$t}function sortCollisionsDesc(et,dt){let{data:{value:kt}}=et,{data:{value:$t}}=dt;return $t-kt}function getFirstCollision(et,dt){if(!et||et.length===0)return null;const[kt]=et;return dt?kt[dt]:kt}function centerOfRectangle(et,dt,kt){return dt===void 0&&(dt=et.left),kt===void 0&&(kt=et.top),{x:dt+et.width*.5,y:kt+et.height*.5}}const closestCenter=et=>{let{collisionRect:dt,droppableRects:kt,droppableContainers:$t}=et;const Tt=centerOfRectangle(dt,dt.left,dt.top),Dt=[];for(const Ft of $t){const{id:Ut}=Ft,Ht=kt.get(Ut);if(Ht){const Kt=distanceBetween(centerOfRectangle(Ht),Tt);Dt.push({id:Ut,data:{droppableContainer:Ft,value:Kt}})}}return Dt.sort(sortCollisionsAsc)};function getIntersectionRatio(et,dt){const kt=Math.max(dt.top,et.top),$t=Math.max(dt.left,et.left),Tt=Math.min(dt.left+dt.width,et.left+et.width),Dt=Math.min(dt.top+dt.height,et.top+et.height),Ft=Tt-$t,Ut=Dt-kt;if($t<Tt&&kt<Dt){const Ht=dt.width*dt.height,Kt=et.width*et.height,Yt=Ft*Ut,Jt=Yt/(Ht+Kt-Yt);return Number(Jt.toFixed(4))}return 0}const rectIntersection=et=>{let{collisionRect:dt,droppableRects:kt,droppableContainers:$t}=et;const Tt=[];for(const Dt of $t){const{id:Ft}=Dt,Ut=kt.get(Ft);if(Ut){const Ht=getIntersectionRatio(Ut,dt);Ht>0&&Tt.push({id:Ft,data:{droppableContainer:Dt,value:Ht}})}}return Tt.sort(sortCollisionsDesc)};function adjustScale(et,dt,kt){return{...et,scaleX:dt&&kt?dt.width/kt.width:1,scaleY:dt&&kt?dt.height/kt.height:1}}function getRectDelta(et,dt){return et&&dt?{x:et.left-dt.left,y:et.top-dt.top}:defaultCoordinates}function createRectAdjustmentFn(et){return function(kt){for(var $t=arguments.length,Tt=new Array($t>1?$t-1:0),Dt=1;Dt<$t;Dt++)Tt[Dt-1]=arguments[Dt];return Tt.reduce((Ft,Ut)=>({...Ft,top:Ft.top+et*Ut.y,bottom:Ft.bottom+et*Ut.y,left:Ft.left+et*Ut.x,right:Ft.right+et*Ut.x}),{...kt})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(et){if(et.startsWith("matrix3d(")){const dt=et.slice(9,-1).split(/, /);return{x:+dt[12],y:+dt[13],scaleX:+dt[0],scaleY:+dt[5]}}else if(et.startsWith("matrix(")){const dt=et.slice(7,-1).split(/, /);return{x:+dt[4],y:+dt[5],scaleX:+dt[0],scaleY:+dt[3]}}return null}function inverseTransform(et,dt,kt){const $t=parseTransform(dt);if(!$t)return et;const{scaleX:Tt,scaleY:Dt,x:Ft,y:Ut}=$t,Ht=et.left-Ft-(1-Tt)*parseFloat(kt),Kt=et.top-Ut-(1-Dt)*parseFloat(kt.slice(kt.indexOf(" ")+1)),Yt=Tt?et.width/Tt:et.width,Jt=Dt?et.height/Dt:et.height;return{width:Yt,height:Jt,top:Kt,right:Ht+Yt,bottom:Kt+Jt,left:Ht}}const defaultOptions={ignoreTransform:!1};function getClientRect(et,dt){dt===void 0&&(dt=defaultOptions);let kt=et.getBoundingClientRect();if(dt.ignoreTransform){const{transform:Kt,transformOrigin:Yt}=getWindow(et).getComputedStyle(et);Kt&&(kt=inverseTransform(kt,Kt,Yt))}const{top:$t,left:Tt,width:Dt,height:Ft,bottom:Ut,right:Ht}=kt;return{top:$t,left:Tt,width:Dt,height:Ft,bottom:Ut,right:Ht}}function getTransformAgnosticClientRect(et){return getClientRect(et,{ignoreTransform:!0})}function getWindowClientRect(et){const dt=et.innerWidth,kt=et.innerHeight;return{top:0,left:0,right:dt,bottom:kt,width:dt,height:kt}}function isFixed(et,dt){return dt===void 0&&(dt=getWindow(et).getComputedStyle(et)),dt.position==="fixed"}function isScrollable(et,dt){dt===void 0&&(dt=getWindow(et).getComputedStyle(et));const kt=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Tt=>{const Dt=dt[Tt];return typeof Dt=="string"?kt.test(Dt):!1})}function getScrollableAncestors(et,dt){const kt=[];function $t(Tt){if(dt!=null&&kt.length>=dt||!Tt)return kt;if(isDocument(Tt)&&Tt.scrollingElement!=null&&!kt.includes(Tt.scrollingElement))return kt.push(Tt.scrollingElement),kt;if(!isHTMLElement(Tt)||isSVGElement(Tt)||kt.includes(Tt))return kt;const Dt=getWindow(et).getComputedStyle(Tt);return Tt!==et&&isScrollable(Tt,Dt)&&kt.push(Tt),isFixed(Tt,Dt)?kt:$t(Tt.parentNode)}return et?$t(et):kt}function getFirstScrollableAncestor(et){const[dt]=getScrollableAncestors(et,1);return dt??null}function getScrollableElement(et){return!canUseDOM||!et?null:isWindow(et)?et:isNode(et)?isDocument(et)||et===getOwnerDocument(et).scrollingElement?window:isHTMLElement(et)?et:null:null}function getScrollXCoordinate(et){return isWindow(et)?et.scrollX:et.scrollLeft}function getScrollYCoordinate(et){return isWindow(et)?et.scrollY:et.scrollTop}function getScrollCoordinates(et){return{x:getScrollXCoordinate(et),y:getScrollYCoordinate(et)}}var Direction;(function(et){et[et.Forward=1]="Forward",et[et.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(et){return!canUseDOM||!et?!1:et===document.scrollingElement}function getScrollPosition(et){const dt={x:0,y:0},kt=isDocumentScrollingElement(et)?{height:window.innerHeight,width:window.innerWidth}:{height:et.clientHeight,width:et.clientWidth},$t={x:et.scrollWidth-kt.width,y:et.scrollHeight-kt.height},Tt=et.scrollTop<=dt.y,Dt=et.scrollLeft<=dt.x,Ft=et.scrollTop>=$t.y,Ut=et.scrollLeft>=$t.x;return{isTop:Tt,isLeft:Dt,isBottom:Ft,isRight:Ut,maxScroll:$t,minScroll:dt}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(et,dt,kt,$t,Tt){let{top:Dt,left:Ft,right:Ut,bottom:Ht}=kt;$t===void 0&&($t=10),Tt===void 0&&(Tt=defaultThreshold);const{isTop:Kt,isBottom:Yt,isLeft:Jt,isRight:Zt}=getScrollPosition(et),er={x:0,y:0},rr={x:0,y:0},sr={height:dt.height*Tt.y,width:dt.width*Tt.x};return!Kt&&Dt<=dt.top+sr.height?(er.y=Direction.Backward,rr.y=$t*Math.abs((dt.top+sr.height-Dt)/sr.height)):!Yt&&Ht>=dt.bottom-sr.height&&(er.y=Direction.Forward,rr.y=$t*Math.abs((dt.bottom-sr.height-Ht)/sr.height)),!Zt&&Ut>=dt.right-sr.width?(er.x=Direction.Forward,rr.x=$t*Math.abs((dt.right-sr.width-Ut)/sr.width)):!Jt&&Ft<=dt.left+sr.width&&(er.x=Direction.Backward,rr.x=$t*Math.abs((dt.left+sr.width-Ft)/sr.width)),{direction:er,speed:rr}}function getScrollElementRect(et){if(et===document.scrollingElement){const{innerWidth:Dt,innerHeight:Ft}=window;return{top:0,left:0,right:Dt,bottom:Ft,width:Dt,height:Ft}}const{top:dt,left:kt,right:$t,bottom:Tt}=et.getBoundingClientRect();return{top:dt,left:kt,right:$t,bottom:Tt,width:et.clientWidth,height:et.clientHeight}}function getScrollOffsets(et){return et.reduce((dt,kt)=>add(dt,getScrollCoordinates(kt)),defaultCoordinates)}function getScrollXOffset(et){return et.reduce((dt,kt)=>dt+getScrollXCoordinate(kt),0)}function getScrollYOffset(et){return et.reduce((dt,kt)=>dt+getScrollYCoordinate(kt),0)}function scrollIntoViewIfNeeded(et,dt){if(dt===void 0&&(dt=getClientRect),!et)return;const{top:kt,left:$t,bottom:Tt,right:Dt}=dt(et);getFirstScrollableAncestor(et)&&(Tt<=0||Dt<=0||kt>=window.innerHeight||$t>=window.innerWidth)&&et.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(dt,kt){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const $t=getScrollableAncestors(kt),Tt=getScrollOffsets($t);this.rect={...dt},this.width=dt.width,this.height=dt.height;for(const[Dt,Ft,Ut]of properties)for(const Ht of Ft)Object.defineProperty(this,Ht,{get:()=>{const Kt=Ut($t),Yt=Tt[Dt]-Kt;return this.rect[Ht]+Yt},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(dt){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(kt=>{var $t;return($t=this.target)==null?void 0:$t.removeEventListener(...kt)})},this.target=dt}add(dt,kt,$t){var Tt;(Tt=this.target)==null||Tt.addEventListener(dt,kt,$t),this.listeners.push([dt,kt,$t])}}function getEventListenerTarget(et){const{EventTarget:dt}=getWindow(et);return et instanceof dt?et:getOwnerDocument(et)}function hasExceededDistance(et,dt){const kt=Math.abs(et.x),$t=Math.abs(et.y);return typeof dt=="number"?Math.sqrt(kt**2+$t**2)>dt:"x"in dt&&"y"in dt?kt>dt.x&&$t>dt.y:"x"in dt?kt>dt.x:"y"in dt?$t>dt.y:!1}var EventName;(function(et){et.Click="click",et.DragStart="dragstart",et.Keydown="keydown",et.ContextMenu="contextmenu",et.Resize="resize",et.SelectionChange="selectionchange",et.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(et){et.preventDefault()}function stopPropagation(et){et.stopPropagation()}var KeyboardCode;(function(et){et.Space="Space",et.Down="ArrowDown",et.Right="ArrowRight",et.Left="ArrowLeft",et.Up="ArrowUp",et.Esc="Escape",et.Enter="Enter",et.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(et,dt)=>{let{currentCoordinates:kt}=dt;switch(et.code){case KeyboardCode.Right:return{...kt,x:kt.x+25};case KeyboardCode.Left:return{...kt,x:kt.x-25};case KeyboardCode.Down:return{...kt,y:kt.y+25};case KeyboardCode.Up:return{...kt,y:kt.y-25}}};class KeyboardSensor{constructor(dt){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=dt;const{event:{target:kt}}=dt;this.props=dt,this.listeners=new Listeners(getOwnerDocument(kt)),this.windowListeners=new Listeners(getWindow(kt)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:dt,onStart:kt}=this.props,$t=dt.node.current;$t&&scrollIntoViewIfNeeded($t),kt(defaultCoordinates)}handleKeyDown(dt){if(isKeyboardEvent(dt)){const{active:kt,context:$t,options:Tt}=this.props,{keyboardCodes:Dt=defaultKeyboardCodes,coordinateGetter:Ft=defaultKeyboardCoordinateGetter,scrollBehavior:Ut="smooth"}=Tt,{code:Ht}=dt;if(Dt.end.includes(Ht)){this.handleEnd(dt);return}if(Dt.cancel.includes(Ht)){this.handleCancel(dt);return}const{collisionRect:Kt}=$t.current,Yt=Kt?{x:Kt.left,y:Kt.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=Yt);const Jt=Ft(dt,{active:kt,context:$t.current,currentCoordinates:Yt});if(Jt){const Zt=subtract(Jt,Yt),er={x:0,y:0},{scrollableAncestors:rr}=$t.current;for(const sr of rr){const nr=dt.code,{isTop:ir,isRight:lr,isLeft:or,isBottom:cr,maxScroll:dr,minScroll:ur}=getScrollPosition(sr),pr=getScrollElementRect(sr),mr={x:Math.min(nr===KeyboardCode.Right?pr.right-pr.width/2:pr.right,Math.max(nr===KeyboardCode.Right?pr.left:pr.left+pr.width/2,Jt.x)),y:Math.min(nr===KeyboardCode.Down?pr.bottom-pr.height/2:pr.bottom,Math.max(nr===KeyboardCode.Down?pr.top:pr.top+pr.height/2,Jt.y))},jr=nr===KeyboardCode.Right&&!lr||nr===KeyboardCode.Left&&!or,Rr=nr===KeyboardCode.Down&&!cr||nr===KeyboardCode.Up&&!ir;if(jr&&mr.x!==Jt.x){const br=sr.scrollLeft+Zt.x,_r=nr===KeyboardCode.Right&&br<=dr.x||nr===KeyboardCode.Left&&br>=ur.x;if(_r&&!Zt.y){sr.scrollTo({left:br,behavior:Ut});return}_r?er.x=sr.scrollLeft-br:er.x=nr===KeyboardCode.Right?sr.scrollLeft-dr.x:sr.scrollLeft-ur.x,er.x&&sr.scrollBy({left:-er.x,behavior:Ut});break}else if(Rr&&mr.y!==Jt.y){const br=sr.scrollTop+Zt.y,_r=nr===KeyboardCode.Down&&br<=dr.y||nr===KeyboardCode.Up&&br>=ur.y;if(_r&&!Zt.x){sr.scrollTo({top:br,behavior:Ut});return}_r?er.y=sr.scrollTop-br:er.y=nr===KeyboardCode.Down?sr.scrollTop-dr.y:sr.scrollTop-ur.y,er.y&&sr.scrollBy({top:-er.y,behavior:Ut});break}}this.handleMove(dt,add(subtract(Jt,this.referenceCoordinates),er))}}}handleMove(dt,kt){const{onMove:$t}=this.props;dt.preventDefault(),$t(kt)}handleEnd(dt){const{onEnd:kt}=this.props;dt.preventDefault(),this.detach(),kt()}handleCancel(dt){const{onCancel:kt}=this.props;dt.preventDefault(),this.detach(),kt()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(et,dt,kt)=>{let{keyboardCodes:$t=defaultKeyboardCodes,onActivation:Tt}=dt,{active:Dt}=kt;const{code:Ft}=et.nativeEvent;if($t.start.includes(Ft)){const Ut=Dt.activatorNode.current;return Ut&&et.target!==Ut?!1:(et.preventDefault(),Tt==null||Tt({event:et.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(et){return!!(et&&"distance"in et)}function isDelayConstraint(et){return!!(et&&"delay"in et)}class AbstractPointerSensor{constructor(dt,kt,$t){var Tt;$t===void 0&&($t=getEventListenerTarget(dt.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=dt,this.events=kt;const{event:Dt}=dt,{target:Ft}=Dt;this.props=dt,this.events=kt,this.document=getOwnerDocument(Ft),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners($t),this.windowListeners=new Listeners(getWindow(Ft)),this.initialCoordinates=(Tt=getEventCoordinates(Dt))!=null?Tt:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:dt,props:{options:{activationConstraint:kt,bypassActivationConstraint:$t}}}=this;if(this.listeners.add(dt.move.name,this.handleMove,{passive:!1}),this.listeners.add(dt.end.name,this.handleEnd),dt.cancel&&this.listeners.add(dt.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),kt){if($t!=null&&$t({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(kt)){this.timeoutId=setTimeout(this.handleStart,kt.delay),this.handlePending(kt);return}if(isDistanceConstraint(kt)){this.handlePending(kt);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(dt,kt){const{active:$t,onPending:Tt}=this.props;Tt($t,dt,this.initialCoordinates,kt)}handleStart(){const{initialCoordinates:dt}=this,{onStart:kt}=this.props;dt&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),kt(dt))}handleMove(dt){var kt;const{activated:$t,initialCoordinates:Tt,props:Dt}=this,{onMove:Ft,options:{activationConstraint:Ut}}=Dt;if(!Tt)return;const Ht=(kt=getEventCoordinates(dt))!=null?kt:defaultCoordinates,Kt=subtract(Tt,Ht);if(!$t&&Ut){if(isDistanceConstraint(Ut)){if(Ut.tolerance!=null&&hasExceededDistance(Kt,Ut.tolerance))return this.handleCancel();if(hasExceededDistance(Kt,Ut.distance))return this.handleStart()}if(isDelayConstraint(Ut)&&hasExceededDistance(Kt,Ut.tolerance))return this.handleCancel();this.handlePending(Ut,Kt);return}dt.cancelable&&dt.preventDefault(),Ft(Ht)}handleEnd(){const{onAbort:dt,onEnd:kt}=this.props;this.detach(),this.activated||dt(this.props.active),kt()}handleCancel(){const{onAbort:dt,onCancel:kt}=this.props;this.detach(),this.activated||dt(this.props.active),kt()}handleKeydown(dt){dt.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var dt;(dt=this.document.getSelection())==null||dt.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(dt){const{event:kt}=dt,$t=getOwnerDocument(kt.target);super(dt,events,$t)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(et,dt)=>{let{nativeEvent:kt}=et,{onActivation:$t}=dt;return!kt.isPrimary||kt.button!==0?!1:($t==null||$t({event:kt}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(et){et[et.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(dt){super(dt,events$1,getOwnerDocument(dt.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(et,dt)=>{let{nativeEvent:kt}=et,{onActivation:$t}=dt;return kt.button===MouseButton.RightClick?!1:($t==null||$t({event:kt}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(dt){super(dt,events$2)}static setup(){return window.addEventListener(events$2.move.name,dt,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,dt)};function dt(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(et,dt)=>{let{nativeEvent:kt}=et,{onActivation:$t}=dt;const{touches:Tt}=kt;return Tt.length>1?!1:($t==null||$t({event:kt}),!0)}}];var AutoScrollActivator;(function(et){et[et.Pointer=0]="Pointer",et[et.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(et){et[et.TreeOrder=0]="TreeOrder",et[et.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(et){let{acceleration:dt,activator:kt=AutoScrollActivator.Pointer,canScroll:$t,draggingRect:Tt,enabled:Dt,interval:Ft=5,order:Ut=TraversalOrder.TreeOrder,pointerCoordinates:Ht,scrollableAncestors:Kt,scrollableAncestorRects:Yt,delta:Jt,threshold:Zt}=et;const er=useScrollIntent({delta:Jt,disabled:!Dt}),[rr,sr]=useInterval(),nr=reactExports.useRef({x:0,y:0}),ir=reactExports.useRef({x:0,y:0}),lr=reactExports.useMemo(()=>{switch(kt){case AutoScrollActivator.Pointer:return Ht?{top:Ht.y,bottom:Ht.y,left:Ht.x,right:Ht.x}:null;case AutoScrollActivator.DraggableRect:return Tt}},[kt,Tt,Ht]),or=reactExports.useRef(null),cr=reactExports.useCallback(()=>{const ur=or.current;if(!ur)return;const pr=nr.current.x*ir.current.x,mr=nr.current.y*ir.current.y;ur.scrollBy(pr,mr)},[]),dr=reactExports.useMemo(()=>Ut===TraversalOrder.TreeOrder?[...Kt].reverse():Kt,[Ut,Kt]);reactExports.useEffect(()=>{if(!Dt||!Kt.length||!lr){sr();return}for(const ur of dr){if(($t==null?void 0:$t(ur))===!1)continue;const pr=Kt.indexOf(ur),mr=Yt[pr];if(!mr)continue;const{direction:jr,speed:Rr}=getScrollDirectionAndSpeed(ur,mr,lr,dt,Zt);for(const br of["x","y"])er[br][jr[br]]||(Rr[br]=0,jr[br]=0);if(Rr.x>0||Rr.y>0){sr(),or.current=ur,rr(cr,Ft),nr.current=Rr,ir.current=jr;return}}nr.current={x:0,y:0},ir.current={x:0,y:0},sr()},[dt,cr,$t,sr,Dt,Ft,JSON.stringify(lr),JSON.stringify(er),rr,Kt,dr,Yt,JSON.stringify(Zt)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(et){let{delta:dt,disabled:kt}=et;const $t=usePrevious(dt);return useLazyMemo(Tt=>{if(kt||!$t||!Tt)return defaultScrollIntent;const Dt={x:Math.sign(dt.x-$t.x),y:Math.sign(dt.y-$t.y)};return{x:{[Direction.Backward]:Tt.x[Direction.Backward]||Dt.x===-1,[Direction.Forward]:Tt.x[Direction.Forward]||Dt.x===1},y:{[Direction.Backward]:Tt.y[Direction.Backward]||Dt.y===-1,[Direction.Forward]:Tt.y[Direction.Forward]||Dt.y===1}}},[kt,dt,$t])}function useCachedNode(et,dt){const kt=dt!=null?et.get(dt):void 0,$t=kt?kt.node.current:null;return useLazyMemo(Tt=>{var Dt;return dt==null?null:(Dt=$t??Tt)!=null?Dt:null},[$t,dt])}function useCombineActivators(et,dt){return reactExports.useMemo(()=>et.reduce((kt,$t)=>{const{sensor:Tt}=$t,Dt=Tt.activators.map(Ft=>({eventName:Ft.eventName,handler:dt(Ft.handler,$t)}));return[...kt,...Dt]},[]),[et,dt])}var MeasuringStrategy;(function(et){et[et.Always=0]="Always",et[et.BeforeDragging=1]="BeforeDragging",et[et.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(et){et.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(et,dt){let{dragging:kt,dependencies:$t,config:Tt}=dt;const[Dt,Ft]=reactExports.useState(null),{frequency:Ut,measure:Ht,strategy:Kt}=Tt,Yt=reactExports.useRef(et),Jt=nr(),Zt=useLatestValue(Jt),er=reactExports.useCallback(function(ir){ir===void 0&&(ir=[]),!Zt.current&&Ft(lr=>lr===null?ir:lr.concat(ir.filter(or=>!lr.includes(or))))},[Zt]),rr=reactExports.useRef(null),sr=useLazyMemo(ir=>{if(Jt&&!kt)return defaultValue;if(!ir||ir===defaultValue||Yt.current!==et||Dt!=null){const lr=new Map;for(let or of et){if(!or)continue;if(Dt&&Dt.length>0&&!Dt.includes(or.id)&&or.rect.current){lr.set(or.id,or.rect.current);continue}const cr=or.node.current,dr=cr?new Rect(Ht(cr),cr):null;or.rect.current=dr,dr&&lr.set(or.id,dr)}return lr}return ir},[et,Dt,kt,Jt,Ht]);return reactExports.useEffect(()=>{Yt.current=et},[et]),reactExports.useEffect(()=>{Jt||er()},[kt,Jt]),reactExports.useEffect(()=>{Dt&&Dt.length>0&&Ft(null)},[JSON.stringify(Dt)]),reactExports.useEffect(()=>{Jt||typeof Ut!="number"||rr.current!==null||(rr.current=setTimeout(()=>{er(),rr.current=null},Ut))},[Ut,Jt,er,...$t]),{droppableRects:sr,measureDroppableContainers:er,measuringScheduled:Dt!=null};function nr(){switch(Kt){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return kt;default:return!kt}}}function useInitialValue(et,dt){return useLazyMemo(kt=>et?kt||(typeof dt=="function"?dt(et):et):null,[dt,et])}function useInitialRect(et,dt){return useInitialValue(et,dt)}function useMutationObserver(et){let{callback:dt,disabled:kt}=et;const $t=useEvent(dt),Tt=reactExports.useMemo(()=>{if(kt||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:Dt}=window;return new Dt($t)},[$t,kt]);return reactExports.useEffect(()=>()=>Tt==null?void 0:Tt.disconnect(),[Tt]),Tt}function useResizeObserver(et){let{callback:dt,disabled:kt}=et;const $t=useEvent(dt),Tt=reactExports.useMemo(()=>{if(kt||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:Dt}=window;return new Dt($t)},[kt]);return reactExports.useEffect(()=>()=>Tt==null?void 0:Tt.disconnect(),[Tt]),Tt}function defaultMeasure(et){return new Rect(getClientRect(et),et)}function useRect(et,dt,kt){dt===void 0&&(dt=defaultMeasure);const[$t,Tt]=reactExports.useState(null);function Dt(){Tt(Ht=>{if(!et)return null;if(et.isConnected===!1){var Kt;return(Kt=Ht??kt)!=null?Kt:null}const Yt=dt(et);return JSON.stringify(Ht)===JSON.stringify(Yt)?Ht:Yt})}const Ft=useMutationObserver({callback(Ht){if(et)for(const Kt of Ht){const{type:Yt,target:Jt}=Kt;if(Yt==="childList"&&Jt instanceof HTMLElement&&Jt.contains(et)){Dt();break}}}}),Ut=useResizeObserver({callback:Dt});return useIsomorphicLayoutEffect$6(()=>{Dt(),et?(Ut==null||Ut.observe(et),Ft==null||Ft.observe(document.body,{childList:!0,subtree:!0})):(Ut==null||Ut.disconnect(),Ft==null||Ft.disconnect())},[et]),$t}function useRectDelta(et){const dt=useInitialValue(et);return getRectDelta(et,dt)}const defaultValue$1=[];function useScrollableAncestors(et){const dt=reactExports.useRef(et),kt=useLazyMemo($t=>et?$t&&$t!==defaultValue$1&&et&&dt.current&&et.parentNode===dt.current.parentNode?$t:getScrollableAncestors(et):defaultValue$1,[et]);return reactExports.useEffect(()=>{dt.current=et},[et]),kt}function useScrollOffsets(et){const[dt,kt]=reactExports.useState(null),$t=reactExports.useRef(et),Tt=reactExports.useCallback(Dt=>{const Ft=getScrollableElement(Dt.target);Ft&&kt(Ut=>Ut?(Ut.set(Ft,getScrollCoordinates(Ft)),new Map(Ut)):null)},[]);return reactExports.useEffect(()=>{const Dt=$t.current;if(et!==Dt){Ft(Dt);const Ut=et.map(Ht=>{const Kt=getScrollableElement(Ht);return Kt?(Kt.addEventListener("scroll",Tt,{passive:!0}),[Kt,getScrollCoordinates(Kt)]):null}).filter(Ht=>Ht!=null);kt(Ut.length?new Map(Ut):null),$t.current=et}return()=>{Ft(et),Ft(Dt)};function Ft(Ut){Ut.forEach(Ht=>{const Kt=getScrollableElement(Ht);Kt==null||Kt.removeEventListener("scroll",Tt)})}},[Tt,et]),reactExports.useMemo(()=>et.length?dt?Array.from(dt.values()).reduce((Dt,Ft)=>add(Dt,Ft),defaultCoordinates):getScrollOffsets(et):defaultCoordinates,[et,dt])}function useScrollOffsetsDelta(et,dt){dt===void 0&&(dt=[]);const kt=reactExports.useRef(null);return reactExports.useEffect(()=>{kt.current=null},dt),reactExports.useEffect(()=>{const $t=et!==defaultCoordinates;$t&&!kt.current&&(kt.current=et),!$t&&kt.current&&(kt.current=null)},[et]),kt.current?subtract(et,kt.current):defaultCoordinates}function useSensorSetup(et){reactExports.useEffect(()=>{if(!canUseDOM)return;const dt=et.map(kt=>{let{sensor:$t}=kt;return $t.setup==null?void 0:$t.setup()});return()=>{for(const kt of dt)kt==null||kt()}},et.map(dt=>{let{sensor:kt}=dt;return kt}))}function useSyntheticListeners(et,dt){return reactExports.useMemo(()=>et.reduce((kt,$t)=>{let{eventName:Tt,handler:Dt}=$t;return kt[Tt]=Ft=>{Dt(Ft,dt)},kt},{}),[et,dt])}function useWindowRect(et){return reactExports.useMemo(()=>et?getWindowClientRect(et):null,[et])}const defaultValue$2=[];function useRects(et,dt){dt===void 0&&(dt=getClientRect);const[kt]=et,$t=useWindowRect(kt?getWindow(kt):null),[Tt,Dt]=reactExports.useState(defaultValue$2);function Ft(){Dt(()=>et.length?et.map(Ht=>isDocumentScrollingElement(Ht)?$t:new Rect(dt(Ht),Ht)):defaultValue$2)}const Ut=useResizeObserver({callback:Ft});return useIsomorphicLayoutEffect$6(()=>{Ut==null||Ut.disconnect(),Ft(),et.forEach(Ht=>Ut==null?void 0:Ut.observe(Ht))},[et]),Tt}function getMeasurableNode(et){if(!et)return null;if(et.children.length>1)return et;const dt=et.children[0];return isHTMLElement(dt)?dt:et}function useDragOverlayMeasuring(et){let{measure:dt}=et;const[kt,$t]=reactExports.useState(null),Tt=reactExports.useCallback(Kt=>{for(const{target:Yt}of Kt)if(isHTMLElement(Yt)){$t(Jt=>{const Zt=dt(Yt);return Jt?{...Jt,width:Zt.width,height:Zt.height}:Zt});break}},[dt]),Dt=useResizeObserver({callback:Tt}),Ft=reactExports.useCallback(Kt=>{const Yt=getMeasurableNode(Kt);Dt==null||Dt.disconnect(),Yt&&(Dt==null||Dt.observe(Yt)),$t(Yt?dt(Yt):null)},[dt,Dt]),[Ut,Ht]=useNodeRef(Ft);return reactExports.useMemo(()=>({nodeRef:Ut,rect:kt,setRef:Ht}),[kt,Ut,Ht])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(dt){var kt;return dt!=null&&(kt=super.get(dt))!=null?kt:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(dt=>{let{disabled:kt}=dt;return!kt})}getNodeFor(dt){var kt,$t;return(kt=($t=this.get(dt))==null?void 0:$t.node.current)!=null?kt:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop$9},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop$9,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop$9,draggableNodes:new Map,over:null,measureDroppableContainers:noop$9},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(et,dt){switch(dt.type){case Action.DragStart:return{...et,draggable:{...et.draggable,initialCoordinates:dt.initialCoordinates,active:dt.active}};case Action.DragMove:return et.draggable.active==null?et:{...et,draggable:{...et.draggable,translate:{x:dt.coordinates.x-et.draggable.initialCoordinates.x,y:dt.coordinates.y-et.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...et,draggable:{...et.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:kt}=dt,{id:$t}=kt,Tt=new DroppableContainersMap(et.droppable.containers);return Tt.set($t,kt),{...et,droppable:{...et.droppable,containers:Tt}}}case Action.SetDroppableDisabled:{const{id:kt,key:$t,disabled:Tt}=dt,Dt=et.droppable.containers.get(kt);if(!Dt||$t!==Dt.key)return et;const Ft=new DroppableContainersMap(et.droppable.containers);return Ft.set(kt,{...Dt,disabled:Tt}),{...et,droppable:{...et.droppable,containers:Ft}}}case Action.UnregisterDroppable:{const{id:kt,key:$t}=dt,Tt=et.droppable.containers.get(kt);if(!Tt||$t!==Tt.key)return et;const Dt=new DroppableContainersMap(et.droppable.containers);return Dt.delete(kt),{...et,droppable:{...et.droppable,containers:Dt}}}default:return et}}function RestoreFocus(et){let{disabled:dt}=et;const{active:kt,activatorEvent:$t,draggableNodes:Tt}=reactExports.useContext(InternalContext),Dt=usePrevious($t),Ft=usePrevious(kt==null?void 0:kt.id);return reactExports.useEffect(()=>{if(!dt&&!$t&&Dt&&Ft!=null){if(!isKeyboardEvent(Dt)||document.activeElement===Dt.target)return;const Ut=Tt.get(Ft);if(!Ut)return;const{activatorNode:Ht,node:Kt}=Ut;if(!Ht.current&&!Kt.current)return;requestAnimationFrame(()=>{for(const Yt of[Ht.current,Kt.current]){if(!Yt)continue;const Jt=findFirstFocusableNode(Yt);if(Jt){Jt.focus();break}}})}},[$t,dt,Tt,Ft,Dt]),null}function applyModifiers(et,dt){let{transform:kt,...$t}=dt;return et!=null&&et.length?et.reduce((Tt,Dt)=>Dt({transform:Tt,...$t}),kt):kt}function useMeasuringConfiguration(et){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...et==null?void 0:et.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...et==null?void 0:et.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...et==null?void 0:et.dragOverlay}}),[et==null?void 0:et.draggable,et==null?void 0:et.droppable,et==null?void 0:et.dragOverlay])}function useLayoutShiftScrollCompensation(et){let{activeNode:dt,measure:kt,initialRect:$t,config:Tt=!0}=et;const Dt=reactExports.useRef(!1),{x:Ft,y:Ut}=typeof Tt=="boolean"?{x:Tt,y:Tt}:Tt;useIsomorphicLayoutEffect$6(()=>{if(!Ft&&!Ut||!dt){Dt.current=!1;return}if(Dt.current||!$t)return;const Kt=dt==null?void 0:dt.node.current;if(!Kt||Kt.isConnected===!1)return;const Yt=kt(Kt),Jt=getRectDelta(Yt,$t);if(Ft||(Jt.x=0),Ut||(Jt.y=0),Dt.current=!0,Math.abs(Jt.x)>0||Math.abs(Jt.y)>0){const Zt=getFirstScrollableAncestor(Kt);Zt&&Zt.scrollBy({top:Jt.y,left:Jt.x})}},[dt,Ft,Ut,$t,kt])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(et){et[et.Uninitialized=0]="Uninitialized",et[et.Initializing=1]="Initializing",et[et.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function et(dt){var kt,$t,Tt,Dt;let{id:Ft,accessibility:Ut,autoScroll:Ht=!0,children:Kt,sensors:Yt=defaultSensors,collisionDetection:Jt=rectIntersection,measuring:Zt,modifiers:er,...rr}=dt;const sr=reactExports.useReducer(reducer,void 0,getInitialState),[nr,ir]=sr,[lr,or]=useDndMonitorProvider(),[cr,dr]=reactExports.useState(Status.Uninitialized),ur=cr===Status.Initialized,{draggable:{active:pr,nodes:mr,translate:jr},droppable:{containers:Rr}}=nr,br=pr!=null?mr.get(pr):null,_r=reactExports.useRef({initial:null,translated:null}),Mr=reactExports.useMemo(()=>{var ws;return pr!=null?{id:pr,data:(ws=br==null?void 0:br.data)!=null?ws:defaultData,rect:_r}:null},[pr,br]),Pr=reactExports.useRef(null),[Or,kr]=reactExports.useState(null),[Tr,xr]=reactExports.useState(null),wr=useLatestValue(rr,Object.values(rr)),zr=useUniqueId("DndDescribedBy",Ft),Hr=reactExports.useMemo(()=>Rr.getEnabled(),[Rr]),Yr=useMeasuringConfiguration(Zt),{droppableRects:rs,measureDroppableContainers:as,measuringScheduled:es}=useDroppableMeasuring(Hr,{dragging:ur,dependencies:[jr.x,jr.y],config:Yr.droppable}),Xr=useCachedNode(mr,pr),Wr=reactExports.useMemo(()=>Tr?getEventCoordinates(Tr):null,[Tr]),cs=ys(),ns=useInitialRect(Xr,Yr.draggable.measure);useLayoutShiftScrollCompensation({activeNode:pr!=null?mr.get(pr):null,config:cs.layoutShiftCompensation,initialRect:ns,measure:Yr.draggable.measure});const us=useRect(Xr,Yr.draggable.measure,ns),fs=useRect(Xr?Xr.parentElement:null),ss=reactExports.useRef({activatorEvent:null,active:null,activeNode:Xr,collisionRect:null,collisions:null,droppableRects:rs,draggableNodes:mr,draggingNode:null,draggingNodeRect:null,droppableContainers:Rr,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ps=Rr.getNodeFor((kt=ss.current.over)==null?void 0:kt.id),ls=useDragOverlayMeasuring({measure:Yr.dragOverlay.measure}),js=($t=ls.nodeRef.current)!=null?$t:Xr,$s=ur?(Tt=ls.rect)!=null?Tt:us:null,Ds=!!(ls.nodeRef.current&&ls.rect),Ts=useRectDelta(Ds?null:us),As=useWindowRect(js?getWindow(js):null),_s=useScrollableAncestors(ur?ps??Xr:null),Ms=useRects(_s),Vs=applyModifiers(er,{transform:{x:jr.x-Ts.x,y:jr.y-Ts.y,scaleX:1,scaleY:1},activatorEvent:Tr,active:Mr,activeNodeRect:us,containerNodeRect:fs,draggingNodeRect:$s,over:ss.current.over,overlayNodeRect:ls.rect,scrollableAncestors:_s,scrollableAncestorRects:Ms,windowRect:As}),Gs=Wr?add(Wr,jr):null,Ws=useScrollOffsets(_s),Xs=useScrollOffsetsDelta(Ws),Qs=useScrollOffsetsDelta(Ws,[us]),Bs=add(Vs,Xs),qs=$s?getAdjustedRect($s,Vs):null,Ks=Mr&&qs?Jt({active:Mr,collisionRect:qs,droppableRects:rs,droppableContainers:Hr,pointerCoordinates:Gs}):null,yn=getFirstCollision(Ks,"id"),[Dn,na]=reactExports.useState(null),jo=Ds?Vs:add(Vs,Qs),Ls=adjustScale(jo,(Dt=Dn==null?void 0:Dn.rect)!=null?Dt:null,us),hs=reactExports.useRef(null),Gr=reactExports.useCallback((ws,Ss)=>{let{sensor:Fs,options:vs}=Ss;if(Pr.current==null)return;const Os=mr.get(Pr.current);if(!Os)return;const tn=ws.nativeEvent,bs=new Fs({active:Pr.current,activeNode:Os,event:tn,options:vs,context:ss,onAbort(Rs){if(!mr.get(Rs))return;const{onDragAbort:zs}=wr.current,Zs={id:Rs};zs==null||zs(Zs),lr({type:"onDragAbort",event:Zs})},onPending(Rs,Ps,zs,Zs){if(!mr.get(Rs))return;const{onDragPending:Lo}=wr.current,No={id:Rs,constraint:Ps,initialCoordinates:zs,offset:Zs};Lo==null||Lo(No),lr({type:"onDragPending",event:No})},onStart(Rs){const Ps=Pr.current;if(Ps==null)return;const zs=mr.get(Ps);if(!zs)return;const{onDragStart:Zs}=wr.current,Vn={activatorEvent:tn,active:{id:Ps,data:zs.data,rect:_r}};reactDomExports.unstable_batchedUpdates(()=>{Zs==null||Zs(Vn),dr(Status.Initializing),ir({type:Action.DragStart,initialCoordinates:Rs,active:Ps}),lr({type:"onDragStart",event:Vn}),kr(hs.current),xr(tn)})},onMove(Rs){ir({type:Action.DragMove,coordinates:Rs})},onEnd:ks(Action.DragEnd),onCancel:ks(Action.DragCancel)});hs.current=bs;function ks(Rs){return async function(){const{active:zs,collisions:Zs,over:Vn,scrollAdjustedTranslate:Lo}=ss.current;let No=null;if(zs&&Lo){const{cancelDrop:mo}=wr.current;No={activatorEvent:tn,active:zs,collisions:Zs,delta:Lo,over:Vn},Rs===Action.DragEnd&&typeof mo=="function"&&await Promise.resolve(mo(No))&&(Rs=Action.DragCancel)}Pr.current=null,reactDomExports.unstable_batchedUpdates(()=>{ir({type:Rs}),dr(Status.Uninitialized),na(null),kr(null),xr(null),hs.current=null;const mo=Rs===Action.DragEnd?"onDragEnd":"onDragCancel";if(No){const qo=wr.current[mo];qo==null||qo(No),lr({type:mo,event:No})}})}}},[mr]),gs=reactExports.useCallback((ws,Ss)=>(Fs,vs)=>{const Os=Fs.nativeEvent,tn=mr.get(vs);if(Pr.current!==null||!tn||Os.dndKit||Os.defaultPrevented)return;const bs={active:tn};ws(Fs,Ss.options,bs)===!0&&(Os.dndKit={capturedBy:Ss.sensor},Pr.current=vs,Gr(Fs,Ss))},[mr,Gr]),xs=useCombineActivators(Yt,gs);useSensorSetup(Yt),useIsomorphicLayoutEffect$6(()=>{us&&cr===Status.Initializing&&dr(Status.Initialized)},[us,cr]),reactExports.useEffect(()=>{const{onDragMove:ws}=wr.current,{active:Ss,activatorEvent:Fs,collisions:vs,over:Os}=ss.current;if(!Ss||!Fs)return;const tn={active:Ss,activatorEvent:Fs,collisions:vs,delta:{x:Bs.x,y:Bs.y},over:Os};reactDomExports.unstable_batchedUpdates(()=>{ws==null||ws(tn),lr({type:"onDragMove",event:tn})})},[Bs.x,Bs.y]),reactExports.useEffect(()=>{const{active:ws,activatorEvent:Ss,collisions:Fs,droppableContainers:vs,scrollAdjustedTranslate:Os}=ss.current;if(!ws||Pr.current==null||!Ss||!Os)return;const{onDragOver:tn}=wr.current,bs=vs.get(yn),ks=bs&&bs.rect.current?{id:bs.id,rect:bs.rect.current,data:bs.data,disabled:bs.disabled}:null,Rs={active:ws,activatorEvent:Ss,collisions:Fs,delta:{x:Os.x,y:Os.y},over:ks};reactDomExports.unstable_batchedUpdates(()=>{na(ks),tn==null||tn(Rs),lr({type:"onDragOver",event:Rs})})},[yn]),useIsomorphicLayoutEffect$6(()=>{ss.current={activatorEvent:Tr,active:Mr,activeNode:Xr,collisionRect:qs,collisions:Ks,droppableRects:rs,draggableNodes:mr,draggingNode:js,draggingNodeRect:$s,droppableContainers:Rr,over:Dn,scrollableAncestors:_s,scrollAdjustedTranslate:Bs},_r.current={initial:$s,translated:qs}},[Mr,Xr,Ks,qs,mr,js,$s,rs,Rr,Dn,_s,Bs]),useAutoScroller({...cs,delta:jr,draggingRect:qs,pointerCoordinates:Gs,scrollableAncestors:_s,scrollableAncestorRects:Ms});const ms=reactExports.useMemo(()=>({active:Mr,activeNode:Xr,activeNodeRect:us,activatorEvent:Tr,collisions:Ks,containerNodeRect:fs,dragOverlay:ls,draggableNodes:mr,droppableContainers:Rr,droppableRects:rs,over:Dn,measureDroppableContainers:as,scrollableAncestors:_s,scrollableAncestorRects:Ms,measuringConfiguration:Yr,measuringScheduled:es,windowRect:As}),[Mr,Xr,us,Tr,Ks,fs,ls,mr,Rr,rs,Dn,as,_s,Ms,Yr,es,As]),ds=reactExports.useMemo(()=>({activatorEvent:Tr,activators:xs,active:Mr,activeNodeRect:us,ariaDescribedById:{draggable:zr},dispatch:ir,draggableNodes:mr,over:Dn,measureDroppableContainers:as}),[Tr,xs,Mr,us,ir,zr,mr,Dn,as]);return React$2.createElement(DndMonitorContext.Provider,{value:or},React$2.createElement(InternalContext.Provider,{value:ds},React$2.createElement(PublicContext.Provider,{value:ms},React$2.createElement(ActiveDraggableContext.Provider,{value:Ls},Kt)),React$2.createElement(RestoreFocus,{disabled:(Ut==null?void 0:Ut.restoreFocus)===!1})),React$2.createElement(Accessibility,{...Ut,hiddenTextDescribedById:zr}));function ys(){const ws=(Or==null?void 0:Or.autoScrollEnabled)===!1,Ss=typeof Ht=="object"?Ht.enabled===!1:Ht===!1,Fs=ur&&!ws&&!Ss;return typeof Ht=="object"?{...Ht,enabled:Fs}:{enabled:Fs}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Draggable";function useDraggable(et){let{id:dt,data:kt,disabled:$t=!1,attributes:Tt}=et;const Dt=useUniqueId(ID_PREFIX$1),{activators:Ft,activatorEvent:Ut,active:Ht,activeNodeRect:Kt,ariaDescribedById:Yt,draggableNodes:Jt,over:Zt}=reactExports.useContext(InternalContext),{role:er=defaultRole,roleDescription:rr="draggable",tabIndex:sr=0}=Tt??{},nr=(Ht==null?void 0:Ht.id)===dt,ir=reactExports.useContext(nr?ActiveDraggableContext:NullContext),[lr,or]=useNodeRef(),[cr,dr]=useNodeRef(),ur=useSyntheticListeners(Ft,dt),pr=useLatestValue(kt);useIsomorphicLayoutEffect$6(()=>(Jt.set(dt,{id:dt,key:Dt,node:lr,activatorNode:cr,data:pr}),()=>{const jr=Jt.get(dt);jr&&jr.key===Dt&&Jt.delete(dt)}),[Jt,dt]);const mr=reactExports.useMemo(()=>({role:er,tabIndex:sr,"aria-disabled":$t,"aria-pressed":nr&&er===defaultRole?!0:void 0,"aria-roledescription":rr,"aria-describedby":Yt.draggable}),[$t,er,sr,nr,rr,Yt.draggable]);return{active:Ht,activatorEvent:Ut,activeNodeRect:Kt,attributes:mr,isDragging:nr,listeners:$t?void 0:ur,node:lr,over:Zt,setNodeRef:or,setActivatorNodeRef:dr,transform:ir}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(et){let{data:dt,disabled:kt=!1,id:$t,resizeObserverConfig:Tt}=et;const Dt=useUniqueId(ID_PREFIX$1$1),{active:Ft,dispatch:Ut,over:Ht,measureDroppableContainers:Kt}=reactExports.useContext(InternalContext),Yt=reactExports.useRef({disabled:kt}),Jt=reactExports.useRef(!1),Zt=reactExports.useRef(null),er=reactExports.useRef(null),{disabled:rr,updateMeasurementsFor:sr,timeout:nr}={...defaultResizeObserverConfig,...Tt},ir=useLatestValue(sr??$t),lr=reactExports.useCallback(()=>{if(!Jt.current){Jt.current=!0;return}er.current!=null&&clearTimeout(er.current),er.current=setTimeout(()=>{Kt(Array.isArray(ir.current)?ir.current:[ir.current]),er.current=null},nr)},[nr]),or=useResizeObserver({callback:lr,disabled:rr||!Ft}),cr=reactExports.useCallback((mr,jr)=>{or&&(jr&&(or.unobserve(jr),Jt.current=!1),mr&&or.observe(mr))},[or]),[dr,ur]=useNodeRef(cr),pr=useLatestValue(dt);return reactExports.useEffect(()=>{!or||!dr.current||(or.disconnect(),Jt.current=!1,or.observe(dr.current))},[dr,or]),reactExports.useEffect(()=>(Ut({type:Action.RegisterDroppable,element:{id:$t,key:Dt,disabled:kt,node:dr,rect:Zt,data:pr}}),()=>Ut({type:Action.UnregisterDroppable,key:Dt,id:$t})),[$t]),reactExports.useEffect(()=>{kt!==Yt.current.disabled&&(Ut({type:Action.SetDroppableDisabled,id:$t,key:Dt,disabled:kt}),Yt.current.disabled=kt)},[$t,Dt,kt,Ut]),{active:Ft,rect:Zt,isOver:(Ht==null?void 0:Ht.id)===$t,node:dr,over:Ht,setNodeRef:ur}}function arrayMove(et,dt,kt){const $t=et.slice();return $t.splice(kt<0?$t.length+kt:kt,0,$t.splice(dt,1)[0]),$t}function getSortedRects(et,dt){return et.reduce((kt,$t,Tt)=>{const Dt=dt.get($t);return Dt&&(kt[Tt]=Dt),kt},Array(et.length))}function isValidIndex(et){return et!==null&&et>=0}function itemsEqual(et,dt){if(et===dt)return!0;if(et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}function normalizeDisabled(et){return typeof et=="boolean"?{draggable:et,droppable:et}:et}const rectSortingStrategy=et=>{let{rects:dt,activeIndex:kt,overIndex:$t,index:Tt}=et;const Dt=arrayMove(dt,$t,kt),Ft=dt[Tt],Ut=Dt[Tt];return!Ut||!Ft?null:{x:Ut.left-Ft.left,y:Ut.top-Ft.top,scaleX:Ut.width/Ft.width,scaleY:Ut.height/Ft.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=et=>{var dt;let{activeIndex:kt,activeNodeRect:$t,index:Tt,rects:Dt,overIndex:Ft}=et;const Ut=(dt=Dt[kt])!=null?dt:$t;if(!Ut)return null;if(Tt===kt){const Kt=Dt[Ft];return Kt?{x:0,y:kt<Ft?Kt.top+Kt.height-(Ut.top+Ut.height):Kt.top-Ut.top,...defaultScale$1}:null}const Ht=getItemGap$1(Dt,Tt,kt);return Tt>kt&&Tt<=Ft?{x:0,y:-Ut.height-Ht,...defaultScale$1}:Tt<kt&&Tt>=Ft?{x:0,y:Ut.height+Ht,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(et,dt,kt){const $t=et[dt],Tt=et[dt-1],Dt=et[dt+1];return $t?kt<dt?Tt?$t.top-(Tt.top+Tt.height):Dt?Dt.top-($t.top+$t.height):0:Dt?Dt.top-($t.top+$t.height):Tt?$t.top-(Tt.top+Tt.height):0:0}const ID_PREFIX="Sortable",Context=React$2.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(et){let{children:dt,id:kt,items:$t,strategy:Tt=rectSortingStrategy,disabled:Dt=!1}=et;const{active:Ft,dragOverlay:Ut,droppableRects:Ht,over:Kt,measureDroppableContainers:Yt}=useDndContext(),Jt=useUniqueId(ID_PREFIX,kt),Zt=Ut.rect!==null,er=reactExports.useMemo(()=>$t.map(ur=>typeof ur=="object"&&"id"in ur?ur.id:ur),[$t]),rr=Ft!=null,sr=Ft?er.indexOf(Ft.id):-1,nr=Kt?er.indexOf(Kt.id):-1,ir=reactExports.useRef(er),lr=!itemsEqual(er,ir.current),or=nr!==-1&&sr===-1||lr,cr=normalizeDisabled(Dt);useIsomorphicLayoutEffect$6(()=>{lr&&rr&&Yt(er)},[lr,er,rr,Yt]),reactExports.useEffect(()=>{ir.current=er},[er]);const dr=reactExports.useMemo(()=>({activeIndex:sr,containerId:Jt,disabled:cr,disableTransforms:or,items:er,overIndex:nr,useDragOverlay:Zt,sortedRects:getSortedRects(er,Ht),strategy:Tt}),[sr,Jt,cr.draggable,cr.droppable,or,er,nr,Ht,Zt,Tt]);return React$2.createElement(Context.Provider,{value:dr},dt)}const defaultNewIndexGetter=et=>{let{id:dt,items:kt,activeIndex:$t,overIndex:Tt}=et;return arrayMove(kt,$t,Tt).indexOf(dt)},defaultAnimateLayoutChanges=et=>{let{containerId:dt,isSorting:kt,wasDragging:$t,index:Tt,items:Dt,newIndex:Ft,previousItems:Ut,previousContainerId:Ht,transition:Kt}=et;return!Kt||!$t||Ut!==Dt&&Tt===Ft?!1:kt?!0:Ft!==Tt&&dt===Ht},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(et){let{disabled:dt,index:kt,node:$t,rect:Tt}=et;const[Dt,Ft]=reactExports.useState(null),Ut=reactExports.useRef(kt);return useIsomorphicLayoutEffect$6(()=>{if(!dt&&kt!==Ut.current&&$t.current){const Ht=Tt.current;if(Ht){const Kt=getClientRect($t.current,{ignoreTransform:!0}),Yt={x:Ht.left-Kt.left,y:Ht.top-Kt.top,scaleX:Ht.width/Kt.width,scaleY:Ht.height/Kt.height};(Yt.x||Yt.y)&&Ft(Yt)}}kt!==Ut.current&&(Ut.current=kt)},[dt,kt,$t,Tt]),reactExports.useEffect(()=>{Dt&&Ft(null)},[Dt]),Dt}function useSortable(et){let{animateLayoutChanges:dt=defaultAnimateLayoutChanges,attributes:kt,disabled:$t,data:Tt,getNewIndex:Dt=defaultNewIndexGetter,id:Ft,strategy:Ut,resizeObserverConfig:Ht,transition:Kt=defaultTransition}=et;const{items:Yt,containerId:Jt,activeIndex:Zt,disabled:er,disableTransforms:rr,sortedRects:sr,overIndex:nr,useDragOverlay:ir,strategy:lr}=reactExports.useContext(Context),or=normalizeLocalDisabled($t,er),cr=Yt.indexOf(Ft),dr=reactExports.useMemo(()=>({sortable:{containerId:Jt,index:cr,items:Yt},...Tt}),[Jt,Tt,cr,Yt]),ur=reactExports.useMemo(()=>Yt.slice(Yt.indexOf(Ft)),[Yt,Ft]),{rect:pr,node:mr,isOver:jr,setNodeRef:Rr}=useDroppable({id:Ft,data:dr,disabled:or.droppable,resizeObserverConfig:{updateMeasurementsFor:ur,...Ht}}),{active:br,activatorEvent:_r,activeNodeRect:Mr,attributes:Pr,setNodeRef:Or,listeners:kr,isDragging:Tr,over:xr,setActivatorNodeRef:wr,transform:zr}=useDraggable({id:Ft,data:dr,attributes:{...defaultAttributes,...kt},disabled:or.draggable}),Hr=useCombinedRefs(Rr,Or),Yr=!!br,rs=Yr&&!rr&&isValidIndex(Zt)&&isValidIndex(nr),as=!ir&&Tr,es=as&&rs?zr:null,Wr=rs?es??(Ut??lr)({rects:sr,activeNodeRect:Mr,activeIndex:Zt,overIndex:nr,index:cr}):null,cs=isValidIndex(Zt)&&isValidIndex(nr)?Dt({id:Ft,items:Yt,activeIndex:Zt,overIndex:nr}):cr,ns=br==null?void 0:br.id,us=reactExports.useRef({activeId:ns,items:Yt,newIndex:cs,containerId:Jt}),fs=Yt!==us.current.items,ss=dt({active:br,containerId:Jt,isDragging:Tr,isSorting:Yr,id:Ft,index:cr,items:Yt,newIndex:us.current.newIndex,previousItems:us.current.items,previousContainerId:us.current.containerId,transition:Kt,wasDragging:us.current.activeId!=null}),ps=useDerivedTransform({disabled:!ss,index:cr,node:mr,rect:pr});return reactExports.useEffect(()=>{Yr&&us.current.newIndex!==cs&&(us.current.newIndex=cs),Jt!==us.current.containerId&&(us.current.containerId=Jt),Yt!==us.current.items&&(us.current.items=Yt)},[Yr,cs,Jt,Yt]),reactExports.useEffect(()=>{if(ns===us.current.activeId)return;if(ns!=null&&us.current.activeId==null){us.current.activeId=ns;return}const js=setTimeout(()=>{us.current.activeId=ns},50);return()=>clearTimeout(js)},[ns]),{active:br,activeIndex:Zt,attributes:Pr,data:dr,rect:pr,index:cr,newIndex:cs,items:Yt,isOver:jr,isSorting:Yr,isDragging:Tr,listeners:kr,node:mr,overIndex:nr,over:xr,setNodeRef:Hr,setActivatorNodeRef:wr,setDroppableNodeRef:Rr,setDraggableNodeRef:Or,transform:ps??Wr,transition:ls()};function ls(){if(ps||fs&&us.current.newIndex===cr)return disabledTransition;if(!(as&&!isKeyboardEvent(_r)||!Kt)&&(Yr||ss))return CSS.Transition.toString({...Kt,property:transitionProperty})}}function normalizeLocalDisabled(et,dt){var kt,$t;return typeof et=="boolean"?{draggable:et,droppable:!1}:{draggable:(kt=et==null?void 0:et.draggable)!=null?kt:dt.draggable,droppable:($t=et==null?void 0:et.droppable)!=null?$t:dt.droppable}}KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left;function FAQBlock({block:et,index:dt,updateBlock:kt,updateChildBlock:$t,openAIModal:Tt,containerIndex:Dt}){const Ft=React$2.useRef(!1);reactExports.useEffect(()=>{if(Ft.current||!et.items)return;if(!et.items.some(Zt=>!Zt.id)){Ft.current=!0;return}const Jt=et.items.map(Zt=>({...Zt,id:Zt.id||crypto.randomUUID()}));Ft.current=!0,kt(dt,"items",Jt)},[]);const Ut=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:5}}));function Ht(Yt){const{active:Jt,over:Zt}=Yt;if(Zt&&Jt.id!==Zt.id){const er=et.items||[],rr=er.findIndex(ir=>ir.id===Jt.id),sr=er.findIndex(ir=>ir.id===Zt.id),nr=arrayMove(er,rr,sr);kt(dt,"items",nr)}}function Kt({id:Yt}){const{attributes:Jt,listeners:Zt,setNodeRef:er,transform:rr,transition:sr}=useSortable({id:Yt}),nr={transform:CSS.Transform.toString(rr),transition:sr};return jsxRuntimeExports.jsx("div",{ref:er,style:nr,...Jt,...Zt,className:"cursor-grab active:cursor-grabbing text-gray-400 mr-3 select-none text-xl",children:""})}return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"FAQ Section"}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tt({blockType:"faq",blockIndex:dt,updateChildBlock:$t,containerIndex:Dt,currentText:(et.items||[]).map(Yt=>`Q: ${Yt.q}
A: ${Yt.a}`).join(`

`),role:"faq"}),onPointerDown:Yt=>Yt.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Generate or improve FAQs with AI",children:"AI"})}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-6",children:"Section Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",onPointerDown:Yt=>Yt.stopPropagation(),onChange:Yt=>kt(dt,"title",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#ffffff",onChange:Yt=>kt(dt,"text_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#000000",onChange:Yt=>kt(dt,"bg_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.bg_color})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:Yt=>kt(dt,"match_main_bg",Yt.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Yt=>kt(dt,"use_gradient",Yt.target.checked)})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:Yt=>kt(dt,"gradient_start",Yt.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:Yt=>kt(dt,"gradient_end",Yt.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Yt=>kt(dt,"gradient_direction",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left to Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top to Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal"}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:Yt=>kt(dt,"use_no_bg",Yt.target.checked)})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"left",onChange:Yt=>kt(dt,"alignment",Yt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm w-full",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 space-y-4",children:jsxRuntimeExports.jsx(DndContext,{sensors:Ut,collisionDetection:closestCenter,onDragEnd:Ht,children:jsxRuntimeExports.jsx(SortableContext,{items:(et.items||[]).map(Yt=>Yt.id),strategy:verticalListSortingStrategy,children:(et.items||[]).map(Yt=>jsxRuntimeExports.jsxs("div",{className:"bg-[#1f2937]/60 p-4 rounded-lg border border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Kt,{id:Yt.id}),jsxRuntimeExports.jsx("input",{type:"text",value:Yt.q,onChange:Jt=>{const Zt=et.items.map(er=>er.id===Yt.id?{...er,q:Jt.target.value}:er);kt(dt,"items",Zt)},className:"w-full bg-black border border-gray-600 rounded text-white p-2"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Jt=et.items.map(Zt=>Zt.id===Yt.id?{...Zt,open:!Zt.open}:Zt);kt(dt,"items",Jt)},className:"ml-3 text-gray-300 text-xl",children:Yt.open?"":"+"})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-300 ${Yt.open?"max-h-40 mt-3":"max-h-0"}`,children:jsxRuntimeExports.jsx("textarea",{value:Yt.a,onChange:Jt=>{const Zt=et.items.map(er=>er.id===Yt.id?{...er,a:Jt.target.value}:er);kt(dt,"items",Zt)},className:"w-full bg-black border border-gray-600 rounded text-white p-2 h-20"})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Jt=et.items.filter(Zt=>Zt.id!==Yt.id);kt(dt,"items",Jt)},className:"text-red-400 text-xs mt-3 hover:underline",children:"Remove Question"})]},Yt.id))})})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(dt,"items",[...et.items||[],{id:crypto.randomUUID(),q:"New Question",a:"Your answer...",open:!1}]),className:"mt-4 bg-green text-black rounded-lg px-4 py-2 text-sm font-semibold hover:bg-green/80",children:"Add FAQ Item"})]})}function ImageBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t,getLabelContrast:Tt,adjustForLandingOverlay:Dt,landing:Ft}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 transition-all duration-300 bg-[#0F172A]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Image Upload"}),jsxRuntimeExports.jsx("span",{className:"text-xs bg-[#1E293B] text-gray-300 px-2 py-1 rounded-full border border-gray-600",children:"Max 5 MB"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Background"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#000000",onChange:Ut=>kt(dt,"bg_color",Ut.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.bg_color||"#000000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:Ut=>kt(dt,"match_main_bg",Ut.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Ut=>kt(dt,"use_gradient",Ut.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:Ut=>kt(dt,"use_no_bg",Ut.target.checked)})]})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:Ut=>kt(dt,"gradient_start",Ut.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:Ut=>kt(dt,"gradient_end",Ut.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Ut=>kt(dt,"gradient_direction",Ut.target.value),className:"w-full p-2 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-gray-700 p-6 mt-4",style:{background:et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.match_main_bg?Dt($t):et.bg_color||"transparent"},children:et.image_url?jsxRuntimeExports.jsxs("div",{children:[(()=>{const Ut=!!et.has_alpha;return jsxRuntimeExports.jsx("div",{style:{background:Ut?"repeating-conic-gradient(#e0e0e0 0% 25%, #ffffff 0% 50%) 50% / 20px 20px":"transparent",padding:Ut?"10px":"0px",borderRadius:`${et.radius||0}px`},children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:"rounded-lg mx-auto",style:{maxWidth:et.full_width?"100%":et.width?`${et.width}%`:"100%",width:"100%",padding:`${et.padding||0}px`,borderRadius:`${et.radius||0}px`,boxShadow:et.shadow?(()=>{const Ht=(et.shadow_angle||135)*Math.PI/180,Kt=Math.round(Math.cos(Ht)*(et.shadow_offset||10)),Yt=Math.round(Math.sin(Ht)*(et.shadow_offset||10));return`${Kt}px ${Yt}px ${et.shadow_depth||25}px ${et.shadow_color||"rgba(0,0,0,0.5)"}`})():"none"}})})})(),jsxRuntimeExports.jsx("button",{type:"button",className:"text-red-400 text-xs mt-3 hover:underline mx-auto block text-center",onClick:Ut=>{Ut.stopPropagation(),kt(dt,"image_url","")},children:"Remove Image"})]}):jsxRuntimeExports.jsxs("label",{htmlFor:`imageUpload-${et.id}`,className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-600 hover:border-green rounded-xl py-10 px-6 cursor-pointer transition-all group",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500 group-hover:text-green transition",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-6-9l-3-3m0 0l-3 3m3-3V15"})}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-sm text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-medium",children:"Click to upload"})," or drag image"]}),jsxRuntimeExports.jsx("input",{id:`imageUpload-${et.id}`,type:"file",accept:"image/*",onChange:async Ut=>{const Ht=Ut.target.files[0];if(!Ht)return;const Kt=URL.createObjectURL(Ht);kt(dt,"image_url",Kt);const Yt=new FormData;Yt.append("image",Ht),Yt.append("landingId",Ft.id),Yt.append("blockId",et.id);try{const Jt=await axiosInstance.post("/landing/upload-media-block",Yt,{headers:{"Content-Type":"multipart/form-data"}});Jt.data.success?(kt(dt,"image_url",Jt.data.url),kt(dt,"has_alpha",Jt.data.has_alpha),y$4.success("Image uploaded!")):y$4.error("Upload failed")}catch(Jt){console.error(Jt),y$4.error("Upload error")}finally{URL.revokeObjectURL(Kt)}},className:"hidden"})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Padding (px)"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.padding||0,onChange:Ut=>kt(dt,"padding",Number(Ut.target.value)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Image Width (%)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"100",value:et.width||100,onChange:Ut=>kt(dt,"width",Number(Ut.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[et.width||100,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Rounded Corners (px)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",value:et.radius||0,onChange:Ut=>kt(dt,"radius",Number(Ut.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[et.radius||0,"px"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Shadow Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.shadow_color||"#000000",onChange:Ut=>kt(dt,"shadow_color",Ut.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600 mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Shadow Depth"}),jsxRuntimeExports.jsx("input",{type:"range",min:"5",max:"60",value:et.shadow_depth||25,onChange:Ut=>kt(dt,"shadow_depth",Number(Ut.target.value)),className:"w-full mt-3"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Shadow Angle ()"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"360",value:et.shadow_angle||135,onChange:Ut=>kt(dt,"shadow_angle",Number(Ut.target.value)),className:"w-full mt-3"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Shadow Offset"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"50",value:et.shadow_offset||10,onChange:Ut=>kt(dt,"shadow_offset",Number(Ut.target.value)),className:"w-full mt-3"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Caption"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.caption||"",placeholder:"Optional caption",onChange:Ut=>kt(dt,"caption",Ut.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Enable Shadow"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.shadow||!1,onChange:Ut=>kt(dt,"shadow",Ut.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||$t)},children:"Full Width"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.full_width||!1,onChange:Ut=>kt(dt,"full_width",Ut.target.checked)})]})]})}function SecureCheckoutBlock({block:et,index:dt,updateBlock:kt}){var $t;return jsxRuntimeExports.jsxs("div",{className:"mt-3 transition-all duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"bg-[#0F172A]/60 border border-gray-700 p-6 rounded-xl mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-silver mb-4",children:"Secure Checkout Settings"}),jsxRuntimeExports.jsx("label",{className:"block text-sm text-gray-300 font-semibold mb-1",children:"Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",onChange:Tt=>kt(dt,"title",Tt.target.value),placeholder:"Secure Checkout",className:"w-full mb-4 p-2 bg-black border border-gray-600 rounded text-white"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Subtext"}),jsxRuntimeExports.jsx("textarea",{value:et.subtext||"",onChange:Tt=>kt(dt,"subtext",Tt.target.value),placeholder:"Your information is protected by industry-leading encryption and secure payment processing.",className:"w-full mt-1 p-2 h-20 bg-black border border-gray-600 rounded text-white"}),jsxRuntimeExports.jsx("label",{className:"block mt-4 text-sm text-gray-300 font-semibold",children:"Trust Badges List"}),(et.trust_items||[]).map((Tt,Dt)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:Tt,onChange:Ft=>{const Ut=[...et.trust_items];Ut[Dt]=Ft.target.value,kt(dt,"trust_items",Ut)},className:"flex-1 p-2 bg-black border border-gray-600 rounded text-white"}),jsxRuntimeExports.jsx("button",{className:"text-red-400 text-xs",onClick:()=>{const Ft=et.trust_items.filter((Ut,Ht)=>Ht!==Dt);kt(dt,"trust_items",Ft)},children:"Remove"})]},Dt)),jsxRuntimeExports.jsx("button",{onClick:()=>kt(dt,"trust_items",[...et.trust_items||[],"Secure SSL Encryption"]),className:"mt-3 text-sm px-3 py-2 rounded bg-green text-black font-semibold hover:bg-green/80",children:"Add Trust Item"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 rounded-lg border border-gray-700 bg-[#1a2537]/60",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Guarantee Message"}),jsxRuntimeExports.jsx("textarea",{value:et.guarantee||"",onChange:Tt=>kt(dt,"guarantee",Tt.target.value),placeholder:"30 day money back guarantee on all purchases",className:"w-full mt-1 p-2 bg-black border border-gray-600 rounded text-white h-20"})]}),jsxRuntimeExports.jsx("label",{className:"block mt-6 text-sm text-gray-300 font-semibold",children:"Payment Badge URL"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.payment_badge||"",onChange:Tt=>kt(dt,"payment_badge",Tt.target.value),placeholder:"https://your-image.com/stripebadge.png",className:"w-full p-2 bg-black border border-gray-600 rounded text-white"}),et.payment_badge&&jsxRuntimeExports.jsx("img",{src:et.payment_badge,alt:"Payment Badge",className:"w-40 mt-4 opacity-90 mx-auto"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-[1.25rem] font-extrabold text-white flex items-center justify-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4 text-white"}),et.title||"Secure Checkout"]}),et.subtext&&jsxRuntimeExports.jsx("p",{className:"text-gray-300 max-w-xl mx-auto mb-4",children:et.subtext}),(($t=et.trust_items)==null?void 0:$t.length)>0&&jsxRuntimeExports.jsx("ul",{className:"flex flex-col items-center gap-1 mb-4",children:et.trust_items.map((Tt,Dt)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2 text-white text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:""})," ",Tt]},Dt))}),et.guarantee&&jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mb-4",children:et.guarantee}),et.payment_badge&&jsxRuntimeExports.jsx("img",{src:et.payment_badge,className:"w-40 opacity-80 mx-auto mt-2"})]})]})}function AudioPlayerBlock({block:et,index:dt,updateBlock:kt,landing:$t,bgTheme:Tt}){var Rr;const Ft=reactExports.useRef(null),Ut=reactExports.useRef(!1),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(0),[Zt,er]=reactExports.useState(0),[rr,sr]=reactExports.useState(0),[nr,ir]=reactExports.useState(!1),lr=br=>{if(!br)return"#f3f4f6";const _r=br.replace("#","");if(_r.length!==6)return"#f3f4f6";const Mr=parseInt(_r.substring(0,2),16),Pr=parseInt(_r.substring(2,4),16),Or=parseInt(_r.substring(4,6),16);return(Mr*299+Pr*587+Or*114)/1e3>160?"#1f2937":"#f3f4f6"};function or(br){if(!br||isNaN(br))return"00:00";const _r=Math.floor(br/60),Mr=Math.floor(br%60);return`${String(_r).padStart(2,"0")}:${String(Mr).padStart(2,"0")}`}const cr=br=>{kt(dt,"audio_url",br.audio_url),kt(dt,"title",br.title),kt(dt,"cover_url",br.cover_url||""),kt(dt,"audio_name",br.title||"Track"),Jt(0),er(0),sr(0),Kt(!1),Ut.current=!1},dr=()=>{const br=Ft.current;br&&(br.paused?br.play().catch(()=>{}):br.pause())};reactExports.useEffect(()=>{const br=Ft.current;if(!br)return;const _r=()=>Kt(!0),Mr=()=>Kt(!1),Pr=()=>{er(br.duration||0)},Or=()=>{const Tr=br.currentTime||0,xr=br.duration||1;if(et.preview_enabled&&et.preview_duration>0&&Tr>=Math.min(et.preview_duration,xr)){Ut.current||(Ut.current=!0,y$4.info("Preview ended. Purchase to unlock the full track.")),br.pause(),br.currentTime=0,Jt(0),sr(0);return}Jt(Tr),sr(Tr/xr*100)},kr=()=>{Kt(!1);const Tr=et.playlist||[],xr=Tr.findIndex(zr=>zr.audio_url===et.audio_url),wr=Tr[xr+1];wr&&cr(wr)};return br.addEventListener("play",_r),br.addEventListener("pause",Mr),br.addEventListener("loadedmetadata",Pr),br.addEventListener("timeupdate",Or),br.addEventListener("ended",kr),()=>{br.removeEventListener("play",_r),br.removeEventListener("pause",Mr),br.removeEventListener("loadedmetadata",Pr),br.removeEventListener("timeupdate",Or),br.removeEventListener("ended",kr)}},[et.audio_url,et.preview_enabled,et.preview_duration,et.playlist]);async function ur(br,_r,Mr){const Pr=await axiosInstance.post("/seller-checkout/create-audio-checkout",{audio_type:"single",landingPageId:Mr.id,blockId:_r.id,sellerId:Mr.user_id,audio_urls:[br.audio_url],product_name:br.title||"Audio Track",price_in_cents:Math.round((br.price||_r.single_price)*100),cover_url:br.cover_url||_r.cover_url||""});Pr.data.url&&(window.location.href=Pr.data.url)}async function pr(br,_r){var Pr,Or,kr;const Mr=await axiosInstance.post("/seller-checkout/create-audio-checkout",{audio_type:"album",landingPageId:_r.id,blockId:br.id,sellerId:_r.user_id,audio_urls:br.playlist.map(Tr=>Tr.audio_url),product_name:((Pr=br.album_button_text)==null?void 0:Pr.trim())||"Buy Album",price_in_cents:Math.round(br.album_price*100),cover_url:br.cover_url||((kr=(Or=br.playlist)==null?void 0:Or[0])==null?void 0:kr.cover_url)||""});Mr.data.url&&(window.location.href=Mr.data.url)}function mr(br){const _r=Math.min(br,1800),Mr=[];for(let Pr=10;Pr<=_r;Pr+=30){const Or=Math.floor(Pr/60),kr=Pr%60,Tr=Or>0?`${Or}m ${kr>0?kr+"s":""}`:`${kr}s`;Mr.push({value:Pr,label:Tr})}return Mr}function jr(br){return new Promise((_r,Mr)=>{const Pr=document.createElement("audio");Pr.preload="metadata",Pr.onloadedmetadata=()=>{URL.revokeObjectURL(Pr.src),Pr.duration>10800?Mr(new Error("Audio exceeds the 3 hour maximum length")):_r()},Pr.onerror=()=>{Mr(new Error("Unable to read audio metadata"))},Pr.src=URL.createObjectURL(br)})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative rounded-xl p-6 mt-3 border border-gray-700 transition-all",style:{background:et.match_main_bg?Tt:et.use_gradient?`linear-gradient(${et.gradient_direction}, ${et.gradient_start}, ${et.gradient_end})`:et.bg_color||"transparent"},children:[nr&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50 rounded-xl",children:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-t-transparent border-green rounded-full animate-spin"})}),jsxRuntimeExports.jsx("audio",{ref:Ft,src:et.audio_url||"",preload:"metadata"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[et.show_cover&&et.cover_url&&jsxRuntimeExports.jsx("img",{src:et.cover_url,className:"w-[70px] h-[70px] object-cover rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-left",children:[et.show_title&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsx("span",{className:"font-semibold",style:{color:et.text_color},children:et.title})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-[38px] h-[38px] rounded-lg bg-[#1e293b] flex items-center justify-center cursor-pointer",onClick:()=>{const br=Ft.current;br&&(br.currentTime=Math.max(0,br.currentTime-10))},children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",fill:et.progress_color,children:jsxRuntimeExports.jsx("path",{d:"M12 16V4L4 10l8 6z"})})}),jsxRuntimeExports.jsx("div",{onClick:dr,className:"w-[45px] h-[45px] rounded-full flex items-center justify-center cursor-pointer shadow-lg",style:{background:et.progress_color},children:Ht?jsxRuntimeExports.jsx("svg",{width:"26",height:"26",fill:"#000",children:jsxRuntimeExports.jsx("path",{d:"M8 4h4v16H8zm6 0h4v16h-4z"})}):jsxRuntimeExports.jsx("svg",{width:"26",height:"26",fill:"#000",children:jsxRuntimeExports.jsx("path",{d:"M8 4v16l12-8z"})})}),jsxRuntimeExports.jsx("div",{className:"w-[38px] h-[38px] rounded-lg bg-[#1e293b] flex items-center justify-center cursor-pointer",onClick:()=>{const br=Ft.current;if(!br)return;const _r=br.duration||1/0;br.currentTime=Math.min(_r,br.currentTime+10)},children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",fill:et.progress_color,children:jsxRuntimeExports.jsx("path",{d:"M8 4v12l8-6-8-6z"})})}),jsxRuntimeExports.jsx("div",{className:"w-[120px] h-[6px] bg-[#1f2937] rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full",style:{width:"70%",background:et.progress_color}})})]}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:100,value:rr,onChange:br=>{const _r=Ft.current;if(!_r)return;const Mr=Number(br.target.value),Pr=_r.duration||1;let Or=Mr/100*Pr;const kr=et.preview_enabled&&et.preview_duration>0?Math.min(et.preview_duration,Pr):null;if(kr!==null&&Or>=kr){Or=kr,sr(kr/Pr*100),Jt(kr),_r.currentTime=kr;return}_r.currentTime=Or,sr(Mr),Jt(Or)},className:"w-full mt-4 accent-green cursor-pointer"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-gray-400 text-sm mt-1",children:[jsxRuntimeExports.jsx("span",{children:or(Yt)}),jsxRuntimeExports.jsx("span",{children:or(Zt)})]})]})]}),((Rr=et.playlist)==null?void 0:Rr.length)>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-silver mb-2 font-semibold",children:"Playlist"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:et.playlist.map((br,_r)=>{const Mr=et.audio_url===br.audio_url;return jsxRuntimeExports.jsx("li",{className:`p-3 rounded border cursor-pointer 
    ${Mr?"bg-green/20 border-green":"bg-[#1E293B] border-gray-700 hover:bg-[#2A3A4F]"}
  `,onClick:()=>cr(br),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full",children:[br.cover_url&&jsxRuntimeExports.jsx("img",{src:br.cover_url,className:"w-10 h-10 object-cover rounded"}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-white truncate",children:br.title}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm mr-3",children:br.duration||"--:--"}),et.sell_singles&&jsxRuntimeExports.jsx("button",{type:"button",onClick:Pr=>{Pr.stopPropagation(),ur(br,et,$t)},className:"px-3 py-1 rounded bg-green text-black font-semibold text-sm",children:et.single_button_text||"Buy"})]})},_r)})})]}),et.sell_album&&et.playlist.length>0&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>pr(et,$t),className:"mt-4 w-full py-3 bg-green text-black font-semibold rounded-lg",children:et.album_button_text||"Buy Album"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-6 p-4 rounded-lg bg-[#111]/40 border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Playback Appearance"}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mb-1 block",children:"Progress Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.progress_color,onChange:br=>kt(dt,"progress_color",br.target.value),className:"w-10 h-10 rounded-full cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.progress_color,onChange:br=>kt(dt,"progress_color",br.target.value),onBlur:br=>{const _r=br.target.value.startsWith("#")?br.target.value:`#${br.target.value}`;kt(dt,"progress_color",_r)},className:"w-24 p-1 bg-black border border-gray-700 rounded text-white text-sm",placeholder:"#22c55e"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:lr(et.bg_color)},children:"Match Section Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg,onChange:br=>kt(dt,"match_main_bg",br.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:lr(et.bg_color)},children:"Use Gradient Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient,onChange:br=>kt(dt,"use_gradient",br.target.checked)})]}),et.use_gradient?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start,onChange:br=>kt(dt,"gradient_start",br.target.value),className:"w-full h-10 rounded mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end,onChange:br=>kt(dt,"gradient_end",br.target.value),className:"w-full h-10 rounded mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction,onChange:br=>kt(dt,"gradient_direction",br.target.value),className:"w-full p-2 rounded bg-black border border-gray-700 text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color,onChange:br=>kt(dt,"bg_color",br.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.bg_color,onChange:br=>kt(dt,"bg_color",br.target.value),className:"w-24 p-1 bg-black border border-gray-700 rounded text-white text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Title Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color,onChange:br=>kt(dt,"text_color",br.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color,onChange:br=>kt(dt,"text_color",br.target.value),className:"w-24 p-1 bg-black border border-gray-700 rounded text-white text-sm"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#111]/40 border border-gray-800 rounded-lg space-y-4 mt-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Track Title"}),jsxRuntimeExports.jsx("input",{value:et.title||"",onChange:br=>kt(dt,"title",br.target.value),className:"w-full p-2 rounded bg-black border border-gray-700 text-white"}),jsxRuntimeExports.jsx("input",{id:`audioUpload-${et.id}`,type:"file",accept:"audio/*",className:"hidden",onChange:async br=>{var Mr;const _r=br.target.files[0];if(_r){ir(!0);try{await jr(_r);const Pr=await axiosInstance.post("/landing/sign-upload",{fileName:_r.name,mimeType:_r.type,landingId:$t.id,blockId:et.id});if(!((Mr=Pr.data)!=null&&Mr.success))throw new Error("Failed to get upload URL");const{uploadUrl:Or,publicUrl:kr}=Pr.data;await fetch(Or,{method:"PUT",body:_r,headers:{"Content-Type":_r.type,"x-amz-acl":"public-read"}});const Tr={title:_r.name.replace(/\.[^/.]+$/,""),audio_url:kr,cover_url:et.cover_url||"",price:et.single_price||"",stripe_product_id:"",stripe_price_id:""},xr=[...et.playlist||[],Tr];kt(dt,"playlist",xr),kt(dt,"audio_url",Tr.audio_url),kt(dt,"audio_name",Tr.title),kt(dt,"title",Tr.title),y$4.success("Audio uploaded successfully")}catch(Pr){console.error(Pr),y$4.error(Pr.message||"Upload failed")}finally{ir(!1),br.target.value=""}}}}),jsxRuntimeExports.jsx("label",{htmlFor:`audioUpload-${et.id}`,className:"px-4 py-2 bg-blue rounded cursor-pointer text-white inline-block mt-2",children:"Upload Audio"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{kt(dt,"audio_url",""),kt(dt,"audio_name",""),kt(dt,"title",""),Jt(0),er(0),sr(0),Kt(!1);const br=(et.playlist||[]).filter(_r=>_r.audio_url!==et.audio_url);kt(dt,"playlist",br),y$4.success("Audio removed.")},className:"ml-3 px-4 py-2 bg-red-600 hover:bg-red-700 rounded text-white inline-block mt-2",children:"Remove Audio"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 block",children:"Audio File"}),jsxRuntimeExports.jsx("input",{value:et.audio_name||"No audio uploaded",readOnly:!0,className:"w-full p-2 rounded bg-black border border-gray-700 text-white",placeholder:"No audio uploaded"}),jsxRuntimeExports.jsx("input",{id:`coverUpload-${et.id}`,type:"file",accept:"image/*",onChange:async br=>{const _r=br.target.files[0];if(!_r)return;const Mr=new FormData;Mr.append("image",_r),Mr.append("landingId",$t.id),Mr.append("blockId",et.id),ir(!0);try{const Pr=await axiosInstance.post("/landing/upload-media-block",Mr,{headers:{"Content-Type":"multipart/form-data"}});if(Pr.data.success){const Or=Pr.data.url,kr=(et.playlist||[]).map(Tr=>Tr.audio_url===et.audio_url?{...Tr,cover_url:Or}:Tr);kt(dt,"playlist",kr),kt(dt,"cover_url",Or),kt(dt,"cover_name",Pr.data.originalName),y$4.success("Cover updated!")}else y$4.error("Upload failed")}catch(Pr){console.error(Pr),y$4.error("Upload error")}finally{ir(!1)}},className:"hidden"}),jsxRuntimeExports.jsx("label",{htmlFor:`coverUpload-${et.id}`,className:"px-4 py-2 bg-royalPurple rounded cursor-pointer text-white inline-block mt-2",children:"Upload Cover"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{kt(dt,"cover_url",""),kt(dt,"cover_name","");const br=(et.playlist||[]).map(_r=>_r.audio_url===et.audio_url?{..._r,cover_url:""}:_r);kt(dt,"playlist",br),y$4.success("Cover removed.")},className:"ml-3 px-4 py-2 bg-red-600 hover:bg-red-700 rounded text-white inline-block mt-2",children:"Remove Cover"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 block",children:"Cover Image URL"}),jsxRuntimeExports.jsx("input",{value:et.cover_name||"No cover uploaded",readOnly:!0,className:"w-full p-2 rounded bg-black border border-gray-700 text-white"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#111]/40 border border-gray-800 rounded-lg space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-silver font-semibold text-lg",children:"Selling Options"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-300",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.sell_singles,onChange:br=>kt(dt,"sell_singles",br.target.checked)}),"Sell Individual Tracks"]}),et.sell_singles&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Default Single Price"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white",value:et.single_price,onChange:br=>kt(dt,"single_price",br.target.value),placeholder:"0.00"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-300",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.sell_album,onChange:br=>kt(dt,"sell_album",br.target.checked)}),"Sell Full Album"]}),et.sell_album&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Album Price"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white",value:et.album_price,onChange:br=>kt(dt,"album_price",br.target.value),placeholder:"9.99"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Album Button Text"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white",value:et.album_button_text,onChange:br=>kt(dt,"album_button_text",br.target.value)})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-300",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.preview_enabled,onChange:br=>{kt(dt,"preview_enabled",br.target.checked),br.target.checked&&!et.preview_duration&&kt(dt,"preview_duration",10)}}),"Limit Playback to Preview Only"]}),et.preview_enabled&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Preview Duration"}),jsxRuntimeExports.jsx("select",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white mt-1",value:et.preview_duration,onChange:br=>kt(dt,"preview_duration",Number(br.target.value)),children:mr(Zt).map(br=>jsxRuntimeExports.jsx("option",{value:br.value,children:br.label},br.value))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Choose up to 30 minutes based on the audio length."})]})]})]})]})}function SortableContainerBlock({block:et,index:dt,updateBlock:kt,removeBlock:$t,moveBlockUp:Tt,moveBlockDown:Dt,activeChild:Ft,setActiveChild:Ut,bgTheme:Ht,pdfList:Kt,landing:Yt,openAIModal:Jt}){var rr;const Zt=(sr,nr,ir)=>{kt(dt,"children",(lr=[])=>{const or=[...lr];return or[sr]={...or[sr],[nr]:ir},or})},er=(sr,nr,ir)=>{Zt(sr,nr,ir)};return jsxRuntimeExports.jsxs("div",{"data-drop-id":dt,"data-parent-id":null,onClick:sr=>{sr.stopPropagation(),Ut(null)},className:`
        mb-4 sm:mb-6
        rounded-xl
        p-2 sm:p-4
        bg-dashboard-bg-light/70 dark:bg-dashboard-bg-dark/70
        transition-all duration-200
        border
        border-dashboard-border-light dark:border-dashboard-border-dark
        hover:border-dashed
        hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-dashboard-muted-light dark:text-green font-bold text-lg mr-auto",children:et.title||"Untitled Section"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:sr=>{sr.stopPropagation(),Tt(et.id)},className:`
            px-2 py-1 text-xs rounded
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
          `,children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:sr=>{sr.stopPropagation(),Dt(et.id)},className:`
            px-2 py-1 text-xs rounded
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
          `,children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:sr=>{sr.stopPropagation(),kt(dt,"collapsed",!et.collapsed)},className:`
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
          `,children:""})]}),!et.collapsed&&jsxRuntimeExports.jsx("input",{value:et.title||"",onClick:sr=>sr.stopPropagation(),onChange:sr=>kt(dt,"title",sr.target.value),className:`
            mb-3 w-full
            rounded px-3 py-2 text-sm
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            text-dashboard-text-light dark:text-dashboard-text-dark
            border
            border-dashboard-border-light dark:border-dashboard-border-dark
          `}),!et.collapsed&&jsxRuntimeExports.jsx("div",{className:"rounded-md p-0.5 sm:p-1 transition-colors",children:jsxRuntimeExports.jsx(SortableContext,{items:(et.children||[]).map(sr=>sr.id),strategy:verticalListSortingStrategy,children:(rr=et.children)==null?void 0:rr.map((sr,nr)=>jsxRuntimeExports.jsx(React$2.Fragment,{children:jsxRuntimeExports.jsx(MemoizedSortableBlock,{id:sr.id,block:sr,index:nr,updateChildBlock:Zt,containerIndex:dt,updateBlock:er,activeChild:Ft,setActiveChild:Ut,removeBlock:ir=>{kt(dt,"children",et.children.filter((lr,or)=>or!==ir))},bgTheme:Ht,pdfList:Kt,landing:Yt,openAIModal:Jt},sr.id)},sr.id))})}),jsxRuntimeExports.jsx("button",{onClick:sr=>{sr.stopPropagation(),$t(dt)},className:"mt-4 text-red-400 text-sm",children:"Remove Section"})]})}function ButtonBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t,landing:Tt}){const Dt=et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#22c55e"}, ${et.gradient_end||"#3b82f6"})`:et.bg_color||"#22c55e",Ft=$t||(Tt!=null&&Tt.bg_theme&&Tt.bg_theme!==""?Tt.bg_theme:null)||"#0b1220",Ut=typeof et.shadow_opacity=="number"?et.shadow_opacity/100:.35,Ht=`${et.shadow_offset_x??0}px ${et.shadow_offset_y??8}px ${et.shadow_blur??20}px rgba(0,0,0,${Ut})`,Kt=Yt=>/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(Yt);return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 shadow-inner bg-[#0F172A]/60 border border-gray-700 transition-all duration-300 space-y-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Text"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Click Here",value:et.text||"",onChange:Yt=>kt(dt,"text",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button URL"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://example.com",value:et.url||"",onChange:Yt=>kt(dt,"url",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.open_new_tab??!0,onChange:Yt=>kt(dt,"open_new_tab",Yt.target.checked)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-300",children:"Open in new tab"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Width (px)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"80",max:"600",value:et.width||220,onChange:Yt=>kt(dt,"width",parseInt(Yt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Height (px)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"32",max:"100",value:et.height||48,onChange:Yt=>kt(dt,"height",parseInt(Yt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"})]})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Corner Radius"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"40",value:et.radius||8,onChange:Yt=>kt(dt,"radius",parseInt(Yt.target.value,10)),className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Stroke Width"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:"6",value:et.stroke_width||0,onChange:Yt=>kt(dt,"stroke_width",parseInt(Yt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Stroke Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.stroke_color||"#000000",onChange:Yt=>kt(dt,"stroke_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.stroke_color||"#000000",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&kt(dt,"stroke_color",Jt)},placeholder:"#000000",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-gray-300",children:"Shadow"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Offset X"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-40",max:"40",value:et.shadow_offset_x||0,onChange:Yt=>kt(dt,"shadow_offset_x",parseInt(Yt.target.value,10)),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Offset Y"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-40",max:"40",value:et.shadow_offset_y||8,onChange:Yt=>kt(dt,"shadow_offset_y",parseInt(Yt.target.value,10)),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Blur"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"60",value:et.shadow_blur||20,onChange:Yt=>kt(dt,"shadow_blur",parseInt(Yt.target.value,10)),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Opacity"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",value:et.shadow_opacity??35,onChange:Yt=>kt(dt,"shadow_opacity",parseInt(Yt.target.value,10)),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Shadow Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.shadow_color||"#000000",onChange:Yt=>kt(dt,"shadow_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.shadow_color||"#000000",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&kt(dt,"shadow_color",Jt)},placeholder:"#000000",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Yt=>kt(dt,"use_gradient",Yt.target.checked)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-300",children:"Use Gradient"})]}),!et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#22c55e",onChange:Yt=>kt(dt,"bg_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.bg_color||"#22c55e",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&kt(dt,"bg_color",Jt)},placeholder:"#22c55e",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]}),et.use_gradient&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#22c55e",onChange:Yt=>kt(dt,"gradient_start",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.gradient_start||"#22c55e",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&kt(dt,"gradient_start",Jt)},placeholder:"#22c55e",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#3b82f6",onChange:Yt=>kt(dt,"gradient_end",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.gradient_end||"#3b82f6",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&kt(dt,"gradient_end",Jt)},placeholder:"#3b82f6",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Yt=>kt(dt,"gradient_direction",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white",children:[jsxRuntimeExports.jsx("option",{value:"0deg",children:"Top to Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal"}),jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left to Right"}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Reverse Diagonal"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Bottom to Top"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:Yt=>kt(dt,"text_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color||"#000000",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&kt(dt,"text_color",Jt)},placeholder:"#000000",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400 mb-3",children:"Preview (Live Background)"}),jsxRuntimeExports.jsx("div",{style:{background:Ft,padding:"48px 24px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.08)"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:`${et.width??220}px`,height:`${et.height??48}px`,padding:`${et.padding_y??12}px ${et.padding_x??24}px`,background:Dt,color:et.text_color||"#000000",fontSize:`${et.font_size??16}px`,fontWeight:et.font_weight??600,borderRadius:`${et.radius??8}px`,border:`${et.stroke_width??0}px solid ${et.stroke_color||"#000"}`,boxShadow:Ht,userSelect:"none",pointerEvents:"none"},children:et.text||"Click Here"})})}),et.url&&jsxRuntimeExports.jsxs("p",{className:"mt-2 text-xs text-gray-400 text-center break-all",children:[" ",et.url]})]})]})}function SingleOfferBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t,landing:Tt,pdfList:Dt,updateChildBlock:Ft,openAIModal:Ut,containerIndex:Ht}){const[Kt,Yt]=React$2.useState(""),[Jt,Zt]=React$2.useState(!1),er=reactExports.useMemo(()=>(Dt==null?void 0:Dt.filter(lr=>lr.status==="completed"&&lr.pdf_url))||[],[Dt]),rr=(lr,or)=>{kt(dt,lr,or)},sr=async lr=>{const or=URL.createObjectURL(lr);rr("image_url",or);try{const cr=new FormData;cr.append("image",lr),cr.append("landingId",Tt==null?void 0:Tt.id),cr.append("blockId",et.id);const dr=await axiosInstance.post("/landing/upload-media-block",cr,{headers:{"Content-Type":"multipart/form-data"}});dr.data.url&&(rr("image_url",dr.data.url),rr("use_pdf_cover",!1),y$4.success("Image uploaded!"))}catch{y$4.error("Upload failed")}finally{URL.revokeObjectURL(or)}},nr=et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.match_main_bg?$t:et.bg_color||"#111827",ir=et.text_color||"#ffffff";return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-6 border border-gray-700 transition-all duration-300",style:{background:nr,maxHeight:"80vh",overflowY:"auto"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-green mb-6",children:"Single Offer"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#000000",onChange:lr=>rr("bg_color",lr.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.bg_color})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:lr=>rr("match_main_bg",lr.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:lr=>rr("use_gradient",lr.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:lr=>rr("use_no_bg",lr.target.checked)})]})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:lr=>rr("gradient_start",lr.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:lr=>rr("gradient_end",lr.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:lr=>rr("gradient_direction",lr.target.value),className:"w-full p-2 mt-1 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_text_color||"#000000",onChange:lr=>rr("button_text_color",lr.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_text_color})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Card Width (",et.card_width||360,"px)"]}),jsxRuntimeExports.jsx("input",{type:"range",min:260,max:520,step:10,value:et.card_width||360,onChange:lr=>rr("card_width",Number(lr.target.value)),className:"w-full mt-2"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Card Height"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.card_height==="auto",onChange:lr=>rr("card_height",lr.target.checked?"auto":420)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Auto height"})]}),et.card_height!=="auto"&&jsxRuntimeExports.jsx("input",{type:"range",min:300,max:700,step:10,value:et.card_height||420,onChange:lr=>rr("card_height",Number(lr.target.value)),className:"w-full mt-2"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:(()=>{var or;const lr=Kt||et.cover_url||et.image_url||"";return jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 rounded-xl p-4 bg-black/40 backdrop-blur-md shadow-lg",style:{color:ir,width:et.card_width?`${et.card_width}px`:"360px",height:et.card_height==="auto"?"auto":`${et.card_height}px`,display:"flex",flexDirection:"column",overflow:et.card_height==="auto"?"visible":"auto"},children:[jsxRuntimeExports.jsx("div",{className:"mt-3 relative",children:Jt?jsxRuntimeExports.jsxs("div",{className:"w-full h-56 flex flex-col items-center justify-center rounded-lg bg-black/40 border border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-gray-500 border-t-green rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Loading Book cover"})]}):lr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:lr,className:"rounded-lg w-full mb-3",alt:""}),!et.use_pdf_cover&&jsxRuntimeExports.jsx("button",{type:"button",className:"text-red-400 text-xs hover:underline",onClick:()=>{rr("image_url",""),rr("cover_url",""),Yt("")},children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:"block border border-gray-600 border-dashed rounded-xl p-6 text-center cursor-pointer",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300 text-sm",children:"Upload Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:cr=>sr(cr.target.files[0])})]})}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Choose Book"}),jsxRuntimeExports.jsxs("select",{value:et.pdf_url||"",onChange:async cr=>{var pr;const dr=cr.target.value;if(rr("pdf_url",dr),rr("pdf_name",""),Yt(""),Zt(!0),!dr){rr("cover_url",""),rr("image_url",""),rr("use_pdf_cover",!1),Zt(!1);return}const ur=er.find(mr=>mr.pdf_url===dr);ur&&rr("pdf_name",ur.title||"Book");try{const mr=await axiosInstance.get(`/landing/lead-magnets/cover?pdfUrl=${encodeURIComponent(dr)}`);(pr=mr.data)!=null&&pr.cover_image&&(Yt(mr.data.cover_image),rr("cover_url",mr.data.cover_image),rr("image_url",mr.data.cover_image),rr("use_pdf_cover",!0))}catch(mr){console.error(" Error loading Book cover:",mr)}finally{Zt(!1)}},className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Choose Book --"}),er.map(cr=>jsxRuntimeExports.jsx("option",{value:cr.pdf_url,children:cr.title||"Book"},cr.id))]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Selected Book:"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:et.pdf_name||"Book"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Book Cover Image"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_pdf_cover||!1,onChange:cr=>{const dr=cr.target.checked;rr("use_pdf_cover",dr),dr&&et.cover_url&&rr("image_url",et.cover_url),dr||rr("image_url","")}})]}),et.pdf_url&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",className:"text-green underline",rel:"noopener noreferrer",children:"Preview Book"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#ffffff",onChange:cr=>rr("text_color",cr.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Offer Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",maxLength:60,onChange:cr=>rr("title",cr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",placeholder:"Offer Title"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[((or=et.title)==null?void 0:or.length)||0,"/60"]}),!et.use_long_description&&jsxRuntimeExports.jsx("textarea",{value:et.text,onChange:cr=>rr("text",cr.target.value),className:"w-full p-3 bg-black text-white placeholder-gray-500 border mt-3 resize-y min-h-[120px]",rows:6,placeholder:"Short description"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Long Description"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_long_description||!1,onChange:cr=>{const dr=cr.target.checked;rr("use_long_description",dr),dr&&rr("text","")}})]}),et.use_long_description&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 block mb-1",children:"Description Type"}),jsxRuntimeExports.jsxs("select",{value:et.description_type||"text",onChange:cr=>rr("description_type",cr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded",children:[jsxRuntimeExports.jsx("option",{value:"text",children:"Rich Text"}),jsxRuntimeExports.jsx("option",{value:"bullets",children:"Bullet Points"})]})]}),et.use_long_description&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Long Description"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ut({blockType:"offer_long_description",blockIndex:dt,updateChildBlock:Ft,containerIndex:Ht,currentText:et.long_text||"",role:"sales"}),onPointerDown:cr=>cr.stopPropagation(),className:`
                    text-xs font-semibold px-3 py-1 rounded-md
                    bg-royalPurple text-white
                    hover:bg-royalPurple/80
                    transition
                  `,children:"AI"})]}),et.use_long_description&&jsxRuntimeExports.jsx("textarea",{value:et.long_text||"",onChange:cr=>{const dr=cr.target.value;Ht!==void 0&&Ft?Ft(dt,"long_text",dr):kt(dt,"long_text",dr)},rows:8,placeholder:et.description_type==="bullets"?` Benefit one
 Benefit two
 Benefit three`:"Write a detailed sales description...",className:`w-full p-3 text-white mt-2 bg-black border border-gray-600 rounded
resize-y min-h-[180px] flex-shrink-0`}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Price"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.price,onChange:cr=>rr("price",Number(cr.target.value)||0),className:"w-full p-2 bg-black text-white border mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_text,onChange:cr=>rr("button_text",cr.target.value),className:"w-full p-2 bg-black border mt-1",style:{color:"#000000"}}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Background"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_color,onChange:cr=>rr("button_color",cr.target.value),className:"w-8 h-8 mt-1 border border-gray-600 rounded"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_text_color||"#000000",onChange:cr=>rr("button_text_color",cr.target.value),className:"w-8 h-8 mt-1 border border-gray-600 rounded"}),jsxRuntimeExports.jsx("div",{style:{marginTop:"auto"},children:jsxRuntimeExports.jsx("button",{style:{backgroundColor:et.button_color,color:et.button_text_color||"#000000"},className:"w-full mt-4 py-2 rounded-lg font-semibold transition",children:et.button_text})})]})})()})]})}function MiniOfferAdvanced({block:et,updateField:dt,landing:kt,openAIModal:$t}){var Jt,Zt,er,rr,sr;const Ut={enabled:((Jt=et.offer_page)==null?void 0:Jt.enabled)??!1,blocks:Array.isArray((Zt=et.offer_page)==null?void 0:Zt.blocks)?et.offer_page.blocks:[],bullets:Array.isArray((er=et.offer_page)==null?void 0:er.bullets)?et.offer_page.bullets:[],trust_items:Array.isArray((rr=et.offer_page)==null?void 0:rr.trust_items)?et.offer_page.trust_items:[]},Ht=nr=>{dt("offer_page",{...Ut,...nr})},Kt=(sr=Ut.blocks)==null?void 0:sr[Ut.blocks.length-1],Yt=Ut.blocks.length<6&&(!Kt||Kt.text||Kt.image_url);return jsxRuntimeExports.jsxs("div",{className:"mt-6 ",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Ht({enabled:!Ut.enabled}),className:"w-full flex justify-between items-center py-3 border-b border-gray-800",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-white tracking-wide",children:"Advanced Offer Page"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:Ut.enabled?"Hide":"Show"})]}),Ut.enabled?jsxRuntimeExports.jsxs("div",{className:"pt-6 space-y-10",children:[(!Ut.blocks||Ut.blocks.length===0)&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"No paragraph blocks yet."}),(Ut.blocks||[]).map((nr,ir)=>{var lr;return jsxRuntimeExports.jsxs("div",{className:"space-y-3 pb-6 border-b border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-semibold text-gray-400",children:"Paragraph Content"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t({blockType:"offer_paragraph",currentText:nr.text||"",onApply:or=>{const cr=[...Ut.blocks];cr[ir]={...nr,text:or},Ht({blocks:cr})},role:"sales"}),className:`text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white hover:bg-royalPurple/80 transition`,children:"AI"})]}),jsxRuntimeExports.jsx("textarea",{value:nr.text||"",maxLength:800,onChange:or=>{const cr=[...Ut.blocks];cr[ir]={...nr,text:or.target.value},Ht({blocks:cr})},rows:4,className:"w-full bg-black text-white border border-gray-700 rounded-lg p-4 focus:border-green focus:ring-0",placeholder:"Write paragraph content"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 text-right",children:[((lr=nr.text)==null?void 0:lr.length)||0,"/800"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-semibold text-gray-400",children:"Optional image"}),nr.image_url?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:nr.image_url,className:"w-full max-h-48 object-cover rounded-md border border-gray-700",alt:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:or=>{const cr=[...Ut.blocks];cr[ir]={...cr[ir],image_url:""},Ht({blocks:cr}),or.target.value=""},className:"absolute top-2 right-2 bg-black/70 text-red-400 text-xs px-2 py-1 rounded hover:bg-black",children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:"flex items-center justify-center h-28 border border-dashed border-gray-600 rounded cursor-pointer text-sm text-gray-400 hover:border-gray-400",children:["Upload image",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async or=>{var ur,pr;const cr=(ur=or.target.files)==null?void 0:ur[0];if(!cr)return;const dr=new FormData;dr.append("image",cr),dr.append("landingId",kt.id),dr.append("blockId",et.id),dr.append("offerBlockId",nr.id);try{const mr=await axiosInstance.post("/landing/upload-media-block",dr,{headers:{"Content-Type":"multipart/form-data"}});if((pr=mr.data)!=null&&pr.url){const jr=[...Ut.blocks];jr[ir]={...jr[ir],image_url:mr.data.url},Ht({blocks:jr})}}catch(mr){console.error(mr),y$4.error("Image upload failed")}}})]})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ht({blocks:Ut.blocks.filter((or,cr)=>cr!==ir)}),className:"text-xs text-red-400 hover:text-red-300",children:"Remove paragraph block"})]},nr.id)}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:!Yt,onClick:()=>Ht({blocks:[...Ut.blocks||[],{id:crypto.randomUUID(),type:"paragraph",text:"",image_url:""}]}),className:`text-sm font-medium flex items-center gap-2 transition
  ${Yt?"text-green hover:text-green-400":"text-gray-500 cursor-not-allowed"}
`,children:[jsxRuntimeExports.jsx(Plus,{size:14}),"Add paragraph block"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 block mb-2",children:"Bullet Points"}),jsxRuntimeExports.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["Max ",5," bullets. Keep them short and benefit focused."]}),Ut.bullets.map((nr,ir)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"text",maxLength:120,value:nr,onChange:lr=>{const or=[...Ut.bullets];or[ir]=lr.target.value,Ht({bullets:or})},className:"flex-1 bg-black text-white border border-gray-600 rounded px-3 py-2",placeholder:"Bullet text"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Ht({bullets:Ut.bullets.filter((lr,or)=>or!==ir)})},className:"text-red-400 hover:text-red-300",children:jsxRuntimeExports.jsx(Trash,{size:16})})]},ir)),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Ut.bullets.length>=5,onClick:()=>Ht({bullets:[...Ut.bullets,""]}),className:`text-xs font-semibold flex items-center gap-1 mt-1
    ${Ut.bullets.length>=5?"text-gray-500 cursor-not-allowed":"text-green hover:text-green-400"}
  `,children:[jsxRuntimeExports.jsx(Plus,{size:14}),Ut.bullets.length>=5?"Max bullets reached":"Add bullet"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 block mb-2",children:"Trust Items"}),jsxRuntimeExports.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["Max ",3,". Keep trust signals short and recognizable."]}),Ut.trust_items.map((nr,ir)=>jsxRuntimeExports.jsxs("div",{className:"space-y-2 pb-4 border-b border-gray-800 mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Icon"}),jsxRuntimeExports.jsx("select",{value:nr.icon||"check",onChange:lr=>{const or=[...Ut.trust_items];or[ir]={...or[ir],icon:lr.target.value},Ht({trust_items:or})},className:"w-full bg-black text-white border border-gray-600 rounded px-2 py-1",children:TRUST_ICONS.map(lr=>jsxRuntimeExports.jsxs("option",{value:lr.key,children:[lr.icon," ",lr.label]},lr.key))})]}),jsxRuntimeExports.jsx("input",{type:"text",value:nr.label||"",onChange:lr=>{const or=[...Ut.trust_items];or[ir]={...or[ir],label:lr.target.value},Ht({trust_items:or})},className:"w-full bg-black text-white border border-gray-600 rounded px-3 py-2",placeholder:"Secure checkout"}),jsxRuntimeExports.jsx("input",{type:"text",value:nr.subtext||"",onChange:lr=>{const or=[...Ut.trust_items];or[ir]={...or[ir],subtext:lr.target.value},Ht({trust_items:or})},className:"w-full bg-black text-white border border-gray-600 rounded px-3 py-2 text-sm opacity-90",placeholder:"Powered by Stripe"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ht({trust_items:Ut.trust_items.filter((lr,or)=>or!==ir)}),className:"text-xs text-red-400 hover:text-red-300",children:"Remove"})]},ir)),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Ut.trust_items.length>=3,onClick:()=>Ht({trust_items:[...Ut.trust_items,{icon:"check",label:"",subtext:""}]}),className:`mt-2 text-xs font-semibold flex items-center gap-1
    ${Ut.trust_items.length>=3?"text-gray-500 cursor-not-allowed":"text-green hover:text-green-400"}
  `,children:[jsxRuntimeExports.jsx(Plus,{size:14}),Ut.trust_items.length>=3?"Max trust items reached":"Add trust item"]})]})]}):null]})}function MiniOfferBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t,landing:Tt,pdfList:Dt,updateChildBlock:Ft,openAIModal:Ut,containerIndex:Ht}){var mr,jr,Rr;const Kt=et.product_source||"internal",Yt=!!et.pdf_url||!!et.external_file_url,[Jt,Zt]=React$2.useState(!1),er=reactExports.useMemo(()=>(Dt==null?void 0:Dt.filter(br=>br.status==="completed"&&br.pdf_url))||[],[Dt]),rr=(br,_r)=>{Ht!==void 0&&Ft?Ft(dt,br,_r):kt(dt,br,_r)};reactExports.useEffect(()=>{et.offer_page||rr("offer_page",{enabled:!1,blocks:[],bullets:[],trust_items:[]})},[]);const sr=(br,_r="#000000")=>br&&br.startsWith("#")&&br.length===7?br:_r,nr=async br=>{const _r=URL.createObjectURL(br);rr("image_url",_r);try{const Mr=new FormData;Mr.append("image",br),Mr.append("landingId",Tt==null?void 0:Tt.id),Mr.append("blockId",et.id);const Pr=await axiosInstance.post("/landing/upload-media-block",Mr,{headers:{"Content-Type":"multipart/form-data"}});Pr.data.url&&(rr("image_url",Pr.data.url),rr("use_pdf_cover",!1),y$4.success("Image uploaded!"))}catch{y$4.error("Upload failed")}finally{URL.revokeObjectURL(_r)}},ir=et.match_main_bg?$t:"#000000",lr=et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
        ${et.gradient_start||"#a855f7"},
        ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827",or=(((Rr=(jr=(mr=et.offer_page)==null?void 0:mr.blocks)==null?void 0:jr.map(br=>br.text))==null?void 0:Rr.join(" "))||"").replace(//g,""),cr=or.trim().length>0,dr=cr&&or.trim().split(/\s+/).length>20,ur=Number(et.price||0),pr=et.text_color||"#ffffff";return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-6 border border-gray-700 transition-all duration-300",style:{background:"#0b1220",maxHeight:"80vh",overflowY:"auto"},children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.bg_color,"#111827"),onChange:br=>rr("bg_color",br.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.bg_color||"",onChange:br=>{const _r=br.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(_r)&&rr("bg_color",_r.startsWith("#")?_r:`#${_r}`)},placeholder:"#111827",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:br=>rr("match_main_bg",br.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:br=>rr("use_gradient",br.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:br=>rr("use_no_bg",br.target.checked)})]})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.gradient_start)||"#F285C3",onChange:br=>rr("gradient_start",br.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.gradient_end)||"#7bed9f",onChange:br=>rr("gradient_end",br.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:br=>rr("gradient_direction",br.target.value),className:"w-full p-2 mt-1 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Main Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.text_color,"#ffffff"),onChange:br=>rr("text_color",br.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color||"",onChange:br=>{const _r=br.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(_r)&&rr("text_color",_r.startsWith("#")?_r:`#${_r}`)},placeholder:"#ffffff",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Secondary Text Color",jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-gray-400 mt-1",children:"Used on the offer preview page for Title and Sub-title text"})]}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.secondary_text_color,"#9ca3af"),onChange:br=>rr("secondary_text_color",br.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.secondary_text_color||"",onChange:br=>{const _r=br.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(_r)&&rr("secondary_text_color",_r.startsWith("#")?_r:`#${_r}`)},placeholder:"#9ca3af",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Utility Text Color",jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-gray-400 mt-1",children:"Used on the offer preview page for links and navigation text"})]}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.utility_text_color,"#60a5fa"),onChange:br=>rr("utility_text_color",br.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.utility_text_color||"",onChange:br=>{const _r=br.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(_r)&&rr("utility_text_color",_r.startsWith("#")?_r:`#${_r}`)},placeholder:"#60a5fa",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:(()=>{var _r;const br=et.use_pdf_cover?et.cover_url:et.image_url||"";return jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 rounded-2xl overflow-hidden shadow-2xl flex flex-col",style:{color:pr,width:"100%",maxWidth:"980px",minHeight:"420px"},children:[jsxRuntimeExports.jsx("div",{className:"relative bg-black w-full overflow-hidden rounded-xl",style:{height:"320px",maxHeight:"340px"},children:Jt?jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/70",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-gray-500 border-t-green rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Loading Book cover"})]}):br?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:ir},children:cr||et.title||ur>0?jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"90%",maxWidth:"480px",height:"200px",borderRadius:"16px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.12)",boxShadow:"0 20px 45px rgba(0,0,0,0.45)",background:et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
              ${et.gradient_start||"#a855f7"},
              ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827"},children:[et.use_pdf_cover&&et.cover_url||et.image_url?jsxRuntimeExports.jsx("div",{style:{flex:"0 0 30%",background:"#000",borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px",overflow:"hidden"},children:jsxRuntimeExports.jsx("img",{src:et.use_pdf_cover?et.cover_url:et.image_url,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px",borderTopRightRadius:0,borderBottomRightRadius:0}})}):null,jsxRuntimeExports.jsxs("div",{style:{flex:1,padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",color:et.text_color||"#ffffff",background:lr},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:800,marginBottom:"6px"},children:et.title||"Offer Title"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.8rem",lineHeight:1.4,opacity:.9,maxWidth:"420px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:or}),dr&&jsxRuntimeExports.jsx("span",{style:{display:"block",marginTop:"6px",fontWeight:700,textDecoration:"underline",cursor:"pointer",fontSize:"0.75rem",opacity:.95},children:"See more"})]}),jsxRuntimeExports.jsx("button",{style:{marginTop:"auto",width:"100%",maxWidth:"180px",padding:"8px",borderRadius:"8px",fontWeight:700,border:"none",background:et.button_color||"#22c55e",color:et.button_text_color||"#000000",fontSize:"0.8rem",opacity:Yt?1:.6},children:et.button_text||"Buy Now"}),ur>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"6px",fontSize:"0.85rem",opacity:.85},children:["$",ur.toFixed(2)]})]})]}):jsxRuntimeExports.jsx("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.85rem",textAlign:"center",padding:"20px"},children:"Fill in the fields to see your card preview"})}),(et.image_url||et.cover_url)&&jsxRuntimeExports.jsx("button",{type:"button",className:"absolute top-3 right-3 bg-black/70 text-red-400 text-xs px-3 py-1 rounded hover:bg-black",onClick:()=>{et.use_pdf_cover?rr("use_pdf_cover",!1):rr("image_url","")},children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:"flex items-center justify-center h-full border border-dashed border-gray-600 cursor-pointer",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Upload Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Mr=>nr(Mr.target.files[0])})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col p-8 gap-4",style:{background:"#0f172a",color:et.text_color||"#ffffff"},children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-6 block",children:"Product Source"}),jsxRuntimeExports.jsxs("select",{value:Kt,onChange:Mr=>{const Pr=Mr.target.value;rr("product_source",Pr),Pr==="internal"&&(rr("external_file_url",""),rr("external_file_name","")),Pr==="external"&&(rr("pdf_url",""),rr("pdf_name",""),rr("cover_url",""),rr("use_pdf_cover",!1))},className:"w-full p-2 bg-black border border-gray-600 rounded text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"internal",children:"The Messy Attic Book"}),jsxRuntimeExports.jsx("option",{value:"external",children:"Upload Existing Product"})]}),Kt==="external"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Upload Your Product"}),jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.zip",onChange:async Mr=>{var Or,kr;const Pr=(Or=Mr.target.files)==null?void 0:Or[0];if(Pr)try{const Tr=new FormData;Tr.append("file",Pr),Tr.append("landingId",Tt.id),Tr.append("blockId",et.id);const xr=await axiosInstance.post("/landing/upload-product",Tr,{headers:{"Content-Type":"multipart/form-data"}});if(!((kr=xr.data)!=null&&kr.success)){y$4.error("Upload failed");return}rr("external_file_url",xr.data.url),rr("external_file_name",xr.data.file_name||Pr.name),rr("product_source","external"),y$4.success("Product uploaded!"),Mr.target.value=""}catch{y$4.error("Upload failed")}},className:"w-full p-2 bg-black border border-gray-700 rounded text-white"}),et.external_file_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green mt-2",children:["Uploaded: ",et.external_file_name]})]}),Kt==="internal"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Choose Book"}),jsxRuntimeExports.jsxs("select",{value:et.pdf_url||"",onChange:async Mr=>{var kr;const Pr=Mr.target.value;if(!Pr){rr("pdf_url",""),rr("pdf_name",""),rr("cover_url",""),rr("image_url",""),rr("use_pdf_cover",!1),rr("page_count",null),Zt(!1);return}const Or=er.find(Tr=>Tr.pdf_url===Pr);if(!Or){Zt(!1);return}rr("pdf_url",Or.pdf_url),rr("pdf_name",Or.title||"Book"),rr("product_source","internal"),rr("use_pdf_cover",!0),rr("image_url",""),rr("page_count",Or.page_count||null),Zt(!0);try{const Tr=await axiosInstance.get(`/landing/lead-magnets/cover?pdfUrl=${encodeURIComponent(Or.pdf_url)}`);(kr=Tr.data)!=null&&kr.cover_image&&rr("cover_url",Tr.data.cover_image)}catch(Tr){console.error(" Error loading Book cover:",Tr)}finally{Zt(!1)}},className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Choose Book --"}),er.map(Mr=>jsxRuntimeExports.jsx("option",{value:Mr.pdf_url,children:Mr.title||"Book"},Mr.id))]})]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Selected Book:"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:et.pdf_name||"Book"}),et.page_count&&jsxRuntimeExports.jsxs("span",{className:"ml-2 opacity-80",children:[" ",et.page_count," pages"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Book Cover Image"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!et.use_pdf_cover,disabled:!et.cover_url,onChange:Mr=>{rr("use_pdf_cover",Mr.target.checked)}})]}),et.pdf_url&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",className:"text-green underline",rel:"noopener noreferrer",children:"Preview Book"})}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Offer Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",maxLength:60,onChange:Mr=>rr("title",Mr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",placeholder:"Offer Title"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[((_r=et.title)==null?void 0:_r.length)||0,"/60"]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Product Name (Checkout)"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.product_name||"",maxLength:80,onChange:Mr=>rr("product_name",Mr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",placeholder:"What buyers will see on checkout"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This appears on Stripe checkout and receipts"}),jsxRuntimeExports.jsx(MiniOfferAdvanced,{block:et,updateField:rr,landing:Tt,openAIModal:Ut}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Price"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.price,onChange:Mr=>rr("price",Number(Mr.target.value)||0),className:"w-full p-2 bg-black text-white border mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_text,onChange:Mr=>rr("button_text",Mr.target.value),className:"w-full p-2 bg-black border mt-1",style:{color:"#000000"}}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Background"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.button_color)||"#000000",onChange:Mr=>rr("button_color",Mr.target.value),className:"w-8 h-8 p-0 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_color||"",onChange:Mr=>{const Pr=Mr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Pr)&&rr("button_color",Pr.startsWith("#")?Pr:`#${Pr}`)},placeholder:"#000000",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.button_text_color)||"#000000",onChange:Mr=>rr("button_text_color",Mr.target.value),className:"w-8 h-8 p-0 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_text_color||"",onChange:Mr=>{const Pr=Mr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Pr)&&rr("button_text_color",Pr.startsWith("#")?Pr:`#${Pr}`)},placeholder:"#ffffff",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("div",{style:{marginTop:"auto"},children:jsxRuntimeExports.jsx("button",{style:{backgroundColor:et.button_color,color:et.button_text_color||"#000000"},className:"w-full mt-4 py-2 rounded-lg font-semibold transition",children:et.button_text})})]})]})})()})]})}function ProfileCardBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t,getLabelContrast:Tt,adjustForLandingOverlay:Dt,landing:Ft}){const[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState({x:0,y:0}),[Jt,Zt]=reactExports.useState(1),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState(!1);function ir(or,cr,dr){const ur=or.getImageData(0,0,cr,dr).data;for(let pr=3;pr<ur.length;pr+=4)if(ur[pr]<255)return!0;return!1}const lr=Dt($t);return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 bg-[#0F172A] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",style:{color:Tt($t)},children:"Profile Card"}),jsxRuntimeExports.jsx("span",{className:"text-xs bg-[#1E293B] text-gray-300 px-2 py-1 rounded-full border border-gray-600",children:"Image + Contact"})]}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-gray-700 p-6",style:{background:Dt($t)},children:et.image_url?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto",style:{width:`${et.image_size||120}px`,height:`${et.image_size||120}px`,borderRadius:`${et.image_radius||999}px`,border:`${et.image_border_width||1}px solid ${et.image_border_color||"#e5e7eb"}`,overflow:"hidden",background:"transparent"},children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}})}),jsxRuntimeExports.jsx("button",{className:"text-xs text-red-400 mt-3 hover:underline",onClick:()=>kt(dt,"image_url",""),children:"Remove image"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{htmlFor:`profileImage-${et.id}`,className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-600 rounded-xl py-10 cursor-pointer hover:border-green transition",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:jsxRuntimeExports.jsx("span",{className:"text-green font-medium",children:"Upload profile image"})}),jsxRuntimeExports.jsx("input",{id:`profileImage-${et.id}`,type:"file",accept:"image/*",className:"hidden",onChange:or=>{const cr=or.target.files[0];if(!cr)return;const dr=URL.createObjectURL(cr);Ht(dr)}})]}),Ut&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{className:"relative w-full h-[260px] rounded-lg overflow-hidden",style:{background:lr,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.08)"},children:jsxRuntimeExports.jsx(Cropper,{image:Ut,crop:Kt,zoom:Jt,aspect:1,cropShape:"round",showGrid:!1,onCropChange:Yt,onZoomChange:Zt,onCropComplete:(or,cr)=>rr(cr)})}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Zoom"}),jsxRuntimeExports.jsx("input",{type:"range",min:1,max:3,step:.01,value:Jt,onChange:or=>Zt(Number(or.target.value)),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{disabled:sr,className:"px-4 py-2 rounded bg-green text-black text-sm",onClick:async()=>{if(!er)return;const or=document.createElement("canvas"),cr=or.getContext("2d"),dr=new Image;dr.crossOrigin="anonymous",dr.src=Ut,await new Promise(xr=>dr.onload=xr);const{width:ur,height:pr,x:mr,y:jr}=er;or.width=ur,or.height=pr,cr.clearRect(0,0,ur,pr),cr.drawImage(dr,mr,jr,ur,pr,0,0,ur,pr);const Rr=ir(cr,ur,pr),br=Rr?"image/png":"image/jpeg",_r=Rr?"profile.png":"profile.jpg",Mr=Rr?void 0:.9,Pr=await new Promise(xr=>or.toBlob(xr,br,Mr)),Or=URL.createObjectURL(Pr);kt(dt,"image_url",Or);const kr=new FormData;kr.append("image",Pr,_r),kr.append("landingId",Ft.id),kr.append("blockId",et.id);const Tr=await axiosInstance.post("/landing/upload-media-block",kr,{headers:{"Content-Type":"multipart/form-data"}});Tr.data.success&&(kt(dt,"image_url",Tr.data.url),y$4.success("Profile image saved")),URL.revokeObjectURL(Ut),URL.revokeObjectURL(Or),Ht(null),Yt({x:0,y:0}),Zt(1)},children:"Save Image"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded bg-gray-700 text-white text-sm",onClick:()=>{URL.revokeObjectURL(Ut),Ht(null)},children:"Cancel"})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Image Size"}),jsxRuntimeExports.jsx("input",{type:"range",min:"60",max:"200",value:et.image_size||120,onChange:or=>kt(dt,"image_size",Number(or.target.value)),className:"w-full mt-2"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Tagline"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.tagline||"",placeholder:"Welcome to my page",onChange:or=>kt(dt,"tagline",or.target.value),className:"w-full p-2 mt-1 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.tagline_color||"#FFFFFF",onChange:or=>kt(dt,"tagline_color",or.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.tagline_color||"#FFFFFF",onChange:or=>kt(dt,"tagline_color",or.target.value),className:"flex-1 p-2 border border-gray-600 rounded bg-black text-white uppercase",placeholder:"#FFFFFF"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Contact Type"}),jsxRuntimeExports.jsxs("select",{value:et.contact_type||"email",onChange:or=>kt(dt,"contact_type",or.target.value),className:"w-full p-2 mt-1 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"email",children:"Email"}),jsxRuntimeExports.jsx("option",{value:"phone",children:"Phone"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Contact Value"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.contact_value||"",placeholder:et.contact_type==="phone"?"555 123 4567":"hello@example.com",onChange:or=>kt(dt,"contact_value",or.target.value),className:"w-full p-2 mt-1 border border-gray-600 rounded bg-black text-white"})]})]})]})}function ScrollArrowBlock({block:et,index:dt,updateBlock:kt,bgTheme:$t,getLabelContrast:Tt}){const Dt=SCROLL_ARROW_STYLES[et.arrow_style||"single"];return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 bg-[#0F172A] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",style:{color:Tt($t)},children:"Scroll Arrow"}),jsxRuntimeExports.jsx("span",{className:"text-xs bg-[#1E293B] text-gray-300 px-2 py-1 rounded-full border border-gray-600",children:"Call to Action"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mb-6",style:{justifyContent:et.alignment==="left"?"flex-start":et.alignment==="right"?"flex-end":"center"},children:jsxRuntimeExports.jsx("div",{style:{width:et.size||36,cursor:"pointer",touchAction:"manipulation","--arrow-speed":`${et.animation_speed||1.2}s`,display:"flex",flexDirection:"column",alignItems:"center"},children:Array.from({length:Dt.count}).map((Ft,Ut)=>jsxRuntimeExports.jsx("svg",{className:`scroll-arrow-item ${et.animation_type||"bounce"}`,viewBox:"0 0 24 24",fill:"none",stroke:et.color||"#ffffff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",width:"100%",height:"100%",style:{display:"block",marginTop:Ut===0?0:"-10px",animationDelay:`${Ut*(et.stagger??Dt.stagger)}s`,animationDuration:`${et.animation_speed||1.2}s`},children:jsxRuntimeExports.jsx("path",{d:"M19 12l-7 7-7-7"})},Ut))})}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Alignment"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-2",children:["left","center","right"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(dt,"alignment",Ft),className:`px-3 py-1 text-xs rounded border transition-all
                ${et.alignment===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
              `,children:Ft},Ft))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Arrow Style"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(SCROLL_ARROW_STYLES).map(([Ft,Ut])=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(dt,"arrow_style",Ft),className:`px-3 py-1 text-xs rounded border transition-all
          ${(et.arrow_style||"single")===Ft?"bg-green/80 border-green/70 text-green":"border-gray-600 text-gray-400 hover:border-gray-400"}
        `,children:Ut.label},Ft))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Animation"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-2",children:["bounce","float","pulse"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(dt,"animation_type",Ft),className:`px-3 py-1 text-xs rounded border transition-all
          ${et.animation_type===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
        `,children:Ft},Ft))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Animation Speed"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.6",max:"3",step:"0.1",value:et.animation_speed||1.2,onChange:Ft=>kt(dt,"animation_speed",Number(Ft.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[et.animation_speed||1.2,"s"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Arrow Stagger"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:et.stagger??Dt.stagger,onChange:Ft=>kt(dt,"stagger",Number(Ft.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[et.stagger??Dt.stagger,"s delay"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt($t)},children:"Arrow Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.color||"#ffffff",onChange:Ft=>kt(dt,"color",Ft.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.color||"#ffffff",onChange:Ft=>kt(dt,"color",Ft.target.value),className:"flex-1 p-2 border border-gray-600 rounded bg-black text-white uppercase",placeholder:"#FFFFFF"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold flex justify-between items-center",style:{color:Tt($t)},children:[jsxRuntimeExports.jsx("span",{children:"Arrow Size"}),jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-80",children:[et.size||36,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"150",step:"1",value:et.size||36,onChange:Ft=>kt(dt,"size",Number(Ft.target.value)),className:"flex-1"}),jsxRuntimeExports.jsx("input",{type:"number",min:"10",max:"150",value:et.size||36,onChange:Ft=>kt(dt,"size",Number(Ft.target.value)),className:"w-20 bg-[#0F172A] border border-gray-700 rounded-md px-2 py-1 text-sm text-white"})]})]})]})}function SortableBlock({id:et,block:dt,index:kt,updateBlock:$t,removeBlock:Tt,moveBlockUp:Dt,moveBlockDown:Ft,activeChild:Ut,setActiveChild:Ht,setActiveRoot:Kt,activeRoot:Yt,bgTheme:Jt,pdfList:Zt,landing:er,updateChildBlock:rr,openAIModal:sr,containerIndex:nr}){var pr,mr,jr;const ir=(Rr,br,_r)=>{Number.isInteger(nr)&&rr?rr(Rr,br,_r):$t(Rr,br,_r)},lr=Number.isInteger(nr)&&(Ut==null?void 0:Ut.childId)===dt.id||nr==null&&(Yt==null?void 0:Yt.blockId)===dt.id,or=Rr=>{if(!Rr)return"#1f2937";const br=Rr.replace("#",""),_r=parseInt(br.substring(0,2),16),Mr=parseInt(br.substring(2,4),16),Pr=parseInt(br.substring(4,6),16);return(_r*299+Mr*587+Pr*114)/1e3>160?"#1f2937":"#f3f4f6"};function cr(Rr){var br,_r,Mr,Pr,Or,kr,Tr,xr,wr,zr,Hr;switch(Rr.type){case"container":return`${Rr.title||"Untitled Section"}  ${(Rr.children||[]).length} blocks`;case"heading":case"subheading":case"subsubheading":case"list_heading":return((br=Rr.text)==null?void 0:br.slice(0,30))||"(empty heading)";case"paragraph":return((_r=Rr.text)==null?void 0:_r.slice(0,30))||"(empty paragraph)";case"offer_banner":return((Mr=Rr.button_text)==null?void 0:Mr.slice(0,30))||"(no button text)";case"divider":return Rr.style==="space"?`space  ${Rr.height||40}px`:`line  ${Rr.color||"#fff"}  ${Rr.height||40}px`;case"image":return Rr.image_url?Rr.image_url.split("/").pop().slice(0,30):"(no image)";case"profile_card":return Rr.tagline?Rr.tagline.split("/").pop().slice(0,30):"(no image)";case"social_links":return`${Object.values(Rr.links||{}).filter(Boolean).length} links`;case"video":return((Pr=Rr.url)==null?void 0:Pr.slice(0,30))||"(no video URL)";case"faq":return`${((Or=Rr.items)==null?void 0:Or.length)||0} questions`;case"stripe_checkout":return`$${Rr.price||10}  checkout`;case"calendly":return((kr=Rr.calendly_url)==null?void 0:kr.slice(0,30))||"(no url)";case"verified_reviews":return((Tr=Rr.title)==null?void 0:Tr.slice(0,30))||"(reviews section)";case"countdown":return((xr=Rr.text)==null?void 0:xr.slice(0,30))||"(countdown timer)";case"referral_button":return((wr=Rr.text)==null?void 0:wr.slice(0,30))||"(referral button)";case"button_url":return Rr.text||"Button";case"single_offer":return Rr.title?Rr.title.slice(0,30):"Single Offer";case"mini_offer":return Rr.title?Rr.title.slice(0,30):"Mini Offer";case"secure_checkout":return((zr=Rr.title)==null?void 0:zr.slice(0,30))||"Secure Checkout";case"audio_player":return((Hr=Rr.title)==null?void 0:Hr.slice(0,30))||"Audio Player";case"scroll_arrow":return`Arrow  ${Rr.color||"#FFFFFF"}`;default:return""}}function dr({value:Rr,disabled:br}){const _r=BLOCK_TYPE_TO_LABEL[Rr]||Rr,Mr=BLOCK_PILL_STYLES[_r]||"bg-white/10 text-gray-300 border-white/20";return jsxRuntimeExports.jsx("span",{className:`
        text-[13px]
        font-semibold
        uppercase
        tracking-wide
        px-2.5
        py-0.5
        rounded-full
        border
        leading-none
        whitespace-nowrap
        transition-all
        ${br?"opacity-40 grayscale":Mr}
      `,children:_r})}const ur=((pr=er==null?void 0:er.motion_settings)==null?void 0:pr.enabled)===!0&&dt.enabled!==!1;return dt.type==="container"?jsxRuntimeExports.jsx(SortableContainerBlock,{id:et,block:dt,index:kt,updateBlock:$t,removeBlock:Tt,moveBlockUp:Dt,moveBlockDown:Ft,activeChild:Ut,setActiveChild:Ht,bgTheme:Jt,pdfList:Zt,landing:er,openAIModal:sr}):jsxRuntimeExports.jsxs("div",{"data-drop-id":kt,"data-parent-id":null,onClick:Rr=>{Rr.stopPropagation(),Number.isInteger(nr)?(Ht({containerIndex:nr,childIndex:kt,childId:dt.id}),Kt(null)):(Kt({blockId:dt.id,blockIndex:kt}),Ht(null))},className:`
      mb-4 sm:mb-6
      rounded-lg sm:rounded-xl
      p-3 sm:p-5
      relative shadow-inner
      transition-all duration-300
      bg-dashboard-bg-light/70 dark:bg-dashboard-bg-dark/70
      border
      ${dt.enabled!==!1?"border-dashboard-border-light dark:border-dashboard-border-dark hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark":"border-dashboard-border-light dark:border-dashboard-border-dark opacity-50 grayscale"}
      ${lr?"ring-2 ring-green":""}
    `,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 z-20 flex flex-col gap-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Rr=>{Rr.stopPropagation(),ir(kt,"enabled",dt.enabled===!1)},className:`
            inline-flex h-4 w-8 items-center rounded-full transition-colors duration-200 shadow-md
            ${dt.enabled!==!1?"bg-green/80":"bg-dashboard-muted-light dark:bg-dashboard-muted-dark"}
          `,children:jsxRuntimeExports.jsx("span",{className:`
          h-3
          w-3
          rounded-full
          bg-white
          transition-transform
          duration-200
          ${dt.enabled!==!1?"translate-x-4":"translate-x-1"}
        `})}),jsxRuntimeExports.jsx(dr,{value:dt.type,disabled:dt.enabled===!1}),dt.enabled===!1&&jsxRuntimeExports.jsx("span",{className:"text-[11px] italic text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"disabled"})]})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end mb-2 sm:mb-3 cursor-pointer",onClick:Rr=>{Rr.stopPropagation(),ir(kt,"collapsed",!dt.collapsed)},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[ur&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 shrink-0 opacity-80 hover:opacity-100 transition",onClick:Rr=>Rr.stopPropagation(),children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Animate"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{var Rr;return ir(kt,"motion",{...dt.motion,disabled:!((Rr=dt.motion)!=null&&Rr.disabled)})},className:`
          relative inline-flex
          h-4 w-7
          items-center
          rounded-full
          transition-colors duration-200
          ${(mr=dt.motion)!=null&&mr.disabled?"bg-dashboard-muted-light dark:bg-dashboard-muted-dark":"bg-royalPurple"}
        `,children:jsxRuntimeExports.jsx("span",{className:`
            h-3 w-3
            rounded-full
            bg-white
            transition-transform duration-200
            ${(jr=dt.motion)!=null&&jr.disabled?"translate-x-1":"translate-x-3"}
          `})})]}),jsxRuntimeExports.jsx("span",{className:`
            text-sm transition-transform duration-300
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            ${dt.collapsed?"rotate-0":"rotate-180"}
          `,children:""})]})}),jsxRuntimeExports.jsx("div",{className:"text-xs leading-snug mt-0.5 ml-[36px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:cr(dt)}),jsxRuntimeExports.jsxs("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${dt.collapsed?"max-h-0 opacity-0":"max-h-[2000px] opacity-100"}`,children:[jsxRuntimeExports.jsxs("div",{className:`transform transition-transform duration-500 ${dt.collapsed?"scale-y-95":"scale-y-100"}`,children:[["heading","subheading","subsubheading"].includes(dt.type)&&jsxRuntimeExports.jsx(HeadingBlock,{block:dt,index:kt,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="list_heading"&&jsxRuntimeExports.jsx(ListHeadingBlock,{block:dt,index:kt,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="paragraph"&&jsxRuntimeExports.jsx(ParagraphBlock,{block:dt,index:kt,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="video"&&jsxRuntimeExports.jsx(VideoBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="divider"&&jsxRuntimeExports.jsx(DividerBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="offer_banner"&&jsxRuntimeExports.jsx(OfferBannerBlock,{block:dt,index:kt,updateBlock:ir,bgTheme:Jt,openAIModal:sr}),dt.type==="calendly"&&jsxRuntimeExports.jsx(CalendlyBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="social_links"&&jsxRuntimeExports.jsx(SocialLinksBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="verified_reviews"&&jsxRuntimeExports.jsx(VerifiedReviewsBlock,{block:dt,index:kt,updateBlock:$t}),dt.type==="countdown"&&jsxRuntimeExports.jsx(CountdownBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="stripe_checkout"&&jsxRuntimeExports.jsx(StripeCheckoutBlock,{block:dt,index:kt,updateBlock:ir,pdfList:Zt,bgTheme:Jt,landing:er}),dt.type==="referral_button"&&jsxRuntimeExports.jsx(ReferralButtonBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="faq"&&jsxRuntimeExports.jsx(FAQBlock,{block:dt,index:kt,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="image"&&jsxRuntimeExports.jsx(ImageBlock,{block:dt,index:kt,updateBlock:ir,bgTheme:Jt,getLabelContrast:or,adjustForLandingOverlay,landing:er}),dt.type==="single_offer"&&jsxRuntimeExports.jsx(SingleOfferBlock,{block:dt,index:kt,containerIndex:nr,updateBlock:ir,updateChildBlock:rr,bgTheme:Jt,landing:er,pdfList:Zt,openAIModal:sr}),dt.type==="mini_offer"&&jsxRuntimeExports.jsx(MiniOfferBlock,{block:dt,index:kt,containerIndex:nr,updateBlock:ir,updateChildBlock:rr,bgTheme:Jt,landing:er,pdfList:Zt,openAIModal:sr}),dt.type==="secure_checkout"&&jsxRuntimeExports.jsx(SecureCheckoutBlock,{block:dt,index:kt,updateBlock:ir}),dt.type==="audio_player"&&jsxRuntimeExports.jsx(AudioPlayerBlock,{block:dt,index:kt,bgTheme:Jt,updateBlock:ir,landing:er}),dt.type==="button_url"&&jsxRuntimeExports.jsx(ButtonBlock,{block:dt,index:kt,bgTheme:Jt,updateBlock:ir,landing:er}),dt.type==="profile_card"&&jsxRuntimeExports.jsx(ProfileCardBlock,{block:dt,index:kt,updateBlock:ir,bgTheme:Jt,getLabelContrast:or,adjustForLandingOverlay,landing:er}),dt.type==="scroll_arrow"&&jsxRuntimeExports.jsx(ScrollArrowBlock,{block:dt,index:kt,updateBlock:ir,bgTheme:Jt,getLabelContrast:or,adjustForLandingOverlay,landing:er})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:Rr=>{Rr.stopPropagation(),Tt(kt)},className:"mt-4 flex items-center gap-2 text-red-400 hover:text-red-300 text-sm font-semibold transition-all",children:[jsxRuntimeExports.jsx(Trash2,{size:16,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:"Remove"})]})]})]})}const MemoizedSortableBlock=React$2.memo(SortableBlock),BLOCK_LIMITS={stripe_checkout:10,audio_player:1,calendly:1,verified_reviews:1,referral_button:1,offer_banner:1,social_links:2,video:10,faq:2,countdown:2,single_offer:5,mini_offer:20,button_url:10,profile_card:1,scroll_arrow:5},PRO_ONLY_BLOCKS=["audio_player","calendly","verified_reviews","countdown","secure_checkout","mini_offer","scroll_arrow"];function AddSectionButton({addBlock:et,canAddBlock:dt}){const[kt,$t]=reactExports.useState(!1),{user:Tt}=useAuth(),Dt=(Tt==null?void 0:Tt.plan)==="business_builder_pack"&&(Tt==null?void 0:Tt.pro_status)==="active",Ft=Kt=>typeof dt=="function"&&!dt(Kt),Ut=Kt=>PRO_ONLY_BLOCKS.includes(Kt)&&!Dt;reactExports.useEffect(()=>{const Kt=Yt=>{Yt.target.closest(".add-section-dropdown")||$t(!1)};return document.addEventListener("click",Kt),()=>document.removeEventListener("click",Kt)},[]),reactExports.useEffect(()=>(kt?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[kt]);const Ht=[{label:"Section Container",value:"container"},{label:"Divider",value:"divider"},{label:"Heading (H1)",value:"heading"},{label:"Subheading (H2)",value:"subheading"},{label:"Sub-Subheading (H3)",value:"subsubheading"},{label:"List Heading",value:"list_heading"},{label:"Paragraph",value:"paragraph"},{label:"FAQ",value:"faq"},{label:"Video",value:"video"},{label:"Audio Player",value:"audio_player"},{label:"Pro Image",value:"image"},{label:"Profile Card",value:"profile_card"},{label:"Single Offer",value:"single_offer"},{label:"Scroll Arrow",value:"scroll_arrow"},{label:"Mini Offer",value:"mini_offer"},{label:"Verified Reviews",value:"verified_reviews"},{label:"Stripe Checkout",value:"stripe_checkout"},{label:"Offer Banner",value:"offer_banner"},{label:"Secure Checkout",value:"secure_checkout"},{label:"Button Url",value:"button_url"},{label:"Social Links Row",value:"social_links"},{label:"Countdown Timer",value:"countdown"},{label:"Calendly",value:"calendly"}];return(Tt==null?void 0:Tt.is_admin_employee)===1&&Ht.push({label:"Referral Button",value:"referral_button"}),jsxRuntimeExports.jsxs("div",{className:"add-section-dropdown relative inline-block text-left",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Kt=>{Kt.stopPropagation(),$t(Yt=>!Yt)},className:`p-3 rounded-full bg-blue text-white shadow-lg hover:bg-green hover:text-black 
                   transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green`,title:"Add Section",children:jsxRuntimeExports.jsx(Plus,{size:22})}),kt&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 mt-3 w-64 sm:w-56 bg-[#0F172A] border border-gray-700 rounded-xl shadow-xl overflow-y-auto max-h-[60vh] sm:max-h-[480px] pb-2 z-50",children:Ht.map(Kt=>{const Yt=Ft(Kt.value),Jt=Ut(Kt.value);return jsxRuntimeExports.jsx("button",{type:"button",disabled:Yt,onClick:Zt=>{if(Zt.stopPropagation(),Jt){y$4.error("This is a Pro feature. Upgrade to Pro to unlock it.");return}Yt||(et(Kt.value),$t(!1))},className:`block w-full text-left px-5 py-3 transition-all
  ${Yt?"text-gray-500 cursor-not-allowed opacity-40":"text-gray-200 hover:bg-white/5"}
`,title:Ut(Kt.value)?"Upgrade to Pro to unlock this block":Yt?"Block limit reached":"",children:jsxRuntimeExports.jsx("span",{className:"flex items-center justify-between w-full gap-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:`
                      text-[10px]
                      uppercase
                      px-2
                      py-0.5
                      whitespace-nowrap
                      border
                      rounded-md
        ${BLOCK_PILL_STYLES[Kt.label]||"bg-white/5 text-white-400 border-white/20"}
      `,children:Kt.label}),Ut(Kt.value)&&jsxRuntimeExports.jsx("span",{className:"text-[10px] px-2 py-0.5 text-royalPurple uppercase",children:"PRO"})]})})},Kt.value)})})]})}function blendColors(et,dt="rgba(255,255,255,0.04)"){const kt=et.replace("#",""),$t=parseInt(kt.substring(0,2),16),Tt=parseInt(kt.substring(2,4),16),Dt=parseInt(kt.substring(4,6),16),Ft=dt.match(/rgba?\(([^)]+)\)/);if(!Ft)return et;const[Ut,Ht,Kt,Yt=1]=Ft[1].split(",").map(sr=>parseFloat(sr.trim())),Jt=Yt||.04,Zt=Math.round(Ut*Jt+$t*(1-Jt)),er=Math.round(Ht*Jt+Tt*(1-Jt)),rr=Math.round(Kt*Jt+Dt*(1-Jt));return`rgb(${Zt}, ${er}, ${rr})`}async function saveTemplate(et,dt,kt,$t=null){try{return $t?(await axiosInstance.put(`/landing/update-template/${$t}`,{name:dt,snapshot:kt})).data:(await axiosInstance.post(`/landing/save-template/${et}`,{name:dt,snapshot:kt})).data}catch(Tt){return console.error(" saveTemplate error:",Tt),{success:!1}}}async function loadTemplateVersions(et){try{return(await axiosInstance.get(`/landing/templates/${et}`)).data}catch(dt){return console.error(" loadTemplateVersions error:",dt),{success:!1,templates:[]}}}async function fetchTemplateSnapshot(et){try{return(await axiosInstance.get(`/landing/load-template/${et}`)).data}catch(dt){return console.error(" fetchTemplateSnapshot error:",dt),{success:!1}}}async function restoreTemplate(et,dt){try{return(await axiosInstance.put(`/landing/restore-template/${et}`,{snapshot:dt})).data}catch(kt){return console.error(" restoreTemplate error:",kt),{success:!1}}}async function deleteTemplate(et){try{return(await axiosInstance.delete(`/landing/delete-template/${et}`)).data}catch(dt){return console.error(" deleteTemplate error:",dt),{success:!1}}}function SaveVersionModal({isOpen:et,name:dt,setName:kt,onCancel:$t,onConfirm:Tt}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[500]",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111827] border border-gray-700 rounded-xl shadow-2xl p-8 w-full max-w-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-silver mb-4 text-center",children:"Save Template Version"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-6 text-center",children:"Give this version a name so you can restore it later."}),jsxRuntimeExports.jsx("input",{type:"text",value:dt,onChange:Dt=>kt(Dt.target.value),placeholder:"e.g. Gradient Header Update",className:`w-full px-4 py-2 bg-gray-800 text-white rounded-lg border border-gray-700 
                     focus:ring-2 focus:ring-green focus:outline-none`}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:$t,className:"px-4 py-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Tt,className:"px-6 py-2 rounded-lg bg-green text-black font-semibold shadow hover:bg-green transition",children:"Save Version"})]})]})}):null}function VersionControls({versions:et,selectedVersion:dt,setSelectedVersion:kt,appliedVersion:$t,handleLoadVersion:Tt,handleApplyVersion:Dt,handleDeleteVersion:Ft}){const Ut=!dt||dt===$t,[Ht,Kt]=reactExports.useState(!1),Yt=reactExports.useRef(null);reactExports.useEffect(()=>{function er(rr){Yt.current&&!Yt.current.contains(rr.target)&&Kt(!1)}return Ht&&document.addEventListener("mousedown",er),()=>{document.removeEventListener("mousedown",er)}},[Ht]);const Jt=et.find(er=>er.id===dt);function Zt(er){kt(er),Tt({target:{value:er}}),Kt(!1)}return jsxRuntimeExports.jsxs("div",{className:`
        w-full
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        rounded-lg sm:rounded-xl
        p-3 sm:p-5
        mb-10
        shadow-inner
        pb-6 sm:pb-12
      `,children:[jsxRuntimeExports.jsxs("div",{ref:Yt,className:"relative w-full mb-4 sm:mb-6",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Kt(er=>!er),className:`
            w-full flex items-center justify-between
            rounded-lg px-4 py-2 text-sm transition
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            text-dashboard-text-light dark:text-dashboard-text-dark
            border border-dashboard-border-light dark:border-dashboard-border-dark
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            focus:outline-none focus:ring-2 focus:ring-green/60
          `,children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:Jt?`${Jt.name} (${new Date(Jt.updated_at||Jt.created_at).toLocaleString()})`:"Load saved version"}),Ht?jsxRuntimeExports.jsx(ChevronUp,{size:16,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"}):jsxRuntimeExports.jsx(ChevronDown,{size:16,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"})]}),Ht&&jsxRuntimeExports.jsxs("div",{className:`
              absolute z-30 mt-2 w-full
              rounded-lg shadow-lg
              max-h-[260px] overflow-y-auto overscroll-contain
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
            `,children:[et.length===0&&jsxRuntimeExports.jsx("div",{className:`
                  px-4 py-2 text-sm
                  text-dashboard-muted-light dark:text-dashboard-muted-dark
                `,children:"No saved versions"}),et.map(er=>{const rr=er.id===dt,sr=er.updated_at||er.created_at;return jsxRuntimeExports.jsxs("div",{onClick:()=>Zt(er.id),className:`
                    px-4 py-2 cursor-pointer text-sm transition
                    ${rr?`
                          bg-dashboard-hover-light
                          dark:bg-dashboard-hover-dark
                          text-dashboard-text-light
                          dark:text-dashboard-text-dark
                        `:`
                          text-dashboard-text-light/70
                          dark:text-dashboard-text-dark/70
                          hover:bg-dashboard-hover-light
                          dark:hover:bg-dashboard-hover-dark
                        `}
                  `,children:[jsxRuntimeExports.jsx("div",{className:"truncate",children:er.name}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-60",children:new Date(sr).toLocaleString()})]},er.id)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-4",children:[jsxRuntimeExports.jsx("button",{disabled:Ut,onClick:Ut?void 0:Dt,className:`
            font-semibold px-6 py-2 rounded-lg shadow text-sm transition
            ${Ut?`
                  bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  cursor-not-allowed
                `:"bg-green text-black hover:bg-green/90"}
          `,children:"Apply"}),dt&&jsxRuntimeExports.jsx("button",{type:"button",onClick:Ft,className:`
              px-6 py-2 rounded-lg
              bg-red-500/10
              border border-red-500/30
              text-red-500
              hover:bg-red-500/20
              transition text-sm font-semibold
            `,children:"Delete"}),dt&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(""),className:`
              px-6 py-2 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-muted-light dark:text-dashboard-muted-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
              transition text-sm font-semibold
            `,children:"Cancel"})]})]})}function LogoUploader({landing:et,setLanding:dt,showLogoSection:kt,setShowLogoSection:$t}){return jsxRuntimeExports.jsxs("div",{className:`
      mt-12
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light dark:border-dashboard-border-dark
      rounded-2xl
      shadow-inner
      p-6
      transition-all
      hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
    `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-5 cursor-pointer",onClick:()=>$t(Tt=>!Tt),children:[jsxRuntimeExports.jsx("label",{className:`text-lg font-semibold tracking-wide
        text-dashboard-text-light dark:text-dashboard-text-dark`,children:"Brand Logo"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:`text-xs italic hidden sm:block
            text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:"Recommended: PNG or SVG  200200px+"}),jsxRuntimeExports.jsx("span",{className:`text-sm transition-transform duration-300
            text-dashboard-muted-light dark:text-dashboard-muted-dark ${kt?"rotate-180":"rotate-0"}`,children:""})]})]}),jsxRuntimeExports.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${kt?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:et.logo_url?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("p",{className:`text-sm mb-3
text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:"Current Logo:"}),jsxRuntimeExports.jsx("div",{className:`
            relative
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            border border-dashboard-border-light dark:border-dashboard-border-dark
            rounded-lg
            shadow-md
            p-3
            w-fit
            mx-auto
          `,children:jsxRuntimeExports.jsx("img",{src:et.logo_url,alt:"Uploaded Logo",className:"h-24 object-contain rounded-md mx-auto"})}),jsxRuntimeExports.jsx("button",{type:"button",className:`text-xs mt-4
              text-red-500 hover:underline`,onClick:()=>dt({...et,logo_url:""}),children:"Remove Logo"})]}):jsxRuntimeExports.jsxs("label",{htmlFor:"logoUpload",className:`
            flex flex-col items-center justify-center
            border-2 border-dashed
            border-dashboard-border-light dark:border-dashboard-border-dark
            hover:border-green
            rounded-xl
            py-10 px-6
            cursor-pointer
            transition-all duration-300
            group
          `,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`
              h-10 w-10
              text-dashboard-muted-light dark:text-dashboard-muted-dark
              group-hover:text-green
              transition
            `,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-6-9l-3-3m0 0l-3 3m3-3V15"})}),jsxRuntimeExports.jsxs("p",{className:`mt-3 text-sm
              text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:[jsxRuntimeExports.jsx("span",{className:"text-green font-medium",children:"Click to upload"})," or drag your logo"]}),jsxRuntimeExports.jsx("input",{id:"logoUpload",type:"file",accept:"image/*",onChange:async Tt=>{const Dt=Tt.target.files[0];if(!Dt)return;const Ft=URL.createObjectURL(Dt);dt({...et,logo_url:Ft});const Ut=new FormData;Ut.append("logo",Dt),Ut.append("landingId",et.id);try{const Ht=await axiosInstance.post("/landing/upload-logo",Ut,{headers:{"Content-Type":"multipart/form-data"}});if(Ht.data.success)dt({...et,logo_url:Ht.data.logo_url}),URL.revokeObjectURL(Ft),y$4.success("Logo uploaded successfully!");else throw new Error(Ht.data.message)}catch{y$4.error("Error uploading logo"),dt({...et,logo_url:""})}},className:"hidden"})]})})]})}function getReadableTextColor(et){if(!et||et.includes("gradient"))return"text-white";const dt=et.replace("#",""),kt=parseInt(dt.substring(0,2),16),$t=parseInt(dt.substring(2,4),16),Tt=parseInt(dt.substring(4,6),16);return(.299*kt+.587*$t+.114*Tt)/255>.6?"text-black":"text-white"}function ColorThemeChooser({bgTheme:et,setBgTheme:dt,includeGradients:kt=!0,isPro:$t=!1}){const[Tt,Dt]=reactExports.useState(()=>localStorage.getItem("showThemes")==="true"),[Ft,Ut]=reactExports.useState("#111827"),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState("#0ea5e9"),[Zt,er]=reactExports.useState("#22c55e"),[rr,sr]=reactExports.useState("90deg"),nr=mr=>/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(mr);reactExports.useEffect(()=>{localStorage.setItem("showThemes",Tt)},[Tt]);const ir=colorThemes,lr=gradientThemes,or=reactExports.useMemo(()=>kt?[...ir,...lr]:ir,[kt]),cr=mr=>{var Rr;(Rr=mr.preview)!=null&&Rr.includes("gradient")&&!$t||dt(mr.preview)},dr=()=>{Kt(!1),dt(Ft)},ur=()=>{if(!$t)return;const mr=`linear-gradient(${rr}, ${Yt}, ${Zt})`;dt(mr)};reactExports.useEffect(()=>{if(et){if(et.startsWith("#")){Ut(et),Kt(!1);return}if(et.startsWith("linear-gradient")){Kt(!0);const mr=et.match(/linear-gradient\(([^,]+),\s*([^,]+),\s*([^)]+)\)/);if(mr){const[,jr,Rr,br]=mr;sr(jr.trim()),Jt(Rr.trim()),er(br.trim())}}}},[et]);const pr=(et==null?void 0:et.toLowerCase())===Ft.toLowerCase()&&nr(Ft);return jsxRuntimeExports.jsxs("div",{className:`
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark
      rounded-2xl
      shadow-inner
    `,children:[jsxRuntimeExports.jsxs("div",{onClick:()=>Dt(mr=>!mr),className:"flex items-center justify-between px-6 py-5 cursor-pointer select-none",children:[jsxRuntimeExports.jsx("h3",{className:`text-lg font-semibold
text-dashboard-text-light
dark:text-dashboard-text-dark`,children:"Background Theme"}),jsxRuntimeExports.jsx("span",{className:`transition-transform
text-dashboard-muted-light
dark:text-dashboard-muted-dark ${Tt?"rotate-180":""}`,children:""})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-500 ${Tt?"max-h-[900px] opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[jsxRuntimeExports.jsx("div",{className:`
  h-14 rounded-lg
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
`,style:{background:et||"linear-gradient(to right, #000, #333)"}}),jsxRuntimeExports.jsx("div",{className:`
            grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3
            overflow-y-auto
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            rounded-lg p-2
`,style:{maxHeight:"240px"},children:or.map(mr=>{var br;const Rr=((br=mr.preview)==null?void 0:br.includes("gradient"))&&!$t;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>cr(mr),disabled:Rr,className:`relative h-12 rounded-lg border transition-all
        ${et===mr.preview?"border-green ring-2 ring-green/50":"border-dashboard-border-light dark:border-dashboard-border-dark hover:border-green/60"}
        ${Rr?"opacity-50 cursor-not-allowed":""}
      `,style:{background:mr.preview},children:[jsxRuntimeExports.jsx("span",{className:`
                    absolute inset-0 flex items-center justify-center
                    text-[10px] font-semibold uppercase
                    ${getReadableTextColor(mr.preview)}
                  `,children:mr.label}),Rr&&jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 text-[9px] px-1.5 py-0.5 rounded bg-purple-600 text-white font-semibold",children:"PRO"})]},mr.name)})}),!$t&&jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-400 mt-2 text-center",children:"Unlock custom colors and gradients with Pro for complete brand control."}),$t&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-semibold mb-3 text-center
              text-dashboard-text-light
              dark:text-dashboard-text-dark`,children:"Custom Solid Color"}),jsxRuntimeExports.jsxs("div",{className:`mx-auto
                flex flex-col sm:flex-row items-center justify-center
                gap-3
                max-w-[520px]
                rounded-lg
                p-3
                transition-all
                ${pr?"ring-2 ring-green-500/70 border border-green-400":""}
              `,children:[jsxRuntimeExports.jsx("input",{type:"color",value:Ft,onChange:mr=>Ut(mr.target.value),className:`
                  w-10
                  h-10
                  aspect-square
                  rounded-full
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  cursor-pointer
                  appearance-none
                  p-0
                `}),jsxRuntimeExports.jsx("input",{type:"text",value:Ft,onChange:mr=>Ut(mr.target.value),placeholder:"#111827",className:`
                  w-full
                  max-w-[420px]
                  px-4
                  py-2.5
                  rounded-lg
                  bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  placeholder-dashboard-muted-light
                  dark:placeholder-dashboard-muted-dark
                  text-sm
                  uppercase
                `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:dr,disabled:!nr(Ft)||pr,className:`px-4 py-2 border rounded text-sm
          ${nr(Ft)?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-green hover:border-green":"text-dashboard-muted-light dark:text-dashboard-muted-dark opacity-60 cursor-not-allowed"}
        `,children:pr?"Active":"Apply"})]})]}),kt&&$t&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-semibold mb-2
              text-dashboard-text-light
              dark:text-dashboard-text-dark`,children:"Custom Gradient"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:Yt,onChange:mr=>Jt(mr.target.value),className:`
                    w-10
                    h-10
                    aspect-square
                    rounded-full
                    border
                    border-dashboard-border-light
                  dark:border-dashboard-border-dark
                    cursor-pointer
                    appearance-none
                    p-0
                  `}),jsxRuntimeExports.jsx("input",{type:"text",value:Yt,onChange:mr=>Jt(mr.target.value),placeholder:"#0ea5e9",className:`
                    w-full
                    max-w-[240px]
                    px-4
                    py-2.5
                    rounded-lg
                   bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  placeholder-dashboard-muted-light
                  dark:placeholder-dashboard-muted-dark
                    text-sm
                    uppercase
                  `})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:Zt,onChange:mr=>er(mr.target.value),className:`
                    w-10
                    h-10
                    aspect-square
                    rounded-full
                    border
                    border-gray-600
                    cursor-pointer
                    appearance-none
                    p-0
                  `}),jsxRuntimeExports.jsx("input",{type:"text",value:Zt,onChange:mr=>er(mr.target.value),placeholder:"#22c55e",className:`
                    w-full
                    max-w-[240px]
                    px-4
                    py-2.5
                    bg-dashboard-bg-light
                    dark:bg-dashboard-bg-dark
                    border border-dashboard-border-light
                    dark:border-dashboard-border-dark
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    placeholder-dashboard-muted-light
                    dark:placeholder-dashboard-muted-dark
                    rounded-lg         
                    text-sm
                    uppercase
                  `})]})]}),jsxRuntimeExports.jsxs("select",{value:rr,onChange:mr=>sr(mr.target.value),className:`
                mt-3
                w-full
                max-w-[520px]
                p-2.5
              bg-dashboard-bg-light
              dark:bg-dashboard-bg-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              text-dashboard-text-light
              dark:text-dashboard-text-dark
                rounded-lg

              `,children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:ur,disabled:!nr(Yt)||!nr(Zt),className:`mt-3 w-full px-4 py-2 border rounded
        ${nr(Yt)&&nr(Zt)?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-green hover:border-green":"text-dashboard-muted-light dark:text-dashboard-muted-dark opacity-60 cursor-not-allowed"}
      `,children:"Apply Gradient"})]}),jsxRuntimeExports.jsx("p",{className:`text-xs text-center
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark`,children:"Presets or custom colors all save the same way."})]})})]})}function ThemeAndFontControls({landing:et,setLanding:dt,bgTheme:kt,setBgTheme:$t,fontName:Tt,setFontName:Dt,fontFile:Ft,setFontFile:Ut,isPro:Ht}){const Kt=[...colorThemes,...gradientThemes];function Yt(Jt){const Zt=Kt.find(er=>er.name===Jt);return(Zt==null?void 0:Zt.preview)||Jt}return jsxRuntimeExports.jsxs("div",{className:"mb-12",children:[jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:kt,setBgTheme:Jt=>{const Zt=Yt(Jt);$t(Zt),dt({...et,bg_theme:Zt})},colorThemes:Kt,includeGradients:!0,isPro:Ht}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(FontSelector,{fontName:Tt,setFontName:Jt=>{Dt(Jt),dt({...et,font:Jt})},fontFile:Ft,setFontFile:Jt=>{Ut(Jt),dt({...et,font_file:Jt})}})})]})}function TextColorControls({landing:et,setLanding:dt}){const kt=[{key:"font_color_h1",label:"Heading 1"},{key:"font_color_h2",label:"Heading 2"},{key:"font_color_h3",label:"Heading 3"},{key:"font_color_p",label:"Paragraph"}],$t=(Tt,Dt)=>{dt({...et,[Tt]:Dt.toUpperCase()})};return jsxRuntimeExports.jsxs("div",{className:`
      relative z-[10]
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      rounded-xl
      p-6
      shadow-inner
      border border-dashboard-border-light dark:border-dashboard-border-dark
    `,children:[jsxRuntimeExports.jsx("h3",{className:`
        text-lg font-semibold mb-4
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:"Text Colors"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:kt.map(({key:Tt,label:Dt})=>jsxRuntimeExports.jsxs("div",{className:`
            flex flex-col items-center justify-center
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            rounded-lg
            p-4
            border border-dashboard-border-light dark:border-dashboard-border-dark
            hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
            transition-all duration-200
          `,children:[jsxRuntimeExports.jsx("label",{className:`
              text-sm font-semibold mb-2
              text-dashboard-text-light dark:text-dashboard-text-dark
            `,children:Dt}),jsxRuntimeExports.jsx("input",{type:"color",value:et[Tt]||"#FFFFFF",onChange:Ft=>$t(Tt,Ft.target.value),className:`
              w-14 h-14 p-0
              rounded-lg
              cursor-pointer
              border border-dashboard-border-light dark:border-dashboard-border-dark
              hover:scale-105 transition-transform
            `}),jsxRuntimeExports.jsx("input",{type:"text",value:et[Tt]||"#FFFFFF",onChange:Ft=>$t(Tt,Ft.target.value),className:`
              mt-3 w-full px-2 py-1 text-xs text-center uppercase
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              rounded
              text-dashboard-text-light dark:text-dashboard-text-dark
              focus:outline-none focus:ring-1 focus:ring-green
            `,placeholder:"#FFFFFF"}),jsxRuntimeExports.jsx("span",{className:`
              text-xs mt-2 tracking-wider
              text-dashboard-muted-light dark:text-dashboard-muted-dark
            `,children:et[Tt]||"#FFFFFF"})]},Tt))})]})}const MOTION_PRESETS=[{value:"fade",label:"Fade In"},{value:"fade-up",label:"Fade Up"},{value:"fade-down",label:"Fade Down"},{value:"fade-left",label:"Fade Left"},{value:"fade-right",label:"Fade Right"},{value:"slide-up",label:"Slide Up"},{value:"slide-down",label:"Slide Down"},{value:"slide-left",label:"Slide Left"},{value:"slide-right",label:"Slide Right"},{value:"scale-up",label:"Scale Up"},{value:"scale-down",label:"Scale Down"},{value:"blur-in",label:"Blur In"},{value:"rotate-in",label:"Rotate In"},{value:"flip-up",label:"Flip Up"},{value:"flip-left",label:"Flip Left"},{value:"pop",label:"Pop"},{value:"bounce",label:"Bounce"}],PRESET_VARIANTS={fade:{opacity:0},"fade-up":{opacity:0,y:30},"fade-down":{opacity:0,y:-30},"fade-left":{opacity:0,x:30},"fade-right":{opacity:0,x:-30},"slide-up":{y:60},"slide-down":{y:-60},"slide-left":{x:-60},"slide-right":{x:60},"scale-up":{scale:.9,opacity:0},"scale-down":{scale:1.1,opacity:0},"blur-in":{opacity:0,filter:"blur(10px)",y:20},"rotate-in":{opacity:0,rotate:-8,scale:.95},"flip-up":{rotateX:-90,opacity:0},"flip-left":{rotateY:-90,opacity:0},pop:{scale:.8,opacity:0},bounce:{y:-20,opacity:0}};function MotionWrapper({children:et,index:dt,motionSettings:kt,blockMotion:$t}){if(!et)return null;if(!((kt==null?void 0:kt.enabled)===!0&&($t==null?void 0:$t.disabled)!==!0))return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:et});const Dt=($t==null?void 0:$t.preset)||(kt==null?void 0:kt.preset)||"fade-up",Ut={hidden:PRESET_VARIANTS[Dt]||{opacity:0},visible:{opacity:1,x:0,y:0,scale:1,rotate:0,rotateX:0,rotateY:0,filter:"blur(0px)",transition:{duration:kt.duration??.5,delay:(kt.delay??0)+dt*(kt.stagger??.12),ease:kt.easing??"easeOut",type:Dt==="bounce"?"spring":"tween",bounce:Dt==="bounce"?.35:0}}};return jsxRuntimeExports.jsx(motion.div,{variants:Ut,initial:"hidden",whileInView:"visible",viewport:{once:kt.viewport_once??!0},children:et})}function renderPreviewBlock(et,dt,kt){var Kt,Yt,Jt;if(et.enabled===!1)return null;const{landing:$t,bgTheme:Tt,user:Dt,updateBlock:Ft,adjustForLandingOverlay:Ut}=kt,Ht={margin:"0 auto 24px",maxWidth:"700px",textAlign:"center"};switch(et.type){case"heading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold leading-snug normal-case",style:{...Ht,...nr,maxWidth:700,textAlign:sr,color:$t.font_color_h1||"#FFFFFF"},children:et.text||"Heading Example"},dt)}case"subheading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold leading-snug",style:{...Ht,...nr,maxWidth:700,textAlign:sr,color:$t.font_color_h2||"#E5E5E5"},children:et.text||"Subheading Example"},dt)}case"subsubheading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium leading-snug",style:{...Ht,...nr,maxWidth:700,textAlign:sr,color:$t.font_color_h3||"#CCCCCC"},children:et.text||"Supporting Header"},dt)}case"list_heading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("p",{style:{...Ht,...nr,maxWidth:700,marginBottom:10,fontWeight:700,fontSize:"1.15rem",textAlign:sr,color:$t.font_color_p||"#FFFFFF"},children:et.text||" List Heading Example"},dt)}case"paragraph":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};if(et.bulleted){const ir=(et.text||"").split(/\n/).filter(Boolean);return jsxRuntimeExports.jsx("div",{style:{...nr,maxWidth:700,marginBottom:24,lineHeight:"1.8"},children:jsxRuntimeExports.jsx("ul",{style:{listStyle:"disc",paddingLeft:"1.25rem",margin:0,textAlign:"left",color:$t.font_color_p||"rgba(255,255,255,0.92)"},children:ir.map((lr,or)=>jsxRuntimeExports.jsx("li",{style:{marginBottom:"0.35rem"},children:lr.replace(/^\s*/,"")},or))})},dt)}return jsxRuntimeExports.jsx("p",{className:"text-lg leading-relaxed",style:{...nr,maxWidth:700,marginBottom:24,textAlign:sr,color:$t.font_color_p||"rgba(255,255,255,0.92)",whiteSpace:"pre-line"},children:et.text||"Your paragraph will appear here."},dt)}case"video":if(!et.url)return null;let Zt=et.url.trim();return Zt.includes("watch?v=")?Zt=Zt.replace("watch?v=","embed/"):Zt.includes("youtu.be/")&&(Zt=`https://www.youtube.com/embed/${Zt.split("youtu.be/")[1].split(/[?&]/)[0]}`),Zt.includes("vimeo.com")&&!Zt.includes("player.vimeo.com")&&(Zt=`https://player.vimeo.com/video/${Zt.split("vimeo.com/")[1].split(/[?&]/)[0]}`),jsxRuntimeExports.jsxs("div",{style:{margin:"40px auto",maxWidth:"800px",textAlign:"center"},children:[jsxRuntimeExports.jsx("iframe",{src:Zt,title:"Embedded Video",style:{width:"100%",aspectRatio:"16 / 9",border:"none",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.35)"},allow:"autoplay; fullscreen",allowFullScreen:!0}),et.caption&&jsxRuntimeExports.jsx("p",{style:{marginTop:"12px",fontSize:"0.95rem",color:$t.font_color_p||"#DDD",fontStyle:"italic"},children:et.caption})]},dt);case"divider":return et.style==="space"?jsxRuntimeExports.jsx("div",{style:{height:`${et.height||40}px`}},dt):jsxRuntimeExports.jsx("hr",{style:{border:"none",borderTop:`1px solid ${et.color||"rgba(255,255,255,0.2)"}`,width:"60%",margin:`${(et.height||40)/2}px auto`,opacity:.7}},dt);case"spacer":return et.style==="space"?jsxRuntimeExports.jsx("div",{style:{height:`${et.height||40}px`}},dt):jsxRuntimeExports.jsx("hr",{style:{border:"none",borderTop:`1px solid ${et.color||"rgba(255,255,255,0.2)"}`,width:et.width||"60%",margin:`${(et.height||40)/2}px auto`,opacity:.7}},dt);case"calendly":return et.calendly_url?jsxRuntimeExports.jsx("div",{style:{margin:"40px auto",maxWidth:"900px",textAlign:"center"},children:jsxRuntimeExports.jsx("iframe",{src:et.calendly_url,style:{width:"100%",height:`${et.height||650}px`,border:"none",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.35)"},title:"Calendly Scheduler"})},dt):null;case"social_links":{const sr=et.alignment||"center",nr=et.icon_style||"color";et.icon_color;const ir=!!et.show_borders&&nr==="mono",lr=et.links||{},or={instagram:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg",threads:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/threads.svg",twitter:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg",youtube:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg",linkedin:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg",facebook:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg",tiktok:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg",pinterest:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/pinterest.svg",substack:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/substack.svg"};return jsxRuntimeExports.jsx("div",{style:{margin:"40px 0",display:"flex",justifyContent:sr==="center"?"center":sr==="right"?"flex-end":"flex-start",gap:"20px",flexWrap:"wrap"},children:Object.entries(lr).filter(([cr,dr])=>dr&&or[cr]).map(([cr,dr])=>{const ur=et.icon_style==="mono"?"rgba(255,255,255,0.75)":et.icon_color||"#ffffff";return jsxRuntimeExports.jsx("a",{href:dr,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:ir?"34px":"26px",height:ir?"34px":"26px",borderRadius:ir?"10px":"0",border:ir?`1.25px solid ${ur}`:"none",transition:"transform 0.25s ease, opacity 0.2s ease, box-shadow 0.2s ease",textDecoration:"none"},onMouseEnter:pr=>{pr.currentTarget.style.transform="scale(1.1)",pr.currentTarget.style.opacity="0.9",pr.currentTarget.style.boxShadow="0 0 12px rgba(255,255,255,0.35)"},onMouseLeave:pr=>{pr.currentTarget.style.transform="scale(1)",pr.currentTarget.style.opacity="1",pr.currentTarget.style.boxShadow="none"},children:jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"20px",WebkitMask:`url(${or[cr]}) no-repeat center / contain`,mask:`url(${or[cr]}) no-repeat center / contain`,backgroundColor:ur}})},cr)})},dt)}case"countdown":{const sr=et.text||"Offer Ends In:",nr=et.style_variant||"minimal",ir=et.text_color||"#fff",or=(()=>{const ur=Tt||"";return ur.includes("emerald")?"#10b981":ur.includes("purple")||ur.includes("royal")?"#8b5cf6":ur.includes("pink")||ur.includes("rose")?"#ec4899":ur.includes("yellow")||ur.includes("amber")?"#facc15":ur.includes("blue")?"#3b82f6":ur.includes("red")?"#ef4444":"#10b981"})(),cr=et.glow_color||or,dr={minimal:{fontSize:"2rem",fontFamily:"monospace",letterSpacing:"2px",color:ir},boxed:{display:"inline-block",background:"rgba(15,23,42,0.85)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"12px 24px",fontSize:"2rem",fontFamily:"monospace",letterSpacing:"2px",color:ir},glow:{fontSize:"2rem",fontFamily:"monospace",letterSpacing:"2px",color:ir,textShadow:`
        0 0 6px ${cr},
        0 0 14px ${cr},
        0 0 28px ${cr}
      `}};return jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"50px 0"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:700,fontSize:"1.3rem",marginBottom:"10px",color:ir},children:sr}),jsxRuntimeExports.jsx("div",{style:dr[nr]||dr.minimal,children:"12:34:56:78"}),jsxRuntimeExports.jsx("div",{style:{color:ir,fontSize:"0.9rem",marginTop:"8px",letterSpacing:"1px"},children:"DAYS|HRS|MIN|SEC"})]},dt)}case"stripe_checkout":return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",margin:"40px auto"},children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{var sr;if(!et.pdf_url){y$4.warn("Please select a Book to sell first.");return}try{const nr=await axiosInstance.post("/seller-checkout/create-checkout-session",{landingPageId:$t.id,sellerId:Dt==null?void 0:Dt.id,pdfUrl:et.pdf_url,price_in_cents:Math.round((et.price||10)*100)});(sr=nr.data)!=null&&sr.url?window.location.href=nr.data.url:y$4.error("Unable to start checkout. Please try again.")}catch(nr){console.error("Stripe Checkout Error:",nr),y$4.error("Error connecting to Stripe. Try again later.")}},className:"transition-transform hover:scale-105",style:{background:et.button_color||"#7bed9f",color:et.text_color||"#000",padding:"14px 36px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:et.button_text||"Buy & Download Book"}),jsxRuntimeExports.jsxs("p",{style:{marginTop:"8px",color:"#aaa"},children:["$",Number(et.price)>0?Number(et.price).toFixed(2):"10.00"," ","USD"]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Selling:",jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-green font-medium ml-1 underline hover:text-green transition",children:"Preview Book"})]})]},dt);case"referral_button":if((Dt==null?void 0:Dt.is_admin_employee)!==1)return jsxRuntimeExports.jsx("p",{style:{color:"#999",fontSize:"0.9rem",textAlign:"center",marginTop:"20px"},children:"(Referral buttons are available to admin employees only)"},dt);const er=Dt!=null&&Dt.referral_slug?`https://themessyattic.com/r/${Dt.referral_slug}`:"https://themessyattic.com/sign-up";return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",margin:"40px auto"},children:[jsxRuntimeExports.jsx("a",{href:er,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",background:et.button_color||"#7bed9f",color:et.text_color||"#000000",padding:"14px 36px",borderRadius:"8px",fontWeight:700,textDecoration:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"transform 0.2s ease, box-shadow 0.3s ease"},onMouseOver:sr=>sr.currentTarget.style.transform="scale(1.05)",onMouseOut:sr=>sr.currentTarget.style.transform="scale(1)",children:et.button_text||et.text||"Sign Up with My Referral"}),jsxRuntimeExports.jsx("p",{style:{color:"#aaa",fontSize:"0.8rem",marginTop:"10px",wordBreak:"break-all"},children:`Referral link: ${er}`}),jsxRuntimeExports.jsxs("p",{style:{color:"#aaa",fontSize:"0.75rem",marginTop:"6px"},children:["Referral link is shown here for preview only",jsxRuntimeExports.jsx("br",{})," and is not visible on the live page."]})]},dt);case"faq":return jsxRuntimeExports.jsxs("div",{style:{background:et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.match_main_bg?Ut(Tt):et.bg_color||Tt||"rgba(0,0,0,0.3)",color:et.text_color||"#FFFFFF",padding:"40px",borderRadius:et.use_no_bg?"0px":"20px",marginTop:"40px",textAlign:et.alignment||"left",maxWidth:"700px",marginLeft:"auto",marginRight:"auto"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:700,marginBottom:"20px"},children:et.title||"Frequently Asked Questions"}),et.items.map((sr,nr)=>jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px",borderBottom:et.use_no_bg?"1px solid rgba(255,255,255,0.2)":"1px solid rgba(255,255,255,0.15)",paddingBottom:"16px",cursor:"pointer"},onClick:()=>{const ir=[...et.items],lr=document.getElementById(`faq-prev-${dt}-${nr}`);lr&&(ir[nr]._height=lr.scrollHeight+"px"),ir[nr].open=!ir[nr].open,Ft(dt,"items",ir)},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700,fontSize:"1.1rem"},children:[jsxRuntimeExports.jsx("span",{children:sr.q}),jsxRuntimeExports.jsx("span",{children:sr.open?"":"+"})]}),jsxRuntimeExports.jsx("div",{id:`faq-prev-${dt}-${nr}`,style:{height:sr.open?sr._height||"auto":"0px",overflow:"hidden",transition:"height 0.35s ease"},children:jsxRuntimeExports.jsx("p",{style:{color:et.text_color?et.text_color+"CC":"#CCCCCC",fontSize:"0.95rem",marginTop:"12px"},children:sr.a})})]},nr))]},dt);case"image":return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",padding:et.padding?`min(${et.padding}px, 12px)`:"0px",margin:"12px 0",overflow:"visible"},children:[jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:"rounded-lg",style:{maxWidth:et.full_width?"100%":et.width?`${et.width}%`:"100%",width:"100%",height:"auto",objectFit:"contain",display:"block",margin:"0 auto",padding:et.padding?`min(${et.padding}px, 12px)`:"0px",borderRadius:et.radius?`${et.radius}px`:"0px",boxShadow:et.shadow?(()=>{const sr=(et.shadow_angle||135)*Math.PI/180,nr=Math.round(Math.cos(sr)*(et.shadow_offset||10)),ir=Math.round(Math.sin(sr)*(et.shadow_offset||10));return`${nr}px ${ir}px ${et.shadow_depth||25}px ${et.shadow_color||"rgba(0,0,0,0.5)"}`})():"none"}}),et.caption&&jsxRuntimeExports.jsx("p",{className:"mt-2 sm:mt-3 text-gray-300 text-sm italic",style:{textAlign:et.alignment||"center"},children:et.caption})]},dt);case"profile_card":return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",margin:"24px 0",padding:"16px"},children:[et.image_url&&jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",style:{width:`${et.image_size||120}px`,height:`${et.image_size||120}px`,objectFit:"cover",borderRadius:`${et.image_radius||999}px`,border:`${et.image_border_width||1}px solid ${et.image_border_color||"#e5e7eb"}`,display:"block",margin:"0 auto"}}),et.tagline&&jsxRuntimeExports.jsx("p",{style:{marginTop:"14px",fontSize:"1rem",fontWeight:600,color:et.tagline_color||"#111827",textAlign:et.alignment||"center"},children:et.tagline}),et.contact_value&&jsxRuntimeExports.jsx("p",{style:{marginTop:"6px",fontSize:"0.9rem",color:et.subtext_color||"#6b7280",textAlign:et.alignment||"center"},children:et.contact_type==="phone"?jsxRuntimeExports.jsx("a",{href:`tel:${et.contact_value}`,style:{color:"inherit",textDecoration:"none"},children:et.contact_value}):jsxRuntimeExports.jsx("a",{href:`mailto:${et.contact_value}`,style:{color:"inherit",textDecoration:"none"},children:et.contact_value})})]},dt);case"single_offer":{const sr=et.text_color||"#ffffff",nr=et.use_pdf_cover?et.cover_url||et.image_url||null:et.image_url||et.cover_url||null;return jsxRuntimeExports.jsx("div",{style:{background:"transparent",padding:"40px 20px",borderRadius:et.use_no_bg?"0px":"20px",marginTop:"40px",maxWidth:"1100px",minHeight:"200px",marginLeft:"auto",marginRight:"auto",transition:"all 0.25s ease"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{background:"rgba(0,0,0,0.45)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"16px",padding:"28px",textAlign:"center",color:sr,display:"flex",flexDirection:"column",width:et.card_width?`${et.card_width}px`:"100%",height:et.card_height==="auto"?"auto":et.card_height?`${et.card_height}px`:"auto",overflow:et.card_height==="auto"?"visible":"auto"},children:[nr?jsxRuntimeExports.jsx("div",{style:{marginBottom:"16px"},children:jsxRuntimeExports.jsx("img",{src:nr,alt:"",style:{width:"100%",display:"block"}})}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"160px",borderRadius:"12px",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem"},children:"No Image"}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,marginBottom:"8px"},children:et.title||"Offer Title"}),et.text&&jsxRuntimeExports.jsx("p",{style:{opacity:.8,fontSize:"0.95rem",marginBottom:"12px"},children:et.text}),et.use_long_description&&et.long_text&&(et.description_type==="bullets"?jsxRuntimeExports.jsx("ul",{style:{paddingLeft:"18px",marginBottom:"14px"},children:et.long_text.split(`
`).map((ir,lr)=>jsxRuntimeExports.jsx("li",{style:{marginBottom:"6px"},children:ir.replace(/^\s*/,"")},lr))}):jsxRuntimeExports.jsx("div",{style:{fontSize:"0.9rem",textAlign:"left",opacity:.85,marginBottom:"14px"},children:et.long_text})),et.price?jsxRuntimeExports.jsxs("p",{style:{fontWeight:800,fontSize:"1.3rem",marginBottom:"16px"},children:["$",Number(et.price).toFixed(2)]}):null,jsxRuntimeExports.jsx("button",{style:{marginTop:"auto",width:"100%",padding:"12px",borderRadius:"8px",fontWeight:700,border:"none",cursor:"pointer",background:et.button_color||"#22c55e",color:et.button_text_color||"#000000",fontSize:"1rem"},children:et.button_text||"Buy Now"})]})})},dt)}case"mini_offer":{const sr=et.text_color||"#ffffff",nr=et.use_pdf_cover?et.cover_url||et.image_url||null:et.image_url||et.cover_url||null,ir=et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
        ${et.gradient_start||"#a855f7"},
        ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827",lr=et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
        ${et.gradient_start||"#a855f7"},
        ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827",or=(((Jt=(Yt=(Kt=et.offer_page)==null?void 0:Kt.blocks)==null?void 0:Yt.map(ur=>ur.text))==null?void 0:Jt.join(" "))||"").replace(//g,""),cr=or.trim().length>0,dr=cr&&or.trim().split(/\s+/).length>20;return jsxRuntimeExports.jsx("div",{style:{padding:"40px 20px",marginTop:"40px",maxWidth:"1100px",marginLeft:"auto",marginRight:"auto"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"100%",maxWidth:"700px",height:"300px",margin:"0 auto",borderRadius:"20px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.12)",boxShadow:"0 25px 60px rgba(0,0,0,0.45)",background:ir},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 30%",background:"#000",borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px",overflow:"hidden"},children:nr?jsxRuntimeExports.jsx("img",{src:nr,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px",borderTopRightRadius:0,borderBottomRightRadius:0}}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",minHeight:"180px",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem"},children:"No Image"})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,padding:"28px 32px",color:sr,display:"flex",flexDirection:"column",justifyContent:"center",boxSizing:"border-box",background:lr},children:[jsxRuntimeExports.jsx("h1",{className:"normal-case",style:{fontSize:"1.2rem",lineHeight:1.5,marginBottom:"10px"},children:et.title||"Offer Title"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"1rem",lineHeight:1.5,marginBottom:"14px",maxWidth:"420px"},children:[jsxRuntimeExports.jsx("span",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:or}),dr&&jsxRuntimeExports.jsx("span",{style:{display:"block",marginTop:"6px",fontWeight:700,textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"See more"})]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"16px"},children:[et.price?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"10px",fontSize:"1.05rem",fontWeight:300},children:["$",Number(et.price).toFixed(2)]}):null,jsxRuntimeExports.jsx("button",{style:{width:"100%",maxWidth:"260px",padding:"14px",borderRadius:"10px",fontWeight:700,border:"none",fontSize:"1.05rem",background:et.button_color||"#22c55e",color:et.button_text_color||"#000000",cursor:cr?"pointer":"not-allowed",opacity:cr?1:.6},children:et.button_text||"Buy Now"}),!cr&&jsxRuntimeExports.jsx("div",{style:{marginTop:"6px",fontSize:"0.85rem",opacity:.7},children:"Preview unavailable"})]})]})]})},dt)}case"secure_checkout":return jsxRuntimeExports.jsxs("div",{style:{width:"100%",textAlign:"center",marginTop:"40px",marginBottom:"20px",color:et.text_color||"#ffffff"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"1rem",color:"#f1c40f",fontWeight:800,display:"flex",alignItems:"center"},children:""}),jsxRuntimeExports.jsx("h2",{style:{fontSize:"1rem",fontWeight:700,margin:0,color:"#ffffff"},children:et.title||"Secure Checkout"})]}),et.subtext&&jsxRuntimeExports.jsx("p",{style:{color:"rgba(255,255,255,0.75)",margin:"8px auto 14px auto",fontSize:"1rem",maxWidth:"600px",lineHeight:1.5},children:et.subtext}),Array.isArray(et.trust_items)&&et.trust_items.length>0&&jsxRuntimeExports.jsx("ul",{style:{margin:"10px auto 16px auto",padding:0,listStyle:"none",maxWidth:"400px"},children:et.trust_items.map((sr,nr)=>jsxRuntimeExports.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"6px",color:"rgba(255,255,255,0.9)",fontSize:"1rem"},children:[jsxRuntimeExports.jsx("span",{style:{color:"#22c55e",fontWeight:900},children:""}),sr]},nr))}),et.guarantee&&jsxRuntimeExports.jsx("p",{style:{marginTop:"8px",fontSize:"0.9rem",color:"rgba(255,255,255,0.7)"},children:et.guarantee}),et.payment_badge&&jsxRuntimeExports.jsx("div",{style:{marginTop:"14px"},children:jsxRuntimeExports.jsx("img",{src:et.payment_badge,alt:"Secure Payments",style:{width:"150px",opacity:.85,borderRadius:"8px"}})})]},dt);case"audio_player":return jsxRuntimeExports.jsxs("div",{style:{background:et.match_main_bg?($t==null?void 0:$t.bg_theme)||"#0d1117":et.use_gradient?`linear-gradient(${et.gradient_direction}, ${et.gradient_start}, ${et.gradient_end})`:et.bg_color||"#0d1117",border:"1px solid #1f2937",padding:et.padding?`${et.padding}px`:"20px",borderRadius:"16px",maxWidth:"700px",margin:"45px auto",color:et.text_color||"#ffffff",fontFamily:"Inter, sans-serif",boxShadow:"0 0 25px rgba(0,0,0,0.35)",textAlign:et.alignment||"center"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"22px"},children:[et.show_cover!==!1&&et.cover_url&&jsxRuntimeExports.jsx("img",{src:et.cover_url,alt:"",style:{width:"70px",height:"70px",objectFit:"cover",borderRadius:"8px"}}),jsxRuntimeExports.jsxs("div",{style:{flex:1,textAlign:"left"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[et.show_title!==!1&&et.title&&jsxRuntimeExports.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:et.text_color||"#ffffff"},children:et.title}),jsxRuntimeExports.jsxs("div",{style:{width:"16px",height:"12px",display:"flex",alignItems:"flex-end",gap:"2px"},children:[jsxRuntimeExports.jsx("span",{style:{width:"3px",height:"3px",background:et.progress_color||"#22c55e",opacity:.5}}),jsxRuntimeExports.jsx("span",{style:{width:"3px",height:"6px",background:et.progress_color||"#22c55e",opacity:.5}}),jsxRuntimeExports.jsx("span",{style:{width:"3px",height:"10px",background:et.progress_color||"#22c55e",opacity:.5}})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:et.progress_color||"#22c55e",children:jsxRuntimeExports.jsx("path",{d:"M15 18V6l-9 6 9 6z"})})}),jsxRuntimeExports.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",background:et.progress_color||"#22c55e",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(0,0,0,0.3)"},children:jsxRuntimeExports.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"#000",children:jsxRuntimeExports.jsx("path",{d:"M8 5v14l11-7z"})})}),jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:et.progress_color||"#22c55e",children:jsxRuntimeExports.jsx("path",{d:"M9 6v12l9-6-9-6z"})})}),jsxRuntimeExports.jsx("div",{style:{width:"110px"},children:jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"6px",borderRadius:"4px",background:"#1f2937",overflow:"hidden"},children:jsxRuntimeExports.jsx("div",{style:{width:"80%",height:"100%",background:et.progress_color||"#22c55e"}})})})]}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"8px",background:"#1f2937",borderRadius:"6px",overflow:"hidden",marginTop:"12px"},children:jsxRuntimeExports.jsx("div",{style:{width:"20%",height:"100%",background:et.progress_color||"#22c55e"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"6px",fontSize:"0.85rem",color:"#94a3b8"},children:[jsxRuntimeExports.jsx("span",{children:"00:00"}),jsxRuntimeExports.jsx("span",{children:"03:30"})]})]})]}),jsxRuntimeExports.jsx("div",{style:{marginTop:"18px",height:"30px",width:"100%",background:"#000",borderRadius:"4px",overflow:"hidden",position:"relative"},children:jsxRuntimeExports.jsx("div",{style:{position:"absolute",inset:0,background:`repeating-linear-gradient(
              to right,
              ${et.waveform_color||"#7bed9f"} 0px,
              ${et.waveform_color||"#7bed9f"} 2px,
              transparent 2px,
              transparent 6px
            )`,opacity:.9}})})]},dt);case"container":let rr="transparent";return et.use_gradient?rr=`linear-gradient(${et.gradient_direction}, ${et.gradient_start}, ${et.gradient_end})`:et.bg_color?rr=et.bg_color:et.match_main_bg&&(rr=Ut(Tt)),jsxRuntimeExports.jsx("div",{style:{background:rr,padding:`${et.padding||20}px`,borderRadius:et.radius?`${et.radius}px`:"16px",margin:"40px auto",maxWidth:et.max_width||"100%"},children:(et.children||[]).filter(sr=>sr.enabled!==!1).map((sr,nr)=>renderPreviewBlock(sr,nr,kt))},et.id||dt);case"button_url":{const sr=et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#22c55e"}, ${et.gradient_end||"#3b82f6"})`:et.bg_color||"#22c55e",nr=typeof et.shadow_opacity=="number"?et.shadow_opacity/100:.35,ir=`${et.shadow_offset_x??0}px ${et.shadow_offset_y??8}px ${et.shadow_blur??20}px rgba(0,0,0,${nr})`;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"40px auto"},children:[jsxRuntimeExports.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:`${et.width??220}px`,height:`${et.height??48}px`,padding:`${et.padding_y??12}px ${et.padding_x??24}px`,background:sr,color:et.text_color||"#000000",fontSize:`${et.font_size??16}px`,fontWeight:et.font_weight??600,borderRadius:`${et.radius??8}px`,border:`${et.stroke_width??0}px solid ${et.stroke_color||"#000"}`,boxShadow:ir,userSelect:"none",pointerEvents:"none"},children:et.text||"Click Here"}),et.url&&jsxRuntimeExports.jsxs("p",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#94a3b8",wordBreak:"break-all"},children:[" ",et.url]})]},dt)}case"scroll_arrow":{const sr=["bounce","float","pulse"].includes(et.animation_type)?et.animation_type:"bounce",nr=et.arrow_style||"single",lr={single:1,double:2,triple:3}[nr]||1,or=et.stagger||0;return jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:et.alignment==="left"?"flex-start":et.alignment==="right"?"flex-end":"center",margin:"32px 0",userSelect:"none"},children:jsxRuntimeExports.jsx("div",{style:{width:et.size||36,display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",touchAction:"manipulation","--arrow-speed":`${et.animation_speed||1.2}s`},children:Array.from({length:lr}).map((cr,dr)=>jsxRuntimeExports.jsx("svg",{className:`scroll-arrow-item ${sr}`,viewBox:"0 0 24 24",fill:"none",stroke:et.color||"#ffffff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",width:"100%",height:"100%",style:{display:"block",marginTop:dr===0?0:"-10px",animationDelay:`${dr*or}s`,animationDuration:`${et.animation_speed||1.2}s`},"aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M19 12l-7 7-7-7"})},dr))})})}default:return null}}function PreviewPanel({showPreviewSection:et,setShowPreviewSection:dt,landing:kt,selectedTheme:$t,fontName:Tt,bgTheme:Dt,user:Ft,updateBlock:Ut,adjustForLandingOverlay:Ht,blendColors:Kt}){var Jt;function Yt(Zt=[]){let er=[];for(const rr of Zt)rr.type==="offer_banner"&&rr.enabled!==!1&&er.push(rr),rr.type==="container"&&Array.isArray(rr.children)&&(er=er.concat(Yt(rr.children)));return er}return jsxRuntimeExports.jsxs("div",{className:`
      mt-6 sm:mt-12
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light dark:border-dashboard-border-dark
      rounded-xl sm:rounded-2xl
      shadow-inner
      p-3 sm:p-6
      transition-all
      hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
    `,children:[jsxRuntimeExports.jsxs("div",{onClick:()=>dt(!et),className:"flex items-center justify-between px-3 py-3 sm:px-6 sm:py-5 cursor-pointer select-none",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:`
            text-lg font-semibold tracking-wide
            text-dashboard-text-light dark:text-dashboard-text-dark
          `,children:"Landing Page Preview"}),jsxRuntimeExports.jsx("p",{className:`
            mt-1 text-sm italic leading-relaxed max-w-xl
            text-dashboard-muted-light dark:text-dashboard-muted-dark
          `,children:"Your live page may appear slightly different due to device, screen size, or browser rendering."})]}),jsxRuntimeExports.jsx("span",{className:`
          text-dashboard-muted-light dark:text-dashboard-muted-dark
          text-sm
          transform transition-transform duration-300
          ${et?"rotate-180":"rotate-0"}
        `,children:""})]}),jsxRuntimeExports.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${et?"max-h-[9999px] opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{className:`
          mt-4 sm:mt-8
          p-4 sm:p-10
          rounded-xl
          text-center
          shadow-lg
          transition-all duration-500
          bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        `,style:{background:Ht($t),fontFamily:Tt},children:[Yt(kt.content_blocks).map((Zt,er)=>jsxRuntimeExports.jsxs("div",{className:"relative shadow-lg",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:Zt.text_color||"#fff",textAlign:"center",padding:`${Zt.padding?Math.min(Zt.padding,28):28}px 16px`,fontWeight:600,fontSize:"1.2rem",lineHeight:"1.5",margin:"0 0 40px",borderRadius:"24px 24px 0 0",boxShadow:"none"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 22px",textAlign:"center"},children:Zt.text||" Limited Time Offer! Get your free eBook today!"}),jsxRuntimeExports.jsx("button",{style:{display:"block",background:Zt.use_gradient?`linear-gradient(${Zt.gradient_direction||"90deg"}, ${Zt.gradient_start||"#F285C3"}, ${Zt.gradient_end||"#7bed9f"})`:Zt.button_color||Zt.bg_color||"#F285C3",color:Zt.button_text_color||Zt.text_color||"#fff",padding:"22px 36px",borderRadius:"8px",fontWeight:700,fontSize:"1rem",cursor:"pointer",border:"none",width:"100%",maxWidth:"340px",margin:"16px auto 0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"transform 0.25s ease"},onMouseOver:rr=>{rr.currentTarget.style.transform="scale(1.05)"},onMouseOut:rr=>{rr.currentTarget.style.transform="scale(1)"},children:Zt.button_text||"Claim Offer"})]},er)),kt.cover_image_url&&jsxRuntimeExports.jsx("img",{src:kt.cover_image_url,alt:"Book Cover",className:"mx-auto mb-4 sm:mb-8 rounded-xl shadow-lg",style:{width:"100%",maxWidth:"480px",height:"auto",aspectRatio:"unset",objectFit:"cover",border:"2px solid var(--dashboard-border-light)",background:"#000",boxShadow:"0 15px 35px rgba(0, 0, 0, 0.25), 0 6px 20px rgba(0, 0, 0, 0.15)",borderRadius:"12px",transition:"transform 0.3s ease, box-shadow 0.3s ease"}}),(Jt=kt.content_blocks)!=null&&Jt.length?kt.content_blocks.filter(Zt=>Zt.type!=="offer_banner"&&Zt.enabled!==!1).map((Zt,er)=>jsxRuntimeExports.jsx(MotionWrapper,{index:er,motionSettings:{...kt.motion_settings,enabled:!1},blockMotion:Zt.motion,children:renderPreviewBlock(Zt,er,{landing:kt,selectedTheme:$t,fontName:Tt,bgTheme:Dt,user:Ft,updateBlock:Ut,adjustForLandingOverlay:Ht,blendColors:Kt})},Zt.id||er)):jsxRuntimeExports.jsx("p",{className:`
              italic
              text-dashboard-muted-light dark:text-dashboard-muted-dark
            `,children:"Start adding sections to preview your landing page..."})]})})]})}function BottomActionsBar({landing:et,user:dt,handleSaveTemplate:kt}){const[$t,Tt]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:`
      flex flex-col sm:flex-row sm:items-center sm:justify-between
      mt-16 pt-8
      border-t
      border-dashboard-border-light dark:border-dashboard-border-dark
    `,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center sm:items-start",children:[jsxRuntimeExports.jsx("button",{type:"submit",name:"save-landing",className:"bg-green text-black px-6 py-3 rounded-lg shadow hover:bg-green transition",children:"Save Changes"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:kt,className:`
          bg-dashboard-hover-light dark:bg-dashboard-hover-dark
          text-dashboard-text-light dark:text-dashboard-text-dark
          px-6 py-3
          rounded-lg
          shadow
          border
          border-dashboard-border-light dark:border-dashboard-border-dark
          hover:bg-dashboard-bg-light dark:hover:bg-dashboard-bg-dark
          transition
        `,children:"Save Version"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center sm:items-end mt-6 sm:mt-0 gap-2",children:[jsxRuntimeExports.jsxs("a",{href:et.username?`https://${et.username}.themessyattic.com?owner_preview=${encodeURIComponent((dt==null?void 0:dt.id)||"")}`:void 0,target:"_blank",rel:"noopener noreferrer",className:`
      inline-flex items-center gap-2
      px-4 py-1.5
      rounded-full
      text-xs font-semibold
      border
      transition-all
      ${et.username?`
                bg-green/10
                text-dashboard-muted-light dark:text-dashboard-muted-dark
                border-green/30
                hover:bg-green/20
                hover:text-blue
              `:`
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                text-dashboard-muted-light dark:text-dashboard-muted-dark
                border-dashboard-border-light dark:border-dashboard-border-dark
                cursor-not-allowed
              `}
        `,onClick:Dt=>{et.username||Dt.preventDefault()},children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-current"}),et.username?"View Live Page":"Set username to view page"]}),jsxRuntimeExports.jsxs("p",{className:`
          text-xs
          text-dashboard-muted-light dark:text-dashboard-muted-dark
          flex items-center gap-2
        `,children:["Copy Live URL:",et.username?jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://${et.username}.themessyattic.com`),Tt(!0),setTimeout(()=>Tt(!1),1500)},className:"text-silver font-medium hover:opacity-80",children:$t?"Copied!":`https://${et.username}.themessyattic.com`}):jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Not set"})]})]})]})}function AICopyModal({aiContext:et,onApply:dt,onClose:kt}){const[$t,Tt]=reactExports.useState(!1),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState("");reactExports.useEffect(()=>{Ht("")},[Dt]),reactExports.useEffect(()=>{et!=null&&et.currentText&&Ft(et.currentText)},[et]);const Kt=async()=>{if(Dt.trim()){Tt(!0);try{const Zt=await axiosInstance.post("/landing/generate-copy",{prompt:Dt,blockType:et.blockType});Ht(Zt.data.text)}catch(Zt){console.error(Zt)}finally{Tt(!1)}}},Yt=()=>{et!=null&&et.currentText&&Ft(`Rewrite the following text to be clearer and more engaging:

${et.currentText}`)},Jt=async()=>{const Zt=Ut||(et==null?void 0:et.currentText);if(Zt){Tt(!0);try{const er=await axiosInstance.post("/landing/generate-copy",{prompt:`Rewrite the following copy to be clearer, more engaging, and more effective:

${Zt}`,blockType:et.blockType});Ht(er.data.text)}catch(er){console.error(er)}finally{Tt(!1)}}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-lg bg-[#0B0F19] border border-gray-800 rounded-2xl shadow-xl p-5 relative",children:[jsxRuntimeExports.jsx("button",{onClick:kt,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(X$5,{size:18})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Sparkles,{className:"text-green w-5 h-5"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"AI Assistant"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["Editing"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-200 font-semibold",children:et.blockType})," ","block"]}),(et==null?void 0:et.currentText)&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:Yt,className:"flex items-center gap-2 text-xs mb-3 px-3 py-1.5 rounded-md bg-gray-800 text-gray-200 hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx(RotateCcw,{size:14}),"Rewrite existing text"]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"What is this block about?"}),jsxRuntimeExports.jsx("textarea",{value:Dt,onChange:Zt=>Ft(Zt.target.value),placeholder:"Describe what this section should say. You can paste text from your PDF here.",className:"w-full h-28 p-3 bg-black border border-gray-700 rounded-md text-sm text-white resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"AI generated copy"}),jsxRuntimeExports.jsx("textarea",{value:Ut,onChange:Zt=>Ht(Zt.target.value),placeholder:"AI output will appear here",className:"w-full h-32 p-3 bg-black border border-gray-700 rounded-md text-sm text-white resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:Kt,disabled:$t||!Dt.trim(),className:`
        px-4 py-2 rounded-md text-sm font-bold transition
        ${$t||!Dt.trim()?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-emerald-500"}
      `,children:$t?"Writing...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:Jt,disabled:$t||!Ut&&!(et!=null&&et.currentText),className:`
        px-4 py-2 rounded-md text-sm font-bold transition
        ${$t||!Ut&&!(et!=null&&et.currentText)?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-500"}
      `,children:"Rewrite"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:kt,className:"text-sm text-gray-400 hover:text-white",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(Ut),disabled:!Ut,className:`
        px-4 py-2 rounded-md text-sm font-bold transition
        ${Ut?"bg-blue text-white hover:bg-blue/80":"bg-gray-700 text-gray-400 cursor-not-allowed"}
      `,children:"Apply"})]})]})]})})}function MotionPreview({preset:et,duration:dt,easing:kt,stagger:$t=0,delay:Tt=0}){const[Dt,Ft]=reactExports.useState(0),Ut=PRESET_VARIANTS[et]||PRESET_VARIANTS.fade;return jsxRuntimeExports.jsxs("div",{className:"mt-4 rounded-md border border-gray-700 bg-black/40 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Preview"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ft(Ht=>Ht+1),className:"text-xs rounded px-2 py-2 text-white bg-royalPurple hover:text-white transition",children:"Replay"})]}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{delayChildren:Tt,staggerChildren:$t}}},className:"flex flex-col gap-2 items-center h-32 overflow-hidden",children:[0,1,2].map(Ht=>jsxRuntimeExports.jsx(motion.div,{variants:{hidden:Ut,visible:{opacity:1,x:0,y:0,scale:1,rotate:0,rotateX:0,rotateY:0,filter:"blur(0px)",transition:{duration:dt,ease:kt}}},className:"w-16 h-6 rounded-md bg-royalPurple shadow-md"},Ht))},`${et}-${dt}-${kt}-${$t}-${Tt}-${Dt}`)]})}function AnimationSettingsPanel({landing:et,setLanding:dt}){const kt={enabled:!1,preset:"fade-up",duration:.5,delay:0,stagger:.12,easing:[0,0,.2,1],panel_open:!1},$t={...kt,...et.motion_settings||{}},Tt={linear:"linear",easeOut:[0,0,.2,1],easeIn:[.4,0,1,1],easeInOut:[.4,0,.2,1]};function Dt(Ft){const Ut=["linear","cubic-bezier(0, 0, 0.2, 1)","cubic-bezier(0.4, 0, 1, 1)","cubic-bezier(0.4, 0, 0.2, 1)"];dt(Ht=>{const Kt={...kt,...Ht.motion_settings||{},...Ft};return Ut.includes(Kt.easing)||(Kt.easing=kt.easing),{...Ht,motion_settings:Kt}})}return jsxRuntimeExports.jsxs("div",{className:"border border-dashboard-border-light dark:border-dashboard-border-dark rounded-lg px-4 py-1 bg-dashboard-bg-light dark:bg-dashboard-bg-dark mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center mb-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:"Animate page sections"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Dt({enabled:!$t.enabled,panel_open:$t.enabled?$t.panel_open:!0}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ${$t.enabled?"bg-green":"bg-dashboard-border-light dark:bg-dashboard-border-dark"}`,children:jsxRuntimeExports.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full shadow transition-transform duration-200
  bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
  ${$t.enabled?"translate-x-4":"translate-x-1"}
`})})]}),$t.enabled&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Dt({panel_open:!$t.panel_open}),className:`absolute right-0 top-1/2 -translate-y-1/2
text-dashboard-muted-light dark:text-dashboard-muted-dark
hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
transition`,children:jsxRuntimeExports.jsx("span",{className:`inline-block transition-transform duration-200 ${$t.panel_open?"rotate-180":"rotate-0"}`,children:""})})]}),$t.enabled&&$t.panel_open&&jsxRuntimeExports.jsxs("div",{className:`space-y-4 max-w-md pb-6 pt-6
`,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-dashboard-muted-light dark:text-dashboard-muted-dark mb-4",children:"Animation preset"}),jsxRuntimeExports.jsx("select",{value:$t.preset,onChange:Ft=>Dt({preset:Ft.target.value}),className:`w-full rounded-md
bg-dashboard-bg-light dark:bg-dashboard-bg-dark
border border-dashboard-border-light dark:border-dashboard-border-dark
text-dashboard-text-light dark:text-dashboard-text-dark
text-sm px-3 py-2`,children:MOTION_PRESETS.map(Ft=>jsxRuntimeExports.jsx("option",{value:Ft.value,children:Ft.label},Ft.value))})]}),jsxRuntimeExports.jsx(Range$1,{label:"Animation speed (seconds)",value:$t.duration,min:.2,max:2,step:.1,onChange:Ft=>Dt({duration:Ft})}),jsxRuntimeExports.jsx(Range$1,{label:"Stagger delay between sections",value:$t.stagger,min:0,max:.5,step:.02,onChange:Ft=>Dt({stagger:Ft})}),jsxRuntimeExports.jsx(Range$1,{label:"Initial page delay",value:$t.delay,min:0,max:1,step:.05,onChange:Ft=>Dt({delay:Ft})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Animation easing"}),jsxRuntimeExports.jsxs("select",{value:$t.easing,onChange:Ft=>Dt({easing:Tt[Ft.target.value]}),className:`w-full rounded-md
bg-dashboard-bg-light dark:bg-dashboard-bg-dark
border border-dashboard-border-light dark:border-dashboard-border-dark
text-dashboard-text-light dark:text-dashboard-text-dark
px-3 py-2 text-sm`,children:[jsxRuntimeExports.jsx("option",{value:"easeOut",children:"Ease out"}),jsxRuntimeExports.jsx("option",{value:"easeIn",children:"Ease in"}),jsxRuntimeExports.jsx("option",{value:"easeInOut",children:"Ease in out"}),jsxRuntimeExports.jsx("option",{value:"linear",children:"Linear"}),jsxRuntimeExports.jsx("option",{value:"cubic-bezier(0.4, 0, 0.2, 1)",children:"Material smooth"})]}),jsxRuntimeExports.jsx(MotionPreview,{preset:$t.preset,duration:$t.duration,easing:$t.easing,stagger:$t.stagger,delay:$t.delay})]})]})]})}function Range$1({label:et,value:dt,min:kt,max:$t,step:Tt,onChange:Dt}){const Ft=(dt-kt)/($t-kt)*100;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:et}),jsxRuntimeExports.jsx("input",{type:"range",min:kt,max:$t,step:Tt,value:dt,onChange:Ut=>Dt(Number(Ut.target.value)),className:"custom-range",style:{background:`linear-gradient(
            to right,
            #670fe7 ${Ft}%,
            var(--dashboard-border-light) ${Ft}%
          )`}}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1",children:[dt,"s"]})]})}function PageUrlUsernameField({landing:et,setLanding:dt}){var Tt,Dt,Ft;const kt=!!((Tt=et==null?void 0:et.domain)!=null&&Tt.hasPrimaryDomain&&((Dt=et==null?void 0:et.domain)!=null&&Dt.primaryDomain)),$t=(Ft=et==null?void 0:et.domain)==null?void 0:Ft.primaryDomain;return reactExports.useEffect(()=>{kt&&et.username&&dt(Ut=>({...Ut,username:Ut.username}))},[kt]),jsxRuntimeExports.jsxs("div",{className:"w-full pb-10",children:[jsxRuntimeExports.jsx("label",{className:`
        block font-semibold mb-1
        text-dashboard-text-light
        dark:text-dashboard-text-dark
      `,children:"Page Url Username"}),jsxRuntimeExports.jsx("input",{type:"text",maxLength:30,value:et.username||"",disabled:kt,onChange:Ut=>{kt||dt({...et,username:Ut.target.value})},onBlur:async()=>{var Ut,Ht,Kt,Yt;if(!kt&&((Ht=(Ut=et.username)==null?void 0:Ut.trim())==null?void 0:Ht.length)>=3)try{const Jt=await axiosInstance.get(`/landing/check-username/${et.username.trim()}`);y$4[Jt.data.available?"success":"error"](Jt.data.message)}catch(Jt){const Zt=((Yt=(Kt=Jt==null?void 0:Jt.response)==null?void 0:Kt.data)==null?void 0:Yt.message)||"Error checking username";y$4.error(Zt)}},placeholder:kt?"Custom domain connected":"e.g. cre8tlydesigns",className:`
        w-75
        rounded-lg px-4 py-2
        border
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        placeholder-dashboard-muted-light
        dark:placeholder-dashboard-muted-dark
        border-dashboard-border-light
        dark:border-dashboard-border-dark
        ${kt?"bg-dashboard-disabled-light dark:bg-dashboard-disabled-dark cursor-not-allowed opacity-60":"bg-dashboard-bg-light dark:bg-dashboard-bg-dark"}
      `}),jsxRuntimeExports.jsx("p",{className:`
        text-xs mt-1 mb-10
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:kt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Your page is live at"," ",jsxRuntimeExports.jsxs("span",{className:"block text-blue break-all",children:["https://",$t]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"block mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Subdomain is disabled while a custom domain is active."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["This will be used for your page URL"," ",jsxRuntimeExports.jsx("span",{className:"block text-dashboard-muted-light dark:text-dashboard-muted-dark break-all",children:et.username?`https://${et.username}.themessyattic.com`:"https://yourname.themessyattic.com"})]})})]})}function LandingPageBuilder(){var jo,Ls;const{user:et}=useAuth(),dt=useNavigate(),[kt,$t]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState(""),[Ht,Kt]=reactExports.useState(""),[Yt,Jt]=reactExports.useState("default"),[Zt,er]=reactExports.useState(""),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(!1),[lr,or]=reactExports.useState(null),[cr,dr]=reactExports.useState(null),[ur,pr]=reactExports.useState(!1),[mr,jr]=reactExports.useState(!1),[Rr,br]=reactExports.useState([]),[_r,Mr]=reactExports.useState(""),[Pr,Or]=reactExports.useState(""),[kr,Tr]=reactExports.useState(!1),[xr,wr]=reactExports.useState(""),[zr,Hr]=reactExports.useState(!1),[Yr,rs]=reactExports.useState(!1),[as,es]=reactExports.useState(null),Xr=cr&&((jo=kt.content_blocks[cr.blockIndex])==null?void 0:jo.id)===cr.blockId,Wr=hs=>{es(hs)},cs=hs=>{$t(Gr=>{const gs=Gr.content_blocks,xs=ls(gs,hs);if(!xs)return Gr;const ms=xs.index-1;if(ms<0)return Gr;const{removed:ds,next:ys}=js(gs,xs),ws=$s(ys,{parentId:xs.parentId,index:ms},ds);return{...Gr,content_blocks:ws}})},ns=hs=>{$t(Gr=>{var Fs;const gs=Gr.content_blocks,xs=ls(gs,hs);if(!xs)return Gr;const ms=xs.parentId===null?gs:((Fs=gs.find(vs=>vs.id===xs.parentId))==null?void 0:Fs.children)||[],ds=xs.index+1;if(ds>=ms.length)return Gr;const{removed:ys,next:ws}=js(gs,xs),Ss=$s(ws,{parentId:xs.parentId,index:ds},ys);return{...Gr,content_blocks:Ss}})},us=(hs,Gr)=>{$t(gs=>{const xs=[...gs.content_blocks],ms=xs[hs];if(!(ms!=null&&ms.children))return gs;const ds=ms.children.findIndex(Ss=>Ss.id===Gr);if(ds<=0)return gs;const ys=[...ms.children],[ws]=ys.splice(ds,1);return ys.splice(ds-1,0,ws),xs[hs]={...ms,children:ys},{...gs,content_blocks:xs}})},fs=(hs,Gr)=>{$t(gs=>{const xs=[...gs.content_blocks],ms=xs[hs];if(!(ms!=null&&ms.children))return gs;const ds=ms.children.findIndex(Ss=>Ss.id===Gr);if(ds===-1||ds>=ms.children.length-1)return gs;const ys=[...ms.children],[ws]=ys.splice(ds,1);return ys.splice(ds+1,0,ws),xs[hs]={...ms,children:ys},{...gs,content_blocks:xs}})},ss=(hs,Gr)=>{$t(gs=>{const xs=[...gs.content_blocks],ms=xs[hs];if(!ms||!Array.isArray(ms.children))return gs;const ds=ms.children.findIndex(Ss=>Ss.id===Gr);if(ds===-1)return gs;const ys=ms.children[ds],ws=ms.children.filter((Ss,Fs)=>Fs!==ds);return xs[hs]={...ms,children:ws},xs.splice(hs+1,0,ys),{...gs,content_blocks:xs}})},ps=(hs,Gr)=>{$t(gs=>{const xs=[...gs.content_blocks],ms=xs[hs];if(!ms)return gs;xs.splice(hs,1);const ds=hs<Gr?Gr-1:Gr,ys=xs[ds];return!ys||ys.type!=="container"?gs:(xs[ds]={...ys,children:[...ys.children||[],ms]},{...gs,content_blocks:xs})})},ls=(hs,Gr)=>{const gs=hs.findIndex(xs=>xs.id===Gr);if(gs!==-1)return{parentId:null,index:gs,block:hs[gs]};for(const xs of hs){if(xs.type!=="container")continue;const ms=(xs.children||[]).findIndex(ds=>ds.id===Gr);if(ms!==-1)return{parentId:xs.id,index:ms,block:xs.children[ms]}}return null},js=(hs,Gr)=>{let gs;return Gr.parentId===null?(gs=hs[Gr.index],{removed:gs,next:hs.filter((xs,ms)=>ms!==Gr.index)}):{removed:hs.find(xs=>xs.id===Gr.parentId).children[Gr.index],next:hs.map(xs=>xs.id!==Gr.parentId?xs:{...xs,children:xs.children.filter((ms,ds)=>ds!==Gr.index)})}},$s=(hs,Gr,gs)=>{if(Gr.parentId===null){const xs=[...hs];return xs.splice(Gr.index,0,gs),xs}return hs.map(xs=>xs.id!==Gr.parentId?xs:{...xs,children:[...(xs.children||[]).slice(0,Gr.index),gs,...(xs.children||[]).slice(Gr.index)]})},Ds=(et==null?void 0:et.plan)==="business_builder_pack"&&(et==null?void 0:et.pro_status)==="active",Ts=React$2.useCallback(hs=>{const Gr={},gs=xs=>{var ms;for(const ds of xs)Gr[ds.type]=(Gr[ds.type]||0)+1,ds.type==="container"&&((ms=ds.children)!=null&&ms.length)&&gs(ds.children)};return gs(hs||[]),Gr},[]),As=React$2.useCallback(hs=>{const Gr=BLOCK_LIMITS[hs];return Gr?(Ts((kt==null?void 0:kt.content_blocks)||[])[hs]||0)<Gr:!0},[kt==null?void 0:kt.content_blocks,Ts]),_s=React$2.useCallback((hs,Gr,gs)=>{$t(xs=>{const ms=xs.content_blocks.map((ds,ys)=>{if(ys!==hs)return ds;const ws=typeof gs=="function"?gs(ds[Gr]):gs;return{...ds,[Gr]:ws}});return{...xs,content_blocks:ms}})},[]),Ms=hs=>{if(!hs)return;if(!Ds&&PRO_ONLY_BLOCKS.includes(hs)){y$4.error("This block is a Pro feature. Upgrade to Pro to unlock Audio, Calendly, and Reviews.");return}if(!As(hs)){y$4.error(`You can only add ${BLOCK_LIMITS[hs]} ${BLOCK_LABELS[hs]||hs} block`);return}let Gr={id:crypto.randomUUID(),type:hs,enabled:!0,padding:20,alignment:"left",bulleted:!1,collapsed:!0,motion:{disabled:!1,preset:null}};hs==="container"&&(Gr={id:crypto.randomUUID(),type:"container",title:"New Section",collapsed:!1,enabled:!0,children:[]}),["heading","subheading","subsubheading","paragraph","list_heading"].includes(hs)&&(Gr.text=""),hs==="video"&&(Gr.url="",Gr.caption="",Gr.autoplay=!1,Gr.loop=!1,Gr.muted=!1),(hs==="divider"||hs==="spacer")&&(Gr.height=40,Gr.style="line",Gr.color="rgba(255,255,255,0.2)",Gr.width="60%"),hs==="offer_banner"&&(Gr.text=" Limited Time Offer!",Gr.text_color="#000000",Gr.alignment="center",Gr.padding=20,Gr.use_gradient=!0,Gr.gradient_start="#F285C3",Gr.gradient_end="#7bed9f",Gr.gradient_direction="90deg",Gr.bg_color="#F285C3",Gr.offer_type="free",Gr.button_text="Claim Offer"),hs==="calendly"&&(Gr.calendly_url="",Gr.height=650),hs==="social_links"&&(Gr.alignment="center",Gr.icon_style="color",Gr.show_borders=!1,Gr.links={instagram:"",twitter:"",youtube:"",linkedin:"",facebook:"",tiktok:""}),hs==="countdown"&&(Gr.text="Offer Ends In:",Gr.text_color="#FFFFFF",Gr.target_date=new Date(Date.now()+7*24*60*60*1e3).toISOString(),Gr.alignment="center",Gr.style_variant="minimal"),hs==="stripe_checkout"&&(Gr.price=10,Gr.button_text="Buy & Download PDF",Gr.button_color="#7bed9f",Gr.alignment="center",Gr.collapsed=!1,Gr.product_source="internal",Gr.external_file_url="",Gr.external_file_name=""),hs==="referral_button"&&(Gr.text="Join The Messy Attic",Gr.button_color="#7bed9f",Gr.text_color="#000000",Gr.alignment="center",Gr.collapsed=!1),hs==="verified_reviews"&&(Gr.enabled=!0,Gr.collapsed=!1,Gr.reviews_text_color),hs==="faq"&&(Gr.title="Frequently Asked Questions",Gr.items=[{q:"What is included?",a:"Everything you need to get started."}],Gr.text_color="#FFFFFF",Gr.bg_color="rgba(0,0,0,0.3)",Gr.alignment="left"),hs==="image"&&(Gr.image_url="",Gr.caption="",Gr.padding=0,Gr.full_width=!1,Gr.alignment="center",Gr.radius=0,Gr.width=100,Gr.shadow=!1,Gr.shadow_color="rgba(0,0,0,0.5)",Gr.shadow_depth=25,Gr.shadow_offset=10,Gr.shadow_angle=135,Gr.match_main_bg=!1,Gr.use_no_bg=!1,Gr.use_gradient=!1,Gr.gradient_start="#F285C3",Gr.gradient_end="#7bed9f",Gr.gradient_direction="90deg",Gr.bg_color="#000000"),hs==="single_offer"&&(Gr.price=10,Gr.product_source="internal",Gr.external_file_url="",Gr.external_file_name="",Gr.image_url="",Gr.cover_url="",Gr.title="Offer One",Gr.text="Short description of this offer.",Gr.long_text="",Gr.use_long_description=!1,Gr.description_type="text",Gr.button_text="Buy Now",Gr.button_color="#22c55e",Gr.button_text_color="#000000",Gr.use_pdf_cover=!1,Gr.bg_color="rgba(0,0,0,0.4)",Gr.use_gradient=!1,Gr.text_color="#ffffff",Gr.card_width=360,Gr.card_height="auto"),hs==="mini_offer"&&(Gr.price=10,Gr.product_source="internal",Gr.product_name,Gr.page_count=null,Gr.external_file_url="",Gr.external_file_name="",Gr.image_url="",Gr.cover_url="",Gr.title="Offer One",Gr.text="Short description of this offer.",Gr.long_text="",Gr.use_long_description=!1,Gr.description_type="text",Gr.button_text="Buy Now",Gr.button_color="#22c55e",Gr.button_text_color="#000000",Gr.use_pdf_cover=!1,Gr.bg_color="rgba(0,0,0,0.4)",Gr.use_gradient=!1,Gr.text_color="#ffffff",Gr.secondary_text_color="#ffffff",Gr.utility_text_color="#ffffff",Gr.card_width=360,Gr.card_height="auto",Gr.offer_page={enabled:!1,blocks:[{id:"uuid",type:"paragraph",text:"",image_url:""}],bullets:[],trust_items:[]}),hs==="secure_checkout"&&(Gr.title="Secure Checkout",Gr.subtext="Your information is protected by industry leading encryption and secure payment processing.",Gr.trust_items=["Secure SSL Encryption","Protected Checkout Page","Safe Payment Processing"],Gr.guarantee="30 day money back guarantee on all purchases",Gr.payment_badge="",Gr.text_color="#FFFFFF",Gr.alignment="center",Gr.padding=0,Gr.bg_color="transparent",Gr.collapsed=!1),hs==="audio_player"&&(Gr.audio_url="",Gr.cover_url="",Gr.title="Untitled Track",Gr.progress_color="#22c55e",Gr.playlist=[],Gr.show_cover=!0,Gr.show_title=!0,Gr.alignment="center",Gr.match_main_bg=!1,Gr.use_gradient=!1,Gr.bg_color="#0F172A",Gr.gradient_start="#7bed9f",Gr.gradient_end="#22c55e",Gr.gradient_direction="90deg",Gr.text_color="#ffffff",Gr.sell_singles=!1,Gr.sell_album=!1,Gr.album_price="",Gr.single_price="",Gr.album_button_text="Buy Album",Gr.single_button_text="Buy Now",Gr.preview_enabled=!1,Gr.preview_duration=30,Gr.collapsed=!1),hs==="button_url"&&(Gr.text="Click Here",Gr.url="",Gr.open_new_tab=!0,Gr.alignment="center",Gr.width=220,Gr.height=48,Gr.padding_x=24,Gr.padding_y=12,Gr.radius=8,Gr.stroke_width=0,Gr.stroke_color="#000000",Gr.use_gradient=!1,Gr.bg_color="#22c55e",Gr.gradient_start="#22c55e",Gr.gradient_end="#3b82f6",Gr.gradient_direction="90deg",Gr.text_color="#000000",Gr.font_size=16,Gr.font_weight=600,Gr.shadow_offset_x=0,Gr.shadow_offset_y=8,Gr.shadow_blur=20,Gr.shadow_opacity=35,Gr.shadow_color="#000000"),hs==="profile_card"&&(Gr.alignment="center",Gr.image_url="",Gr.image_alt="",Gr.image_size=120,Gr.image_radius=999,Gr.image_border_width=1,Gr.image_border_color="#e5e7eb",Gr.tagline="Welcome",Gr.contact_type="email",Gr.contact_value="",Gr.tagline_color="#111827",Gr.subtext_color="#6b7280",Gr.show_image=!0,Gr.show_tagline=!0,Gr.show_contact=!0),hs==="scroll_arrow"&&(Gr.alignment="center",Gr.color="#FFFFFF",Gr.size=36,Gr.animated=!0,Gr.animation_type="bounce",Gr.animation_speed=1.2,Gr.arrow_style="single",Gr.stagger=.15),$t(gs=>({...gs,content_blocks:[...gs.content_blocks||[],Gr]})),rs(!1)},Vs=hs=>{const Gr=kt.content_blocks.filter((gs,xs)=>xs!==hs);$t({...kt,content_blocks:Gr})};async function Gs(){if(!(kt!=null&&kt.id))return;const hs=await loadTemplateVersions(kt.id);hs.success&&br(hs.templates)}const Ws=async hs=>{const Gr=hs.target.value;if(Mr(Gr),!Gr)return;const gs=await fetchTemplateSnapshot(Gr);if(!gs.success){y$4.error("Could not load version");return}const xs=structuredClone(gs.snapshot);let ms=[];try{ms=Array.isArray(xs.content_blocks)?xs.content_blocks:JSON.parse(xs.content_blocks||"[]")}catch{ms=[]}ms=ms.map(ds=>({collapsed:ds.collapsed??!0,...ds})),xs.content_blocks=ms,$t({...xs,motion_settings:{...kt.motion_settings,...xs.motion_settings}}),y$4.success("Version loaded! (not yet applied)")},Xs=async()=>{try{const Gr=(await axiosInstance.get(`/landing/builder/${et.id}`)).data.landingPage;let gs=[];try{gs=typeof Gr.content_blocks=="string"?JSON.parse(Gr.content_blocks):Gr.content_blocks||[]}catch{gs=[]}gs=gs.map(xs=>({collapsed:xs.collapsed??!0,...xs})),$t({...Gr,content_blocks:gs,motion_settings:{...kt.motion_settings,...Gr.motion_settings}})}catch(hs){console.error(hs),y$4.error("Failed to refresh landing")}},Qs=async()=>{if(!_r){y$4.error("Select a version first.");return}const hs=await fetchTemplateSnapshot(_r);if(!hs.success){y$4.error("Could not fetch snapshot.");return}(await restoreTemplate(kt.id,hs.snapshot)).success?(y$4.success("Template restored successfully!"),Or(_r),Xs()):y$4.error("Failed to apply template")};async function Bs(){y$4.dismiss(),y$4(({closeToast:hs})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Delete this saved version?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{try{(await deleteTemplate(_r)).success?(y$4.success("Version deleted.",{position:"bottom-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}}),Mr(""),Gs()):y$4.error("Failed to delete version.",{position:"bottom-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Gr){console.error("Delete error:",Gr),y$4.error("Error deleting version.",{position:"bottom-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{hs()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:hs,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"bottom-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}if(reactExports.useEffect(()=>{Gs()},[kt==null?void 0:kt.id]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),reactExports.useEffect(()=>{if(!(et!=null&&et.id))return;(async()=>{var Gr,gs,xs,ms,ds,ys,ws,Ss;try{const[Fs]=await Promise.all([axiosInstance.get(`/landing/builder/${et.id}`)]),vs=Fs.data.landingPage;let Os=[];try{Os=typeof vs.content_blocks=="string"?JSON.parse(vs.content_blocks):vs.content_blocks||[]}catch{Os=[]}Os=Os.map(bs=>({...bs,collapsed:bs.collapsed??!0,motion:bs.motion??{disabled:!1,preset:null}}));const tn={enabled:((Gr=vs.motion_settings)==null?void 0:Gr.enabled)??!1,preset:((gs=vs.motion_settings)==null?void 0:gs.preset)??"fade-up",duration:((xs=vs.motion_settings)==null?void 0:xs.duration)??.5,delay:((ms=vs.motion_settings)==null?void 0:ms.delay)??0,stagger:((ds=vs.motion_settings)==null?void 0:ds.stagger)??.12,easing:((ys=vs.motion_settings)==null?void 0:ys.easing)??"ease-out",viewport_once:((ws=vs.motion_settings)==null?void 0:ws.viewport_once)??!0,panel_open:((Ss=vs.motion_settings)==null?void 0:Ss.panel_open)??!1};$t({...vs,motion_settings:tn,content_blocks:Os}),Ut(vs.font||"Montserrat"),Kt(vs.font_file||""),typeof vs.show_download_button=="boolean"&&ir(vs.show_download_button),vs.cover_image_url&&er(vs.cover_image_url),Jt(vs.bg_theme||"linear-gradient(to bottom, #ffffff, #F285C3)")}catch(Fs){console.error(Fs),y$4.error("Failed to load landing data")}finally{Dt(!1)}})()},[et]),reactExports.useEffect(()=>{const hs=Gr=>{Gr.target.closest(".add-section-dropdown")||rs(!1)};return document.addEventListener("click",hs),()=>document.removeEventListener("click",hs)},[]),Tt)return jsxRuntimeExports.jsxs("div",{className:`
      flex flex-col items-center justify-center min-h-screen 
      bg-dashboard-bg-light dark:bg-dashboard-bg-dark
      text-dashboard-text-light dark:text-dashboard-text-dark
    `,children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:`
          absolute inset-0 rounded-full
          bg-dashboard-muted-light/20 dark:bg-dashboard-muted-dark/20
          blur-2xl animate-ping
        `}),jsxRuntimeExports.jsx("div",{className:`
          w-16 h-16
          border-4
          border-dashboard-border-light dark:border-dashboard-border-dark
          border-t-green
          rounded-full
          animate-spin
        `})]}),jsxRuntimeExports.jsx("p",{className:`
        mt-6 text-lg font-semibold tracking-wide animate-pulse
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:"Building your page..."}),jsxRuntimeExports.jsx("p",{className:`
        text-sm mt-2
        text-dashboard-muted-light dark:text-dashboard-muted-dark
      `,children:"The Messy Attic is fetching your latest content blocks."})]});if(!Tt&&(et==null?void 0:et.pro_status)!=="active")return jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 text-gray-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Upgrade Required"}),jsxRuntimeExports.jsxs("p",{className:"mt-2",children:["This feature is available only for PRO members.",jsxRuntimeExports.jsx("a",{href:"/plans",className:"text-[#F285C3] underline ml-1 hover:text-[#e070ad]",children:"Upgrade now"})]})]});if(!kt)return jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 text-gray-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"No Landing Page Found"}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"We couldnt load your landing page data."})]});const qs=hs=>{if(!hs)return!0;const Gr=/^(https?:\/\/)?(www\.)?(youtube\.com\/(watch\?v=|embed\/|shorts\/)|youtu\.be\/)[\w-]{11}($|[?&])/,gs=/^(https?:\/\/)?(www\.)?(vimeo\.com\/(\d{6,12}|video\/\d{6,12}))($|[?&])/;return Gr.test(hs)||gs.test(hs)},Ks=async hs=>{var gs;const Gr=(gs=hs==null?void 0:hs.nativeEvent)==null?void 0:gs.submitter;if(!Gr||Gr.name!=="save-landing"){hs.preventDefault();return}hs.preventDefault();try{let xs=kt.content_blocks;if(typeof xs=="string")try{xs=JSON.parse(xs)}catch{console.warn("Invalid content_blocks string, resetting to []"),xs=[]}const ms=xs.filter(ds=>ds.type==="video"&&ds.url&&!qs(ds.url)).map((ds,ys)=>`Video Block ${ys+1}`);if(ms.length>0){y$4.error(`Invalid video URLs in: ${ms.join(", ")}. Please use YouTube or Vimeo links.`);return}xs=xs.map(ds=>ds.type==="video"?{...ds,url:normalizeVideoUrl(ds.url)}:ds),await axiosInstance.put(`https://themessyattic.com/api/landing/update/${kt.id}`,{...kt,font:Ft,font_file:Ht,content_blocks:xs,pdf_url:kt.pdf_url,cover_image_url:kt.cover_image_url,logo_url:kt.logo_url,show_download_button:nr,motion_settings:kt.motion_settings}),y$4.success("Landing page saved successfully!")}catch(xs){console.error(xs),y$4.error("Error saving landing page")}},yn=()=>{if(_r){const hs=Rr.find(Gr=>Gr.id===_r);hs&&wr(hs.name)}else wr(`Version ${Rr.length+1}`);Tr(!0)},Dn=async()=>{const hs=xr.trim();if(!hs){y$4.error("Please enter a name");return}const Gr=Ds?30:10;if(!_r&&Rr.length>=Gr){y$4.error(Ds?"Youve reached the maximum of 30 saved versions.":"Free accounts can save up to 10 versions. Upgrade to Pro to save more.");return}const gs=Rr.find(ms=>ms.name===hs);let xs;gs?xs=await saveTemplate(kt.id,hs,kt,gs.id):xs=await saveTemplate(kt.id,hs,kt),xs.success?(y$4.success(gs?"Version updated!":"New version saved!",{position:"bottom-right"}),Gs(),Tr(!1),wr("")):y$4.error("Could not save version.",{position:"bottom-right"})},na=Yt!=null&&Yt.includes("gradient")||Yt!=null&&Yt.startsWith("#")?Yt:((Ls=[...colorThemes,...gradientThemes].find(hs=>hs.name===Yt))==null?void 0:Ls.preview)||"linear-gradient(to bottom, #ffffff, #F285C3)";return jsxRuntimeExports.jsxs("div",{className:`
    min-h-screen
    p-1 sm:p-6 md:p-10
    overflow-y-scroll
    bg-dashboard-bg-light dark:bg-dashboard-bg-dark
    text-dashboard-text-light dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
    max-w-4xl mx-auto
    rounded-2xl
    p-3 sm:p-8
    shadow-lg
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    border border-dashboard-border-light dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsxs("h1",{className:`
    text-2xl font-extrabold text-center mb-8
    flex items-center justify-center gap-3
    text-dashboard-text-light dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsx(WandSparkles,{className:"w-6 h-6 text-dashboard-accent-light dark:text-dashboard-accent-dark"}),"Landing Page Builder"]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ks,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageUrlUsernameField,{landing:kt,setLanding:$t}),jsxRuntimeExports.jsx(VersionControls,{versions:Rr,selectedVersion:_r,setSelectedVersion:Mr,appliedVersion:Pr,handleLoadVersion:Ws,handleApplyVersion:Qs,handleDeleteVersion:Bs}),jsxRuntimeExports.jsx("h1",{className:`
              text-2xl font-extrabold text-center mb-8
              text-dashboard-text-light dark:text-dashboard-text-dark
              flex items-center justify-center gap-3
            `,children:"Page Builder"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mb-6",children:jsxRuntimeExports.jsx(AddSectionButton,{addBlock:Ms,canAddBlock:As})}),Ds?jsxRuntimeExports.jsx(AnimationSettingsPanel,{landing:kt,setLanding:$t}):jsxRuntimeExports.jsxs("div",{className:`
                relative mb-4 rounded-lg
                border border-dashboard-border-light dark:border-dashboard-border-dark
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                min-h-[160px]
              `,children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none blur-sm opacity-60",children:jsxRuntimeExports.jsx(AnimationSettingsPanel,{landing:kt,setLanding:$t})}),jsxRuntimeExports.jsx("div",{className:`
                    absolute inset-0
                    flex items-center justify-center
                    rounded-lg
                    bg-dashboard-bg-light/80 dark:bg-dashboard-bg-dark/80
                    py-8
                  `,children:jsxRuntimeExports.jsxs("div",{className:"max-w-sm text-center px-6",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold mb-2 text-dashboard-text-light dark:text-dashboard-text-dark",children:"Animation Settings"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Animate blocks on scroll, control motion presets, delays, stagger effects, and easing."}),jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"px-5 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700 font-semibold text-sm",children:"Unlock with Pro"})]})})]}),jsxRuntimeExports.jsxs("div",{onClick:()=>Hr(!zr),className:`
              cursor-pointer
              px-4 py-3 mb-4
              rounded-lg
              flex justify-between items-center
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
            `,children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:zr?"Open All Blocks":"Hide All Blocks"}),jsxRuntimeExports.jsx("span",{className:`transform transition-transform ${zr?"rotate-0":"rotate-180"}`,children:""})]}),!zr&&jsxRuntimeExports.jsx("div",{className:`
                space-y-4 mb-12 w-full
                rounded-xl p-5 shadow-inner
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
              `,children:kt.content_blocks.filter(hs=>hs&&hs.type).map((hs,Gr)=>jsxRuntimeExports.jsx(React$2.Fragment,{children:jsxRuntimeExports.jsx(MemoizedSortableBlock,{id:hs.id,block:hs,index:Gr,updateBlock:_s,removeBlock:Vs,moveBlockUp:cs,moveBlockDown:ns,moveChildUp:us,moveChildDown:fs,activeChild:lr,setActiveChild:or,setActiveRoot:dr,activeRoot:cr,removeFromContainer:ss,bgTheme:Yt,landing:kt,openAIModal:Wr,offerContext:kt==null?void 0:kt.offer_context})},hs.id))})]}),Ds?jsxRuntimeExports.jsx(LogoUploader,{landing:kt,setLanding:$t,showLogoSection:mr,setShowLogoSection:jr}):jsxRuntimeExports.jsxs("div",{className:`
              mt-6 p-4 rounded-xl text-center
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
            `,children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:["Custom branding is a"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Pro"})," feature"]}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Upgrade to Pro to upload and display your brand logo."}),jsxRuntimeExports.jsx("a",{href:"/plans",className:"inline-block mt-3 text-sm px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition",children:"Upgrade to Pro"})]}),jsxRuntimeExports.jsx(ThemeAndFontControls,{landing:kt,setLanding:$t,bgTheme:Yt,setBgTheme:Jt,fontName:Ft,setFontName:Ut,fontFile:Ht,setFontFile:Kt,isPro:Ds}),jsxRuntimeExports.jsx(TextColorControls,{landing:kt,setLanding:$t}),jsxRuntimeExports.jsx(PreviewPanel,{showPreviewSection:rr,setShowPreviewSection:sr,landing:kt,selectedTheme:na,fontName:Ft,bgTheme:Yt,user:et,updateBlock:_s,adjustForLandingOverlay,blendColors}),jsxRuntimeExports.jsx(BottomActionsBar,{landing:kt,user:et,handleSaveTemplate:yn})]})]}),jsxRuntimeExports.jsx(SaveVersionModal,{isOpen:kr,name:xr,setName:wr,onCancel:()=>{Tr(!1),wr("")},onConfirm:Dn}),as&&jsxRuntimeExports.jsx(AICopyModal,{aiContext:as,onApply:hs=>{if(!(hs!=null&&hs.trim()))return;const{blockType:Gr,blockIndex:gs,containerIndex:xs,updateChildBlock:ms}=as;if(Gr==="faq"){const ds=hs.split(/\n\s*\n/).map(ys=>{const ws=ys.match(/Q:\s*(.+)/i),Ss=ys.match(/A:\s*(.+)/i);return!ws||!Ss?null:{q:ws[1].trim(),a:Ss[1].trim(),open:!1}}).filter(Boolean);xs!==void 0?ms(gs,"items",ds):_s(gs,"items",ds)}else Gr==="offer_long_description"?xs!==void 0?(ms(gs,"long_text",hs),ms(gs,"use_long_description",!0)):(_s(gs,"long_text",hs),_s(gs,"use_long_description",!0)):xs!==void 0&&typeof ms=="function"?ms(gs,"text",hs):_s(gs,"text",hs);es(null)},onClose:()=>es(null)}),lr&&jsxRuntimeExports.jsxs("div",{className:`
      fixed bottom-4 left-1/2 -translate-x-1/2 z-50
      flex gap-4 bg-green/90 px-4 py-3 rounded-full
      shadow-xl
    `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>us(lr.containerIndex,lr.childId),className:"text-black text-xl px-3",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>fs(lr.containerIndex,lr.childId),className:"text-black text-xl px-3",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{ss(lr.containerIndex,lr.childId),or(null)},className:"text-black text-sm px-3",children:"Remove"})]}),Xr&&jsxRuntimeExports.jsxs("div",{className:`
      fixed bottom-4 left-1/2 -translate-x-1/2 z-50
      flex gap-3 bg-green/90 px-4 py-3 rounded-full
      shadow-xl
    `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>pr(!0),className:"text-black text-sm px-3",children:"Move into section"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dr(null),className:"text-black text-sm px-3",children:"Cancel"})]}),ur&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0f1624] rounded-xl p-5 w-80",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Move into section"}),kt.content_blocks.filter(hs=>hs.type==="container").map((hs,Gr)=>jsxRuntimeExports.jsx("button",{onClick:()=>{pr(!1),ps(cr.blockIndex,Gr),dr(null)},className:"w-full text-left px-3 py-2 rounded hover:bg-white/10 text-white text-sm",children:hs.title||"Untitled Section"},hs.id)),jsxRuntimeExports.jsx("button",{onClick:()=>pr(!1),className:"mt-3 text-sm text-gray-400",children:"Cancel"})]})})]})}var updateQueue$5=makeQueue$5(),raf$5=et=>schedule$5(et,updateQueue$5),writeQueue$5=makeQueue$5();raf$5.write=et=>schedule$5(et,writeQueue$5);var onStartQueue$5=makeQueue$5();raf$5.onStart=et=>schedule$5(et,onStartQueue$5);var onFrameQueue$5=makeQueue$5();raf$5.onFrame=et=>schedule$5(et,onFrameQueue$5);var onFinishQueue$5=makeQueue$5();raf$5.onFinish=et=>schedule$5(et,onFinishQueue$5);var timeouts$5=[];raf$5.setTimeout=(et,dt)=>{const kt=raf$5.now()+dt,$t=()=>{const Dt=timeouts$5.findIndex(Ft=>Ft.cancel==$t);~Dt&&timeouts$5.splice(Dt,1),pendingCount$5-=~Dt?1:0},Tt={time:kt,handler:et,cancel:$t};return timeouts$5.splice(findTimeout$5(kt),0,Tt),pendingCount$5+=1,start$5(),Tt};var findTimeout$5=et=>~(~timeouts$5.findIndex(dt=>dt.time>et)||~timeouts$5.length);raf$5.cancel=et=>{onStartQueue$5.delete(et),onFrameQueue$5.delete(et),onFinishQueue$5.delete(et),updateQueue$5.delete(et),writeQueue$5.delete(et)};raf$5.sync=et=>{sync$5=!0,raf$5.batchedUpdates(et),sync$5=!1};raf$5.throttle=et=>{let dt;function kt(){try{et(...dt)}finally{dt=null}}function $t(...Tt){dt=Tt,raf$5.onStart(kt)}return $t.handler=et,$t.cancel=()=>{onStartQueue$5.delete(kt),dt=null},$t};var nativeRaf$5=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$5.use=et=>nativeRaf$5=et;raf$5.now=typeof performance<"u"?()=>performance.now():Date.now;raf$5.batchedUpdates=et=>et();raf$5.catch=console.error;raf$5.frameLoop="always";raf$5.advance=()=>{raf$5.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$5()};var ts$5=-1,pendingCount$5=0,sync$5=!1;function schedule$5(et,dt){sync$5?(dt.delete(et),et(0)):(dt.add(et),start$5())}function start$5(){ts$5<0&&(ts$5=0,raf$5.frameLoop!=="demand"&&nativeRaf$5(loop$5))}function stop$5(){ts$5=-1}function loop$5(){~ts$5&&(nativeRaf$5(loop$5),raf$5.batchedUpdates(update$5))}function update$5(){const et=ts$5;ts$5=raf$5.now();const dt=findTimeout$5(ts$5);if(dt&&(eachSafely$5(timeouts$5.splice(0,dt),kt=>kt.handler()),pendingCount$5-=dt),!pendingCount$5){stop$5();return}onStartQueue$5.flush(),updateQueue$5.flush(et?Math.min(64,ts$5-et):16.667),onFrameQueue$5.flush(),writeQueue$5.flush(),onFinishQueue$5.flush()}function makeQueue$5(){let et=new Set,dt=et;return{add(kt){pendingCount$5+=dt==et&&!et.has(kt)?1:0,et.add(kt)},delete(kt){return pendingCount$5-=dt==et&&et.has(kt)?1:0,et.delete(kt)},flush(kt){dt.size&&(et=new Set,pendingCount$5-=dt.size,eachSafely$5(dt,$t=>$t(kt)&&et.add($t)),pendingCount$5+=et.size,dt=et)}}}function eachSafely$5(et,dt){et.forEach(kt=>{try{dt(kt)}catch($t){raf$5.catch($t)}})}var __defProp$5=Object.defineProperty,__export$5=(et,dt)=>{for(var kt in dt)__defProp$5(et,kt,{get:dt[kt],enumerable:!0})},globals_exports$5={};__export$5(globals_exports$5,{assign:()=>assign$5,colors:()=>colors$6,createStringInterpolator:()=>createStringInterpolator$5,skipAnimation:()=>skipAnimation$5,to:()=>to$7,willAdvance:()=>willAdvance$5});function noop$8(){}var defineHidden$5=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),is$5={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$6(et,dt){if(is$5.arr(et)){if(!is$5.arr(dt)||et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}return et===dt}var each$5=(et,dt)=>et.forEach(dt);function eachProp$5(et,dt,kt){if(is$5.arr(et)){for(let $t=0;$t<et.length;$t++)dt.call(kt,et[$t],`${$t}`);return}for(const $t in et)et.hasOwnProperty($t)&&dt.call(kt,et[$t],$t)}var toArray$5=et=>is$5.und(et)?[]:is$5.arr(et)?et:[et];function flush$4(et,dt){if(et.size){const kt=Array.from(et);et.clear(),each$5(kt,dt)}}var flushCalls$4=(et,...dt)=>flush$4(et,kt=>kt(...dt)),isSSR$5=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$5,to$7,colors$6=null,skipAnimation$5=!1,willAdvance$5=noop$8,assign$5=et=>{et.to&&(to$7=et.to),et.now&&(raf$5.now=et.now),et.colors!==void 0&&(colors$6=et.colors),et.skipAnimation!=null&&(skipAnimation$5=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$5=et.createStringInterpolator),et.requestAnimationFrame&&raf$5.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$5.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$5=et.willAdvance),et.frameLoop&&(raf$5.frameLoop=et.frameLoop)},startQueue$5=new Set,currentFrame$5=[],prevFrame$5=[],priority$5=0,frameLoop$5={get idle(){return!startQueue$5.size&&!currentFrame$5.length},start(et){priority$5>et.priority?(startQueue$5.add(et),raf$5.onStart(flushStartQueue$5)):(startSafely$5(et),raf$5(advance$5))},advance:advance$5,sort(et){if(priority$5)raf$5.onFrame(()=>frameLoop$5.sort(et));else{const dt=currentFrame$5.indexOf(et);~dt&&(currentFrame$5.splice(dt,1),startUnsafely$5(et))}},clear(){currentFrame$5=[],startQueue$5.clear()}};function flushStartQueue$5(){startQueue$5.forEach(startSafely$5),startQueue$5.clear(),raf$5(advance$5)}function startSafely$5(et){currentFrame$5.includes(et)||startUnsafely$5(et)}function startUnsafely$5(et){currentFrame$5.splice(findIndex$5(currentFrame$5,dt=>dt.priority>et.priority),0,et)}function advance$5(et){const dt=prevFrame$5;for(let kt=0;kt<currentFrame$5.length;kt++){const $t=currentFrame$5[kt];priority$5=$t.priority,$t.idle||(willAdvance$5($t),$t.advance(et),$t.idle||dt.push($t))}return priority$5=0,prevFrame$5=currentFrame$5,prevFrame$5.length=0,currentFrame$5=dt,currentFrame$5.length>0}function findIndex$5(et,dt){const kt=et.findIndex(dt);return kt<0?et.length:kt}var clamp$4=(et,dt,kt)=>Math.min(Math.max(kt,et),dt),colors2$5={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$5="[-+]?\\d*\\.?\\d+",PERCENTAGE$5=NUMBER$5+"%";function call$5(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$7=new RegExp("rgb"+call$5(NUMBER$5,NUMBER$5,NUMBER$5)),rgba$6=new RegExp("rgba"+call$5(NUMBER$5,NUMBER$5,NUMBER$5,NUMBER$5)),hsl$6=new RegExp("hsl"+call$5(NUMBER$5,PERCENTAGE$5,PERCENTAGE$5)),hsla$6=new RegExp("hsla"+call$5(NUMBER$5,PERCENTAGE$5,PERCENTAGE$5,NUMBER$5)),hex3$5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$5=/^#([0-9a-fA-F]{6})$/,hex8$5=/^#([0-9a-fA-F]{8})$/;function normalizeColor$5(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$5.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$6&&colors$6[et]!==void 0?colors$6[et]:(dt=rgb$7.exec(et))?(parse255$5(dt[1])<<24|parse255$5(dt[2])<<16|parse255$5(dt[3])<<8|255)>>>0:(dt=rgba$6.exec(et))?(parse255$5(dt[1])<<24|parse255$5(dt[2])<<16|parse255$5(dt[3])<<8|parse1$5(dt[4]))>>>0:(dt=hex3$5.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$5.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$5.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$6.exec(et))?(hslToRgb$5(parse360$5(dt[1]),parsePercentage$5(dt[2]),parsePercentage$5(dt[3]))|255)>>>0:(dt=hsla$6.exec(et))?(hslToRgb$5(parse360$5(dt[1]),parsePercentage$5(dt[2]),parsePercentage$5(dt[3]))|parse1$5(dt[4]))>>>0:null}function hue2rgb$5(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb$5(et,dt,kt){const $t=kt<.5?kt*(1+dt):kt+dt-kt*dt,Tt=2*kt-$t,Dt=hue2rgb$5(Tt,$t,et+1/3),Ft=hue2rgb$5(Tt,$t,et),Ut=hue2rgb$5(Tt,$t,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$5(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$5(et){return(parseFloat(et)%360+360)%360/360}function parse1$5(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$5(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$5(et){let dt=normalizeColor$5(et);if(dt===null)return et;dt=dt||0;const kt=(dt&4278190080)>>>24,$t=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${kt}, ${$t}, ${Tt}, ${Dt})`}var createInterpolator$5=(et,dt,kt)=>{if(is$5.fun(et))return et;if(is$5.arr(et))return createInterpolator$5({range:et,output:dt,extrapolate:kt});if(is$5.str(et.output[0]))return createStringInterpolator$5(et);const $t=et,Tt=$t.output,Dt=$t.range||[0,1],Ft=$t.extrapolateLeft||$t.extrapolate||"extend",Ut=$t.extrapolateRight||$t.extrapolate||"extend",Ht=$t.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$5(Kt,Dt);return interpolate$6(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,$t.map)}};function interpolate$6(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>kt){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=kt)}return $t===Tt?$t:dt===kt?et<=dt?$t:Tt:(dt===-1/0?Kt=-Kt:kt===1/0?Kt=Kt-dt:Kt=(Kt-dt)/(kt-dt),Kt=Dt(Kt),$t===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+$t:Kt=Kt*(Tt-$t)+$t,Kt)}function findRange$5(et,dt){for(var kt=1;kt<dt.length-1&&!(dt[kt]>=et);++kt);return kt-1}var steps$4=(et,dt="end")=>kt=>{kt=dt==="end"?Math.min(kt,.999):Math.max(kt,.001);const $t=kt*et,Tt=dt==="end"?Math.floor($t):Math.ceil($t);return clamp$4(0,1,Tt/et)},c1$4=1.70158,c2$4=c1$4*1.525,c3$4=c1$4+1,c4$4=2*Math.PI/3,c5$4=2*Math.PI/4.5,bounceOut$4=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$4={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$4*et*et*et-c1$4*et*et,easeOutBack:et=>1+c3$4*Math.pow(et-1,3)+c1$4*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$4+1)*2*et-c2$4)/2:(Math.pow(2*et-2,2)*((c2$4+1)*(et*2-2)+c2$4)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$4),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$4)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$4))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$4)/2+1,easeInBounce:et=>1-bounceOut$4(1-et),easeOutBounce:bounceOut$4,easeInOutBounce:et=>et<.5?(1-bounceOut$4(1-2*et))/2:(1+bounceOut$4(2*et-1))/2,steps:steps$4},$get$5=Symbol.for("FluidValue.get"),$observers$5=Symbol.for("FluidValue.observers"),hasFluidValue$5=et=>!!(et&&et[$get$5]),getFluidValue$5=et=>et&&et[$get$5]?et[$get$5]():et,getFluidObservers$4=et=>et[$observers$5]||null;function callFluidObserver$5(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$5(et,dt){const kt=et[$observers$5];kt&&kt.forEach($t=>{callFluidObserver$5($t,dt)})}var FluidValue$5=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$5(this,dt)}},setFluidGetter$5=(et,dt)=>setHidden$5(et,$get$5,dt);function addFluidObserver$5(et,dt){if(et[$get$5]){let kt=et[$observers$5];kt||setHidden$5(et,$observers$5,kt=new Set),kt.has(dt)||(kt.add(dt),et.observerAdded&&et.observerAdded(kt.size,dt))}return dt}function removeFluidObserver$5(et,dt){const kt=et[$observers$5];if(kt&&kt.has(dt)){const $t=kt.size-1;$t?kt.delete(dt):et[$observers$5]=null,et.observerRemoved&&et.observerRemoved($t,dt)}}var setHidden$5=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),numberRegex$5=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$5=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$5=new RegExp(`(${numberRegex$5.source})(%|[a-z]+)`,"i"),rgbaRegex$5=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$5=et=>{const[dt,kt]=parseCSSVariable$5(et);if(!dt||isSSR$5())return et;const $t=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if($t)return $t.trim();if(kt&&kt.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue(kt);return Tt||et}else{if(kt&&cssVariableRegex$5.test(kt))return variableToRgba$5(kt);if(kt)return kt}return et},parseCSSVariable$5=et=>{const dt=cssVariableRegex$5.exec(et);if(!dt)return[,];const[,kt,$t]=dt;return[kt,$t]},namedColorRegex$5,rgbaRound$5=(et,dt,kt,$t,Tt)=>`rgba(${Math.round(dt)}, ${Math.round(kt)}, ${Math.round($t)}, ${Tt})`,createStringInterpolator2$5=et=>{namedColorRegex$5||(namedColorRegex$5=colors$6?new RegExp(`(${Object.keys(colors$6).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$5(Dt).replace(cssVariableRegex$5,variableToRgba$5).replace(colorRegex$5,colorToRgba$5).replace(namedColorRegex$5,colorToRgba$5)),kt=dt.map(Dt=>Dt.match(numberRegex$5).map(Number)),Tt=kt[0].map((Dt,Ft)=>kt.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$5({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$5.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$5.test(Kt)))==null?void 0:Ht.replace(numberRegex$5,""));let Ut=0;return dt[0].replace(numberRegex$5,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$5,rgbaRound$5)}},prefix$5="react-spring: ",once$5=et=>{const dt=et;let kt=!1;if(typeof dt!="function")throw new TypeError(`${prefix$5}once requires a function parameter`);return(...$t)=>{kt||(dt(...$t),kt=!0)}},warnInterpolate$5=once$5(console.warn);function deprecateInterpolate$5(){warnInterpolate$5(`${prefix$5}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$4=once$5(console.warn);function deprecateDirectCall$4(){warnDirectCall$4(`${prefix$5}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$5(et){return is$5.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$5()&&cssVariableRegex$5.test(et)||et in(colors$6||{}))}var useIsomorphicLayoutEffect$5=isSSR$5()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$5=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$5(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$5(){const et=reactExports.useState()[1],dt=useIsMounted$5();return()=>{dt.current&&et(Math.random())}}var useOnce$5=et=>reactExports.useEffect(et,emptyDeps$5),emptyDeps$5=[];function usePrev$4(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$5=Symbol.for("Animated:node"),isAnimated$5=et=>!!et&&et[$node$5]===et,getAnimated$5=et=>et&&et[$node$5],setAnimated$5=(et,dt)=>defineHidden$5(et,$node$5,dt),getPayload$5=et=>et&&et[$node$5]&&et[$node$5].getPayload(),Animated$5=class{constructor(){setAnimated$5(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$5=class z_ extends Animated$5{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$5.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new z_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,kt){return is$5.num(dt)&&(this.lastPosition=dt,kt&&(dt=Math.round(dt/kt)*kt,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$5.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$5=class U_ extends AnimatedValue$5{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$5({output:[dt,dt]})}static create(dt){return new U_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$5.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$5({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$5={dependencies:null},AnimatedObject$5=class extends Animated$5{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const kt={};return eachProp$5(this.source,($t,Tt)=>{isAnimated$5($t)?kt[Tt]=$t.getValue(dt):hasFluidValue$5($t)?kt[Tt]=getFluidValue$5($t):dt||(kt[Tt]=$t)}),kt}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$5(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const kt=new Set;return eachProp$5(dt,this._addToPayload,kt),Array.from(kt)}}_addToPayload(dt){TreeContext$5.dependencies&&hasFluidValue$5(dt)&&TreeContext$5.dependencies.add(dt);const kt=getPayload$5(dt);kt&&each$5(kt,$t=>this.add($t))}},AnimatedArray$5=class H_ extends AnimatedObject$5{constructor(dt){super(dt)}static create(dt){return new H_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const kt=this.getPayload();return dt.length==kt.length?kt.map(($t,Tt)=>$t.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$5)),!0)}};function makeAnimated$5(et){return(isAnimatedString$5(et)?AnimatedString$5:AnimatedValue$5).create(et)}function getAnimatedType$5(et){const dt=getAnimated$5(et);return dt?dt.constructor:is$5.arr(et)?AnimatedArray$5:isAnimatedString$5(et)?AnimatedString$5:AnimatedValue$5}var withAnimated$5=(et,dt)=>{const kt=!is$5.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef(($t,Tt)=>{const Dt=reactExports.useRef(null),Ft=kt&&reactExports.useCallback(rr=>{Dt.current=updateRef$5(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$5($t,dt),Kt=useForceUpdate$5(),Yt=()=>{const rr=Dt.current;if(kt&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$5(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$5(()=>(Zt.current=Jt,each$5(Ht,rr=>addFluidObserver$5(rr,Jt)),()=>{Zt.current&&(each$5(Zt.current.deps,rr=>removeFluidObserver$5(rr,Zt.current)),raf$5.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$5(()=>()=>{const rr=Zt.current;each$5(rr.deps,sr=>removeFluidObserver$5(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$5=class{constructor(dt,kt){this.update=dt,this.deps=kt}eventObserved(dt){dt.type=="change"&&raf$5.write(this.update)}};function getAnimatedState$5(et,dt){const kt=new Set;return TreeContext$5.dependencies=kt,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$5(et),TreeContext$5.dependencies=null,[et,kt]}function updateRef$5(et,dt){return et&&(is$5.fun(et)?et(dt):et.current=dt),dt}var cacheKey$5=Symbol.for("AnimatedComponent"),createHost$5=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:kt=Tt=>new AnimatedObject$5(Tt),getComponentProps:$t=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:kt,getComponentProps:$t},Dt=Ft=>{const Ut=getDisplayName$5(Ft)||"Anonymous";return is$5.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$5(Ft,Tt)):Ft=Ft[cacheKey$5]||(Ft[cacheKey$5]=withAnimated$5(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$5(et,(Ft,Ut)=>{is$5.arr(et)&&(Ut=getDisplayName$5(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$5=et=>is$5.str(et)?et:et&&is$5.str(et.displayName)?et.displayName:is$5.fun(et)&&et.name||null;function callProp$4(et,...dt){return is$5.fun(et)?et(...dt):et}var matchProp$4=(et,dt)=>et===!0||!!(dt&&et&&(is$5.fun(et)?et(dt):toArray$5(et).includes(dt))),resolveProp$4=(et,dt)=>is$5.obj(et)?dt&&et[dt]:et,getDefaultProp$4=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$4=et=>et,getDefaultProps$4=(et,dt=noopTransform$4)=>{let kt=DEFAULT_PROPS$4;et.default&&et.default!==!0&&(et=et.default,kt=Object.keys(et));const $t={};for(const Tt of kt){const Dt=dt(et[Tt],Tt);is$5.und(Dt)||($t[Tt]=Dt)}return $t},DEFAULT_PROPS$4=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$4={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$4(et){const dt={};let kt=0;if(eachProp$5(et,($t,Tt)=>{RESERVED_PROPS$4[Tt]||(dt[Tt]=$t,kt++)}),kt)return dt}function inferTo$4(et){const dt=getForwardProps$4(et);if(dt){const kt={to:dt};return eachProp$5(et,($t,Tt)=>Tt in dt||(kt[Tt]=$t)),kt}return{...et}}function computeGoal$4(et){return et=getFluidValue$5(et),is$5.arr(et)?et.map(computeGoal$4):isAnimatedString$5(et)?globals_exports$5.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$4(et){for(const dt in et)return!0;return!1}function isAsyncTo$4(et){return is$5.fun(et)||is$5.arr(et)&&is$5.obj(et[0])}function detachRefs$4(et,dt){var kt;(kt=et.ref)==null||kt.delete(et),dt==null||dt.delete(et)}function replaceRef$4(et,dt){var kt;dt&&et.ref!==dt&&((kt=et.ref)==null||kt.delete(et),dt.add(et),et.ref=dt)}var config$4={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$4={...config$4.default,mass:1,damping:1,easing:easings$4.linear,clamp:!1},AnimationConfig$4=class{constructor(){this.velocity=0,Object.assign(this,defaults$4)}};function mergeConfig$4(et,dt,kt){kt&&(kt={...kt},sanitizeConfig$4(kt,dt),dt={...kt,...dt}),sanitizeConfig$4(et,dt),Object.assign(et,dt);for(const Ft in defaults$4)et[Ft]==null&&(et[Ft]=defaults$4[Ft]);let{frequency:$t,damping:Tt}=et;const{mass:Dt}=et;return is$5.und($t)||($t<.01&&($t=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/$t,2)*Dt,et.friction=4*Math.PI*Tt*Dt/$t),et}function sanitizeConfig$4(et,dt){if(!is$5.und(dt.decay))et.duration=void 0;else{const kt=!is$5.und(dt.tension)||!is$5.und(dt.friction);(kt||!is$5.und(dt.frequency)||!is$5.und(dt.damping)||!is$5.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),kt&&(et.frequency=void 0)}}var emptyArray$4=[],Animation$4=class{constructor(){this.changed=!1,this.values=emptyArray$4,this.toValues=null,this.fromValues=emptyArray$4,this.config=new AnimationConfig$4,this.immediate=!1}};function scheduleProps$4(et,{key:dt,props:kt,defaultProps:$t,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$4(kt.cancel??($t==null?void 0:$t.cancel),dt);if(Yt)er();else{is$5.und(kt.pause)||(Tt.paused=matchProp$4(kt.pause,dt));let rr=$t==null?void 0:$t.pause;rr!==!0&&(rr=Tt.paused||matchProp$4(rr,dt)),Ht=callProp$4(kt.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$5.now()}function Zt(){Ht>0&&!globals_exports$5.skipAnimation?(Tt.delayed=!0,Kt=raf$5.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...kt,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$4=(et,dt)=>dt.length==1?dt[0]:dt.some(kt=>kt.cancelled)?getCancelledResult$4(et.get()):dt.every(kt=>kt.noop)?getNoopResult$4(et.get()):getFinishedResult$4(et.get(),dt.every(kt=>kt.finished)),getNoopResult$4=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$4=(et,dt,kt=!1)=>({value:et,finished:dt,cancelled:kt}),getCancelledResult$4=et=>({value:et,cancelled:!0,finished:!1});function runAsync$4(et,dt,kt,$t){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=kt;return!Dt&&et===Ut&&!dt.reset?Ht:kt.promise=(async()=>{kt.asyncId=Tt,kt.asyncTo=et;const Kt=getDefaultProps$4(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=(kt.cancelId||0)&&getCancelledResult$4($t)||Tt!==kt.asyncId&&getFinishedResult$4($t,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const lr=new BailSignal$4,or=new SkipAnimationSignal$4;return(async()=>{if(globals_exports$5.skipAnimation)throw stopAsync$4(kt),or.result=getFinishedResult$4($t,!1),Jt(or),or;er(lr);const cr=is$5.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$5(Kt,(ur,pr)=>{is$5.und(cr[pr])&&(cr[pr]=ur)});const dr=await $t.start(cr);return er(lr),kt.paused&&await new Promise(ur=>{kt.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$5.skipAnimation)return stopAsync$4(kt),getFinishedResult$4($t,!1);try{let nr;is$5.arr(et)?nr=(async ir=>{for(const lr of ir)await rr(lr)})(et):nr=Promise.resolve(et(rr,$t.stop.bind($t))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$4($t.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$4)sr=nr.result;else if(nr instanceof SkipAnimationSignal$4)sr=nr.result;else throw nr}finally{Tt==kt.asyncId&&(kt.asyncId=Dt,kt.asyncTo=Dt?Ut:void 0,kt.promise=Dt?Ht:void 0)}return is$5.fun(Ft)&&raf$5.batchedUpdates(()=>{Ft(sr,$t,$t.item)}),sr})()}function stopAsync$4(et,dt){flush$4(et.timeouts,kt=>kt.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$4=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$5=et=>et instanceof FrameValue$5,nextId$5=1,FrameValue$5=class extends FluidValue$5{constructor(){super(...arguments),this.id=nextId$5++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$5(this);return dt&&dt.getValue()}to(...dt){return globals_exports$5.to(this,dt)}interpolate(...dt){return deprecateInterpolate$5(),globals_exports$5.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,kt=!1){callFluidObservers$5(this,{type:"change",parent:this,value:dt,idle:kt})}_onPriorityChange(dt){this.idle||frameLoop$5.sort(this),callFluidObservers$5(this,{type:"priority",parent:this,priority:dt})}},$P$4=Symbol.for("SpringPhase"),HAS_ANIMATED$4=1,IS_ANIMATING$4=2,IS_PAUSED$4=4,hasAnimated$4=et=>(et[$P$4]&HAS_ANIMATED$4)>0,isAnimating$4=et=>(et[$P$4]&IS_ANIMATING$4)>0,isPaused$4=et=>(et[$P$4]&IS_PAUSED$4)>0,setActiveBit$4=(et,dt)=>dt?et[$P$4]|=IS_ANIMATING$4|HAS_ANIMATED$4:et[$P$4]&=~IS_ANIMATING$4,setPausedBit$4=(et,dt)=>dt?et[$P$4]|=IS_PAUSED$4:et[$P$4]&=~IS_PAUSED$4,SpringValue$4=class extends FrameValue$5{constructor(dt,kt){if(super(),this.animation=new Animation$4,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$5.und(dt)||!is$5.und(kt)){const $t=is$5.obj(dt)?{...dt}:{...kt,from:dt};is$5.und($t.default)&&($t.default=!0),this.start($t)}}get idle(){return!(isAnimating$4(this)||this._state.asyncTo)||isPaused$4(this)}get goal(){return getFluidValue$5(this.animation.to)}get velocity(){const dt=getAnimated$5(this);return dt instanceof AnimatedValue$5?dt.lastVelocity||0:dt.getPayload().map(kt=>kt.lastVelocity||0)}get hasAnimated(){return hasAnimated$4(this)}get isAnimating(){return isAnimating$4(this)}get isPaused(){return isPaused$4(this)}get isDelayed(){return this._state.delayed}advance(dt){let kt=!0,$t=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$5(Tt.to);!Ut&&hasFluidValue$5(Tt.to)&&(Dt=toArray$5(getFluidValue$5(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$5?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$5.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let lr;const or=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$5.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=or,lr=ir*dr}else{lr=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||or/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$5.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,br=Math.ceil(dt/Rr);for(let _r=0;_r<br&&(mr=Math.abs(lr)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=or,er)));++_r){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(lr=-lr*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Pr=-Ft.friction*.001*lr,Or=(Mr+Pr)/Ft.mass;lr=lr+Or*Rr,rr=rr+lr*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),lr=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=lr,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:kt=!1,Yt.setValue(rr,Ft.round)&&($t=!0)});const Ht=getAnimated$5(this),Kt=Ht.getValue();if(kt){const Yt=getFluidValue$5(Tt.to);(Kt!==Yt||$t)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):$t&&Ft.decay&&this._onChange(Kt),this._stop()}else $t&&this._onChange(Kt)}set(dt){return raf$5.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$4(this)){const{to:dt,config:kt}=this.animation;raf$5.batchedUpdates(()=>{this._onStart(),kt.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,kt){let $t;return is$5.und(dt)?($t=this.queue||[],this.queue=[]):$t=[is$5.obj(dt)?dt:{...kt,to:dt}],Promise.all($t.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$4(this,Tt))}stop(dt){const{to:kt}=this.animation;return this._focus(this.get()),stopAsync$4(this._state,dt&&this._lastCallId),raf$5.batchedUpdates(()=>this._stop(kt,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const kt=this.key||"";let{to:$t,from:Tt}=dt;$t=is$5.obj($t)?$t[kt]:$t,($t==null||isAsyncTo$4($t))&&($t=void 0),Tt=is$5.obj(Tt)?Tt[kt]:Tt,Tt==null&&(Tt=void 0);const Dt={to:$t,from:Tt};return hasAnimated$4(this)||(dt.reverse&&([$t,Tt]=[Tt,$t]),Tt=getFluidValue$5(Tt),is$5.und(Tt)?getAnimated$5(this)||this._set($t):this._set(Tt)),Dt}_update({...dt},kt){const{key:$t,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$4(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$4(Ut,$t):Ut)),mergeActiveFn$4(this,dt,"onProps"),sendEvent$4(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$4(++this._lastCallId,{key:$t,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$4(this)||(setPausedBit$4(this,!0),flushCalls$4(Ft.pauseQueue),sendEvent$4(this,"onPause",getFinishedResult$4(this,checkFinished$4(this,this.animation.to)),this))},resume:()=>{isPaused$4(this)&&(setPausedBit$4(this,!1),isAnimating$4(this)&&this._resume(),flushCalls$4(Ft.resumeQueue),sendEvent$4(this,"onResume",getFinishedResult$4(this,checkFinished$4(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!(kt&&Ut.noop)){const Ht=createLoopUpdate$4(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,kt,$t){if(kt.cancel)return this.stop(!0),$t(getCancelledResult$4(this));const Tt=!is$5.und(dt.to),Dt=!is$5.und(dt.from);if(Tt||Dt)if(kt.callId>this._lastToId)this._lastToId=kt.callId;else return $t(getCancelledResult$4(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!kt.default||is$5.und(Jt))&&(Jt=Zt),kt.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$6(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$5(Zt);const rr=!isEqual$6(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$4(kt.to),{config:nr}=Ht,{decay:ir,velocity:lr}=nr;(Tt||Dt)&&(nr.velocity=0),kt.config&&!sr&&mergeConfig$4(nr,callProp$4(kt.config,Ft),kt.config!==Ut.config?callProp$4(Ut.config,Ft):void 0);let or=getAnimated$5(this);if(!or||is$5.und(Jt))return $t(getFinishedResult$4(this,!0));const cr=is$5.und(kt.reset)?Dt&&!kt.default:!is$5.und(Zt)&&matchProp$4(kt.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$4(Jt),pr=is$5.num(ur)||is$5.arr(ur)||isAnimatedString$5(ur),mr=!sr&&(!pr||matchProp$4(Ut.immediate||kt.immediate,Ft));if(rr){const _r=getAnimatedType$5(Jt);if(_r!==or.constructor)if(mr)or=this._set(ur);else throw Error(`Cannot animate between ${or.constructor.name} and ${_r.name}, as the "to" prop suggests`)}const jr=or.constructor;let Rr=hasFluidValue$5(Jt),br=!1;if(!Rr){const _r=cr||!hasAnimated$4(this)&&er;(rr||_r)&&(br=isEqual$6(computeGoal$4(dr),ur),Rr=!br),(!isEqual$6(Ht.immediate,mr)&&!mr||!isEqual$6(nr.decay,ir)||!isEqual$6(nr.velocity,lr))&&(Rr=!0)}if(br&&isAnimating$4(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$5(Kt))&&(Ht.values=or.getPayload(),Ht.toValues=hasFluidValue$5(Jt)?null:jr==AnimatedString$5?[1]:toArray$5(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:_r}=Ht;each$5(ACTIVE_EVENTS$4,Pr=>mergeActiveFn$4(this,kt,Pr));const Mr=getFinishedResult$4(this,checkFinished$4(this,Kt));flushCalls$4(this._pendingCalls,Mr),this._pendingCalls.add($t),Ht.changed&&raf$5.batchedUpdates(()=>{var Pr;Ht.changed=!cr,_r==null||_r(Mr,this),cr?callProp$4(Ut.onRest,Mr):(Pr=Ht.onStart)==null||Pr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?$t(runAsync$4(kt.to,kt,this._state,this)):Rr?this._start():isAnimating$4(this)&&!rr?this._pendingCalls.add($t):$t(getNoopResult$4(dr))}_focus(dt){const kt=this.animation;dt!==kt.to&&(getFluidObservers$4(this)&&this._detach(),kt.to=dt,getFluidObservers$4(this)&&this._attach())}_attach(){let dt=0;const{to:kt}=this.animation;hasFluidValue$5(kt)&&(addFluidObserver$5(kt,this),isFrameValue$5(kt)&&(dt=kt.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$5(dt)&&removeFluidObserver$5(dt,this)}_set(dt,kt=!0){const $t=getFluidValue$5(dt);if(!is$5.und($t)){const Tt=getAnimated$5(this);if(!Tt||!isEqual$6($t,Tt.getValue())){const Dt=getAnimatedType$5($t);!Tt||Tt.constructor!=Dt?setAnimated$5(this,Dt.create($t)):Tt.setValue($t),Tt&&raf$5.batchedUpdates(()=>{this._onChange($t,kt)})}}return getAnimated$5(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$4(this,"onStart",getFinishedResult$4(this,checkFinished$4(this,dt.to)),this))}_onChange(dt,kt){kt||(this._onStart(),callProp$4(this.animation.onChange,dt,this)),callProp$4(this.defaultProps.onChange,dt,this),super._onChange(dt,kt)}_start(){const dt=this.animation;getAnimated$5(this).reset(getFluidValue$5(dt.to)),dt.immediate||(dt.fromValues=dt.values.map(kt=>kt.lastPosition)),isAnimating$4(this)||(setActiveBit$4(this,!0),isPaused$4(this)||this._resume())}_resume(){globals_exports$5.skipAnimation?this.finish():frameLoop$5.start(this)}_stop(dt,kt){if(isAnimating$4(this)){setActiveBit$4(this,!1);const $t=this.animation;each$5($t.values,Dt=>{Dt.done=!0}),$t.toValues&&($t.onChange=$t.onPause=$t.onResume=void 0),callFluidObservers$5(this,{type:"idle",parent:this});const Tt=kt?getCancelledResult$4(this.get()):getFinishedResult$4(this.get(),checkFinished$4(this,dt??$t.to));flushCalls$4(this._pendingCalls,Tt),$t.changed&&($t.changed=!1,sendEvent$4(this,"onRest",Tt,this))}}};function checkFinished$4(et,dt){const kt=computeGoal$4(dt),$t=computeGoal$4(et.get());return isEqual$6($t,kt)}function createLoopUpdate$4(et,dt=et.loop,kt=et.to){const $t=callProp$4(dt);if($t){const Tt=$t!==!0&&inferTo$4($t),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$4({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$4(kt)?kt:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$4(et){const{to:dt,from:kt}=et=inferTo$4(et),$t=new Set;return is$5.obj(dt)&&findDefined$4(dt,$t),is$5.obj(kt)&&findDefined$4(kt,$t),et.keys=$t.size?Array.from($t):null,et}function declareUpdate$3(et){const dt=createUpdate$4(et);return is$5.und(dt.default)&&(dt.default=getDefaultProps$4(dt)),dt}function findDefined$4(et,dt){eachProp$5(et,(kt,$t)=>kt!=null&&dt.add($t))}var ACTIVE_EVENTS$4=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$4(et,dt,kt){et.animation[kt]=dt[kt]!==getDefaultProp$4(dt,kt)?resolveProp$4(dt[kt],et.key):void 0}function sendEvent$4(et,dt,...kt){var $t,Tt,Dt,Ft;(Tt=($t=et.animation)[dt])==null||Tt.call($t,...kt),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...kt)}var BATCHED_EVENTS$4=["onStart","onChange","onRest"],nextId2$4=1,Controller$4=class{constructor(dt,kt){this.id=nextId2$4++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),kt&&(this._flush=kt),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each((kt,$t)=>dt[$t]=kt.get()),dt}set(dt){for(const kt in dt){const $t=dt[kt];is$5.und($t)||this.springs[kt].set($t)}}update(dt){return dt&&this.queue.push(createUpdate$4(dt)),this}start(dt){let{queue:kt}=this;return dt?kt=toArray$5(dt).map(createUpdate$4):this.queue=[],this._flush?this._flush(this,kt):(prepareKeys$4(this,kt),flushUpdateQueue$4(this,kt))}stop(dt,kt){if(dt!==!!dt&&(kt=dt),kt){const $t=this.springs;each$5(toArray$5(kt),Tt=>$t[Tt].stop(!!dt))}else stopAsync$4(this._state,this._lastAsyncId),this.each($t=>$t.stop(!!dt));return this}pause(dt){if(is$5.und(dt))this.start({pause:!0});else{const kt=this.springs;each$5(toArray$5(dt),$t=>kt[$t].pause())}return this}resume(dt){if(is$5.und(dt))this.start({pause:!1});else{const kt=this.springs;each$5(toArray$5(dt),$t=>kt[$t].resume())}return this}each(dt){eachProp$5(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:kt,onRest:$t}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$4(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&$t.size?this.get():null;Dt&&kt.size&&flush$4(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$4($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$5.onFrame(this._onFrame)}};function flushUpdateQueue$4(et,dt){return Promise.all(dt.map(kt=>flushUpdate$4(et,kt))).then(kt=>getCombinedResult$4(et,kt))}async function flushUpdate$4(et,dt,kt){const{keys:$t,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$5.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$5.arr(Tt)||is$5.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$5(BATCHED_EVENTS$4,sr=>{const nr=dt[sr];if(is$5.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:lr,cancelled:or})=>{const cr=ir.get(nr);cr?(lr||(cr.finished=!1),or&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:lr||!1,cancelled:or||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$4(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=($t||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$4(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$4(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$8,resume:noop$8,start(sr,nr){er?(stopAsync$4(Jt,et._lastAsyncId),nr(getCancelledResult$4(et))):(sr.onRest=Ut,nr(runAsync$4(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$4(et,await Promise.all(Zt));if(Ft&&rr.finished&&!(kt&&rr.noop)){const sr=createLoopUpdate$4(dt,Ft,Tt);if(sr)return prepareKeys$4(et,[sr]),flushUpdate$4(et,sr,!0)}return Ht&&raf$5.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$4(et,dt){const kt={...et.springs};return dt&&each$5(toArray$5(dt),$t=>{is$5.und($t.keys)&&($t=createUpdate$4($t)),is$5.obj($t.to)||($t={...$t,to:void 0}),prepareSprings$4(kt,$t,Tt=>createSpring$4(Tt))}),setSprings$4(et,kt),kt}function setSprings$4(et,dt){eachProp$5(dt,(kt,$t)=>{et.springs[$t]||(et.springs[$t]=kt,addFluidObserver$5(kt,et))})}function createSpring$4(et,dt){const kt=new SpringValue$4;return kt.key=et,dt&&addFluidObserver$5(kt,dt),kt}function prepareSprings$4(et,dt,kt){dt.keys&&each$5(dt.keys,$t=>{(et[$t]||(et[$t]=kt($t)))._prepareNode(dt)})}function prepareKeys$4(et,dt){each$5(dt,kt=>{prepareSprings$4(et.springs,kt,$t=>createSpring$4($t,et))})}var SpringContext$4=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$4=()=>{const et=[],dt=function($t){deprecateDirectCall$4();const Tt=[];return each$5(et,(Dt,Ft)=>{if(is$5.und($t))Tt.push(Dt.start());else{const Ut=kt($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function($t){et.includes($t)||et.push($t)},dt.delete=function($t){const Tt=et.indexOf($t);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$5(et,$t=>$t.pause(...arguments)),this},dt.resume=function(){return each$5(et,$t=>$t.resume(...arguments)),this},dt.set=function($t){each$5(et,(Tt,Dt)=>{const Ft=is$5.fun($t)?$t(Dt,Tt):$t;Ft&&Tt.set(Ft)})},dt.start=function($t){const Tt=[];return each$5(et,(Dt,Ft)=>{if(is$5.und($t))Tt.push(Dt.start());else{const Ut=this._getProps($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$5(et,$t=>$t.stop(...arguments)),this},dt.update=function($t){return each$5(et,(Tt,Dt)=>Tt.update(this._getProps($t,Tt,Dt))),this};const kt=function($t,Tt,Dt){return is$5.fun($t)?$t(Dt,Tt):$t};return dt._getProps=kt,dt};function useSprings$3(et,dt,kt){const $t=is$5.fun(dt)&&dt;$t&&!kt&&(kt=[]);const Tt=reactExports.useMemo(()=>$t||arguments.length==3?SpringRef$4():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate$5(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,lr){const or=getSprings$4(ir,lr);return Dt.current>0&&!Ut.queue.length&&!Object.keys(or).some(dr=>!ir.springs[dr])?flushUpdateQueue$4(ir,lr):new Promise(dr=>{setSprings$4(ir,or),Ut.queue.push(()=>{dr(flushUpdateQueue$4(ir,lr))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev$4(et)||0;reactExports.useMemo(()=>{each$5(Ht.current.slice(et,Yt),ir=>{detachRefs$4(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},kt);function Jt(ir,lr){for(let or=ir;or<lr;or++){const cr=Ht.current[or]||(Ht.current[or]=new Controller$4(null,Ut.flush)),dr=$t?$t(or,cr):dt[or];dr&&(Kt.current[or]=declareUpdate$3(dr))}}const Zt=Ht.current.map((ir,lr)=>getSprings$4(ir,Kt.current[lr])),er=reactExports.useContext(SpringContext$4),rr=usePrev$4(er),sr=er!==rr&&hasProps$4(er);useIsomorphicLayoutEffect$5(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each$5(ir,lr=>lr())),each$5(Ht.current,(lr,or)=>{Tt==null||Tt.add(lr),sr&&lr.start({default:er});const cr=Kt.current[or];cr&&(replaceRef$4(lr,cr.ref),lr.ref?lr.queue.push(cr):lr.start(cr))})}),useOnce$5(()=>()=>{each$5(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring$3(et,dt){const kt=is$5.fun(et),[[$t],Tt]=useSprings$3(1,kt?et:[et],kt?dt||[]:dt);return kt||arguments.length==2?[$t,Tt]:$t}var Interpolation$5=class extends FrameValue$5{constructor(dt,kt){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$5(...kt);const $t=this._get(),Tt=getAnimatedType$5($t);setAnimated$5(this,Tt.create($t))}advance(dt){const kt=this._get(),$t=this.get();isEqual$6(kt,$t)||(getAnimated$5(this).setValue(kt),this._onChange(kt,this.idle)),!this.idle&&checkIdle$5(this._active)&&becomeIdle$5(this)}_get(){const dt=is$5.arr(this.source)?this.source.map(getFluidValue$5):toArray$5(getFluidValue$5(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$5(this._active)&&(this.idle=!1,each$5(getPayload$5(this),dt=>{dt.done=!1}),globals_exports$5.skipAnimation?(raf$5.batchedUpdates(()=>this.advance()),becomeIdle$5(this)):frameLoop$5.start(this))}_attach(){let dt=1;each$5(toArray$5(this.source),kt=>{hasFluidValue$5(kt)&&addFluidObserver$5(kt,this),isFrameValue$5(kt)&&(kt.idle||this._active.add(kt),dt=Math.max(dt,kt.priority+1))}),this.priority=dt,this._start()}_detach(){each$5(toArray$5(this.source),dt=>{hasFluidValue$5(dt)&&removeFluidObserver$5(dt,this)}),this._active.clear(),becomeIdle$5(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$5(this.source).reduce((kt,$t)=>Math.max(kt,(isFrameValue$5($t)?$t.priority:0)+1),0))}};function isIdle$5(et){return et.idle!==!1}function checkIdle$5(et){return!et.size||Array.from(et).every(isIdle$5)}function becomeIdle$5(et){et.idle||(et.idle=!0,each$5(getPayload$5(et),dt=>{dt.done=!0}),callFluidObservers$5(et,{type:"idle",parent:et}))}globals_exports$5.assign({createStringInterpolator:createStringInterpolator2$5,to:(et,dt)=>new Interpolation$5(et,dt)});var isCustomPropRE$5=/^--/;function dangerousStyleValue$5(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$5.test(et)&&!(isUnitlessNumber$5.hasOwnProperty(et)&&isUnitlessNumber$5[et])?dt+"px":(""+dt).trim()}var attributeCache$5={};function applyAnimatedValues$5(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const kt=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:$t,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>kt||et.hasAttribute(Zt)?Zt:attributeCache$5[Zt]||(attributeCache$5[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$5(Zt,Tt[Zt]);isCustomPropRE$5.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),$t!==void 0&&(et.className=$t),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$5={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$5=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$6=["Webkit","Ms","Moz","O"];isUnitlessNumber$5=Object.keys(isUnitlessNumber$5).reduce((et,dt)=>(prefixes$6.forEach(kt=>et[prefixKey$5(kt,dt)]=et[dt]),et),isUnitlessNumber$5);var domTransforms$5=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$5=/^(translate)/,degTransforms$5=/^(rotate|skew)/,addUnit$5=(et,dt)=>is$5.num(et)&&et!==0?et+dt:et,isValueIdentity$5=(et,dt)=>is$5.arr(et)?et.every(kt=>isValueIdentity$5(kt,dt)):is$5.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$5=class extends AnimatedObject$5{constructor({x:dt,y:kt,z:$t,...Tt}){const Dt=[],Ft=[];(dt||kt||$t)&&(Dt.push([dt||0,kt||0,$t||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$5(Ht,"px")).join(",")})`,isValueIdentity$5(Ut,0)])),eachProp$5(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$5.test(Ht)){if(delete Tt[Ht],is$5.und(Ut))return;const Kt=pxTransforms$5.test(Ht)?"px":degTransforms$5.test(Ht)?"deg":"";Dt.push(toArray$5(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$5(er,Kt)})`,isValueIdentity$5(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$5(Jt,Kt)).join(",")})`,isValueIdentity$5(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$5(Dt,Ft)),super(Tt)}},FluidTransform$5=class extends FluidValue$5{constructor(dt,kt){super(),this.inputs=dt,this.transforms=kt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",kt=!0;return each$5(this.inputs,($t,Tt)=>{const Dt=getFluidValue$5($t[0]),[Ft,Ut]=this.transforms[Tt](is$5.arr(Dt)?Dt:$t.map(getFluidValue$5));dt+=" "+Ft,kt=kt&&Ut}),kt?"none":dt}observerAdded(dt){dt==1&&each$5(this.inputs,kt=>each$5(kt,$t=>hasFluidValue$5($t)&&addFluidObserver$5($t,this)))}observerRemoved(dt){dt==0&&each$5(this.inputs,kt=>each$5(kt,$t=>hasFluidValue$5($t)&&removeFluidObserver$5($t,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$5(this,dt)}},primitives$5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$5.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$5,colors:colors2$5});var host$5=createHost$5(primitives$5,{applyAnimatedValues:applyAnimatedValues$5,createAnimatedStyle:et=>new AnimatedStyle$5(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...kt})=>kt}),animated$5=host$5.animated;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$5(et,dt){return et===dt||et!==et&&dt!==dt}var eq_1=eq$5,eq$4=eq_1;function assocIndexOf$4(et,dt){for(var kt=et.length;kt--;)if(eq$4(et[kt][0],dt))return kt;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(et){var dt=this.__data__,kt=assocIndexOf$3(dt,et);if(kt<0)return!1;var $t=dt.length-1;return kt==$t?dt.pop():splice.call(dt,kt,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(et){var dt=this.__data__,kt=assocIndexOf$2(dt,et);return kt<0?void 0:dt[kt][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(et){return assocIndexOf$1(this.__data__,et)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(et,dt){var kt=this.__data__,$t=assocIndexOf(kt,et);return $t<0?(++this.size,kt.push([et,dt])):kt[$t][1]=dt,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(et){var dt=-1,kt=et==null?0:et.length;for(this.clear();++dt<kt;){var $t=et[dt];this.set($t[0],$t[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(et){var dt=this.__data__,kt=dt.delete(et);return this.size=dt.size,kt}var _stackDelete=stackDelete$1;function stackGet$1(et){return this.__data__.get(et)}var _stackGet=stackGet$1;function stackHas$1(et){return this.__data__.has(et)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(et){var dt=hasOwnProperty$c.call(et,symToStringTag$1),kt=et[symToStringTag$1];try{et[symToStringTag$1]=void 0;var $t=!0}catch{}var Tt=nativeObjectToString$1.call(et);return $t&&(dt?et[symToStringTag$1]=kt:delete et[symToStringTag$1]),Tt}var _getRawTag=getRawTag$1,objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(et){return nativeObjectToString.call(et)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$8(et){return et==null?et===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(et)?getRawTag(et):objectToString(et)}var _baseGetTag=baseGetTag$8;function isObject$a(et){var dt=typeof et;return et!=null&&(dt=="object"||dt=="function")}var isObject_1=isObject$a,baseGetTag$7=_baseGetTag,isObject$9=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(et){if(!isObject$9(et))return!1;var dt=baseGetTag$7(et);return dt==funcTag$2||dt==genTag$1||dt==asyncTag||dt==proxyTag}var isFunction_1=isFunction$3;const Cr=getDefaultExportFromCjs(isFunction_1);var root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var et=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return et?"Symbol(src)_1."+et:""}();function isMasked$1(et){return!!maskSrcKey&&maskSrcKey in et}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(et){if(et!=null){try{return funcToString$2.call(et)}catch{}try{return et+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject$8=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(et){if(!isObject$8(et)||isMasked(et))return!1;var dt=isFunction$2(et)?reIsNative:reIsHostCtor;return dt.test(toSource$1(et))}var _baseIsNative=baseIsNative$1;function getValue$1(et,dt){return et==null?void 0:et[dt]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(et,dt){var kt=getValue(et,dt);return baseIsNative(kt)?kt:void 0}var _getNative=getNative$7,getNative$6=_getNative,root$6=_root,Map$4=getNative$6(root$6,"Map"),_Map=Map$4,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(et){var dt=this.has(et)&&delete this.__data__[et];return this.size-=dt?1:0,dt}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function hashGet$1(et){var dt=this.__data__;if(nativeCreate$2){var kt=dt[et];return kt===HASH_UNDEFINED$2?void 0:kt}return hasOwnProperty$a.call(dt,et)?dt[et]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashHas$1(et){var dt=this.__data__;return nativeCreate$1?dt[et]!==void 0:hasOwnProperty$9.call(dt,et)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(et,dt){var kt=this.__data__;return this.size+=this.has(et)?0:1,kt[et]=nativeCreate&&dt===void 0?HASH_UNDEFINED$1:dt,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(et){var dt=-1,kt=et==null?0:et.length;for(this.clear();++dt<kt;){var $t=et[dt];this.set($t[0],$t[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(et){var dt=typeof et;return dt=="string"||dt=="number"||dt=="symbol"||dt=="boolean"?et!=="__proto__":et===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(et,dt){var kt=et.__data__;return isKeyable(dt)?kt[typeof dt=="string"?"string":"hash"]:kt.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(et){var dt=getMapData$3(this,et).delete(et);return this.size-=dt?1:0,dt}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(et){return getMapData$2(this,et).get(et)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(et){return getMapData$1(this,et).has(et)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(et,dt){var kt=getMapData(this,et),$t=kt.size;return kt.set(et,dt),this.size+=kt.size==$t?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(et){var dt=-1,kt=et==null?0:et.length;for(this.clear();++dt<kt;){var $t=et[dt];this.set($t[0],$t[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,ListCache$1=_ListCache,Map$2=_Map,MapCache$2=_MapCache,LARGE_ARRAY_SIZE$2=200;function stackSet$1(et,dt){var kt=this.__data__;if(kt instanceof ListCache$1){var $t=kt.__data__;if(!Map$2||$t.length<LARGE_ARRAY_SIZE$2-1)return $t.push([et,dt]),this.size=++kt.size,this;kt=this.__data__=new MapCache$2($t)}return kt.set(et,dt),this.size=kt.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$4(et){var dt=this.__data__=new ListCache(et);this.size=dt.size}Stack$4.prototype.clear=stackClear;Stack$4.prototype.delete=stackDelete;Stack$4.prototype.get=stackGet;Stack$4.prototype.has=stackHas;Stack$4.prototype.set=stackSet;var _Stack=Stack$4,getNative$4=_getNative,defineProperty$2=function(){try{var et=getNative$4(Object,"defineProperty");return et({},"",{}),et}catch{}}(),_defineProperty=defineProperty$2,defineProperty$1=_defineProperty;function baseAssignValue$3(et,dt,kt){dt=="__proto__"&&defineProperty$1?defineProperty$1(et,dt,{configurable:!0,enumerable:!0,value:kt,writable:!0}):et[dt]=kt}var _baseAssignValue=baseAssignValue$3,baseAssignValue$2=_baseAssignValue,eq$3=eq_1;function assignMergeValue$2(et,dt,kt){(kt!==void 0&&!eq$3(et[dt],kt)||kt===void 0&&!(dt in et))&&baseAssignValue$2(et,dt,kt)}var _assignMergeValue=assignMergeValue$2;function createBaseFor$1(et){return function(dt,kt,$t){for(var Tt=-1,Dt=Object(dt),Ft=$t(dt),Ut=Ft.length;Ut--;){var Ht=Ft[et?Ut:++Tt];if(kt(Dt[Ht],Ht,Dt)===!1)break}return dt}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$2=createBaseFor(),_baseFor=baseFor$2,_cloneBuffer={exports:{}};_cloneBuffer.exports;(function(et,dt){var kt=_root,$t=dt&&!dt.nodeType&&dt,Tt=$t&&!0&&et&&!et.nodeType&&et,Dt=Tt&&Tt.exports===$t,Ft=Dt?kt.Buffer:void 0,Ut=Ft?Ft.allocUnsafe:void 0;function Ht(Kt,Yt){if(Yt)return Kt.slice();var Jt=Kt.length,Zt=Ut?Ut(Jt):new Kt.constructor(Jt);return Kt.copy(Zt),Zt}et.exports=Ht})(_cloneBuffer,_cloneBuffer.exports);var _cloneBufferExports=_cloneBuffer.exports,root$5=_root,Uint8Array$3=root$5.Uint8Array,_Uint8Array=Uint8Array$3,Uint8Array$2=_Uint8Array;function cloneArrayBuffer$3(et){var dt=new et.constructor(et.byteLength);return new Uint8Array$2(dt).set(new Uint8Array$2(et)),dt}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneTypedArray$2(et,dt){var kt=dt?cloneArrayBuffer$2(et.buffer):et.buffer;return new et.constructor(kt,et.byteOffset,et.length)}var _cloneTypedArray=cloneTypedArray$2;function copyArray$2(et,dt){var kt=-1,$t=et.length;for(dt||(dt=Array($t));++kt<$t;)dt[kt]=et[kt];return dt}var _copyArray=copyArray$2,isObject$7=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function et(){}return function(dt){if(!isObject$7(dt))return{};if(objectCreate)return objectCreate(dt);et.prototype=dt;var kt=new et;return et.prototype=void 0,kt}}(),_baseCreate=baseCreate$1;function overArg$2(et,dt){return function(kt){return et(dt(kt))}}var _overArg=overArg$2,overArg$1=_overArg,getPrototype$3=overArg$1(Object.getPrototypeOf,Object),_getPrototype=getPrototype$3,objectProto$a=Object.prototype;function isPrototype$3(et){var dt=et&&et.constructor,kt=typeof dt=="function"&&dt.prototype||objectProto$a;return et===kt}var _isPrototype=isPrototype$3,baseCreate=_baseCreate,getPrototype$2=_getPrototype,isPrototype$2=_isPrototype;function initCloneObject$2(et){return typeof et.constructor=="function"&&!isPrototype$2(et)?baseCreate(getPrototype$2(et)):{}}var _initCloneObject=initCloneObject$2;function isObjectLike$b(et){return et!=null&&typeof et=="object"}var isObjectLike_1=isObjectLike$b,baseGetTag$6=_baseGetTag,isObjectLike$a=isObjectLike_1,argsTag$3="[object Arguments]";function baseIsArguments$1(et){return isObjectLike$a(et)&&baseGetTag$6(et)==argsTag$3}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$9=isObjectLike_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments$4=baseIsArguments(function(){return arguments}())?baseIsArguments:function(et){return isObjectLike$9(et)&&hasOwnProperty$8.call(et,"callee")&&!propertyIsEnumerable$1.call(et,"callee")},isArguments_1=isArguments$4,isArray$e=Array.isArray,isArray_1=isArray$e,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(et){return typeof et=="number"&&et>-1&&et%1==0&&et<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,isFunction$1=isFunction_1,isLength$2=isLength_1;function isArrayLike$6(et){return et!=null&&isLength$2(et.length)&&!isFunction$1(et)}var isArrayLike_1=isArrayLike$6,isArrayLike$5=isArrayLike_1,isObjectLike$8=isObjectLike_1;function isArrayLikeObject$2(et){return isObjectLike$8(et)&&isArrayLike$5(et)}var isArrayLikeObject_1=isArrayLikeObject$2,isBuffer$4={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$4.exports;(function(et,dt){var kt=_root,$t=stubFalse_1,Tt=dt&&!dt.nodeType&&dt,Dt=Tt&&!0&&et&&!et.nodeType&&et,Ft=Dt&&Dt.exports===Tt,Ut=Ft?kt.Buffer:void 0,Ht=Ut?Ut.isBuffer:void 0,Kt=Ht||$t;et.exports=Kt})(isBuffer$4,isBuffer$4.exports);var isBufferExports=isBuffer$4.exports,baseGetTag$5=_baseGetTag,getPrototype$1=_getPrototype,isObjectLike$7=isObjectLike_1,objectTag$4="[object Object]",funcProto=Function.prototype,objectProto$8=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$8.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(et){if(!isObjectLike$7(et)||baseGetTag$5(et)!=objectTag$4)return!1;var dt=getPrototype$1(et);if(dt===null)return!0;var kt=hasOwnProperty$7.call(dt,"constructor")&&dt.constructor;return typeof kt=="function"&&kt instanceof kt&&funcToString.call(kt)==objectCtorString}var isPlainObject_1=isPlainObject$2;const je=getDefaultExportFromCjs(isPlainObject_1);var baseGetTag$4=_baseGetTag,isLength$1=isLength_1,isObjectLike$6=isObjectLike_1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$4="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$4]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray$1(et){return isObjectLike$6(et)&&isLength$1(et.length)&&!!typedArrayTags[baseGetTag$4(et)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$5(et){return function(dt){return et(dt)}}var _baseUnary=baseUnary$5,_nodeUtil={exports:{}};_nodeUtil.exports;(function(et,dt){var kt=_freeGlobal,$t=dt&&!dt.nodeType&&dt,Tt=$t&&!0&&et&&!et.nodeType&&et,Dt=Tt&&Tt.exports===$t,Ft=Dt&&kt.process,Ut=function(){try{var Ht=Tt&&Tt.require&&Tt.require("util").types;return Ht||Ft&&Ft.binding&&Ft.binding("util")}catch{}}();et.exports=Ut})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$4=_baseUnary,nodeUtil$3=_nodeUtilExports,nodeIsTypedArray=nodeUtil$3&&nodeUtil$3.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$4(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3;function safeGet$2(et,dt){if(!(dt==="constructor"&&typeof et[dt]=="function")&&dt!="__proto__")return et[dt]}var _safeGet=safeGet$2,baseAssignValue$1=_baseAssignValue,eq$2=eq_1,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function assignValue$3(et,dt,kt){var $t=et[dt];(!(hasOwnProperty$6.call(et,dt)&&eq$2($t,kt))||kt===void 0&&!(dt in et))&&baseAssignValue$1(et,dt,kt)}var _assignValue=assignValue$3,assignValue$2=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$6(et,dt,kt,$t){var Tt=!kt;kt||(kt={});for(var Dt=-1,Ft=dt.length;++Dt<Ft;){var Ut=dt[Dt],Ht=$t?$t(kt[Ut],et[Ut],Ut,kt,et):void 0;Ht===void 0&&(Ht=et[Ut]),Tt?baseAssignValue(kt,Ut,Ht):assignValue$2(kt,Ut,Ht)}return kt}var _copyObject=copyObject$6;function baseTimes$1(et,dt){for(var kt=-1,$t=Array(et);++kt<et;)$t[kt]=dt(kt);return $t}var _baseTimes=baseTimes$1,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$4(et,dt){var kt=typeof et;return dt=dt??MAX_SAFE_INTEGER,!!dt&&(kt=="number"||kt!="symbol"&&reIsUint.test(et))&&et>-1&&et%1==0&&et<dt}var _isIndex=isIndex$4,baseTimes=_baseTimes,isArguments$3=isArguments_1,isArray$d=isArray_1,isBuffer$3=isBufferExports,isIndex$3=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys$2(et,dt){var kt=isArray$d(et),$t=!kt&&isArguments$3(et),Tt=!kt&&!$t&&isBuffer$3(et),Dt=!kt&&!$t&&!Tt&&isTypedArray$2(et),Ft=kt||$t||Tt||Dt,Ut=Ft?baseTimes(et.length,String):[],Ht=Ut.length;for(var Kt in et)(dt||hasOwnProperty$5.call(et,Kt))&&!(Ft&&(Kt=="length"||Tt&&(Kt=="offset"||Kt=="parent")||Dt&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||isIndex$3(Kt,Ht)))&&Ut.push(Kt);return Ut}var _arrayLikeKeys=arrayLikeKeys$2;function nativeKeysIn$1(et){var dt=[];if(et!=null)for(var kt in Object(et))dt.push(kt);return dt}var _nativeKeysIn=nativeKeysIn$1,isObject$6=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeysIn$1(et){if(!isObject$6(et))return nativeKeysIn(et);var dt=isPrototype$1(et),kt=[];for(var $t in et)$t=="constructor"&&(dt||!hasOwnProperty$4.call(et,$t))||kt.push($t);return kt}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys$1=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$4=isArrayLike_1;function keysIn$5(et){return isArrayLike$4(et)?arrayLikeKeys$1(et,!0):baseKeysIn(et)}var keysIn_1=keysIn$5,copyObject$5=_copyObject,keysIn$4=keysIn_1;function toPlainObject$1(et){return copyObject$5(et,keysIn$4(et))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer$1=_cloneBufferExports,cloneTypedArray$1=_cloneTypedArray,copyArray$1=_copyArray,initCloneObject$1=_initCloneObject,isArguments$2=isArguments_1,isArray$c=isArray_1,isArrayLikeObject$1=isArrayLikeObject_1,isBuffer$2=isBufferExports,isFunction=isFunction_1,isObject$5=isObject_1,isPlainObject$1=isPlainObject_1,isTypedArray$1=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(et,dt,kt,$t,Tt,Dt,Ft){var Ut=safeGet$1(et,kt),Ht=safeGet$1(dt,kt),Kt=Ft.get(Ht);if(Kt){assignMergeValue$1(et,kt,Kt);return}var Yt=Dt?Dt(Ut,Ht,kt+"",et,dt,Ft):void 0,Jt=Yt===void 0;if(Jt){var Zt=isArray$c(Ht),er=!Zt&&isBuffer$2(Ht),rr=!Zt&&!er&&isTypedArray$1(Ht);Yt=Ht,Zt||er||rr?isArray$c(Ut)?Yt=Ut:isArrayLikeObject$1(Ut)?Yt=copyArray$1(Ut):er?(Jt=!1,Yt=cloneBuffer$1(Ht,!0)):rr?(Jt=!1,Yt=cloneTypedArray$1(Ht,!0)):Yt=[]:isPlainObject$1(Ht)||isArguments$2(Ht)?(Yt=Ut,isArguments$2(Ut)?Yt=toPlainObject(Ut):(!isObject$5(Ut)||isFunction(Ut))&&(Yt=initCloneObject$1(Ht))):Jt=!1}Jt&&(Ft.set(Ht,Yt),Tt(Yt,Ht,$t,Dt,Ft),Ft.delete(Ht)),assignMergeValue$1(et,kt,Yt)}var _baseMergeDeep=baseMergeDeep$1,Stack$3=_Stack,assignMergeValue=_assignMergeValue,baseFor$1=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$4=isObject_1,keysIn$3=keysIn_1,safeGet=_safeGet;function baseMerge$1(et,dt,kt,$t,Tt){et!==dt&&baseFor$1(dt,function(Dt,Ft){if(Tt||(Tt=new Stack$3),isObject$4(Dt))baseMergeDeep(et,dt,Ft,kt,baseMerge$1,$t,Tt);else{var Ut=$t?$t(safeGet(et,Ft),Dt,Ft+"",et,dt,Tt):void 0;Ut===void 0&&(Ut=Dt),assignMergeValue(et,Ft,Ut)}},keysIn$3)}var _baseMerge=baseMerge$1;function identity$6(et){return et}var identity_1=identity$6;function apply$1(et,dt,kt){switch(kt.length){case 0:return et.call(dt);case 1:return et.call(dt,kt[0]);case 2:return et.call(dt,kt[0],kt[1]);case 3:return et.call(dt,kt[0],kt[1],kt[2])}return et.apply(dt,kt)}var _apply=apply$1,apply=_apply,nativeMax=Math.max;function overRest$2(et,dt,kt){return dt=nativeMax(dt===void 0?et.length-1:dt,0),function(){for(var $t=arguments,Tt=-1,Dt=nativeMax($t.length-dt,0),Ft=Array(Dt);++Tt<Dt;)Ft[Tt]=$t[dt+Tt];Tt=-1;for(var Ut=Array(dt+1);++Tt<dt;)Ut[Tt]=$t[Tt];return Ut[dt]=kt(Ft),apply(et,this,Ut)}}var _overRest=overRest$2;function constant$3(et){return function(){return et}}var constant_1=constant$3,constant$2=constant_1,defineProperty=_defineProperty,identity$5=identity_1,baseSetToString$1=defineProperty?function(et,dt){return defineProperty(et,"toString",{configurable:!0,enumerable:!1,value:constant$2(dt),writable:!0})}:identity$5,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(et){var dt=0,kt=0;return function(){var $t=nativeNow(),Tt=HOT_SPAN-($t-kt);if(kt=$t,Tt>0){if(++dt>=HOT_COUNT)return arguments[0]}else dt=0;return et.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$2=shortOut(baseSetToString),_setToString=setToString$2,identity$4=identity_1,overRest$1=_overRest,setToString$1=_setToString;function baseRest$3(et,dt){return setToString$1(overRest$1(et,dt,identity$4),et+"")}var _baseRest=baseRest$3,eq$1=eq_1,isArrayLike$3=isArrayLike_1,isIndex$2=_isIndex,isObject$3=isObject_1;function isIterateeCall$2(et,dt,kt){if(!isObject$3(kt))return!1;var $t=typeof dt;return($t=="number"?isArrayLike$3(kt)&&isIndex$2(dt,kt.length):$t=="string"&&dt in kt)?eq$1(kt[dt],et):!1}var _isIterateeCall=isIterateeCall$2,baseRest$2=_baseRest,isIterateeCall$1=_isIterateeCall;function createAssigner$1(et){return baseRest$2(function(dt,kt){var $t=-1,Tt=kt.length,Dt=Tt>1?kt[Tt-1]:void 0,Ft=Tt>2?kt[2]:void 0;for(Dt=et.length>3&&typeof Dt=="function"?(Tt--,Dt):void 0,Ft&&isIterateeCall$1(kt[0],kt[1],Ft)&&(Dt=Tt<3?void 0:Dt,Tt=1),dt=Object(dt);++$t<Tt;){var Ut=kt[$t];Ut&&et(dt,Ut,$t,Dt)}return dt})}var _createAssigner=createAssigner$1,baseMerge=_baseMerge,createAssigner=_createAssigner,merge=createAssigner(function(et,dt,kt){baseMerge(et,dt,kt)}),merge_1=merge;const i$2=getDefaultExportFromCjs(merge_1);var baseGetTag$3=_baseGetTag,isObjectLike$5=isObjectLike_1,symbolTag$3="[object Symbol]";function isSymbol$4(et){return typeof et=="symbol"||isObjectLike$5(et)&&baseGetTag$3(et)==symbolTag$3}var isSymbol_1=isSymbol$4,isArray$b=isArray_1,isSymbol$3=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(et,dt){if(isArray$b(et))return!1;var kt=typeof et;return kt=="number"||kt=="symbol"||kt=="boolean"||et==null||isSymbol$3(et)?!0:reIsPlainProp.test(et)||!reIsDeepProp.test(et)||dt!=null&&et in Object(dt)}var _isKey=isKey$3,MapCache$1=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$1(et,dt){if(typeof et!="function"||dt!=null&&typeof dt!="function")throw new TypeError(FUNC_ERROR_TEXT);var kt=function(){var $t=arguments,Tt=dt?dt.apply(this,$t):$t[0],Dt=kt.cache;if(Dt.has(Tt))return Dt.get(Tt);var Ft=et.apply(this,$t);return kt.cache=Dt.set(Tt,Ft)||Dt,Ft};return kt.cache=new(memoize$1.Cache||MapCache$1),kt}memoize$1.Cache=MapCache$1;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(et){var dt=memoize(et,function($t){return kt.size===MAX_MEMOIZE_SIZE&&kt.clear(),$t}),kt=dt.cache;return dt}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(et){var dt=[];return et.charCodeAt(0)===46&&dt.push(""),et.replace(rePropName,function(kt,$t,Tt,Dt){dt.push(Tt?Dt.replace(reEscapeChar,"$1"):$t||kt)}),dt}),_stringToPath=stringToPath$1;function arrayMap$4(et,dt){for(var kt=-1,$t=et==null?0:et.length,Tt=Array($t);++kt<$t;)Tt[kt]=dt(et[kt],kt,et);return Tt}var _arrayMap=arrayMap$4,Symbol$4=_Symbol,arrayMap$3=_arrayMap,isArray$a=isArray_1,isSymbol$2=isSymbol_1,INFINITY$2=1/0,symbolProto$2=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString$1(et){if(typeof et=="string")return et;if(isArray$a(et))return arrayMap$3(et,baseToString$1)+"";if(isSymbol$2(et))return symbolToString?symbolToString.call(et):"";var dt=et+"";return dt=="0"&&1/et==-INFINITY$2?"-0":dt}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$1(et){return et==null?"":baseToString(et)}var toString_1=toString$1,isArray$9=isArray_1,isKey$2=_isKey,stringToPath=_stringToPath,toString=toString_1;function castPath$6(et,dt){return isArray$9(et)?et:isKey$2(et,dt)?[et]:stringToPath(toString(et))}var _castPath=castPath$6,isSymbol$1=isSymbol_1,INFINITY$1=1/0;function toKey$6(et){if(typeof et=="string"||isSymbol$1(et))return et;var dt=et+"";return dt=="0"&&1/et==-INFINITY$1?"-0":dt}var _toKey=toKey$6,castPath$5=_castPath,toKey$5=_toKey;function baseGet$5(et,dt){dt=castPath$5(dt,et);for(var kt=0,$t=dt.length;et!=null&&kt<$t;)et=et[toKey$5(dt[kt++])];return kt&&kt==$t?et:void 0}var _baseGet=baseGet$5,baseGet$4=_baseGet;function get$1(et,dt,kt){var $t=et==null?void 0:baseGet$4(et,dt);return $t===void 0?kt:$t}var get_1=get$1;const ke$1=getDefaultExportFromCjs(get_1);var assignValue$1=_assignValue,castPath$4=_castPath,isIndex$1=_isIndex,isObject$2=isObject_1,toKey$4=_toKey;function baseSet$2(et,dt,kt,$t){if(!isObject$2(et))return et;dt=castPath$4(dt,et);for(var Tt=-1,Dt=dt.length,Ft=Dt-1,Ut=et;Ut!=null&&++Tt<Dt;){var Ht=toKey$4(dt[Tt]),Kt=kt;if(Ht==="__proto__"||Ht==="constructor"||Ht==="prototype")return et;if(Tt!=Ft){var Yt=Ut[Ht];Kt=$t?$t(Yt,Ht,Ut):void 0,Kt===void 0&&(Kt=isObject$2(Yt)?Yt:isIndex$1(dt[Tt+1])?[]:{})}assignValue$1(Ut,Ht,Kt),Ut=Ut[Ht]}return et}var _baseSet=baseSet$2,baseSet$1=_baseSet;function set(et,dt,kt){return et==null?et:baseSet$1(et,dt,kt)}var set_1=set;const Lr=getDefaultExportFromCjs(set_1);function u$2(){return u$2=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},u$2.apply(null,arguments)}function d$1(et,dt){if(et==null)return{};var kt={};for(var $t in et)if({}.hasOwnProperty.call(et,$t)){if(dt.indexOf($t)!==-1)continue;kt[$t]=et[$t]}return kt}var s$1=["outlineWidth","outlineColor","outlineOpacity"],b$5=function(et){return et.outlineWidth,et.outlineColor,et.outlineOpacity,d$1(et,s$1)},y$2=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],W$6=function(et,dt){return u$2({},dt,et)},O$5=function(et,dt){var kt=i$2({},et,dt);return y$2.forEach(function($t){Lr(kt,$t,W$6(ke$1(kt,$t),kt.text))}),kt},R$2=function(et,dt){return dt?i$2({},et,dt):et},C$5={background:"transparent",text:{fontFamily:"sans-serif",fontSize:11,fill:"#333333",outlineWidth:0,outlineColor:"#ffffff",outlineOpacity:1},axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}},L$5=function(et){return reactExports.useMemo(function(){return O$5(C$5,et)},[et])},w$5=function(et,dt){return reactExports.useMemo(function(){return R$2(et,dt)},[et,dt])},S$3=reactExports.createContext(null),j$5={},z$5=function(et){var dt=et.theme,kt=dt===void 0?j$5:dt,$t=et.children,Tt=L$5(kt);return jsxRuntimeExports.jsx(S$3.Provider,{value:Tt,children:$t})},M$3=function(){var et=reactExports.useContext(S$3);if(et===null)throw new Error("Unable to find the theme, did you forget to wrap your component with ThemeProvider?");return et};function v$3(){return v$3=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},v$3.apply(null,arguments)}var x=["basic","chip","container","table","tableCell","tableCellValue"],m$1={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},b$4=function(et,dt){return"translate("+et+"px, "+dt+"px)"},g$2=reactExports.memo(function(et){var dt,kt=et.position,$t=et.anchor,Tt=et.children,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=sn$1(),Yt=Kt[0],Jt=Kt[1],Zt=reactExports.useRef(!1),er=void 0,rr=!1,sr=Jt.width>0&&Jt.height>0,nr=Math.round(kt[0]),ir=Math.round(kt[1]);sr&&($t==="top"?(nr-=Jt.width/2,ir-=Jt.height+14):$t==="right"?(nr+=14,ir-=Jt.height/2):$t==="bottom"?(nr-=Jt.width/2,ir+=14):$t==="left"?(nr-=Jt.width+14,ir-=Jt.height/2):$t==="center"&&(nr-=Jt.width/2,ir-=Jt.height/2),er={transform:b$4(nr,ir)},Zt.current||(rr=!0),Zt.current=[nr,ir]);var lr=useSpring$3({to:er,config:Ht,immediate:!Ut||rr}),or=Dt.tooltip;or.basic,or.chip,or.container,or.table,or.tableCell,or.tableCellValue;var cr=function(ur,pr){if(ur==null)return{};var mr={};for(var jr in ur)if({}.hasOwnProperty.call(ur,jr)){if(pr.indexOf(jr)!==-1)continue;mr[jr]=ur[jr]}return mr}(or,x),dr=v$3({},m$1,cr,{transform:(dt=lr.transform)!=null?dt:b$4(nr,ir),opacity:lr.transform?1:0});return jsxRuntimeExports.jsx(animated$5.div,{ref:Yt,style:dr,children:Tt})});g$2.displayName="TooltipWrapper";var w$4=reactExports.memo(function(et){var dt=et.size,kt=dt===void 0?12:dt,$t=et.color,Tt=et.style;return jsxRuntimeExports.jsx("span",{style:v$3({display:"block",width:kt,height:kt,background:$t},Tt===void 0?{}:Tt)})}),T$3=reactExports.memo(function(et){var dt,kt=et.id,$t=et.value,Tt=et.format,Dt=et.enableChip,Ft=Dt!==void 0&&Dt,Ut=et.color,Ht=et.renderContent,Kt=M$3(),Yt=hn(Tt);if(typeof Ht=="function")dt=Ht();else{var Jt=$t;Yt!==void 0&&Jt!==void 0&&(Jt=Yt(Jt)),dt=jsxRuntimeExports.jsxs("div",{style:Kt.tooltip.basic,children:[Ft&&jsxRuntimeExports.jsx(w$4,{color:Ut,style:Kt.tooltip.chip}),Jt!==void 0?jsxRuntimeExports.jsxs("span",{children:[kt,": ",jsxRuntimeExports.jsx("strong",{children:""+Jt})]}):kt]})}return jsxRuntimeExports.jsx("div",{style:Kt.tooltip.container,role:"tooltip",children:dt})}),C$4={width:"100%",borderCollapse:"collapse"},E$6=reactExports.memo(function(et){var dt,kt=et.title,$t=et.rows,Tt=$t===void 0?[]:$t,Dt=et.renderContent,Ft=M$3();return Tt.length?(dt=typeof Dt=="function"?Dt():jsxRuntimeExports.jsxs("div",{children:[kt&&kt,jsxRuntimeExports.jsx("table",{style:v$3({},C$4,Ft.tooltip.table),children:jsxRuntimeExports.jsx("tbody",{children:Tt.map(function(Ut,Ht){return jsxRuntimeExports.jsx("tr",{children:Ut.map(function(Kt,Yt){return jsxRuntimeExports.jsx("td",{style:Ft.tooltip.tableCell,children:Kt},Yt)})},Ht)})})})]}),jsxRuntimeExports.jsx("div",{style:Ft.tooltip.container,children:dt})):null});E$6.displayName="TableTooltip";var P$3=reactExports.memo(function(et){var dt=et.x0,kt=et.x1,$t=et.y0,Tt=et.y1,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=reactExports.useMemo(function(){return v$3({},Dt.crosshair.line,{pointerEvents:"none"})},[Dt.crosshair.line]),Yt=useSpring$3({x1:dt,x2:kt,y1:$t,y2:Tt,config:Ht,immediate:!Ut});return jsxRuntimeExports.jsx(animated$5.line,v$3({},Yt,{fill:"none",style:Kt}))});P$3.displayName="CrosshairLine";var V$1=reactExports.memo(function(et){var dt,kt,$t=et.width,Tt=et.height,Dt=et.type,Ft=et.x,Ut=et.y;return Dt==="cross"?(dt={x0:Ft,x1:Ft,y0:0,y1:Tt},kt={x0:0,x1:$t,y0:Ut,y1:Ut}):Dt==="top-left"?(dt={x0:Ft,x1:Ft,y0:0,y1:Ut},kt={x0:0,x1:Ft,y0:Ut,y1:Ut}):Dt==="top"?dt={x0:Ft,x1:Ft,y0:0,y1:Ut}:Dt==="top-right"?(dt={x0:Ft,x1:Ft,y0:0,y1:Ut},kt={x0:Ft,x1:$t,y0:Ut,y1:Ut}):Dt==="right"?kt={x0:Ft,x1:$t,y0:Ut,y1:Ut}:Dt==="bottom-right"?(dt={x0:Ft,x1:Ft,y0:Ut,y1:Tt},kt={x0:Ft,x1:$t,y0:Ut,y1:Ut}):Dt==="bottom"?dt={x0:Ft,x1:Ft,y0:Ut,y1:Tt}:Dt==="bottom-left"?(dt={x0:Ft,x1:Ft,y0:Ut,y1:Tt},kt={x0:0,x1:Ft,y0:Ut,y1:Ut}):Dt==="left"?kt={x0:0,x1:Ft,y0:Ut,y1:Ut}:Dt==="x"?dt={x0:Ft,x1:Ft,y0:0,y1:Tt}:Dt==="y"&&(kt={x0:0,x1:$t,y0:Ut,y1:Ut}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[dt&&jsxRuntimeExports.jsx(P$3,{x0:dt.x0,x1:dt.x1,y0:dt.y0,y1:dt.y1}),kt&&jsxRuntimeExports.jsx(P$3,{x0:kt.x0,x1:kt.x1,y0:kt.y0,y1:kt.y1})]})});V$1.displayName="Crosshair";var O$4=reactExports.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),N$1={isVisible:!1,position:[null,null],content:null,anchor:null},j$4=reactExports.createContext(N$1),k$4=function(et){var dt=reactExports.useState(N$1),kt=dt[0],$t=dt[1],Tt=reactExports.useCallback(function(Ut,Ht,Kt){var Yt=Ht[0],Jt=Ht[1];Kt===void 0&&(Kt="top"),$t({isVisible:!0,position:[Yt,Jt],anchor:Kt,content:Ut})},[$t]),Dt=reactExports.useCallback(function(Ut,Ht,Kt){Kt===void 0&&(Kt="top");var Yt=et.current.getBoundingClientRect(),Jt=et.current.offsetWidth,Zt=Jt===Yt.width?1:Jt/Yt.width,er="touches"in Ht?Ht.touches[0]:Ht,rr=er.clientX,sr=er.clientY,nr=(rr-Yt.left)*Zt,ir=(sr-Yt.top)*Zt;Kt!=="left"&&Kt!=="right"||(Kt=nr<Yt.width/2?"right":"left"),$t({isVisible:!0,position:[nr,ir],anchor:Kt,content:Ut})},[et,$t]),Ft=reactExports.useCallback(function(){$t(N$1)},[$t]);return{actions:reactExports.useMemo(function(){return{showTooltipAt:Tt,showTooltipFromEvent:Dt,hideTooltip:Ft}},[Tt,Dt,Ft]),state:kt}},z$4=function(){var et=reactExports.useContext(O$4);if(et===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return et},A$5=function(){var et=reactExports.useContext(j$4);if(et===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return et},F$1=function(et){return et.isVisible},M$2=function(){var et=A$5();return F$1(et)?jsxRuntimeExports.jsx(g$2,{position:et.position,anchor:et.anchor,children:et.content}):null},W$5=function(et){var dt=et.container,kt=et.children,$t=k$4(dt),Tt=$t.actions,Dt=$t.state;return jsxRuntimeExports.jsx(O$4.Provider,{value:Tt,children:jsxRuntimeExports.jsx(j$4.Provider,{value:Dt,children:kt})})},baseGetTag$2=_baseGetTag,isArray$8=isArray_1,isObjectLike$4=isObjectLike_1,stringTag$3="[object String]";function isString(et){return typeof et=="string"||!isArray$8(et)&&isObjectLike$4(et)&&baseGetTag$2(et)==stringTag$3}var isString_1=isString;const _$3=getDefaultExportFromCjs(isString_1);var updateQueue$4=makeQueue$4(),raf$4=et=>schedule$4(et,updateQueue$4),writeQueue$4=makeQueue$4();raf$4.write=et=>schedule$4(et,writeQueue$4);var onStartQueue$4=makeQueue$4();raf$4.onStart=et=>schedule$4(et,onStartQueue$4);var onFrameQueue$4=makeQueue$4();raf$4.onFrame=et=>schedule$4(et,onFrameQueue$4);var onFinishQueue$4=makeQueue$4();raf$4.onFinish=et=>schedule$4(et,onFinishQueue$4);var timeouts$4=[];raf$4.setTimeout=(et,dt)=>{const kt=raf$4.now()+dt,$t=()=>{const Dt=timeouts$4.findIndex(Ft=>Ft.cancel==$t);~Dt&&timeouts$4.splice(Dt,1),pendingCount$4-=~Dt?1:0},Tt={time:kt,handler:et,cancel:$t};return timeouts$4.splice(findTimeout$4(kt),0,Tt),pendingCount$4+=1,start$4(),Tt};var findTimeout$4=et=>~(~timeouts$4.findIndex(dt=>dt.time>et)||~timeouts$4.length);raf$4.cancel=et=>{onStartQueue$4.delete(et),onFrameQueue$4.delete(et),onFinishQueue$4.delete(et),updateQueue$4.delete(et),writeQueue$4.delete(et)};raf$4.sync=et=>{sync$4=!0,raf$4.batchedUpdates(et),sync$4=!1};raf$4.throttle=et=>{let dt;function kt(){try{et(...dt)}finally{dt=null}}function $t(...Tt){dt=Tt,raf$4.onStart(kt)}return $t.handler=et,$t.cancel=()=>{onStartQueue$4.delete(kt),dt=null},$t};var nativeRaf$4=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$4.use=et=>nativeRaf$4=et;raf$4.now=typeof performance<"u"?()=>performance.now():Date.now;raf$4.batchedUpdates=et=>et();raf$4.catch=console.error;raf$4.frameLoop="always";raf$4.advance=()=>{raf$4.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$4()};var ts$4=-1,pendingCount$4=0,sync$4=!1;function schedule$4(et,dt){sync$4?(dt.delete(et),et(0)):(dt.add(et),start$4())}function start$4(){ts$4<0&&(ts$4=0,raf$4.frameLoop!=="demand"&&nativeRaf$4(loop$4))}function stop$4(){ts$4=-1}function loop$4(){~ts$4&&(nativeRaf$4(loop$4),raf$4.batchedUpdates(update$4))}function update$4(){const et=ts$4;ts$4=raf$4.now();const dt=findTimeout$4(ts$4);if(dt&&(eachSafely$4(timeouts$4.splice(0,dt),kt=>kt.handler()),pendingCount$4-=dt),!pendingCount$4){stop$4();return}onStartQueue$4.flush(),updateQueue$4.flush(et?Math.min(64,ts$4-et):16.667),onFrameQueue$4.flush(),writeQueue$4.flush(),onFinishQueue$4.flush()}function makeQueue$4(){let et=new Set,dt=et;return{add(kt){pendingCount$4+=dt==et&&!et.has(kt)?1:0,et.add(kt)},delete(kt){return pendingCount$4-=dt==et&&et.has(kt)?1:0,et.delete(kt)},flush(kt){dt.size&&(et=new Set,pendingCount$4-=dt.size,eachSafely$4(dt,$t=>$t(kt)&&et.add($t)),pendingCount$4+=et.size,dt=et)}}}function eachSafely$4(et,dt){et.forEach(kt=>{try{dt(kt)}catch($t){raf$4.catch($t)}})}var __defProp$4=Object.defineProperty,__export$4=(et,dt)=>{for(var kt in dt)__defProp$4(et,kt,{get:dt[kt],enumerable:!0})},globals_exports$4={};__export$4(globals_exports$4,{assign:()=>assign$4,colors:()=>colors$5,createStringInterpolator:()=>createStringInterpolator$4,skipAnimation:()=>skipAnimation$4,to:()=>to$6,willAdvance:()=>willAdvance$4});function noop$7(){}var defineHidden$4=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),is$4={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$5(et,dt){if(is$4.arr(et)){if(!is$4.arr(dt)||et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}return et===dt}var each$4=(et,dt)=>et.forEach(dt);function eachProp$4(et,dt,kt){if(is$4.arr(et)){for(let $t=0;$t<et.length;$t++)dt.call(kt,et[$t],`${$t}`);return}for(const $t in et)et.hasOwnProperty($t)&&dt.call(kt,et[$t],$t)}var toArray$4=et=>is$4.und(et)?[]:is$4.arr(et)?et:[et];function flush$3(et,dt){if(et.size){const kt=Array.from(et);et.clear(),each$4(kt,dt)}}var flushCalls$3=(et,...dt)=>flush$3(et,kt=>kt(...dt)),isSSR$4=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$4,to$6,colors$5=null,skipAnimation$4=!1,willAdvance$4=noop$7,assign$4=et=>{et.to&&(to$6=et.to),et.now&&(raf$4.now=et.now),et.colors!==void 0&&(colors$5=et.colors),et.skipAnimation!=null&&(skipAnimation$4=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$4=et.createStringInterpolator),et.requestAnimationFrame&&raf$4.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$4.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$4=et.willAdvance),et.frameLoop&&(raf$4.frameLoop=et.frameLoop)},startQueue$4=new Set,currentFrame$4=[],prevFrame$4=[],priority$4=0,frameLoop$4={get idle(){return!startQueue$4.size&&!currentFrame$4.length},start(et){priority$4>et.priority?(startQueue$4.add(et),raf$4.onStart(flushStartQueue$4)):(startSafely$4(et),raf$4(advance$4))},advance:advance$4,sort(et){if(priority$4)raf$4.onFrame(()=>frameLoop$4.sort(et));else{const dt=currentFrame$4.indexOf(et);~dt&&(currentFrame$4.splice(dt,1),startUnsafely$4(et))}},clear(){currentFrame$4=[],startQueue$4.clear()}};function flushStartQueue$4(){startQueue$4.forEach(startSafely$4),startQueue$4.clear(),raf$4(advance$4)}function startSafely$4(et){currentFrame$4.includes(et)||startUnsafely$4(et)}function startUnsafely$4(et){currentFrame$4.splice(findIndex$4(currentFrame$4,dt=>dt.priority>et.priority),0,et)}function advance$4(et){const dt=prevFrame$4;for(let kt=0;kt<currentFrame$4.length;kt++){const $t=currentFrame$4[kt];priority$4=$t.priority,$t.idle||(willAdvance$4($t),$t.advance(et),$t.idle||dt.push($t))}return priority$4=0,prevFrame$4=currentFrame$4,prevFrame$4.length=0,currentFrame$4=dt,currentFrame$4.length>0}function findIndex$4(et,dt){const kt=et.findIndex(dt);return kt<0?et.length:kt}var clamp$3=(et,dt,kt)=>Math.min(Math.max(kt,et),dt),colors2$4={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$4="[-+]?\\d*\\.?\\d+",PERCENTAGE$4=NUMBER$4+"%";function call$4(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$6=new RegExp("rgb"+call$4(NUMBER$4,NUMBER$4,NUMBER$4)),rgba$5=new RegExp("rgba"+call$4(NUMBER$4,NUMBER$4,NUMBER$4,NUMBER$4)),hsl$5=new RegExp("hsl"+call$4(NUMBER$4,PERCENTAGE$4,PERCENTAGE$4)),hsla$5=new RegExp("hsla"+call$4(NUMBER$4,PERCENTAGE$4,PERCENTAGE$4,NUMBER$4)),hex3$4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$4=/^#([0-9a-fA-F]{6})$/,hex8$4=/^#([0-9a-fA-F]{8})$/;function normalizeColor$4(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$4.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$5&&colors$5[et]!==void 0?colors$5[et]:(dt=rgb$6.exec(et))?(parse255$4(dt[1])<<24|parse255$4(dt[2])<<16|parse255$4(dt[3])<<8|255)>>>0:(dt=rgba$5.exec(et))?(parse255$4(dt[1])<<24|parse255$4(dt[2])<<16|parse255$4(dt[3])<<8|parse1$4(dt[4]))>>>0:(dt=hex3$4.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$4.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$4.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$5.exec(et))?(hslToRgb$4(parse360$4(dt[1]),parsePercentage$4(dt[2]),parsePercentage$4(dt[3]))|255)>>>0:(dt=hsla$5.exec(et))?(hslToRgb$4(parse360$4(dt[1]),parsePercentage$4(dt[2]),parsePercentage$4(dt[3]))|parse1$4(dt[4]))>>>0:null}function hue2rgb$4(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb$4(et,dt,kt){const $t=kt<.5?kt*(1+dt):kt+dt-kt*dt,Tt=2*kt-$t,Dt=hue2rgb$4(Tt,$t,et+1/3),Ft=hue2rgb$4(Tt,$t,et),Ut=hue2rgb$4(Tt,$t,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$4(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$4(et){return(parseFloat(et)%360+360)%360/360}function parse1$4(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$4(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$4(et){let dt=normalizeColor$4(et);if(dt===null)return et;dt=dt||0;const kt=(dt&4278190080)>>>24,$t=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${kt}, ${$t}, ${Tt}, ${Dt})`}var createInterpolator$4=(et,dt,kt)=>{if(is$4.fun(et))return et;if(is$4.arr(et))return createInterpolator$4({range:et,output:dt,extrapolate:kt});if(is$4.str(et.output[0]))return createStringInterpolator$4(et);const $t=et,Tt=$t.output,Dt=$t.range||[0,1],Ft=$t.extrapolateLeft||$t.extrapolate||"extend",Ut=$t.extrapolateRight||$t.extrapolate||"extend",Ht=$t.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$4(Kt,Dt);return interpolate$5(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,$t.map)}};function interpolate$5(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>kt){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=kt)}return $t===Tt?$t:dt===kt?et<=dt?$t:Tt:(dt===-1/0?Kt=-Kt:kt===1/0?Kt=Kt-dt:Kt=(Kt-dt)/(kt-dt),Kt=Dt(Kt),$t===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+$t:Kt=Kt*(Tt-$t)+$t,Kt)}function findRange$4(et,dt){for(var kt=1;kt<dt.length-1&&!(dt[kt]>=et);++kt);return kt-1}var steps$3=(et,dt="end")=>kt=>{kt=dt==="end"?Math.min(kt,.999):Math.max(kt,.001);const $t=kt*et,Tt=dt==="end"?Math.floor($t):Math.ceil($t);return clamp$3(0,1,Tt/et)},c1$3=1.70158,c2$3=c1$3*1.525,c3$3=c1$3+1,c4$3=2*Math.PI/3,c5$3=2*Math.PI/4.5,bounceOut$3=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$3={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$3*et*et*et-c1$3*et*et,easeOutBack:et=>1+c3$3*Math.pow(et-1,3)+c1$3*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$3+1)*2*et-c2$3)/2:(Math.pow(2*et-2,2)*((c2$3+1)*(et*2-2)+c2$3)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$3),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$3)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$3))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$3)/2+1,easeInBounce:et=>1-bounceOut$3(1-et),easeOutBounce:bounceOut$3,easeInOutBounce:et=>et<.5?(1-bounceOut$3(1-2*et))/2:(1+bounceOut$3(2*et-1))/2,steps:steps$3},$get$4=Symbol.for("FluidValue.get"),$observers$4=Symbol.for("FluidValue.observers"),hasFluidValue$4=et=>!!(et&&et[$get$4]),getFluidValue$4=et=>et&&et[$get$4]?et[$get$4]():et,getFluidObservers$3=et=>et[$observers$4]||null;function callFluidObserver$4(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$4(et,dt){const kt=et[$observers$4];kt&&kt.forEach($t=>{callFluidObserver$4($t,dt)})}var FluidValue$4=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$4(this,dt)}},setFluidGetter$4=(et,dt)=>setHidden$4(et,$get$4,dt);function addFluidObserver$4(et,dt){if(et[$get$4]){let kt=et[$observers$4];kt||setHidden$4(et,$observers$4,kt=new Set),kt.has(dt)||(kt.add(dt),et.observerAdded&&et.observerAdded(kt.size,dt))}return dt}function removeFluidObserver$4(et,dt){const kt=et[$observers$4];if(kt&&kt.has(dt)){const $t=kt.size-1;$t?kt.delete(dt):et[$observers$4]=null,et.observerRemoved&&et.observerRemoved($t,dt)}}var setHidden$4=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),numberRegex$4=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$4=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$4=new RegExp(`(${numberRegex$4.source})(%|[a-z]+)`,"i"),rgbaRegex$4=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$4=et=>{const[dt,kt]=parseCSSVariable$4(et);if(!dt||isSSR$4())return et;const $t=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if($t)return $t.trim();if(kt&&kt.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue(kt);return Tt||et}else{if(kt&&cssVariableRegex$4.test(kt))return variableToRgba$4(kt);if(kt)return kt}return et},parseCSSVariable$4=et=>{const dt=cssVariableRegex$4.exec(et);if(!dt)return[,];const[,kt,$t]=dt;return[kt,$t]},namedColorRegex$4,rgbaRound$4=(et,dt,kt,$t,Tt)=>`rgba(${Math.round(dt)}, ${Math.round(kt)}, ${Math.round($t)}, ${Tt})`,createStringInterpolator2$4=et=>{namedColorRegex$4||(namedColorRegex$4=colors$5?new RegExp(`(${Object.keys(colors$5).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$4(Dt).replace(cssVariableRegex$4,variableToRgba$4).replace(colorRegex$4,colorToRgba$4).replace(namedColorRegex$4,colorToRgba$4)),kt=dt.map(Dt=>Dt.match(numberRegex$4).map(Number)),Tt=kt[0].map((Dt,Ft)=>kt.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$4({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$4.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$4.test(Kt)))==null?void 0:Ht.replace(numberRegex$4,""));let Ut=0;return dt[0].replace(numberRegex$4,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$4,rgbaRound$4)}},prefix$4="react-spring: ",once$4=et=>{const dt=et;let kt=!1;if(typeof dt!="function")throw new TypeError(`${prefix$4}once requires a function parameter`);return(...$t)=>{kt||(dt(...$t),kt=!0)}},warnInterpolate$4=once$4(console.warn);function deprecateInterpolate$4(){warnInterpolate$4(`${prefix$4}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$3=once$4(console.warn);function deprecateDirectCall$3(){warnDirectCall$3(`${prefix$4}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$4(et){return is$4.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$4()&&cssVariableRegex$4.test(et)||et in(colors$5||{}))}var useIsomorphicLayoutEffect$4=isSSR$4()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$4=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$4(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$4(){const et=reactExports.useState()[1],dt=useIsMounted$4();return()=>{dt.current&&et(Math.random())}}var useOnce$4=et=>reactExports.useEffect(et,emptyDeps$4),emptyDeps$4=[];function usePrev$3(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$4=Symbol.for("Animated:node"),isAnimated$4=et=>!!et&&et[$node$4]===et,getAnimated$4=et=>et&&et[$node$4],setAnimated$4=(et,dt)=>defineHidden$4(et,$node$4,dt),getPayload$4=et=>et&&et[$node$4]&&et[$node$4].getPayload(),Animated$4=class{constructor(){setAnimated$4(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$4=class G_ extends Animated$4{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$4.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new G_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,kt){return is$4.num(dt)&&(this.lastPosition=dt,kt&&(dt=Math.round(dt/kt)*kt,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$4.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$4=class W_ extends AnimatedValue$4{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$4({output:[dt,dt]})}static create(dt){return new W_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$4.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$4({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$4={dependencies:null},AnimatedObject$4=class extends Animated$4{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const kt={};return eachProp$4(this.source,($t,Tt)=>{isAnimated$4($t)?kt[Tt]=$t.getValue(dt):hasFluidValue$4($t)?kt[Tt]=getFluidValue$4($t):dt||(kt[Tt]=$t)}),kt}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$4(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const kt=new Set;return eachProp$4(dt,this._addToPayload,kt),Array.from(kt)}}_addToPayload(dt){TreeContext$4.dependencies&&hasFluidValue$4(dt)&&TreeContext$4.dependencies.add(dt);const kt=getPayload$4(dt);kt&&each$4(kt,$t=>this.add($t))}},AnimatedArray$4=class q_ extends AnimatedObject$4{constructor(dt){super(dt)}static create(dt){return new q_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const kt=this.getPayload();return dt.length==kt.length?kt.map(($t,Tt)=>$t.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$4)),!0)}};function makeAnimated$4(et){return(isAnimatedString$4(et)?AnimatedString$4:AnimatedValue$4).create(et)}function getAnimatedType$4(et){const dt=getAnimated$4(et);return dt?dt.constructor:is$4.arr(et)?AnimatedArray$4:isAnimatedString$4(et)?AnimatedString$4:AnimatedValue$4}var withAnimated$4=(et,dt)=>{const kt=!is$4.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef(($t,Tt)=>{const Dt=reactExports.useRef(null),Ft=kt&&reactExports.useCallback(rr=>{Dt.current=updateRef$4(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$4($t,dt),Kt=useForceUpdate$4(),Yt=()=>{const rr=Dt.current;if(kt&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$4(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$4(()=>(Zt.current=Jt,each$4(Ht,rr=>addFluidObserver$4(rr,Jt)),()=>{Zt.current&&(each$4(Zt.current.deps,rr=>removeFluidObserver$4(rr,Zt.current)),raf$4.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$4(()=>()=>{const rr=Zt.current;each$4(rr.deps,sr=>removeFluidObserver$4(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$4=class{constructor(dt,kt){this.update=dt,this.deps=kt}eventObserved(dt){dt.type=="change"&&raf$4.write(this.update)}};function getAnimatedState$4(et,dt){const kt=new Set;return TreeContext$4.dependencies=kt,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$4(et),TreeContext$4.dependencies=null,[et,kt]}function updateRef$4(et,dt){return et&&(is$4.fun(et)?et(dt):et.current=dt),dt}var cacheKey$4=Symbol.for("AnimatedComponent"),createHost$4=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:kt=Tt=>new AnimatedObject$4(Tt),getComponentProps:$t=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:kt,getComponentProps:$t},Dt=Ft=>{const Ut=getDisplayName$4(Ft)||"Anonymous";return is$4.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$4(Ft,Tt)):Ft=Ft[cacheKey$4]||(Ft[cacheKey$4]=withAnimated$4(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$4(et,(Ft,Ut)=>{is$4.arr(et)&&(Ut=getDisplayName$4(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$4=et=>is$4.str(et)?et:et&&is$4.str(et.displayName)?et.displayName:is$4.fun(et)&&et.name||null;function callProp$3(et,...dt){return is$4.fun(et)?et(...dt):et}var matchProp$3=(et,dt)=>et===!0||!!(dt&&et&&(is$4.fun(et)?et(dt):toArray$4(et).includes(dt))),resolveProp$3=(et,dt)=>is$4.obj(et)?dt&&et[dt]:et,getDefaultProp$3=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$3=et=>et,getDefaultProps$3=(et,dt=noopTransform$3)=>{let kt=DEFAULT_PROPS$3;et.default&&et.default!==!0&&(et=et.default,kt=Object.keys(et));const $t={};for(const Tt of kt){const Dt=dt(et[Tt],Tt);is$4.und(Dt)||($t[Tt]=Dt)}return $t},DEFAULT_PROPS$3=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$3={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$3(et){const dt={};let kt=0;if(eachProp$4(et,($t,Tt)=>{RESERVED_PROPS$3[Tt]||(dt[Tt]=$t,kt++)}),kt)return dt}function inferTo$3(et){const dt=getForwardProps$3(et);if(dt){const kt={to:dt};return eachProp$4(et,($t,Tt)=>Tt in dt||(kt[Tt]=$t)),kt}return{...et}}function computeGoal$3(et){return et=getFluidValue$4(et),is$4.arr(et)?et.map(computeGoal$3):isAnimatedString$4(et)?globals_exports$4.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$3(et){for(const dt in et)return!0;return!1}function isAsyncTo$3(et){return is$4.fun(et)||is$4.arr(et)&&is$4.obj(et[0])}function detachRefs$3(et,dt){var kt;(kt=et.ref)==null||kt.delete(et),dt==null||dt.delete(et)}function replaceRef$3(et,dt){var kt;dt&&et.ref!==dt&&((kt=et.ref)==null||kt.delete(et),dt.add(et),et.ref=dt)}var config$3={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$3={...config$3.default,mass:1,damping:1,easing:easings$3.linear,clamp:!1},AnimationConfig$3=class{constructor(){this.velocity=0,Object.assign(this,defaults$3)}};function mergeConfig$3(et,dt,kt){kt&&(kt={...kt},sanitizeConfig$3(kt,dt),dt={...kt,...dt}),sanitizeConfig$3(et,dt),Object.assign(et,dt);for(const Ft in defaults$3)et[Ft]==null&&(et[Ft]=defaults$3[Ft]);let{frequency:$t,damping:Tt}=et;const{mass:Dt}=et;return is$4.und($t)||($t<.01&&($t=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/$t,2)*Dt,et.friction=4*Math.PI*Tt*Dt/$t),et}function sanitizeConfig$3(et,dt){if(!is$4.und(dt.decay))et.duration=void 0;else{const kt=!is$4.und(dt.tension)||!is$4.und(dt.friction);(kt||!is$4.und(dt.frequency)||!is$4.und(dt.damping)||!is$4.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),kt&&(et.frequency=void 0)}}var emptyArray$3=[],Animation$3=class{constructor(){this.changed=!1,this.values=emptyArray$3,this.toValues=null,this.fromValues=emptyArray$3,this.config=new AnimationConfig$3,this.immediate=!1}};function scheduleProps$3(et,{key:dt,props:kt,defaultProps:$t,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$3(kt.cancel??($t==null?void 0:$t.cancel),dt);if(Yt)er();else{is$4.und(kt.pause)||(Tt.paused=matchProp$3(kt.pause,dt));let rr=$t==null?void 0:$t.pause;rr!==!0&&(rr=Tt.paused||matchProp$3(rr,dt)),Ht=callProp$3(kt.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$4.now()}function Zt(){Ht>0&&!globals_exports$4.skipAnimation?(Tt.delayed=!0,Kt=raf$4.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...kt,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$3=(et,dt)=>dt.length==1?dt[0]:dt.some(kt=>kt.cancelled)?getCancelledResult$3(et.get()):dt.every(kt=>kt.noop)?getNoopResult$3(et.get()):getFinishedResult$3(et.get(),dt.every(kt=>kt.finished)),getNoopResult$3=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$3=(et,dt,kt=!1)=>({value:et,finished:dt,cancelled:kt}),getCancelledResult$3=et=>({value:et,cancelled:!0,finished:!1});function runAsync$3(et,dt,kt,$t){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=kt;return!Dt&&et===Ut&&!dt.reset?Ht:kt.promise=(async()=>{kt.asyncId=Tt,kt.asyncTo=et;const Kt=getDefaultProps$3(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=(kt.cancelId||0)&&getCancelledResult$3($t)||Tt!==kt.asyncId&&getFinishedResult$3($t,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const lr=new BailSignal$3,or=new SkipAnimationSignal$3;return(async()=>{if(globals_exports$4.skipAnimation)throw stopAsync$3(kt),or.result=getFinishedResult$3($t,!1),Jt(or),or;er(lr);const cr=is$4.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$4(Kt,(ur,pr)=>{is$4.und(cr[pr])&&(cr[pr]=ur)});const dr=await $t.start(cr);return er(lr),kt.paused&&await new Promise(ur=>{kt.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$4.skipAnimation)return stopAsync$3(kt),getFinishedResult$3($t,!1);try{let nr;is$4.arr(et)?nr=(async ir=>{for(const lr of ir)await rr(lr)})(et):nr=Promise.resolve(et(rr,$t.stop.bind($t))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$3($t.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$3)sr=nr.result;else if(nr instanceof SkipAnimationSignal$3)sr=nr.result;else throw nr}finally{Tt==kt.asyncId&&(kt.asyncId=Dt,kt.asyncTo=Dt?Ut:void 0,kt.promise=Dt?Ht:void 0)}return is$4.fun(Ft)&&raf$4.batchedUpdates(()=>{Ft(sr,$t,$t.item)}),sr})()}function stopAsync$3(et,dt){flush$3(et.timeouts,kt=>kt.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$3=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$3=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$4=et=>et instanceof FrameValue$4,nextId$4=1,FrameValue$4=class extends FluidValue$4{constructor(){super(...arguments),this.id=nextId$4++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$4(this);return dt&&dt.getValue()}to(...dt){return globals_exports$4.to(this,dt)}interpolate(...dt){return deprecateInterpolate$4(),globals_exports$4.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,kt=!1){callFluidObservers$4(this,{type:"change",parent:this,value:dt,idle:kt})}_onPriorityChange(dt){this.idle||frameLoop$4.sort(this),callFluidObservers$4(this,{type:"priority",parent:this,priority:dt})}},$P$3=Symbol.for("SpringPhase"),HAS_ANIMATED$3=1,IS_ANIMATING$3=2,IS_PAUSED$3=4,hasAnimated$3=et=>(et[$P$3]&HAS_ANIMATED$3)>0,isAnimating$3=et=>(et[$P$3]&IS_ANIMATING$3)>0,isPaused$3=et=>(et[$P$3]&IS_PAUSED$3)>0,setActiveBit$3=(et,dt)=>dt?et[$P$3]|=IS_ANIMATING$3|HAS_ANIMATED$3:et[$P$3]&=~IS_ANIMATING$3,setPausedBit$3=(et,dt)=>dt?et[$P$3]|=IS_PAUSED$3:et[$P$3]&=~IS_PAUSED$3,SpringValue$3=class extends FrameValue$4{constructor(dt,kt){if(super(),this.animation=new Animation$3,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$4.und(dt)||!is$4.und(kt)){const $t=is$4.obj(dt)?{...dt}:{...kt,from:dt};is$4.und($t.default)&&($t.default=!0),this.start($t)}}get idle(){return!(isAnimating$3(this)||this._state.asyncTo)||isPaused$3(this)}get goal(){return getFluidValue$4(this.animation.to)}get velocity(){const dt=getAnimated$4(this);return dt instanceof AnimatedValue$4?dt.lastVelocity||0:dt.getPayload().map(kt=>kt.lastVelocity||0)}get hasAnimated(){return hasAnimated$3(this)}get isAnimating(){return isAnimating$3(this)}get isPaused(){return isPaused$3(this)}get isDelayed(){return this._state.delayed}advance(dt){let kt=!0,$t=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$4(Tt.to);!Ut&&hasFluidValue$4(Tt.to)&&(Dt=toArray$4(getFluidValue$4(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$4?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$4.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let lr;const or=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$4.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=or,lr=ir*dr}else{lr=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||or/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$4.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,br=Math.ceil(dt/Rr);for(let _r=0;_r<br&&(mr=Math.abs(lr)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=or,er)));++_r){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(lr=-lr*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Pr=-Ft.friction*.001*lr,Or=(Mr+Pr)/Ft.mass;lr=lr+Or*Rr,rr=rr+lr*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),lr=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=lr,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:kt=!1,Yt.setValue(rr,Ft.round)&&($t=!0)});const Ht=getAnimated$4(this),Kt=Ht.getValue();if(kt){const Yt=getFluidValue$4(Tt.to);(Kt!==Yt||$t)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):$t&&Ft.decay&&this._onChange(Kt),this._stop()}else $t&&this._onChange(Kt)}set(dt){return raf$4.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$3(this)){const{to:dt,config:kt}=this.animation;raf$4.batchedUpdates(()=>{this._onStart(),kt.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,kt){let $t;return is$4.und(dt)?($t=this.queue||[],this.queue=[]):$t=[is$4.obj(dt)?dt:{...kt,to:dt}],Promise.all($t.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$3(this,Tt))}stop(dt){const{to:kt}=this.animation;return this._focus(this.get()),stopAsync$3(this._state,dt&&this._lastCallId),raf$4.batchedUpdates(()=>this._stop(kt,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const kt=this.key||"";let{to:$t,from:Tt}=dt;$t=is$4.obj($t)?$t[kt]:$t,($t==null||isAsyncTo$3($t))&&($t=void 0),Tt=is$4.obj(Tt)?Tt[kt]:Tt,Tt==null&&(Tt=void 0);const Dt={to:$t,from:Tt};return hasAnimated$3(this)||(dt.reverse&&([$t,Tt]=[Tt,$t]),Tt=getFluidValue$4(Tt),is$4.und(Tt)?getAnimated$4(this)||this._set($t):this._set(Tt)),Dt}_update({...dt},kt){const{key:$t,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$3(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$3(Ut,$t):Ut)),mergeActiveFn$3(this,dt,"onProps"),sendEvent$3(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$3(++this._lastCallId,{key:$t,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$3(this)||(setPausedBit$3(this,!0),flushCalls$3(Ft.pauseQueue),sendEvent$3(this,"onPause",getFinishedResult$3(this,checkFinished$3(this,this.animation.to)),this))},resume:()=>{isPaused$3(this)&&(setPausedBit$3(this,!1),isAnimating$3(this)&&this._resume(),flushCalls$3(Ft.resumeQueue),sendEvent$3(this,"onResume",getFinishedResult$3(this,checkFinished$3(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!(kt&&Ut.noop)){const Ht=createLoopUpdate$3(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,kt,$t){if(kt.cancel)return this.stop(!0),$t(getCancelledResult$3(this));const Tt=!is$4.und(dt.to),Dt=!is$4.und(dt.from);if(Tt||Dt)if(kt.callId>this._lastToId)this._lastToId=kt.callId;else return $t(getCancelledResult$3(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!kt.default||is$4.und(Jt))&&(Jt=Zt),kt.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$5(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$4(Zt);const rr=!isEqual$5(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$3(kt.to),{config:nr}=Ht,{decay:ir,velocity:lr}=nr;(Tt||Dt)&&(nr.velocity=0),kt.config&&!sr&&mergeConfig$3(nr,callProp$3(kt.config,Ft),kt.config!==Ut.config?callProp$3(Ut.config,Ft):void 0);let or=getAnimated$4(this);if(!or||is$4.und(Jt))return $t(getFinishedResult$3(this,!0));const cr=is$4.und(kt.reset)?Dt&&!kt.default:!is$4.und(Zt)&&matchProp$3(kt.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$3(Jt),pr=is$4.num(ur)||is$4.arr(ur)||isAnimatedString$4(ur),mr=!sr&&(!pr||matchProp$3(Ut.immediate||kt.immediate,Ft));if(rr){const _r=getAnimatedType$4(Jt);if(_r!==or.constructor)if(mr)or=this._set(ur);else throw Error(`Cannot animate between ${or.constructor.name} and ${_r.name}, as the "to" prop suggests`)}const jr=or.constructor;let Rr=hasFluidValue$4(Jt),br=!1;if(!Rr){const _r=cr||!hasAnimated$3(this)&&er;(rr||_r)&&(br=isEqual$5(computeGoal$3(dr),ur),Rr=!br),(!isEqual$5(Ht.immediate,mr)&&!mr||!isEqual$5(nr.decay,ir)||!isEqual$5(nr.velocity,lr))&&(Rr=!0)}if(br&&isAnimating$3(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$4(Kt))&&(Ht.values=or.getPayload(),Ht.toValues=hasFluidValue$4(Jt)?null:jr==AnimatedString$4?[1]:toArray$4(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:_r}=Ht;each$4(ACTIVE_EVENTS$3,Pr=>mergeActiveFn$3(this,kt,Pr));const Mr=getFinishedResult$3(this,checkFinished$3(this,Kt));flushCalls$3(this._pendingCalls,Mr),this._pendingCalls.add($t),Ht.changed&&raf$4.batchedUpdates(()=>{var Pr;Ht.changed=!cr,_r==null||_r(Mr,this),cr?callProp$3(Ut.onRest,Mr):(Pr=Ht.onStart)==null||Pr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?$t(runAsync$3(kt.to,kt,this._state,this)):Rr?this._start():isAnimating$3(this)&&!rr?this._pendingCalls.add($t):$t(getNoopResult$3(dr))}_focus(dt){const kt=this.animation;dt!==kt.to&&(getFluidObservers$3(this)&&this._detach(),kt.to=dt,getFluidObservers$3(this)&&this._attach())}_attach(){let dt=0;const{to:kt}=this.animation;hasFluidValue$4(kt)&&(addFluidObserver$4(kt,this),isFrameValue$4(kt)&&(dt=kt.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$4(dt)&&removeFluidObserver$4(dt,this)}_set(dt,kt=!0){const $t=getFluidValue$4(dt);if(!is$4.und($t)){const Tt=getAnimated$4(this);if(!Tt||!isEqual$5($t,Tt.getValue())){const Dt=getAnimatedType$4($t);!Tt||Tt.constructor!=Dt?setAnimated$4(this,Dt.create($t)):Tt.setValue($t),Tt&&raf$4.batchedUpdates(()=>{this._onChange($t,kt)})}}return getAnimated$4(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$3(this,"onStart",getFinishedResult$3(this,checkFinished$3(this,dt.to)),this))}_onChange(dt,kt){kt||(this._onStart(),callProp$3(this.animation.onChange,dt,this)),callProp$3(this.defaultProps.onChange,dt,this),super._onChange(dt,kt)}_start(){const dt=this.animation;getAnimated$4(this).reset(getFluidValue$4(dt.to)),dt.immediate||(dt.fromValues=dt.values.map(kt=>kt.lastPosition)),isAnimating$3(this)||(setActiveBit$3(this,!0),isPaused$3(this)||this._resume())}_resume(){globals_exports$4.skipAnimation?this.finish():frameLoop$4.start(this)}_stop(dt,kt){if(isAnimating$3(this)){setActiveBit$3(this,!1);const $t=this.animation;each$4($t.values,Dt=>{Dt.done=!0}),$t.toValues&&($t.onChange=$t.onPause=$t.onResume=void 0),callFluidObservers$4(this,{type:"idle",parent:this});const Tt=kt?getCancelledResult$3(this.get()):getFinishedResult$3(this.get(),checkFinished$3(this,dt??$t.to));flushCalls$3(this._pendingCalls,Tt),$t.changed&&($t.changed=!1,sendEvent$3(this,"onRest",Tt,this))}}};function checkFinished$3(et,dt){const kt=computeGoal$3(dt),$t=computeGoal$3(et.get());return isEqual$5($t,kt)}function createLoopUpdate$3(et,dt=et.loop,kt=et.to){const $t=callProp$3(dt);if($t){const Tt=$t!==!0&&inferTo$3($t),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$3({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$3(kt)?kt:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$3(et){const{to:dt,from:kt}=et=inferTo$3(et),$t=new Set;return is$4.obj(dt)&&findDefined$3(dt,$t),is$4.obj(kt)&&findDefined$3(kt,$t),et.keys=$t.size?Array.from($t):null,et}function declareUpdate$2(et){const dt=createUpdate$3(et);return is$4.und(dt.default)&&(dt.default=getDefaultProps$3(dt)),dt}function findDefined$3(et,dt){eachProp$4(et,(kt,$t)=>kt!=null&&dt.add($t))}var ACTIVE_EVENTS$3=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$3(et,dt,kt){et.animation[kt]=dt[kt]!==getDefaultProp$3(dt,kt)?resolveProp$3(dt[kt],et.key):void 0}function sendEvent$3(et,dt,...kt){var $t,Tt,Dt,Ft;(Tt=($t=et.animation)[dt])==null||Tt.call($t,...kt),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...kt)}var BATCHED_EVENTS$3=["onStart","onChange","onRest"],nextId2$3=1,Controller$3=class{constructor(dt,kt){this.id=nextId2$3++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),kt&&(this._flush=kt),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each((kt,$t)=>dt[$t]=kt.get()),dt}set(dt){for(const kt in dt){const $t=dt[kt];is$4.und($t)||this.springs[kt].set($t)}}update(dt){return dt&&this.queue.push(createUpdate$3(dt)),this}start(dt){let{queue:kt}=this;return dt?kt=toArray$4(dt).map(createUpdate$3):this.queue=[],this._flush?this._flush(this,kt):(prepareKeys$3(this,kt),flushUpdateQueue$3(this,kt))}stop(dt,kt){if(dt!==!!dt&&(kt=dt),kt){const $t=this.springs;each$4(toArray$4(kt),Tt=>$t[Tt].stop(!!dt))}else stopAsync$3(this._state,this._lastAsyncId),this.each($t=>$t.stop(!!dt));return this}pause(dt){if(is$4.und(dt))this.start({pause:!0});else{const kt=this.springs;each$4(toArray$4(dt),$t=>kt[$t].pause())}return this}resume(dt){if(is$4.und(dt))this.start({pause:!1});else{const kt=this.springs;each$4(toArray$4(dt),$t=>kt[$t].resume())}return this}each(dt){eachProp$4(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:kt,onRest:$t}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$3(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&$t.size?this.get():null;Dt&&kt.size&&flush$3(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$3($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$4.onFrame(this._onFrame)}};function flushUpdateQueue$3(et,dt){return Promise.all(dt.map(kt=>flushUpdate$3(et,kt))).then(kt=>getCombinedResult$3(et,kt))}async function flushUpdate$3(et,dt,kt){const{keys:$t,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$4.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$4.arr(Tt)||is$4.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$4(BATCHED_EVENTS$3,sr=>{const nr=dt[sr];if(is$4.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:lr,cancelled:or})=>{const cr=ir.get(nr);cr?(lr||(cr.finished=!1),or&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:lr||!1,cancelled:or||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$3(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=($t||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$3(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$3(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$7,resume:noop$7,start(sr,nr){er?(stopAsync$3(Jt,et._lastAsyncId),nr(getCancelledResult$3(et))):(sr.onRest=Ut,nr(runAsync$3(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$3(et,await Promise.all(Zt));if(Ft&&rr.finished&&!(kt&&rr.noop)){const sr=createLoopUpdate$3(dt,Ft,Tt);if(sr)return prepareKeys$3(et,[sr]),flushUpdate$3(et,sr,!0)}return Ht&&raf$4.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$3(et,dt){const kt={...et.springs};return dt&&each$4(toArray$4(dt),$t=>{is$4.und($t.keys)&&($t=createUpdate$3($t)),is$4.obj($t.to)||($t={...$t,to:void 0}),prepareSprings$3(kt,$t,Tt=>createSpring$3(Tt))}),setSprings$3(et,kt),kt}function setSprings$3(et,dt){eachProp$4(dt,(kt,$t)=>{et.springs[$t]||(et.springs[$t]=kt,addFluidObserver$4(kt,et))})}function createSpring$3(et,dt){const kt=new SpringValue$3;return kt.key=et,dt&&addFluidObserver$4(kt,dt),kt}function prepareSprings$3(et,dt,kt){dt.keys&&each$4(dt.keys,$t=>{(et[$t]||(et[$t]=kt($t)))._prepareNode(dt)})}function prepareKeys$3(et,dt){each$4(dt,kt=>{prepareSprings$3(et.springs,kt,$t=>createSpring$3($t,et))})}var SpringContext$3=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$3=()=>{const et=[],dt=function($t){deprecateDirectCall$3();const Tt=[];return each$4(et,(Dt,Ft)=>{if(is$4.und($t))Tt.push(Dt.start());else{const Ut=kt($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function($t){et.includes($t)||et.push($t)},dt.delete=function($t){const Tt=et.indexOf($t);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$4(et,$t=>$t.pause(...arguments)),this},dt.resume=function(){return each$4(et,$t=>$t.resume(...arguments)),this},dt.set=function($t){each$4(et,(Tt,Dt)=>{const Ft=is$4.fun($t)?$t(Dt,Tt):$t;Ft&&Tt.set(Ft)})},dt.start=function($t){const Tt=[];return each$4(et,(Dt,Ft)=>{if(is$4.und($t))Tt.push(Dt.start());else{const Ut=this._getProps($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$4(et,$t=>$t.stop(...arguments)),this},dt.update=function($t){return each$4(et,(Tt,Dt)=>Tt.update(this._getProps($t,Tt,Dt))),this};const kt=function($t,Tt,Dt){return is$4.fun($t)?$t(Dt,Tt):$t};return dt._getProps=kt,dt};function useSprings$2(et,dt,kt){const $t=is$4.fun(dt)&&dt;$t&&!kt&&(kt=[]);const Tt=reactExports.useMemo(()=>$t||arguments.length==3?SpringRef$3():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate$4(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,lr){const or=getSprings$3(ir,lr);return Dt.current>0&&!Ut.queue.length&&!Object.keys(or).some(dr=>!ir.springs[dr])?flushUpdateQueue$3(ir,lr):new Promise(dr=>{setSprings$3(ir,or),Ut.queue.push(()=>{dr(flushUpdateQueue$3(ir,lr))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev$3(et)||0;reactExports.useMemo(()=>{each$4(Ht.current.slice(et,Yt),ir=>{detachRefs$3(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},kt);function Jt(ir,lr){for(let or=ir;or<lr;or++){const cr=Ht.current[or]||(Ht.current[or]=new Controller$3(null,Ut.flush)),dr=$t?$t(or,cr):dt[or];dr&&(Kt.current[or]=declareUpdate$2(dr))}}const Zt=Ht.current.map((ir,lr)=>getSprings$3(ir,Kt.current[lr])),er=reactExports.useContext(SpringContext$3),rr=usePrev$3(er),sr=er!==rr&&hasProps$3(er);useIsomorphicLayoutEffect$4(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each$4(ir,lr=>lr())),each$4(Ht.current,(lr,or)=>{Tt==null||Tt.add(lr),sr&&lr.start({default:er});const cr=Kt.current[or];cr&&(replaceRef$3(lr,cr.ref),lr.ref?lr.queue.push(cr):lr.start(cr))})}),useOnce$4(()=>()=>{each$4(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring$2(et,dt){const kt=is$4.fun(et),[[$t],Tt]=useSprings$2(1,kt?et:[et],kt?dt||[]:dt);return kt||arguments.length==2?[$t,Tt]:$t}var Interpolation$4=class extends FrameValue$4{constructor(dt,kt){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$4(...kt);const $t=this._get(),Tt=getAnimatedType$4($t);setAnimated$4(this,Tt.create($t))}advance(dt){const kt=this._get(),$t=this.get();isEqual$5(kt,$t)||(getAnimated$4(this).setValue(kt),this._onChange(kt,this.idle)),!this.idle&&checkIdle$4(this._active)&&becomeIdle$4(this)}_get(){const dt=is$4.arr(this.source)?this.source.map(getFluidValue$4):toArray$4(getFluidValue$4(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$4(this._active)&&(this.idle=!1,each$4(getPayload$4(this),dt=>{dt.done=!1}),globals_exports$4.skipAnimation?(raf$4.batchedUpdates(()=>this.advance()),becomeIdle$4(this)):frameLoop$4.start(this))}_attach(){let dt=1;each$4(toArray$4(this.source),kt=>{hasFluidValue$4(kt)&&addFluidObserver$4(kt,this),isFrameValue$4(kt)&&(kt.idle||this._active.add(kt),dt=Math.max(dt,kt.priority+1))}),this.priority=dt,this._start()}_detach(){each$4(toArray$4(this.source),dt=>{hasFluidValue$4(dt)&&removeFluidObserver$4(dt,this)}),this._active.clear(),becomeIdle$4(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$4(this.source).reduce((kt,$t)=>Math.max(kt,(isFrameValue$4($t)?$t.priority:0)+1),0))}};function isIdle$4(et){return et.idle!==!1}function checkIdle$4(et){return!et.size||Array.from(et).every(isIdle$4)}function becomeIdle$4(et){et.idle||(et.idle=!0,each$4(getPayload$4(et),dt=>{dt.done=!0}),callFluidObservers$4(et,{type:"idle",parent:et}))}var to$5=(et,...dt)=>new Interpolation$4(et,dt);globals_exports$4.assign({createStringInterpolator:createStringInterpolator2$4,to:(et,dt)=>new Interpolation$4(et,dt)});var isCustomPropRE$4=/^--/;function dangerousStyleValue$4(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$4.test(et)&&!(isUnitlessNumber$4.hasOwnProperty(et)&&isUnitlessNumber$4[et])?dt+"px":(""+dt).trim()}var attributeCache$4={};function applyAnimatedValues$4(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const kt=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:$t,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>kt||et.hasAttribute(Zt)?Zt:attributeCache$4[Zt]||(attributeCache$4[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$4(Zt,Tt[Zt]);isCustomPropRE$4.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),$t!==void 0&&(et.className=$t),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$4={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$4=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$5=["Webkit","Ms","Moz","O"];isUnitlessNumber$4=Object.keys(isUnitlessNumber$4).reduce((et,dt)=>(prefixes$5.forEach(kt=>et[prefixKey$4(kt,dt)]=et[dt]),et),isUnitlessNumber$4);var domTransforms$4=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$4=/^(translate)/,degTransforms$4=/^(rotate|skew)/,addUnit$4=(et,dt)=>is$4.num(et)&&et!==0?et+dt:et,isValueIdentity$4=(et,dt)=>is$4.arr(et)?et.every(kt=>isValueIdentity$4(kt,dt)):is$4.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$4=class extends AnimatedObject$4{constructor({x:dt,y:kt,z:$t,...Tt}){const Dt=[],Ft=[];(dt||kt||$t)&&(Dt.push([dt||0,kt||0,$t||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$4(Ht,"px")).join(",")})`,isValueIdentity$4(Ut,0)])),eachProp$4(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$4.test(Ht)){if(delete Tt[Ht],is$4.und(Ut))return;const Kt=pxTransforms$4.test(Ht)?"px":degTransforms$4.test(Ht)?"deg":"";Dt.push(toArray$4(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$4(er,Kt)})`,isValueIdentity$4(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$4(Jt,Kt)).join(",")})`,isValueIdentity$4(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$4(Dt,Ft)),super(Tt)}},FluidTransform$4=class extends FluidValue$4{constructor(dt,kt){super(),this.inputs=dt,this.transforms=kt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",kt=!0;return each$4(this.inputs,($t,Tt)=>{const Dt=getFluidValue$4($t[0]),[Ft,Ut]=this.transforms[Tt](is$4.arr(Dt)?Dt:$t.map(getFluidValue$4));dt+=" "+Ft,kt=kt&&Ut}),kt?"none":dt}observerAdded(dt){dt==1&&each$4(this.inputs,kt=>each$4(kt,$t=>hasFluidValue$4($t)&&addFluidObserver$4($t,this)))}observerRemoved(dt){dt==0&&each$4(this.inputs,kt=>each$4(kt,$t=>hasFluidValue$4($t)&&removeFluidObserver$4($t,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$4(this,dt)}},primitives$4=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$4.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$4,colors:colors2$4});var host$4=createHost$4(primitives$4,{applyAnimatedValues:applyAnimatedValues$4,createAnimatedStyle:et=>new AnimatedStyle$4(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...kt})=>kt}),animated$4=host$4.animated;let windowObject;typeof window<"u"?windowObject=window:typeof self<"u"?windowObject=self:windowObject=global;let cancelFrame=null,requestFrame=null;const TIMEOUT_DURATION=20,clearTimeoutFn=windowObject.clearTimeout,setTimeoutFn=windowObject.setTimeout,cancelAnimationFrameFn=windowObject.cancelAnimationFrame||windowObject.mozCancelAnimationFrame||windowObject.webkitCancelAnimationFrame,requestAnimationFrameFn=windowObject.requestAnimationFrame||windowObject.mozRequestAnimationFrame||windowObject.webkitRequestAnimationFrame;cancelAnimationFrameFn==null||requestAnimationFrameFn==null?(cancelFrame=clearTimeoutFn,requestFrame=function(dt){return setTimeoutFn(dt,TIMEOUT_DURATION)}):(cancelFrame=function([dt,kt]){cancelAnimationFrameFn(dt),clearTimeoutFn(kt)},requestFrame=function(dt){const kt=requestAnimationFrameFn(function(){clearTimeoutFn($t),dt()}),$t=setTimeoutFn(function(){cancelAnimationFrameFn(kt),dt()},TIMEOUT_DURATION);return[kt,$t]});function createDetectElementResize(et){let dt,kt,$t,Tt,Dt,Ft,Ut;const Ht=typeof document<"u"&&document.attachEvent;if(!Ht){Ft=function(ir){const lr=ir.__resizeTriggers__,or=lr.firstElementChild,cr=lr.lastElementChild,dr=or.firstElementChild;cr.scrollLeft=cr.scrollWidth,cr.scrollTop=cr.scrollHeight,dr.style.width=or.offsetWidth+1+"px",dr.style.height=or.offsetHeight+1+"px",or.scrollLeft=or.scrollWidth,or.scrollTop=or.scrollHeight},Dt=function(ir){return ir.offsetWidth!==ir.__resizeLast__.width||ir.offsetHeight!==ir.__resizeLast__.height},Ut=function(ir){if(ir.target.className&&typeof ir.target.className.indexOf=="function"&&ir.target.className.indexOf("contract-trigger")<0&&ir.target.className.indexOf("expand-trigger")<0)return;const lr=this;Ft(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){Dt(lr)&&(lr.__resizeLast__.width=lr.offsetWidth,lr.__resizeLast__.height=lr.offsetHeight,lr.__resizeListeners__.forEach(function(dr){dr.call(lr,ir)}))})};let Zt=!1,er="";$t="animationstart";const rr="Webkit Moz O ms".split(" ");let sr="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),nr="";{const ir=document.createElement("fakeelement");if(ir.style.animationName!==void 0&&(Zt=!0),Zt===!1){for(let lr=0;lr<rr.length;lr++)if(ir.style[rr[lr]+"AnimationName"]!==void 0){nr=rr[lr],er="-"+nr.toLowerCase()+"-",$t=sr[lr],Zt=!0;break}}}kt="resizeanim",dt="@"+er+"keyframes "+kt+" { from { opacity: 0; } to { opacity: 0; } } ",Tt=er+"animation: 1ms "+kt+"; "}const Kt=function(Zt){if(!Zt.getElementById("detectElementResize")){const er=(dt||"")+".resize-triggers { "+(Tt||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',rr=Zt.head||Zt.getElementsByTagName("head")[0],sr=Zt.createElement("style");sr.id="detectElementResize",sr.type="text/css",et!=null&&sr.setAttribute("nonce",et),sr.styleSheet?sr.styleSheet.cssText=er:sr.appendChild(Zt.createTextNode(er)),rr.appendChild(sr)}};return{addResizeListener:function(Zt,er){if(Ht)Zt.attachEvent("onresize",er);else{if(!Zt.__resizeTriggers__){const rr=Zt.ownerDocument,sr=windowObject.getComputedStyle(Zt);sr&&sr.position==="static"&&(Zt.style.position="relative"),Kt(rr),Zt.__resizeLast__={},Zt.__resizeListeners__=[],(Zt.__resizeTriggers__=rr.createElement("div")).className="resize-triggers";const nr=rr.createElement("div");nr.className="expand-trigger",nr.appendChild(rr.createElement("div"));const ir=rr.createElement("div");ir.className="contract-trigger",Zt.__resizeTriggers__.appendChild(nr),Zt.__resizeTriggers__.appendChild(ir),Zt.appendChild(Zt.__resizeTriggers__),Ft(Zt),Zt.addEventListener("scroll",Ut,!0),$t&&(Zt.__resizeTriggers__.__animationListener__=function(or){or.animationName===kt&&Ft(Zt)},Zt.__resizeTriggers__.addEventListener($t,Zt.__resizeTriggers__.__animationListener__))}Zt.__resizeListeners__.push(er)}},removeResizeListener:function(Zt,er){if(Ht)Zt.detachEvent("onresize",er);else if(Zt.__resizeListeners__.splice(Zt.__resizeListeners__.indexOf(er),1),!Zt.__resizeListeners__.length){Zt.removeEventListener("scroll",Ut,!0),Zt.__resizeTriggers__.__animationListener__&&(Zt.__resizeTriggers__.removeEventListener($t,Zt.__resizeTriggers__.__animationListener__),Zt.__resizeTriggers__.__animationListener__=null);try{Zt.__resizeTriggers__=!Zt.removeChild(Zt.__resizeTriggers__)}catch{}}}}}class AutoSizer extends reactExports.Component{constructor(...dt){super(...dt),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:kt,disableWidth:$t,onResize:Tt}=this.props;if(this._parentNode){const Dt=window.getComputedStyle(this._parentNode)||{},Ft=parseFloat(Dt.paddingLeft||"0"),Ut=parseFloat(Dt.paddingRight||"0"),Ht=parseFloat(Dt.paddingTop||"0"),Kt=parseFloat(Dt.paddingBottom||"0"),Yt=this._parentNode.getBoundingClientRect(),Jt=Yt.height-Ht-Kt,Zt=Yt.width-Ft-Ut;if(!kt&&this.state.height!==Jt||!$t&&this.state.width!==Zt){this.setState({height:Jt,width:Zt});const er=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof Tt=="function"&&Tt({height:Jt,width:Zt,get scaledHeight(){return er(),Jt},get scaledWidth(){return er(),Zt}})}}},this._setRef=kt=>{this._autoSizer=kt}}componentDidMount(){const{nonce:dt}=this.props,kt=this._autoSizer?this._autoSizer.parentNode:null;if(kt!=null&&kt.ownerDocument&&kt.ownerDocument.defaultView&&kt instanceof kt.ownerDocument.defaultView.HTMLElement){this._parentNode=kt;const $t=kt.ownerDocument.defaultView.ResizeObserver;$t!=null?(this._resizeObserver=new $t(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(kt)):(this._detectElementResize=createDetectElementResize(dt),this._detectElementResize.addResizeListener(kt,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:dt,defaultHeight:kt,defaultWidth:$t,disableHeight:Tt=!1,disableWidth:Dt=!1,doNotBailOutOnEmptyChildren:Ft=!1,nonce:Ut,onResize:Ht,style:Kt={},tagName:Yt="div",...Jt}=this.props,{height:Zt,width:er}=this.state,rr={overflow:"visible"},sr={};let nr=!1;return Tt||(Zt===0&&(nr=!0),rr.height=0,sr.height=Zt,sr.scaledHeight=Zt),Dt||(er===0&&(nr=!0),rr.width=0,sr.width=er,sr.scaledWidth=er),Ft&&(nr=!1),reactExports.createElement(Yt,{ref:this._setRef,style:{...rr,...Kt},...Jt},!nr&&dt(sr))}}function c$3(et,dt,kt,$t){var Tt=this,Dt=reactExports.useRef(null),Ft=reactExports.useRef(0),Ut=reactExports.useRef(0),Ht=reactExports.useRef(null),Kt=reactExports.useRef([]),Yt=reactExports.useRef(),Jt=reactExports.useRef(),Zt=reactExports.useRef(et),er=reactExports.useRef(!0);Zt.current=et;var rr=typeof window<"u",sr=!dt&&dt!==0&&rr;if(typeof et!="function")throw new TypeError("Expected a function");dt=+dt||0;var nr=!!(kt=kt||{}).leading,ir=!("trailing"in kt)||!!kt.trailing,lr="maxWait"in kt,or="debounceOnServer"in kt&&!!kt.debounceOnServer,cr=lr?Math.max(+kt.maxWait||0,dt):null;reactExports.useEffect(function(){return er.current=!0,function(){er.current=!1}},[]);var dr=reactExports.useMemo(function(){var ur=function(Mr){var Pr=Kt.current,Or=Yt.current;return Kt.current=Yt.current=null,Ft.current=Mr,Ut.current=Ut.current||Mr,Jt.current=Zt.current.apply(Or,Pr)},pr=function(Mr,Pr){sr&&cancelAnimationFrame(Ht.current),Ht.current=sr?requestAnimationFrame(Mr):setTimeout(Mr,Pr)},mr=function(Mr){if(!er.current)return!1;var Pr=Mr-Dt.current;return!Dt.current||Pr>=dt||Pr<0||lr&&Mr-Ft.current>=cr},jr=function(Mr){return Ht.current=null,ir&&Kt.current?ur(Mr):(Kt.current=Yt.current=null,Jt.current)},Rr=function Mr(){var Pr=Date.now();if(nr&&Ut.current===Ft.current&&br(),mr(Pr))return jr(Pr);if(er.current){var Or=dt-(Pr-Dt.current),kr=lr?Math.min(Or,cr-(Pr-Ft.current)):Or;pr(Mr,kr)}},br=function(){$t&&$t({})},_r=function(){if(rr||or){var Mr=Date.now(),Pr=mr(Mr);if(Kt.current=[].slice.call(arguments),Yt.current=Tt,Dt.current=Mr,Pr){if(!Ht.current&&er.current)return Ft.current=Dt.current,pr(Rr,dt),nr?ur(Dt.current):Jt.current;if(lr)return pr(Rr,dt),ur(Dt.current)}return Ht.current||pr(Rr,dt),Jt.current}};return _r.cancel=function(){var Mr=Ht.current;Mr&&(sr?cancelAnimationFrame(Ht.current):clearTimeout(Ht.current)),Ft.current=0,Kt.current=Dt.current=Yt.current=Ht.current=null,Mr&&$t&&$t({})},_r.isPending=function(){return!!Ht.current},_r.flush=function(){return Ht.current?jr(Date.now()):Jt.current},_r},[nr,lr,dt,cr,ir,sr,rr,or,$t]);return dr}function i$1(et,dt){return et===dt}function a$3(et,dt,kt){var $t=kt&&kt.equalityFn||i$1,Tt=reactExports.useRef(et),Dt=reactExports.useState({})[1],Ft=c$3(reactExports.useCallback(function(Ht){Tt.current=Ht,Dt({})},[Dt]),dt,kt,Dt),Ut=reactExports.useRef(et);return $t(Ut.current,et)||(Ft(et),Ut.current=et),[Tt.current,Ft]}function define(et,dt,kt){et.prototype=dt.prototype=kt,kt.constructor=et}function extend(et,dt){var kt=Object.create(et.prototype);for(var $t in dt)kt[$t]=dt[$t];return kt}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(et){return Object.assign(new this.constructor,this,et)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(et){var dt,kt;return et=(et+"").trim().toLowerCase(),(dt=reHex.exec(et))?(kt=dt[1].length,dt=parseInt(dt[1],16),kt===6?rgbn(dt):kt===3?new Rgb(dt>>8&15|dt>>4&240,dt>>4&15|dt&240,(dt&15)<<4|dt&15,1):kt===8?rgba$4(dt>>24&255,dt>>16&255,dt>>8&255,(dt&255)/255):kt===4?rgba$4(dt>>12&15|dt>>8&240,dt>>8&15|dt>>4&240,dt>>4&15|dt&240,((dt&15)<<4|dt&15)/255):null):(dt=reRgbInteger.exec(et))?new Rgb(dt[1],dt[2],dt[3],1):(dt=reRgbPercent.exec(et))?new Rgb(dt[1]*255/100,dt[2]*255/100,dt[3]*255/100,1):(dt=reRgbaInteger.exec(et))?rgba$4(dt[1],dt[2],dt[3],dt[4]):(dt=reRgbaPercent.exec(et))?rgba$4(dt[1]*255/100,dt[2]*255/100,dt[3]*255/100,dt[4]):(dt=reHslPercent.exec(et))?hsla$4(dt[1],dt[2]/100,dt[3]/100,1):(dt=reHslaPercent.exec(et))?hsla$4(dt[1],dt[2]/100,dt[3]/100,dt[4]):named.hasOwnProperty(et)?rgbn(named[et]):et==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(et){return new Rgb(et>>16&255,et>>8&255,et&255,1)}function rgba$4(et,dt,kt,$t){return $t<=0&&(et=dt=kt=NaN),new Rgb(et,dt,kt,$t)}function rgbConvert(et){return et instanceof Color||(et=color(et)),et?(et=et.rgb(),new Rgb(et.r,et.g,et.b,et.opacity)):new Rgb}function rgb$5(et,dt,kt,$t){return arguments.length===1?rgbConvert(et):new Rgb(et,dt,kt,$t??1)}function Rgb(et,dt,kt,$t){this.r=+et,this.g=+dt,this.b=+kt,this.opacity=+$t}define(Rgb,rgb$5,extend(Color,{brighter(et){return et=et==null?brighter:Math.pow(brighter,et),new Rgb(this.r*et,this.g*et,this.b*et,this.opacity)},darker(et){return et=et==null?darker:Math.pow(darker,et),new Rgb(this.r*et,this.g*et,this.b*et,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const et=clampa(this.opacity);return`${et===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${et===1?")":`, ${et})`}`}function clampa(et){return isNaN(et)?1:Math.max(0,Math.min(1,et))}function clampi(et){return Math.max(0,Math.min(255,Math.round(et)||0))}function hex(et){return et=clampi(et),(et<16?"0":"")+et.toString(16)}function hsla$4(et,dt,kt,$t){return $t<=0?et=dt=kt=NaN:kt<=0||kt>=1?et=dt=NaN:dt<=0&&(et=NaN),new Hsl(et,dt,kt,$t)}function hslConvert(et){if(et instanceof Hsl)return new Hsl(et.h,et.s,et.l,et.opacity);if(et instanceof Color||(et=color(et)),!et)return new Hsl;if(et instanceof Hsl)return et;et=et.rgb();var dt=et.r/255,kt=et.g/255,$t=et.b/255,Tt=Math.min(dt,kt,$t),Dt=Math.max(dt,kt,$t),Ft=NaN,Ut=Dt-Tt,Ht=(Dt+Tt)/2;return Ut?(dt===Dt?Ft=(kt-$t)/Ut+(kt<$t)*6:kt===Dt?Ft=($t-dt)/Ut+2:Ft=(dt-kt)/Ut+4,Ut/=Ht<.5?Dt+Tt:2-Dt-Tt,Ft*=60):Ut=Ht>0&&Ht<1?0:Ft,new Hsl(Ft,Ut,Ht,et.opacity)}function hsl$4(et,dt,kt,$t){return arguments.length===1?hslConvert(et):new Hsl(et,dt,kt,$t??1)}function Hsl(et,dt,kt,$t){this.h=+et,this.s=+dt,this.l=+kt,this.opacity=+$t}define(Hsl,hsl$4,extend(Color,{brighter(et){return et=et==null?brighter:Math.pow(brighter,et),new Hsl(this.h,this.s,this.l*et,this.opacity)},darker(et){return et=et==null?darker:Math.pow(darker,et),new Hsl(this.h,this.s,this.l*et,this.opacity)},rgb(){var et=this.h%360+(this.h<0)*360,dt=isNaN(et)||isNaN(this.s)?0:this.s,kt=this.l,$t=kt+(kt<.5?kt:1-kt)*dt,Tt=2*kt-$t;return new Rgb(hsl2rgb(et>=240?et-240:et+120,Tt,$t),hsl2rgb(et,Tt,$t),hsl2rgb(et<120?et+240:et-120,Tt,$t),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const et=clampa(this.opacity);return`${et===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${et===1?")":`, ${et})`}`}}));function clamph(et){return et=(et||0)%360,et<0?et+360:et}function clampt(et){return Math.max(0,Math.min(1,et||0))}function hsl2rgb(et,dt,kt){return(et<60?dt+(kt-dt)*et/60:et<180?kt:et<240?dt+(kt-dt)*(240-et)/60:dt)*255}const radians=Math.PI/180,degrees=180/Math.PI;var A$4=-.14861,B$3=1.78277,C$3=-.29227,D$3=-.90649,E$5=1.97294,ED=E$5*D$3,EB=E$5*B$3,BC_DA=B$3*C$3-D$3*A$4;function cubehelixConvert(et){if(et instanceof Cubehelix)return new Cubehelix(et.h,et.s,et.l,et.opacity);et instanceof Rgb||(et=rgbConvert(et));var dt=et.r/255,kt=et.g/255,$t=et.b/255,Tt=(BC_DA*$t+ED*dt-EB*kt)/(BC_DA+ED-EB),Dt=$t-Tt,Ft=(E$5*(kt-Tt)-C$3*Dt)/D$3,Ut=Math.sqrt(Ft*Ft+Dt*Dt)/(E$5*Tt*(1-Tt)),Ht=Ut?Math.atan2(Ft,Dt)*degrees-120:NaN;return new Cubehelix(Ht<0?Ht+360:Ht,Ut,Tt,et.opacity)}function cubehelix$1(et,dt,kt,$t){return arguments.length===1?cubehelixConvert(et):new Cubehelix(et,dt,kt,$t??1)}function Cubehelix(et,dt,kt,$t){this.h=+et,this.s=+dt,this.l=+kt,this.opacity=+$t}define(Cubehelix,cubehelix$1,extend(Color,{brighter(et){return et=et==null?brighter:Math.pow(brighter,et),new Cubehelix(this.h,this.s,this.l*et,this.opacity)},darker(et){return et=et==null?darker:Math.pow(darker,et),new Cubehelix(this.h,this.s,this.l*et,this.opacity)},rgb(){var et=isNaN(this.h)?0:(this.h+120)*radians,dt=+this.l,kt=isNaN(this.s)?0:this.s*dt*(1-dt),$t=Math.cos(et),Tt=Math.sin(et);return new Rgb(255*(dt+kt*(A$4*$t+B$3*Tt)),255*(dt+kt*(C$3*$t+D$3*Tt)),255*(dt+kt*(E$5*$t)),this.opacity)}}));function basis(et,dt,kt,$t,Tt){var Dt=et*et,Ft=Dt*et;return((1-3*et+3*Dt-Ft)*dt+(4-6*Dt+3*Ft)*kt+(1+3*et+3*Dt-3*Ft)*$t+Ft*Tt)/6}function basis$1(et){var dt=et.length-1;return function(kt){var $t=kt<=0?kt=0:kt>=1?(kt=1,dt-1):Math.floor(kt*dt),Tt=et[$t],Dt=et[$t+1],Ft=$t>0?et[$t-1]:2*Tt-Dt,Ut=$t<dt-1?et[$t+2]:2*Dt-Tt;return basis((kt-$t/dt)*dt,Ft,Tt,Dt,Ut)}}const constant$1=et=>()=>et;function linear$1(et,dt){return function(kt){return et+kt*dt}}function exponential(et,dt,kt){return et=Math.pow(et,kt),dt=Math.pow(dt,kt)-et,kt=1/kt,function($t){return Math.pow(et+$t*dt,kt)}}function hue(et,dt){var kt=dt-et;return kt?linear$1(et,kt>180||kt<-180?kt-360*Math.round(kt/360):kt):constant$1(isNaN(et)?dt:et)}function gamma(et){return(et=+et)==1?nogamma:function(dt,kt){return kt-dt?exponential(dt,kt,et):constant$1(isNaN(dt)?kt:dt)}}function nogamma(et,dt){var kt=dt-et;return kt?linear$1(et,kt):constant$1(isNaN(et)?dt:et)}const rgb$4=function et(dt){var kt=gamma(dt);function $t(Tt,Dt){var Ft=kt((Tt=rgb$5(Tt)).r,(Dt=rgb$5(Dt)).r),Ut=kt(Tt.g,Dt.g),Ht=kt(Tt.b,Dt.b),Kt=nogamma(Tt.opacity,Dt.opacity);return function(Yt){return Tt.r=Ft(Yt),Tt.g=Ut(Yt),Tt.b=Ht(Yt),Tt.opacity=Kt(Yt),Tt+""}}return $t.gamma=et,$t}(1);function rgbSpline(et){return function(dt){var kt=dt.length,$t=new Array(kt),Tt=new Array(kt),Dt=new Array(kt),Ft,Ut;for(Ft=0;Ft<kt;++Ft)Ut=rgb$5(dt[Ft]),$t[Ft]=Ut.r||0,Tt[Ft]=Ut.g||0,Dt[Ft]=Ut.b||0;return $t=et($t),Tt=et(Tt),Dt=et(Dt),Ut.opacity=1,function(Ht){return Ut.r=$t(Ht),Ut.g=Tt(Ht),Ut.b=Dt(Ht),Ut+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(et,dt){dt||(dt=[]);var kt=et?Math.min(dt.length,et.length):0,$t=dt.slice(),Tt;return function(Dt){for(Tt=0;Tt<kt;++Tt)$t[Tt]=et[Tt]*(1-Dt)+dt[Tt]*Dt;return $t}}function isNumberArray(et){return ArrayBuffer.isView(et)&&!(et instanceof DataView)}function genericArray(et,dt){var kt=dt?dt.length:0,$t=et?Math.min(kt,et.length):0,Tt=new Array($t),Dt=new Array(kt),Ft;for(Ft=0;Ft<$t;++Ft)Tt[Ft]=interpolate$4(et[Ft],dt[Ft]);for(;Ft<kt;++Ft)Dt[Ft]=dt[Ft];return function(Ut){for(Ft=0;Ft<$t;++Ft)Dt[Ft]=Tt[Ft](Ut);return Dt}}function date$1(et,dt){var kt=new Date;return et=+et,dt=+dt,function($t){return kt.setTime(et*(1-$t)+dt*$t),kt}}function p$2(et,dt){return et=+et,dt=+dt,function(kt){return et*(1-kt)+dt*kt}}function object(et,dt){var kt={},$t={},Tt;(et===null||typeof et!="object")&&(et={}),(dt===null||typeof dt!="object")&&(dt={});for(Tt in dt)Tt in et?kt[Tt]=interpolate$4(et[Tt],dt[Tt]):$t[Tt]=dt[Tt];return function(Dt){for(Tt in kt)$t[Tt]=kt[Tt](Dt);return $t}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero$1(et){return function(){return et}}function one(et){return function(dt){return et(dt)+""}}function B$2(et,dt){var kt=reA.lastIndex=reB.lastIndex=0,$t,Tt,Dt,Ft=-1,Ut=[],Ht=[];for(et=et+"",dt=dt+"";($t=reA.exec(et))&&(Tt=reB.exec(dt));)(Dt=Tt.index)>kt&&(Dt=dt.slice(kt,Dt),Ut[Ft]?Ut[Ft]+=Dt:Ut[++Ft]=Dt),($t=$t[0])===(Tt=Tt[0])?Ut[Ft]?Ut[Ft]+=Tt:Ut[++Ft]=Tt:(Ut[++Ft]=null,Ht.push({i:Ft,x:p$2($t,Tt)})),kt=reB.lastIndex;return kt<dt.length&&(Dt=dt.slice(kt),Ut[Ft]?Ut[Ft]+=Dt:Ut[++Ft]=Dt),Ut.length<2?Ht[0]?one(Ht[0].x):zero$1(dt):(dt=Ht.length,function(Kt){for(var Yt=0,Jt;Yt<dt;++Yt)Ut[(Jt=Ht[Yt]).i]=Jt.x(Kt);return Ut.join("")})}function interpolate$4(et,dt){var kt=typeof dt,$t;return dt==null||kt==="boolean"?constant$1(dt):(kt==="number"?p$2:kt==="string"?($t=color(dt))?(dt=$t,rgb$4):B$2:dt instanceof color?rgb$4:dt instanceof Date?date$1:isNumberArray(dt)?numberArray:Array.isArray(dt)?genericArray:typeof dt.valueOf!="function"&&typeof dt.toString!="function"||isNaN(dt)?object:p$2)(et,dt)}function v$2(et,dt){return et=+et,dt=+dt,function(kt){return Math.round(et*(1-kt)+dt*kt)}}function cubehelix(et){return function dt(kt){kt=+kt;function $t(Tt,Dt){var Ft=et((Tt=cubehelix$1(Tt)).h,(Dt=cubehelix$1(Dt)).h),Ut=nogamma(Tt.s,Dt.s),Ht=nogamma(Tt.l,Dt.l),Kt=nogamma(Tt.opacity,Dt.opacity);return function(Yt){return Tt.h=Ft(Yt),Tt.s=Ut(Yt),Tt.l=Ht(Math.pow(Yt,kt)),Tt.opacity=Kt(Yt),Tt+""}}return $t.gamma=dt,$t}(1)}cubehelix(hue);var cubehelixLong=cubehelix(nogamma),HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(et){return this.__data__.set(et,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(et){return this.__data__.has(et)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$3(et){var dt=-1,kt=et==null?0:et.length;for(this.__data__=new MapCache;++dt<kt;)this.add(et[dt])}SetCache$3.prototype.add=SetCache$3.prototype.push=setCacheAdd;SetCache$3.prototype.has=setCacheHas;var _SetCache=SetCache$3;function baseFindIndex$1(et,dt,kt,$t){for(var Tt=et.length,Dt=kt+($t?1:-1);$t?Dt--:++Dt<Tt;)if(dt(et[Dt],Dt,et))return Dt;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(et){return et!==et}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(et,dt,kt){for(var $t=kt-1,Tt=et.length;++$t<Tt;)if(et[$t]===dt)return $t;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(et,dt,kt){return dt===dt?strictIndexOf(et,dt,kt):baseFindIndex(et,baseIsNaN,kt)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$2(et,dt){var kt=et==null?0:et.length;return!!kt&&baseIndexOf(et,dt,0)>-1}var _arrayIncludes=arrayIncludes$2;function arrayIncludesWith$2(et,dt,kt){for(var $t=-1,Tt=et==null?0:et.length;++$t<Tt;)if(kt(dt,et[$t]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$2;function cacheHas$3(et,dt){return et.has(dt)}var _cacheHas=cacheHas$3,SetCache$2=_SetCache,arrayIncludes$1=_arrayIncludes,arrayIncludesWith$1=_arrayIncludesWith,arrayMap$2=_arrayMap,baseUnary$3=_baseUnary,cacheHas$2=_cacheHas,LARGE_ARRAY_SIZE$1=200;function baseDifference$1(et,dt,kt,$t){var Tt=-1,Dt=arrayIncludes$1,Ft=!0,Ut=et.length,Ht=[],Kt=dt.length;if(!Ut)return Ht;kt&&(dt=arrayMap$2(dt,baseUnary$3(kt))),$t?(Dt=arrayIncludesWith$1,Ft=!1):dt.length>=LARGE_ARRAY_SIZE$1&&(Dt=cacheHas$2,Ft=!1,dt=new SetCache$2(dt));e:for(;++Tt<Ut;){var Yt=et[Tt],Jt=kt==null?Yt:kt(Yt);if(Yt=$t||Yt!==0?Yt:0,Ft&&Jt===Jt){for(var Zt=Kt;Zt--;)if(dt[Zt]===Jt)continue e;Ht.push(Yt)}else Dt(dt,Jt,$t)||Ht.push(Yt)}return Ht}var _baseDifference=baseDifference$1,baseDifference=_baseDifference,baseRest$1=_baseRest,isArrayLikeObject=isArrayLikeObject_1,without=baseRest$1(function(et,dt){return isArrayLikeObject(et)?baseDifference(et,dt):[]}),without_1=without;const P$2=getDefaultExportFromCjs(without_1);function constant(et){return function(){return et}}const epsilon=1e-12;function array(et){return typeof et=="object"&&"length"in et?et:Array.from(et)}function Linear(et){this._context=et}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;default:this._context.lineTo(et,dt);break}}};function U$1(et){return new Linear(et)}function noop$6(){}function point$4(et,dt,kt){et._context.bezierCurveTo((2*et._x0+et._x1)/3,(2*et._y0+et._y1)/3,(et._x0+2*et._x1)/3,(et._y0+2*et._y1)/3,(et._x0+4*et._x1+dt)/6,(et._y0+4*et._y1+kt)/6)}function Basis(et){this._context=et}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,et,dt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt}};function W$4(et){return new Basis(et)}function BasisClosed(et){this._context=et}BasisClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._x2=et,this._y2=dt;break;case 1:this._point=2,this._x3=et,this._y3=dt;break;case 2:this._point=3,this._x4=et,this._y4=dt,this._context.moveTo((this._x0+4*this._x1+et)/6,(this._y0+4*this._y1+dt)/6);break;default:point$4(this,et,dt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt}};function G$1(et){return new BasisClosed(et)}function BasisOpen(et){this._context=et}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var kt=(this._x0+4*this._x1+et)/6,$t=(this._y0+4*this._y1+dt)/6;this._line?this._context.lineTo(kt,$t):this._context.moveTo(kt,$t);break;case 3:this._point=4;default:point$4(this,et,dt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt}};function I$2(et){return new BasisOpen(et)}function Bundle(et,dt){this._basis=new Basis(et),this._beta=dt}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var et=this._x,dt=this._y,kt=et.length-1;if(kt>0)for(var $t=et[0],Tt=dt[0],Dt=et[kt]-$t,Ft=dt[kt]-Tt,Ut=-1,Ht;++Ut<=kt;)Ht=Ut/kt,this._basis.point(this._beta*et[Ut]+(1-this._beta)*($t+Ht*Dt),this._beta*dt[Ut]+(1-this._beta)*(Tt+Ht*Ft));this._x=this._y=null,this._basis.lineEnd()},point:function(et,dt){this._x.push(+et),this._y.push(+dt)}};const A$3=function et(dt){function kt($t){return dt===1?new Basis($t):new Bundle($t,dt)}return kt.beta=function($t){return et(+$t)},kt}(.85);function point$3(et,dt,kt){et._context.bezierCurveTo(et._x1+et._k*(et._x2-et._x0),et._y1+et._k*(et._y2-et._y0),et._x2+et._k*(et._x1-dt),et._y2+et._k*(et._y1-kt),et._x2,et._y2)}function Cardinal(et,dt){this._context=et,this._k=(1-dt)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2,this._x1=et,this._y1=dt;break;case 2:this._point=3;default:point$3(this,et,dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const L$4=function et(dt){function kt($t){return new Cardinal($t,dt)}return kt.tension=function($t){return et(+$t)},kt}(0);function CardinalClosed(et,dt){this._context=et,this._k=(1-dt)/6}CardinalClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._x3=et,this._y3=dt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=dt);break;case 2:this._point=3,this._x5=et,this._y5=dt;break;default:point$3(this,et,dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const S$2=function et(dt){function kt($t){return new CardinalClosed($t,dt)}return kt.tension=function($t){return et(+$t)},kt}(0);function CardinalOpen(et,dt){this._context=et,this._k=(1-dt)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,et,dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const Y$3=function et(dt){function kt($t){return new CardinalOpen($t,dt)}return kt.tension=function($t){return et(+$t)},kt}(0);function point$2(et,dt,kt){var $t=et._x1,Tt=et._y1,Dt=et._x2,Ft=et._y2;if(et._l01_a>epsilon){var Ut=2*et._l01_2a+3*et._l01_a*et._l12_a+et._l12_2a,Ht=3*et._l01_a*(et._l01_a+et._l12_a);$t=($t*Ut-et._x0*et._l12_2a+et._x2*et._l01_2a)/Ht,Tt=(Tt*Ut-et._y0*et._l12_2a+et._y2*et._l01_2a)/Ht}if(et._l23_a>epsilon){var Kt=2*et._l23_2a+3*et._l23_a*et._l12_a+et._l12_2a,Yt=3*et._l23_a*(et._l23_a+et._l12_a);Dt=(Dt*Kt+et._x1*et._l23_2a-dt*et._l12_2a)/Yt,Ft=(Ft*Kt+et._y1*et._l23_2a-kt*et._l12_2a)/Yt}et._context.bezierCurveTo($t,Tt,Dt,Ft,et._x2,et._y2)}function CatmullRom(et,dt){this._context=et,this._alpha=dt}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){if(et=+et,dt=+dt,this._point){var kt=this._x2-et,$t=this._y2-dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(kt*kt+$t*$t,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,et,dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const q$3=function et(dt){function kt($t){return dt?new CatmullRom($t,dt):new Cardinal($t,0)}return kt.alpha=function($t){return et(+$t)},kt}(.5);function CatmullRomClosed(et,dt){this._context=et,this._alpha=dt}CatmullRomClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,dt){if(et=+et,dt=+dt,this._point){var kt=this._x2-et,$t=this._y2-dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(kt*kt+$t*$t,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=et,this._y3=dt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=dt);break;case 2:this._point=3,this._x5=et,this._y5=dt;break;default:point$2(this,et,dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const D$2=function et(dt){function kt($t){return dt?new CatmullRomClosed($t,dt):new CardinalClosed($t,0)}return kt.alpha=function($t){return et(+$t)},kt}(.5);function CatmullRomOpen(et,dt){this._context=et,this._alpha=dt}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){if(et=+et,dt=+dt,this._point){var kt=this._x2-et,$t=this._y2-dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(kt*kt+$t*$t,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,et,dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const E$4=function et(dt){function kt($t){return dt?new CatmullRomOpen($t,dt):new CardinalOpen($t,0)}return kt.alpha=function($t){return et(+$t)},kt}(.5);function LinearClosed(et){this._context=et}LinearClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(et,dt){et=+et,dt=+dt,this._point?this._context.lineTo(et,dt):(this._point=1,this._context.moveTo(et,dt))}};function F(et){return new LinearClosed(et)}function sign(et){return et<0?-1:1}function slope3(et,dt,kt){var $t=et._x1-et._x0,Tt=dt-et._x1,Dt=(et._y1-et._y0)/($t||Tt<0&&-0),Ft=(kt-et._y1)/(Tt||$t<0&&-0),Ut=(Dt*Tt+Ft*$t)/($t+Tt);return(sign(Dt)+sign(Ft))*Math.min(Math.abs(Dt),Math.abs(Ft),.5*Math.abs(Ut))||0}function slope2(et,dt){var kt=et._x1-et._x0;return kt?(3*(et._y1-et._y0)/kt-dt)/2:dt}function point$1(et,dt,kt){var $t=et._x0,Tt=et._y0,Dt=et._x1,Ft=et._y1,Ut=(Dt-$t)/3;et._context.bezierCurveTo($t+Ut,Tt+Ut*dt,Dt-Ut,Ft-Ut*kt,Dt,Ft)}function MonotoneX(et){this._context=et}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){var kt=NaN;if(et=+et,dt=+dt,!(et===this._x1&&dt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,kt=slope3(this,et,dt)),kt);break;default:point$1(this,this._t0,kt=slope3(this,et,dt));break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt,this._t0=kt}}};function MonotoneY(et){this._context=new ReflectContext(et)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(et,dt){MonotoneX.prototype.point.call(this,dt,et)};function ReflectContext(et){this._context=et}ReflectContext.prototype={moveTo:function(et,dt){this._context.moveTo(dt,et)},closePath:function(){this._context.closePath()},lineTo:function(et,dt){this._context.lineTo(dt,et)},bezierCurveTo:function(et,dt,kt,$t,Tt,Dt){this._context.bezierCurveTo(dt,et,$t,kt,Dt,Tt)}};function monotoneX(et){return new MonotoneX(et)}function monotoneY(et){return new MonotoneY(et)}function Natural(et){this._context=et}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var et=this._x,dt=this._y,kt=et.length;if(kt)if(this._line?this._context.lineTo(et[0],dt[0]):this._context.moveTo(et[0],dt[0]),kt===2)this._context.lineTo(et[1],dt[1]);else for(var $t=controlPoints(et),Tt=controlPoints(dt),Dt=0,Ft=1;Ft<kt;++Dt,++Ft)this._context.bezierCurveTo($t[0][Dt],Tt[0][Dt],$t[1][Dt],Tt[1][Dt],et[Ft],dt[Ft]);(this._line||this._line!==0&&kt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(et,dt){this._x.push(+et),this._y.push(+dt)}};function controlPoints(et){var dt,kt=et.length-1,$t,Tt=new Array(kt),Dt=new Array(kt),Ft=new Array(kt);for(Tt[0]=0,Dt[0]=2,Ft[0]=et[0]+2*et[1],dt=1;dt<kt-1;++dt)Tt[dt]=1,Dt[dt]=4,Ft[dt]=4*et[dt]+2*et[dt+1];for(Tt[kt-1]=2,Dt[kt-1]=7,Ft[kt-1]=8*et[kt-1]+et[kt],dt=1;dt<kt;++dt)$t=Tt[dt]/Dt[dt-1],Dt[dt]-=$t,Ft[dt]-=$t*Ft[dt-1];for(Tt[kt-1]=Ft[kt-1]/Dt[kt-1],dt=kt-2;dt>=0;--dt)Tt[dt]=(Ft[dt]-Tt[dt+1])/Dt[dt];for(Dt[kt-1]=(et[kt]+Tt[kt-1])/2,dt=0;dt<kt-1;++dt)Dt[dt]=2*et[dt+1]-Tt[dt+1];return[Tt,Dt]}function X$3(et){return new Natural(et)}function Step(et,dt){this._context=et,this._t=dt}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,dt),this._context.lineTo(et,dt);else{var kt=this._x*(1-this._t)+et*this._t;this._context.lineTo(kt,this._y),this._context.lineTo(kt,dt)}break}}this._x=et,this._y=dt}};function K$1(et){return new Step(et,.5)}function stepBefore(et){return new Step(et,0)}function stepAfter(et){return new Step(et,1)}function ne$1(et,dt){if((Ft=et.length)>1)for(var kt=1,$t,Tt,Dt=et[dt[0]],Ft,Ut=Dt.length;kt<Ft;++kt)for(Tt=Dt,Dt=et[dt[kt]],$t=0;$t<Ut;++$t)Dt[$t][1]+=Dt[$t][0]=isNaN(Tt[$t][1])?Tt[$t][0]:Tt[$t][1]}function Z$3(et){for(var dt=et.length,kt=new Array(dt);--dt>=0;)kt[dt]=dt;return kt}function stackValue(et,dt){return et[dt]}function stackSeries(et){const dt=[];return dt.key=et,dt}function _$2(){var et=constant([]),dt=Z$3,kt=ne$1,$t=stackValue;function Tt(Dt){var Ft=Array.from(et.apply(this,arguments),stackSeries),Ut,Ht=Ft.length,Kt=-1,Yt;for(const Jt of Dt)for(Ut=0,++Kt;Ut<Ht;++Ut)(Ft[Ut][Kt]=[0,+$t(Jt,Ft[Ut].key,Kt,Dt)]).data=Jt;for(Ut=0,Yt=array(dt(Ft));Ut<Ht;++Ut)Ft[Yt[Ut]].index=Ut;return kt(Ft,Yt),Ft}return Tt.keys=function(Dt){return arguments.length?(et=typeof Dt=="function"?Dt:constant(Array.from(Dt)),Tt):et},Tt.value=function(Dt){return arguments.length?($t=typeof Dt=="function"?Dt:constant(+Dt),Tt):$t},Tt.order=function(Dt){return arguments.length?(dt=Dt==null?Z$3:typeof Dt=="function"?Dt:constant(Array.from(Dt)),Tt):dt},Tt.offset=function(Dt){return arguments.length?(kt=Dt??ne$1,Tt):kt},Tt}function q$2(et,dt){if((Ht=et.length)>0)for(var kt,$t=0,Tt,Dt,Ft,Ut,Ht,Kt=et[dt[0]].length;$t<Kt;++$t)for(Ft=Ut=0,kt=0;kt<Ht;++kt)(Dt=(Tt=et[dt[kt]][$t])[1]-Tt[0])>0?(Tt[0]=Ft,Tt[1]=Ft+=Dt):Dt<0?(Tt[1]=Ut,Tt[0]=Ut+=Dt):(Tt[0]=0,Tt[1]=Dt)}function ascending(et,dt){return et==null||dt==null?NaN:et<dt?-1:et>dt?1:et>=dt?0:NaN}function descending(et,dt){return et==null||dt==null?NaN:dt<et?-1:dt>et?1:dt>=et?0:NaN}function bisector(et){let dt,kt,$t;et.length!==2?(dt=ascending,kt=(Ut,Ht)=>ascending(et(Ut),Ht),$t=(Ut,Ht)=>et(Ut)-Ht):(dt=et===ascending||et===descending?et:zero,kt=et,$t=et);function Tt(Ut,Ht,Kt=0,Yt=Ut.length){if(Kt<Yt){if(dt(Ht,Ht)!==0)return Yt;do{const Jt=Kt+Yt>>>1;kt(Ut[Jt],Ht)<0?Kt=Jt+1:Yt=Jt}while(Kt<Yt)}return Kt}function Dt(Ut,Ht,Kt=0,Yt=Ut.length){if(Kt<Yt){if(dt(Ht,Ht)!==0)return Yt;do{const Jt=Kt+Yt>>>1;kt(Ut[Jt],Ht)<=0?Kt=Jt+1:Yt=Jt}while(Kt<Yt)}return Kt}function Ft(Ut,Ht,Kt=0,Yt=Ut.length){const Jt=Tt(Ut,Ht,Kt,Yt-1);return Jt>Kt&&$t(Ut[Jt-1],Ht)>-$t(Ut[Jt],Ht)?Jt-1:Jt}return{left:Tt,center:Ft,right:Dt}}function zero(){return 0}function number$2(et){return et===null?NaN:+et}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;const bisect=bisectRight;class InternMap extends Map{constructor(dt,kt=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:kt}}),dt!=null)for(const[$t,Tt]of dt)this.set($t,Tt)}get(dt){return super.get(intern_get(this,dt))}has(dt){return super.has(intern_get(this,dt))}set(dt,kt){return super.set(intern_set(this,dt),kt)}delete(dt){return super.delete(intern_delete(this,dt))}}function intern_get({_intern:et,_key:dt},kt){const $t=dt(kt);return et.has($t)?et.get($t):kt}function intern_set({_intern:et,_key:dt},kt){const $t=dt(kt);return et.has($t)?et.get($t):(et.set($t,kt),kt)}function intern_delete({_intern:et,_key:dt},kt){const $t=dt(kt);return et.has($t)&&(kt=et.get($t),et.delete($t)),kt}function keyof(et){return et!==null&&typeof et=="object"?et.valueOf():et}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(et,dt,kt){const $t=(dt-et)/Math.max(0,kt),Tt=Math.floor(Math.log10($t)),Dt=$t/Math.pow(10,Tt),Ft=Dt>=e10?10:Dt>=e5?5:Dt>=e2?2:1;let Ut,Ht,Kt;return Tt<0?(Kt=Math.pow(10,-Tt)/Ft,Ut=Math.round(et*Kt),Ht=Math.round(dt*Kt),Ut/Kt<et&&++Ut,Ht/Kt>dt&&--Ht,Kt=-Kt):(Kt=Math.pow(10,Tt)*Ft,Ut=Math.round(et/Kt),Ht=Math.round(dt/Kt),Ut*Kt<et&&++Ut,Ht*Kt>dt&&--Ht),Ht<Ut&&.5<=kt&&kt<2?tickSpec(et,dt,kt*2):[Ut,Ht,Kt]}function ticks(et,dt,kt){if(dt=+dt,et=+et,kt=+kt,!(kt>0))return[];if(et===dt)return[et];const $t=dt<et,[Tt,Dt,Ft]=$t?tickSpec(dt,et,kt):tickSpec(et,dt,kt);if(!(Dt>=Tt))return[];const Ut=Dt-Tt+1,Ht=new Array(Ut);if($t)if(Ft<0)for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Dt-Kt)/-Ft;else for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Dt-Kt)*Ft;else if(Ft<0)for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Tt+Kt)/-Ft;else for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Tt+Kt)*Ft;return Ht}function tickIncrement(et,dt,kt){return dt=+dt,et=+et,kt=+kt,tickSpec(et,dt,kt)[2]}function tickStep(et,dt,kt){dt=+dt,et=+et,kt=+kt;const $t=dt<et,Tt=$t?tickIncrement(dt,et,kt):tickIncrement(et,dt,kt);return($t?-1:1)*(Tt<0?1/-Tt:Tt)}function range(et,dt,kt){et=+et,dt=+dt,kt=(Tt=arguments.length)<2?(dt=et,et=0,1):Tt<3?1:+kt;for(var $t=-1,Tt=Math.max(0,Math.ceil((dt-et)/kt))|0,Dt=new Array(Tt);++$t<Tt;)Dt[$t]=et+$t*kt;return Dt}function initRange(et,dt){switch(arguments.length){case 0:break;case 1:this.range(et);break;default:this.range(dt).domain(et);break}return this}const implicit=Symbol("implicit");function ordinal(){var et=new InternMap,dt=[],kt=[],$t=implicit;function Tt(Dt){let Ft=et.get(Dt);if(Ft===void 0){if($t!==implicit)return $t;et.set(Dt,Ft=dt.push(Dt)-1)}return kt[Ft%kt.length]}return Tt.domain=function(Dt){if(!arguments.length)return dt.slice();dt=[],et=new InternMap;for(const Ft of Dt)et.has(Ft)||et.set(Ft,dt.push(Ft)-1);return Tt},Tt.range=function(Dt){return arguments.length?(kt=Array.from(Dt),Tt):kt.slice()},Tt.unknown=function(Dt){return arguments.length?($t=Dt,Tt):$t},Tt.copy=function(){return ordinal(dt,kt).unknown($t)},initRange.apply(Tt,arguments),Tt}function band(){var et=ordinal().unknown(void 0),dt=et.domain,kt=et.range,$t=0,Tt=1,Dt,Ft,Ut=!1,Ht=0,Kt=0,Yt=.5;delete et.unknown;function Jt(){var Zt=dt().length,er=Tt<$t,rr=er?Tt:$t,sr=er?$t:Tt;Dt=(sr-rr)/Math.max(1,Zt-Ht+Kt*2),Ut&&(Dt=Math.floor(Dt)),rr+=(sr-rr-Dt*(Zt-Ht))*Yt,Ft=Dt*(1-Ht),Ut&&(rr=Math.round(rr),Ft=Math.round(Ft));var nr=range(Zt).map(function(ir){return rr+Dt*ir});return kt(er?nr.reverse():nr)}return et.domain=function(Zt){return arguments.length?(dt(Zt),Jt()):dt()},et.range=function(Zt){return arguments.length?([$t,Tt]=Zt,$t=+$t,Tt=+Tt,Jt()):[$t,Tt]},et.rangeRound=function(Zt){return[$t,Tt]=Zt,$t=+$t,Tt=+Tt,Ut=!0,Jt()},et.bandwidth=function(){return Ft},et.step=function(){return Dt},et.round=function(Zt){return arguments.length?(Ut=!!Zt,Jt()):Ut},et.padding=function(Zt){return arguments.length?(Ht=Math.min(1,Kt=+Zt),Jt()):Ht},et.paddingInner=function(Zt){return arguments.length?(Ht=Math.min(1,Zt),Jt()):Ht},et.paddingOuter=function(Zt){return arguments.length?(Kt=+Zt,Jt()):Kt},et.align=function(Zt){return arguments.length?(Yt=Math.max(0,Math.min(1,Zt)),Jt()):Yt},et.copy=function(){return band(dt(),[$t,Tt]).round(Ut).paddingInner(Ht).paddingOuter(Kt).align(Yt)},initRange.apply(Jt(),arguments)}function pointish(et){var dt=et.copy;return et.padding=et.paddingOuter,delete et.paddingInner,delete et.paddingOuter,et.copy=function(){return pointish(dt())},et}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(et){return function(){return et}}function number$1(et){return+et}var unit=[0,1];function identity$3(et){return et}function normalize(et,dt){return(dt-=et=+et)?function(kt){return(kt-et)/dt}:constants(isNaN(dt)?NaN:.5)}function clamper(et,dt){var kt;return et>dt&&(kt=et,et=dt,dt=kt),function($t){return Math.max(et,Math.min(dt,$t))}}function bimap(et,dt,kt){var $t=et[0],Tt=et[1],Dt=dt[0],Ft=dt[1];return Tt<$t?($t=normalize(Tt,$t),Dt=kt(Ft,Dt)):($t=normalize($t,Tt),Dt=kt(Dt,Ft)),function(Ut){return Dt($t(Ut))}}function polymap(et,dt,kt){var $t=Math.min(et.length,dt.length)-1,Tt=new Array($t),Dt=new Array($t),Ft=-1;for(et[$t]<et[0]&&(et=et.slice().reverse(),dt=dt.slice().reverse());++Ft<$t;)Tt[Ft]=normalize(et[Ft],et[Ft+1]),Dt[Ft]=kt(dt[Ft],dt[Ft+1]);return function(Ut){var Ht=bisect(et,Ut,1,$t)-1;return Dt[Ht](Tt[Ht](Ut))}}function copy(et,dt){return dt.domain(et.domain()).range(et.range()).interpolate(et.interpolate()).clamp(et.clamp()).unknown(et.unknown())}function transformer(){var et=unit,dt=unit,kt=interpolate$4,$t,Tt,Dt,Ft=identity$3,Ut,Ht,Kt;function Yt(){var Zt=Math.min(et.length,dt.length);return Ft!==identity$3&&(Ft=clamper(et[0],et[Zt-1])),Ut=Zt>2?polymap:bimap,Ht=Kt=null,Jt}function Jt(Zt){return Zt==null||isNaN(Zt=+Zt)?Dt:(Ht||(Ht=Ut(et.map($t),dt,kt)))($t(Ft(Zt)))}return Jt.invert=function(Zt){return Ft(Tt((Kt||(Kt=Ut(dt,et.map($t),p$2)))(Zt)))},Jt.domain=function(Zt){return arguments.length?(et=Array.from(Zt,number$1),Yt()):et.slice()},Jt.range=function(Zt){return arguments.length?(dt=Array.from(Zt),Yt()):dt.slice()},Jt.rangeRound=function(Zt){return dt=Array.from(Zt),kt=v$2,Yt()},Jt.clamp=function(Zt){return arguments.length?(Ft=Zt?!0:identity$3,Yt()):Ft!==identity$3},Jt.interpolate=function(Zt){return arguments.length?(kt=Zt,Yt()):kt},Jt.unknown=function(Zt){return arguments.length?(Dt=Zt,Jt):Dt},function(Zt,er){return $t=Zt,Tt=er,Yt()}}function continuous(){return transformer()(identity$3,identity$3)}function formatDecimal(et){return Math.abs(et=Math.round(et))>=1e21?et.toLocaleString("en").replace(/,/g,""):et.toString(10)}function formatDecimalParts(et,dt){if((kt=(et=dt?et.toExponential(dt-1):et.toExponential()).indexOf("e"))<0)return null;var kt,$t=et.slice(0,kt);return[$t.length>1?$t[0]+$t.slice(2):$t,+et.slice(kt+1)]}function exponent(et){return et=formatDecimalParts(Math.abs(et)),et?et[1]:NaN}function formatGroup(et,dt){return function(kt,$t){for(var Tt=kt.length,Dt=[],Ft=0,Ut=et[0],Ht=0;Tt>0&&Ut>0&&(Ht+Ut+1>$t&&(Ut=Math.max(1,$t-Ht)),Dt.push(kt.substring(Tt-=Ut,Tt+Ut)),!((Ht+=Ut+1)>$t));)Ut=et[Ft=(Ft+1)%et.length];return Dt.reverse().join(dt)}}function formatNumerals(et){return function(dt){return dt.replace(/[0-9]/g,function(kt){return et[+kt]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(et){if(!(dt=re$1.exec(et)))throw new Error("invalid format: "+et);var dt;return new FormatSpecifier({fill:dt[1],align:dt[2],sign:dt[3],symbol:dt[4],zero:dt[5],width:dt[6],comma:dt[7],precision:dt[8]&&dt[8].slice(1),trim:dt[9],type:dt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(et){this.fill=et.fill===void 0?" ":et.fill+"",this.align=et.align===void 0?">":et.align+"",this.sign=et.sign===void 0?"-":et.sign+"",this.symbol=et.symbol===void 0?"":et.symbol+"",this.zero=!!et.zero,this.width=et.width===void 0?void 0:+et.width,this.comma=!!et.comma,this.precision=et.precision===void 0?void 0:+et.precision,this.trim=!!et.trim,this.type=et.type===void 0?"":et.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(et){e:for(var dt=et.length,kt=1,$t=-1,Tt;kt<dt;++kt)switch(et[kt]){case".":$t=Tt=kt;break;case"0":$t===0&&($t=kt),Tt=kt;break;default:if(!+et[kt])break e;$t>0&&($t=0);break}return $t>0?et.slice(0,$t)+et.slice(Tt+1):et}var prefixExponent;function formatPrefixAuto(et,dt){var kt=formatDecimalParts(et,dt);if(!kt)return et+"";var $t=kt[0],Tt=kt[1],Dt=Tt-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(Tt/3)))*3)+1,Ft=$t.length;return Dt===Ft?$t:Dt>Ft?$t+new Array(Dt-Ft+1).join("0"):Dt>0?$t.slice(0,Dt)+"."+$t.slice(Dt):"0."+new Array(1-Dt).join("0")+formatDecimalParts(et,Math.max(0,dt+Dt-1))[0]}function formatRounded(et,dt){var kt=formatDecimalParts(et,dt);if(!kt)return et+"";var $t=kt[0],Tt=kt[1];return Tt<0?"0."+new Array(-Tt).join("0")+$t:$t.length>Tt+1?$t.slice(0,Tt+1)+"."+$t.slice(Tt+1):$t+new Array(Tt-$t.length+2).join("0")}const formatTypes={"%":function(et,dt){return(et*100).toFixed(dt)},b:function(et){return Math.round(et).toString(2)},c:function(et){return et+""},d:formatDecimal,e:function(et,dt){return et.toExponential(dt)},f:function(et,dt){return et.toFixed(dt)},g:function(et,dt){return et.toPrecision(dt)},o:function(et){return Math.round(et).toString(8)},p:function(et,dt){return formatRounded(et*100,dt)},r:formatRounded,s:formatPrefixAuto,X:function(et){return Math.round(et).toString(16).toUpperCase()},x:function(et){return Math.round(et).toString(16)}};function identity$2(et){return et}var map=Array.prototype.map,prefixes$4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(et){var dt=et.grouping===void 0||et.thousands===void 0?identity$2:formatGroup(map.call(et.grouping,Number),et.thousands+""),kt=et.currency===void 0?"":et.currency[0]+"",$t=et.currency===void 0?"":et.currency[1]+"",Tt=et.decimal===void 0?".":et.decimal+"",Dt=et.numerals===void 0?identity$2:formatNumerals(map.call(et.numerals,String)),Ft=et.percent===void 0?"%":et.percent+"",Ut=et.minus===void 0?"-":et.minus+"",Ht=et.nan===void 0?"NaN":et.nan+"";function Kt(Jt){Jt=formatSpecifier(Jt);var Zt=Jt.fill,er=Jt.align,rr=Jt.sign,sr=Jt.symbol,nr=Jt.zero,ir=Jt.width,lr=Jt.comma,or=Jt.precision,cr=Jt.trim,dr=Jt.type;dr==="n"?(lr=!0,dr="g"):formatTypes[dr]||(or===void 0&&(or=12),cr=!0,dr="g"),(nr||Zt==="0"&&er==="=")&&(nr=!0,Zt="0",er="=");var ur=sr==="$"?kt:sr==="#"&&/[boxX]/.test(dr)?"0"+dr.toLowerCase():"",pr=sr==="$"?$t:/[%p]/.test(dr)?Ft:"",mr=formatTypes[dr],jr=/[defgprs%]/.test(dr);or=or===void 0?6:/[gprs]/.test(dr)?Math.max(1,Math.min(21,or)):Math.max(0,Math.min(20,or));function Rr(br){var _r=ur,Mr=pr,Pr,Or,kr;if(dr==="c")Mr=mr(br)+Mr,br="";else{br=+br;var Tr=br<0||1/br<0;if(br=isNaN(br)?Ht:mr(Math.abs(br),or),cr&&(br=formatTrim(br)),Tr&&+br==0&&rr!=="+"&&(Tr=!1),_r=(Tr?rr==="("?rr:Ut:rr==="-"||rr==="("?"":rr)+_r,Mr=(dr==="s"?prefixes$4[8+prefixExponent/3]:"")+Mr+(Tr&&rr==="("?")":""),jr){for(Pr=-1,Or=br.length;++Pr<Or;)if(kr=br.charCodeAt(Pr),48>kr||kr>57){Mr=(kr===46?Tt+br.slice(Pr+1):br.slice(Pr))+Mr,br=br.slice(0,Pr);break}}}lr&&!nr&&(br=dt(br,1/0));var xr=_r.length+br.length+Mr.length,wr=xr<ir?new Array(ir-xr+1).join(Zt):"";switch(lr&&nr&&(br=dt(wr+br,wr.length?ir-Mr.length:1/0),wr=""),er){case"<":br=_r+br+Mr+wr;break;case"=":br=_r+wr+br+Mr;break;case"^":br=wr.slice(0,xr=wr.length>>1)+_r+br+Mr+wr.slice(xr);break;default:br=wr+_r+br+Mr;break}return Dt(br)}return Rr.toString=function(){return Jt+""},Rr}function Yt(Jt,Zt){var er=Kt((Jt=formatSpecifier(Jt),Jt.type="f",Jt)),rr=Math.max(-8,Math.min(8,Math.floor(exponent(Zt)/3)))*3,sr=Math.pow(10,-rr),nr=prefixes$4[8+rr/3];return function(ir){return er(sr*ir)+nr}}return{format:Kt,formatPrefix:Yt}}var locale$1,format,formatPrefix;defaultLocale$1({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function defaultLocale$1(et){return locale$1=formatLocale$1(et),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(et){return Math.max(0,-exponent(Math.abs(et)))}function precisionPrefix(et,dt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(dt)/3)))*3-exponent(Math.abs(et)))}function precisionRound(et,dt){return et=Math.abs(et),dt=Math.abs(dt)-et,Math.max(0,exponent(dt)-exponent(et))+1}function tickFormat(et,dt,kt,$t){var Tt=tickStep(et,dt,kt),Dt;switch($t=formatSpecifier($t??",f"),$t.type){case"s":{var Ft=Math.max(Math.abs(et),Math.abs(dt));return $t.precision==null&&!isNaN(Dt=precisionPrefix(Tt,Ft))&&($t.precision=Dt),formatPrefix($t,Ft)}case"":case"e":case"g":case"p":case"r":{$t.precision==null&&!isNaN(Dt=precisionRound(Tt,Math.max(Math.abs(et),Math.abs(dt))))&&($t.precision=Dt-($t.type==="e"));break}case"f":case"%":{$t.precision==null&&!isNaN(Dt=precisionFixed(Tt))&&($t.precision=Dt-($t.type==="%")*2);break}}return format($t)}function linearish(et){var dt=et.domain;return et.ticks=function(kt){var $t=dt();return ticks($t[0],$t[$t.length-1],kt??10)},et.tickFormat=function(kt,$t){var Tt=dt();return tickFormat(Tt[0],Tt[Tt.length-1],kt??10,$t)},et.nice=function(kt){kt==null&&(kt=10);var $t=dt(),Tt=0,Dt=$t.length-1,Ft=$t[Tt],Ut=$t[Dt],Ht,Kt,Yt=10;for(Ut<Ft&&(Kt=Ft,Ft=Ut,Ut=Kt,Kt=Tt,Tt=Dt,Dt=Kt);Yt-- >0;){if(Kt=tickIncrement(Ft,Ut,kt),Kt===Ht)return $t[Tt]=Ft,$t[Dt]=Ut,dt($t);if(Kt>0)Ft=Math.floor(Ft/Kt)*Kt,Ut=Math.ceil(Ut/Kt)*Kt;else if(Kt<0)Ft=Math.ceil(Ft*Kt)/Kt,Ut=Math.floor(Ut*Kt)/Kt;else break;Ht=Kt}return et},et}function linear(){var et=continuous();return et.copy=function(){return copy(et,linear())},initRange.apply(et,arguments),linearish(et)}function nice(et,dt){et=et.slice();var kt=0,$t=et.length-1,Tt=et[kt],Dt=et[$t],Ft;return Dt<Tt&&(Ft=kt,kt=$t,$t=Ft,Ft=Tt,Tt=Dt,Dt=Ft),et[kt]=dt.floor(Tt),et[$t]=dt.ceil(Dt),et}function transformLog(et){return Math.log(et)}function transformExp(et){return Math.exp(et)}function transformLogn(et){return-Math.log(-et)}function transformExpn(et){return-Math.exp(-et)}function pow10(et){return isFinite(et)?+("1e"+et):et<0?0:et}function powp(et){return et===10?pow10:et===Math.E?Math.exp:dt=>Math.pow(et,dt)}function logp(et){return et===Math.E?Math.log:et===10&&Math.log10||et===2&&Math.log2||(et=Math.log(et),dt=>Math.log(dt)/et)}function reflect(et){return(dt,kt)=>-et(-dt,kt)}function loggish(et){const dt=et(transformLog,transformExp),kt=dt.domain;let $t=10,Tt,Dt;function Ft(){return Tt=logp($t),Dt=powp($t),kt()[0]<0?(Tt=reflect(Tt),Dt=reflect(Dt),et(transformLogn,transformExpn)):et(transformLog,transformExp),dt}return dt.base=function(Ut){return arguments.length?($t=+Ut,Ft()):$t},dt.domain=function(Ut){return arguments.length?(kt(Ut),Ft()):kt()},dt.ticks=Ut=>{const Ht=kt();let Kt=Ht[0],Yt=Ht[Ht.length-1];const Jt=Yt<Kt;Jt&&([Kt,Yt]=[Yt,Kt]);let Zt=Tt(Kt),er=Tt(Yt),rr,sr;const nr=Ut==null?10:+Ut;let ir=[];if(!($t%1)&&er-Zt<nr){if(Zt=Math.floor(Zt),er=Math.ceil(er),Kt>0){for(;Zt<=er;++Zt)for(rr=1;rr<$t;++rr)if(sr=Zt<0?rr/Dt(-Zt):rr*Dt(Zt),!(sr<Kt)){if(sr>Yt)break;ir.push(sr)}}else for(;Zt<=er;++Zt)for(rr=$t-1;rr>=1;--rr)if(sr=Zt>0?rr/Dt(-Zt):rr*Dt(Zt),!(sr<Kt)){if(sr>Yt)break;ir.push(sr)}ir.length*2<nr&&(ir=ticks(Kt,Yt,nr))}else ir=ticks(Zt,er,Math.min(er-Zt,nr)).map(Dt);return Jt?ir.reverse():ir},dt.tickFormat=(Ut,Ht)=>{if(Ut==null&&(Ut=10),Ht==null&&(Ht=$t===10?"s":","),typeof Ht!="function"&&(!($t%1)&&(Ht=formatSpecifier(Ht)).precision==null&&(Ht.trim=!0),Ht=format(Ht)),Ut===1/0)return Ht;const Kt=Math.max(1,$t*Ut/dt.ticks().length);return Yt=>{let Jt=Yt/Dt(Math.round(Tt(Yt)));return Jt*$t<$t-.5&&(Jt*=$t),Jt<=Kt?Ht(Yt):""}},dt.nice=()=>kt(nice(kt(),{floor:Ut=>Dt(Math.floor(Tt(Ut))),ceil:Ut=>Dt(Math.ceil(Tt(Ut)))})),dt}function log(){const et=loggish(transformer()).domain([1,10]);return et.copy=()=>copy(et,log()).base(et.base()),initRange.apply(et,arguments),et}function transformSymlog(et){return function(dt){return Math.sign(dt)*Math.log1p(Math.abs(dt/et))}}function transformSymexp(et){return function(dt){return Math.sign(dt)*Math.expm1(Math.abs(dt))*et}}function symlogish(et){var dt=1,kt=et(transformSymlog(dt),transformSymexp(dt));return kt.constant=function($t){return arguments.length?et(transformSymlog(dt=+$t),transformSymexp(dt)):dt},linearish(kt)}function symlog(){var et=symlogish(transformer());return et.copy=function(){return copy(et,symlog()).constant(et.constant())},initRange.apply(et,arguments)}const t0$1=new Date,t1$1=new Date;function timeInterval(et,dt,kt,$t){function Tt(Dt){return et(Dt=arguments.length===0?new Date:new Date(+Dt)),Dt}return Tt.floor=Dt=>(et(Dt=new Date(+Dt)),Dt),Tt.ceil=Dt=>(et(Dt=new Date(Dt-1)),dt(Dt,1),et(Dt),Dt),Tt.round=Dt=>{const Ft=Tt(Dt),Ut=Tt.ceil(Dt);return Dt-Ft<Ut-Dt?Ft:Ut},Tt.offset=(Dt,Ft)=>(dt(Dt=new Date(+Dt),Ft==null?1:Math.floor(Ft)),Dt),Tt.range=(Dt,Ft,Ut)=>{const Ht=[];if(Dt=Tt.ceil(Dt),Ut=Ut==null?1:Math.floor(Ut),!(Dt<Ft)||!(Ut>0))return Ht;let Kt;do Ht.push(Kt=new Date(+Dt)),dt(Dt,Ut),et(Dt);while(Kt<Dt&&Dt<Ft);return Ht},Tt.filter=Dt=>timeInterval(Ft=>{if(Ft>=Ft)for(;et(Ft),!Dt(Ft);)Ft.setTime(Ft-1)},(Ft,Ut)=>{if(Ft>=Ft)if(Ut<0)for(;++Ut<=0;)for(;dt(Ft,-1),!Dt(Ft););else for(;--Ut>=0;)for(;dt(Ft,1),!Dt(Ft););}),kt&&(Tt.count=(Dt,Ft)=>(t0$1.setTime(+Dt),t1$1.setTime(+Ft),et(t0$1),et(t1$1),Math.floor(kt(t0$1,t1$1))),Tt.every=Dt=>(Dt=Math.floor(Dt),!isFinite(Dt)||!(Dt>0)?null:Dt>1?Tt.filter($t?Ft=>$t(Ft)%Dt===0:Ft=>Tt.count(0,Ft)%Dt===0):Tt)),Tt}const millisecond$1=timeInterval(()=>{},(et,dt)=>{et.setTime(+et+dt)},(et,dt)=>dt-et);millisecond$1.every=et=>(et=Math.floor(et),!isFinite(et)||!(et>0)?null:et>1?timeInterval(dt=>{dt.setTime(Math.floor(dt/et)*et)},(dt,kt)=>{dt.setTime(+dt+kt*et)},(dt,kt)=>(kt-dt)/et):millisecond$1);millisecond$1.range;const durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth=durationDay$1*30,durationYear=durationDay$1*365,second$1=timeInterval(et=>{et.setTime(et-et.getMilliseconds())},(et,dt)=>{et.setTime(+et+dt*durationSecond$1)},(et,dt)=>(dt-et)/durationSecond$1,et=>et.getUTCSeconds());second$1.range;const timeMinute=timeInterval(et=>{et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond$1)},(et,dt)=>{et.setTime(+et+dt*durationMinute$1)},(et,dt)=>(dt-et)/durationMinute$1,et=>et.getMinutes());timeMinute.range;const utcMinute$1=timeInterval(et=>{et.setUTCSeconds(0,0)},(et,dt)=>{et.setTime(+et+dt*durationMinute$1)},(et,dt)=>(dt-et)/durationMinute$1,et=>et.getUTCMinutes());utcMinute$1.range;const timeHour=timeInterval(et=>{et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond$1-et.getMinutes()*durationMinute$1)},(et,dt)=>{et.setTime(+et+dt*durationHour$1)},(et,dt)=>(dt-et)/durationHour$1,et=>et.getHours());timeHour.range;const utcHour$1=timeInterval(et=>{et.setUTCMinutes(0,0,0)},(et,dt)=>{et.setTime(+et+dt*durationHour$1)},(et,dt)=>(dt-et)/durationHour$1,et=>et.getUTCHours());utcHour$1.range;const timeDay$1=timeInterval(et=>et.setHours(0,0,0,0),(et,dt)=>et.setDate(et.getDate()+dt),(et,dt)=>(dt-et-(dt.getTimezoneOffset()-et.getTimezoneOffset())*durationMinute$1)/durationDay$1,et=>et.getDate()-1);timeDay$1.range;const utcDay$2=timeInterval(et=>{et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCDate(et.getUTCDate()+dt)},(et,dt)=>(dt-et)/durationDay$1,et=>et.getUTCDate()-1);utcDay$2.range;const unixDay=timeInterval(et=>{et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCDate(et.getUTCDate()+dt)},(et,dt)=>(dt-et)/durationDay$1,et=>Math.floor(et/durationDay$1));unixDay.range;function timeWeekday(et){return timeInterval(dt=>{dt.setDate(dt.getDate()-(dt.getDay()+7-et)%7),dt.setHours(0,0,0,0)},(dt,kt)=>{dt.setDate(dt.getDate()+kt*7)},(dt,kt)=>(kt-dt-(kt.getTimezoneOffset()-dt.getTimezoneOffset())*durationMinute$1)/durationWeek$1)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday$1(et){return timeInterval(dt=>{dt.setUTCDate(dt.getUTCDate()-(dt.getUTCDay()+7-et)%7),dt.setUTCHours(0,0,0,0)},(dt,kt)=>{dt.setUTCDate(dt.getUTCDate()+kt*7)},(dt,kt)=>(kt-dt)/durationWeek$1)}const utcSunday$1=utcWeekday$1(0),utcMonday$1=utcWeekday$1(1),utcTuesday$1=utcWeekday$1(2),utcWednesday$1=utcWeekday$1(3),utcThursday$1=utcWeekday$1(4),utcFriday$1=utcWeekday$1(5),utcSaturday$1=utcWeekday$1(6);utcSunday$1.range;utcMonday$1.range;utcTuesday$1.range;utcWednesday$1.range;utcThursday$1.range;utcFriday$1.range;utcSaturday$1.range;const timeMonth=timeInterval(et=>{et.setDate(1),et.setHours(0,0,0,0)},(et,dt)=>{et.setMonth(et.getMonth()+dt)},(et,dt)=>dt.getMonth()-et.getMonth()+(dt.getFullYear()-et.getFullYear())*12,et=>et.getMonth());timeMonth.range;const utcMonth$1=timeInterval(et=>{et.setUTCDate(1),et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCMonth(et.getUTCMonth()+dt)},(et,dt)=>dt.getUTCMonth()-et.getUTCMonth()+(dt.getUTCFullYear()-et.getUTCFullYear())*12,et=>et.getUTCMonth());utcMonth$1.range;const timeYear=timeInterval(et=>{et.setMonth(0,1),et.setHours(0,0,0,0)},(et,dt)=>{et.setFullYear(et.getFullYear()+dt)},(et,dt)=>dt.getFullYear()-et.getFullYear(),et=>et.getFullYear());timeYear.every=et=>!isFinite(et=Math.floor(et))||!(et>0)?null:timeInterval(dt=>{dt.setFullYear(Math.floor(dt.getFullYear()/et)*et),dt.setMonth(0,1),dt.setHours(0,0,0,0)},(dt,kt)=>{dt.setFullYear(dt.getFullYear()+kt*et)});timeYear.range;const utcYear$1=timeInterval(et=>{et.setUTCMonth(0,1),et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCFullYear(et.getUTCFullYear()+dt)},(et,dt)=>dt.getUTCFullYear()-et.getUTCFullYear(),et=>et.getUTCFullYear());utcYear$1.every=et=>!isFinite(et=Math.floor(et))||!(et>0)?null:timeInterval(dt=>{dt.setUTCFullYear(Math.floor(dt.getUTCFullYear()/et)*et),dt.setUTCMonth(0,1),dt.setUTCHours(0,0,0,0)},(dt,kt)=>{dt.setUTCFullYear(dt.getUTCFullYear()+kt*et)});utcYear$1.range;function ticker(et,dt,kt,$t,Tt,Dt){const Ft=[[second$1,1,durationSecond$1],[second$1,5,5*durationSecond$1],[second$1,15,15*durationSecond$1],[second$1,30,30*durationSecond$1],[Dt,1,durationMinute$1],[Dt,5,5*durationMinute$1],[Dt,15,15*durationMinute$1],[Dt,30,30*durationMinute$1],[Tt,1,durationHour$1],[Tt,3,3*durationHour$1],[Tt,6,6*durationHour$1],[Tt,12,12*durationHour$1],[$t,1,durationDay$1],[$t,2,2*durationDay$1],[kt,1,durationWeek$1],[dt,1,durationMonth],[dt,3,3*durationMonth],[et,1,durationYear]];function Ut(Kt,Yt,Jt){const Zt=Yt<Kt;Zt&&([Kt,Yt]=[Yt,Kt]);const er=Jt&&typeof Jt.range=="function"?Jt:Ht(Kt,Yt,Jt),rr=er?er.range(Kt,+Yt+1):[];return Zt?rr.reverse():rr}function Ht(Kt,Yt,Jt){const Zt=Math.abs(Yt-Kt)/Jt,er=bisector(([,,nr])=>nr).right(Ft,Zt);if(er===Ft.length)return et.every(tickStep(Kt/durationYear,Yt/durationYear,Jt));if(er===0)return millisecond$1.every(Math.max(tickStep(Kt,Yt,Jt),1));const[rr,sr]=Ft[Zt/Ft[er-1][2]<Ft[er][2]/Zt?er-1:er];return rr.every(sr)}return[Ut,Ht]}const[utcTicks,utcTickInterval]=ticker(utcYear$1,utcMonth$1,utcSunday$1,unixDay,utcHour$1,utcMinute$1),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay$1,timeHour,timeMinute);var t0=new Date,t1=new Date;function newInterval(et,dt,kt,$t){function Tt(Dt){return et(Dt=arguments.length===0?new Date:new Date(+Dt)),Dt}return Tt.floor=function(Dt){return et(Dt=new Date(+Dt)),Dt},Tt.ceil=function(Dt){return et(Dt=new Date(Dt-1)),dt(Dt,1),et(Dt),Dt},Tt.round=function(Dt){var Ft=Tt(Dt),Ut=Tt.ceil(Dt);return Dt-Ft<Ut-Dt?Ft:Ut},Tt.offset=function(Dt,Ft){return dt(Dt=new Date(+Dt),Ft==null?1:Math.floor(Ft)),Dt},Tt.range=function(Dt,Ft,Ut){var Ht=[],Kt;if(Dt=Tt.ceil(Dt),Ut=Ut==null?1:Math.floor(Ut),!(Dt<Ft)||!(Ut>0))return Ht;do Ht.push(Kt=new Date(+Dt)),dt(Dt,Ut),et(Dt);while(Kt<Dt&&Dt<Ft);return Ht},Tt.filter=function(Dt){return newInterval(function(Ft){if(Ft>=Ft)for(;et(Ft),!Dt(Ft);)Ft.setTime(Ft-1)},function(Ft,Ut){if(Ft>=Ft)if(Ut<0)for(;++Ut<=0;)for(;dt(Ft,-1),!Dt(Ft););else for(;--Ut>=0;)for(;dt(Ft,1),!Dt(Ft););})},kt&&(Tt.count=function(Dt,Ft){return t0.setTime(+Dt),t1.setTime(+Ft),et(t0),et(t1),Math.floor(kt(t0,t1))},Tt.every=function(Dt){return Dt=Math.floor(Dt),!isFinite(Dt)||!(Dt>0)?null:Dt>1?Tt.filter($t?function(Ft){return $t(Ft)%Dt===0}:function(Ft){return Tt.count(0,Ft)%Dt===0}):Tt}),Tt}var millisecond=newInterval(function(){},function(et,dt){et.setTime(+et+dt)},function(et,dt){return dt-et});millisecond.every=function(et){return et=Math.floor(et),!isFinite(et)||!(et>0)?null:et>1?newInterval(function(dt){dt.setTime(Math.floor(dt/et)*et)},function(dt,kt){dt.setTime(+dt+kt*et)},function(dt,kt){return(kt-dt)/et}):millisecond};const g$1=millisecond;millisecond.range;var durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval(function(et){et.setTime(et-et.getMilliseconds())},function(et,dt){et.setTime(+et+dt*durationSecond)},function(et,dt){return(dt-et)/durationSecond},function(et){return et.getUTCSeconds()});const k$3=second;second.range;var minute=newInterval(function(et){et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond)},function(et,dt){et.setTime(+et+dt*durationMinute)},function(et,dt){return(dt-et)/durationMinute},function(et){return et.getMinutes()});const T$2=minute;minute.range;var hour=newInterval(function(et){et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond-et.getMinutes()*durationMinute)},function(et,dt){et.setTime(+et+dt*durationHour)},function(et,dt){return(dt-et)/durationHour},function(et){return et.getHours()});const M$1=hour;hour.range;var day=newInterval(function(et){et.setHours(0,0,0,0)},function(et,dt){et.setDate(et.getDate()+dt)},function(et,dt){return(dt-et-(dt.getTimezoneOffset()-et.getTimezoneOffset())*durationMinute)/durationDay},function(et){return et.getDate()-1});const timeDay=day;day.range;function weekday(et){return newInterval(function(dt){dt.setDate(dt.getDate()-(dt.getDay()+7-et)%7),dt.setHours(0,0,0,0)},function(dt,kt){dt.setDate(dt.getDate()+kt*7)},function(dt,kt){return(kt-dt-(kt.getTimezoneOffset()-dt.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6);sunday.range;monday.range;tuesday.range;wednesday.range;thursday.range;friday.range;saturday.range;var month=newInterval(function(et){et.setDate(1),et.setHours(0,0,0,0)},function(et,dt){et.setMonth(et.getMonth()+dt)},function(et,dt){return dt.getMonth()-et.getMonth()+(dt.getFullYear()-et.getFullYear())*12},function(et){return et.getMonth()});const I$1=month;month.range;var year=newInterval(function(et){et.setMonth(0,1),et.setHours(0,0,0,0)},function(et,dt){et.setFullYear(et.getFullYear()+dt)},function(et,dt){return dt.getFullYear()-et.getFullYear()},function(et){return et.getFullYear()});year.every=function(et){return!isFinite(et=Math.floor(et))||!(et>0)?null:newInterval(function(dt){dt.setFullYear(Math.floor(dt.getFullYear()/et)*et),dt.setMonth(0,1),dt.setHours(0,0,0,0)},function(dt,kt){dt.setFullYear(dt.getFullYear()+kt*et)})};const $$1=year;year.range;var utcMinute=newInterval(function(et){et.setUTCSeconds(0,0)},function(et,dt){et.setTime(+et+dt*durationMinute)},function(et,dt){return(dt-et)/durationMinute},function(et){return et.getUTCMinutes()});const b$3=utcMinute;utcMinute.range;var utcHour=newInterval(function(et){et.setUTCMinutes(0,0,0)},function(et,dt){et.setTime(+et+dt*durationHour)},function(et,dt){return(dt-et)/durationHour},function(et){return et.getUTCHours()});const w$3=utcHour;utcHour.range;var utcDay=newInterval(function(et){et.setUTCHours(0,0,0,0)},function(et,dt){et.setUTCDate(et.getUTCDate()+dt)},function(et,dt){return(dt-et)/durationDay},function(et){return et.getUTCDate()-1});const utcDay$1=utcDay;utcDay.range;function utcWeekday(et){return newInterval(function(dt){dt.setUTCDate(dt.getUTCDate()-(dt.getUTCDay()+7-et)%7),dt.setUTCHours(0,0,0,0)},function(dt,kt){dt.setUTCDate(dt.getUTCDate()+kt*7)},function(dt,kt){return(kt-dt)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;var utcMonth=newInterval(function(et){et.setUTCDate(1),et.setUTCHours(0,0,0,0)},function(et,dt){et.setUTCMonth(et.getUTCMonth()+dt)},function(et,dt){return dt.getUTCMonth()-et.getUTCMonth()+(dt.getUTCFullYear()-et.getUTCFullYear())*12},function(et){return et.getUTCMonth()});const P$1=utcMonth;utcMonth.range;var utcYear=newInterval(function(et){et.setUTCMonth(0,1),et.setUTCHours(0,0,0,0)},function(et,dt){et.setUTCFullYear(et.getUTCFullYear()+dt)},function(et,dt){return dt.getUTCFullYear()-et.getUTCFullYear()},function(et){return et.getUTCFullYear()});utcYear.every=function(et){return!isFinite(et=Math.floor(et))||!(et>0)?null:newInterval(function(dt){dt.setUTCFullYear(Math.floor(dt.getUTCFullYear()/et)*et),dt.setUTCMonth(0,1),dt.setUTCHours(0,0,0,0)},function(dt,kt){dt.setUTCFullYear(dt.getUTCFullYear()+kt*et)})};const G=utcYear;utcYear.range;function localDate(et){if(0<=et.y&&et.y<100){var dt=new Date(-1,et.m,et.d,et.H,et.M,et.S,et.L);return dt.setFullYear(et.y),dt}return new Date(et.y,et.m,et.d,et.H,et.M,et.S,et.L)}function utcDate(et){if(0<=et.y&&et.y<100){var dt=new Date(Date.UTC(-1,et.m,et.d,et.H,et.M,et.S,et.L));return dt.setUTCFullYear(et.y),dt}return new Date(Date.UTC(et.y,et.m,et.d,et.H,et.M,et.S,et.L))}function newDate(et,dt,kt){return{y:et,m:dt,d:kt,H:0,M:0,S:0,L:0}}function formatLocale(et){var dt=et.dateTime,kt=et.date,$t=et.time,Tt=et.periods,Dt=et.days,Ft=et.shortDays,Ut=et.months,Ht=et.shortMonths,Kt=formatRe(Tt),Yt=formatLookup(Tt),Jt=formatRe(Dt),Zt=formatLookup(Dt),er=formatRe(Ft),rr=formatLookup(Ft),sr=formatRe(Ut),nr=formatLookup(Ut),ir=formatRe(Ht),lr=formatLookup(Ht),or={a:Tr,A:xr,b:wr,B:zr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Hr,q:Yr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},cr={a:rs,A:as,b:es,B:Xr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Wr,q:cs,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},dr={a:Rr,A:br,b:_r,B:Mr,c:Pr,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:jr,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Or,X:kr,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};or.x=ur(kt,or),or.X=ur($t,or),or.c=ur(dt,or),cr.x=ur(kt,cr),cr.X=ur($t,cr),cr.c=ur(dt,cr);function ur(ns,us){return function(fs){var ss=[],ps=-1,ls=0,js=ns.length,$s,Ds,Ts;for(fs instanceof Date||(fs=new Date(+fs));++ps<js;)ns.charCodeAt(ps)===37&&(ss.push(ns.slice(ls,ps)),(Ds=pads[$s=ns.charAt(++ps)])!=null?$s=ns.charAt(++ps):Ds=$s==="e"?" ":"0",(Ts=us[$s])&&($s=Ts(fs,Ds)),ss.push($s),ls=ps+1);return ss.push(ns.slice(ls,ps)),ss.join("")}}function pr(ns,us){return function(fs){var ss=newDate(1900,void 0,1),ps=mr(ss,ns,fs+="",0),ls,js;if(ps!=fs.length)return null;if("Q"in ss)return new Date(ss.Q);if("s"in ss)return new Date(ss.s*1e3+("L"in ss?ss.L:0));if(us&&!("Z"in ss)&&(ss.Z=0),"p"in ss&&(ss.H=ss.H%12+ss.p*12),ss.m===void 0&&(ss.m="q"in ss?ss.q:0),"V"in ss){if(ss.V<1||ss.V>53)return null;"w"in ss||(ss.w=1),"Z"in ss?(ls=utcDate(newDate(ss.y,0,1)),js=ls.getUTCDay(),ls=js>4||js===0?utcMonday.ceil(ls):utcMonday(ls),ls=utcDay$1.offset(ls,(ss.V-1)*7),ss.y=ls.getUTCFullYear(),ss.m=ls.getUTCMonth(),ss.d=ls.getUTCDate()+(ss.w+6)%7):(ls=localDate(newDate(ss.y,0,1)),js=ls.getDay(),ls=js>4||js===0?monday.ceil(ls):monday(ls),ls=timeDay.offset(ls,(ss.V-1)*7),ss.y=ls.getFullYear(),ss.m=ls.getMonth(),ss.d=ls.getDate()+(ss.w+6)%7)}else("W"in ss||"U"in ss)&&("w"in ss||(ss.w="u"in ss?ss.u%7:"W"in ss?1:0),js="Z"in ss?utcDate(newDate(ss.y,0,1)).getUTCDay():localDate(newDate(ss.y,0,1)).getDay(),ss.m=0,ss.d="W"in ss?(ss.w+6)%7+ss.W*7-(js+5)%7:ss.w+ss.U*7-(js+6)%7);return"Z"in ss?(ss.H+=ss.Z/100|0,ss.M+=ss.Z%100,utcDate(ss)):localDate(ss)}}function mr(ns,us,fs,ss){for(var ps=0,ls=us.length,js=fs.length,$s,Ds;ps<ls;){if(ss>=js)return-1;if($s=us.charCodeAt(ps++),$s===37){if($s=us.charAt(ps++),Ds=dr[$s in pads?us.charAt(ps++):$s],!Ds||(ss=Ds(ns,fs,ss))<0)return-1}else if($s!=fs.charCodeAt(ss++))return-1}return ss}function jr(ns,us,fs){var ss=Kt.exec(us.slice(fs));return ss?(ns.p=Yt.get(ss[0].toLowerCase()),fs+ss[0].length):-1}function Rr(ns,us,fs){var ss=er.exec(us.slice(fs));return ss?(ns.w=rr.get(ss[0].toLowerCase()),fs+ss[0].length):-1}function br(ns,us,fs){var ss=Jt.exec(us.slice(fs));return ss?(ns.w=Zt.get(ss[0].toLowerCase()),fs+ss[0].length):-1}function _r(ns,us,fs){var ss=ir.exec(us.slice(fs));return ss?(ns.m=lr.get(ss[0].toLowerCase()),fs+ss[0].length):-1}function Mr(ns,us,fs){var ss=sr.exec(us.slice(fs));return ss?(ns.m=nr.get(ss[0].toLowerCase()),fs+ss[0].length):-1}function Pr(ns,us,fs){return mr(ns,dt,us,fs)}function Or(ns,us,fs){return mr(ns,kt,us,fs)}function kr(ns,us,fs){return mr(ns,$t,us,fs)}function Tr(ns){return Ft[ns.getDay()]}function xr(ns){return Dt[ns.getDay()]}function wr(ns){return Ht[ns.getMonth()]}function zr(ns){return Ut[ns.getMonth()]}function Hr(ns){return Tt[+(ns.getHours()>=12)]}function Yr(ns){return 1+~~(ns.getMonth()/3)}function rs(ns){return Ft[ns.getUTCDay()]}function as(ns){return Dt[ns.getUTCDay()]}function es(ns){return Ht[ns.getUTCMonth()]}function Xr(ns){return Ut[ns.getUTCMonth()]}function Wr(ns){return Tt[+(ns.getUTCHours()>=12)]}function cs(ns){return 1+~~(ns.getUTCMonth()/3)}return{format:function(ns){var us=ur(ns+="",or);return us.toString=function(){return ns},us},parse:function(ns){var us=pr(ns+="",!1);return us.toString=function(){return ns},us},utcFormat:function(ns){var us=ur(ns+="",cr);return us.toString=function(){return ns},us},utcParse:function(ns){var us=pr(ns+="",!0);return us.toString=function(){return ns},us}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(et,dt,kt){var $t=et<0?"-":"",Tt=($t?-et:et)+"",Dt=Tt.length;return $t+(Dt<kt?new Array(kt-Dt+1).join(dt)+Tt:Tt)}function requote(et){return et.replace(requoteRe,"\\$&")}function formatRe(et){return new RegExp("^(?:"+et.map(requote).join("|")+")","i")}function formatLookup(et){return new Map(et.map((dt,kt)=>[dt.toLowerCase(),kt]))}function parseWeekdayNumberSunday(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+1));return $t?(et.w=+$t[0],kt+$t[0].length):-1}function parseWeekdayNumberMonday(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+1));return $t?(et.u=+$t[0],kt+$t[0].length):-1}function parseWeekNumberSunday(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.U=+$t[0],kt+$t[0].length):-1}function parseWeekNumberISO(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.V=+$t[0],kt+$t[0].length):-1}function parseWeekNumberMonday(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.W=+$t[0],kt+$t[0].length):-1}function parseFullYear(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+4));return $t?(et.y=+$t[0],kt+$t[0].length):-1}function parseYear(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.y=+$t[0]+(+$t[0]>68?1900:2e3),kt+$t[0].length):-1}function parseZone(et,dt,kt){var $t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(dt.slice(kt,kt+6));return $t?(et.Z=$t[1]?0:-($t[2]+($t[3]||"00")),kt+$t[0].length):-1}function parseQuarter(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+1));return $t?(et.q=$t[0]*3-3,kt+$t[0].length):-1}function parseMonthNumber(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.m=$t[0]-1,kt+$t[0].length):-1}function parseDayOfMonth(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.d=+$t[0],kt+$t[0].length):-1}function parseDayOfYear(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+3));return $t?(et.m=0,et.d=+$t[0],kt+$t[0].length):-1}function parseHour24(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.H=+$t[0],kt+$t[0].length):-1}function parseMinutes(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.M=+$t[0],kt+$t[0].length):-1}function parseSeconds(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+2));return $t?(et.S=+$t[0],kt+$t[0].length):-1}function parseMilliseconds(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+3));return $t?(et.L=+$t[0],kt+$t[0].length):-1}function parseMicroseconds(et,dt,kt){var $t=numberRe.exec(dt.slice(kt,kt+6));return $t?(et.L=Math.floor($t[0]/1e3),kt+$t[0].length):-1}function parseLiteralPercent(et,dt,kt){var $t=percentRe.exec(dt.slice(kt,kt+1));return $t?kt+$t[0].length:-1}function parseUnixTimestamp(et,dt,kt){var $t=numberRe.exec(dt.slice(kt));return $t?(et.Q=+$t[0],kt+$t[0].length):-1}function parseUnixTimestampSeconds(et,dt,kt){var $t=numberRe.exec(dt.slice(kt));return $t?(et.s=+$t[0],kt+$t[0].length):-1}function formatDayOfMonth(et,dt){return pad(et.getDate(),dt,2)}function formatHour24(et,dt){return pad(et.getHours(),dt,2)}function formatHour12(et,dt){return pad(et.getHours()%12||12,dt,2)}function formatDayOfYear(et,dt){return pad(1+timeDay.count($$1(et),et),dt,3)}function formatMilliseconds(et,dt){return pad(et.getMilliseconds(),dt,3)}function formatMicroseconds(et,dt){return formatMilliseconds(et,dt)+"000"}function formatMonthNumber(et,dt){return pad(et.getMonth()+1,dt,2)}function formatMinutes(et,dt){return pad(et.getMinutes(),dt,2)}function formatSeconds(et,dt){return pad(et.getSeconds(),dt,2)}function formatWeekdayNumberMonday(et){var dt=et.getDay();return dt===0?7:dt}function formatWeekNumberSunday(et,dt){return pad(sunday.count($$1(et)-1,et),dt,2)}function dISO(et){var dt=et.getDay();return dt>=4||dt===0?thursday(et):thursday.ceil(et)}function formatWeekNumberISO(et,dt){return et=dISO(et),pad(thursday.count($$1(et),et)+($$1(et).getDay()===4),dt,2)}function formatWeekdayNumberSunday(et){return et.getDay()}function formatWeekNumberMonday(et,dt){return pad(monday.count($$1(et)-1,et),dt,2)}function formatYear(et,dt){return pad(et.getFullYear()%100,dt,2)}function formatYearISO(et,dt){return et=dISO(et),pad(et.getFullYear()%100,dt,2)}function formatFullYear(et,dt){return pad(et.getFullYear()%1e4,dt,4)}function formatFullYearISO(et,dt){var kt=et.getDay();return et=kt>=4||kt===0?thursday(et):thursday.ceil(et),pad(et.getFullYear()%1e4,dt,4)}function formatZone(et){var dt=et.getTimezoneOffset();return(dt>0?"-":(dt*=-1,"+"))+pad(dt/60|0,"0",2)+pad(dt%60,"0",2)}function formatUTCDayOfMonth(et,dt){return pad(et.getUTCDate(),dt,2)}function formatUTCHour24(et,dt){return pad(et.getUTCHours(),dt,2)}function formatUTCHour12(et,dt){return pad(et.getUTCHours()%12||12,dt,2)}function formatUTCDayOfYear(et,dt){return pad(1+utcDay$1.count(G(et),et),dt,3)}function formatUTCMilliseconds(et,dt){return pad(et.getUTCMilliseconds(),dt,3)}function formatUTCMicroseconds(et,dt){return formatUTCMilliseconds(et,dt)+"000"}function formatUTCMonthNumber(et,dt){return pad(et.getUTCMonth()+1,dt,2)}function formatUTCMinutes(et,dt){return pad(et.getUTCMinutes(),dt,2)}function formatUTCSeconds(et,dt){return pad(et.getUTCSeconds(),dt,2)}function formatUTCWeekdayNumberMonday(et){var dt=et.getUTCDay();return dt===0?7:dt}function formatUTCWeekNumberSunday(et,dt){return pad(utcSunday.count(G(et)-1,et),dt,2)}function UTCdISO(et){var dt=et.getUTCDay();return dt>=4||dt===0?utcThursday(et):utcThursday.ceil(et)}function formatUTCWeekNumberISO(et,dt){return et=UTCdISO(et),pad(utcThursday.count(G(et),et)+(G(et).getUTCDay()===4),dt,2)}function formatUTCWeekdayNumberSunday(et){return et.getUTCDay()}function formatUTCWeekNumberMonday(et,dt){return pad(utcMonday.count(G(et)-1,et),dt,2)}function formatUTCYear(et,dt){return pad(et.getUTCFullYear()%100,dt,2)}function formatUTCYearISO(et,dt){return et=UTCdISO(et),pad(et.getUTCFullYear()%100,dt,2)}function formatUTCFullYear(et,dt){return pad(et.getUTCFullYear()%1e4,dt,4)}function formatUTCFullYearISO(et,dt){var kt=et.getUTCDay();return et=kt>=4||kt===0?utcThursday(et):utcThursday.ceil(et),pad(et.getUTCFullYear()%1e4,dt,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(et){return+et}function formatUnixTimestampSeconds(et){return Math.floor(+et/1e3)}var locale,timeFormat,timeParse,utcFormat,utcParse;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(et){return locale=formatLocale(et),timeFormat=locale.format,timeParse=locale.parse,utcFormat=locale.utcFormat,utcParse=locale.utcParse,locale}function date(et){return new Date(et)}function number(et){return et instanceof Date?+et:+new Date(+et)}function calendar(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt){var Yt=continuous(),Jt=Yt.invert,Zt=Yt.domain,er=Kt(".%L"),rr=Kt(":%S"),sr=Kt("%I:%M"),nr=Kt("%I %p"),ir=Kt("%a %d"),lr=Kt("%b %d"),or=Kt("%B"),cr=Kt("%Y");function dr(ur){return(Ht(ur)<ur?er:Ut(ur)<ur?rr:Ft(ur)<ur?sr:Dt(ur)<ur?nr:$t(ur)<ur?Tt(ur)<ur?ir:lr:kt(ur)<ur?or:cr)(ur)}return Yt.invert=function(ur){return new Date(Jt(ur))},Yt.domain=function(ur){return arguments.length?Zt(Array.from(ur,number)):Zt().map(date)},Yt.ticks=function(ur){var pr=Zt();return et(pr[0],pr[pr.length-1],ur??10)},Yt.tickFormat=function(ur,pr){return pr==null?dr:Kt(pr)},Yt.nice=function(ur){var pr=Zt();return(!ur||typeof ur.range!="function")&&(ur=dt(pr[0],pr[pr.length-1],ur??10)),ur?Zt(nice(pr,ur)):Yt},Yt.copy=function(){return copy(Yt,calendar(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt))},Yt}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay$1,timeHour,timeMinute,second$1,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear$1,utcMonth$1,utcSunday$1,utcDay$2,utcHour$1,utcMinute$1,second$1,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function colors$4(et){for(var dt=et.length/6|0,kt=new Array(dt),$t=0;$t<dt;)kt[$t]="#"+et.slice($t*6,++$t*6);return kt}const e$1=colors$4("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),r$1=colors$4("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),n=colors$4("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),t=colors$4("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),o$2=colors$4("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),i=colors$4("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),u$1=colors$4("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),l=colors$4("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),a$2=colors$4("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),c$2=colors$4("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=et=>rgbBasis(et[et.length-1]);var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors$4);const y$1=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors$4);const _$1=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors$4);const w$2=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors$4);const k$2=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors$4);const j$3=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors$4);const z$3=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors$4);const A$2=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors$4);const E$3=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors$4);const O$3=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors$4);const le$1=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors$4);const ae$1=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors$4);const ce$1=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors$4);const se$1=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors$4);const fe$1=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors$4);const pe$1=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors$4);const de$1=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors$4);const me$1=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors$4);const ge$1=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors$4);const he$1=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors$4);const be$1=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors$4);const ve$1=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors$4);const K=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors$4);const L$3=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors$4);const N=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors$4);const W$3=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors$4);const X$2=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors$4);const Q$2=ramp$1(scheme);function te$1(et){return et=Math.max(0,Math.min(1,et)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-et*(35.34-et*(2381.73-et*(6402.7-et*(7024.72-et*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+et*(170.73+et*(52.82-et*(131.46-et*(176.58-et*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+et*(442.36-et*(2482.43-et*(6167.24-et*(6614.94-et*2475.67)))))))+")"}const ue$1=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1));var warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$1=cubehelix$1();function ye$1(et){(et<0||et>1)&&(et-=Math.floor(et));var dt=Math.abs(et-.5);return c$1.h=360*et-100,c$1.s=1.5-1.5*dt,c$1.l=.8-.9*dt,c$1+""}var c=rgb$5(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function _e(et){var dt;return et=(.5-et)*Math.PI,c.r=255*(dt=Math.sin(et))*dt,c.g=255*(dt=Math.sin(et+pi_1_3))*dt,c.b=255*(dt=Math.sin(et+pi_2_3))*dt,c+""}function Y$2(et){return et=Math.max(0,Math.min(1,et)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+et*(1172.33-et*(10793.56-et*(33300.12-et*(38394.49-et*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+et*(557.33+et*(1225.33-et*(3574.96-et*(1073.77+et*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+et*(3211.1-et*(15327.97-et*(27814-et*(22569.18-et*6838.66)))))))+")"}function ramp(et){var dt=et.length;return function(kt){return et[Math.max(0,Math.min(dt-1,Math.floor(kt*dt)))]}}const Z$2=ramp(colors$4("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors$4("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors$4("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors$4("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function last$1(et){var dt=et==null?0:et.length;return dt?et[dt-1]:void 0}var last_1=last$1;const r=getDefaultExportFromCjs(last_1);var baseGet$3=_baseGet,baseSet=_baseSet,castPath$3=_castPath;function basePickBy$1(et,dt,kt){for(var $t=-1,Tt=dt.length,Dt={};++$t<Tt;){var Ft=dt[$t],Ut=baseGet$3(et,Ft);kt(Ut,Ft)&&baseSet(Dt,castPath$3(Ft,et),Ut)}return Dt}var _basePickBy=basePickBy$1;function baseHasIn$1(et,dt){return et!=null&&dt in Object(et)}var _baseHasIn=baseHasIn$1,castPath$2=_castPath,isArguments$1=isArguments_1,isArray$7=isArray_1,isIndex=_isIndex,isLength=isLength_1,toKey$3=_toKey;function hasPath$1(et,dt,kt){dt=castPath$2(dt,et);for(var $t=-1,Tt=dt.length,Dt=!1;++$t<Tt;){var Ft=toKey$3(dt[$t]);if(!(Dt=et!=null&&kt(et,Ft)))break;et=et[Ft]}return Dt||++$t!=Tt?Dt:(Tt=et==null?0:et.length,!!Tt&&isLength(Tt)&&isIndex(Ft,Tt)&&(isArray$7(et)||isArguments$1(et)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$2(et,dt){return et!=null&&hasPath(et,dt,baseHasIn)}var hasIn_1=hasIn$2,basePickBy=_basePickBy,hasIn$1=hasIn_1;function basePick$1(et,dt){return basePickBy(et,dt,function(kt,$t){return hasIn$1(et,$t)})}var _basePick=basePick$1;function arrayPush$3(et,dt){for(var kt=-1,$t=dt.length,Tt=et.length;++kt<$t;)et[Tt+kt]=dt[kt];return et}var _arrayPush=arrayPush$3,Symbol$3=_Symbol,isArguments=isArguments_1,isArray$6=isArray_1,spreadableSymbol=Symbol$3?Symbol$3.isConcatSpreadable:void 0;function isFlattenable$1(et){return isArray$6(et)||isArguments(et)||!!(spreadableSymbol&&et&&et[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$2=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(et,dt,kt,$t,Tt){var Dt=-1,Ft=et.length;for(kt||(kt=isFlattenable),Tt||(Tt=[]);++Dt<Ft;){var Ut=et[Dt];dt>0&&kt(Ut)?dt>1?baseFlatten$2(Ut,dt-1,kt,$t,Tt):arrayPush$2(Tt,Ut):$t||(Tt[Tt.length]=Ut)}return Tt}var _baseFlatten=baseFlatten$2,baseFlatten$1=_baseFlatten;function flatten$1(et){var dt=et==null?0:et.length;return dt?baseFlatten$1(et,1):[]}var flatten_1=flatten$1,flatten=flatten_1,overRest=_overRest,setToString=_setToString;function flatRest$2(et){return setToString(overRest(et,void 0,flatten),et+"")}var _flatRest=flatRest$2,basePick=_basePick,flatRest$1=_flatRest,pick=flatRest$1(function(et,dt){return et==null?{}:basePick(et,dt)}),pick_1=pick;const Ir=getDefaultExportFromCjs(pick_1);function arraySome$1(et,dt){for(var kt=-1,$t=et==null?0:et.length;++kt<$t;)if(dt(et[kt],kt,et))return!0;return!1}var _arraySome=arraySome$1,SetCache$1=_SetCache,arraySome=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(et,dt,kt,$t,Tt,Dt){var Ft=kt&COMPARE_PARTIAL_FLAG$5,Ut=et.length,Ht=dt.length;if(Ut!=Ht&&!(Ft&&Ht>Ut))return!1;var Kt=Dt.get(et),Yt=Dt.get(dt);if(Kt&&Yt)return Kt==dt&&Yt==et;var Jt=-1,Zt=!0,er=kt&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(Dt.set(et,dt),Dt.set(dt,et);++Jt<Ut;){var rr=et[Jt],sr=dt[Jt];if($t)var nr=Ft?$t(sr,rr,Jt,dt,et,Dt):$t(rr,sr,Jt,et,dt,Dt);if(nr!==void 0){if(nr)continue;Zt=!1;break}if(er){if(!arraySome(dt,function(ir,lr){if(!cacheHas$1(er,lr)&&(rr===ir||Tt(rr,ir,kt,$t,Dt)))return er.push(lr)})){Zt=!1;break}}else if(!(rr===sr||Tt(rr,sr,kt,$t,Dt))){Zt=!1;break}}return Dt.delete(et),Dt.delete(dt),Zt}var _equalArrays=equalArrays$2;function mapToArray$1(et){var dt=-1,kt=Array(et.size);return et.forEach(function($t,Tt){kt[++dt]=[Tt,$t]}),kt}var _mapToArray=mapToArray$1;function setToArray$3(et){var dt=-1,kt=Array(et.size);return et.forEach(function($t){kt[++dt]=$t}),kt}var _setToArray=setToArray$3,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",mapTag$4="[object Map]",numberTag$3="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag$1(et,dt,kt,$t,Tt,Dt,Ft){switch(kt){case dataViewTag$3:if(et.byteLength!=dt.byteLength||et.byteOffset!=dt.byteOffset)return!1;et=et.buffer,dt=dt.buffer;case arrayBufferTag$2:return!(et.byteLength!=dt.byteLength||!Dt(new Uint8Array$1(et),new Uint8Array$1(dt)));case boolTag$2:case dateTag$2:case numberTag$3:return eq(+et,+dt);case errorTag$1:return et.name==dt.name&&et.message==dt.message;case regexpTag$2:case stringTag$2:return et==dt+"";case mapTag$4:var Ut=mapToArray;case setTag$4:var Ht=$t&COMPARE_PARTIAL_FLAG$4;if(Ut||(Ut=setToArray$2),et.size!=dt.size&&!Ht)return!1;var Kt=Ft.get(et);if(Kt)return Kt==dt;$t|=COMPARE_UNORDERED_FLAG$2,Ft.set(et,dt);var Yt=equalArrays$1(Ut(et),Ut(dt),$t,Tt,Dt,Ft);return Ft.delete(et),Yt;case symbolTag$2:if(symbolValueOf$1)return symbolValueOf$1.call(et)==symbolValueOf$1.call(dt)}return!1}var _equalByTag=equalByTag$1,arrayPush$1=_arrayPush,isArray$5=isArray_1;function baseGetAllKeys$2(et,dt,kt){var $t=dt(et);return isArray$5(et)?$t:arrayPush$1($t,kt(et))}var _baseGetAllKeys=baseGetAllKeys$2;function arrayFilter$2(et,dt){for(var kt=-1,$t=et==null?0:et.length,Tt=0,Dt=[];++kt<$t;){var Ft=et[kt];dt(Ft,kt,et)&&(Dt[Tt++]=Ft)}return Dt}var _arrayFilter=arrayFilter$2;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter$1=_arrayFilter,stubArray$1=stubArray_1,objectProto$4=Object.prototype,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(et){return et==null?[]:(et=Object(et),arrayFilter$1(nativeGetSymbols$1(et),function(dt){return propertyIsEnumerable.call(et,dt)}))}:stubArray$1,_getSymbols=getSymbols$3,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseKeys$1(et){if(!isPrototype(et))return nativeKeys(et);var dt=[];for(var kt in Object(et))hasOwnProperty$3.call(et,kt)&&kt!="constructor"&&dt.push(kt);return dt}var _baseKeys=baseKeys$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$2=isArrayLike_1;function keys$5(et){return isArrayLike$2(et)?arrayLikeKeys(et):baseKeys(et)}var keys_1=keys$5,baseGetAllKeys$1=_baseGetAllKeys,getSymbols$2=_getSymbols,keys$4=keys_1;function getAllKeys$2(et){return baseGetAllKeys$1(et,keys$4,getSymbols$2)}var _getAllKeys=getAllKeys$2,getAllKeys$1=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function equalObjects$1(et,dt,kt,$t,Tt,Dt){var Ft=kt&COMPARE_PARTIAL_FLAG$3,Ut=getAllKeys$1(et),Ht=Ut.length,Kt=getAllKeys$1(dt),Yt=Kt.length;if(Ht!=Yt&&!Ft)return!1;for(var Jt=Ht;Jt--;){var Zt=Ut[Jt];if(!(Ft?Zt in dt:hasOwnProperty$2.call(dt,Zt)))return!1}var er=Dt.get(et),rr=Dt.get(dt);if(er&&rr)return er==dt&&rr==et;var sr=!0;Dt.set(et,dt),Dt.set(dt,et);for(var nr=Ft;++Jt<Ht;){Zt=Ut[Jt];var ir=et[Zt],lr=dt[Zt];if($t)var or=Ft?$t(lr,ir,Zt,dt,et,Dt):$t(ir,lr,Zt,et,dt,Dt);if(!(or===void 0?ir===lr||Tt(ir,lr,kt,$t,Dt):or)){sr=!1;break}nr||(nr=Zt=="constructor")}if(sr&&!nr){var cr=et.constructor,dr=dt.constructor;cr!=dr&&"constructor"in et&&"constructor"in dt&&!(typeof cr=="function"&&cr instanceof cr&&typeof dr=="function"&&dr instanceof dr)&&(sr=!1)}return Dt.delete(et),Dt.delete(dt),sr}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$3=getNative$1(root$2,"Set"),_Set=Set$3,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag$3="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$4=baseGetTag$1;(DataView$1&&getTag$4(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$4(new Map$1)!=mapTag$3||Promise$1&&getTag$4(Promise$1.resolve())!=promiseTag||Set$2&&getTag$4(new Set$2)!=setTag$3||WeakMap$1&&getTag$4(new WeakMap$1)!=weakMapTag$1)&&(getTag$4=function(et){var dt=baseGetTag$1(et),kt=dt==objectTag$2?et.constructor:void 0,$t=kt?toSource(kt):"";if($t)switch($t){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return dt});var _getTag=getTag$4,Stack$2=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$3=_getTag,isArray$4=isArray_1,isBuffer$1=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",objectTag$1="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseIsEqualDeep$1(et,dt,kt,$t,Tt,Dt){var Ft=isArray$4(et),Ut=isArray$4(dt),Ht=Ft?arrayTag$1:getTag$3(et),Kt=Ut?arrayTag$1:getTag$3(dt);Ht=Ht==argsTag$1?objectTag$1:Ht,Kt=Kt==argsTag$1?objectTag$1:Kt;var Yt=Ht==objectTag$1,Jt=Kt==objectTag$1,Zt=Ht==Kt;if(Zt&&isBuffer$1(et)){if(!isBuffer$1(dt))return!1;Ft=!0,Yt=!1}if(Zt&&!Yt)return Dt||(Dt=new Stack$2),Ft||isTypedArray(et)?equalArrays(et,dt,kt,$t,Tt,Dt):equalByTag(et,dt,Ht,kt,$t,Tt,Dt);if(!(kt&COMPARE_PARTIAL_FLAG$2)){var er=Yt&&hasOwnProperty$1.call(et,"__wrapped__"),rr=Jt&&hasOwnProperty$1.call(dt,"__wrapped__");if(er||rr){var sr=er?et.value():et,nr=rr?dt.value():dt;return Dt||(Dt=new Stack$2),Tt(sr,nr,kt,$t,Dt)}}return Zt?(Dt||(Dt=new Stack$2),equalObjects(et,dt,kt,$t,Tt,Dt)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$3=isObjectLike_1;function baseIsEqual$3(et,dt,kt,$t,Tt){return et===dt?!0:et==null||dt==null||!isObjectLike$3(et)&&!isObjectLike$3(dt)?et!==et&&dt!==dt:baseIsEqualDeep(et,dt,kt,$t,baseIsEqual$3,Tt)}var _baseIsEqual=baseIsEqual$3,baseIsEqual$2=_baseIsEqual;function isEqual$4(et,dt){return baseIsEqual$2(et,dt)}var isEqual_1=isEqual$4;const Ar=getDefaultExportFromCjs(isEqual_1);var Sr=reactExports.createContext(),qr=function(et){var dt=et.children,kt=et.animate,$t=kt===void 0||kt,Tt=et.config,Dt=Tt===void 0?"default":Tt,Ft=reactExports.useMemo(function(){var Ut=_$3(Dt)?config$3[Dt]:Dt;return{animate:$t,config:Ut}},[$t,Dt]);return jsxRuntimeExports.jsx(Sr.Provider,{value:Ft,children:dt})},Dr=function(){return reactExports.useContext(Sr)},Er=function(et){var dt=et.children,kt=et.condition,$t=et.wrapper;return kt?reactExports.cloneElement($t,{},dt):dt},Ur={position:"relative"},Fr=function(et){var dt=et.children,kt=et.theme,$t=et.renderWrapper,Tt=$t===void 0||$t,Dt=et.isInteractive,Ft=Dt===void 0||Dt,Ut=et.animate,Ht=et.motionConfig,Kt=reactExports.useRef(null);return jsxRuntimeExports.jsx(z$5,{theme:kt,children:jsxRuntimeExports.jsx(qr,{animate:Ut,config:Ht,children:jsxRuntimeExports.jsx(W$5,{container:Kt,children:jsxRuntimeExports.jsxs(Er,{condition:Tt,wrapper:jsxRuntimeExports.jsx("div",{style:Ur,ref:Kt}),children:[dt,Ft&&jsxRuntimeExports.jsx(M$2,{})]})})})})},Kr=function(et,dt){return et.width===dt.width&&et.height===dt.height},Nr=function(et){var dt=et.children,kt=et.width,$t=et.height,Tt=et.onResize,Dt=et.debounceResize,Ft=a$3({width:kt,height:$t},Dt,{equalityFn:Kr})[0];return reactExports.useEffect(function(){Tt==null||Tt(Ft)},[Ft,Tt]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:dt(Ft)})},$r=function(et){var dt=et.children,kt=et.defaultWidth,$t=et.defaultHeight,Tt=et.onResize,Dt=et.debounceResize,Ft=Dt===void 0?0:Dt;return jsxRuntimeExports.jsx(AutoSizer,{defaultWidth:kt,defaultHeight:$t,children:function(Ut){var Ht=Ut.width,Kt=Ut.height;return jsxRuntimeExports.jsx(Nr,{width:Ht,height:Kt,onResize:Tt,debounceResize:Ft,children:dt})}})};function Jr(et,dt){(dt==null||dt>et.length)&&(dt=et.length);for(var kt=0,$t=Array(dt);kt<dt;kt++)$t[kt]=et[kt];return $t}function Qr(et,dt){var kt=typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if(kt)return(kt=kt.call(et)).next.bind(kt);if(Array.isArray(et)||(kt=function(Tt,Dt){if(Tt){if(typeof Tt=="string")return Jr(Tt,Dt);var Ft={}.toString.call(Tt).slice(8,-1);return Ft==="Object"&&Tt.constructor&&(Ft=Tt.constructor.name),Ft==="Map"||Ft==="Set"?Array.from(Tt):Ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ft)?Jr(Tt,Dt):void 0}}(et))||dt&&et&&typeof et.length=="number"){kt&&(et=kt);var $t=0;return function(){return $t>=et.length?{done:!0}:{done:!1,value:et[$t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vr(){return Vr=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},Vr.apply(null,arguments)}function Zr(et,dt){if(et==null)return{};var kt={};for(var $t in et)if({}.hasOwnProperty.call(et,$t)){if(dt.indexOf($t)!==-1)continue;kt[$t]=et[$t]}return kt}var rt=["id","colors"],tt=function(et){var dt=et.id,kt=et.colors,$t=Zr(et,rt);return jsxRuntimeExports.jsx("linearGradient",Vr({id:dt,x1:0,x2:0,y1:0,y2:1},$t,{children:kt.map(function(Tt){var Dt=Tt.offset,Ft=Tt.color,Ut=Tt.opacity;return jsxRuntimeExports.jsx("stop",{offset:Dt+"%",stopColor:Ft,stopOpacity:Ut!==void 0?Ut:1},Dt)})}))},ot={linearGradient:tt},it={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},at=reactExports.memo(function(et){var dt=et.id,kt=et.background,$t=kt===void 0?it.background:kt,Tt=et.color,Dt=Tt===void 0?it.color:Tt,Ft=et.size,Ut=Ft===void 0?it.size:Ft,Ht=et.padding,Kt=Ht===void 0?it.padding:Ht,Yt=et.stagger,Jt=Yt===void 0?it.stagger:Yt,Zt=Ut+Kt,er=Ut/2,rr=Kt/2;return Jt===!0&&(Zt=2*Ut+2*Kt),jsxRuntimeExports.jsxs("pattern",{id:dt,width:Zt,height:Zt,patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("rect",{width:Zt,height:Zt,fill:$t}),jsxRuntimeExports.jsx("circle",{cx:rr+er,cy:rr+er,r:er,fill:Dt}),Jt&&jsxRuntimeExports.jsx("circle",{cx:1.5*Kt+Ut+er,cy:1.5*Kt+Ut+er,r:er,fill:Dt})]})}),ut=function(et){return et*Math.PI/180},ct=function(et){return 180*et/Math.PI},ft=function(et,dt){return{x:Math.cos(et)*dt,y:Math.sin(et)*dt}},ht=function(et){var dt=et%360;return dt<0&&(dt+=360),dt},gt={svg:{align:{left:"start",center:"middle",right:"end",start:"start",middle:"middle",end:"end"},baseline:{top:"text-before-edge",center:"central",bottom:"alphabetic"}},canvas:{align:{left:"left",center:"center",right:"right",start:"left",middle:"center",end:"right"},baseline:{top:"top",center:"middle",bottom:"bottom"}}},mt={spacing:5,rotation:0,background:"#000000",color:"#ffffff",lineWidth:2},vt=reactExports.memo(function(et){var dt=et.id,kt=et.spacing,$t=kt===void 0?mt.spacing:kt,Tt=et.rotation,Dt=Tt===void 0?mt.rotation:Tt,Ft=et.background,Ut=Ft===void 0?mt.background:Ft,Ht=et.color,Kt=Ht===void 0?mt.color:Ht,Yt=et.lineWidth,Jt=Yt===void 0?mt.lineWidth:Yt,Zt=Math.round(Dt)%360,er=Math.abs($t);Zt>180?Zt-=360:Zt>90?Zt-=180:Zt<-180?Zt+=360:Zt<-90&&(Zt+=180);var rr,sr=er,nr=er;return Zt===0?rr=`
                M 0 0 L `+sr+` 0
                M 0 `+nr+" L "+sr+" "+nr+`
            `:Zt===90?rr=`
                M 0 0 L 0 `+nr+`
                M `+sr+" 0 L "+sr+" "+nr+`
            `:(sr=Math.abs(er/Math.sin(ut(Zt))),nr=er/Math.sin(ut(90-Zt)),rr=Zt>0?`
                    M 0 `+-nr+" L "+2*sr+" "+nr+`
                    M `+-sr+" "+-nr+" L "+sr+" "+nr+`
                    M `+-sr+" 0 L "+sr+" "+2*nr+`
                `:`
                    M `+-sr+" "+nr+" L "+sr+" "+-nr+`
                    M `+-sr+" "+2*nr+" L "+2*sr+" "+-nr+`
                    M 0 `+2*nr+" L "+2*sr+` 0
                `),jsxRuntimeExports.jsxs("pattern",{id:dt,width:sr,height:nr,patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("rect",{width:sr,height:nr,fill:Ut,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),jsxRuntimeExports.jsx("path",{d:rr,strokeWidth:Jt,stroke:Kt,strokeLinecap:"square"})]})}),_t={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},wt=reactExports.memo(function(et){var dt=et.id,kt=et.color,$t=kt===void 0?_t.color:kt,Tt=et.background,Dt=Tt===void 0?_t.background:Tt,Ft=et.size,Ut=Ft===void 0?_t.size:Ft,Ht=et.padding,Kt=Ht===void 0?_t.padding:Ht,Yt=et.stagger,Jt=Yt===void 0?_t.stagger:Yt,Zt=Ut+Kt,er=Kt/2;return Jt===!0&&(Zt=2*Ut+2*Kt),jsxRuntimeExports.jsxs("pattern",{id:dt,width:Zt,height:Zt,patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("rect",{width:Zt,height:Zt,fill:Dt}),jsxRuntimeExports.jsx("rect",{x:er,y:er,width:Ut,height:Ut,fill:$t}),Jt&&jsxRuntimeExports.jsx("rect",{x:1.5*Kt+Ut,y:1.5*Kt+Ut,width:Ut,height:Ut,fill:$t})]})}),xt={patternDots:at,patternLines:vt,patternSquares:wt},Ot=["type"],zt=Vr({},ot,xt),Mt=reactExports.memo(function(et){var dt=et.defs;return!dt||dt.length<1?null:jsxRuntimeExports.jsx("defs",{"aria-hidden":!0,children:dt.map(function(kt){var $t=kt.type,Tt=Zr(kt,Ot);return zt[$t]?reactExports.createElement(zt[$t],Vr({key:Tt.id},Tt)):null})})}),Rt=reactExports.forwardRef(function(et,dt){var kt=et.width,$t=et.height,Tt=et.margin,Dt=et.defs,Ft=et.children,Ut=et.role,Ht=et.ariaLabel,Kt=et.ariaLabelledBy,Yt=et.ariaDescribedBy,Jt=et.isFocusable,Zt=M$3();return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:kt,height:$t,role:Ut,"aria-label":Ht,"aria-labelledby":Kt,"aria-describedby":Yt,focusable:Jt,tabIndex:Jt?0:void 0,ref:dt,children:[jsxRuntimeExports.jsx(Mt,{defs:Dt}),jsxRuntimeExports.jsx("rect",{width:kt,height:$t,fill:Zt.background}),jsxRuntimeExports.jsx("g",{transform:"translate("+Tt.left+","+Tt.top+")",children:Ft})]})}),jt=reactExports.memo(function(et){var dt=et.size,kt=et.color,$t=et.borderWidth,Tt=et.borderColor;return jsxRuntimeExports.jsx("circle",{r:dt/2,fill:kt,stroke:Tt,strokeWidth:$t,style:{pointerEvents:"none"}})});reactExports.memo(function(et){var dt=et.x,kt=et.y,$t=et.symbol,Tt=$t===void 0?jt:$t,Dt=et.size,Ft=et.datum,Ut=et.color,Ht=et.borderWidth,Kt=et.borderColor,Yt=et.label,Jt=et.labelTextAnchor,Zt=Jt===void 0?"middle":Jt,er=et.labelYOffset,rr=er===void 0?-12:er,sr=et.ariaLabel,nr=et.ariaLabelledBy,ir=et.ariaDescribedBy,lr=et.ariaHidden,or=et.ariaDisabled,cr=et.isFocusable,dr=cr!==void 0&&cr,ur=et.tabIndex,pr=ur===void 0?0:ur,mr=et.onFocus,jr=et.onBlur,Rr=et.testId,br=M$3(),_r=Dr(),Mr=_r.animate,Pr=_r.config,Or=useSpring$2({transform:"translate("+dt+", "+kt+")",config:Pr,immediate:!Mr}),kr=reactExports.useCallback(function(xr){mr==null||mr(Ft,xr)},[mr,Ft]),Tr=reactExports.useCallback(function(xr){jr==null||jr(Ft,xr)},[jr,Ft]);return jsxRuntimeExports.jsxs(animated$4.g,{transform:Or.transform,style:{pointerEvents:"none"},focusable:dr,tabIndex:dr?pr:void 0,"aria-label":sr,"aria-labelledby":nr,"aria-describedby":ir,"aria-disabled":or,"aria-hidden":lr,onFocus:dr&&mr?kr:void 0,onBlur:dr&&jr?Tr:void 0,"data-testid":Rr,children:[reactExports.createElement(Tt,{size:Dt,color:Ut,datum:Ft,borderWidth:Ht,borderColor:Kt}),Yt&&jsxRuntimeExports.jsx("text",{textAnchor:Zt,y:rr,style:b$5(br.dots.text),children:Yt})]})});var Bt=reactExports.memo(function(et){var dt=et.width,kt=et.height,$t=et.axis,Tt=et.scale,Dt=et.value,Ft=et.lineStyle,Ut=et.textStyle,Ht=et.legend,Kt=et.legendNode,Yt=et.legendPosition,Jt=Yt===void 0?"top-right":Yt,Zt=et.legendOffsetX,er=Zt===void 0?14:Zt,rr=et.legendOffsetY,sr=rr===void 0?14:rr,nr=et.legendOrientation,ir=nr===void 0?"horizontal":nr,lr=M$3(),or=0,cr=0,dr=0,ur=0;if($t==="y"?(dr=Tt(Dt),cr=dt):(or=Tt(Dt),ur=kt),Ht&&!Kt){var pr=function(mr){var jr=mr.axis,Rr=mr.width,br=mr.height,_r=mr.position,Mr=mr.offsetX,Pr=mr.offsetY,Or=mr.orientation,kr=0,Tr=0,xr=Or==="vertical"?-90:0,wr="start";if(jr==="x")switch(_r){case"top-left":kr=-Mr,Tr=Pr,wr="end";break;case"top":Tr=-Pr,wr=Or==="horizontal"?"middle":"start";break;case"top-right":kr=Mr,Tr=Pr,wr=Or==="horizontal"?"start":"end";break;case"right":kr=Mr,Tr=br/2,wr=Or==="horizontal"?"start":"middle";break;case"bottom-right":kr=Mr,Tr=br-Pr,wr="start";break;case"bottom":Tr=br+Pr,wr=Or==="horizontal"?"middle":"end";break;case"bottom-left":Tr=br-Pr,kr=-Mr,wr=Or==="horizontal"?"end":"start";break;case"left":kr=-Mr,Tr=br/2,wr=Or==="horizontal"?"end":"middle"}else switch(_r){case"top-left":kr=Mr,Tr=-Pr,wr="start";break;case"top":kr=Rr/2,Tr=-Pr,wr=Or==="horizontal"?"middle":"start";break;case"top-right":kr=Rr-Mr,Tr=-Pr,wr=Or==="horizontal"?"end":"start";break;case"right":kr=Rr+Mr,wr=Or==="horizontal"?"start":"middle";break;case"bottom-right":kr=Rr-Mr,Tr=Pr,wr="end";break;case"bottom":kr=Rr/2,Tr=Pr,wr=Or==="horizontal"?"middle":"end";break;case"bottom-left":kr=Mr,Tr=Pr,wr=Or==="horizontal"?"start":"end";break;case"left":kr=-Mr,wr=Or==="horizontal"?"end":"middle"}return{x:kr,y:Tr,rotation:xr,textAnchor:wr}}({axis:$t,width:dt,height:kt,position:Jt,offsetX:er,offsetY:sr,orientation:ir});Kt=jsxRuntimeExports.jsx("text",{transform:"translate("+pr.x+", "+pr.y+") rotate("+pr.rotation+")",textAnchor:pr.textAnchor,dominantBaseline:"central",style:Ut,children:Ht})}return jsxRuntimeExports.jsxs("g",{transform:"translate("+or+", "+dr+")",children:[jsxRuntimeExports.jsx("line",{x1:0,x2:cr,y1:0,y2:ur,stroke:lr.markers.lineColor,strokeWidth:lr.markers.lineStrokeWidth,style:Ft}),Kt]})}),Pt=reactExports.memo(function(et){var dt=et.markers,kt=et.width,$t=et.height,Tt=et.xScale,Dt=et.yScale;return dt&&dt.length!==0?dt.map(function(Ft,Ut){return jsxRuntimeExports.jsx(Bt,Vr({},Ft,{width:kt,height:$t,scale:Ft.axis==="y"?Dt:Tt}),Ut)}):null}),It=function(et){var dt=Dr(),kt=dt.animate,$t=dt.config,Tt=function(Ut){var Ht=reactExports.useRef();return reactExports.useEffect(function(){Ht.current=Ut},[Ut]),Ht.current}(et),Dt=reactExports.useMemo(function(){return B$2(Tt,et)},[Tt,et]),Ft=useSpring$2({from:{value:0},to:{value:1},reset:!0,config:$t,immediate:!kt}).value;return to$5(Ft,Dt)};reactExports.createContext(void 0);var Lt={basis:W$4,basisClosed:G$1,basisOpen:I$2,bundle:A$3,cardinal:L$4,cardinalClosed:S$2,cardinalOpen:Y$3,catmullRom:q$3,catmullRomClosed:D$2,catmullRomOpen:E$4,linear:U$1,linearClosed:F,monotoneX,monotoneY,natural:X$3,step:K$1,stepAfter,stepBefore},St=Object.keys(Lt);St.filter(function(et){return et.endsWith("Closed")});P$2(St,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");P$2(St,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");r(scheme$q),r(scheme$p),r(scheme$o),r(scheme$n),r(scheme$m),r(scheme$l),r(scheme$k),r(scheme$j),r(scheme$i),r(scheme$5),r(scheme$4),r(scheme$3),r(scheme),r(scheme$2),r(scheme$1),r(scheme$h),r(scheme$g),r(scheme$f),r(scheme$e),r(scheme$d),r(scheme$c),r(scheme$b),r(scheme$a),r(scheme$9),r(scheme$8),r(scheme$7),r(scheme$6);r(scheme$q),r(scheme$p),r(scheme$o),r(scheme$n),r(scheme$m),r(scheme$l),r(scheme$k),r(scheme$j),r(scheme$i),r(scheme$5),r(scheme$4),r(scheme$3),r(scheme),r(scheme$2),r(scheme$1),r(scheme$h),r(scheme$g),r(scheme$f),r(scheme$e),r(scheme$d),r(scheme$c),r(scheme$b),r(scheme$a),r(scheme$9),r(scheme$8),r(scheme$7),r(scheme$6);ordinal(a$2);var un$1={top:0,right:0,bottom:0,left:0},cn$1=function(et,dt,kt){return kt===void 0&&(kt={}),reactExports.useMemo(function(){var $t=Vr({},un$1,kt);return{margin:$t,innerWidth:et-$t.left-$t.right,innerHeight:dt-$t.top-$t.bottom,outerWidth:et,outerHeight:dt}},[et,dt,kt])},sn$1=function(){var et=reactExports.useRef(null),dt=reactExports.useState({left:0,top:0,width:0,height:0}),kt=dt[0],$t=dt[1],Tt=reactExports.useState(function(){return typeof ResizeObserver>"u"?null:new ResizeObserver(function(Dt){var Ft=Dt[0];return $t(Ft.contentRect)})})[0];return reactExports.useEffect(function(){return et.current&&Tt!==null&&Tt.observe(et.current),function(){Tt!==null&&Tt.disconnect()}},[Tt]),[et,kt]},fn=function(et){return typeof et=="function"?et:typeof et=="string"?et.indexOf("time:")===0?timeFormat(et.slice("5")):format(et):function(dt){return""+dt}},hn=function(et){return reactExports.useMemo(function(){return fn(et)},[et])},gn=function(et){return Cr(et)?et:function(dt){return ke$1(dt,et)}},bn=function(et){return reactExports.useMemo(function(){return gn(et)},[et])},wn$1=function(et,dt,kt,$t,Tt,Dt){return et<=Tt&&Tt<=et+kt&&dt<=Dt&&Dt<=dt+$t},kn=function(et,dt){var kt,$t="touches"in dt?dt.touches[0]:dt,Tt=$t.clientX,Dt=$t.clientY,Ft=et.getBoundingClientRect(),Ut=(kt=et.getBBox!==void 0?et.getBBox():{width:et.offsetWidth||0,height:et.offsetHeight||0}).width===Ft.width?1:kt.width/Ft.width;return[(Tt-Ft.left)*Ut,(Dt-Ft.top)*Ut]},xn=Object.keys(ot),On=Object.keys(xt),zn=function(et,dt,kt){if(et==="*")return!0;if(Cr(et))return et(dt);if(je(et)){var $t=kt?ke$1(dt,kt):dt;return Ar(Ir($t,Object.keys(et)),et)}return!1},Mn$1=function(et,dt,kt,$t){var Tt=$t===void 0?{}:$t,Dt=Tt.dataKey,Ft=Tt.colorKey,Ut=Ft===void 0?"color":Ft,Ht=Tt.targetKey,Kt=Ht===void 0?"fill":Ht,Yt=[],Jt={};return et.length&&dt.length&&(Yt=[].concat(et),dt.forEach(function(Zt){for(var er,rr=function(){var nr=er.value,ir=nr.id,lr=nr.match;if(zn(lr,Zt,Dt)){var or=et.find(function(br){return br.id===ir});if(or){if(On.includes(or.type))if(or.background==="inherit"||or.color==="inherit"){var cr=ke$1(Zt,Ut),dr=or.background,ur=or.color,pr=ir;or.background==="inherit"&&(pr=pr+".bg."+cr,dr=cr),or.color==="inherit"&&(pr=pr+".fg."+cr,ur=cr),Lr(Zt,Kt,"url(#"+pr+")"),Jt[pr]||(Yt.push(Vr({},or,{id:pr,background:dr,color:ur})),Jt[pr]=1)}else Lr(Zt,Kt,"url(#"+ir+")");else if(xn.includes(or.type))if(or.colors.map(function(br){return br.color}).includes("inherit")){var mr=ke$1(Zt,Ut),jr=ir,Rr=Vr({},or,{colors:or.colors.map(function(br,_r){return br.color!=="inherit"?br:(jr=jr+"."+_r+"."+mr,Vr({},br,{color:br.color==="inherit"?mr:br.color}))})});Rr.id=jr,Lr(Zt,Kt,"url(#"+jr+")"),Jt[jr]||(Yt.push(Rr),Jt[jr]=1)}else Lr(Zt,Kt,"url(#"+ir+")")}return 1}},sr=Qr(kt);!(er=sr()).done&&!rr(););})),Yt};function Rn(){for(var et=arguments.length,dt=new Array(et),kt=0;kt<et;kt++)dt[kt]=arguments[kt];return function($t){for(var Tt=0,Dt=dt;Tt<Dt.length;Tt++){var Ft=Dt[Tt];typeof Ft=="function"?Ft($t):Ft!=null&&(Ft.current=$t)}}}var updateQueue$3=makeQueue$3(),raf$3=et=>schedule$3(et,updateQueue$3),writeQueue$3=makeQueue$3();raf$3.write=et=>schedule$3(et,writeQueue$3);var onStartQueue$3=makeQueue$3();raf$3.onStart=et=>schedule$3(et,onStartQueue$3);var onFrameQueue$3=makeQueue$3();raf$3.onFrame=et=>schedule$3(et,onFrameQueue$3);var onFinishQueue$3=makeQueue$3();raf$3.onFinish=et=>schedule$3(et,onFinishQueue$3);var timeouts$3=[];raf$3.setTimeout=(et,dt)=>{const kt=raf$3.now()+dt,$t=()=>{const Dt=timeouts$3.findIndex(Ft=>Ft.cancel==$t);~Dt&&timeouts$3.splice(Dt,1),pendingCount$3-=~Dt?1:0},Tt={time:kt,handler:et,cancel:$t};return timeouts$3.splice(findTimeout$3(kt),0,Tt),pendingCount$3+=1,start$3(),Tt};var findTimeout$3=et=>~(~timeouts$3.findIndex(dt=>dt.time>et)||~timeouts$3.length);raf$3.cancel=et=>{onStartQueue$3.delete(et),onFrameQueue$3.delete(et),onFinishQueue$3.delete(et),updateQueue$3.delete(et),writeQueue$3.delete(et)};raf$3.sync=et=>{sync$3=!0,raf$3.batchedUpdates(et),sync$3=!1};raf$3.throttle=et=>{let dt;function kt(){try{et(...dt)}finally{dt=null}}function $t(...Tt){dt=Tt,raf$3.onStart(kt)}return $t.handler=et,$t.cancel=()=>{onStartQueue$3.delete(kt),dt=null},$t};var nativeRaf$3=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$3.use=et=>nativeRaf$3=et;raf$3.now=typeof performance<"u"?()=>performance.now():Date.now;raf$3.batchedUpdates=et=>et();raf$3.catch=console.error;raf$3.frameLoop="always";raf$3.advance=()=>{raf$3.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$3()};var ts$3=-1,pendingCount$3=0,sync$3=!1;function schedule$3(et,dt){sync$3?(dt.delete(et),et(0)):(dt.add(et),start$3())}function start$3(){ts$3<0&&(ts$3=0,raf$3.frameLoop!=="demand"&&nativeRaf$3(loop$3))}function stop$3(){ts$3=-1}function loop$3(){~ts$3&&(nativeRaf$3(loop$3),raf$3.batchedUpdates(update$3))}function update$3(){const et=ts$3;ts$3=raf$3.now();const dt=findTimeout$3(ts$3);if(dt&&(eachSafely$3(timeouts$3.splice(0,dt),kt=>kt.handler()),pendingCount$3-=dt),!pendingCount$3){stop$3();return}onStartQueue$3.flush(),updateQueue$3.flush(et?Math.min(64,ts$3-et):16.667),onFrameQueue$3.flush(),writeQueue$3.flush(),onFinishQueue$3.flush()}function makeQueue$3(){let et=new Set,dt=et;return{add(kt){pendingCount$3+=dt==et&&!et.has(kt)?1:0,et.add(kt)},delete(kt){return pendingCount$3-=dt==et&&et.has(kt)?1:0,et.delete(kt)},flush(kt){dt.size&&(et=new Set,pendingCount$3-=dt.size,eachSafely$3(dt,$t=>$t(kt)&&et.add($t)),pendingCount$3+=et.size,dt=et)}}}function eachSafely$3(et,dt){et.forEach(kt=>{try{dt(kt)}catch($t){raf$3.catch($t)}})}var __defProp$3=Object.defineProperty,__export$3=(et,dt)=>{for(var kt in dt)__defProp$3(et,kt,{get:dt[kt],enumerable:!0})},globals_exports$3={};__export$3(globals_exports$3,{assign:()=>assign$3,colors:()=>colors$3,createStringInterpolator:()=>createStringInterpolator$3,skipAnimation:()=>skipAnimation$3,to:()=>to$4,willAdvance:()=>willAdvance$3});function noop$5(){}var defineHidden$3=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),is$3={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$3(et,dt){if(is$3.arr(et)){if(!is$3.arr(dt)||et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}return et===dt}var each$3=(et,dt)=>et.forEach(dt);function eachProp$3(et,dt,kt){if(is$3.arr(et)){for(let $t=0;$t<et.length;$t++)dt.call(kt,et[$t],`${$t}`);return}for(const $t in et)et.hasOwnProperty($t)&&dt.call(kt,et[$t],$t)}var toArray$3=et=>is$3.und(et)?[]:is$3.arr(et)?et:[et],isSSR$3=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$3,to$4,colors$3=null,skipAnimation$3=!1,willAdvance$3=noop$5,assign$3=et=>{et.to&&(to$4=et.to),et.now&&(raf$3.now=et.now),et.colors!==void 0&&(colors$3=et.colors),et.skipAnimation!=null&&(skipAnimation$3=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$3=et.createStringInterpolator),et.requestAnimationFrame&&raf$3.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$3.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$3=et.willAdvance),et.frameLoop&&(raf$3.frameLoop=et.frameLoop)},startQueue$3=new Set,currentFrame$3=[],prevFrame$3=[],priority$3=0,frameLoop$3={get idle(){return!startQueue$3.size&&!currentFrame$3.length},start(et){priority$3>et.priority?(startQueue$3.add(et),raf$3.onStart(flushStartQueue$3)):(startSafely$3(et),raf$3(advance$3))},advance:advance$3,sort(et){if(priority$3)raf$3.onFrame(()=>frameLoop$3.sort(et));else{const dt=currentFrame$3.indexOf(et);~dt&&(currentFrame$3.splice(dt,1),startUnsafely$3(et))}},clear(){currentFrame$3=[],startQueue$3.clear()}};function flushStartQueue$3(){startQueue$3.forEach(startSafely$3),startQueue$3.clear(),raf$3(advance$3)}function startSafely$3(et){currentFrame$3.includes(et)||startUnsafely$3(et)}function startUnsafely$3(et){currentFrame$3.splice(findIndex$3(currentFrame$3,dt=>dt.priority>et.priority),0,et)}function advance$3(et){const dt=prevFrame$3;for(let kt=0;kt<currentFrame$3.length;kt++){const $t=currentFrame$3[kt];priority$3=$t.priority,$t.idle||(willAdvance$3($t),$t.advance(et),$t.idle||dt.push($t))}return priority$3=0,prevFrame$3=currentFrame$3,prevFrame$3.length=0,currentFrame$3=dt,currentFrame$3.length>0}function findIndex$3(et,dt){const kt=et.findIndex(dt);return kt<0?et.length:kt}var colors2$3={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$3="[-+]?\\d*\\.?\\d+",PERCENTAGE$3=NUMBER$3+"%";function call$3(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$3=new RegExp("rgb"+call$3(NUMBER$3,NUMBER$3,NUMBER$3)),rgba$3=new RegExp("rgba"+call$3(NUMBER$3,NUMBER$3,NUMBER$3,NUMBER$3)),hsl$3=new RegExp("hsl"+call$3(NUMBER$3,PERCENTAGE$3,PERCENTAGE$3)),hsla$3=new RegExp("hsla"+call$3(NUMBER$3,PERCENTAGE$3,PERCENTAGE$3,NUMBER$3)),hex3$3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$3=/^#([0-9a-fA-F]{6})$/,hex8$3=/^#([0-9a-fA-F]{8})$/;function normalizeColor$3(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$3.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$3&&colors$3[et]!==void 0?colors$3[et]:(dt=rgb$3.exec(et))?(parse255$3(dt[1])<<24|parse255$3(dt[2])<<16|parse255$3(dt[3])<<8|255)>>>0:(dt=rgba$3.exec(et))?(parse255$3(dt[1])<<24|parse255$3(dt[2])<<16|parse255$3(dt[3])<<8|parse1$3(dt[4]))>>>0:(dt=hex3$3.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$3.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$3.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$3.exec(et))?(hslToRgb$3(parse360$3(dt[1]),parsePercentage$3(dt[2]),parsePercentage$3(dt[3]))|255)>>>0:(dt=hsla$3.exec(et))?(hslToRgb$3(parse360$3(dt[1]),parsePercentage$3(dt[2]),parsePercentage$3(dt[3]))|parse1$3(dt[4]))>>>0:null}function hue2rgb$3(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb$3(et,dt,kt){const $t=kt<.5?kt*(1+dt):kt+dt-kt*dt,Tt=2*kt-$t,Dt=hue2rgb$3(Tt,$t,et+1/3),Ft=hue2rgb$3(Tt,$t,et),Ut=hue2rgb$3(Tt,$t,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$3(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$3(et){return(parseFloat(et)%360+360)%360/360}function parse1$3(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$3(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$3(et){let dt=normalizeColor$3(et);if(dt===null)return et;dt=dt||0;const kt=(dt&4278190080)>>>24,$t=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${kt}, ${$t}, ${Tt}, ${Dt})`}var createInterpolator$3=(et,dt,kt)=>{if(is$3.fun(et))return et;if(is$3.arr(et))return createInterpolator$3({range:et,output:dt,extrapolate:kt});if(is$3.str(et.output[0]))return createStringInterpolator$3(et);const $t=et,Tt=$t.output,Dt=$t.range||[0,1],Ft=$t.extrapolateLeft||$t.extrapolate||"extend",Ut=$t.extrapolateRight||$t.extrapolate||"extend",Ht=$t.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$3(Kt,Dt);return interpolate$3(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,$t.map)}};function interpolate$3(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>kt){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=kt)}return $t===Tt?$t:dt===kt?et<=dt?$t:Tt:(dt===-1/0?Kt=-Kt:kt===1/0?Kt=Kt-dt:Kt=(Kt-dt)/(kt-dt),Kt=Dt(Kt),$t===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+$t:Kt=Kt*(Tt-$t)+$t,Kt)}function findRange$3(et,dt){for(var kt=1;kt<dt.length-1&&!(dt[kt]>=et);++kt);return kt-1}var $get$3=Symbol.for("FluidValue.get"),$observers$3=Symbol.for("FluidValue.observers"),hasFluidValue$3=et=>!!(et&&et[$get$3]),getFluidValue$3=et=>et&&et[$get$3]?et[$get$3]():et;function callFluidObserver$3(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$3(et,dt){const kt=et[$observers$3];kt&&kt.forEach($t=>{callFluidObserver$3($t,dt)})}var FluidValue$3=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$3(this,dt)}},setFluidGetter$3=(et,dt)=>setHidden$3(et,$get$3,dt);function addFluidObserver$3(et,dt){if(et[$get$3]){let kt=et[$observers$3];kt||setHidden$3(et,$observers$3,kt=new Set),kt.has(dt)||(kt.add(dt),et.observerAdded&&et.observerAdded(kt.size,dt))}return dt}function removeFluidObserver$3(et,dt){const kt=et[$observers$3];if(kt&&kt.has(dt)){const $t=kt.size-1;$t?kt.delete(dt):et[$observers$3]=null,et.observerRemoved&&et.observerRemoved($t,dt)}}var setHidden$3=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),numberRegex$3=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$3=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$3=new RegExp(`(${numberRegex$3.source})(%|[a-z]+)`,"i"),rgbaRegex$3=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$3=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$3=et=>{const[dt,kt]=parseCSSVariable$3(et);if(!dt||isSSR$3())return et;const $t=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if($t)return $t.trim();if(kt&&kt.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue(kt);return Tt||et}else{if(kt&&cssVariableRegex$3.test(kt))return variableToRgba$3(kt);if(kt)return kt}return et},parseCSSVariable$3=et=>{const dt=cssVariableRegex$3.exec(et);if(!dt)return[,];const[,kt,$t]=dt;return[kt,$t]},namedColorRegex$3,rgbaRound$3=(et,dt,kt,$t,Tt)=>`rgba(${Math.round(dt)}, ${Math.round(kt)}, ${Math.round($t)}, ${Tt})`,createStringInterpolator2$3=et=>{namedColorRegex$3||(namedColorRegex$3=colors$3?new RegExp(`(${Object.keys(colors$3).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$3(Dt).replace(cssVariableRegex$3,variableToRgba$3).replace(colorRegex$3,colorToRgba$3).replace(namedColorRegex$3,colorToRgba$3)),kt=dt.map(Dt=>Dt.match(numberRegex$3).map(Number)),Tt=kt[0].map((Dt,Ft)=>kt.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$3({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$3.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$3.test(Kt)))==null?void 0:Ht.replace(numberRegex$3,""));let Ut=0;return dt[0].replace(numberRegex$3,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$3,rgbaRound$3)}},prefix$3="react-spring: ",once$3=et=>{const dt=et;let kt=!1;if(typeof dt!="function")throw new TypeError(`${prefix$3}once requires a function parameter`);return(...$t)=>{kt||(dt(...$t),kt=!0)}},warnInterpolate$3=once$3(console.warn);function deprecateInterpolate$3(){warnInterpolate$3(`${prefix$3}The "interpolate" function is deprecated in v9 (use "to" instead)`)}once$3(console.warn);function isAnimatedString$3(et){return is$3.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$3()&&cssVariableRegex$3.test(et)||et in(colors$3||{}))}var useIsomorphicLayoutEffect$3=isSSR$3()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$3=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$3(){const et=reactExports.useState()[1],dt=useIsMounted$3();return()=>{dt.current&&et(Math.random())}}var useOnce$3=et=>reactExports.useEffect(et,emptyDeps$3),emptyDeps$3=[],$node$3=Symbol.for("Animated:node"),isAnimated$3=et=>!!et&&et[$node$3]===et,getAnimated$3=et=>et&&et[$node$3],setAnimated$3=(et,dt)=>defineHidden$3(et,$node$3,dt),getPayload$3=et=>et&&et[$node$3]&&et[$node$3].getPayload(),Animated$3=class{constructor(){setAnimated$3(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$3=class K_ extends Animated$3{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$3.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new K_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,kt){return is$3.num(dt)&&(this.lastPosition=dt,kt&&(dt=Math.round(dt/kt)*kt,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$3.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$3=class Y_ extends AnimatedValue$3{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$3({output:[dt,dt]})}static create(dt){return new Y_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$3.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$3({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$3={dependencies:null},AnimatedObject$3=class extends Animated$3{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const kt={};return eachProp$3(this.source,($t,Tt)=>{isAnimated$3($t)?kt[Tt]=$t.getValue(dt):hasFluidValue$3($t)?kt[Tt]=getFluidValue$3($t):dt||(kt[Tt]=$t)}),kt}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$3(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const kt=new Set;return eachProp$3(dt,this._addToPayload,kt),Array.from(kt)}}_addToPayload(dt){TreeContext$3.dependencies&&hasFluidValue$3(dt)&&TreeContext$3.dependencies.add(dt);const kt=getPayload$3(dt);kt&&each$3(kt,$t=>this.add($t))}},AnimatedArray$3=class X_ extends AnimatedObject$3{constructor(dt){super(dt)}static create(dt){return new X_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const kt=this.getPayload();return dt.length==kt.length?kt.map(($t,Tt)=>$t.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$3)),!0)}};function makeAnimated$3(et){return(isAnimatedString$3(et)?AnimatedString$3:AnimatedValue$3).create(et)}function getAnimatedType$3(et){const dt=getAnimated$3(et);return dt?dt.constructor:is$3.arr(et)?AnimatedArray$3:isAnimatedString$3(et)?AnimatedString$3:AnimatedValue$3}var withAnimated$3=(et,dt)=>{const kt=!is$3.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef(($t,Tt)=>{const Dt=reactExports.useRef(null),Ft=kt&&reactExports.useCallback(rr=>{Dt.current=updateRef$3(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$3($t,dt),Kt=useForceUpdate$3(),Yt=()=>{const rr=Dt.current;if(kt&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$3(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$3(()=>(Zt.current=Jt,each$3(Ht,rr=>addFluidObserver$3(rr,Jt)),()=>{Zt.current&&(each$3(Zt.current.deps,rr=>removeFluidObserver$3(rr,Zt.current)),raf$3.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$3(()=>()=>{const rr=Zt.current;each$3(rr.deps,sr=>removeFluidObserver$3(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$3=class{constructor(dt,kt){this.update=dt,this.deps=kt}eventObserved(dt){dt.type=="change"&&raf$3.write(this.update)}};function getAnimatedState$3(et,dt){const kt=new Set;return TreeContext$3.dependencies=kt,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$3(et),TreeContext$3.dependencies=null,[et,kt]}function updateRef$3(et,dt){return et&&(is$3.fun(et)?et(dt):et.current=dt),dt}var cacheKey$3=Symbol.for("AnimatedComponent"),createHost$3=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:kt=Tt=>new AnimatedObject$3(Tt),getComponentProps:$t=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:kt,getComponentProps:$t},Dt=Ft=>{const Ut=getDisplayName$3(Ft)||"Anonymous";return is$3.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$3(Ft,Tt)):Ft=Ft[cacheKey$3]||(Ft[cacheKey$3]=withAnimated$3(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$3(et,(Ft,Ut)=>{is$3.arr(et)&&(Ut=getDisplayName$3(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$3=et=>is$3.str(et)?et:et&&is$3.str(et.displayName)?et.displayName:is$3.fun(et)&&et.name||null,isFrameValue$3=et=>et instanceof FrameValue$3,nextId$3=1,FrameValue$3=class extends FluidValue$3{constructor(){super(...arguments),this.id=nextId$3++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$3(this);return dt&&dt.getValue()}to(...dt){return globals_exports$3.to(this,dt)}interpolate(...dt){return deprecateInterpolate$3(),globals_exports$3.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,kt=!1){callFluidObservers$3(this,{type:"change",parent:this,value:dt,idle:kt})}_onPriorityChange(dt){this.idle||frameLoop$3.sort(this),callFluidObservers$3(this,{type:"priority",parent:this,priority:dt})}};reactExports.createContext({pause:!1,immediate:!1});var Interpolation$3=class extends FrameValue$3{constructor(dt,kt){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$3(...kt);const $t=this._get(),Tt=getAnimatedType$3($t);setAnimated$3(this,Tt.create($t))}advance(dt){const kt=this._get(),$t=this.get();isEqual$3(kt,$t)||(getAnimated$3(this).setValue(kt),this._onChange(kt,this.idle)),!this.idle&&checkIdle$3(this._active)&&becomeIdle$3(this)}_get(){const dt=is$3.arr(this.source)?this.source.map(getFluidValue$3):toArray$3(getFluidValue$3(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$3(this._active)&&(this.idle=!1,each$3(getPayload$3(this),dt=>{dt.done=!1}),globals_exports$3.skipAnimation?(raf$3.batchedUpdates(()=>this.advance()),becomeIdle$3(this)):frameLoop$3.start(this))}_attach(){let dt=1;each$3(toArray$3(this.source),kt=>{hasFluidValue$3(kt)&&addFluidObserver$3(kt,this),isFrameValue$3(kt)&&(kt.idle||this._active.add(kt),dt=Math.max(dt,kt.priority+1))}),this.priority=dt,this._start()}_detach(){each$3(toArray$3(this.source),dt=>{hasFluidValue$3(dt)&&removeFluidObserver$3(dt,this)}),this._active.clear(),becomeIdle$3(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$3(this.source).reduce((kt,$t)=>Math.max(kt,(isFrameValue$3($t)?$t.priority:0)+1),0))}};function isIdle$3(et){return et.idle!==!1}function checkIdle$3(et){return!et.size||Array.from(et).every(isIdle$3)}function becomeIdle$3(et){et.idle||(et.idle=!0,each$3(getPayload$3(et),dt=>{dt.done=!0}),callFluidObservers$3(et,{type:"idle",parent:et}))}globals_exports$3.assign({createStringInterpolator:createStringInterpolator2$3,to:(et,dt)=>new Interpolation$3(et,dt)});var isCustomPropRE$3=/^--/;function dangerousStyleValue$3(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$3.test(et)&&!(isUnitlessNumber$3.hasOwnProperty(et)&&isUnitlessNumber$3[et])?dt+"px":(""+dt).trim()}var attributeCache$3={};function applyAnimatedValues$3(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const kt=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:$t,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>kt||et.hasAttribute(Zt)?Zt:attributeCache$3[Zt]||(attributeCache$3[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$3(Zt,Tt[Zt]);isCustomPropRE$3.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),$t!==void 0&&(et.className=$t),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$3={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$3=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$3=["Webkit","Ms","Moz","O"];isUnitlessNumber$3=Object.keys(isUnitlessNumber$3).reduce((et,dt)=>(prefixes$3.forEach(kt=>et[prefixKey$3(kt,dt)]=et[dt]),et),isUnitlessNumber$3);var domTransforms$3=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$3=/^(translate)/,degTransforms$3=/^(rotate|skew)/,addUnit$3=(et,dt)=>is$3.num(et)&&et!==0?et+dt:et,isValueIdentity$3=(et,dt)=>is$3.arr(et)?et.every(kt=>isValueIdentity$3(kt,dt)):is$3.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$3=class extends AnimatedObject$3{constructor({x:dt,y:kt,z:$t,...Tt}){const Dt=[],Ft=[];(dt||kt||$t)&&(Dt.push([dt||0,kt||0,$t||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$3(Ht,"px")).join(",")})`,isValueIdentity$3(Ut,0)])),eachProp$3(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$3.test(Ht)){if(delete Tt[Ht],is$3.und(Ut))return;const Kt=pxTransforms$3.test(Ht)?"px":degTransforms$3.test(Ht)?"deg":"";Dt.push(toArray$3(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$3(er,Kt)})`,isValueIdentity$3(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$3(Jt,Kt)).join(",")})`,isValueIdentity$3(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$3(Dt,Ft)),super(Tt)}},FluidTransform$3=class extends FluidValue$3{constructor(dt,kt){super(),this.inputs=dt,this.transforms=kt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",kt=!0;return each$3(this.inputs,($t,Tt)=>{const Dt=getFluidValue$3($t[0]),[Ft,Ut]=this.transforms[Tt](is$3.arr(Dt)?Dt:$t.map(getFluidValue$3));dt+=" "+Ft,kt=kt&&Ut}),kt?"none":dt}observerAdded(dt){dt==1&&each$3(this.inputs,kt=>each$3(kt,$t=>hasFluidValue$3($t)&&addFluidObserver$3($t,this)))}observerRemoved(dt){dt==0&&each$3(this.inputs,kt=>each$3(kt,$t=>hasFluidValue$3($t)&&removeFluidObserver$3($t,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$3(this,dt)}},primitives$3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$3.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$3,colors:colors2$3});var host$3=createHost$3(primitives$3,{applyAnimatedValues:applyAnimatedValues$3,createAnimatedStyle:et=>new AnimatedStyle$3(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...kt})=>kt}),animated$3=host$3.animated,a$1=function(et,dt){et.font=(dt.fontWeight?dt.fontWeight+" ":"")+dt.fontSize+"px "+dt.fontFamily},d=function(et,dt,kt,$t,Tt){$t===void 0&&($t=0),Tt===void 0&&(Tt=0),dt.outlineWidth>0&&(et.strokeStyle=dt.outlineColor,et.lineWidth=2*dt.outlineWidth,et.lineJoin="round",et.strokeText(kt,$t,Tt)),et.fillStyle=dt.fill,et.fillText(kt,$t,Tt)};function p$1(){return p$1=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},p$1.apply(null,arguments)}function s(et,dt){if(et==null)return{};var kt={};for(var $t in et)if({}.hasOwnProperty.call(et,$t)){if(dt.indexOf($t)!==-1)continue;kt[$t]=et[$t]}return kt}var h=["style","children"],m=["outlineWidth","outlineColor","outlineOpacity"],b$2=function(et){var dt=et.style,kt=et.children,$t=s(et,h),Tt=dt.outlineWidth,Dt=dt.outlineColor,Ft=dt.outlineOpacity,Ut=s(dt,m);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Tt>0&&jsxRuntimeExports.jsx(animated$3.text,p$1({},$t,{style:p$1({},Ut,{strokeWidth:2*Tt,stroke:Dt,strokeOpacity:Ft,strokeLinejoin:"round"}),children:kt})),jsxRuntimeExports.jsx(animated$3.text,p$1({},$t,{style:Ut,children:kt}))]})},updateQueue$2=makeQueue$2(),raf$2=et=>schedule$2(et,updateQueue$2),writeQueue$2=makeQueue$2();raf$2.write=et=>schedule$2(et,writeQueue$2);var onStartQueue$2=makeQueue$2();raf$2.onStart=et=>schedule$2(et,onStartQueue$2);var onFrameQueue$2=makeQueue$2();raf$2.onFrame=et=>schedule$2(et,onFrameQueue$2);var onFinishQueue$2=makeQueue$2();raf$2.onFinish=et=>schedule$2(et,onFinishQueue$2);var timeouts$2=[];raf$2.setTimeout=(et,dt)=>{const kt=raf$2.now()+dt,$t=()=>{const Dt=timeouts$2.findIndex(Ft=>Ft.cancel==$t);~Dt&&timeouts$2.splice(Dt,1),pendingCount$2-=~Dt?1:0},Tt={time:kt,handler:et,cancel:$t};return timeouts$2.splice(findTimeout$2(kt),0,Tt),pendingCount$2+=1,start$2(),Tt};var findTimeout$2=et=>~(~timeouts$2.findIndex(dt=>dt.time>et)||~timeouts$2.length);raf$2.cancel=et=>{onStartQueue$2.delete(et),onFrameQueue$2.delete(et),onFinishQueue$2.delete(et),updateQueue$2.delete(et),writeQueue$2.delete(et)};raf$2.sync=et=>{sync$2=!0,raf$2.batchedUpdates(et),sync$2=!1};raf$2.throttle=et=>{let dt;function kt(){try{et(...dt)}finally{dt=null}}function $t(...Tt){dt=Tt,raf$2.onStart(kt)}return $t.handler=et,$t.cancel=()=>{onStartQueue$2.delete(kt),dt=null},$t};var nativeRaf$2=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$2.use=et=>nativeRaf$2=et;raf$2.now=typeof performance<"u"?()=>performance.now():Date.now;raf$2.batchedUpdates=et=>et();raf$2.catch=console.error;raf$2.frameLoop="always";raf$2.advance=()=>{raf$2.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$2()};var ts$2=-1,pendingCount$2=0,sync$2=!1;function schedule$2(et,dt){sync$2?(dt.delete(et),et(0)):(dt.add(et),start$2())}function start$2(){ts$2<0&&(ts$2=0,raf$2.frameLoop!=="demand"&&nativeRaf$2(loop$2))}function stop$2(){ts$2=-1}function loop$2(){~ts$2&&(nativeRaf$2(loop$2),raf$2.batchedUpdates(update$2))}function update$2(){const et=ts$2;ts$2=raf$2.now();const dt=findTimeout$2(ts$2);if(dt&&(eachSafely$2(timeouts$2.splice(0,dt),kt=>kt.handler()),pendingCount$2-=dt),!pendingCount$2){stop$2();return}onStartQueue$2.flush(),updateQueue$2.flush(et?Math.min(64,ts$2-et):16.667),onFrameQueue$2.flush(),writeQueue$2.flush(),onFinishQueue$2.flush()}function makeQueue$2(){let et=new Set,dt=et;return{add(kt){pendingCount$2+=dt==et&&!et.has(kt)?1:0,et.add(kt)},delete(kt){return pendingCount$2-=dt==et&&et.has(kt)?1:0,et.delete(kt)},flush(kt){dt.size&&(et=new Set,pendingCount$2-=dt.size,eachSafely$2(dt,$t=>$t(kt)&&et.add($t)),pendingCount$2+=et.size,dt=et)}}}function eachSafely$2(et,dt){et.forEach(kt=>{try{dt(kt)}catch($t){raf$2.catch($t)}})}var __defProp$2=Object.defineProperty,__export$2=(et,dt)=>{for(var kt in dt)__defProp$2(et,kt,{get:dt[kt],enumerable:!0})},globals_exports$2={};__export$2(globals_exports$2,{assign:()=>assign$2,colors:()=>colors$2,createStringInterpolator:()=>createStringInterpolator$2,skipAnimation:()=>skipAnimation$2,to:()=>to$3,willAdvance:()=>willAdvance$2});function noop$4(){}var defineHidden$2=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),is$2={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$2(et,dt){if(is$2.arr(et)){if(!is$2.arr(dt)||et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}return et===dt}var each$2=(et,dt)=>et.forEach(dt);function eachProp$2(et,dt,kt){if(is$2.arr(et)){for(let $t=0;$t<et.length;$t++)dt.call(kt,et[$t],`${$t}`);return}for(const $t in et)et.hasOwnProperty($t)&&dt.call(kt,et[$t],$t)}var toArray$2=et=>is$2.und(et)?[]:is$2.arr(et)?et:[et];function flush$2(et,dt){if(et.size){const kt=Array.from(et);et.clear(),each$2(kt,dt)}}var flushCalls$2=(et,...dt)=>flush$2(et,kt=>kt(...dt)),isSSR$2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$2,to$3,colors$2=null,skipAnimation$2=!1,willAdvance$2=noop$4,assign$2=et=>{et.to&&(to$3=et.to),et.now&&(raf$2.now=et.now),et.colors!==void 0&&(colors$2=et.colors),et.skipAnimation!=null&&(skipAnimation$2=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$2=et.createStringInterpolator),et.requestAnimationFrame&&raf$2.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$2.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$2=et.willAdvance),et.frameLoop&&(raf$2.frameLoop=et.frameLoop)},startQueue$2=new Set,currentFrame$2=[],prevFrame$2=[],priority$2=0,frameLoop$2={get idle(){return!startQueue$2.size&&!currentFrame$2.length},start(et){priority$2>et.priority?(startQueue$2.add(et),raf$2.onStart(flushStartQueue$2)):(startSafely$2(et),raf$2(advance$2))},advance:advance$2,sort(et){if(priority$2)raf$2.onFrame(()=>frameLoop$2.sort(et));else{const dt=currentFrame$2.indexOf(et);~dt&&(currentFrame$2.splice(dt,1),startUnsafely$2(et))}},clear(){currentFrame$2=[],startQueue$2.clear()}};function flushStartQueue$2(){startQueue$2.forEach(startSafely$2),startQueue$2.clear(),raf$2(advance$2)}function startSafely$2(et){currentFrame$2.includes(et)||startUnsafely$2(et)}function startUnsafely$2(et){currentFrame$2.splice(findIndex$2(currentFrame$2,dt=>dt.priority>et.priority),0,et)}function advance$2(et){const dt=prevFrame$2;for(let kt=0;kt<currentFrame$2.length;kt++){const $t=currentFrame$2[kt];priority$2=$t.priority,$t.idle||(willAdvance$2($t),$t.advance(et),$t.idle||dt.push($t))}return priority$2=0,prevFrame$2=currentFrame$2,prevFrame$2.length=0,currentFrame$2=dt,currentFrame$2.length>0}function findIndex$2(et,dt){const kt=et.findIndex(dt);return kt<0?et.length:kt}var clamp$2=(et,dt,kt)=>Math.min(Math.max(kt,et),dt),colors2$2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$2="[-+]?\\d*\\.?\\d+",PERCENTAGE$2=NUMBER$2+"%";function call$2(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$2=new RegExp("rgb"+call$2(NUMBER$2,NUMBER$2,NUMBER$2)),rgba$2=new RegExp("rgba"+call$2(NUMBER$2,NUMBER$2,NUMBER$2,NUMBER$2)),hsl$2=new RegExp("hsl"+call$2(NUMBER$2,PERCENTAGE$2,PERCENTAGE$2)),hsla$2=new RegExp("hsla"+call$2(NUMBER$2,PERCENTAGE$2,PERCENTAGE$2,NUMBER$2)),hex3$2=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$2=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$2=/^#([0-9a-fA-F]{6})$/,hex8$2=/^#([0-9a-fA-F]{8})$/;function normalizeColor$2(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$2.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$2&&colors$2[et]!==void 0?colors$2[et]:(dt=rgb$2.exec(et))?(parse255$2(dt[1])<<24|parse255$2(dt[2])<<16|parse255$2(dt[3])<<8|255)>>>0:(dt=rgba$2.exec(et))?(parse255$2(dt[1])<<24|parse255$2(dt[2])<<16|parse255$2(dt[3])<<8|parse1$2(dt[4]))>>>0:(dt=hex3$2.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$2.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$2.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$2.exec(et))?(hslToRgb$2(parse360$2(dt[1]),parsePercentage$2(dt[2]),parsePercentage$2(dt[3]))|255)>>>0:(dt=hsla$2.exec(et))?(hslToRgb$2(parse360$2(dt[1]),parsePercentage$2(dt[2]),parsePercentage$2(dt[3]))|parse1$2(dt[4]))>>>0:null}function hue2rgb$2(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb$2(et,dt,kt){const $t=kt<.5?kt*(1+dt):kt+dt-kt*dt,Tt=2*kt-$t,Dt=hue2rgb$2(Tt,$t,et+1/3),Ft=hue2rgb$2(Tt,$t,et),Ut=hue2rgb$2(Tt,$t,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$2(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$2(et){return(parseFloat(et)%360+360)%360/360}function parse1$2(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$2(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$2(et){let dt=normalizeColor$2(et);if(dt===null)return et;dt=dt||0;const kt=(dt&4278190080)>>>24,$t=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${kt}, ${$t}, ${Tt}, ${Dt})`}var createInterpolator$2=(et,dt,kt)=>{if(is$2.fun(et))return et;if(is$2.arr(et))return createInterpolator$2({range:et,output:dt,extrapolate:kt});if(is$2.str(et.output[0]))return createStringInterpolator$2(et);const $t=et,Tt=$t.output,Dt=$t.range||[0,1],Ft=$t.extrapolateLeft||$t.extrapolate||"extend",Ut=$t.extrapolateRight||$t.extrapolate||"extend",Ht=$t.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$2(Kt,Dt);return interpolate$2(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,$t.map)}};function interpolate$2(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>kt){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=kt)}return $t===Tt?$t:dt===kt?et<=dt?$t:Tt:(dt===-1/0?Kt=-Kt:kt===1/0?Kt=Kt-dt:Kt=(Kt-dt)/(kt-dt),Kt=Dt(Kt),$t===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+$t:Kt=Kt*(Tt-$t)+$t,Kt)}function findRange$2(et,dt){for(var kt=1;kt<dt.length-1&&!(dt[kt]>=et);++kt);return kt-1}var steps$2=(et,dt="end")=>kt=>{kt=dt==="end"?Math.min(kt,.999):Math.max(kt,.001);const $t=kt*et,Tt=dt==="end"?Math.floor($t):Math.ceil($t);return clamp$2(0,1,Tt/et)},c1$2=1.70158,c2$2=c1$2*1.525,c3$2=c1$2+1,c4$2=2*Math.PI/3,c5$2=2*Math.PI/4.5,bounceOut$2=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$2={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$2*et*et*et-c1$2*et*et,easeOutBack:et=>1+c3$2*Math.pow(et-1,3)+c1$2*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$2+1)*2*et-c2$2)/2:(Math.pow(2*et-2,2)*((c2$2+1)*(et*2-2)+c2$2)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$2),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$2)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$2))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$2)/2+1,easeInBounce:et=>1-bounceOut$2(1-et),easeOutBounce:bounceOut$2,easeInOutBounce:et=>et<.5?(1-bounceOut$2(1-2*et))/2:(1+bounceOut$2(2*et-1))/2,steps:steps$2},$get$2=Symbol.for("FluidValue.get"),$observers$2=Symbol.for("FluidValue.observers"),hasFluidValue$2=et=>!!(et&&et[$get$2]),getFluidValue$2=et=>et&&et[$get$2]?et[$get$2]():et,getFluidObservers$2=et=>et[$observers$2]||null;function callFluidObserver$2(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$2(et,dt){const kt=et[$observers$2];kt&&kt.forEach($t=>{callFluidObserver$2($t,dt)})}var FluidValue$2=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$2(this,dt)}},setFluidGetter$2=(et,dt)=>setHidden$2(et,$get$2,dt);function addFluidObserver$2(et,dt){if(et[$get$2]){let kt=et[$observers$2];kt||setHidden$2(et,$observers$2,kt=new Set),kt.has(dt)||(kt.add(dt),et.observerAdded&&et.observerAdded(kt.size,dt))}return dt}function removeFluidObserver$2(et,dt){const kt=et[$observers$2];if(kt&&kt.has(dt)){const $t=kt.size-1;$t?kt.delete(dt):et[$observers$2]=null,et.observerRemoved&&et.observerRemoved($t,dt)}}var setHidden$2=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),numberRegex$2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$2=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$2=new RegExp(`(${numberRegex$2.source})(%|[a-z]+)`,"i"),rgbaRegex$2=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$2=et=>{const[dt,kt]=parseCSSVariable$2(et);if(!dt||isSSR$2())return et;const $t=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if($t)return $t.trim();if(kt&&kt.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue(kt);return Tt||et}else{if(kt&&cssVariableRegex$2.test(kt))return variableToRgba$2(kt);if(kt)return kt}return et},parseCSSVariable$2=et=>{const dt=cssVariableRegex$2.exec(et);if(!dt)return[,];const[,kt,$t]=dt;return[kt,$t]},namedColorRegex$2,rgbaRound$2=(et,dt,kt,$t,Tt)=>`rgba(${Math.round(dt)}, ${Math.round(kt)}, ${Math.round($t)}, ${Tt})`,createStringInterpolator2$2=et=>{namedColorRegex$2||(namedColorRegex$2=colors$2?new RegExp(`(${Object.keys(colors$2).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$2(Dt).replace(cssVariableRegex$2,variableToRgba$2).replace(colorRegex$2,colorToRgba$2).replace(namedColorRegex$2,colorToRgba$2)),kt=dt.map(Dt=>Dt.match(numberRegex$2).map(Number)),Tt=kt[0].map((Dt,Ft)=>kt.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$2({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$2.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$2.test(Kt)))==null?void 0:Ht.replace(numberRegex$2,""));let Ut=0;return dt[0].replace(numberRegex$2,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$2,rgbaRound$2)}},prefix$2="react-spring: ",once$2=et=>{const dt=et;let kt=!1;if(typeof dt!="function")throw new TypeError(`${prefix$2}once requires a function parameter`);return(...$t)=>{kt||(dt(...$t),kt=!0)}},warnInterpolate$2=once$2(console.warn);function deprecateInterpolate$2(){warnInterpolate$2(`${prefix$2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$2=once$2(console.warn);function deprecateDirectCall$2(){warnDirectCall$2(`${prefix$2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$2(et){return is$2.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$2()&&cssVariableRegex$2.test(et)||et in(colors$2||{}))}var useIsomorphicLayoutEffect$2=isSSR$2()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$2=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$2(){const et=reactExports.useState()[1],dt=useIsMounted$2();return()=>{dt.current&&et(Math.random())}}var useOnce$2=et=>reactExports.useEffect(et,emptyDeps$2),emptyDeps$2=[];function usePrev$2(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$2=Symbol.for("Animated:node"),isAnimated$2=et=>!!et&&et[$node$2]===et,getAnimated$2=et=>et&&et[$node$2],setAnimated$2=(et,dt)=>defineHidden$2(et,$node$2,dt),getPayload$2=et=>et&&et[$node$2]&&et[$node$2].getPayload(),Animated$2=class{constructor(){setAnimated$2(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$2=class Q_ extends Animated$2{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$2.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new Q_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,kt){return is$2.num(dt)&&(this.lastPosition=dt,kt&&(dt=Math.round(dt/kt)*kt,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$2.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$2=class J_ extends AnimatedValue$2{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$2({output:[dt,dt]})}static create(dt){return new J_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$2.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$2({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$2={dependencies:null},AnimatedObject$2=class extends Animated$2{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const kt={};return eachProp$2(this.source,($t,Tt)=>{isAnimated$2($t)?kt[Tt]=$t.getValue(dt):hasFluidValue$2($t)?kt[Tt]=getFluidValue$2($t):dt||(kt[Tt]=$t)}),kt}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$2(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const kt=new Set;return eachProp$2(dt,this._addToPayload,kt),Array.from(kt)}}_addToPayload(dt){TreeContext$2.dependencies&&hasFluidValue$2(dt)&&TreeContext$2.dependencies.add(dt);const kt=getPayload$2(dt);kt&&each$2(kt,$t=>this.add($t))}},AnimatedArray$2=class Z_ extends AnimatedObject$2{constructor(dt){super(dt)}static create(dt){return new Z_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const kt=this.getPayload();return dt.length==kt.length?kt.map(($t,Tt)=>$t.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$2)),!0)}};function makeAnimated$2(et){return(isAnimatedString$2(et)?AnimatedString$2:AnimatedValue$2).create(et)}function getAnimatedType$2(et){const dt=getAnimated$2(et);return dt?dt.constructor:is$2.arr(et)?AnimatedArray$2:isAnimatedString$2(et)?AnimatedString$2:AnimatedValue$2}var withAnimated$2=(et,dt)=>{const kt=!is$2.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef(($t,Tt)=>{const Dt=reactExports.useRef(null),Ft=kt&&reactExports.useCallback(rr=>{Dt.current=updateRef$2(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$2($t,dt),Kt=useForceUpdate$2(),Yt=()=>{const rr=Dt.current;if(kt&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$2(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$2(()=>(Zt.current=Jt,each$2(Ht,rr=>addFluidObserver$2(rr,Jt)),()=>{Zt.current&&(each$2(Zt.current.deps,rr=>removeFluidObserver$2(rr,Zt.current)),raf$2.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$2(()=>()=>{const rr=Zt.current;each$2(rr.deps,sr=>removeFluidObserver$2(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$2=class{constructor(dt,kt){this.update=dt,this.deps=kt}eventObserved(dt){dt.type=="change"&&raf$2.write(this.update)}};function getAnimatedState$2(et,dt){const kt=new Set;return TreeContext$2.dependencies=kt,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$2(et),TreeContext$2.dependencies=null,[et,kt]}function updateRef$2(et,dt){return et&&(is$2.fun(et)?et(dt):et.current=dt),dt}var cacheKey$2=Symbol.for("AnimatedComponent"),createHost$2=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:kt=Tt=>new AnimatedObject$2(Tt),getComponentProps:$t=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:kt,getComponentProps:$t},Dt=Ft=>{const Ut=getDisplayName$2(Ft)||"Anonymous";return is$2.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$2(Ft,Tt)):Ft=Ft[cacheKey$2]||(Ft[cacheKey$2]=withAnimated$2(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$2(et,(Ft,Ut)=>{is$2.arr(et)&&(Ut=getDisplayName$2(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$2=et=>is$2.str(et)?et:et&&is$2.str(et.displayName)?et.displayName:is$2.fun(et)&&et.name||null;function callProp$2(et,...dt){return is$2.fun(et)?et(...dt):et}var matchProp$2=(et,dt)=>et===!0||!!(dt&&et&&(is$2.fun(et)?et(dt):toArray$2(et).includes(dt))),resolveProp$2=(et,dt)=>is$2.obj(et)?dt&&et[dt]:et,getDefaultProp$2=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$2=et=>et,getDefaultProps$2=(et,dt=noopTransform$2)=>{let kt=DEFAULT_PROPS$2;et.default&&et.default!==!0&&(et=et.default,kt=Object.keys(et));const $t={};for(const Tt of kt){const Dt=dt(et[Tt],Tt);is$2.und(Dt)||($t[Tt]=Dt)}return $t},DEFAULT_PROPS$2=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$2={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$2(et){const dt={};let kt=0;if(eachProp$2(et,($t,Tt)=>{RESERVED_PROPS$2[Tt]||(dt[Tt]=$t,kt++)}),kt)return dt}function inferTo$2(et){const dt=getForwardProps$2(et);if(dt){const kt={to:dt};return eachProp$2(et,($t,Tt)=>Tt in dt||(kt[Tt]=$t)),kt}return{...et}}function computeGoal$2(et){return et=getFluidValue$2(et),is$2.arr(et)?et.map(computeGoal$2):isAnimatedString$2(et)?globals_exports$2.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$2(et){for(const dt in et)return!0;return!1}function isAsyncTo$2(et){return is$2.fun(et)||is$2.arr(et)&&is$2.obj(et[0])}function detachRefs$2(et,dt){var kt;(kt=et.ref)==null||kt.delete(et),dt==null||dt.delete(et)}function replaceRef$2(et,dt){var kt;dt&&et.ref!==dt&&((kt=et.ref)==null||kt.delete(et),dt.add(et),et.ref=dt)}var config$2={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$2={...config$2.default,mass:1,damping:1,easing:easings$2.linear,clamp:!1},AnimationConfig$2=class{constructor(){this.velocity=0,Object.assign(this,defaults$2)}};function mergeConfig$2(et,dt,kt){kt&&(kt={...kt},sanitizeConfig$2(kt,dt),dt={...kt,...dt}),sanitizeConfig$2(et,dt),Object.assign(et,dt);for(const Ft in defaults$2)et[Ft]==null&&(et[Ft]=defaults$2[Ft]);let{frequency:$t,damping:Tt}=et;const{mass:Dt}=et;return is$2.und($t)||($t<.01&&($t=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/$t,2)*Dt,et.friction=4*Math.PI*Tt*Dt/$t),et}function sanitizeConfig$2(et,dt){if(!is$2.und(dt.decay))et.duration=void 0;else{const kt=!is$2.und(dt.tension)||!is$2.und(dt.friction);(kt||!is$2.und(dt.frequency)||!is$2.und(dt.damping)||!is$2.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),kt&&(et.frequency=void 0)}}var emptyArray$2=[],Animation$2=class{constructor(){this.changed=!1,this.values=emptyArray$2,this.toValues=null,this.fromValues=emptyArray$2,this.config=new AnimationConfig$2,this.immediate=!1}};function scheduleProps$2(et,{key:dt,props:kt,defaultProps:$t,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$2(kt.cancel??($t==null?void 0:$t.cancel),dt);if(Yt)er();else{is$2.und(kt.pause)||(Tt.paused=matchProp$2(kt.pause,dt));let rr=$t==null?void 0:$t.pause;rr!==!0&&(rr=Tt.paused||matchProp$2(rr,dt)),Ht=callProp$2(kt.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$2.now()}function Zt(){Ht>0&&!globals_exports$2.skipAnimation?(Tt.delayed=!0,Kt=raf$2.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...kt,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$2=(et,dt)=>dt.length==1?dt[0]:dt.some(kt=>kt.cancelled)?getCancelledResult$2(et.get()):dt.every(kt=>kt.noop)?getNoopResult$2(et.get()):getFinishedResult$2(et.get(),dt.every(kt=>kt.finished)),getNoopResult$2=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$2=(et,dt,kt=!1)=>({value:et,finished:dt,cancelled:kt}),getCancelledResult$2=et=>({value:et,cancelled:!0,finished:!1});function runAsync$2(et,dt,kt,$t){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=kt;return!Dt&&et===Ut&&!dt.reset?Ht:kt.promise=(async()=>{kt.asyncId=Tt,kt.asyncTo=et;const Kt=getDefaultProps$2(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=(kt.cancelId||0)&&getCancelledResult$2($t)||Tt!==kt.asyncId&&getFinishedResult$2($t,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const lr=new BailSignal$2,or=new SkipAnimationSignal$2;return(async()=>{if(globals_exports$2.skipAnimation)throw stopAsync$2(kt),or.result=getFinishedResult$2($t,!1),Jt(or),or;er(lr);const cr=is$2.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$2(Kt,(ur,pr)=>{is$2.und(cr[pr])&&(cr[pr]=ur)});const dr=await $t.start(cr);return er(lr),kt.paused&&await new Promise(ur=>{kt.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$2.skipAnimation)return stopAsync$2(kt),getFinishedResult$2($t,!1);try{let nr;is$2.arr(et)?nr=(async ir=>{for(const lr of ir)await rr(lr)})(et):nr=Promise.resolve(et(rr,$t.stop.bind($t))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$2($t.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$2)sr=nr.result;else if(nr instanceof SkipAnimationSignal$2)sr=nr.result;else throw nr}finally{Tt==kt.asyncId&&(kt.asyncId=Dt,kt.asyncTo=Dt?Ut:void 0,kt.promise=Dt?Ht:void 0)}return is$2.fun(Ft)&&raf$2.batchedUpdates(()=>{Ft(sr,$t,$t.item)}),sr})()}function stopAsync$2(et,dt){flush$2(et.timeouts,kt=>kt.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$2=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$2=et=>et instanceof FrameValue$2,nextId$2=1,FrameValue$2=class extends FluidValue$2{constructor(){super(...arguments),this.id=nextId$2++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$2(this);return dt&&dt.getValue()}to(...dt){return globals_exports$2.to(this,dt)}interpolate(...dt){return deprecateInterpolate$2(),globals_exports$2.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,kt=!1){callFluidObservers$2(this,{type:"change",parent:this,value:dt,idle:kt})}_onPriorityChange(dt){this.idle||frameLoop$2.sort(this),callFluidObservers$2(this,{type:"priority",parent:this,priority:dt})}},$P$2=Symbol.for("SpringPhase"),HAS_ANIMATED$2=1,IS_ANIMATING$2=2,IS_PAUSED$2=4,hasAnimated$2=et=>(et[$P$2]&HAS_ANIMATED$2)>0,isAnimating$2=et=>(et[$P$2]&IS_ANIMATING$2)>0,isPaused$2=et=>(et[$P$2]&IS_PAUSED$2)>0,setActiveBit$2=(et,dt)=>dt?et[$P$2]|=IS_ANIMATING$2|HAS_ANIMATED$2:et[$P$2]&=~IS_ANIMATING$2,setPausedBit$2=(et,dt)=>dt?et[$P$2]|=IS_PAUSED$2:et[$P$2]&=~IS_PAUSED$2,SpringValue$2=class extends FrameValue$2{constructor(dt,kt){if(super(),this.animation=new Animation$2,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$2.und(dt)||!is$2.und(kt)){const $t=is$2.obj(dt)?{...dt}:{...kt,from:dt};is$2.und($t.default)&&($t.default=!0),this.start($t)}}get idle(){return!(isAnimating$2(this)||this._state.asyncTo)||isPaused$2(this)}get goal(){return getFluidValue$2(this.animation.to)}get velocity(){const dt=getAnimated$2(this);return dt instanceof AnimatedValue$2?dt.lastVelocity||0:dt.getPayload().map(kt=>kt.lastVelocity||0)}get hasAnimated(){return hasAnimated$2(this)}get isAnimating(){return isAnimating$2(this)}get isPaused(){return isPaused$2(this)}get isDelayed(){return this._state.delayed}advance(dt){let kt=!0,$t=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$2(Tt.to);!Ut&&hasFluidValue$2(Tt.to)&&(Dt=toArray$2(getFluidValue$2(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$2?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$2.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let lr;const or=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$2.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=or,lr=ir*dr}else{lr=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||or/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$2.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,br=Math.ceil(dt/Rr);for(let _r=0;_r<br&&(mr=Math.abs(lr)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=or,er)));++_r){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(lr=-lr*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Pr=-Ft.friction*.001*lr,Or=(Mr+Pr)/Ft.mass;lr=lr+Or*Rr,rr=rr+lr*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),lr=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=lr,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:kt=!1,Yt.setValue(rr,Ft.round)&&($t=!0)});const Ht=getAnimated$2(this),Kt=Ht.getValue();if(kt){const Yt=getFluidValue$2(Tt.to);(Kt!==Yt||$t)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):$t&&Ft.decay&&this._onChange(Kt),this._stop()}else $t&&this._onChange(Kt)}set(dt){return raf$2.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$2(this)){const{to:dt,config:kt}=this.animation;raf$2.batchedUpdates(()=>{this._onStart(),kt.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,kt){let $t;return is$2.und(dt)?($t=this.queue||[],this.queue=[]):$t=[is$2.obj(dt)?dt:{...kt,to:dt}],Promise.all($t.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$2(this,Tt))}stop(dt){const{to:kt}=this.animation;return this._focus(this.get()),stopAsync$2(this._state,dt&&this._lastCallId),raf$2.batchedUpdates(()=>this._stop(kt,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const kt=this.key||"";let{to:$t,from:Tt}=dt;$t=is$2.obj($t)?$t[kt]:$t,($t==null||isAsyncTo$2($t))&&($t=void 0),Tt=is$2.obj(Tt)?Tt[kt]:Tt,Tt==null&&(Tt=void 0);const Dt={to:$t,from:Tt};return hasAnimated$2(this)||(dt.reverse&&([$t,Tt]=[Tt,$t]),Tt=getFluidValue$2(Tt),is$2.und(Tt)?getAnimated$2(this)||this._set($t):this._set(Tt)),Dt}_update({...dt},kt){const{key:$t,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$2(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$2(Ut,$t):Ut)),mergeActiveFn$2(this,dt,"onProps"),sendEvent$2(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$2(++this._lastCallId,{key:$t,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$2(this)||(setPausedBit$2(this,!0),flushCalls$2(Ft.pauseQueue),sendEvent$2(this,"onPause",getFinishedResult$2(this,checkFinished$2(this,this.animation.to)),this))},resume:()=>{isPaused$2(this)&&(setPausedBit$2(this,!1),isAnimating$2(this)&&this._resume(),flushCalls$2(Ft.resumeQueue),sendEvent$2(this,"onResume",getFinishedResult$2(this,checkFinished$2(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!(kt&&Ut.noop)){const Ht=createLoopUpdate$2(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,kt,$t){if(kt.cancel)return this.stop(!0),$t(getCancelledResult$2(this));const Tt=!is$2.und(dt.to),Dt=!is$2.und(dt.from);if(Tt||Dt)if(kt.callId>this._lastToId)this._lastToId=kt.callId;else return $t(getCancelledResult$2(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!kt.default||is$2.und(Jt))&&(Jt=Zt),kt.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$2(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$2(Zt);const rr=!isEqual$2(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$2(kt.to),{config:nr}=Ht,{decay:ir,velocity:lr}=nr;(Tt||Dt)&&(nr.velocity=0),kt.config&&!sr&&mergeConfig$2(nr,callProp$2(kt.config,Ft),kt.config!==Ut.config?callProp$2(Ut.config,Ft):void 0);let or=getAnimated$2(this);if(!or||is$2.und(Jt))return $t(getFinishedResult$2(this,!0));const cr=is$2.und(kt.reset)?Dt&&!kt.default:!is$2.und(Zt)&&matchProp$2(kt.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$2(Jt),pr=is$2.num(ur)||is$2.arr(ur)||isAnimatedString$2(ur),mr=!sr&&(!pr||matchProp$2(Ut.immediate||kt.immediate,Ft));if(rr){const _r=getAnimatedType$2(Jt);if(_r!==or.constructor)if(mr)or=this._set(ur);else throw Error(`Cannot animate between ${or.constructor.name} and ${_r.name}, as the "to" prop suggests`)}const jr=or.constructor;let Rr=hasFluidValue$2(Jt),br=!1;if(!Rr){const _r=cr||!hasAnimated$2(this)&&er;(rr||_r)&&(br=isEqual$2(computeGoal$2(dr),ur),Rr=!br),(!isEqual$2(Ht.immediate,mr)&&!mr||!isEqual$2(nr.decay,ir)||!isEqual$2(nr.velocity,lr))&&(Rr=!0)}if(br&&isAnimating$2(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$2(Kt))&&(Ht.values=or.getPayload(),Ht.toValues=hasFluidValue$2(Jt)?null:jr==AnimatedString$2?[1]:toArray$2(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:_r}=Ht;each$2(ACTIVE_EVENTS$2,Pr=>mergeActiveFn$2(this,kt,Pr));const Mr=getFinishedResult$2(this,checkFinished$2(this,Kt));flushCalls$2(this._pendingCalls,Mr),this._pendingCalls.add($t),Ht.changed&&raf$2.batchedUpdates(()=>{var Pr;Ht.changed=!cr,_r==null||_r(Mr,this),cr?callProp$2(Ut.onRest,Mr):(Pr=Ht.onStart)==null||Pr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?$t(runAsync$2(kt.to,kt,this._state,this)):Rr?this._start():isAnimating$2(this)&&!rr?this._pendingCalls.add($t):$t(getNoopResult$2(dr))}_focus(dt){const kt=this.animation;dt!==kt.to&&(getFluidObservers$2(this)&&this._detach(),kt.to=dt,getFluidObservers$2(this)&&this._attach())}_attach(){let dt=0;const{to:kt}=this.animation;hasFluidValue$2(kt)&&(addFluidObserver$2(kt,this),isFrameValue$2(kt)&&(dt=kt.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$2(dt)&&removeFluidObserver$2(dt,this)}_set(dt,kt=!0){const $t=getFluidValue$2(dt);if(!is$2.und($t)){const Tt=getAnimated$2(this);if(!Tt||!isEqual$2($t,Tt.getValue())){const Dt=getAnimatedType$2($t);!Tt||Tt.constructor!=Dt?setAnimated$2(this,Dt.create($t)):Tt.setValue($t),Tt&&raf$2.batchedUpdates(()=>{this._onChange($t,kt)})}}return getAnimated$2(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$2(this,"onStart",getFinishedResult$2(this,checkFinished$2(this,dt.to)),this))}_onChange(dt,kt){kt||(this._onStart(),callProp$2(this.animation.onChange,dt,this)),callProp$2(this.defaultProps.onChange,dt,this),super._onChange(dt,kt)}_start(){const dt=this.animation;getAnimated$2(this).reset(getFluidValue$2(dt.to)),dt.immediate||(dt.fromValues=dt.values.map(kt=>kt.lastPosition)),isAnimating$2(this)||(setActiveBit$2(this,!0),isPaused$2(this)||this._resume())}_resume(){globals_exports$2.skipAnimation?this.finish():frameLoop$2.start(this)}_stop(dt,kt){if(isAnimating$2(this)){setActiveBit$2(this,!1);const $t=this.animation;each$2($t.values,Dt=>{Dt.done=!0}),$t.toValues&&($t.onChange=$t.onPause=$t.onResume=void 0),callFluidObservers$2(this,{type:"idle",parent:this});const Tt=kt?getCancelledResult$2(this.get()):getFinishedResult$2(this.get(),checkFinished$2(this,dt??$t.to));flushCalls$2(this._pendingCalls,Tt),$t.changed&&($t.changed=!1,sendEvent$2(this,"onRest",Tt,this))}}};function checkFinished$2(et,dt){const kt=computeGoal$2(dt),$t=computeGoal$2(et.get());return isEqual$2($t,kt)}function createLoopUpdate$2(et,dt=et.loop,kt=et.to){const $t=callProp$2(dt);if($t){const Tt=$t!==!0&&inferTo$2($t),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$2({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$2(kt)?kt:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$2(et){const{to:dt,from:kt}=et=inferTo$2(et),$t=new Set;return is$2.obj(dt)&&findDefined$2(dt,$t),is$2.obj(kt)&&findDefined$2(kt,$t),et.keys=$t.size?Array.from($t):null,et}function declareUpdate$1(et){const dt=createUpdate$2(et);return is$2.und(dt.default)&&(dt.default=getDefaultProps$2(dt)),dt}function findDefined$2(et,dt){eachProp$2(et,(kt,$t)=>kt!=null&&dt.add($t))}var ACTIVE_EVENTS$2=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$2(et,dt,kt){et.animation[kt]=dt[kt]!==getDefaultProp$2(dt,kt)?resolveProp$2(dt[kt],et.key):void 0}function sendEvent$2(et,dt,...kt){var $t,Tt,Dt,Ft;(Tt=($t=et.animation)[dt])==null||Tt.call($t,...kt),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...kt)}var BATCHED_EVENTS$2=["onStart","onChange","onRest"],nextId2$2=1,Controller$2=class{constructor(dt,kt){this.id=nextId2$2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),kt&&(this._flush=kt),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each((kt,$t)=>dt[$t]=kt.get()),dt}set(dt){for(const kt in dt){const $t=dt[kt];is$2.und($t)||this.springs[kt].set($t)}}update(dt){return dt&&this.queue.push(createUpdate$2(dt)),this}start(dt){let{queue:kt}=this;return dt?kt=toArray$2(dt).map(createUpdate$2):this.queue=[],this._flush?this._flush(this,kt):(prepareKeys$2(this,kt),flushUpdateQueue$2(this,kt))}stop(dt,kt){if(dt!==!!dt&&(kt=dt),kt){const $t=this.springs;each$2(toArray$2(kt),Tt=>$t[Tt].stop(!!dt))}else stopAsync$2(this._state,this._lastAsyncId),this.each($t=>$t.stop(!!dt));return this}pause(dt){if(is$2.und(dt))this.start({pause:!0});else{const kt=this.springs;each$2(toArray$2(dt),$t=>kt[$t].pause())}return this}resume(dt){if(is$2.und(dt))this.start({pause:!1});else{const kt=this.springs;each$2(toArray$2(dt),$t=>kt[$t].resume())}return this}each(dt){eachProp$2(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:kt,onRest:$t}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$2(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&$t.size?this.get():null;Dt&&kt.size&&flush$2(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$2($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$2.onFrame(this._onFrame)}};function flushUpdateQueue$2(et,dt){return Promise.all(dt.map(kt=>flushUpdate$2(et,kt))).then(kt=>getCombinedResult$2(et,kt))}async function flushUpdate$2(et,dt,kt){const{keys:$t,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$2.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$2.arr(Tt)||is$2.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$2(BATCHED_EVENTS$2,sr=>{const nr=dt[sr];if(is$2.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:lr,cancelled:or})=>{const cr=ir.get(nr);cr?(lr||(cr.finished=!1),or&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:lr||!1,cancelled:or||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$2(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=($t||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$2(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$2(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$4,resume:noop$4,start(sr,nr){er?(stopAsync$2(Jt,et._lastAsyncId),nr(getCancelledResult$2(et))):(sr.onRest=Ut,nr(runAsync$2(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$2(et,await Promise.all(Zt));if(Ft&&rr.finished&&!(kt&&rr.noop)){const sr=createLoopUpdate$2(dt,Ft,Tt);if(sr)return prepareKeys$2(et,[sr]),flushUpdate$2(et,sr,!0)}return Ht&&raf$2.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$2(et,dt){const kt={...et.springs};return dt&&each$2(toArray$2(dt),$t=>{is$2.und($t.keys)&&($t=createUpdate$2($t)),is$2.obj($t.to)||($t={...$t,to:void 0}),prepareSprings$2(kt,$t,Tt=>createSpring$2(Tt))}),setSprings$2(et,kt),kt}function setSprings$2(et,dt){eachProp$2(dt,(kt,$t)=>{et.springs[$t]||(et.springs[$t]=kt,addFluidObserver$2(kt,et))})}function createSpring$2(et,dt){const kt=new SpringValue$2;return kt.key=et,dt&&addFluidObserver$2(kt,dt),kt}function prepareSprings$2(et,dt,kt){dt.keys&&each$2(dt.keys,$t=>{(et[$t]||(et[$t]=kt($t)))._prepareNode(dt)})}function prepareKeys$2(et,dt){each$2(dt,kt=>{prepareSprings$2(et.springs,kt,$t=>createSpring$2($t,et))})}var SpringContext$2=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$2=()=>{const et=[],dt=function($t){deprecateDirectCall$2();const Tt=[];return each$2(et,(Dt,Ft)=>{if(is$2.und($t))Tt.push(Dt.start());else{const Ut=kt($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function($t){et.includes($t)||et.push($t)},dt.delete=function($t){const Tt=et.indexOf($t);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$2(et,$t=>$t.pause(...arguments)),this},dt.resume=function(){return each$2(et,$t=>$t.resume(...arguments)),this},dt.set=function($t){each$2(et,(Tt,Dt)=>{const Ft=is$2.fun($t)?$t(Dt,Tt):$t;Ft&&Tt.set(Ft)})},dt.start=function($t){const Tt=[];return each$2(et,(Dt,Ft)=>{if(is$2.und($t))Tt.push(Dt.start());else{const Ut=this._getProps($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$2(et,$t=>$t.stop(...arguments)),this},dt.update=function($t){return each$2(et,(Tt,Dt)=>Tt.update(this._getProps($t,Tt,Dt))),this};const kt=function($t,Tt,Dt){return is$2.fun($t)?$t(Dt,Tt):$t};return dt._getProps=kt,dt};function useSprings$1(et,dt,kt){const $t=is$2.fun(dt)&&dt;$t&&!kt&&(kt=[]);const Tt=reactExports.useMemo(()=>$t||arguments.length==3?SpringRef$2():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate$2(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,lr){const or=getSprings$2(ir,lr);return Dt.current>0&&!Ut.queue.length&&!Object.keys(or).some(dr=>!ir.springs[dr])?flushUpdateQueue$2(ir,lr):new Promise(dr=>{setSprings$2(ir,or),Ut.queue.push(()=>{dr(flushUpdateQueue$2(ir,lr))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev$2(et)||0;reactExports.useMemo(()=>{each$2(Ht.current.slice(et,Yt),ir=>{detachRefs$2(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},kt);function Jt(ir,lr){for(let or=ir;or<lr;or++){const cr=Ht.current[or]||(Ht.current[or]=new Controller$2(null,Ut.flush)),dr=$t?$t(or,cr):dt[or];dr&&(Kt.current[or]=declareUpdate$1(dr))}}const Zt=Ht.current.map((ir,lr)=>getSprings$2(ir,Kt.current[lr])),er=reactExports.useContext(SpringContext$2),rr=usePrev$2(er),sr=er!==rr&&hasProps$2(er);useIsomorphicLayoutEffect$2(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each$2(ir,lr=>lr())),each$2(Ht.current,(lr,or)=>{Tt==null||Tt.add(lr),sr&&lr.start({default:er});const cr=Kt.current[or];cr&&(replaceRef$2(lr,cr.ref),lr.ref?lr.queue.push(cr):lr.start(cr))})}),useOnce$2(()=>()=>{each$2(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring$1(et,dt){const kt=is$2.fun(et),[[$t],Tt]=useSprings$1(1,kt?et:[et],kt?dt||[]:dt);return kt||arguments.length==2?[$t,Tt]:$t}function useTransition$1(et,dt,kt){const $t=is$2.fun(dt)&&dt,{reset:Tt,sort:Dt,trail:Ft=0,expires:Ut=!0,exitBeforeEnter:Ht=!1,onDestroyed:Kt,ref:Yt,config:Jt}=$t?$t():dt,Zt=reactExports.useMemo(()=>$t||arguments.length==3?SpringRef$2():void 0,[]),er=toArray$2(et),rr=[],sr=reactExports.useRef(null),nr=Tt?null:sr.current;useIsomorphicLayoutEffect$2(()=>{sr.current=rr}),useOnce$2(()=>(each$2(rr,Pr=>{Zt==null||Zt.add(Pr.ctrl),Pr.ctrl.ref=Zt}),()=>{each$2(sr.current,Pr=>{Pr.expired&&clearTimeout(Pr.expirationId),detachRefs$2(Pr.ctrl,Zt),Pr.ctrl.stop(!0)})}));const ir=getKeys$1(er,$t?$t():dt,nr),lr=Tt&&sr.current||[];useIsomorphicLayoutEffect$2(()=>each$2(lr,({ctrl:Pr,item:Or,key:kr})=>{detachRefs$2(Pr,Zt),callProp$2(Kt,Or,kr)}));const or=[];if(nr&&each$2(nr,(Pr,Or)=>{Pr.expired?(clearTimeout(Pr.expirationId),lr.push(Pr)):(Or=or[Or]=ir.indexOf(Pr.key),~Or&&(rr[Or]=Pr))}),each$2(er,(Pr,Or)=>{rr[Or]||(rr[Or]={key:ir[Or],item:Pr,phase:"mount",ctrl:new Controller$2},rr[Or].ctrl.item=Pr)}),or.length){let Pr=-1;const{leave:Or}=$t?$t():dt;each$2(or,(kr,Tr)=>{const xr=nr[Tr];~kr?(Pr=rr.indexOf(xr),rr[Pr]={...xr,item:er[kr]}):Or&&rr.splice(++Pr,0,xr)})}is$2.fun(Dt)&&rr.sort((Pr,Or)=>Dt(Pr.item,Or.item));let cr=-Ft;const dr=useForceUpdate$2(),ur=getDefaultProps$2(dt),pr=new Map,mr=reactExports.useRef(new Map),jr=reactExports.useRef(!1);each$2(rr,(Pr,Or)=>{const kr=Pr.key,Tr=Pr.phase,xr=$t?$t():dt;let wr,zr;const Hr=callProp$2(xr.delay||0,kr);if(Tr=="mount")wr=xr.enter,zr="enter";else{const es=ir.indexOf(kr)<0;if(Tr!="leave")if(es)wr=xr.leave,zr="leave";else if(wr=xr.update)zr="update";else return;else if(!es)wr=xr.enter,zr="enter";else return}if(wr=callProp$2(wr,Pr.item,Or),wr=is$2.obj(wr)?inferTo$2(wr):{to:wr},!wr.config){const es=Jt||ur.config;wr.config=callProp$2(es,Pr.item,Or,zr)}cr+=Ft;const Yr={...ur,delay:Hr+cr,ref:Yt,immediate:xr.immediate,reset:!1,...wr};if(zr=="enter"&&is$2.und(Yr.from)){const es=$t?$t():dt,Xr=is$2.und(es.initial)||nr?es.from:es.initial;Yr.from=callProp$2(Xr,Pr.item,Or)}const{onResolve:rs}=Yr;Yr.onResolve=es=>{callProp$2(rs,es);const Xr=sr.current,Wr=Xr.find(cs=>cs.key===kr);if(Wr&&!(es.cancelled&&Wr.phase!="update")&&Wr.ctrl.idle){const cs=Xr.every(ns=>ns.ctrl.idle);if(Wr.phase=="leave"){const ns=callProp$2(Ut,Wr.item);if(ns!==!1){const us=ns===!0?0:ns;if(Wr.expired=!0,!cs&&us>0){us<=2147483647&&(Wr.expirationId=setTimeout(dr,us));return}}}cs&&Xr.some(ns=>ns.expired)&&(mr.current.delete(Wr),Ht&&(jr.current=!0),dr())}};const as=getSprings$2(Pr.ctrl,Yr);zr==="leave"&&Ht?mr.current.set(Pr,{phase:zr,springs:as,payload:Yr}):pr.set(Pr,{phase:zr,springs:as,payload:Yr})});const Rr=reactExports.useContext(SpringContext$2),br=usePrev$2(Rr),_r=Rr!==br&&hasProps$2(Rr);useIsomorphicLayoutEffect$2(()=>{_r&&each$2(rr,Pr=>{Pr.ctrl.start({default:Rr})})},[Rr]),each$2(pr,(Pr,Or)=>{if(mr.current.size){const kr=rr.findIndex(Tr=>Tr.key===Or.key);rr.splice(kr,1)}}),useIsomorphicLayoutEffect$2(()=>{each$2(mr.current.size?mr.current:pr,({phase:Pr,payload:Or},kr)=>{const{ctrl:Tr}=kr;kr.phase=Pr,Zt==null||Zt.add(Tr),_r&&Pr=="enter"&&Tr.start({default:Rr}),Or&&(replaceRef$2(Tr,Or.ref),(Tr.ref||Zt)&&!jr.current?Tr.update(Or):(Tr.start(Or),jr.current&&(jr.current=!1)))})},Tt?void 0:kt);const Mr=Pr=>reactExports.createElement(reactExports.Fragment,null,rr.map((Or,kr)=>{const{springs:Tr}=pr.get(Or)||Or.ctrl,xr=Pr({...Tr},Or.item,Or,kr),wr=is$2.str(Or.key)||is$2.num(Or.key)?Or.key:Or.ctrl.id,zr=reactExports.version<"19.0.0",Hr=(xr==null?void 0:xr.props)??{},Yr=zr?xr==null?void 0:xr.ref:Hr==null?void 0:Hr.ref;return xr&&xr.type?reactExports.createElement(xr.type,{...Hr,key:wr,ref:Yr}):xr}));return Zt?[Mr,Zt]:Mr}var nextKey$1=1;function getKeys$1(et,{key:dt,keys:kt=dt},$t){if(kt===null){const Tt=new Set;return et.map(Dt=>{const Ft=$t&&$t.find(Ut=>Ut.item===Dt&&Ut.phase!=="leave"&&!Tt.has(Ut));return Ft?(Tt.add(Ft),Ft.key):nextKey$1++})}return is$2.und(kt)?et:is$2.fun(kt)?et.map(kt):toArray$2(kt)}var Interpolation$2=class extends FrameValue$2{constructor(dt,kt){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$2(...kt);const $t=this._get(),Tt=getAnimatedType$2($t);setAnimated$2(this,Tt.create($t))}advance(dt){const kt=this._get(),$t=this.get();isEqual$2(kt,$t)||(getAnimated$2(this).setValue(kt),this._onChange(kt,this.idle)),!this.idle&&checkIdle$2(this._active)&&becomeIdle$2(this)}_get(){const dt=is$2.arr(this.source)?this.source.map(getFluidValue$2):toArray$2(getFluidValue$2(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$2(this._active)&&(this.idle=!1,each$2(getPayload$2(this),dt=>{dt.done=!1}),globals_exports$2.skipAnimation?(raf$2.batchedUpdates(()=>this.advance()),becomeIdle$2(this)):frameLoop$2.start(this))}_attach(){let dt=1;each$2(toArray$2(this.source),kt=>{hasFluidValue$2(kt)&&addFluidObserver$2(kt,this),isFrameValue$2(kt)&&(kt.idle||this._active.add(kt),dt=Math.max(dt,kt.priority+1))}),this.priority=dt,this._start()}_detach(){each$2(toArray$2(this.source),dt=>{hasFluidValue$2(dt)&&removeFluidObserver$2(dt,this)}),this._active.clear(),becomeIdle$2(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$2(this.source).reduce((kt,$t)=>Math.max(kt,(isFrameValue$2($t)?$t.priority:0)+1),0))}};function isIdle$2(et){return et.idle!==!1}function checkIdle$2(et){return!et.size||Array.from(et).every(isIdle$2)}function becomeIdle$2(et){et.idle||(et.idle=!0,each$2(getPayload$2(et),dt=>{dt.done=!0}),callFluidObservers$2(et,{type:"idle",parent:et}))}globals_exports$2.assign({createStringInterpolator:createStringInterpolator2$2,to:(et,dt)=>new Interpolation$2(et,dt)});var isCustomPropRE$2=/^--/;function dangerousStyleValue$2(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$2.test(et)&&!(isUnitlessNumber$2.hasOwnProperty(et)&&isUnitlessNumber$2[et])?dt+"px":(""+dt).trim()}var attributeCache$2={};function applyAnimatedValues$2(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const kt=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:$t,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>kt||et.hasAttribute(Zt)?Zt:attributeCache$2[Zt]||(attributeCache$2[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$2(Zt,Tt[Zt]);isCustomPropRE$2.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),$t!==void 0&&(et.className=$t),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$2={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$2=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$2=["Webkit","Ms","Moz","O"];isUnitlessNumber$2=Object.keys(isUnitlessNumber$2).reduce((et,dt)=>(prefixes$2.forEach(kt=>et[prefixKey$2(kt,dt)]=et[dt]),et),isUnitlessNumber$2);var domTransforms$2=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$2=/^(translate)/,degTransforms$2=/^(rotate|skew)/,addUnit$2=(et,dt)=>is$2.num(et)&&et!==0?et+dt:et,isValueIdentity$2=(et,dt)=>is$2.arr(et)?et.every(kt=>isValueIdentity$2(kt,dt)):is$2.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$2=class extends AnimatedObject$2{constructor({x:dt,y:kt,z:$t,...Tt}){const Dt=[],Ft=[];(dt||kt||$t)&&(Dt.push([dt||0,kt||0,$t||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$2(Ht,"px")).join(",")})`,isValueIdentity$2(Ut,0)])),eachProp$2(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$2.test(Ht)){if(delete Tt[Ht],is$2.und(Ut))return;const Kt=pxTransforms$2.test(Ht)?"px":degTransforms$2.test(Ht)?"deg":"";Dt.push(toArray$2(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$2(er,Kt)})`,isValueIdentity$2(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$2(Jt,Kt)).join(",")})`,isValueIdentity$2(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$2(Dt,Ft)),super(Tt)}},FluidTransform$2=class extends FluidValue$2{constructor(dt,kt){super(),this.inputs=dt,this.transforms=kt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",kt=!0;return each$2(this.inputs,($t,Tt)=>{const Dt=getFluidValue$2($t[0]),[Ft,Ut]=this.transforms[Tt](is$2.arr(Dt)?Dt:$t.map(getFluidValue$2));dt+=" "+Ft,kt=kt&&Ut}),kt?"none":dt}observerAdded(dt){dt==1&&each$2(this.inputs,kt=>each$2(kt,$t=>hasFluidValue$2($t)&&addFluidObserver$2($t,this)))}observerRemoved(dt){dt==0&&each$2(this.inputs,kt=>each$2(kt,$t=>hasFluidValue$2($t)&&removeFluidObserver$2($t,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$2(this,dt)}},primitives$2=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$2.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$2,colors:colors2$2});var host$2=createHost$2(primitives$2,{applyAnimatedValues:applyAnimatedValues$2,createAnimatedStyle:et=>new AnimatedStyle$2(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...kt})=>kt}),animated$2=host$2.animated;function noop$3(){}var noop_1=noop$3,Set$1=_Set,noop$2=noop_1,setToArray$1=_setToArray,INFINITY=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY?function(et){return new Set$1(et)}:noop$2,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(et,dt,kt){var $t=-1,Tt=arrayIncludes,Dt=et.length,Ft=!0,Ut=[],Ht=Ut;if(kt)Ft=!1,Tt=arrayIncludesWith;else if(Dt>=LARGE_ARRAY_SIZE){var Kt=dt?null:createSet(et);if(Kt)return setToArray(Kt);Ft=!1,Tt=cacheHas,Ht=new SetCache}else Ht=dt?[]:Ut;e:for(;++$t<Dt;){var Yt=et[$t],Jt=dt?dt(Yt):Yt;if(Yt=kt||Yt!==0?Yt:0,Ft&&Jt===Jt){for(var Zt=Ht.length;Zt--;)if(Ht[Zt]===Jt)continue e;dt&&Ht.push(Jt),Ut.push(Yt)}else Tt(Ht,Jt,kt)||(Ht!==Ut&&Ht.push(Jt),Ut.push(Yt))}return Ut}var _baseUniq=baseUniq$1,Stack$1=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(et,dt,kt,$t){var Tt=kt.length,Dt=Tt,Ft=!$t;if(et==null)return!Dt;for(et=Object(et);Tt--;){var Ut=kt[Tt];if(Ft&&Ut[2]?Ut[1]!==et[Ut[0]]:!(Ut[0]in et))return!1}for(;++Tt<Dt;){Ut=kt[Tt];var Ht=Ut[0],Kt=et[Ht],Yt=Ut[1];if(Ft&&Ut[2]){if(Kt===void 0&&!(Ht in et))return!1}else{var Jt=new Stack$1;if($t)var Zt=$t(Kt,Yt,Ht,et,dt,Jt);if(!(Zt===void 0?baseIsEqual$1(Yt,Kt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,$t,Jt):Zt))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$1=isObject_1;function isStrictComparable$2(et){return et===et&&!isObject$1(et)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$3=keys_1;function getMatchData$1(et){for(var dt=keys$3(et),kt=dt.length;kt--;){var $t=dt[kt],Tt=et[$t];dt[kt]=[$t,Tt,isStrictComparable$1(Tt)]}return dt}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(et,dt){return function(kt){return kt==null?!1:kt[et]===dt&&(dt!==void 0||et in Object(kt))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(et){var dt=getMatchData(et);return dt.length==1&&dt[0][2]?matchesStrictComparable$1(dt[0][0],dt[0][1]):function(kt){return kt===et||baseIsMatch(kt,et,dt)}}var _baseMatches=baseMatches$1,baseIsEqual=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$2=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(et,dt){return isKey$1(et)&&isStrictComparable(dt)?matchesStrictComparable(toKey$2(et),dt):function(kt){var $t=get(kt,et);return $t===void 0&&$t===dt?hasIn(kt,et):baseIsEqual(dt,$t,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function baseProperty$1(et){return function(dt){return dt==null?void 0:dt[et]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(et){return function(dt){return baseGet$2(dt,et)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey$1=_toKey;function property$1(et){return isKey(et)?baseProperty(toKey$1(et)):basePropertyDeep(et)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$1=identity_1,isArray$3=isArray_1,property=property_1;function baseIteratee$3(et){return typeof et=="function"?et:et==null?identity$1:typeof et=="object"?isArray$3(et)?baseMatchesProperty(et[0],et[1]):baseMatches(et):property(et)}var _baseIteratee=baseIteratee$3,baseIteratee$2=_baseIteratee,baseUniq=_baseUniq;function uniqBy(et,dt){return et&&et.length?baseUniq(et,baseIteratee$2(dt)):[]}var uniqBy_1=uniqBy;const J$1=getDefaultExportFromCjs(uniqBy_1);var baseFor=_baseFor,keys$2=keys_1;function baseForOwn$1(et,dt){return et&&baseFor(et,dt,keys$2)}var _baseForOwn=baseForOwn$1,isArrayLike$1=isArrayLike_1;function createBaseEach$1(et,dt){return function(kt,$t){if(kt==null)return kt;if(!isArrayLike$1(kt))return et(kt,$t);for(var Tt=kt.length,Dt=dt?Tt:-1,Ft=Object(kt);(dt?Dt--:++Dt<Tt)&&$t(Ft[Dt],Dt,Ft)!==!1;);return kt}}var _createBaseEach=createBaseEach$1,baseForOwn=_baseForOwn,createBaseEach=_createBaseEach,baseEach$2=createBaseEach(baseForOwn),_baseEach=baseEach$2,baseEach$1=_baseEach,isArrayLike=isArrayLike_1;function baseMap$1(et,dt){var kt=-1,$t=isArrayLike(et)?Array(et.length):[];return baseEach$1(et,function(Tt,Dt,Ft){$t[++kt]=dt(Tt,Dt,Ft)}),$t}var _baseMap=baseMap$1;function baseSortBy$1(et,dt){var kt=et.length;for(et.sort(dt);kt--;)et[kt]=et[kt].value;return et}var _baseSortBy=baseSortBy$1,isSymbol=isSymbol_1;function compareAscending$1(et,dt){if(et!==dt){var kt=et!==void 0,$t=et===null,Tt=et===et,Dt=isSymbol(et),Ft=dt!==void 0,Ut=dt===null,Ht=dt===dt,Kt=isSymbol(dt);if(!Ut&&!Kt&&!Dt&&et>dt||Dt&&Ft&&Ht&&!Ut&&!Kt||$t&&Ft&&Ht||!kt&&Ht||!Tt)return 1;if(!$t&&!Dt&&!Kt&&et<dt||Kt&&kt&&Tt&&!$t&&!Dt||Ut&&kt&&Tt||!Ft&&Tt||!Ht)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(et,dt,kt){for(var $t=-1,Tt=et.criteria,Dt=dt.criteria,Ft=Tt.length,Ut=kt.length;++$t<Ft;){var Ht=compareAscending(Tt[$t],Dt[$t]);if(Ht){if($t>=Ut)return Ht;var Kt=kt[$t];return Ht*(Kt=="desc"?-1:1)}}return et.index-dt.index}var _compareMultiple=compareMultiple$1,arrayMap$1=_arrayMap,baseGet$1=_baseGet,baseIteratee$1=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary$2=_baseUnary,compareMultiple=_compareMultiple,identity=identity_1,isArray$2=isArray_1;function baseOrderBy$1(et,dt,kt){dt.length?dt=arrayMap$1(dt,function(Dt){return isArray$2(Dt)?function(Ft){return baseGet$1(Ft,Dt.length===1?Dt[0]:Dt)}:Dt}):dt=[identity];var $t=-1;dt=arrayMap$1(dt,baseUnary$2(baseIteratee$1));var Tt=baseMap(et,function(Dt,Ft,Ut){var Ht=arrayMap$1(dt,function(Kt){return Kt(Dt)});return{criteria:Ht,index:++$t,value:Dt}});return baseSortBy(Tt,function(Dt,Ft){return compareMultiple(Dt,Ft,kt)})}var _baseOrderBy=baseOrderBy$1,baseFlatten=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest=_baseRest,isIterateeCall=_isIterateeCall;baseRest(function(et,dt){if(et==null)return[];var kt=dt.length;return kt>1&&isIterateeCall(et,dt[0],dt[1])?dt=[]:kt>2&&isIterateeCall(dt[0],dt[1],dt[2])&&(dt=[dt[0]]),baseOrderBy(et,baseFlatten(dt,1),[])});var nodeUtil$2=_nodeUtilExports;nodeUtil$2&&nodeUtil$2.isDate;var L$2=[function(et){return et.setMilliseconds(0)},function(et){return et.setSeconds(0)},function(et){return et.setMinutes(0)},function(et){return et.setHours(0)},function(et){return et.setDate(1)},function(et){return et.setMonth(0)}],Q$1={millisecond:[],second:L$2.slice(0,1),minute:L$2.slice(0,2),hour:L$2.slice(0,3),day:L$2.slice(0,4),month:L$2.slice(0,5),year:L$2.slice(0,6)},W$2=function(et){return function(dt){return Q$1[et].forEach(function(kt){kt(dt)}),dt}},X$1=function(et){var dt=et.format,kt=dt===void 0?"native":dt,$t=et.precision,Tt=$t===void 0?"millisecond":$t,Dt=et.useUTC,Ft=Dt===void 0||Dt,Ut=W$2(Tt);return function(Ht){if(Ht===void 0)return Ht;if(kt==="native"||Ht instanceof Date)return Ut(Ht);var Kt=Ft?utcParse(kt):timeParse(kt);return Ut(Kt(Ht))}},Y$1={type:"linear",min:0,max:"auto",stacked:!1,reverse:!1,clamp:!1,nice:!0,round:!1},Z$1=function(et,dt,kt,$t){var Tt,Dt,Ft,Ut,Ht=et.min,Kt=Ht===void 0?Y$1.min:Ht,Yt=et.max,Jt=Yt===void 0?Y$1.max:Yt,Zt=et.stacked,er=Zt===void 0?Y$1.stacked:Zt,rr=et.reverse,sr=rr===void 0?Y$1.reverse:rr,nr=et.clamp,ir=nr===void 0?Y$1.clamp:nr,lr=et.nice,or=lr===void 0?Y$1.nice:lr,cr=et.round,dr=cr===void 0?Y$1.round:cr;Kt==="auto"?Tt=er===!0?(Dt=dt.minStacked)!=null?Dt:0:dt.min:Tt=Kt,Jt==="auto"?Ft=er===!0?(Ut=dt.maxStacked)!=null?Ut:0:dt.max:Ft=Jt;var ur=linear().range($t==="x"?[0,kt]:[kt,0]).interpolate(dr?v$2:p$2).domain(sr?[Ft,Tt]:[Tt,Ft]).clamp(ir);return or===!0?ur.nice():typeof or=="number"&&ur.nice(or),_(ur,er)},_=function(et,dt){dt===void 0&&(dt=!1);var kt=et;return kt.type="linear",kt.stacked=dt,kt},nn=function(et,dt,kt){var $t=point().range([0,kt]).domain(dt.all);return $t.type="point",$t},en={type:"band",round:!1},rn=function(et,dt,kt,$t){var Tt=et.round,Dt=Tt===void 0?en.round:Tt,Ft=band().range($t==="x"?[0,kt]:[kt,0]).domain(dt.all).round(Dt);return an(Ft)},an=function(et){var dt=et;return dt.type="band",dt},on={type:"time",format:"native",precision:"millisecond",min:"auto",max:"auto",useUTC:!0,nice:!1},un=function(et,dt,kt){var $t,Tt,Dt=et.format,Ft=Dt===void 0?on.format:Dt,Ut=et.precision,Ht=Ut===void 0?on.precision:Ut,Kt=et.min,Yt=Kt===void 0?on.min:Kt,Jt=et.max,Zt=Jt===void 0?on.max:Jt,er=et.useUTC,rr=er===void 0?on.useUTC:er,sr=et.nice,nr=sr===void 0?on.nice:sr,ir=X$1({format:Ft,precision:Ht,useUTC:rr});$t=Yt==="auto"?ir(dt.min):Ft!=="native"?ir(Yt):Yt,Tt=Zt==="auto"?ir(dt.max):Ft!=="native"?ir(Zt):Zt;var lr=rr?utcTime():time();lr.range([0,kt]),$t&&Tt&&lr.domain([$t,Tt]),nr===!0?lr.nice():typeof nr!="object"&&typeof nr!="number"||lr.nice(nr);var or=lr;return or.type="time",or.useUTC=rr,or},cn={type:"log",base:10,min:"auto",max:"auto",round:!1,reverse:!1,nice:!0},sn=function(et,dt,kt,$t){var Tt,Dt=et.base,Ft=Dt===void 0?cn.base:Dt,Ut=et.min,Ht=Ut===void 0?cn.min:Ut,Kt=et.max,Yt=Kt===void 0?cn.max:Kt,Jt=et.round,Zt=Jt===void 0?cn.round:Jt,er=et.reverse,rr=er===void 0?cn.reverse:er,sr=et.nice,nr=sr===void 0?cn.nice:sr;if(dt.all.some(function(pr){return pr===0}))throw new Error("a log scale domain must not include or cross zero");var ir,lr,or=!1;if(dt.all.filter(function(pr){return pr!=null}).forEach(function(pr){or||(Tt===void 0?Tt=Math.sign(pr):Math.sign(pr)!==Tt&&(or=!0))}),or)throw new Error("a log scale domain must be strictly-positive or strictly-negative");ir=Ht==="auto"?dt.min:Ht,lr=Yt==="auto"?dt.max:Yt;var cr=log().base(Ft),dr=$t==="x"?[0,kt]:[kt,0];Zt===!0?cr.rangeRound(dr):cr.range(dr),rr===!0?cr.domain([lr,ir]):cr.domain([ir,lr]),nr===!0?cr.nice():typeof nr=="number"&&cr.nice(nr);var ur=cr;return ur.type="log",ur},dn={type:"symlog",constant:1,min:"auto",max:"auto",round:!1,reverse:!1,nice:!0},mn=function(et,dt,kt,$t){var Tt,Dt,Ft=et.constant,Ut=Ft===void 0?dn.constant:Ft,Ht=et.min,Kt=Ht===void 0?dn.min:Ht,Yt=et.max,Jt=Yt===void 0?dn.max:Yt,Zt=et.round,er=Zt===void 0?dn.round:Zt,rr=et.reverse,sr=rr===void 0?dn.reverse:rr,nr=et.nice,ir=nr===void 0?dn.nice:nr;Tt=Kt==="auto"?dt.min:Kt,Dt=Jt==="auto"?dt.max:Jt;var lr=symlog().constant(Ut),or=$t==="x"?[0,kt]:[kt,0];er===!0?lr.rangeRound(or):lr.range(or),sr===!0?lr.domain([Dt,Tt]):lr.domain([Tt,Dt]),ir===!0?lr.nice():typeof ir=="number"&&lr.nice(ir);var cr=lr;return cr.type="symlog",cr};function pn(et,dt,kt,$t){switch(et.type){case"linear":return Z$1(et,dt,kt,$t);case"point":return nn(0,dt,kt);case"band":return rn(et,dt,kt,$t);case"time":return un(et,dt,kt);case"log":return sn(et,dt,kt,$t);case"symlog":return mn(et,dt,kt,$t);default:throw new Error("invalid scale spec")}}var Mn=function(et){var dt=et.bandwidth();if(dt===0)return et;var kt=dt/2;return et.round()&&(kt=Math.round(kt)),function($t){var Tt;return((Tt=et($t))!=null?Tt:0)+kt}},wn={millisecond:[g$1,g$1],second:[k$3,k$3],minute:[T$2,b$3],hour:[M$1,w$3],day:[newInterval(function(et){return et.setHours(0,0,0,0)},function(et,dt){return et.setDate(et.getDate()+dt)},function(et,dt){return(dt.getTime()-et.getTime())/864e5},function(et){return Math.floor(et.getTime()/864e5)}),newInterval(function(et){return et.setUTCHours(0,0,0,0)},function(et,dt){return et.setUTCDate(et.getUTCDate()+dt)},function(et,dt){return(dt.getTime()-et.getTime())/864e5},function(et){return Math.floor(et.getTime()/864e5)})],week:[sunday,utcSunday],sunday:[sunday,utcSunday],monday:[monday,utcMonday],tuesday:[tuesday,utcTuesday],wednesday:[wednesday,utcWednesday],thursday:[thursday,utcThursday],friday:[friday,utcFriday],saturday:[saturday,utcSaturday],month:[I$1,P$1],year:[$$1,G]},En=Object.keys(wn),Sn=new RegExp("^every\\s*(\\d+)?\\s*("+En.join("|")+")s?$","i"),Cn=function(et,dt){if(Array.isArray(dt))return dt;if(typeof dt=="string"&&"useUTC"in et){var kt=dt.match(Sn);if(kt){var $t=kt[1],Tt=kt[2],Dt=wn[Tt][et.useUTC?1:0];if(Tt==="day"){var Ft,Ut,Ht=et.domain(),Kt=Ht[0],Yt=Ht[1],Jt=new Date(Yt);return Jt.setDate(Jt.getDate()+1),(Ft=(Ut=Dt.every(Number($t??1)))==null?void 0:Ut.range(Kt,Jt))!=null?Ft:[]}if($t===void 0)return et.ticks(Dt);var Zt=Dt.every(Number($t));if(Zt)return et.ticks(Zt)}throw new Error("Invalid tickValues: "+dt)}if("ticks"in et){if(dt===void 0)return et.ticks();if(typeof(er=dt)=="number"&&isFinite(er)&&Math.floor(er)===er)return et.ticks(dt)}var er;return et.domain()};function A$1(){return A$1=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},A$1.apply(null,arguments)}var T$1=function(et){var dt,kt=et.axis,$t=et.scale,Tt=et.ticksPosition,Dt=et.tickValues,Ft=et.tickSize,Ut=et.tickPadding,Ht=et.tickRotation,Kt=et.truncateTickAt,Yt=et.engine,Jt=Yt===void 0?"svg":Yt,Zt=Cn($t,Dt),er=gt[Jt],rr="bandwidth"in $t?Mn($t):$t,sr={lineX:0,lineY:0},nr={textX:0,textY:0},ir=typeof document=="object"&&document.dir==="rtl",lr=er.align.center,or=er.baseline.center;return kt==="x"?(dt=function(cr){var dr;return{x:(dr=rr(cr))!=null?dr:0,y:0}},sr.lineY=Ft*(Tt==="after"?1:-1),nr.textY=(Ft+Ut)*(Tt==="after"?1:-1),or=Tt==="after"?er.baseline.top:er.baseline.bottom,Ht===0?lr=er.align.center:Tt==="after"&&Ht<0||Tt==="before"&&Ht>0?(lr=er.align[ir?"left":"right"],or=er.baseline.center):(Tt==="after"&&Ht>0||Tt==="before"&&Ht<0)&&(lr=er.align[ir?"right":"left"],or=er.baseline.center)):(dt=function(cr){var dr;return{x:0,y:(dr=rr(cr))!=null?dr:0}},sr.lineX=Ft*(Tt==="after"?1:-1),nr.textX=(Ft+Ut)*(Tt==="after"?1:-1),lr=Tt==="after"?er.align.left:er.align.right),{ticks:Zt.map(function(cr){var dr=typeof cr=="string"?function(ur){var pr=String(ur).length;return Kt&&Kt>0&&pr>Kt?""+String(ur).slice(0,Kt).concat("..."):""+ur}(cr):cr;return A$1({key:cr instanceof Date?""+cr.valueOf():""+cr,value:dr},dt(cr),sr,nr)}),textAlign:lr,textBaseline:or}},w$1=function(et,dt){if(et===void 0||typeof et=="function")return et;if(dt.type==="time"){var kt=timeFormat(et);return function($t){return kt($t instanceof Date?$t:new Date($t))}}return format(et)},O$2=function(et){var dt,kt=et.width,$t=et.height,Tt=et.scale,Dt=et.axis,Ft=et.values,Ut=(dt=Ft,(Array.isArray(dt)?Ft:void 0)||Cn(Tt,Ft)),Ht="bandwidth"in Tt?Mn(Tt):Tt,Kt=Dt==="x"?Ut.map(function(Yt){var Jt,Zt;return{key:Yt instanceof Date?""+Yt.valueOf():""+Yt,x1:(Jt=Ht(Yt))!=null?Jt:0,x2:(Zt=Ht(Yt))!=null?Zt:0,y1:0,y2:$t}}):Ut.map(function(Yt){var Jt,Zt;return{key:Yt instanceof Date?""+Yt.valueOf():""+Yt,x1:0,x2:kt,y1:(Jt=Ht(Yt))!=null?Jt:0,y2:(Zt=Ht(Yt))!=null?Zt:0}});return Kt},X=reactExports.memo(function(et){var dt,kt=et.value,$t=et.format,Tt=et.lineX,Dt=et.lineY,Ft=et.onClick,Ut=et.textBaseline,Ht=et.textAnchor,Kt=et.theme,Yt=et.animatedProps,Jt=(dt=$t==null?void 0:$t(kt))!=null?dt:kt,Zt=reactExports.useMemo(function(){var er={opacity:Yt.opacity};return Ft?{style:A$1({},er,{cursor:"pointer"}),onClick:function(rr){return Ft(rr,Jt)}}:{style:er}},[Yt.opacity,Ft,Jt]);return jsxRuntimeExports.jsxs(animated$2.g,A$1({transform:Yt.transform},Zt,{children:[jsxRuntimeExports.jsx("line",{x1:0,x2:Tt,y1:0,y2:Dt,style:Kt.line}),jsxRuntimeExports.jsx(b$2,{dominantBaseline:Ut,textAnchor:Ht,transform:Yt.textTransform,style:Kt.text,children:""+Jt})]}))}),Y={tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:0},B$1=function(et){var dt=et.axis,kt=et.scale,$t=et.x,Tt=$t===void 0?0:$t,Dt=et.y,Ft=Dt===void 0?0:Dt,Ut=et.length,Ht=et.ticksPosition,Kt=et.tickValues,Yt=et.tickSize,Jt=Yt===void 0?Y.tickSize:Yt,Zt=et.tickPadding,er=Zt===void 0?Y.tickPadding:Zt,rr=et.tickRotation,sr=rr===void 0?Y.tickRotation:rr,nr=et.format,ir=et.renderTick,lr=ir===void 0?X:ir,or=et.truncateTickAt,cr=et.legend,dr=et.legendPosition,ur=dr===void 0?Y.legendPosition:dr,pr=et.legendOffset,mr=pr===void 0?Y.legendOffset:pr,jr=et.style,Rr=et.onClick,br=et.ariaHidden,_r=M$3(),Mr=w$5(_r.axis,jr),Pr=reactExports.useMemo(function(){return w$1(nr,kt)},[nr,kt]),Or=T$1({axis:dt,scale:kt,ticksPosition:Ht,tickValues:Kt,tickSize:Jt,tickPadding:er,tickRotation:sr,truncateTickAt:or}),kr=Or.ticks,Tr=Or.textAlign,xr=Or.textBaseline,wr=null;if(cr!==void 0){var zr,Hr=0,Yr=0,rs=0;dt==="y"?(rs=-90,Hr=mr,ur==="start"?(zr="start",Yr=Ut):ur==="middle"?(zr="middle",Yr=Ut/2):ur==="end"&&(zr="end")):(Yr=mr,ur==="start"?zr="start":ur==="middle"?(zr="middle",Hr=Ut/2):ur==="end"&&(zr="end",Hr=Ut)),wr=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(b$2,{transform:"translate("+Hr+", "+Yr+") rotate("+rs+")",textAnchor:zr,style:A$1({},Mr.legend.text,{dominantBaseline:"central"}),children:cr})})}var as=Dr(),es=as.animate,Xr=as.config,Wr=useSpring$1({transform:"translate("+Tt+","+Ft+")",lineX2:dt==="x"?Ut:0,lineY2:dt==="x"?0:Ut,config:Xr,immediate:!es}),cs=reactExports.useCallback(function(fs){return{opacity:1,transform:"translate("+fs.x+","+fs.y+")",textTransform:"translate("+fs.textX+","+fs.textY+") rotate("+sr+")"}},[sr]),ns=reactExports.useCallback(function(fs){return{opacity:0,transform:"translate("+fs.x+","+fs.y+")",textTransform:"translate("+fs.textX+","+fs.textY+") rotate("+sr+")"}},[sr]),us=useTransition$1(kr,{keys:function(fs){return fs.key},initial:cs,from:ns,enter:cs,update:cs,leave:{opacity:0},config:Xr,immediate:!es});return jsxRuntimeExports.jsxs(animated$2.g,{transform:Wr.transform,"aria-hidden":br,children:[us(function(fs,ss,ps,ls){return reactExports.createElement(lr,A$1({tickIndex:ls,format:Pr,rotate:sr,textBaseline:xr,textAnchor:Tr,truncateTickAt:or,animatedProps:fs,theme:Mr.ticks},ss,Rr?{onClick:Rr}:{}))}),jsxRuntimeExports.jsx(animated$2.line,{style:Mr.domain.line,x1:0,x2:Wr.lineX2,y1:0,y2:Wr.lineY2}),wr]})},z$2=reactExports.memo(B$1),R$1=["top","right","bottom","left"],V=reactExports.memo(function(et){var dt=et.xScale,kt=et.yScale,$t=et.width,Tt=et.height,Dt={top:et.top,right:et.right,bottom:et.bottom,left:et.left};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:R$1.map(function(Ft){var Ut=Dt[Ft];if(!Ut)return null;var Ht=Ft==="top"||Ft==="bottom";return jsxRuntimeExports.jsx(z$2,A$1({},Ut,{axis:Ht?"x":"y",x:Ft==="right"?$t:0,y:Ft==="bottom"?Tt:0,scale:Ht?dt:kt,length:Ht?$t:Tt,ticksPosition:Ft==="top"||Ft==="left"?"before":"after",truncateTickAt:Ut.truncateTickAt}),Ft)})})}),C$2=reactExports.memo(function(et){var dt=et.animatedProps,kt=M$3();return jsxRuntimeExports.jsx(animated$2.line,A$1({},dt,kt.grid.line))}),D$1=reactExports.memo(function(et){var dt=et.lines,kt=Dr(),$t=kt.animate,Tt=kt.config,Dt=useTransition$1(dt,{keys:function(Ft){return Ft.key},initial:function(Ft){return{opacity:1,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},from:function(Ft){return{opacity:0,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},enter:function(Ft){return{opacity:1,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},update:function(Ft){return{opacity:1,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},leave:{opacity:0},config:Tt,immediate:!$t});return jsxRuntimeExports.jsx("g",{children:Dt(function(Ft,Ut){return reactExports.createElement(C$2,A$1({},Ut,{key:Ut.key,animatedProps:Ft}))})})}),j$2=reactExports.memo(function(et){var dt=et.width,kt=et.height,$t=et.xScale,Tt=et.yScale,Dt=et.xValues,Ft=et.yValues,Ut=reactExports.useMemo(function(){return!!$t&&O$2({width:dt,height:kt,scale:$t,axis:"x",values:Dt})},[$t,Dt,dt,kt]),Ht=reactExports.useMemo(function(){return!!Tt&&O$2({width:dt,height:kt,scale:Tt,axis:"y",values:Ft})},[kt,dt,Tt,Ft]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ut&&jsxRuntimeExports.jsx(D$1,{lines:Ut}),Ht&&jsxRuntimeExports.jsx(D$1,{lines:Ht})]})}),E$2=function(et,dt){var kt,$t,Tt=dt.axis,Dt=dt.scale,Ft=dt.x,Ut=Ft===void 0?0:Ft,Ht=dt.y,Kt=Ht===void 0?0:Ht,Yt=dt.length,Jt=dt.ticksPosition,Zt=dt.tickValues,er=dt.tickSize,rr=er===void 0?Y.tickSize:er,sr=dt.tickPadding,nr=sr===void 0?Y.tickPadding:sr,ir=dt.tickRotation,lr=ir===void 0?Y.tickRotation:ir,or=dt.format,cr=dt.legend,dr=dt.legendPosition,ur=dr===void 0?Y.legendPosition:dr,pr=dt.legendOffset,mr=pr===void 0?Y.legendOffset:pr,jr=dt.theme,Rr=dt.style,br=T$1({axis:Tt,scale:Dt,ticksPosition:Jt,tickValues:Zt,tickSize:rr,tickPadding:nr,tickRotation:lr,engine:"canvas"}),_r=br.ticks,Mr=br.textAlign,Pr=br.textBaseline;et.save(),et.translate(Ut,Kt);var Or=R$2(jr.axis,Rr);et.textAlign=Mr,et.textBaseline=Pr,a$1(et,Or.ticks.text);var kr=(kt=Or.domain.line.strokeWidth)!=null?kt:0;typeof kr!="string"&&kr>0&&(et.lineWidth=kr,et.lineCap="square",Or.domain.line.stroke&&(et.strokeStyle=Or.domain.line.stroke),et.beginPath(),et.moveTo(0,0),et.lineTo(Tt==="x"?Yt:0,Tt==="x"?0:Yt),et.stroke());var Tr=typeof or=="function"?or:function(as){return""+as},xr=($t=Or.ticks.line.strokeWidth)!=null?$t:0,wr=typeof xr!="string"&&xr>0;if(_r.forEach(function(as){wr&&(et.lineWidth=xr,et.lineCap="square",Or.ticks.line.stroke&&(et.strokeStyle=Or.ticks.line.stroke),et.beginPath(),et.moveTo(as.x,as.y),et.lineTo(as.x+as.lineX,as.y+as.lineY),et.stroke());var es=Tr(as.value);et.save(),et.translate(as.x+as.textX,as.y+as.textY),et.rotate(ut(lr)),d(et,Or.ticks.text,""+es),et.fillText(""+es,0,0),et.restore()}),cr!==void 0){var zr=0,Hr=0,Yr=0,rs="center";Tt==="y"?(Yr=-90,zr=mr,ur==="start"?(rs="start",Hr=Yt):ur==="middle"?(rs="center",Hr=Yt/2):ur==="end"&&(rs="end")):(Hr=mr,ur==="start"?rs="start":ur==="middle"?(rs="center",zr=Yt/2):ur==="end"&&(rs="end",zr=Yt)),et.translate(zr,Hr),et.rotate(ut(Yr)),a$1(et,Or.legend.text),Or.legend.text.fill&&(et.fillStyle=Or.legend.text.fill),et.textAlign=rs,et.textBaseline="middle",d(et,Or.legend.text,cr)}et.restore()},W$1=function(et,dt){var kt=dt.xScale,$t=dt.yScale,Tt=dt.width,Dt=dt.height,Ft=dt.top,Ut=dt.right,Ht=dt.bottom,Kt=dt.left,Yt=dt.theme,Jt={top:Ft,right:Ut,bottom:Ht,left:Kt};R$1.forEach(function(Zt){var er=Jt[Zt];if(!er)return null;var rr=Zt==="top"||Zt==="bottom",sr=Zt==="top"||Zt==="left"?"before":"after",nr=rr?kt:$t,ir=w$1(er.format,nr);E$2(et,A$1({},er,{axis:rr?"x":"y",x:Zt==="right"?Tt:0,y:Zt==="bottom"?Dt:0,scale:nr,format:ir,length:rr?Tt:Dt,ticksPosition:sr,theme:Yt}))})},q$1=function(et,dt){var kt=dt.width,$t=dt.height,Tt=dt.scale,Dt=dt.axis,Ft=dt.values;O$2({width:kt,height:$t,scale:Tt,axis:Dt,values:Ft}).forEach(function(Ut){et.beginPath(),et.moveTo(Ut.x1,Ut.y1),et.lineTo(Ut.x2,Ut.y2),et.stroke()})},updateQueue$1=makeQueue$1(),raf$1=et=>schedule$1(et,updateQueue$1),writeQueue$1=makeQueue$1();raf$1.write=et=>schedule$1(et,writeQueue$1);var onStartQueue$1=makeQueue$1();raf$1.onStart=et=>schedule$1(et,onStartQueue$1);var onFrameQueue$1=makeQueue$1();raf$1.onFrame=et=>schedule$1(et,onFrameQueue$1);var onFinishQueue$1=makeQueue$1();raf$1.onFinish=et=>schedule$1(et,onFinishQueue$1);var timeouts$1=[];raf$1.setTimeout=(et,dt)=>{const kt=raf$1.now()+dt,$t=()=>{const Dt=timeouts$1.findIndex(Ft=>Ft.cancel==$t);~Dt&&timeouts$1.splice(Dt,1),pendingCount$1-=~Dt?1:0},Tt={time:kt,handler:et,cancel:$t};return timeouts$1.splice(findTimeout$1(kt),0,Tt),pendingCount$1+=1,start$1(),Tt};var findTimeout$1=et=>~(~timeouts$1.findIndex(dt=>dt.time>et)||~timeouts$1.length);raf$1.cancel=et=>{onStartQueue$1.delete(et),onFrameQueue$1.delete(et),onFinishQueue$1.delete(et),updateQueue$1.delete(et),writeQueue$1.delete(et)};raf$1.sync=et=>{sync$1=!0,raf$1.batchedUpdates(et),sync$1=!1};raf$1.throttle=et=>{let dt;function kt(){try{et(...dt)}finally{dt=null}}function $t(...Tt){dt=Tt,raf$1.onStart(kt)}return $t.handler=et,$t.cancel=()=>{onStartQueue$1.delete(kt),dt=null},$t};var nativeRaf$1=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$1.use=et=>nativeRaf$1=et;raf$1.now=typeof performance<"u"?()=>performance.now():Date.now;raf$1.batchedUpdates=et=>et();raf$1.catch=console.error;raf$1.frameLoop="always";raf$1.advance=()=>{raf$1.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$1()};var ts$1=-1,pendingCount$1=0,sync$1=!1;function schedule$1(et,dt){sync$1?(dt.delete(et),et(0)):(dt.add(et),start$1())}function start$1(){ts$1<0&&(ts$1=0,raf$1.frameLoop!=="demand"&&nativeRaf$1(loop$1))}function stop$1(){ts$1=-1}function loop$1(){~ts$1&&(nativeRaf$1(loop$1),raf$1.batchedUpdates(update$1))}function update$1(){const et=ts$1;ts$1=raf$1.now();const dt=findTimeout$1(ts$1);if(dt&&(eachSafely$1(timeouts$1.splice(0,dt),kt=>kt.handler()),pendingCount$1-=dt),!pendingCount$1){stop$1();return}onStartQueue$1.flush(),updateQueue$1.flush(et?Math.min(64,ts$1-et):16.667),onFrameQueue$1.flush(),writeQueue$1.flush(),onFinishQueue$1.flush()}function makeQueue$1(){let et=new Set,dt=et;return{add(kt){pendingCount$1+=dt==et&&!et.has(kt)?1:0,et.add(kt)},delete(kt){return pendingCount$1-=dt==et&&et.has(kt)?1:0,et.delete(kt)},flush(kt){dt.size&&(et=new Set,pendingCount$1-=dt.size,eachSafely$1(dt,$t=>$t(kt)&&et.add($t)),pendingCount$1+=et.size,dt=et)}}}function eachSafely$1(et,dt){et.forEach(kt=>{try{dt(kt)}catch($t){raf$1.catch($t)}})}var __defProp$1=Object.defineProperty,__export$1=(et,dt)=>{for(var kt in dt)__defProp$1(et,kt,{get:dt[kt],enumerable:!0})},globals_exports$1={};__export$1(globals_exports$1,{assign:()=>assign$1,colors:()=>colors$1,createStringInterpolator:()=>createStringInterpolator$1,skipAnimation:()=>skipAnimation$1,to:()=>to$2,willAdvance:()=>willAdvance$1});function noop$1(){}var defineHidden$1=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),is$1={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$1(et,dt){if(is$1.arr(et)){if(!is$1.arr(dt)||et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}return et===dt}var each$1=(et,dt)=>et.forEach(dt);function eachProp$1(et,dt,kt){if(is$1.arr(et)){for(let $t=0;$t<et.length;$t++)dt.call(kt,et[$t],`${$t}`);return}for(const $t in et)et.hasOwnProperty($t)&&dt.call(kt,et[$t],$t)}var toArray$1=et=>is$1.und(et)?[]:is$1.arr(et)?et:[et];function flush$1(et,dt){if(et.size){const kt=Array.from(et);et.clear(),each$1(kt,dt)}}var flushCalls$1=(et,...dt)=>flush$1(et,kt=>kt(...dt)),isSSR$1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$1,to$2,colors$1=null,skipAnimation$1=!1,willAdvance$1=noop$1,assign$1=et=>{et.to&&(to$2=et.to),et.now&&(raf$1.now=et.now),et.colors!==void 0&&(colors$1=et.colors),et.skipAnimation!=null&&(skipAnimation$1=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$1=et.createStringInterpolator),et.requestAnimationFrame&&raf$1.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$1.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$1=et.willAdvance),et.frameLoop&&(raf$1.frameLoop=et.frameLoop)},startQueue$1=new Set,currentFrame$1=[],prevFrame$1=[],priority$1=0,frameLoop$1={get idle(){return!startQueue$1.size&&!currentFrame$1.length},start(et){priority$1>et.priority?(startQueue$1.add(et),raf$1.onStart(flushStartQueue$1)):(startSafely$1(et),raf$1(advance$1))},advance:advance$1,sort(et){if(priority$1)raf$1.onFrame(()=>frameLoop$1.sort(et));else{const dt=currentFrame$1.indexOf(et);~dt&&(currentFrame$1.splice(dt,1),startUnsafely$1(et))}},clear(){currentFrame$1=[],startQueue$1.clear()}};function flushStartQueue$1(){startQueue$1.forEach(startSafely$1),startQueue$1.clear(),raf$1(advance$1)}function startSafely$1(et){currentFrame$1.includes(et)||startUnsafely$1(et)}function startUnsafely$1(et){currentFrame$1.splice(findIndex$1(currentFrame$1,dt=>dt.priority>et.priority),0,et)}function advance$1(et){const dt=prevFrame$1;for(let kt=0;kt<currentFrame$1.length;kt++){const $t=currentFrame$1[kt];priority$1=$t.priority,$t.idle||(willAdvance$1($t),$t.advance(et),$t.idle||dt.push($t))}return priority$1=0,prevFrame$1=currentFrame$1,prevFrame$1.length=0,currentFrame$1=dt,currentFrame$1.length>0}function findIndex$1(et,dt){const kt=et.findIndex(dt);return kt<0?et.length:kt}var clamp$1=(et,dt,kt)=>Math.min(Math.max(kt,et),dt),colors2$1={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$1="[-+]?\\d*\\.?\\d+",PERCENTAGE$1=NUMBER$1+"%";function call$1(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$1=new RegExp("rgb"+call$1(NUMBER$1,NUMBER$1,NUMBER$1)),rgba$1=new RegExp("rgba"+call$1(NUMBER$1,NUMBER$1,NUMBER$1,NUMBER$1)),hsl$1=new RegExp("hsl"+call$1(NUMBER$1,PERCENTAGE$1,PERCENTAGE$1)),hsla$1=new RegExp("hsla"+call$1(NUMBER$1,PERCENTAGE$1,PERCENTAGE$1,NUMBER$1)),hex3$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$1=/^#([0-9a-fA-F]{6})$/,hex8$1=/^#([0-9a-fA-F]{8})$/;function normalizeColor$1(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$1.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$1&&colors$1[et]!==void 0?colors$1[et]:(dt=rgb$1.exec(et))?(parse255$1(dt[1])<<24|parse255$1(dt[2])<<16|parse255$1(dt[3])<<8|255)>>>0:(dt=rgba$1.exec(et))?(parse255$1(dt[1])<<24|parse255$1(dt[2])<<16|parse255$1(dt[3])<<8|parse1$1(dt[4]))>>>0:(dt=hex3$1.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$1.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$1.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$1.exec(et))?(hslToRgb$1(parse360$1(dt[1]),parsePercentage$1(dt[2]),parsePercentage$1(dt[3]))|255)>>>0:(dt=hsla$1.exec(et))?(hslToRgb$1(parse360$1(dt[1]),parsePercentage$1(dt[2]),parsePercentage$1(dt[3]))|parse1$1(dt[4]))>>>0:null}function hue2rgb$1(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb$1(et,dt,kt){const $t=kt<.5?kt*(1+dt):kt+dt-kt*dt,Tt=2*kt-$t,Dt=hue2rgb$1(Tt,$t,et+1/3),Ft=hue2rgb$1(Tt,$t,et),Ut=hue2rgb$1(Tt,$t,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$1(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$1(et){return(parseFloat(et)%360+360)%360/360}function parse1$1(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$1(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$1(et){let dt=normalizeColor$1(et);if(dt===null)return et;dt=dt||0;const kt=(dt&4278190080)>>>24,$t=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${kt}, ${$t}, ${Tt}, ${Dt})`}var createInterpolator$1=(et,dt,kt)=>{if(is$1.fun(et))return et;if(is$1.arr(et))return createInterpolator$1({range:et,output:dt,extrapolate:kt});if(is$1.str(et.output[0]))return createStringInterpolator$1(et);const $t=et,Tt=$t.output,Dt=$t.range||[0,1],Ft=$t.extrapolateLeft||$t.extrapolate||"extend",Ut=$t.extrapolateRight||$t.extrapolate||"extend",Ht=$t.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$1(Kt,Dt);return interpolate$1(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,$t.map)}};function interpolate$1(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>kt){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=kt)}return $t===Tt?$t:dt===kt?et<=dt?$t:Tt:(dt===-1/0?Kt=-Kt:kt===1/0?Kt=Kt-dt:Kt=(Kt-dt)/(kt-dt),Kt=Dt(Kt),$t===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+$t:Kt=Kt*(Tt-$t)+$t,Kt)}function findRange$1(et,dt){for(var kt=1;kt<dt.length-1&&!(dt[kt]>=et);++kt);return kt-1}var steps$1=(et,dt="end")=>kt=>{kt=dt==="end"?Math.min(kt,.999):Math.max(kt,.001);const $t=kt*et,Tt=dt==="end"?Math.floor($t):Math.ceil($t);return clamp$1(0,1,Tt/et)},c1$1=1.70158,c2$1=c1$1*1.525,c3$1=c1$1+1,c4$1=2*Math.PI/3,c5$1=2*Math.PI/4.5,bounceOut$1=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$1={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$1*et*et*et-c1$1*et*et,easeOutBack:et=>1+c3$1*Math.pow(et-1,3)+c1$1*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$1+1)*2*et-c2$1)/2:(Math.pow(2*et-2,2)*((c2$1+1)*(et*2-2)+c2$1)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$1),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$1)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$1))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$1)/2+1,easeInBounce:et=>1-bounceOut$1(1-et),easeOutBounce:bounceOut$1,easeInOutBounce:et=>et<.5?(1-bounceOut$1(1-2*et))/2:(1+bounceOut$1(2*et-1))/2,steps:steps$1},$get$1=Symbol.for("FluidValue.get"),$observers$1=Symbol.for("FluidValue.observers"),hasFluidValue$1=et=>!!(et&&et[$get$1]),getFluidValue$1=et=>et&&et[$get$1]?et[$get$1]():et,getFluidObservers$1=et=>et[$observers$1]||null;function callFluidObserver$1(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$1(et,dt){const kt=et[$observers$1];kt&&kt.forEach($t=>{callFluidObserver$1($t,dt)})}var FluidValue$1=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$1(this,dt)}},setFluidGetter$1=(et,dt)=>setHidden$1(et,$get$1,dt);function addFluidObserver$1(et,dt){if(et[$get$1]){let kt=et[$observers$1];kt||setHidden$1(et,$observers$1,kt=new Set),kt.has(dt)||(kt.add(dt),et.observerAdded&&et.observerAdded(kt.size,dt))}return dt}function removeFluidObserver$1(et,dt){const kt=et[$observers$1];if(kt&&kt.has(dt)){const $t=kt.size-1;$t?kt.delete(dt):et[$observers$1]=null,et.observerRemoved&&et.observerRemoved($t,dt)}}var setHidden$1=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),numberRegex$1=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$1=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$1=new RegExp(`(${numberRegex$1.source})(%|[a-z]+)`,"i"),rgbaRegex$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$1=et=>{const[dt,kt]=parseCSSVariable$1(et);if(!dt||isSSR$1())return et;const $t=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if($t)return $t.trim();if(kt&&kt.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue(kt);return Tt||et}else{if(kt&&cssVariableRegex$1.test(kt))return variableToRgba$1(kt);if(kt)return kt}return et},parseCSSVariable$1=et=>{const dt=cssVariableRegex$1.exec(et);if(!dt)return[,];const[,kt,$t]=dt;return[kt,$t]},namedColorRegex$1,rgbaRound$1=(et,dt,kt,$t,Tt)=>`rgba(${Math.round(dt)}, ${Math.round(kt)}, ${Math.round($t)}, ${Tt})`,createStringInterpolator2$1=et=>{namedColorRegex$1||(namedColorRegex$1=colors$1?new RegExp(`(${Object.keys(colors$1).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$1(Dt).replace(cssVariableRegex$1,variableToRgba$1).replace(colorRegex$1,colorToRgba$1).replace(namedColorRegex$1,colorToRgba$1)),kt=dt.map(Dt=>Dt.match(numberRegex$1).map(Number)),Tt=kt[0].map((Dt,Ft)=>kt.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$1({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$1.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$1.test(Kt)))==null?void 0:Ht.replace(numberRegex$1,""));let Ut=0;return dt[0].replace(numberRegex$1,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$1,rgbaRound$1)}},prefix$1="react-spring: ",once$1=et=>{const dt=et;let kt=!1;if(typeof dt!="function")throw new TypeError(`${prefix$1}once requires a function parameter`);return(...$t)=>{kt||(dt(...$t),kt=!0)}},warnInterpolate$1=once$1(console.warn);function deprecateInterpolate$1(){warnInterpolate$1(`${prefix$1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$1=once$1(console.warn);function deprecateDirectCall$1(){warnDirectCall$1(`${prefix$1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$1(et){return is$1.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$1()&&cssVariableRegex$1.test(et)||et in(colors$1||{}))}var useIsomorphicLayoutEffect$1=isSSR$1()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$1=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$1(){const et=reactExports.useState()[1],dt=useIsMounted$1();return()=>{dt.current&&et(Math.random())}}var useOnce$1=et=>reactExports.useEffect(et,emptyDeps$1),emptyDeps$1=[];function usePrev$1(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$1=Symbol.for("Animated:node"),isAnimated$1=et=>!!et&&et[$node$1]===et,getAnimated$1=et=>et&&et[$node$1],setAnimated$1=(et,dt)=>defineHidden$1(et,$node$1,dt),getPayload$1=et=>et&&et[$node$1]&&et[$node$1].getPayload(),Animated$1=class{constructor(){setAnimated$1(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$1=class eC extends Animated$1{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$1.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new eC(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,kt){return is$1.num(dt)&&(this.lastPosition=dt,kt&&(dt=Math.round(dt/kt)*kt,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$1=class tC extends AnimatedValue$1{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$1({output:[dt,dt]})}static create(dt){return new tC(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$1.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$1({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$1={dependencies:null},AnimatedObject$1=class extends Animated$1{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const kt={};return eachProp$1(this.source,($t,Tt)=>{isAnimated$1($t)?kt[Tt]=$t.getValue(dt):hasFluidValue$1($t)?kt[Tt]=getFluidValue$1($t):dt||(kt[Tt]=$t)}),kt}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$1(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const kt=new Set;return eachProp$1(dt,this._addToPayload,kt),Array.from(kt)}}_addToPayload(dt){TreeContext$1.dependencies&&hasFluidValue$1(dt)&&TreeContext$1.dependencies.add(dt);const kt=getPayload$1(dt);kt&&each$1(kt,$t=>this.add($t))}},AnimatedArray$1=class rC extends AnimatedObject$1{constructor(dt){super(dt)}static create(dt){return new rC(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const kt=this.getPayload();return dt.length==kt.length?kt.map(($t,Tt)=>$t.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$1)),!0)}};function makeAnimated$1(et){return(isAnimatedString$1(et)?AnimatedString$1:AnimatedValue$1).create(et)}function getAnimatedType$1(et){const dt=getAnimated$1(et);return dt?dt.constructor:is$1.arr(et)?AnimatedArray$1:isAnimatedString$1(et)?AnimatedString$1:AnimatedValue$1}var withAnimated$1=(et,dt)=>{const kt=!is$1.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef(($t,Tt)=>{const Dt=reactExports.useRef(null),Ft=kt&&reactExports.useCallback(rr=>{Dt.current=updateRef$1(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$1($t,dt),Kt=useForceUpdate$1(),Yt=()=>{const rr=Dt.current;if(kt&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$1(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$1(()=>(Zt.current=Jt,each$1(Ht,rr=>addFluidObserver$1(rr,Jt)),()=>{Zt.current&&(each$1(Zt.current.deps,rr=>removeFluidObserver$1(rr,Zt.current)),raf$1.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$1(()=>()=>{const rr=Zt.current;each$1(rr.deps,sr=>removeFluidObserver$1(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$1=class{constructor(dt,kt){this.update=dt,this.deps=kt}eventObserved(dt){dt.type=="change"&&raf$1.write(this.update)}};function getAnimatedState$1(et,dt){const kt=new Set;return TreeContext$1.dependencies=kt,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$1(et),TreeContext$1.dependencies=null,[et,kt]}function updateRef$1(et,dt){return et&&(is$1.fun(et)?et(dt):et.current=dt),dt}var cacheKey$1=Symbol.for("AnimatedComponent"),createHost$1=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:kt=Tt=>new AnimatedObject$1(Tt),getComponentProps:$t=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:kt,getComponentProps:$t},Dt=Ft=>{const Ut=getDisplayName$1(Ft)||"Anonymous";return is$1.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$1(Ft,Tt)):Ft=Ft[cacheKey$1]||(Ft[cacheKey$1]=withAnimated$1(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$1(et,(Ft,Ut)=>{is$1.arr(et)&&(Ut=getDisplayName$1(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$1=et=>is$1.str(et)?et:et&&is$1.str(et.displayName)?et.displayName:is$1.fun(et)&&et.name||null;function callProp$1(et,...dt){return is$1.fun(et)?et(...dt):et}var matchProp$1=(et,dt)=>et===!0||!!(dt&&et&&(is$1.fun(et)?et(dt):toArray$1(et).includes(dt))),resolveProp$1=(et,dt)=>is$1.obj(et)?dt&&et[dt]:et,getDefaultProp$1=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$1=et=>et,getDefaultProps$1=(et,dt=noopTransform$1)=>{let kt=DEFAULT_PROPS$1;et.default&&et.default!==!0&&(et=et.default,kt=Object.keys(et));const $t={};for(const Tt of kt){const Dt=dt(et[Tt],Tt);is$1.und(Dt)||($t[Tt]=Dt)}return $t},DEFAULT_PROPS$1=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$1={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$1(et){const dt={};let kt=0;if(eachProp$1(et,($t,Tt)=>{RESERVED_PROPS$1[Tt]||(dt[Tt]=$t,kt++)}),kt)return dt}function inferTo$1(et){const dt=getForwardProps$1(et);if(dt){const kt={to:dt};return eachProp$1(et,($t,Tt)=>Tt in dt||(kt[Tt]=$t)),kt}return{...et}}function computeGoal$1(et){return et=getFluidValue$1(et),is$1.arr(et)?et.map(computeGoal$1):isAnimatedString$1(et)?globals_exports$1.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$1(et){for(const dt in et)return!0;return!1}function isAsyncTo$1(et){return is$1.fun(et)||is$1.arr(et)&&is$1.obj(et[0])}function detachRefs$1(et,dt){var kt;(kt=et.ref)==null||kt.delete(et),dt==null||dt.delete(et)}function replaceRef$1(et,dt){var kt;dt&&et.ref!==dt&&((kt=et.ref)==null||kt.delete(et),dt.add(et),et.ref=dt)}var config$1={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$1={...config$1.default,mass:1,damping:1,easing:easings$1.linear,clamp:!1},AnimationConfig$1=class{constructor(){this.velocity=0,Object.assign(this,defaults$1)}};function mergeConfig$1(et,dt,kt){kt&&(kt={...kt},sanitizeConfig$1(kt,dt),dt={...kt,...dt}),sanitizeConfig$1(et,dt),Object.assign(et,dt);for(const Ft in defaults$1)et[Ft]==null&&(et[Ft]=defaults$1[Ft]);let{frequency:$t,damping:Tt}=et;const{mass:Dt}=et;return is$1.und($t)||($t<.01&&($t=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/$t,2)*Dt,et.friction=4*Math.PI*Tt*Dt/$t),et}function sanitizeConfig$1(et,dt){if(!is$1.und(dt.decay))et.duration=void 0;else{const kt=!is$1.und(dt.tension)||!is$1.und(dt.friction);(kt||!is$1.und(dt.frequency)||!is$1.und(dt.damping)||!is$1.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),kt&&(et.frequency=void 0)}}var emptyArray$1=[],Animation$1=class{constructor(){this.changed=!1,this.values=emptyArray$1,this.toValues=null,this.fromValues=emptyArray$1,this.config=new AnimationConfig$1,this.immediate=!1}};function scheduleProps$1(et,{key:dt,props:kt,defaultProps:$t,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$1(kt.cancel??($t==null?void 0:$t.cancel),dt);if(Yt)er();else{is$1.und(kt.pause)||(Tt.paused=matchProp$1(kt.pause,dt));let rr=$t==null?void 0:$t.pause;rr!==!0&&(rr=Tt.paused||matchProp$1(rr,dt)),Ht=callProp$1(kt.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$1.now()}function Zt(){Ht>0&&!globals_exports$1.skipAnimation?(Tt.delayed=!0,Kt=raf$1.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...kt,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$1=(et,dt)=>dt.length==1?dt[0]:dt.some(kt=>kt.cancelled)?getCancelledResult$1(et.get()):dt.every(kt=>kt.noop)?getNoopResult$1(et.get()):getFinishedResult$1(et.get(),dt.every(kt=>kt.finished)),getNoopResult$1=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$1=(et,dt,kt=!1)=>({value:et,finished:dt,cancelled:kt}),getCancelledResult$1=et=>({value:et,cancelled:!0,finished:!1});function runAsync$1(et,dt,kt,$t){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=kt;return!Dt&&et===Ut&&!dt.reset?Ht:kt.promise=(async()=>{kt.asyncId=Tt,kt.asyncTo=et;const Kt=getDefaultProps$1(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=(kt.cancelId||0)&&getCancelledResult$1($t)||Tt!==kt.asyncId&&getFinishedResult$1($t,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const lr=new BailSignal$1,or=new SkipAnimationSignal$1;return(async()=>{if(globals_exports$1.skipAnimation)throw stopAsync$1(kt),or.result=getFinishedResult$1($t,!1),Jt(or),or;er(lr);const cr=is$1.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$1(Kt,(ur,pr)=>{is$1.und(cr[pr])&&(cr[pr]=ur)});const dr=await $t.start(cr);return er(lr),kt.paused&&await new Promise(ur=>{kt.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$1.skipAnimation)return stopAsync$1(kt),getFinishedResult$1($t,!1);try{let nr;is$1.arr(et)?nr=(async ir=>{for(const lr of ir)await rr(lr)})(et):nr=Promise.resolve(et(rr,$t.stop.bind($t))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$1($t.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$1)sr=nr.result;else if(nr instanceof SkipAnimationSignal$1)sr=nr.result;else throw nr}finally{Tt==kt.asyncId&&(kt.asyncId=Dt,kt.asyncTo=Dt?Ut:void 0,kt.promise=Dt?Ht:void 0)}return is$1.fun(Ft)&&raf$1.batchedUpdates(()=>{Ft(sr,$t,$t.item)}),sr})()}function stopAsync$1(et,dt){flush$1(et.timeouts,kt=>kt.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$1=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$1=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$1=et=>et instanceof FrameValue$1,nextId$1=1,FrameValue$1=class extends FluidValue$1{constructor(){super(...arguments),this.id=nextId$1++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$1(this);return dt&&dt.getValue()}to(...dt){return globals_exports$1.to(this,dt)}interpolate(...dt){return deprecateInterpolate$1(),globals_exports$1.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,kt=!1){callFluidObservers$1(this,{type:"change",parent:this,value:dt,idle:kt})}_onPriorityChange(dt){this.idle||frameLoop$1.sort(this),callFluidObservers$1(this,{type:"priority",parent:this,priority:dt})}},$P$1=Symbol.for("SpringPhase"),HAS_ANIMATED$1=1,IS_ANIMATING$1=2,IS_PAUSED$1=4,hasAnimated$1=et=>(et[$P$1]&HAS_ANIMATED$1)>0,isAnimating$1=et=>(et[$P$1]&IS_ANIMATING$1)>0,isPaused$1=et=>(et[$P$1]&IS_PAUSED$1)>0,setActiveBit$1=(et,dt)=>dt?et[$P$1]|=IS_ANIMATING$1|HAS_ANIMATED$1:et[$P$1]&=~IS_ANIMATING$1,setPausedBit$1=(et,dt)=>dt?et[$P$1]|=IS_PAUSED$1:et[$P$1]&=~IS_PAUSED$1,SpringValue$1=class extends FrameValue$1{constructor(dt,kt){if(super(),this.animation=new Animation$1,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$1.und(dt)||!is$1.und(kt)){const $t=is$1.obj(dt)?{...dt}:{...kt,from:dt};is$1.und($t.default)&&($t.default=!0),this.start($t)}}get idle(){return!(isAnimating$1(this)||this._state.asyncTo)||isPaused$1(this)}get goal(){return getFluidValue$1(this.animation.to)}get velocity(){const dt=getAnimated$1(this);return dt instanceof AnimatedValue$1?dt.lastVelocity||0:dt.getPayload().map(kt=>kt.lastVelocity||0)}get hasAnimated(){return hasAnimated$1(this)}get isAnimating(){return isAnimating$1(this)}get isPaused(){return isPaused$1(this)}get isDelayed(){return this._state.delayed}advance(dt){let kt=!0,$t=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$1(Tt.to);!Ut&&hasFluidValue$1(Tt.to)&&(Dt=toArray$1(getFluidValue$1(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$1?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$1.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let lr;const or=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$1.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=or,lr=ir*dr}else{lr=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||or/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$1.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,br=Math.ceil(dt/Rr);for(let _r=0;_r<br&&(mr=Math.abs(lr)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=or,er)));++_r){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(lr=-lr*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Pr=-Ft.friction*.001*lr,Or=(Mr+Pr)/Ft.mass;lr=lr+Or*Rr,rr=rr+lr*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),lr=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=lr,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:kt=!1,Yt.setValue(rr,Ft.round)&&($t=!0)});const Ht=getAnimated$1(this),Kt=Ht.getValue();if(kt){const Yt=getFluidValue$1(Tt.to);(Kt!==Yt||$t)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):$t&&Ft.decay&&this._onChange(Kt),this._stop()}else $t&&this._onChange(Kt)}set(dt){return raf$1.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$1(this)){const{to:dt,config:kt}=this.animation;raf$1.batchedUpdates(()=>{this._onStart(),kt.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,kt){let $t;return is$1.und(dt)?($t=this.queue||[],this.queue=[]):$t=[is$1.obj(dt)?dt:{...kt,to:dt}],Promise.all($t.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$1(this,Tt))}stop(dt){const{to:kt}=this.animation;return this._focus(this.get()),stopAsync$1(this._state,dt&&this._lastCallId),raf$1.batchedUpdates(()=>this._stop(kt,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const kt=this.key||"";let{to:$t,from:Tt}=dt;$t=is$1.obj($t)?$t[kt]:$t,($t==null||isAsyncTo$1($t))&&($t=void 0),Tt=is$1.obj(Tt)?Tt[kt]:Tt,Tt==null&&(Tt=void 0);const Dt={to:$t,from:Tt};return hasAnimated$1(this)||(dt.reverse&&([$t,Tt]=[Tt,$t]),Tt=getFluidValue$1(Tt),is$1.und(Tt)?getAnimated$1(this)||this._set($t):this._set(Tt)),Dt}_update({...dt},kt){const{key:$t,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$1(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$1(Ut,$t):Ut)),mergeActiveFn$1(this,dt,"onProps"),sendEvent$1(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$1(++this._lastCallId,{key:$t,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$1(this)||(setPausedBit$1(this,!0),flushCalls$1(Ft.pauseQueue),sendEvent$1(this,"onPause",getFinishedResult$1(this,checkFinished$1(this,this.animation.to)),this))},resume:()=>{isPaused$1(this)&&(setPausedBit$1(this,!1),isAnimating$1(this)&&this._resume(),flushCalls$1(Ft.resumeQueue),sendEvent$1(this,"onResume",getFinishedResult$1(this,checkFinished$1(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!(kt&&Ut.noop)){const Ht=createLoopUpdate$1(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,kt,$t){if(kt.cancel)return this.stop(!0),$t(getCancelledResult$1(this));const Tt=!is$1.und(dt.to),Dt=!is$1.und(dt.from);if(Tt||Dt)if(kt.callId>this._lastToId)this._lastToId=kt.callId;else return $t(getCancelledResult$1(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!kt.default||is$1.und(Jt))&&(Jt=Zt),kt.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$1(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$1(Zt);const rr=!isEqual$1(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$1(kt.to),{config:nr}=Ht,{decay:ir,velocity:lr}=nr;(Tt||Dt)&&(nr.velocity=0),kt.config&&!sr&&mergeConfig$1(nr,callProp$1(kt.config,Ft),kt.config!==Ut.config?callProp$1(Ut.config,Ft):void 0);let or=getAnimated$1(this);if(!or||is$1.und(Jt))return $t(getFinishedResult$1(this,!0));const cr=is$1.und(kt.reset)?Dt&&!kt.default:!is$1.und(Zt)&&matchProp$1(kt.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$1(Jt),pr=is$1.num(ur)||is$1.arr(ur)||isAnimatedString$1(ur),mr=!sr&&(!pr||matchProp$1(Ut.immediate||kt.immediate,Ft));if(rr){const _r=getAnimatedType$1(Jt);if(_r!==or.constructor)if(mr)or=this._set(ur);else throw Error(`Cannot animate between ${or.constructor.name} and ${_r.name}, as the "to" prop suggests`)}const jr=or.constructor;let Rr=hasFluidValue$1(Jt),br=!1;if(!Rr){const _r=cr||!hasAnimated$1(this)&&er;(rr||_r)&&(br=isEqual$1(computeGoal$1(dr),ur),Rr=!br),(!isEqual$1(Ht.immediate,mr)&&!mr||!isEqual$1(nr.decay,ir)||!isEqual$1(nr.velocity,lr))&&(Rr=!0)}if(br&&isAnimating$1(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$1(Kt))&&(Ht.values=or.getPayload(),Ht.toValues=hasFluidValue$1(Jt)?null:jr==AnimatedString$1?[1]:toArray$1(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:_r}=Ht;each$1(ACTIVE_EVENTS$1,Pr=>mergeActiveFn$1(this,kt,Pr));const Mr=getFinishedResult$1(this,checkFinished$1(this,Kt));flushCalls$1(this._pendingCalls,Mr),this._pendingCalls.add($t),Ht.changed&&raf$1.batchedUpdates(()=>{var Pr;Ht.changed=!cr,_r==null||_r(Mr,this),cr?callProp$1(Ut.onRest,Mr):(Pr=Ht.onStart)==null||Pr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?$t(runAsync$1(kt.to,kt,this._state,this)):Rr?this._start():isAnimating$1(this)&&!rr?this._pendingCalls.add($t):$t(getNoopResult$1(dr))}_focus(dt){const kt=this.animation;dt!==kt.to&&(getFluidObservers$1(this)&&this._detach(),kt.to=dt,getFluidObservers$1(this)&&this._attach())}_attach(){let dt=0;const{to:kt}=this.animation;hasFluidValue$1(kt)&&(addFluidObserver$1(kt,this),isFrameValue$1(kt)&&(dt=kt.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$1(dt)&&removeFluidObserver$1(dt,this)}_set(dt,kt=!0){const $t=getFluidValue$1(dt);if(!is$1.und($t)){const Tt=getAnimated$1(this);if(!Tt||!isEqual$1($t,Tt.getValue())){const Dt=getAnimatedType$1($t);!Tt||Tt.constructor!=Dt?setAnimated$1(this,Dt.create($t)):Tt.setValue($t),Tt&&raf$1.batchedUpdates(()=>{this._onChange($t,kt)})}}return getAnimated$1(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$1(this,"onStart",getFinishedResult$1(this,checkFinished$1(this,dt.to)),this))}_onChange(dt,kt){kt||(this._onStart(),callProp$1(this.animation.onChange,dt,this)),callProp$1(this.defaultProps.onChange,dt,this),super._onChange(dt,kt)}_start(){const dt=this.animation;getAnimated$1(this).reset(getFluidValue$1(dt.to)),dt.immediate||(dt.fromValues=dt.values.map(kt=>kt.lastPosition)),isAnimating$1(this)||(setActiveBit$1(this,!0),isPaused$1(this)||this._resume())}_resume(){globals_exports$1.skipAnimation?this.finish():frameLoop$1.start(this)}_stop(dt,kt){if(isAnimating$1(this)){setActiveBit$1(this,!1);const $t=this.animation;each$1($t.values,Dt=>{Dt.done=!0}),$t.toValues&&($t.onChange=$t.onPause=$t.onResume=void 0),callFluidObservers$1(this,{type:"idle",parent:this});const Tt=kt?getCancelledResult$1(this.get()):getFinishedResult$1(this.get(),checkFinished$1(this,dt??$t.to));flushCalls$1(this._pendingCalls,Tt),$t.changed&&($t.changed=!1,sendEvent$1(this,"onRest",Tt,this))}}};function checkFinished$1(et,dt){const kt=computeGoal$1(dt),$t=computeGoal$1(et.get());return isEqual$1($t,kt)}function createLoopUpdate$1(et,dt=et.loop,kt=et.to){const $t=callProp$1(dt);if($t){const Tt=$t!==!0&&inferTo$1($t),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$1({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$1(kt)?kt:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$1(et){const{to:dt,from:kt}=et=inferTo$1(et),$t=new Set;return is$1.obj(dt)&&findDefined$1(dt,$t),is$1.obj(kt)&&findDefined$1(kt,$t),et.keys=$t.size?Array.from($t):null,et}function findDefined$1(et,dt){eachProp$1(et,(kt,$t)=>kt!=null&&dt.add($t))}var ACTIVE_EVENTS$1=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$1(et,dt,kt){et.animation[kt]=dt[kt]!==getDefaultProp$1(dt,kt)?resolveProp$1(dt[kt],et.key):void 0}function sendEvent$1(et,dt,...kt){var $t,Tt,Dt,Ft;(Tt=($t=et.animation)[dt])==null||Tt.call($t,...kt),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...kt)}var BATCHED_EVENTS$1=["onStart","onChange","onRest"],nextId2$1=1,Controller$1=class{constructor(dt,kt){this.id=nextId2$1++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),kt&&(this._flush=kt),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each((kt,$t)=>dt[$t]=kt.get()),dt}set(dt){for(const kt in dt){const $t=dt[kt];is$1.und($t)||this.springs[kt].set($t)}}update(dt){return dt&&this.queue.push(createUpdate$1(dt)),this}start(dt){let{queue:kt}=this;return dt?kt=toArray$1(dt).map(createUpdate$1):this.queue=[],this._flush?this._flush(this,kt):(prepareKeys$1(this,kt),flushUpdateQueue$1(this,kt))}stop(dt,kt){if(dt!==!!dt&&(kt=dt),kt){const $t=this.springs;each$1(toArray$1(kt),Tt=>$t[Tt].stop(!!dt))}else stopAsync$1(this._state,this._lastAsyncId),this.each($t=>$t.stop(!!dt));return this}pause(dt){if(is$1.und(dt))this.start({pause:!0});else{const kt=this.springs;each$1(toArray$1(dt),$t=>kt[$t].pause())}return this}resume(dt){if(is$1.und(dt))this.start({pause:!1});else{const kt=this.springs;each$1(toArray$1(dt),$t=>kt[$t].resume())}return this}each(dt){eachProp$1(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:kt,onRest:$t}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$1(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&$t.size?this.get():null;Dt&&kt.size&&flush$1(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$1($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$1.onFrame(this._onFrame)}};function flushUpdateQueue$1(et,dt){return Promise.all(dt.map(kt=>flushUpdate$1(et,kt))).then(kt=>getCombinedResult$1(et,kt))}async function flushUpdate$1(et,dt,kt){const{keys:$t,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$1.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$1.arr(Tt)||is$1.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$1(BATCHED_EVENTS$1,sr=>{const nr=dt[sr];if(is$1.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:lr,cancelled:or})=>{const cr=ir.get(nr);cr?(lr||(cr.finished=!1),or&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:lr||!1,cancelled:or||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$1(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=($t||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$1(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$1(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$1,resume:noop$1,start(sr,nr){er?(stopAsync$1(Jt,et._lastAsyncId),nr(getCancelledResult$1(et))):(sr.onRest=Ut,nr(runAsync$1(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$1(et,await Promise.all(Zt));if(Ft&&rr.finished&&!(kt&&rr.noop)){const sr=createLoopUpdate$1(dt,Ft,Tt);if(sr)return prepareKeys$1(et,[sr]),flushUpdate$1(et,sr,!0)}return Ht&&raf$1.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$1(et,dt){const kt={...et.springs};return dt&&each$1(toArray$1(dt),$t=>{is$1.und($t.keys)&&($t=createUpdate$1($t)),is$1.obj($t.to)||($t={...$t,to:void 0}),prepareSprings$1(kt,$t,Tt=>createSpring$1(Tt))}),setSprings$1(et,kt),kt}function setSprings$1(et,dt){eachProp$1(dt,(kt,$t)=>{et.springs[$t]||(et.springs[$t]=kt,addFluidObserver$1(kt,et))})}function createSpring$1(et,dt){const kt=new SpringValue$1;return kt.key=et,dt&&addFluidObserver$1(kt,dt),kt}function prepareSprings$1(et,dt,kt){dt.keys&&each$1(dt.keys,$t=>{(et[$t]||(et[$t]=kt($t)))._prepareNode(dt)})}function prepareKeys$1(et,dt){each$1(dt,kt=>{prepareSprings$1(et.springs,kt,$t=>createSpring$1($t,et))})}var SpringContext$1=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$1=()=>{const et=[],dt=function($t){deprecateDirectCall$1();const Tt=[];return each$1(et,(Dt,Ft)=>{if(is$1.und($t))Tt.push(Dt.start());else{const Ut=kt($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function($t){et.includes($t)||et.push($t)},dt.delete=function($t){const Tt=et.indexOf($t);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$1(et,$t=>$t.pause(...arguments)),this},dt.resume=function(){return each$1(et,$t=>$t.resume(...arguments)),this},dt.set=function($t){each$1(et,(Tt,Dt)=>{const Ft=is$1.fun($t)?$t(Dt,Tt):$t;Ft&&Tt.set(Ft)})},dt.start=function($t){const Tt=[];return each$1(et,(Dt,Ft)=>{if(is$1.und($t))Tt.push(Dt.start());else{const Ut=this._getProps($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$1(et,$t=>$t.stop(...arguments)),this},dt.update=function($t){return each$1(et,(Tt,Dt)=>Tt.update(this._getProps($t,Tt,Dt))),this};const kt=function($t,Tt,Dt){return is$1.fun($t)?$t(Dt,Tt):$t};return dt._getProps=kt,dt};function useTransition(et,dt,kt){const $t=is$1.fun(dt)&&dt,{reset:Tt,sort:Dt,trail:Ft=0,expires:Ut=!0,exitBeforeEnter:Ht=!1,onDestroyed:Kt,ref:Yt,config:Jt}=$t?$t():dt,Zt=reactExports.useMemo(()=>$t||arguments.length==3?SpringRef$1():void 0,[]),er=toArray$1(et),rr=[],sr=reactExports.useRef(null),nr=Tt?null:sr.current;useIsomorphicLayoutEffect$1(()=>{sr.current=rr}),useOnce$1(()=>(each$1(rr,Pr=>{Zt==null||Zt.add(Pr.ctrl),Pr.ctrl.ref=Zt}),()=>{each$1(sr.current,Pr=>{Pr.expired&&clearTimeout(Pr.expirationId),detachRefs$1(Pr.ctrl,Zt),Pr.ctrl.stop(!0)})}));const ir=getKeys(er,$t?$t():dt,nr),lr=Tt&&sr.current||[];useIsomorphicLayoutEffect$1(()=>each$1(lr,({ctrl:Pr,item:Or,key:kr})=>{detachRefs$1(Pr,Zt),callProp$1(Kt,Or,kr)}));const or=[];if(nr&&each$1(nr,(Pr,Or)=>{Pr.expired?(clearTimeout(Pr.expirationId),lr.push(Pr)):(Or=or[Or]=ir.indexOf(Pr.key),~Or&&(rr[Or]=Pr))}),each$1(er,(Pr,Or)=>{rr[Or]||(rr[Or]={key:ir[Or],item:Pr,phase:"mount",ctrl:new Controller$1},rr[Or].ctrl.item=Pr)}),or.length){let Pr=-1;const{leave:Or}=$t?$t():dt;each$1(or,(kr,Tr)=>{const xr=nr[Tr];~kr?(Pr=rr.indexOf(xr),rr[Pr]={...xr,item:er[kr]}):Or&&rr.splice(++Pr,0,xr)})}is$1.fun(Dt)&&rr.sort((Pr,Or)=>Dt(Pr.item,Or.item));let cr=-Ft;const dr=useForceUpdate$1(),ur=getDefaultProps$1(dt),pr=new Map,mr=reactExports.useRef(new Map),jr=reactExports.useRef(!1);each$1(rr,(Pr,Or)=>{const kr=Pr.key,Tr=Pr.phase,xr=$t?$t():dt;let wr,zr;const Hr=callProp$1(xr.delay||0,kr);if(Tr=="mount")wr=xr.enter,zr="enter";else{const es=ir.indexOf(kr)<0;if(Tr!="leave")if(es)wr=xr.leave,zr="leave";else if(wr=xr.update)zr="update";else return;else if(!es)wr=xr.enter,zr="enter";else return}if(wr=callProp$1(wr,Pr.item,Or),wr=is$1.obj(wr)?inferTo$1(wr):{to:wr},!wr.config){const es=Jt||ur.config;wr.config=callProp$1(es,Pr.item,Or,zr)}cr+=Ft;const Yr={...ur,delay:Hr+cr,ref:Yt,immediate:xr.immediate,reset:!1,...wr};if(zr=="enter"&&is$1.und(Yr.from)){const es=$t?$t():dt,Xr=is$1.und(es.initial)||nr?es.from:es.initial;Yr.from=callProp$1(Xr,Pr.item,Or)}const{onResolve:rs}=Yr;Yr.onResolve=es=>{callProp$1(rs,es);const Xr=sr.current,Wr=Xr.find(cs=>cs.key===kr);if(Wr&&!(es.cancelled&&Wr.phase!="update")&&Wr.ctrl.idle){const cs=Xr.every(ns=>ns.ctrl.idle);if(Wr.phase=="leave"){const ns=callProp$1(Ut,Wr.item);if(ns!==!1){const us=ns===!0?0:ns;if(Wr.expired=!0,!cs&&us>0){us<=2147483647&&(Wr.expirationId=setTimeout(dr,us));return}}}cs&&Xr.some(ns=>ns.expired)&&(mr.current.delete(Wr),Ht&&(jr.current=!0),dr())}};const as=getSprings$1(Pr.ctrl,Yr);zr==="leave"&&Ht?mr.current.set(Pr,{phase:zr,springs:as,payload:Yr}):pr.set(Pr,{phase:zr,springs:as,payload:Yr})});const Rr=reactExports.useContext(SpringContext$1),br=usePrev$1(Rr),_r=Rr!==br&&hasProps$1(Rr);useIsomorphicLayoutEffect$1(()=>{_r&&each$1(rr,Pr=>{Pr.ctrl.start({default:Rr})})},[Rr]),each$1(pr,(Pr,Or)=>{if(mr.current.size){const kr=rr.findIndex(Tr=>Tr.key===Or.key);rr.splice(kr,1)}}),useIsomorphicLayoutEffect$1(()=>{each$1(mr.current.size?mr.current:pr,({phase:Pr,payload:Or},kr)=>{const{ctrl:Tr}=kr;kr.phase=Pr,Zt==null||Zt.add(Tr),_r&&Pr=="enter"&&Tr.start({default:Rr}),Or&&(replaceRef$1(Tr,Or.ref),(Tr.ref||Zt)&&!jr.current?Tr.update(Or):(Tr.start(Or),jr.current&&(jr.current=!1)))})},Tt?void 0:kt);const Mr=Pr=>reactExports.createElement(reactExports.Fragment,null,rr.map((Or,kr)=>{const{springs:Tr}=pr.get(Or)||Or.ctrl,xr=Pr({...Tr},Or.item,Or,kr),wr=is$1.str(Or.key)||is$1.num(Or.key)?Or.key:Or.ctrl.id,zr=reactExports.version<"19.0.0",Hr=(xr==null?void 0:xr.props)??{},Yr=zr?xr==null?void 0:xr.ref:Hr==null?void 0:Hr.ref;return xr&&xr.type?reactExports.createElement(xr.type,{...Hr,key:wr,ref:Yr}):xr}));return Zt?[Mr,Zt]:Mr}var nextKey=1;function getKeys(et,{key:dt,keys:kt=dt},$t){if(kt===null){const Tt=new Set;return et.map(Dt=>{const Ft=$t&&$t.find(Ut=>Ut.item===Dt&&Ut.phase!=="leave"&&!Tt.has(Ut));return Ft?(Tt.add(Ft),Ft.key):nextKey++})}return is$1.und(kt)?et:is$1.fun(kt)?et.map(kt):toArray$1(kt)}var Interpolation$1=class extends FrameValue$1{constructor(dt,kt){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$1(...kt);const $t=this._get(),Tt=getAnimatedType$1($t);setAnimated$1(this,Tt.create($t))}advance(dt){const kt=this._get(),$t=this.get();isEqual$1(kt,$t)||(getAnimated$1(this).setValue(kt),this._onChange(kt,this.idle)),!this.idle&&checkIdle$1(this._active)&&becomeIdle$1(this)}_get(){const dt=is$1.arr(this.source)?this.source.map(getFluidValue$1):toArray$1(getFluidValue$1(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$1(this._active)&&(this.idle=!1,each$1(getPayload$1(this),dt=>{dt.done=!1}),globals_exports$1.skipAnimation?(raf$1.batchedUpdates(()=>this.advance()),becomeIdle$1(this)):frameLoop$1.start(this))}_attach(){let dt=1;each$1(toArray$1(this.source),kt=>{hasFluidValue$1(kt)&&addFluidObserver$1(kt,this),isFrameValue$1(kt)&&(kt.idle||this._active.add(kt),dt=Math.max(dt,kt.priority+1))}),this.priority=dt,this._start()}_detach(){each$1(toArray$1(this.source),dt=>{hasFluidValue$1(dt)&&removeFluidObserver$1(dt,this)}),this._active.clear(),becomeIdle$1(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$1(this.source).reduce((kt,$t)=>Math.max(kt,(isFrameValue$1($t)?$t.priority:0)+1),0))}};function isIdle$1(et){return et.idle!==!1}function checkIdle$1(et){return!et.size||Array.from(et).every(isIdle$1)}function becomeIdle$1(et){et.idle||(et.idle=!0,each$1(getPayload$1(et),dt=>{dt.done=!0}),callFluidObservers$1(et,{type:"idle",parent:et}))}var to$1=(et,...dt)=>new Interpolation$1(et,dt);globals_exports$1.assign({createStringInterpolator:createStringInterpolator2$1,to:(et,dt)=>new Interpolation$1(et,dt)});var isCustomPropRE$1=/^--/;function dangerousStyleValue$1(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$1.test(et)&&!(isUnitlessNumber$1.hasOwnProperty(et)&&isUnitlessNumber$1[et])?dt+"px":(""+dt).trim()}var attributeCache$1={};function applyAnimatedValues$1(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const kt=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:$t,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>kt||et.hasAttribute(Zt)?Zt:attributeCache$1[Zt]||(attributeCache$1[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$1(Zt,Tt[Zt]);isCustomPropRE$1.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),$t!==void 0&&(et.className=$t),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$1={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$1=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$1=["Webkit","Ms","Moz","O"];isUnitlessNumber$1=Object.keys(isUnitlessNumber$1).reduce((et,dt)=>(prefixes$1.forEach(kt=>et[prefixKey$1(kt,dt)]=et[dt]),et),isUnitlessNumber$1);var domTransforms$1=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$1=/^(translate)/,degTransforms$1=/^(rotate|skew)/,addUnit$1=(et,dt)=>is$1.num(et)&&et!==0?et+dt:et,isValueIdentity$1=(et,dt)=>is$1.arr(et)?et.every(kt=>isValueIdentity$1(kt,dt)):is$1.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$1=class extends AnimatedObject$1{constructor({x:dt,y:kt,z:$t,...Tt}){const Dt=[],Ft=[];(dt||kt||$t)&&(Dt.push([dt||0,kt||0,$t||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$1(Ht,"px")).join(",")})`,isValueIdentity$1(Ut,0)])),eachProp$1(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$1.test(Ht)){if(delete Tt[Ht],is$1.und(Ut))return;const Kt=pxTransforms$1.test(Ht)?"px":degTransforms$1.test(Ht)?"deg":"";Dt.push(toArray$1(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$1(er,Kt)})`,isValueIdentity$1(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$1(Jt,Kt)).join(",")})`,isValueIdentity$1(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$1(Dt,Ft)),super(Tt)}},FluidTransform$1=class extends FluidValue$1{constructor(dt,kt){super(),this.inputs=dt,this.transforms=kt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",kt=!0;return each$1(this.inputs,($t,Tt)=>{const Dt=getFluidValue$1($t[0]),[Ft,Ut]=this.transforms[Tt](is$1.arr(Dt)?Dt:$t.map(getFluidValue$1));dt+=" "+Ft,kt=kt&&Ut}),kt?"none":dt}observerAdded(dt){dt==1&&each$1(this.inputs,kt=>each$1(kt,$t=>hasFluidValue$1($t)&&addFluidObserver$1($t,this)))}observerRemoved(dt){dt==0&&each$1(this.inputs,kt=>each$1(kt,$t=>hasFluidValue$1($t)&&removeFluidObserver$1($t,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$1(this,dt)}},primitives$1=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$1.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$1,colors:colors2$1});var host$1=createHost$1(primitives$1,{applyAnimatedValues:applyAnimatedValues$1,createAnimatedStyle:et=>new AnimatedStyle$1(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...kt})=>kt}),animated$1=host$1.animated,baseEach=_baseEach;function baseFilter$1(et,dt){var kt=[];return baseEach(et,function($t,Tt,Dt){dt($t,Tt,Dt)&&kt.push($t)}),kt}var _baseFilter=baseFilter$1,arrayFilter=_arrayFilter,baseFilter=_baseFilter,baseIteratee=_baseIteratee,isArray$1=isArray_1;function filter(et,dt){var kt=isArray$1(et)?arrayFilter:baseFilter;return kt(et,baseIteratee(dt))}var filter_1=filter;const o$1=getDefaultExportFromCjs(filter_1);var baseGetTag=_baseGetTag,isObjectLike$2=isObjectLike_1,numberTag$2="[object Number]";function isNumber(et){return typeof et=="number"||isObjectLike$2(et)&&baseGetTag(et)==numberTag$2}var isNumber_1=isNumber;const e=getDefaultExportFromCjs(isNumber_1);function arrayEach$1(et,dt){for(var kt=-1,$t=et==null?0:et.length;++kt<$t&&dt(et[kt],kt,et)!==!1;);return et}var _arrayEach=arrayEach$1,copyObject$4=_copyObject,keys$1=keys_1;function baseAssign$1(et,dt){return et&&copyObject$4(dt,keys$1(dt),et)}var _baseAssign=baseAssign$1,copyObject$3=_copyObject,keysIn$2=keysIn_1;function baseAssignIn$1(et,dt){return et&&copyObject$3(dt,keysIn$2(dt),et)}var _baseAssignIn=baseAssignIn$1,copyObject$2=_copyObject,getSymbols$1=_getSymbols;function copySymbols$1(et,dt){return copyObject$2(et,getSymbols$1(et),dt)}var _copySymbols=copySymbols$1,arrayPush=_arrayPush,getPrototype=_getPrototype,getSymbols=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(et){for(var dt=[];et;)arrayPush(dt,getSymbols(et)),et=getPrototype(et);return dt}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject$1=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(et,dt){return copyObject$1(et,getSymbolsIn$1(et),dt)}var _copySymbolsIn=copySymbolsIn$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$1=keysIn_1;function getAllKeysIn$2(et){return baseGetAllKeys(et,keysIn$1,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$2,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray$1(et){var dt=et.length,kt=new et.constructor(dt);return dt&&typeof et[0]=="string"&&hasOwnProperty.call(et,"index")&&(kt.index=et.index,kt.input=et.input),kt}var _initCloneArray=initCloneArray$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneDataView$1(et,dt){var kt=dt?cloneArrayBuffer$1(et.buffer):et.buffer;return new et.constructor(kt,et.byteOffset,et.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(et){var dt=new et.constructor(et.source,reFlags.exec(et));return dt.lastIndex=et.lastIndex,dt}var _cloneRegExp=cloneRegExp$1,Symbol$1=_Symbol,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol$1(et){return symbolValueOf?Object(symbolValueOf.call(et)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray,boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(et,dt,kt){var $t=et.constructor;switch(dt){case arrayBufferTag$1:return cloneArrayBuffer(et);case boolTag$1:case dateTag$1:return new $t(+et);case dataViewTag$1:return cloneDataView(et,kt);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(et,kt);case mapTag$2:return new $t;case numberTag$1:case stringTag$1:return new $t(et);case regexpTag$1:return cloneRegExp(et);case setTag$2:return new $t;case symbolTag$1:return cloneSymbol(et)}}var _initCloneByTag=initCloneByTag$1,getTag$2=_getTag,isObjectLike$1=isObjectLike_1,mapTag$1="[object Map]";function baseIsMap$1(et){return isObjectLike$1(et)&&getTag$2(et)==mapTag$1}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtilExports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$1=_getTag,isObjectLike=isObjectLike_1,setTag$1="[object Set]";function baseIsSet$1(et){return isObjectLike(et)&&getTag$1(et)==setTag$1}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBufferExports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn$1=_getAllKeysIn,getTag=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray=isArray_1,isBuffer=isBufferExports,isMap=isMap_1,isObject=isObject_1,isSet=isSet_1,keys=keys_1,keysIn=keysIn_1,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone$1(et,dt,kt,$t,Tt,Dt){var Ft,Ut=dt&CLONE_DEEP_FLAG$1,Ht=dt&CLONE_FLAT_FLAG$1,Kt=dt&CLONE_SYMBOLS_FLAG$1;if(kt&&(Ft=Tt?kt(et,$t,Tt,Dt):kt(et)),Ft!==void 0)return Ft;if(!isObject(et))return et;var Yt=isArray(et);if(Yt){if(Ft=initCloneArray(et),!Ut)return copyArray(et,Ft)}else{var Jt=getTag(et),Zt=Jt==funcTag||Jt==genTag;if(isBuffer(et))return cloneBuffer(et,Ut);if(Jt==objectTag||Jt==argsTag||Zt&&!Tt){if(Ft=Ht||Zt?{}:initCloneObject(et),!Ut)return Ht?copySymbolsIn(et,baseAssignIn(Ft,et)):copySymbols(et,baseAssign(Ft,et))}else{if(!cloneableTags[Jt])return Tt?et:{};Ft=initCloneByTag(et,Jt,Ut)}}Dt||(Dt=new Stack);var er=Dt.get(et);if(er)return er;Dt.set(et,Ft),isSet(et)?et.forEach(function(nr){Ft.add(baseClone$1(nr,dt,kt,nr,et,Dt))}):isMap(et)&&et.forEach(function(nr,ir){Ft.set(ir,baseClone$1(nr,dt,kt,ir,et,Dt))});var rr=Kt?Ht?getAllKeysIn$1:getAllKeys:Ht?keysIn:keys,sr=Yt?void 0:rr(et);return arrayEach(sr||et,function(nr,ir){sr&&(ir=nr,nr=et[ir]),assignValue(Ft,ir,baseClone$1(nr,dt,kt,ir,et,Dt))}),Ft}var _baseClone=baseClone$1;function baseSlice$1(et,dt,kt){var $t=-1,Tt=et.length;dt<0&&(dt=-dt>Tt?0:Tt+dt),kt=kt>Tt?Tt:kt,kt<0&&(kt+=Tt),Tt=dt>kt?0:kt-dt>>>0,dt>>>=0;for(var Dt=Array(Tt);++$t<Tt;)Dt[$t]=et[$t+dt];return Dt}var _baseSlice=baseSlice$1,baseGet=_baseGet,baseSlice=_baseSlice;function parent$1(et,dt){return dt.length<2?et:baseGet(et,baseSlice(dt,0,-1))}var _parent=parent$1,castPath$1=_castPath,last=last_1,parent=_parent,toKey=_toKey;function baseUnset$1(et,dt){return dt=castPath$1(dt,et),et=parent(et,dt),et==null||delete et[toKey(last(dt))]}var _baseUnset=baseUnset$1,isPlainObject=isPlainObject_1;function customOmitClone$1(et){return isPlainObject(et)?void 0:et}var _customOmitClone=customOmitClone$1,arrayMap=_arrayMap,baseClone=_baseClone,baseUnset=_baseUnset,castPath=_castPath,copyObject=_copyObject,customOmitClone=_customOmitClone,flatRest=_flatRest,getAllKeysIn=_getAllKeysIn,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(et,dt){var kt={};if(et==null)return kt;var $t=!1;dt=arrayMap(dt,function(Dt){return Dt=castPath(Dt,et),$t||($t=Dt.length>1),Dt}),copyObject(et,getAllKeysIn(et),kt),$t&&(kt=baseClone(kt,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var Tt=dt.length;Tt--;)baseUnset(kt,dt[Tt]);return kt}),omit_1=omit;const a=getDefaultExportFromCjs(omit_1);var updateQueue=makeQueue(),raf=et=>schedule(et,updateQueue),writeQueue=makeQueue();raf.write=et=>schedule(et,writeQueue);var onStartQueue=makeQueue();raf.onStart=et=>schedule(et,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=et=>schedule(et,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=et=>schedule(et,onFinishQueue);var timeouts=[];raf.setTimeout=(et,dt)=>{const kt=raf.now()+dt,$t=()=>{const Dt=timeouts.findIndex(Ft=>Ft.cancel==$t);~Dt&&timeouts.splice(Dt,1),pendingCount-=~Dt?1:0},Tt={time:kt,handler:et,cancel:$t};return timeouts.splice(findTimeout(kt),0,Tt),pendingCount+=1,start(),Tt};var findTimeout=et=>~(~timeouts.findIndex(dt=>dt.time>et)||~timeouts.length);raf.cancel=et=>{onStartQueue.delete(et),onFrameQueue.delete(et),onFinishQueue.delete(et),updateQueue.delete(et),writeQueue.delete(et)};raf.sync=et=>{sync=!0,raf.batchedUpdates(et),sync=!1};raf.throttle=et=>{let dt;function kt(){try{et(...dt)}finally{dt=null}}function $t(...Tt){dt=Tt,raf.onStart(kt)}return $t.handler=et,$t.cancel=()=>{onStartQueue.delete(kt),dt=null},$t};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:()=>{};raf.use=et=>nativeRaf=et;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=et=>et();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule(et,dt){sync?(dt.delete(et),et(0)):(dt.add(et),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const et=ts;ts=raf.now();const dt=findTimeout(ts);if(dt&&(eachSafely(timeouts.splice(0,dt),kt=>kt.handler()),pendingCount-=dt),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(et?Math.min(64,ts-et):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let et=new Set,dt=et;return{add(kt){pendingCount+=dt==et&&!et.has(kt)?1:0,et.add(kt)},delete(kt){return pendingCount-=dt==et&&et.has(kt)?1:0,et.delete(kt)},flush(kt){dt.size&&(et=new Set,pendingCount-=dt.size,eachSafely(dt,$t=>$t(kt)&&et.add($t)),pendingCount+=et.size,dt=et)}}}function eachSafely(et,dt){et.forEach(kt=>{try{dt(kt)}catch($t){raf.catch($t)}})}var __defProp=Object.defineProperty,__export=(et,dt)=>{for(var kt in dt)__defProp(et,kt,{get:dt[kt],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop(){}var defineHidden=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual(et,dt){if(is.arr(et)){if(!is.arr(dt)||et.length!==dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(et[kt]!==dt[kt])return!1;return!0}return et===dt}var each=(et,dt)=>et.forEach(dt);function eachProp(et,dt,kt){if(is.arr(et)){for(let $t=0;$t<et.length;$t++)dt.call(kt,et[$t],`${$t}`);return}for(const $t in et)et.hasOwnProperty($t)&&dt.call(kt,et[$t],$t)}var toArray=et=>is.und(et)?[]:is.arr(et)?et:[et];function flush(et,dt){if(et.size){const kt=Array.from(et);et.clear(),each(kt,dt)}}var flushCalls=(et,...dt)=>flush(et,kt=>kt(...dt)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop,assign=et=>{et.to&&(to=et.to),et.now&&(raf.now=et.now),et.colors!==void 0&&(colors=et.colors),et.skipAnimation!=null&&(skipAnimation=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator=et.createStringInterpolator),et.requestAnimationFrame&&raf.use(et.requestAnimationFrame),et.batchedUpdates&&(raf.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance=et.willAdvance),et.frameLoop&&(raf.frameLoop=et.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(et){priority>et.priority?(startQueue.add(et),raf.onStart(flushStartQueue)):(startSafely(et),raf(advance))},advance,sort(et){if(priority)raf.onFrame(()=>frameLoop.sort(et));else{const dt=currentFrame.indexOf(et);~dt&&(currentFrame.splice(dt,1),startUnsafely(et))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(et){currentFrame.includes(et)||startUnsafely(et)}function startUnsafely(et){currentFrame.splice(findIndex(currentFrame,dt=>dt.priority>et.priority),0,et)}function advance(et){const dt=prevFrame;for(let kt=0;kt<currentFrame.length;kt++){const $t=currentFrame[kt];priority=$t.priority,$t.idle||(willAdvance($t),$t.advance(et),$t.idle||dt.push($t))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=dt,currentFrame.length>0}function findIndex(et,dt){const kt=et.findIndex(dt);return kt<0?et.length:kt}var clamp=(et,dt,kt)=>Math.min(Math.max(kt,et),dt),colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors&&colors[et]!==void 0?colors[et]:(dt=rgb.exec(et))?(parse255(dt[1])<<24|parse255(dt[2])<<16|parse255(dt[3])<<8|255)>>>0:(dt=rgba.exec(et))?(parse255(dt[1])<<24|parse255(dt[2])<<16|parse255(dt[3])<<8|parse1(dt[4]))>>>0:(dt=hex3.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl.exec(et))?(hslToRgb(parse360(dt[1]),parsePercentage(dt[2]),parsePercentage(dt[3]))|255)>>>0:(dt=hsla.exec(et))?(hslToRgb(parse360(dt[1]),parsePercentage(dt[2]),parsePercentage(dt[3]))|parse1(dt[4]))>>>0:null}function hue2rgb(et,dt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?et+(dt-et)*6*kt:kt<1/2?dt:kt<2/3?et+(dt-et)*(2/3-kt)*6:et}function hslToRgb(et,dt,kt){const $t=kt<.5?kt*(1+dt):kt+dt-kt*dt,Tt=2*kt-$t,Dt=hue2rgb(Tt,$t,et+1/3),Ft=hue2rgb(Tt,$t,et),Ut=hue2rgb(Tt,$t,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360(et){return(parseFloat(et)%360+360)%360/360}function parse1(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba(et){let dt=normalizeColor(et);if(dt===null)return et;dt=dt||0;const kt=(dt&4278190080)>>>24,$t=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${kt}, ${$t}, ${Tt}, ${Dt})`}var createInterpolator=(et,dt,kt)=>{if(is.fun(et))return et;if(is.arr(et))return createInterpolator({range:et,output:dt,extrapolate:kt});if(is.str(et.output[0]))return createStringInterpolator(et);const $t=et,Tt=$t.output,Dt=$t.range||[0,1],Ft=$t.extrapolateLeft||$t.extrapolate||"extend",Ut=$t.extrapolateRight||$t.extrapolate||"extend",Ht=$t.easing||(Kt=>Kt);return Kt=>{const Yt=findRange(Kt,Dt);return interpolate(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,$t.map)}};function interpolate(et,dt,kt,$t,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>kt){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=kt)}return $t===Tt?$t:dt===kt?et<=dt?$t:Tt:(dt===-1/0?Kt=-Kt:kt===1/0?Kt=Kt-dt:Kt=(Kt-dt)/(kt-dt),Kt=Dt(Kt),$t===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+$t:Kt=Kt*(Tt-$t)+$t,Kt)}function findRange(et,dt){for(var kt=1;kt<dt.length-1&&!(dt[kt]>=et);++kt);return kt-1}var steps=(et,dt="end")=>kt=>{kt=dt==="end"?Math.min(kt,.999):Math.max(kt,.001);const $t=kt*et,Tt=dt==="end"?Math.floor($t):Math.ceil($t);return clamp(0,1,Tt/et)},c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*Math.PI/3,c5=2*Math.PI/4.5,bounceOut=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3*et*et*et-c1*et*et,easeOutBack:et=>1+c3*Math.pow(et-1,3)+c1*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2+1)*2*et-c2)/2:(Math.pow(2*et-2,2)*((c2+1)*(et*2-2)+c2)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5)/2+1,easeInBounce:et=>1-bounceOut(1-et),easeOutBounce:bounceOut,easeInOutBounce:et=>et<.5?(1-bounceOut(1-2*et))/2:(1+bounceOut(2*et-1))/2,steps},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=et=>!!(et&&et[$get]),getFluidValue=et=>et&&et[$get]?et[$get]():et,getFluidObservers=et=>et[$observers]||null;function callFluidObserver(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers(et,dt){const kt=et[$observers];kt&&kt.forEach($t=>{callFluidObserver($t,dt)})}var FluidValue=class{constructor(et){if(!et&&!(et=this.get))throw Error("Unknown getter");setFluidGetter(this,et)}},setFluidGetter=(et,dt)=>setHidden(et,$get,dt);function addFluidObserver(et,dt){if(et[$get]){let kt=et[$observers];kt||setHidden(et,$observers,kt=new Set),kt.has(dt)||(kt.add(dt),et.observerAdded&&et.observerAdded(kt.size,dt))}return dt}function removeFluidObserver(et,dt){const kt=et[$observers];if(kt&&kt.has(dt)){const $t=kt.size-1;$t?kt.delete(dt):et[$observers]=null,et.observerRemoved&&et.observerRemoved($t,dt)}}var setHidden=(et,dt,kt)=>Object.defineProperty(et,dt,{value:kt,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=et=>{const[dt,kt]=parseCSSVariable(et);if(!dt||isSSR())return et;const $t=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if($t)return $t.trim();if(kt&&kt.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue(kt);return Tt||et}else{if(kt&&cssVariableRegex.test(kt))return variableToRgba(kt);if(kt)return kt}return et},parseCSSVariable=et=>{const dt=cssVariableRegex.exec(et);if(!dt)return[,];const[,kt,$t]=dt;return[kt,$t]},namedColorRegex,rgbaRound=(et,dt,kt,$t,Tt)=>`rgba(${Math.round(dt)}, ${Math.round(kt)}, ${Math.round($t)}, ${Tt})`,createStringInterpolator2=et=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue(Dt).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),kt=dt.map(Dt=>Dt.match(numberRegex).map(Number)),Tt=kt[0].map((Dt,Ft)=>kt.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex.test(Kt)))==null?void 0:Ht.replace(numberRegex,""));let Ut=0;return dt[0].replace(numberRegex,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=et=>{const dt=et;let kt=!1;if(typeof dt!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...$t)=>{kt||(dt(...$t),kt=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(et){return is.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR()&&cssVariableRegex.test(et)||et in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate(){const et=reactExports.useState()[1],dt=useIsMounted();return()=>{dt.current&&et(Math.random())}}var useOnce=et=>reactExports.useEffect(et,emptyDeps),emptyDeps=[];function usePrev(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node=Symbol.for("Animated:node"),isAnimated=et=>!!et&&et[$node]===et,getAnimated=et=>et&&et[$node],setAnimated=(et,dt)=>defineHidden(et,$node,dt),getPayload=et=>et&&et[$node]&&et[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class sC extends Animated{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new sC(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,kt){return is.num(dt)&&(this.lastPosition=dt,kt&&(dt=Math.round(dt/kt)*kt,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class nC extends AnimatedValue{constructor(dt){super(0),this._string=null,this._toString=createInterpolator({output:[dt,dt]})}static create(dt){return new nC(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(et){super(),this.source=et,this.setValue(et)}getValue(et){const dt={};return eachProp(this.source,(kt,$t)=>{isAnimated(kt)?dt[$t]=kt.getValue(et):hasFluidValue(kt)?dt[$t]=getFluidValue(kt):et||(dt[$t]=kt)}),dt}setValue(et){this.source=et,this.payload=this._makePayload(et)}reset(){this.payload&&each(this.payload,et=>et.reset())}_makePayload(et){if(et){const dt=new Set;return eachProp(et,this._addToPayload,dt),Array.from(dt)}}_addToPayload(et){TreeContext.dependencies&&hasFluidValue(et)&&TreeContext.dependencies.add(et);const dt=getPayload(et);dt&&each(dt,kt=>this.add(kt))}},AnimatedArray=class iC extends AnimatedObject{constructor(dt){super(dt)}static create(dt){return new iC(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const kt=this.getPayload();return dt.length==kt.length?kt.map(($t,Tt)=>$t.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated)),!0)}};function makeAnimated(et){return(isAnimatedString(et)?AnimatedString:AnimatedValue).create(et)}function getAnimatedType(et){const dt=getAnimated(et);return dt?dt.constructor:is.arr(et)?AnimatedArray:isAnimatedString(et)?AnimatedString:AnimatedValue}var withAnimated=(et,dt)=>{const kt=!is.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef(($t,Tt)=>{const Dt=reactExports.useRef(null),Ft=kt&&reactExports.useCallback(rr=>{Dt.current=updateRef(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState($t,dt),Kt=useForceUpdate(),Yt=()=>{const rr=Dt.current;if(kt&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect(()=>(Zt.current=Jt,each(Ht,rr=>addFluidObserver(rr,Jt)),()=>{Zt.current&&(each(Zt.current.deps,rr=>removeFluidObserver(rr,Zt.current)),raf.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce(()=>()=>{const rr=Zt.current;each(rr.deps,sr=>removeFluidObserver(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver=class{constructor(et,dt){this.update=et,this.deps=dt}eventObserved(et){et.type=="change"&&raf.write(this.update)}};function getAnimatedState(et,dt){const kt=new Set;return TreeContext.dependencies=kt,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject(et),TreeContext.dependencies=null,[et,kt]}function updateRef(et,dt){return et&&(is.fun(et)?et(dt):et.current=dt),dt}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:kt=Tt=>new AnimatedObject(Tt),getComponentProps:$t=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:kt,getComponentProps:$t},Dt=Ft=>{const Ut=getDisplayName(Ft)||"Anonymous";return is.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated(Ft,Tt)):Ft=Ft[cacheKey]||(Ft[cacheKey]=withAnimated(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp(et,(Ft,Ut)=>{is.arr(et)&&(Ut=getDisplayName(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName=et=>is.str(et)?et:et&&is.str(et.displayName)?et.displayName:is.fun(et)&&et.name||null;function callProp(et,...dt){return is.fun(et)?et(...dt):et}var matchProp=(et,dt)=>et===!0||!!(dt&&et&&(is.fun(et)?et(dt):toArray(et).includes(dt))),resolveProp=(et,dt)=>is.obj(et)?dt&&et[dt]:et,getDefaultProp=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform=et=>et,getDefaultProps=(et,dt=noopTransform)=>{let kt=DEFAULT_PROPS;et.default&&et.default!==!0&&(et=et.default,kt=Object.keys(et));const $t={};for(const Tt of kt){const Dt=dt(et[Tt],Tt);is.und(Dt)||($t[Tt]=Dt)}return $t},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(et){const dt={};let kt=0;if(eachProp(et,($t,Tt)=>{RESERVED_PROPS[Tt]||(dt[Tt]=$t,kt++)}),kt)return dt}function inferTo(et){const dt=getForwardProps(et);if(dt){const kt={to:dt};return eachProp(et,($t,Tt)=>Tt in dt||(kt[Tt]=$t)),kt}return{...et}}function computeGoal(et){return et=getFluidValue(et),is.arr(et)?et.map(computeGoal):isAnimatedString(et)?globals_exports.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps(et){for(const dt in et)return!0;return!1}function isAsyncTo(et){return is.fun(et)||is.arr(et)&&is.obj(et[0])}function detachRefs(et,dt){var kt;(kt=et.ref)==null||kt.delete(et),dt==null||dt.delete(et)}function replaceRef(et,dt){var kt;dt&&et.ref!==dt&&((kt=et.ref)==null||kt.delete(et),dt.add(et),et.ref=dt)}var config={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig(et,dt,kt){kt&&(kt={...kt},sanitizeConfig(kt,dt),dt={...kt,...dt}),sanitizeConfig(et,dt),Object.assign(et,dt);for(const Ft in defaults)et[Ft]==null&&(et[Ft]=defaults[Ft]);let{frequency:$t,damping:Tt}=et;const{mass:Dt}=et;return is.und($t)||($t<.01&&($t=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/$t,2)*Dt,et.friction=4*Math.PI*Tt*Dt/$t),et}function sanitizeConfig(et,dt){if(!is.und(dt.decay))et.duration=void 0;else{const kt=!is.und(dt.tension)||!is.und(dt.friction);(kt||!is.und(dt.frequency)||!is.und(dt.damping)||!is.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),kt&&(et.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(et,{key:dt,props:kt,defaultProps:$t,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp(kt.cancel??($t==null?void 0:$t.cancel),dt);if(Yt)er();else{is.und(kt.pause)||(Tt.paused=matchProp(kt.pause,dt));let rr=$t==null?void 0:$t.pause;rr!==!0&&(rr=Tt.paused||matchProp(rr,dt)),Ht=callProp(kt.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf.now()}function Zt(){Ht>0&&!globals_exports.skipAnimation?(Tt.delayed=!0,Kt=raf.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...kt,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult=(et,dt)=>dt.length==1?dt[0]:dt.some(kt=>kt.cancelled)?getCancelledResult(et.get()):dt.every(kt=>kt.noop)?getNoopResult(et.get()):getFinishedResult(et.get(),dt.every(kt=>kt.finished)),getNoopResult=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(et,dt,kt=!1)=>({value:et,finished:dt,cancelled:kt}),getCancelledResult=et=>({value:et,cancelled:!0,finished:!1});function runAsync(et,dt,kt,$t){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=kt;return!Dt&&et===Ut&&!dt.reset?Ht:kt.promise=(async()=>{kt.asyncId=Tt,kt.asyncTo=et;const Kt=getDefaultProps(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=(kt.cancelId||0)&&getCancelledResult($t)||Tt!==kt.asyncId&&getFinishedResult($t,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const lr=new BailSignal,or=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(kt),or.result=getFinishedResult($t,!1),Jt(or),or;er(lr);const cr=is.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp(Kt,(ur,pr)=>{is.und(cr[pr])&&(cr[pr]=ur)});const dr=await $t.start(cr);return er(lr),kt.paused&&await new Promise(ur=>{kt.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports.skipAnimation)return stopAsync(kt),getFinishedResult($t,!1);try{let nr;is.arr(et)?nr=(async ir=>{for(const lr of ir)await rr(lr)})(et):nr=Promise.resolve(et(rr,$t.stop.bind($t))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult($t.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal)sr=nr.result;else if(nr instanceof SkipAnimationSignal)sr=nr.result;else throw nr}finally{Tt==kt.asyncId&&(kt.asyncId=Dt,kt.asyncTo=Dt?Ut:void 0,kt.promise=Dt?Ht:void 0)}return is.fun(Ft)&&raf.batchedUpdates(()=>{Ft(sr,$t,$t.item)}),sr})()}function stopAsync(et,dt){flush(et.timeouts,kt=>kt.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=et=>et instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(et){this._priority!=et&&(this._priority=et,this._onPriorityChange(et))}get(){const et=getAnimated(this);return et&&et.getValue()}to(...et){return globals_exports.to(this,et)}interpolate(...et){return deprecateInterpolate(),globals_exports.to(this,et)}toJSON(){return this.get()}observerAdded(et){et==1&&this._attach()}observerRemoved(et){et==0&&this._detach()}_attach(){}_detach(){}_onChange(et,dt=!1){callFluidObservers(this,{type:"change",parent:this,value:et,idle:dt})}_onPriorityChange(et){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:et})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=et=>(et[$P]&HAS_ANIMATED)>0,isAnimating=et=>(et[$P]&IS_ANIMATING)>0,isPaused=et=>(et[$P]&IS_PAUSED)>0,setActiveBit=(et,dt)=>dt?et[$P]|=IS_ANIMATING|HAS_ANIMATED:et[$P]&=~IS_ANIMATING,setPausedBit=(et,dt)=>dt?et[$P]|=IS_PAUSED:et[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor(et,dt){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(et)||!is.und(dt)){const kt=is.obj(et)?{...et}:{...dt,from:et};is.und(kt.default)&&(kt.default=!0),this.start(kt)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const et=getAnimated(this);return et instanceof AnimatedValue?et.lastVelocity||0:et.getPayload().map(dt=>dt.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(et){let dt=!0,kt=!1;const $t=this.animation;let{toValues:Tt}=$t;const{config:Dt}=$t,Ft=getPayload($t.to);!Ft&&hasFluidValue($t.to)&&(Tt=toArray(getFluidValue($t.to))),$t.values.forEach((Kt,Yt)=>{if(Kt.done)return;const Jt=Kt.constructor==AnimatedString?1:Ft?Ft[Yt].lastPosition:Tt[Yt];let Zt=$t.immediate,er=Jt;if(!Zt){if(er=Kt.lastPosition,Dt.tension<=0){Kt.done=!0;return}let rr=Kt.elapsedTime+=et;const sr=$t.fromValues[Yt],nr=Kt.v0!=null?Kt.v0:Kt.v0=is.arr(Dt.velocity)?Dt.velocity[Yt]:Dt.velocity;let ir;const lr=Dt.precision||(sr==Jt?.005:Math.min(1,Math.abs(Jt-sr)*.001));if(is.und(Dt.duration))if(Dt.decay){const or=Dt.decay===!0?.998:Dt.decay,cr=Math.exp(-(1-or)*rr);er=sr+nr/(1-or)*(1-cr),Zt=Math.abs(Kt.lastPosition-er)<=lr,ir=nr*cr}else{ir=Kt.lastVelocity==null?nr:Kt.lastVelocity;const or=Dt.restVelocity||lr/10,cr=Dt.clamp?0:Dt.bounce,dr=!is.und(cr),ur=sr==Jt?Kt.v0>0:sr<Jt;let pr,mr=!1;const jr=1,Rr=Math.ceil(et/jr);for(let br=0;br<Rr&&(pr=Math.abs(ir)>or,!(!pr&&(Zt=Math.abs(Jt-er)<=lr,Zt)));++br){dr&&(mr=er==Jt||er>Jt==ur,mr&&(ir=-ir*cr,er=Jt));const _r=-Dt.tension*1e-6*(er-Jt),Mr=-Dt.friction*.001*ir,Pr=(_r+Mr)/Dt.mass;ir=ir+Pr*jr,er=er+ir*jr}}else{let or=1;Dt.duration>0&&(this._memoizedDuration!==Dt.duration&&(this._memoizedDuration=Dt.duration,Kt.durationProgress>0&&(Kt.elapsedTime=Dt.duration*Kt.durationProgress,rr=Kt.elapsedTime+=et)),or=(Dt.progress||0)+rr/this._memoizedDuration,or=or>1?1:or<0?0:or,Kt.durationProgress=or),er=sr+Dt.easing(or)*(Jt-sr),ir=(er-Kt.lastPosition)/et,Zt=or==1}Kt.lastVelocity=ir,Number.isNaN(er)&&(console.warn("Got NaN while animating:",this),Zt=!0)}Ft&&!Ft[Yt].done&&(Zt=!1),Zt?Kt.done=!0:dt=!1,Kt.setValue(er,Dt.round)&&(kt=!0)});const Ut=getAnimated(this),Ht=Ut.getValue();if(dt){const Kt=getFluidValue($t.to);(Ht!==Kt||kt)&&!Dt.decay?(Ut.setValue(Kt),this._onChange(Kt)):kt&&Dt.decay&&this._onChange(Ht),this._stop()}else kt&&this._onChange(Ht)}set(et){return raf.batchedUpdates(()=>{this._stop(),this._focus(et),this._set(et)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:et,config:dt}=this.animation;raf.batchedUpdates(()=>{this._onStart(),dt.decay||this._set(et,!1),this._stop()})}return this}update(et){return(this.queue||(this.queue=[])).push(et),this}start(et,dt){let kt;return is.und(et)?(kt=this.queue||[],this.queue=[]):kt=[is.obj(et)?et:{...dt,to:et}],Promise.all(kt.map($t=>this._update($t))).then($t=>getCombinedResult(this,$t))}stop(et){const{to:dt}=this.animation;return this._focus(this.get()),stopAsync(this._state,et&&this._lastCallId),raf.batchedUpdates(()=>this._stop(dt,et)),this}reset(){this._update({reset:!0})}eventObserved(et){et.type=="change"?this._start():et.type=="priority"&&(this.priority=et.priority+1)}_prepareNode(et){const dt=this.key||"";let{to:kt,from:$t}=et;kt=is.obj(kt)?kt[dt]:kt,(kt==null||isAsyncTo(kt))&&(kt=void 0),$t=is.obj($t)?$t[dt]:$t,$t==null&&($t=void 0);const Tt={to:kt,from:$t};return hasAnimated(this)||(et.reverse&&([kt,$t]=[$t,kt]),$t=getFluidValue($t),is.und($t)?getAnimated(this)||this._set(kt):this._set($t)),Tt}_update({...et},dt){const{key:kt,defaultProps:$t}=this;et.default&&Object.assign($t,getDefaultProps(et,(Ft,Ut)=>/^on/.test(Ut)?resolveProp(Ft,kt):Ft)),mergeActiveFn(this,et,"onProps"),sendEvent(this,"onProps",et,this);const Tt=this._prepareNode(et);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Dt=this._state;return scheduleProps(++this._lastCallId,{key:kt,props:et,defaultProps:$t,state:Dt,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(Dt.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(Dt.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,Tt)}}).then(Ft=>{if(et.loop&&Ft.finished&&!(dt&&Ft.noop)){const Ut=createLoopUpdate(et);if(Ut)return this._update(Ut,!0)}return Ft})}_merge(et,dt,kt){if(dt.cancel)return this.stop(!0),kt(getCancelledResult(this));const $t=!is.und(et.to),Tt=!is.und(et.from);if($t||Tt)if(dt.callId>this._lastToId)this._lastToId=dt.callId;else return kt(getCancelledResult(this));const{key:Dt,defaultProps:Ft,animation:Ut}=this,{to:Ht,from:Kt}=Ut;let{to:Yt=Ht,from:Jt=Kt}=et;Tt&&!$t&&(!dt.default||is.und(Yt))&&(Yt=Jt),dt.reverse&&([Yt,Jt]=[Jt,Yt]);const Zt=!isEqual(Jt,Kt);Zt&&(Ut.from=Jt),Jt=getFluidValue(Jt);const er=!isEqual(Yt,Ht);er&&this._focus(Yt);const rr=isAsyncTo(dt.to),{config:sr}=Ut,{decay:nr,velocity:ir}=sr;($t||Tt)&&(sr.velocity=0),dt.config&&!rr&&mergeConfig(sr,callProp(dt.config,Dt),dt.config!==Ft.config?callProp(Ft.config,Dt):void 0);let lr=getAnimated(this);if(!lr||is.und(Yt))return kt(getFinishedResult(this,!0));const or=is.und(dt.reset)?Tt&&!dt.default:!is.und(Jt)&&matchProp(dt.reset,Dt),cr=or?Jt:this.get(),dr=computeGoal(Yt),ur=is.num(dr)||is.arr(dr)||isAnimatedString(dr),pr=!rr&&(!ur||matchProp(Ft.immediate||dt.immediate,Dt));if(er){const br=getAnimatedType(Yt);if(br!==lr.constructor)if(pr)lr=this._set(dr);else throw Error(`Cannot animate between ${lr.constructor.name} and ${br.name}, as the "to" prop suggests`)}const mr=lr.constructor;let jr=hasFluidValue(Yt),Rr=!1;if(!jr){const br=or||!hasAnimated(this)&&Zt;(er||br)&&(Rr=isEqual(computeGoal(cr),dr),jr=!Rr),(!isEqual(Ut.immediate,pr)&&!pr||!isEqual(sr.decay,nr)||!isEqual(sr.velocity,ir))&&(jr=!0)}if(Rr&&isAnimating(this)&&(Ut.changed&&!or?jr=!0:jr||this._stop(Ht)),!rr&&((jr||hasFluidValue(Ht))&&(Ut.values=lr.getPayload(),Ut.toValues=hasFluidValue(Yt)?null:mr==AnimatedString?[1]:toArray(dr)),Ut.immediate!=pr&&(Ut.immediate=pr,!pr&&!or&&this._set(Ht)),jr)){const{onRest:br}=Ut;each(ACTIVE_EVENTS,Mr=>mergeActiveFn(this,dt,Mr));const _r=getFinishedResult(this,checkFinished(this,Ht));flushCalls(this._pendingCalls,_r),this._pendingCalls.add(kt),Ut.changed&&raf.batchedUpdates(()=>{var Mr;Ut.changed=!or,br==null||br(_r,this),or?callProp(Ft.onRest,_r):(Mr=Ut.onStart)==null||Mr.call(Ut,_r,this)})}or&&this._set(cr),rr?kt(runAsync(dt.to,dt,this._state,this)):jr?this._start():isAnimating(this)&&!er?this._pendingCalls.add(kt):kt(getNoopResult(cr))}_focus(et){const dt=this.animation;et!==dt.to&&(getFluidObservers(this)&&this._detach(),dt.to=et,getFluidObservers(this)&&this._attach())}_attach(){let et=0;const{to:dt}=this.animation;hasFluidValue(dt)&&(addFluidObserver(dt,this),isFrameValue(dt)&&(et=dt.priority+1)),this.priority=et}_detach(){const{to:et}=this.animation;hasFluidValue(et)&&removeFluidObserver(et,this)}_set(et,dt=!0){const kt=getFluidValue(et);if(!is.und(kt)){const $t=getAnimated(this);if(!$t||!isEqual(kt,$t.getValue())){const Tt=getAnimatedType(kt);!$t||$t.constructor!=Tt?setAnimated(this,Tt.create(kt)):$t.setValue(kt),$t&&raf.batchedUpdates(()=>{this._onChange(kt,dt)})}}return getAnimated(this)}_onStart(){const et=this.animation;et.changed||(et.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,et.to)),this))}_onChange(et,dt){dt||(this._onStart(),callProp(this.animation.onChange,et,this)),callProp(this.defaultProps.onChange,et,this),super._onChange(et,dt)}_start(){const et=this.animation;getAnimated(this).reset(getFluidValue(et.to)),et.immediate||(et.fromValues=et.values.map(dt=>dt.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(et,dt){if(isAnimating(this)){setActiveBit(this,!1);const kt=this.animation;each(kt.values,Tt=>{Tt.done=!0}),kt.toValues&&(kt.onChange=kt.onPause=kt.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const $t=dt?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,et??kt.to));flushCalls(this._pendingCalls,$t),kt.changed&&(kt.changed=!1,sendEvent(this,"onRest",$t,this))}}};function checkFinished(et,dt){const kt=computeGoal(dt),$t=computeGoal(et.get());return isEqual($t,kt)}function createLoopUpdate(et,dt=et.loop,kt=et.to){const $t=callProp(dt);if($t){const Tt=$t!==!0&&inferTo($t),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo(kt)?kt:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate(et){const{to:dt,from:kt}=et=inferTo(et),$t=new Set;return is.obj(dt)&&findDefined(dt,$t),is.obj(kt)&&findDefined(kt,$t),et.keys=$t.size?Array.from($t):null,et}function declareUpdate(et){const dt=createUpdate(et);return is.und(dt.default)&&(dt.default=getDefaultProps(dt)),dt}function findDefined(et,dt){eachProp(et,(kt,$t)=>kt!=null&&dt.add($t))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(et,dt,kt){et.animation[kt]=dt[kt]!==getDefaultProp(dt,kt)?resolveProp(dt[kt],et.key):void 0}function sendEvent(et,dt,...kt){var $t,Tt,Dt,Ft;(Tt=($t=et.animation)[dt])==null||Tt.call($t,...kt),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...kt)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor(et,dt){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),dt&&(this._flush=dt),et&&this.start({default:!0,...et})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(et=>et.idle&&!et.isDelayed&&!et.isPaused)}get item(){return this._item}set item(et){this._item=et}get(){const et={};return this.each((dt,kt)=>et[kt]=dt.get()),et}set(et){for(const dt in et){const kt=et[dt];is.und(kt)||this.springs[dt].set(kt)}}update(et){return et&&this.queue.push(createUpdate(et)),this}start(et){let{queue:dt}=this;return et?dt=toArray(et).map(createUpdate):this.queue=[],this._flush?this._flush(this,dt):(prepareKeys(this,dt),flushUpdateQueue(this,dt))}stop(et,dt){if(et!==!!et&&(dt=et),dt){const kt=this.springs;each(toArray(dt),$t=>kt[$t].stop(!!et))}else stopAsync(this._state,this._lastAsyncId),this.each(kt=>kt.stop(!!et));return this}pause(et){if(is.und(et))this.start({pause:!0});else{const dt=this.springs;each(toArray(et),kt=>dt[kt].pause())}return this}resume(et){if(is.und(et))this.start({pause:!1});else{const dt=this.springs;each(toArray(et),kt=>dt[kt].resume())}return this}each(et){eachProp(this.springs,et)}_onFrame(){const{onStart:et,onChange:dt,onRest:kt}=this._events,$t=this._active.size>0,Tt=this._changed.size>0;($t&&!this._started||Tt&&!this._started)&&(this._started=!0,flush(et,([Ut,Ht])=>{Ht.value=this.get(),Ut(Ht,this,this._item)}));const Dt=!$t&&this._started,Ft=Tt||Dt&&kt.size?this.get():null;Tt&&dt.size&&flush(dt,([Ut,Ht])=>{Ht.value=Ft,Ut(Ht,this,this._item)}),Dt&&(this._started=!1,flush(kt,([Ut,Ht])=>{Ht.value=Ft,Ut(Ht,this,this._item)}))}eventObserved(et){if(et.type=="change")this._changed.add(et.parent),et.idle||this._active.add(et.parent);else if(et.type=="idle")this._active.delete(et.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(et,dt){return Promise.all(dt.map(kt=>flushUpdate(et,kt))).then(kt=>getCombinedResult(et,kt))}async function flushUpdate(et,dt,kt){const{keys:$t,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is.arr(Tt)||is.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each(BATCHED_EVENTS,sr=>{const nr=dt[sr];if(is.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:lr,cancelled:or})=>{const cr=ir.get(nr);cr?(lr||(cr.finished=!1),or&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:lr||!1,cancelled:or||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=($t||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop,resume:noop,start(sr,nr){er?(stopAsync(Jt,et._lastAsyncId),nr(getCancelledResult(et))):(sr.onRest=Ut,nr(runAsync(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult(et,await Promise.all(Zt));if(Ft&&rr.finished&&!(kt&&rr.noop)){const sr=createLoopUpdate(dt,Ft,Tt);if(sr)return prepareKeys(et,[sr]),flushUpdate(et,sr,!0)}return Ht&&raf.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings(et,dt){const kt={...et.springs};return dt&&each(toArray(dt),$t=>{is.und($t.keys)&&($t=createUpdate($t)),is.obj($t.to)||($t={...$t,to:void 0}),prepareSprings(kt,$t,Tt=>createSpring(Tt))}),setSprings(et,kt),kt}function setSprings(et,dt){eachProp(dt,(kt,$t)=>{et.springs[$t]||(et.springs[$t]=kt,addFluidObserver(kt,et))})}function createSpring(et,dt){const kt=new SpringValue;return kt.key=et,dt&&addFluidObserver(kt,dt),kt}function prepareSprings(et,dt,kt){dt.keys&&each(dt.keys,$t=>{(et[$t]||(et[$t]=kt($t)))._prepareNode(dt)})}function prepareKeys(et,dt){each(dt,kt=>{prepareSprings(et.springs,kt,$t=>createSpring($t,et))})}var SpringContext=reactExports.createContext({pause:!1,immediate:!1}),SpringRef=()=>{const et=[],dt=function($t){deprecateDirectCall();const Tt=[];return each(et,(Dt,Ft)=>{if(is.und($t))Tt.push(Dt.start());else{const Ut=kt($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function($t){et.includes($t)||et.push($t)},dt.delete=function($t){const Tt=et.indexOf($t);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each(et,$t=>$t.pause(...arguments)),this},dt.resume=function(){return each(et,$t=>$t.resume(...arguments)),this},dt.set=function($t){each(et,(Tt,Dt)=>{const Ft=is.fun($t)?$t(Dt,Tt):$t;Ft&&Tt.set(Ft)})},dt.start=function($t){const Tt=[];return each(et,(Dt,Ft)=>{if(is.und($t))Tt.push(Dt.start());else{const Ut=this._getProps($t,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each(et,$t=>$t.stop(...arguments)),this},dt.update=function($t){return each(et,(Tt,Dt)=>Tt.update(this._getProps($t,Tt,Dt))),this};const kt=function($t,Tt,Dt){return is.fun($t)?$t(Dt,Tt):$t};return dt._getProps=kt,dt};function useSprings(et,dt,kt){const $t=is.fun(dt)&&dt;$t&&!kt&&(kt=[]);const Tt=reactExports.useMemo(()=>$t||arguments.length==3?SpringRef():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,lr){const or=getSprings(ir,lr);return Dt.current>0&&!Ut.queue.length&&!Object.keys(or).some(dr=>!ir.springs[dr])?flushUpdateQueue(ir,lr):new Promise(dr=>{setSprings(ir,or),Ut.queue.push(()=>{dr(flushUpdateQueue(ir,lr))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev(et)||0;reactExports.useMemo(()=>{each(Ht.current.slice(et,Yt),ir=>{detachRefs(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},kt);function Jt(ir,lr){for(let or=ir;or<lr;or++){const cr=Ht.current[or]||(Ht.current[or]=new Controller(null,Ut.flush)),dr=$t?$t(or,cr):dt[or];dr&&(Kt.current[or]=declareUpdate(dr))}}const Zt=Ht.current.map((ir,lr)=>getSprings(ir,Kt.current[lr])),er=reactExports.useContext(SpringContext),rr=usePrev(er),sr=er!==rr&&hasProps(er);useIsomorphicLayoutEffect(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each(ir,lr=>lr())),each(Ht.current,(lr,or)=>{Tt==null||Tt.add(lr),sr&&lr.start({default:er});const cr=Kt.current[or];cr&&(replaceRef(lr,cr.ref),lr.ref?lr.queue.push(cr):lr.start(cr))})}),useOnce(()=>()=>{each(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring(et,dt){const kt=is.fun(et),[[$t],Tt]=useSprings(1,kt?et:[et],kt?dt||[]:dt);return kt||arguments.length==2?[$t,Tt]:$t}var Interpolation=class extends FrameValue{constructor(et,dt){super(),this.source=et,this.idle=!0,this._active=new Set,this.calc=createInterpolator(...dt);const kt=this._get(),$t=getAnimatedType(kt);setAnimated(this,$t.create(kt))}advance(et){const dt=this._get(),kt=this.get();isEqual(dt,kt)||(getAnimated(this).setValue(dt),this._onChange(dt,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const et=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...et)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),et=>{et.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let et=1;each(toArray(this.source),dt=>{hasFluidValue(dt)&&addFluidObserver(dt,this),isFrameValue(dt)&&(dt.idle||this._active.add(dt),et=Math.max(et,dt.priority+1))}),this.priority=et,this._start()}_detach(){each(toArray(this.source),et=>{hasFluidValue(et)&&removeFluidObserver(et,this)}),this._active.clear(),becomeIdle(this)}eventObserved(et){et.type=="change"?et.idle?this.advance():(this._active.add(et.parent),this._start()):et.type=="idle"?this._active.delete(et.parent):et.type=="priority"&&(this.priority=toArray(this.source).reduce((dt,kt)=>Math.max(dt,(isFrameValue(kt)?kt.priority:0)+1),0))}};function isIdle(et){return et.idle!==!1}function checkIdle(et){return!et.size||Array.from(et).every(isIdle)}function becomeIdle(et){et.idle||(et.idle=!0,each(getPayload(et),dt=>{dt.done=!0}),callFluidObservers(et,{type:"idle",parent:et}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(et,dt)=>new Interpolation(et,dt)});var isCustomPropRE=/^--/;function dangerousStyleValue(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE.test(et)&&!(isUnitlessNumber.hasOwnProperty(et)&&isUnitlessNumber[et])?dt+"px":(""+dt).trim()}var attributeCache={};function applyAnimatedValues(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const kt=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:$t,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>kt||et.hasAttribute(Zt)?Zt:attributeCache[Zt]||(attributeCache[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue(Zt,Tt[Zt]);isCustomPropRE.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),$t!==void 0&&(et.className=$t),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce((et,dt)=>(prefixes.forEach(kt=>et[prefixKey(kt,dt)]=et[dt]),et),isUnitlessNumber);var domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=(et,dt)=>is.num(et)&&et!==0?et+dt:et,isValueIdentity=(et,dt)=>is.arr(et)?et.every(kt=>isValueIdentity(kt,dt)):is.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle=class extends AnimatedObject{constructor({x:et,y:dt,z:kt,...$t}){const Tt=[],Dt=[];(et||dt||kt)&&(Tt.push([et||0,dt||0,kt||0]),Dt.push(Ft=>[`translate3d(${Ft.map(Ut=>addUnit(Ut,"px")).join(",")})`,isValueIdentity(Ft,0)])),eachProp($t,(Ft,Ut)=>{if(Ut==="transform")Tt.push([Ft||""]),Dt.push(Ht=>[Ht,Ht===""]);else if(domTransforms.test(Ut)){if(delete $t[Ut],is.und(Ft))return;const Ht=pxTransforms.test(Ut)?"px":degTransforms.test(Ut)?"deg":"";Tt.push(toArray(Ft)),Dt.push(Ut==="rotate3d"?([Kt,Yt,Jt,Zt])=>[`rotate3d(${Kt},${Yt},${Jt},${addUnit(Zt,Ht)})`,isValueIdentity(Zt,0)]:Kt=>[`${Ut}(${Kt.map(Yt=>addUnit(Yt,Ht)).join(",")})`,isValueIdentity(Kt,Ut.startsWith("scale")?1:0)])}}),Tt.length&&($t.transform=new FluidTransform(Tt,Dt)),super($t)}},FluidTransform=class extends FluidValue{constructor(et,dt){super(),this.inputs=et,this.transforms=dt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let et="",dt=!0;return each(this.inputs,(kt,$t)=>{const Tt=getFluidValue(kt[0]),[Dt,Ft]=this.transforms[$t](is.arr(Tt)?Tt:kt.map(getFluidValue));et+=" "+Dt,dt=dt&&Ft}),dt?"none":et}observerAdded(et){et==1&&each(this.inputs,dt=>each(dt,kt=>hasFluidValue(kt)&&addFluidObserver(kt,this)))}observerRemoved(et){et==0&&each(this.inputs,dt=>each(dt,kt=>hasFluidValue(kt)&&removeFluidObserver(kt,this)))}eventObserved(et){et.type=="change"&&(this._value=null),callFluidObservers(this,et)}},primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2,colors:colors2});var host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:et=>new AnimatedStyle(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...kt})=>kt}),animated=host.animated;function g(){return g=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},g.apply(null,arguments)}var k$1={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0},W=function(et){var dt=typeof et;return reactExports.isValidElement(et)||dt==="string"||dt==="function"||dt==="object"},v$1=function(et){var dt=typeof et;return dt==="string"||dt==="function"},b$1=function(et){return et.type==="circle"},w=function(et){return et.type==="dot"},z$1=function(et){return et.type==="rect"},P=function(et){var dt=et.data,kt=et.annotations,$t=et.getPosition,Tt=et.getDimensions;return kt.reduce(function(Dt,Ft){var Ut=Ft.offset||0;return[].concat(Dt,o$1(dt,Ft.match).map(function(Ht){var Kt=$t(Ht),Yt=Tt(Ht);return(b$1(Ft)||z$1(Ft))&&(Yt.size=Yt.size+2*Ut,Yt.width=Yt.width+2*Ut,Yt.height=Yt.height+2*Ut),g({},a(Ft,["match","offset"]),Kt,Yt,{size:Ft.size||Yt.size,datum:Ht})}))},[])},C$1=function(et,dt,kt,$t){var Tt=Math.atan2($t-dt,kt-et);return ht(ct(Tt))},S$1=function(et){var dt,kt,$t=et.x,Tt=et.y,Dt=et.noteX,Ft=et.noteY,Ut=et.noteWidth,Ht=Ut===void 0?k$1.noteWidth:Ut,Kt=et.noteTextOffset,Yt=Kt===void 0?k$1.noteTextOffset:Kt;if(e(Dt))dt=$t+Dt;else{if(Dt.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");dt=Dt.abs}if(e(Ft))kt=Tt+Ft;else{if(Ft.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");kt=Ft.abs}var Jt=$t,Zt=Tt,er=C$1($t,Tt,dt,kt);if(b$1(et)){var rr=ft(ut(er),et.size/2);Jt+=rr.x,Zt+=rr.y}if(z$1(et)){var sr=Math.round((er+90)/45)%8;sr===0&&(Zt-=et.height/2),sr===1&&(Jt+=et.width/2,Zt-=et.height/2),sr===2&&(Jt+=et.width/2),sr===3&&(Jt+=et.width/2,Zt+=et.height/2),sr===4&&(Zt+=et.height/2),sr===5&&(Jt-=et.width/2,Zt+=et.height/2),sr===6&&(Jt-=et.width/2),sr===7&&(Jt-=et.width/2,Zt-=et.height/2)}var nr=dt,ir=dt;return(er+90)%360>180?(nr-=Ht,ir-=Ht):ir+=Ht,{points:[[Jt,Zt],[dt,kt],[ir,kt]],text:[nr,kt-Yt],angle:er+90}},O$1=function(et){var dt=et.data,kt=et.annotations,$t=et.getPosition,Tt=et.getDimensions;return reactExports.useMemo(function(){return P({data:dt,annotations:kt,getPosition:$t,getDimensions:Tt})},[dt,kt,$t,Tt])},j$1=function(et){var dt=et.annotations;return reactExports.useMemo(function(){return dt.map(function(kt){return g({},kt,{computed:S$1(g({},kt))})})},[dt])},M=function(et){return reactExports.useMemo(function(){return S$1(et)},[et])},T=function(et){var dt=et.datum,kt=et.x,$t=et.y,Tt=et.note,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=useSpring({x:kt,y:$t,config:Ht,immediate:!Ut});return typeof Tt=="function"?reactExports.createElement(Tt,{x:kt,y:$t,datum:dt}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Dt.annotations.text.outlineWidth>0&&jsxRuntimeExports.jsx(animated.text,{x:Kt.x,y:Kt.y,style:g({},Dt.annotations.text,{strokeLinejoin:"round",strokeWidth:2*Dt.annotations.text.outlineWidth,stroke:Dt.annotations.text.outlineColor}),children:Tt}),jsxRuntimeExports.jsx(animated.text,{x:Kt.x,y:Kt.y,style:a(Dt.annotations.text,["outlineWidth","outlineColor"]),children:Tt})]})},E$1=function(et){var dt=et.points,kt=et.isOutline,$t=kt!==void 0&&kt,Tt=M$3(),Dt=reactExports.useMemo(function(){var Ht=dt[0];return dt.slice(1).reduce(function(Kt,Yt){return Kt+" L"+Yt[0]+","+Yt[1]},"M"+Ht[0]+","+Ht[1])},[dt]),Ft=It(Dt);if($t&&Tt.annotations.link.outlineWidth<=0)return null;var Ut=g({},Tt.annotations.link);return $t&&(Ut.strokeLinecap="square",Ut.strokeWidth=Tt.annotations.link.strokeWidth+2*Tt.annotations.link.outlineWidth,Ut.stroke=Tt.annotations.link.outlineColor,Ut.opacity=Tt.annotations.link.outlineOpacity),jsxRuntimeExports.jsx(animated.path,{fill:"none",d:Ft,style:Ut})},I=function(et){var dt=et.x,kt=et.y,$t=et.size,Tt=M$3(),Dt=Dr(),Ft=Dt.animate,Ut=Dt.config,Ht=useSpring({x:dt,y:kt,radius:$t/2,config:Ut,immediate:!Ft});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Tt.annotations.outline.outlineWidth>0&&jsxRuntimeExports.jsx(animated.circle,{cx:Ht.x,cy:Ht.y,r:Ht.radius,style:g({},Tt.annotations.outline,{fill:"none",strokeWidth:Tt.annotations.outline.strokeWidth+2*Tt.annotations.outline.outlineWidth,stroke:Tt.annotations.outline.outlineColor,opacity:Tt.annotations.outline.outlineOpacity})}),jsxRuntimeExports.jsx(animated.circle,{cx:Ht.x,cy:Ht.y,r:Ht.radius,style:Tt.annotations.outline})]})},D=function(et){var dt=et.x,kt=et.y,$t=et.size,Tt=$t===void 0?k$1.dotSize:$t,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=useSpring({x:dt,y:kt,radius:Tt/2,config:Ht,immediate:!Ut});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Dt.annotations.outline.outlineWidth>0&&jsxRuntimeExports.jsx(animated.circle,{cx:Kt.x,cy:Kt.y,r:Kt.radius,style:g({},Dt.annotations.outline,{fill:"none",strokeWidth:2*Dt.annotations.outline.outlineWidth,stroke:Dt.annotations.outline.outlineColor,opacity:Dt.annotations.outline.outlineOpacity})}),jsxRuntimeExports.jsx(animated.circle,{cx:Kt.x,cy:Kt.y,r:Kt.radius,style:Dt.annotations.symbol})]})},L$1=function(et){var dt=et.x,kt=et.y,$t=et.width,Tt=et.height,Dt=et.borderRadius,Ft=Dt===void 0?6:Dt,Ut=M$3(),Ht=Dr(),Kt=Ht.animate,Yt=Ht.config,Jt=useSpring({x:dt-$t/2,y:kt-Tt/2,width:$t,height:Tt,config:Yt,immediate:!Kt});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ut.annotations.outline.outlineWidth>0&&jsxRuntimeExports.jsx(animated.rect,{x:Jt.x,y:Jt.y,rx:Ft,ry:Ft,width:Jt.width,height:Jt.height,style:g({},Ut.annotations.outline,{fill:"none",strokeWidth:Ut.annotations.outline.strokeWidth+2*Ut.annotations.outline.outlineWidth,stroke:Ut.annotations.outline.outlineColor,opacity:Ut.annotations.outline.outlineOpacity})}),jsxRuntimeExports.jsx(animated.rect,{x:Jt.x,y:Jt.y,rx:Ft,ry:Ft,width:Jt.width,height:Jt.height,style:Ut.annotations.outline})]})},R=function(et){var dt=et.datum,kt=et.x,$t=et.y,Tt=et.note,Dt=M(et);if(!W(Tt))throw new Error("note should be a valid react element");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(E$1,{points:Dt.points,isOutline:!0}),b$1(et)&&jsxRuntimeExports.jsx(I,{x:kt,y:$t,size:et.size}),w(et)&&jsxRuntimeExports.jsx(D,{x:kt,y:$t,size:et.size}),z$1(et)&&jsxRuntimeExports.jsx(L$1,{x:kt,y:$t,width:et.width,height:et.height,borderRadius:et.borderRadius}),jsxRuntimeExports.jsx(E$1,{points:Dt.points}),jsxRuntimeExports.jsx(T,{datum:dt,x:Dt.text[0],y:Dt.text[1],note:Tt})]})},q=function(et,dt){dt.forEach(function(kt,$t){var Tt=kt[0],Dt=kt[1];$t===0?et.moveTo(Tt,Dt):et.lineTo(Tt,Dt)})},J=function(et,dt){var kt=dt.annotations,$t=dt.theme;kt.length!==0&&(et.save(),kt.forEach(function(Tt){if(!v$1(Tt.note))throw new Error("note is invalid for canvas implementation");$t.annotations.link.outlineWidth>0&&(et.lineCap="square",et.strokeStyle=$t.annotations.link.outlineColor,et.lineWidth=$t.annotations.link.strokeWidth+2*$t.annotations.link.outlineWidth,et.beginPath(),q(et,Tt.computed.points),et.stroke(),et.lineCap="butt"),b$1(Tt)&&$t.annotations.outline.outlineWidth>0&&(et.strokeStyle=$t.annotations.outline.outlineColor,et.lineWidth=$t.annotations.outline.strokeWidth+2*$t.annotations.outline.outlineWidth,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.stroke()),w(Tt)&&$t.annotations.symbol.outlineWidth>0&&(et.strokeStyle=$t.annotations.symbol.outlineColor,et.lineWidth=2*$t.annotations.symbol.outlineWidth,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.stroke()),z$1(Tt)&&$t.annotations.outline.outlineWidth>0&&(et.strokeStyle=$t.annotations.outline.outlineColor,et.lineWidth=$t.annotations.outline.strokeWidth+2*$t.annotations.outline.outlineWidth,et.beginPath(),et.rect(Tt.x-Tt.width/2,Tt.y-Tt.height/2,Tt.width,Tt.height),et.stroke()),et.strokeStyle=$t.annotations.link.stroke,et.lineWidth=$t.annotations.link.strokeWidth,et.beginPath(),q(et,Tt.computed.points),et.stroke(),b$1(Tt)&&(et.strokeStyle=$t.annotations.outline.stroke,et.lineWidth=$t.annotations.outline.strokeWidth,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.stroke()),w(Tt)&&(et.fillStyle=$t.annotations.symbol.fill,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.fill()),z$1(Tt)&&(et.strokeStyle=$t.annotations.outline.stroke,et.lineWidth=$t.annotations.outline.strokeWidth,et.beginPath(),et.rect(Tt.x-Tt.width/2,Tt.y-Tt.height/2,Tt.width,Tt.height),et.stroke()),typeof Tt.note=="function"?Tt.note(et,{datum:Tt.datum,x:Tt.computed.text[0],y:Tt.computed.text[1],theme:$t}):(et.font=$t.annotations.text.fontSize+"px "+$t.annotations.text.fontFamily,et.textAlign="left",et.textBaseline="alphabetic",et.fillStyle=$t.annotations.text.fill,et.strokeStyle=$t.annotations.text.outlineColor,et.lineWidth=2*$t.annotations.text.outlineWidth,$t.annotations.text.outlineWidth>0&&(et.lineJoin="round",et.strokeText(Tt.note,Tt.computed.text[0],Tt.computed.text[1]),et.lineJoin="miter"),et.fillText(Tt.note,Tt.computed.text[0],Tt.computed.text[1]))}),et.restore())};function Se$1(et,dt){(dt==null||dt>et.length)&&(dt=et.length);for(var kt=0,$t=Array(dt);kt<dt;kt++)$t[kt]=et[kt];return $t}function qe(et,dt){var kt=typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if(kt)return(kt=kt.call(et)).next.bind(kt);if(Array.isArray(et)||(kt=function(Tt,Dt){if(Tt){if(typeof Tt=="string")return Se$1(Tt,Dt);var Ft={}.toString.call(Tt).slice(8,-1);return Ft==="Object"&&Tt.constructor&&(Ft=Tt.constructor.name),Ft==="Map"||Ft==="Set"?Array.from(Tt):Ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ft)?Se$1(Tt,Dt):void 0}}(et))||dt&&et&&typeof et.length=="number"){kt&&(et=kt);var $t=0;return function(){return $t>=et.length?{done:!0}:{done:!1,value:et[$t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce$1(){return Ce$1=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},Ce$1.apply(null,arguments)}var Ge={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:e$1,accent:r$1,dark2:n,paired:t,pastel1:o$2,pastel2:i,set1:u$1,set2:l,set3:a$2,tableau10:c$2},Ve$1=Object.keys(Ge),Pe$1={brown_blueGreen:scheme$q,purpleRed_green:scheme$p,pink_yellowGreen:scheme$o,purple_orange:scheme$n,red_blue:scheme$m,red_grey:scheme$l,red_yellow_blue:scheme$k,red_yellow_green:scheme$j,spectral:scheme$i},Re$1=Object.keys(Pe$1),Ue={brown_blueGreen:y$1,purpleRed_green:_$1,pink_yellowGreen:w$2,purple_orange:k$2,red_blue:j$3,red_grey:z$3,red_yellow_blue:A$2,red_yellow_green:E$3,spectral:O$3},De$1={blues:scheme$5,greens:scheme$4,greys:scheme$3,oranges:scheme,purples:scheme$2,reds:scheme$1,blue_green:scheme$h,blue_purple:scheme$g,green_blue:scheme$f,orange_red:scheme$e,purple_blue_green:scheme$d,purple_blue:scheme$c,purple_red:scheme$b,red_purple:scheme$a,yellow_green_blue:scheme$9,yellow_green:scheme$8,yellow_orange_brown:scheme$7,yellow_orange_red:scheme$6},Me$1=Object.keys(De$1),Te$1={blues:K,greens:L$3,greys:N,oranges:Q$2,purples:W$3,reds:X$2,turbo:Y$2,viridis:Z$2,inferno,magma,plasma,cividis:te$1,warm,cool,cubehelixDefault:ue$1,blue_green:le$1,blue_purple:ae$1,green_blue:ce$1,orange_red:se$1,purple_blue_green:fe$1,purple_blue:pe$1,purple_red:de$1,red_purple:me$1,yellow_green_blue:ge$1,yellow_green:he$1,yellow_orange_brown:be$1,yellow_orange_red:ve$1},$e=Ce$1({},Ge,Pe$1,De$1),Fe$1=function(et){return Ve$1.includes(et)},He$1=function(et){return Re$1.includes(et)},Je=function(et){return Me$1.includes(et)},Ke={rainbow:ye$1,sinebow:_e};Ce$1({},Ue,Te$1,Ke);var Qe=function(et){return et.theme!==void 0},We$1=function(et){return et.from!==void 0},Xe$1=function(et,dt){if(typeof et=="function")return et;if(je(et)){if(Qe(et)){if(dt===void 0)throw new Error("Unable to use color from theme as no theme was provided");var kt=ke$1(dt,et.theme);if(kt===void 0)throw new Error("Color from theme is undefined at path: '"+et.theme+"'");return function(){return kt}}if(We$1(et)){var $t=function(Ht){return ke$1(Ht,et.from)};if(Array.isArray(et.modifiers)){for(var Tt,Dt=[],Ft=function(){var Ht=Tt.value,Kt=Ht[0],Yt=Ht[1];if(Kt==="brighter")Dt.push(function(Jt){return Jt.brighter(Yt)});else if(Kt==="darker")Dt.push(function(Jt){return Jt.darker(Yt)});else{if(Kt!=="opacity")throw new Error("Invalid color modifier: '"+Kt+"', must be one of: 'brighter', 'darker', 'opacity'");Dt.push(function(Jt){return Jt.opacity=Yt,Jt})}},Ut=qe(et.modifiers);!(Tt=Ut()).done;)Ft();return Dt.length===0?$t:function(Ht){return Dt.reduce(function(Kt,Yt){return Yt(Kt)},rgb$5($t(Ht))).toString()}}return $t}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return et}},Ye$1=function(et,dt){return reactExports.useMemo(function(){return Xe$1(et,dt)},[et,dt])},gr=function(et,dt){if(typeof et=="function")return et;var kt=typeof dt=="function"?dt:function(Jt){return ke$1(Jt,dt)};if(Array.isArray(et)){var $t=ordinal(et),Tt=function(Jt){return $t(kt(Jt))};return Tt.scale=$t,Tt}if(je(et)){if(function(Jt){return Jt.datum!==void 0}(et))return function(Jt){return ke$1(Jt,et.datum)};if(function(Jt){return Jt.scheme!==void 0}(et)){if(Fe$1(et.scheme)){var Dt=ordinal($e[et.scheme]),Ft=function(Jt){return Dt(kt(Jt))};return Ft.scale=Dt,Ft}if(He$1(et.scheme)){if(et.size!==void 0&&(et.size<3||et.size>11))throw new Error("Invalid size '"+et.size+"' for diverging color scheme '"+et.scheme+"', must be between 3~11");var Ut=ordinal($e[et.scheme][et.size||11]),Ht=function(Jt){return Ut(kt(Jt))};return Ht.scale=Ut,Ht}if(Je(et.scheme)){if(et.size!==void 0&&(et.size<3||et.size>9))throw new Error("Invalid size '"+et.size+"' for sequential color scheme '"+et.scheme+"', must be between 3~9");var Kt=ordinal($e[et.scheme][et.size||9]),Yt=function(Jt){return Kt(kt(Jt))};return Yt.scale=Kt,Yt}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return et}},hr=function(et,dt){return reactExports.useMemo(function(){return gr(et,dt)},[et,dt])},v=function(et){var dt=et.x,kt=et.y,$t=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("circle",{r:$t/2,cx:dt+$t/2,cy:kt+$t/2,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,style:{pointerEvents:"none"}})},u=function(et){var dt=et.x,kt=et.y,$t=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("g",{transform:"translate("+dt+","+kt+")",children:jsxRuntimeExports.jsx("path",{d:`
                    M`+$t/2+` 0
                    L`+.8*$t+" "+$t/2+`
                    L`+$t/2+" "+$t+`
                    L`+.2*$t+" "+$t/2+`
                    L`+$t/2+` 0
                `,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,style:{pointerEvents:"none"}})})},p=function(et){var dt=et.x,kt=et.y,$t=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("rect",{x:dt,y:kt,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,width:$t,height:$t,style:{pointerEvents:"none"}})},y=function(et){var dt=et.x,kt=et.y,$t=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("g",{transform:"translate("+dt+","+kt+")",children:jsxRuntimeExports.jsx("path",{d:`
                M`+$t/2+` 0
                L`+$t+" "+$t+`
                L0 `+$t+`
                L`+$t/2+` 0
            `,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,style:{pointerEvents:"none"}})})};function b(){return b=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},b.apply(null,arguments)}var k={translateX:0,translateY:0,padding:0,itemsSpacing:0,itemDirection:"left-to-right",justify:!1,symbolShape:"square",symbolSize:16,symbolSpacing:8},S={top:0,right:0,bottom:0,left:0},A=function(et){var dt,kt=et.direction,$t=et.itemsSpacing,Tt=et.padding,Dt=et.itemCount,Ft=et.itemWidth,Ut=et.itemHeight;if(typeof Tt!="number"&&(typeof(dt=Tt)!="object"||Array.isArray(dt)||dt===null))throw new Error("Invalid property padding, must be one of: number, object");var Ht=typeof Tt=="number"?{top:Tt,right:Tt,bottom:Tt,left:Tt}:b({},S,Tt),Kt=Ht.left+Ht.right,Yt=Ht.top+Ht.bottom,Jt=Ft+Kt,Zt=Ut+Yt,er=(Dt-1)*$t;return kt==="row"?Jt=Ft*Dt+er+Kt:kt==="column"&&(Zt=Ut*Dt+er+Yt),{width:Jt,height:Zt,padding:Ht}},C=function(et){var dt=et.anchor,kt=et.translateX,$t=et.translateY,Tt=et.containerWidth,Dt=et.containerHeight,Ft=et.width,Ut=et.height,Ht=kt,Kt=$t;switch(dt){case"top":Ht+=(Tt-Ft)/2;break;case"top-right":Ht+=Tt-Ft;break;case"right":Ht+=Tt-Ft,Kt+=(Dt-Ut)/2;break;case"bottom-right":Ht+=Tt-Ft,Kt+=Dt-Ut;break;case"bottom":Ht+=(Tt-Ft)/2,Kt+=Dt-Ut;break;case"bottom-left":Kt+=Dt-Ut;break;case"left":Kt+=(Dt-Ut)/2;break;case"center":Ht+=(Tt-Ft)/2,Kt+=(Dt-Ut)/2}return{x:Ht,y:Kt}},z=function(et){var dt,kt,$t,Tt,Dt,Ft,Ut=et.direction,Ht=et.justify,Kt=et.symbolSize,Yt=et.symbolSpacing,Jt=et.width,Zt=et.height;switch(Ut){case"left-to-right":dt=0,kt=(Zt-Kt)/2,Tt=Zt/2,Ft="central",Ht?($t=Jt,Dt="end"):($t=Kt+Yt,Dt="start");break;case"right-to-left":dt=Jt-Kt,kt=(Zt-Kt)/2,Tt=Zt/2,Ft="central",Ht?($t=0,Dt="start"):($t=Jt-Kt-Yt,Dt="end");break;case"top-to-bottom":dt=(Jt-Kt)/2,kt=0,$t=Jt/2,Dt="middle",Ht?(Tt=Zt,Ft="alphabetic"):(Tt=Kt+Yt,Ft="text-before-edge");break;case"bottom-to-top":dt=(Jt-Kt)/2,kt=Zt-Kt,$t=Jt/2,Dt="middle",Ht?(Tt=0,Ft="text-before-edge"):(Tt=Zt-Kt-Yt,Ft="alphabetic")}return{symbolX:dt,symbolY:kt,labelX:$t,labelY:Tt,labelAnchor:Dt,labelAlignment:Ft}},O={circle:v,diamond:u,square:p,triangle:y},B=function(et){var dt,kt,$t,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt=et.x,er=et.y,rr=et.width,sr=et.height,nr=et.data,ir=et.direction,lr=ir===void 0?k.itemDirection:ir,or=et.justify,cr=or===void 0?k.justify:or,dr=et.textColor,ur=et.background,pr=ur===void 0?"transparent":ur,mr=et.opacity,jr=mr===void 0?1:mr,Rr=et.symbolShape,br=Rr===void 0?k.symbolShape:Rr,_r=et.symbolSize,Mr=_r===void 0?k.symbolSize:_r,Pr=et.symbolSpacing,Or=Pr===void 0?k.symbolSpacing:Pr,kr=et.symbolBorderWidth,Tr=kr===void 0?0:kr,xr=et.symbolBorderColor,wr=xr===void 0?"transparent":xr,zr=et.onClick,Hr=et.onMouseEnter,Yr=et.onMouseLeave,rs=et.toggleSerie,as=et.effects,es=reactExports.useState({}),Xr=es[0],Wr=es[1],cs=M$3(),ns=reactExports.useCallback(function(_s){if(as){var Ms=as.filter(function(Vs){return Vs.on==="hover"}).reduce(function(Vs,Gs){return b({},Vs,Gs.style)},{});Wr(Ms)}Hr==null||Hr(nr,_s)},[Hr,nr,as]),us=reactExports.useCallback(function(_s){if(as){var Ms=as.filter(function(Vs){return Vs.on!=="hover"}).reduce(function(Vs,Gs){return b({},Vs,Gs.style)},{});Wr(Ms)}Yr==null||Yr(nr,_s)},[Yr,nr,as]),fs=z({direction:lr,justify:cr,symbolSize:(dt=Xr.symbolSize)!=null?dt:Mr,symbolSpacing:Or,width:rr,height:sr}),ss=fs.symbolX,ps=fs.symbolY,ls=fs.labelX,js=fs.labelY,$s=fs.labelAnchor,Ds=fs.labelAlignment,Ts=[zr,Hr,Yr,rs].some(function(_s){return _s!==void 0}),As=typeof br=="function"?br:O[br];return jsxRuntimeExports.jsxs("g",{transform:"translate("+Zt+","+er+")",style:{opacity:(kt=Xr.itemOpacity)!=null?kt:jr},children:[jsxRuntimeExports.jsx("rect",{width:rr,height:sr,fill:($t=Xr.itemBackground)!=null?$t:pr,style:{cursor:Ts?"pointer":"auto"},onClick:function(_s){zr==null||zr(nr,_s),rs==null||rs(nr.id)},onMouseEnter:ns,onMouseLeave:us}),reactExports.createElement(As,b({id:nr.id,x:ss,y:ps,size:(Tt=Xr.symbolSize)!=null?Tt:Mr,fill:(Dt=(Ft=nr.fill)!=null?Ft:nr.color)!=null?Dt:"black",borderWidth:(Ut=Xr.symbolBorderWidth)!=null?Ut:Tr,borderColor:(Ht=Xr.symbolBorderColor)!=null?Ht:wr},nr.hidden?cs.legends.hidden.symbol:void 0)),jsxRuntimeExports.jsx(b$2,{textAnchor:$s,style:b({},cs.legends.text,{fill:(Kt=(Yt=(Jt=Xr.itemTextColor)!=null?Jt:dr)!=null?Yt:cs.legends.text.fill)!=null?Kt:"black",dominantBaseline:Ds,pointerEvents:"none",userSelect:"none"},nr.hidden?cs.legends.hidden.text:void 0),x:ls,y:js,children:nr.label})]})},H=function(et){var dt=et.data,kt=et.x,$t=et.y,Tt=et.direction,Dt=et.padding,Ft=Dt===void 0?k.padding:Dt,Ut=et.justify,Ht=et.effects,Kt=et.itemWidth,Yt=et.itemHeight,Jt=et.itemDirection,Zt=Jt===void 0?k.itemDirection:Jt,er=et.itemsSpacing,rr=er===void 0?k.itemsSpacing:er,sr=et.itemTextColor,nr=et.itemBackground,ir=nr===void 0?"transparent":nr,lr=et.itemOpacity,or=lr===void 0?1:lr,cr=et.symbolShape,dr=et.symbolSize,ur=et.symbolSpacing,pr=et.symbolBorderWidth,mr=et.symbolBorderColor,jr=et.onClick,Rr=et.onMouseEnter,br=et.onMouseLeave,_r=et.toggleSerie,Mr=A({itemCount:dt.length,itemWidth:Kt,itemHeight:Yt,itemsSpacing:rr,direction:Tt,padding:Ft}).padding,Pr=Tt==="row"?Kt+rr:0,Or=Tt==="column"?Yt+rr:0;return jsxRuntimeExports.jsx("g",{transform:"translate("+kt+","+$t+")",children:dt.map(function(kr,Tr){return jsxRuntimeExports.jsx(B,{data:kr,x:Tr*Pr+Mr.left,y:Tr*Or+Mr.top,width:Kt,height:Yt,direction:Zt,justify:Ut,effects:Ht,textColor:sr,background:ir,opacity:or,symbolShape:cr,symbolSize:dr,symbolSpacing:ur,symbolBorderWidth:pr,symbolBorderColor:mr,onClick:jr,onMouseEnter:Rr,onMouseLeave:br,toggleSerie:_r},Tr)})})},E=function(et){var dt=et.data,kt=et.containerWidth,$t=et.containerHeight,Tt=et.translateX,Dt=Tt===void 0?k.translateX:Tt,Ft=et.translateY,Ut=Ft===void 0?k.translateY:Ft,Ht=et.anchor,Kt=et.direction,Yt=et.padding,Jt=Yt===void 0?k.padding:Yt,Zt=et.justify,er=et.itemsSpacing,rr=er===void 0?k.itemsSpacing:er,sr=et.itemWidth,nr=et.itemHeight,ir=et.itemDirection,lr=et.itemTextColor,or=et.itemBackground,cr=et.itemOpacity,dr=et.symbolShape,ur=et.symbolSize,pr=et.symbolSpacing,mr=et.symbolBorderWidth,jr=et.symbolBorderColor,Rr=et.onClick,br=et.onMouseEnter,_r=et.onMouseLeave,Mr=et.toggleSerie,Pr=et.effects,Or=A({itemCount:dt.length,itemsSpacing:rr,itemWidth:sr,itemHeight:nr,direction:Kt,padding:Jt}),kr=Or.width,Tr=Or.height,xr=C({anchor:Ht,translateX:Dt,translateY:Ut,containerWidth:kt,containerHeight:$t,width:kr,height:Tr}),wr=xr.x,zr=xr.y;return jsxRuntimeExports.jsx(H,{data:dt,x:wr,y:zr,direction:Kt,padding:Jt,justify:Zt,effects:Pr,itemsSpacing:rr,itemWidth:sr,itemHeight:nr,itemDirection:ir,itemTextColor:lr,itemBackground:or,itemOpacity:cr,symbolShape:dr,symbolSize:ur,symbolSpacing:pr,symbolBorderWidth:mr,symbolBorderColor:jr,onClick:Rr,onMouseEnter:br,onMouseLeave:_r,toggleSerie:typeof Mr=="boolean"?void 0:Mr})},j={start:"left",middle:"center",end:"right"},L=function(et,dt){var kt=dt.data,$t=dt.containerWidth,Tt=dt.containerHeight,Dt=dt.translateX,Ft=Dt===void 0?0:Dt,Ut=dt.translateY,Ht=Ut===void 0?0:Ut,Kt=dt.anchor,Yt=dt.direction,Jt=dt.padding,Zt=Jt===void 0?0:Jt,er=dt.justify,rr=er!==void 0&&er,sr=dt.itemsSpacing,nr=sr===void 0?0:sr,ir=dt.itemWidth,lr=dt.itemHeight,or=dt.itemDirection,cr=or===void 0?"left-to-right":or,dr=dt.itemTextColor,ur=dt.symbolSize,pr=ur===void 0?16:ur,mr=dt.symbolSpacing,jr=mr===void 0?8:mr,Rr=dt.theme,br=A({itemCount:kt.length,itemWidth:ir,itemHeight:lr,itemsSpacing:nr,direction:Yt,padding:Zt}),_r=br.width,Mr=br.height,Pr=br.padding,Or=C({anchor:Kt,translateX:Ft,translateY:Ht,containerWidth:$t,containerHeight:Tt,width:_r,height:Mr}),kr=Or.x,Tr=Or.y,xr=Yt==="row"?ir+nr:0,wr=Yt==="column"?lr+nr:0;et.save(),et.translate(kr,Tr),a$1(et,Rr.legends.text),kt.forEach(function(zr,Hr){var Yr,rs=Hr*xr+Pr.left,as=Hr*wr+Pr.top,es=z({direction:cr,justify:rr,symbolSize:pr,symbolSpacing:jr,width:ir,height:lr}),Xr=es.symbolX,Wr=es.symbolY,cs=es.labelX,ns=es.labelY,us=es.labelAnchor,fs=es.labelAlignment;et.fillStyle=(Yr=zr.color)!=null?Yr:"black",et.fillRect(rs+Xr,as+Wr,pr,pr),et.textAlign=j[us],fs==="central"&&(et.textBaseline="middle"),d(et,b({},Rr.legends.text,{fill:dr??Rr.legends.text.fill}),String(zr.label),rs+cs,as+ns)}),et.restore()},o=function(et,dt,kt,$t,Tt,Dt){Dt>0?(et.moveTo(dt+Dt,kt),et.lineTo(dt+$t-Dt,kt),et.quadraticCurveTo(dt+$t,kt,dt+$t,kt+Dt),et.lineTo(dt+$t,kt+Tt-Dt),et.quadraticCurveTo(dt+$t,kt+Tt,dt+$t-Dt,kt+Tt),et.lineTo(dt+Dt,kt+Tt),et.quadraticCurveTo(dt,kt+Tt,dt,kt+Tt-Dt),et.lineTo(dt,kt+Dt),et.quadraticCurveTo(dt,kt,dt+Dt,kt),et.closePath()):et.rect(dt,kt,$t,Tt)};function Q(){return Q=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var kt=arguments[dt];for(var $t in kt)({}).hasOwnProperty.call(kt,$t)&&(et[$t]=kt[$t])}return et},Q.apply(null,arguments)}function U(et,dt){if(et==null)return{};var kt={};for(var $t in et)if({}.hasOwnProperty.call(et,$t)){if(dt.indexOf($t)!==-1)continue;kt[$t]=et[$t]}return kt}var Z,$=function(et){var dt=et.bars,kt=et.annotations,$t=O$1({data:dt,annotations:kt,getPosition:function(Tt){return{x:Tt.x+Tt.width/2,y:Tt.y+Tt.height/2}},getDimensions:function(Tt){var Dt=Tt.height,Ft=Tt.width;return{width:Ft,height:Dt,size:Math.max(Ft,Dt)}}});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$t.map(function(Tt,Dt){return jsxRuntimeExports.jsx(R,Q({},Tt),Dt)})})},ee=function(et){var dt=et.width,kt=et.height,$t=et.legends,Tt=et.toggleSerie;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$t.map(function(Dt,Ft){var Ut,Ht=Dt[0],Kt=Dt[1];return jsxRuntimeExports.jsx(E,Q({},Ht,{containerWidth:dt,containerHeight:kt,data:(Ut=Ht.data)!=null?Ut:Kt,toggleSerie:Ht.toggleSerie&&Ht.dataFrom==="keys"?Tt:void 0}),Ft)})})},te=["data"],ae=function(et){var dt,kt=et.bar,$t=kt.data,Tt=U(kt,te),Dt=et.style,Ft=Dt.borderColor,Ut=Dt.color,Ht=Dt.height,Kt=Dt.labelColor,Yt=Dt.labelOpacity,Jt=Dt.labelX,Zt=Dt.labelY,er=Dt.transform,rr=Dt.width,sr=Dt.textAnchor,nr=et.borderRadius,ir=et.borderWidth,lr=et.label,or=et.shouldRenderLabel,cr=et.isInteractive,dr=et.onClick,ur=et.onMouseEnter,pr=et.onMouseLeave,mr=et.tooltip,jr=et.isFocusable,Rr=et.ariaLabel,br=et.ariaLabelledBy,_r=et.ariaDescribedBy,Mr=et.ariaDisabled,Pr=et.ariaHidden,Or=M$3(),kr=z$4(),Tr=kr.showTooltipFromEvent,xr=kr.showTooltipAt,wr=kr.hideTooltip,zr=reactExports.useMemo(function(){return function(){return reactExports.createElement(mr,Q({},Tt,$t))}},[mr,Tt,$t]),Hr=reactExports.useCallback(function(Wr){dr==null||dr(Q({color:Tt.color},$t),Wr)},[Tt,$t,dr]),Yr=reactExports.useCallback(function(Wr){return Tr(zr(),Wr)},[Tr,zr]),rs=reactExports.useCallback(function(Wr){ur==null||ur($t,Wr),Tr(zr(),Wr)},[$t,ur,Tr,zr]),as=reactExports.useCallback(function(Wr){pr==null||pr($t,Wr),wr()},[$t,wr,pr]),es=reactExports.useCallback(function(){xr(zr(),[Tt.absX+Tt.width/2,Tt.absY])},[xr,zr,Tt]),Xr=reactExports.useCallback(function(){wr()},[wr]);return jsxRuntimeExports.jsxs(animated$1.g,{transform:er,children:[jsxRuntimeExports.jsx(animated$1.rect,{width:to$1(rr,function(Wr){return Math.max(Wr,0)}),height:to$1(Ht,function(Wr){return Math.max(Wr,0)}),rx:nr,ry:nr,fill:(dt=$t.fill)!=null?dt:Ut,strokeWidth:ir,stroke:Ft,focusable:jr,tabIndex:jr?0:void 0,"aria-label":Rr?Rr($t):void 0,"aria-labelledby":br?br($t):void 0,"aria-describedby":_r?_r($t):void 0,"aria-disabled":Mr?Mr($t):void 0,"aria-hidden":Pr?Pr($t):void 0,onMouseEnter:cr?rs:void 0,onMouseMove:cr?Yr:void 0,onMouseLeave:cr?as:void 0,onClick:cr?Hr:void 0,onFocus:cr&&jr?es:void 0,onBlur:cr&&jr?Xr:void 0,"data-testid":"bar.item."+$t.id+"."+$t.index}),or&&jsxRuntimeExports.jsx(b$2,{x:Jt,y:Zt,textAnchor:sr,dominantBaseline:"central",fillOpacity:Yt,style:Q({},Or.labels.text,{pointerEvents:"none",fill:Kt}),children:lr})]})},ie=["color","label"],ne=function(et){var dt=et.color,kt=et.label,$t=U(et,ie);return jsxRuntimeExports.jsx(T$3,{id:kt,value:$t.formattedValue,enableChip:!0,color:dt})},le={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",valueScale:{type:"linear",nice:!0,round:!1},indexScale:{type:"band",round:!1},padding:.1,innerPadding:0,enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:ne,tooltipLabel:function(et){return et.id+" - "+et.indexValue},legends:[],initialHiddenIds:[],annotations:[],enableTotals:!1,totalsOffset:10},re=Q({},le,{layers:["grid","axes","bars","totals","markers","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},barComponent:ae,defs:[],fill:[],markers:[],animate:!0,animateOnMount:!1,motionConfig:"default",role:"img",isFocusable:!1}),oe=Q({},le,{layers:["grid","axes","bars","totals","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},renderBar:function(et,dt){var kt=dt.bar,$t=kt.color,Tt=kt.height,Dt=kt.width,Ft=kt.x,Ut=kt.y,Ht=dt.borderColor,Kt=dt.borderRadius,Yt=dt.borderWidth,Jt=dt.label,Zt=dt.shouldRenderLabel,er=dt.labelStyle,rr=dt.labelX,sr=dt.labelY,nr=dt.textAnchor;et.fillStyle=$t,Yt>0&&(et.strokeStyle=Ht,et.lineWidth=Yt),et.beginPath(),o(et,Ft,Ut,Dt,Tt,Math.min(Kt,Tt)),et.fill(),Yt>0&&et.stroke(),Zt&&(et.textBaseline="middle",et.textAlign=nr==="middle"?"center":nr,d(et,er,Jt,Ft+rr,Ut+sr))},pixelRatio:typeof window<"u"&&(Z=window.devicePixelRatio)!=null?Z:1}),de=function(et,dt,kt,$t,Tt,Dt){return pn($t,{all:et.map(dt),min:0,max:0},Tt,Dt).padding(kt)},ue=function(et,dt){return et.map(function(kt){return Q({},dt.reduce(function($t,Tt){return $t[Tt]=null,$t},{}),kt)})},se=function(et){return Object.keys(et).reduce(function(dt,kt){return et[kt]&&(dt[kt]=et[kt]),dt},{})},ce=function(et){return[et,Number(et)]};function he(et,dt,kt,$t){return et===void 0&&(et=le.layout),kt===void 0&&(kt=le.labelPosition),$t===void 0&&($t=le.labelOffset),function(Tt,Dt){var Ft=$t*(dt?-1:1);if(et==="horizontal"){var Ut=Tt/2;return kt==="start"?Ut=dt?Tt:0:kt==="end"&&(Ut=dt?0:Tt),{labelX:Ut+Ft,labelY:Dt/2,textAnchor:kt==="middle"?"middle":dt?"end":"start"}}var Ht=Dt/2;return kt==="start"?Ht=dt?0:Dt:kt==="end"&&(Ht=dt?Dt:0),{labelX:Tt/2,labelY:Ht-Ft,textAnchor:"middle"}}}var fe=["layout","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],be=function(et,dt){return et>dt},ge=function(et,dt){return et<dt},ve=function(et,dt){return Array.from(" ".repeat(dt-et),function(kt,$t){return et+$t})},me=function(et){return be(et,0)?0:et},pe=function(et,dt,kt,$t){var Tt=et.data,Dt=et.formatValue,Ft=et.getColor,Ut=et.getIndex,Ht=et.getTooltipLabel,Kt=et.innerPadding,Yt=Kt===void 0?0:Kt,Jt=et.keys,Zt=et.xScale,er=et.yScale,rr=et.margin,sr=kt?ge:be,nr=Tt.map(se),ir=[];return Jt.forEach(function(lr,or){return ve(0,Zt.domain().length).forEach(function(cr){var dr,ur,pr,mr=ce(Tt[cr][lr]),jr=mr[0],Rr=mr[1],br=Ut(Tt[cr]),_r=((dr=Zt(br))!=null?dr:0)+dt*or+Yt*or,Mr=sr(ur=Rr,0)?(pr=er(ur))!=null?pr:0:$t,Pr=function(kr,Tr){var xr;return sr(kr,0)?$t-Tr:((xr=er(kr))!=null?xr:0)-$t}(Rr,Mr),Or={id:lr,value:jr===null?jr:Rr,formattedValue:Dt(Rr),hidden:!1,index:cr,indexValue:br,data:nr[cr]};ir.push({key:lr+"."+Or.indexValue,index:ir.length,data:Or,x:_r,y:Mr,absX:rr.left+_r,absY:rr.top+Mr,width:dt,height:Pr,color:Ft(Or),label:Ht(Or)})})}),ir},ye=function(et,dt,kt,$t){var Tt=et.data,Dt=et.formatValue,Ft=et.getIndex,Ut=et.getColor,Ht=et.getTooltipLabel,Kt=et.keys,Yt=et.innerPadding,Jt=Yt===void 0?0:Yt,Zt=et.xScale,er=et.yScale,rr=et.margin,sr=kt?ge:be,nr=Tt.map(se),ir=[];return Kt.forEach(function(lr,or){return ve(0,er.domain().length).forEach(function(cr){var dr,ur,pr,mr=ce(Tt[cr][lr]),jr=mr[0],Rr=mr[1],br=Ft(Tt[cr]),_r=sr(ur=Rr,0)?$t:(pr=Zt(ur))!=null?pr:0,Mr=((dr=er(br))!=null?dr:0)+dt*or+Jt*or,Pr=function(kr,Tr){var xr;return sr(kr,0)?((xr=Zt(kr))!=null?xr:0)-$t:$t-Tr}(Rr,_r),Or={id:lr,value:jr===null?jr:Rr,formattedValue:Dt(Rr),hidden:!1,index:cr,indexValue:br,data:nr[cr]};ir.push({key:lr+"."+Or.indexValue,index:ir.length,data:Or,x:_r,y:Mr,absX:rr.left+_r,absY:rr.top+Mr,width:Pr,height:dt,color:Ut(Or),label:Ht(Or)})})}),ir},xe=function(et){var dt,kt,$t,Tt=et.layout,Dt=et.width,Ft=et.height,Ut=et.padding,Ht=Ut===void 0?0:Ut,Kt=et.innerPadding,Yt=Kt===void 0?0:Kt,Jt=et.valueScale,Zt=et.indexScale,er=et.hiddenIds,rr=er===void 0?[]:er,sr=U(et,fe),nr=sr.keys.filter(function(Tr){return!rr.includes(Tr)}),ir=ue(sr.data,nr),lr=Tt==="vertical"?["y","x",Dt]:["x","y",Ft],or=lr[0],cr=lr[1],dr=lr[2],ur=de(ir,sr.getIndex,Ht,Zt,dr,cr),pr=Jt.min==="auto"?me:function(Tr){return Tr},mr=ir.reduce(function(Tr,xr){return[].concat(Tr,nr.map(function(wr){return xr[wr]}))},[]).filter(Boolean),jr=pr(Math.min.apply(Math,mr)),Rr=($t=Math.max.apply(Math,mr),isFinite($t)?$t:0),br=pn(Jt,{all:mr,min:jr,max:Rr},or==="x"?Dt:Ft,or),_r=Tt==="vertical"?[ur,br]:[br,ur],Mr=_r[0],Pr=_r[1],Or=(ur.bandwidth()-Yt*(nr.length-1))/nr.length,kr=[Q({},sr,{data:ir,keys:nr,innerPadding:Yt,xScale:Mr,yScale:Pr}),Or,(dt=Jt.reverse)!=null&&dt,(kt=br(0))!=null?kt:0];return{xScale:Mr,yScale:Pr,bars:Or>0?Tt==="vertical"?pe.apply(void 0,kr):ye.apply(void 0,kr):[]}},Se=["data","layout","width","height","padding","valueScale","indexScale","hiddenIds"],ke=function(et){var dt;return et.some(Array.isArray)?ke((dt=[]).concat.apply(dt,et)):et},we=function(et,dt,kt){var $t=et.formatValue,Tt=et.getColor,Dt=et.getIndex,Ft=et.getTooltipLabel,Ut=et.innerPadding,Ht=et.stackedData,Kt=et.xScale,Yt=et.yScale,Jt=et.margin,Zt=[];return Ht.forEach(function(er){return Kt.domain().forEach(function(rr,sr){var nr,ir,lr=er[sr],or=(nr=Kt(Dt(lr.data)))!=null?nr:0,cr=((ir=function(Rr){return Yt(Rr[kt?0:1])}(lr))!=null?ir:0)+.5*Ut,dr=function(Rr,br){var _r;return((_r=Yt(Rr[kt?1:0]))!=null?_r:0)-br}(lr,cr)-Ut,ur=ce(lr.data[er.key]),pr=ur[0],mr=ur[1],jr={id:er.key,value:pr===null?pr:mr,formattedValue:$t(mr),hidden:!1,index:sr,indexValue:rr,data:se(lr.data)};Zt.push({key:er.key+"."+rr,index:Zt.length,data:jr,x:or,y:cr,absX:Jt.left+or,absY:Jt.top+cr,width:dt,height:dr,color:Tt(jr),label:Ft(jr)})})}),Zt},Le=function(et,dt,kt){var $t=et.formatValue,Tt=et.getColor,Dt=et.getIndex,Ft=et.getTooltipLabel,Ut=et.innerPadding,Ht=et.stackedData,Kt=et.xScale,Yt=et.yScale,Jt=et.margin,Zt=[];return Ht.forEach(function(er){return Yt.domain().forEach(function(rr,sr){var nr,ir,lr=er[sr],or=(nr=Yt(Dt(lr.data)))!=null?nr:0,cr=((ir=function(Rr){return Kt(Rr[kt?1:0])}(lr))!=null?ir:0)+.5*Ut,dr=function(Rr,br){var _r;return((_r=Kt(Rr[kt?0:1]))!=null?_r:0)-br}(lr,cr)-Ut,ur=ce(lr.data[er.key]),pr=ur[0],mr=ur[1],jr={id:er.key,value:pr===null?pr:mr,formattedValue:$t(mr),hidden:!1,index:sr,indexValue:rr,data:se(lr.data)};Zt.push({key:er.key+"."+rr,index:Zt.length,data:jr,x:cr,y:or,absX:Jt.left+cr,absY:Jt.top+or,width:dr,height:dt,color:Tt(jr),label:Ft(jr)})})}),Zt},Ce=function(et){var dt,kt,$t=et.data,Tt=et.layout,Dt=et.width,Ft=et.height,Ut=et.padding,Ht=Ut===void 0?0:Ut,Kt=et.valueScale,Yt=et.indexScale,Jt=et.hiddenIds,Zt=Jt===void 0?[]:Jt,er=U(et,Se),rr=er.keys.filter(function(Or){return!Zt.includes(Or)}),sr=_$2().keys(rr).offset(q$2)(ue($t,rr)),nr=Tt==="vertical"?["y","x",Dt]:["x","y",Ft],ir=nr[0],lr=nr[1],or=nr[2],cr=de($t,er.getIndex,Ht,Yt,or,lr),dr=(kt=ke(sr),Kt.type==="log"?kt.filter(function(Or){return Or!==0}):kt),ur=Math.min.apply(Math,dr),pr=Math.max.apply(Math,dr),mr=pn(Kt,{all:dr,min:ur,max:pr},ir==="x"?Dt:Ft,ir),jr=Tt==="vertical"?[cr,mr]:[mr,cr],Rr=jr[0],br=jr[1],_r=er.innerPadding>0?er.innerPadding:0,Mr=cr.bandwidth(),Pr=[Q({},er,{innerPadding:_r,stackedData:sr,xScale:Rr,yScale:br}),Mr,(dt=Kt.reverse)!=null&&dt];return{xScale:Rr,yScale:br,bars:Mr>0?Tt==="vertical"?we.apply(void 0,Pr):Le.apply(void 0,Pr):[]}},We=function(et){var dt=et.bars,kt=et.direction,$t=et.from,Tt=et.groupMode,Dt=et.layout,Ft=et.legendLabel,Ut=et.reverse,Ht=gn(Ft??($t==="indexes"?"indexValue":"id"));return $t==="indexes"?function(Kt,Yt,Jt){var Zt=J$1(Kt.map(function(er){var rr,sr;return{id:(rr=er.data.indexValue)!=null?rr:"",label:Jt(er.data),hidden:er.data.hidden,color:(sr=er.color)!=null?sr:"#000"}}),function(er){return er.id});return Yt==="horizontal"&&Zt.reverse(),Zt}(dt,Dt,Ht):function(Kt,Yt,Jt,Zt,er,rr){var sr=J$1(Kt.map(function(nr){var ir;return{id:nr.data.id,label:rr(nr.data),hidden:nr.data.hidden,color:(ir=nr.color)!=null?ir:"#000"}}),function(nr){return nr.id});return(Yt==="vertical"&&Zt==="stacked"&&Jt==="column"&&er!==!0||Yt==="horizontal"&&Zt==="stacked"&&er===!0)&&sr.reverse(),sr}(dt,Dt,kt,Tt,Ut,Ht)},Me=function(et,dt,kt){var $t=et.get(dt)||0;et.set(dt,$t+kt)},Be=function(et,dt,kt){var $t=et.get(dt)||0;et.set(dt,$t+(kt>0?kt:0))},Re=function(et,dt,kt){var $t=et.get(dt)||0;et.set(dt,Math.max($t,Number(kt)))},Oe=function(et,dt){var kt=et.get(dt)||0;et.set(dt,kt+1)},Ie=function(et){var dt,kt=et.indexBy,$t=kt===void 0?le.indexBy:kt,Tt=et.keys,Dt=Tt===void 0?le.keys:Tt,Ft=et.label,Ut=Ft===void 0?le.label:Ft,Ht=et.tooltipLabel,Kt=Ht===void 0?le.tooltipLabel:Ht,Yt=et.valueFormat,Jt=et.colors,Zt=Jt===void 0?le.colors:Jt,er=et.colorBy,rr=er===void 0?le.colorBy:er,sr=et.borderColor,nr=sr===void 0?le.borderColor:sr,ir=et.labelTextColor,lr=ir===void 0?le.labelTextColor:ir,or=et.groupMode,cr=or===void 0?le.groupMode:or,dr=et.layout,ur=dr===void 0?le.layout:dr,pr=et.data,mr=et.margin,jr=et.width,Rr=et.height,br=et.padding,_r=br===void 0?le.padding:br,Mr=et.innerPadding,Pr=Mr===void 0?le.innerPadding:Mr,Or=et.valueScale,kr=Or===void 0?le.valueScale:Or,Tr=et.indexScale,xr=Tr===void 0?le.indexScale:Tr,wr=et.initialHiddenIds,zr=wr===void 0?le.initialHiddenIds:wr,Hr=et.enableLabel,Yr=Hr===void 0?le.enableLabel:Hr,rs=et.labelSkipWidth,as=rs===void 0?le.labelSkipWidth:rs,es=et.labelSkipHeight,Xr=es===void 0?le.labelSkipHeight:es,Wr=et.legends,cs=Wr===void 0?le.legends:Wr,ns=et.legendLabel,us=et.totalsOffset,fs=us===void 0?le.totalsOffset:us,ss=reactExports.useState(zr??[]),ps=ss[0],ls=ss[1],js=reactExports.useCallback(function(Ls){ls(function(hs){return hs.indexOf(Ls)>-1?hs.filter(function(Gr){return Gr!==Ls}):[].concat(hs,[Ls])})},[]),$s=bn($t),Ds=bn(Ut),Ts=bn(Kt),As=hn(Yt),_s=M$3(),Ms=hr(Zt,rr),Vs=Ye$1(nr,_s),Gs=Ye$1(lr,_s),Ws=(cr==="grouped"?xe:Ce)({layout:ur,data:pr,getIndex:$s,keys:Dt,width:jr,height:Rr,getColor:Ms,padding:_r,innerPadding:Pr,valueScale:kr,indexScale:xr,hiddenIds:ps,formatValue:As,getTooltipLabel:Ts,margin:mr}),Xs=Ws.bars,Qs=Ws.xScale,Bs=Ws.yScale,qs=reactExports.useMemo(function(){return Xs.filter(function(Ls){return Ls.data.value!==null}).map(function(Ls,hs){return Q({},Ls,{index:hs})})},[Xs]),Ks=reactExports.useCallback(function(Ls){var hs=Ls.width,Gr=Ls.height;return!!Yr&&!(as>0&&hs<as)&&!(Xr>0&&Gr<Xr)},[Yr,as,Xr]),yn=reactExports.useMemo(function(){return Dt.map(function(Ls){var hs=Xs.find(function(Gr){return Gr.data.id===Ls});return Q({},hs,{data:Q({id:Ls},hs==null?void 0:hs.data,{hidden:ps.includes(Ls)})})})},[ps,Dt,Xs]),Dn=(dt=kr.reverse)!=null&&dt,na=reactExports.useMemo(function(){return cs.map(function(Ls){return[Ls,We({bars:Ls.dataFrom==="keys"?yn:Xs,direction:Ls.direction,from:Ls.dataFrom,groupMode:cr,layout:ur,legendLabel:ns,reverse:Dn})]})},[cs,yn,Xs,cr,ur,ns,Dn]),jo=reactExports.useMemo(function(){return function(Ls,hs,Gr,gs,xs,ms,ds){gs===void 0&&(gs=le.layout),xs===void 0&&(xs=le.groupMode);var ys=[];if(Ls.length===0)return ys;var ws=new Map,Ss=Ls[0].width,Fs=Ls[0].height;if(xs==="stacked"){var vs=new Map;Ls.forEach(function(bs){var ks=bs.data,Rs=ks.indexValue,Ps=ks.value;Me(ws,Rs,Number(Ps)),Be(vs,Rs,Number(Ps))}),vs.forEach(function(bs,ks){var Rs,Ps,zs,Zs=ws.get(ks)||0;gs==="vertical"?(Rs=hs(ks),Ps=Gr(bs),zs=Gr(bs/2)):(Rs=hs(bs),Ps=Gr(ks),zs=hs(bs/2)),Rs+=gs==="vertical"?Ss/2:ms,Ps+=gs==="vertical"?-ms:Fs/2,ys.push({key:"total_"+ks,x:Rs,y:Ps,value:Zs,formattedValue:ds(Zs),animationOffset:zs})})}else if(xs==="grouped"){var Os=new Map,tn=new Map;Ls.forEach(function(bs){var ks=bs.data,Rs=ks.indexValue,Ps=ks.value;Me(ws,Rs,Number(Ps)),Re(Os,Rs,Number(Ps)),Oe(tn,Rs)}),Os.forEach(function(bs,ks){var Rs,Ps,zs,Zs=ws.get(ks)||0,Vn=tn.get(ks);gs==="vertical"?(Rs=hs(ks),Ps=Gr(bs),zs=Gr(bs/2)):(Rs=hs(bs),Ps=Gr(ks),zs=hs(bs/2)),Rs+=gs==="vertical"?Vn*Ss/2:ms,Ps+=gs==="vertical"?-ms:Vn*Fs/2,ys.push({key:"total_"+ks,x:Rs,y:Ps,value:Zs,formattedValue:ds(Zs),animationOffset:zs})})}return ys}(Xs,Qs,Bs,ur,cr,fs,As)},[Xs,Qs,Bs,ur,cr,fs,As]);return{bars:Xs,barsWithValue:qs,xScale:Qs,yScale:Bs,getIndex:$s,getLabel:Ds,getTooltipLabel:Ts,formatValue:As,getColor:Ms,getBorderColor:Vs,getLabelColor:Gs,shouldRenderBarLabel:Ks,hiddenIds:ps,toggleSerie:js,legendsWithData:na,barTotals:jo}},Ve=function(et){var dt=et.data,kt=et.springConfig,$t=et.animate,Tt=et.layout,Dt=Tt===void 0?re.layout:Tt,Ft=M$3();return useTransition(dt,{keys:function(Ut){return Ut.key},from:function(Ut){return{x:Dt==="vertical"?Ut.x:Ut.animationOffset,y:Dt==="vertical"?Ut.animationOffset:Ut.y,labelOpacity:0}},enter:function(Ut){return{x:Ut.x,y:Ut.y,labelOpacity:1}},update:function(Ut){return{x:Ut.x,y:Ut.y,labelOpacity:1}},leave:function(Ut){return{x:Dt==="vertical"?Ut.x:Ut.animationOffset,y:Dt==="vertical"?Ut.animationOffset:Ut.y,labelOpacity:0}},config:kt,immediate:!$t,initial:$t?void 0:null})(function(Ut,Ht){return jsxRuntimeExports.jsx(animated$1.text,{x:Ut.x,y:Ut.y,fillOpacity:Ut.labelOpacity,style:Q({},Ft.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:Ft.labels.text.fontSize,fontFamily:Ft.labels.text.fontFamily,textAnchor:Dt==="vertical"?"middle":"start",alignmentBaseline:Dt==="vertical"?"alphabetic":"middle",children:Ht.formattedValue},Ht.key)})},Te=["isInteractive","animate","motionConfig","theme","renderWrapper"],He=function(et){var dt,kt=et.data,$t=et.indexBy,Tt=et.keys,Dt=et.margin,Ft=et.width,Ut=et.height,Ht=et.groupMode,Kt=et.layout,Yt=et.valueScale,Jt=et.indexScale,Zt=et.padding,er=et.innerPadding,rr=et.axisTop,sr=et.axisRight,nr=et.axisBottom,ir=nr===void 0?re.axisBottom:nr,lr=et.axisLeft,or=lr===void 0?re.axisLeft:lr,cr=et.enableGridX,dr=cr===void 0?re.enableGridX:cr,ur=et.enableGridY,pr=ur===void 0?re.enableGridY:ur,mr=et.gridXValues,jr=et.gridYValues,Rr=et.layers,br=Rr===void 0?re.layers:Rr,_r=et.barComponent,Mr=_r===void 0?re.barComponent:_r,Pr=et.enableLabel,Or=Pr===void 0?re.enableLabel:Pr,kr=et.label,Tr=et.labelSkipWidth,xr=Tr===void 0?re.labelSkipWidth:Tr,wr=et.labelSkipHeight,zr=wr===void 0?re.labelSkipHeight:wr,Hr=et.labelTextColor,Yr=et.labelPosition,rs=Yr===void 0?re.labelPosition:Yr,as=et.labelOffset,es=as===void 0?re.labelOffset:as,Xr=et.markers,Wr=Xr===void 0?re.markers:Xr,cs=et.colorBy,ns=et.colors,us=et.defs,fs=us===void 0?re.defs:us,ss=et.fill,ps=ss===void 0?re.fill:ss,ls=et.borderRadius,js=ls===void 0?re.borderRadius:ls,$s=et.borderWidth,Ds=$s===void 0?re.borderWidth:$s,Ts=et.borderColor,As=et.annotations,_s=As===void 0?re.annotations:As,Ms=et.legendLabel,Vs=et.tooltipLabel,Gs=et.valueFormat,Ws=et.isInteractive,Xs=Ws===void 0?re.isInteractive:Ws,Qs=et.tooltip,Bs=Qs===void 0?re.tooltip:Qs,qs=et.onClick,Ks=et.onMouseEnter,yn=et.onMouseLeave,Dn=et.legends,na=et.role,jo=na===void 0?re.role:na,Ls=et.ariaLabel,hs=et.ariaLabelledBy,Gr=et.ariaDescribedBy,gs=et.isFocusable,xs=gs===void 0?re.isFocusable:gs,ms=et.barAriaLabel,ds=et.barAriaLabelledBy,ys=et.barAriaDescribedBy,ws=et.barAriaHidden,Ss=et.barAriaDisabled,Fs=et.initialHiddenIds,vs=et.enableTotals,Os=vs===void 0?re.enableTotals:vs,tn=et.totalsOffset,bs=tn===void 0?re.totalsOffset:tn,ks=et.forwardedRef,Rs=Dr(),Ps=Rs.animate,zs=Rs.config,Zs=cn$1(Ft,Ut,Dt),Vn=Zs.outerWidth,Lo=Zs.outerHeight,No=Zs.margin,mo=Zs.innerWidth,qo=Zs.innerHeight,wo=Ie({indexBy:$t,label:kr,tooltipLabel:Vs,valueFormat:Gs,colors:ns,colorBy:cs,borderColor:Ts,labelTextColor:Hr,groupMode:Ht,layout:Kt,data:kt,keys:Tt,margin:No,width:mo,height:qo,padding:Zt,innerPadding:er,valueScale:Yt,indexScale:Jt,enableLabel:Or,labelSkipWidth:xr,labelSkipHeight:zr,legends:Dn,legendLabel:Ms,initialHiddenIds:Fs,totalsOffset:bs}),bv=wo.bars,xw=wo.barsWithValue,km=wo.xScale,l0=wo.yScale,U2=wo.getLabel,Js=wo.getTooltipLabel,Bn=wo.getBorderColor,vn=wo.getLabelColor,Kl=wo.shouldRenderBarLabel,Zn=wo.toggleSerie,$m=wo.legendsWithData,yv=wo.barTotals,aC=wo.getColor,vv=he(Kt,(dt=Yt==null?void 0:Yt.reverse)!=null&&dt,rs,es),oC=useTransition(xw,{keys:function(Is){return Is.key},from:function(Is){return Q({borderColor:Bn(Is),color:Is.color,height:0,labelColor:vn(Is),labelOpacity:0},vv(Is.width,Is.height),{transform:"translate("+Is.x+", "+(Is.y+Is.height)+")",width:Is.width},Kt==="vertical"?{}:{height:Is.height,transform:"translate("+Is.x+", "+Is.y+")",width:0})},enter:function(Is){return Q({borderColor:Bn(Is),color:Is.color,height:Is.height,labelColor:vn(Is),labelOpacity:1},vv(Is.width,Is.height),{transform:"translate("+Is.x+", "+Is.y+")",width:Is.width})},update:function(Is){return Q({borderColor:Bn(Is),color:Is.color,height:Is.height,labelColor:vn(Is),labelOpacity:1},vv(Is.width,Is.height),{transform:"translate("+Is.x+", "+Is.y+")",width:Is.width})},leave:function(Is){return Q({borderColor:Bn(Is),color:Is.color,height:0,labelColor:vn(Is),labelOpacity:0},vv(Is.width,Is.height),{labelY:0,transform:"translate("+Is.x+", "+(Is.y+Is.height)+")",width:Is.width},Kt==="vertical"?{}:Q({},vv(Is.width,Is.height),{labelX:0,height:Is.height,transform:"translate("+Is.x+", "+Is.y+")",width:0}))},config:zs,immediate:!Ps,initial:Ps?void 0:null}),eS=reactExports.useMemo(function(){return{borderRadius:js,borderWidth:Ds,enableLabel:Or,isInteractive:Xs,labelSkipWidth:xr,labelSkipHeight:zr,onClick:qs,onMouseEnter:Ks,onMouseLeave:yn,getTooltipLabel:Js,tooltip:Bs,isFocusable:xs,ariaLabel:ms,ariaLabelledBy:ds,ariaDescribedBy:ys,ariaHidden:ws,ariaDisabled:Ss}},[js,Ds,Or,Js,Xs,zr,xr,qs,Ks,yn,Bs,xs,ms,ds,ys,ws,Ss]),lC=Mn$1(fs,bv,ps,{dataKey:"data",targetKey:"data.fill"}),Mu={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};br.includes("annotations")&&(Mu.annotations=jsxRuntimeExports.jsx($,{bars:bv,annotations:_s},"annotations")),br.includes("axes")&&(Mu.axes=jsxRuntimeExports.jsx(V,{xScale:km,yScale:l0,width:mo,height:qo,top:rr,right:sr,bottom:ir,left:or},"axes")),br.includes("bars")&&(Mu.bars=jsxRuntimeExports.jsx(reactExports.Fragment,{children:oC(function(Is,Ev){return reactExports.createElement(Mr,Q({},eS,{bar:Ev,style:Is,shouldRenderLabel:Kl(Ev),label:U2(Ev.data)}))})},"bars")),br.includes("grid")&&(Mu.grid=jsxRuntimeExports.jsx(j$2,{width:mo,height:qo,xScale:dr?km:null,yScale:pr?l0:null,xValues:mr,yValues:jr},"grid")),br.includes("legends")&&(Mu.legends=jsxRuntimeExports.jsx(ee,{width:mo,height:qo,legends:$m,toggleSerie:Zn},"legends")),br.includes("markers")&&(Mu.markers=jsxRuntimeExports.jsx(Pt,{markers:Wr,width:mo,height:qo,xScale:km,yScale:l0},"markers")),br.includes("totals")&&Os&&(Mu.totals=jsxRuntimeExports.jsx(Ve,{data:yv,springConfig:zs,animate:Ps,layout:Kt},"totals"));var cC=Q({},eS,{margin:No,width:Ft,height:Ut,innerWidth:mo,innerHeight:qo,bars:bv,legendData:$m,enableLabel:Or,xScale:km,yScale:l0,tooltip:Bs,getTooltipLabel:Js,onClick:qs,onMouseEnter:Ks,onMouseLeave:yn,getColor:aC});return jsxRuntimeExports.jsx(Rt,{width:Vn,height:Lo,margin:No,defs:lC,role:jo,ariaLabel:Ls,ariaLabelledBy:hs,ariaDescribedBy:Gr,isFocusable:xs,ref:ks,children:br.map(function(Is,Ev){var tS;return typeof Is=="function"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.createElement(Is,cC)},Ev):(tS=Mu==null?void 0:Mu[Is])!=null?tS:null})})},Pe=reactExports.forwardRef(function(et,dt){var kt=et.isInteractive,$t=kt===void 0?re.isInteractive:kt,Tt=et.animate,Dt=Tt===void 0?re.animate:Tt,Ft=et.motionConfig,Ut=Ft===void 0?re.motionConfig:Ft,Ht=et.theme,Kt=et.renderWrapper,Yt=U(et,Te);return jsxRuntimeExports.jsx(Fr,{animate:Dt,isInteractive:$t,motionConfig:Ut,renderWrapper:Kt,theme:Ht,children:jsxRuntimeExports.jsx(He,Q({},Yt,{isInteractive:$t,forwardedRef:dt}))})}),Ee=["isInteractive","renderWrapper","theme"],Fe=function(et,dt,kt,$t){return et.find(function(Tt){return wn$1(Tt.x+dt.left,Tt.y+dt.top,Tt.width,Tt.height,kt,$t)})},ze=function(et){var dt,kt=et.data,$t=et.indexBy,Tt=et.keys,Dt=et.margin,Ft=et.width,Ut=et.height,Ht=et.groupMode,Kt=et.layout,Yt=et.valueScale,Jt=et.indexScale,Zt=et.padding,er=et.innerPadding,rr=et.axisTop,sr=et.axisRight,nr=et.axisBottom,ir=nr===void 0?oe.axisBottom:nr,lr=et.axisLeft,or=lr===void 0?oe.axisLeft:lr,cr=et.enableGridX,dr=cr===void 0?oe.enableGridX:cr,ur=et.enableGridY,pr=ur===void 0?oe.enableGridY:ur,mr=et.gridXValues,jr=et.gridYValues,Rr=et.labelPosition,br=Rr===void 0?oe.labelPosition:Rr,_r=et.labelOffset,Mr=_r===void 0?oe.labelOffset:_r,Pr=et.layers,Or=Pr===void 0?oe.layers:Pr,kr=et.renderBar,Tr=kr===void 0?oe.renderBar:kr,xr=et.enableLabel,wr=xr===void 0?oe.enableLabel:xr,zr=et.label,Hr=et.labelSkipWidth,Yr=Hr===void 0?oe.labelSkipWidth:Hr,rs=et.labelSkipHeight,as=rs===void 0?oe.labelSkipHeight:rs,es=et.labelTextColor,Xr=et.colorBy,Wr=et.colors,cs=et.borderRadius,ns=cs===void 0?oe.borderRadius:cs,us=et.borderWidth,fs=us===void 0?oe.borderWidth:us,ss=et.borderColor,ps=et.annotations,ls=ps===void 0?oe.annotations:ps,js=et.legendLabel,$s=et.tooltipLabel,Ds=et.valueFormat,Ts=et.isInteractive,As=Ts===void 0?oe.isInteractive:Ts,_s=et.tooltip,Ms=_s===void 0?oe.tooltip:_s,Vs=et.onClick,Gs=et.onMouseEnter,Ws=et.onMouseLeave,Xs=et.legends,Qs=et.pixelRatio,Bs=Qs===void 0?oe.pixelRatio:Qs,qs=et.role,Ks=et.forwardedRef,yn=et.enableTotals,Dn=yn===void 0?oe.enableTotals:yn,na=et.totalsOffset,jo=na===void 0?oe.totalsOffset:na,Ls=reactExports.useRef(null),hs=M$3(),Gr=cn$1(Ft,Ut,Dt),gs=Gr.margin,xs=Gr.innerWidth,ms=Gr.innerHeight,ds=Gr.outerWidth,ys=Gr.outerHeight,ws=Ie({indexBy:$t,label:zr,tooltipLabel:$s,valueFormat:Ds,colors:Wr,colorBy:Xr,borderColor:ss,labelTextColor:es,groupMode:Ht,layout:Kt,data:kt,keys:Tt,margin:gs,width:xs,height:ms,padding:Zt,innerPadding:er,valueScale:Yt,indexScale:Jt,enableLabel:wr,labelSkipWidth:Yr,labelSkipHeight:as,legends:Xs,legendLabel:js,totalsOffset:jo}),Ss=ws.bars,Fs=ws.barsWithValue,vs=ws.xScale,Os=ws.yScale,tn=ws.getLabel,bs=ws.getTooltipLabel,ks=ws.getBorderColor,Rs=ws.getLabelColor,Ps=ws.shouldRenderBarLabel,zs=ws.legendsWithData,Zs=ws.barTotals,Vn=ws.getColor,Lo=z$4(),No=Lo.showTooltipFromEvent,mo=Lo.hideTooltip,qo=j$1({annotations:O$1({data:Ss,annotations:ls,getPosition:function(Js){return{x:Js.x,y:Js.y}},getDimensions:function(Js){var Bn=Js.width,vn=Js.height;return{width:Bn,height:vn,size:Math.max(Bn,vn)}}})}),wo=reactExports.useMemo(function(){return{borderRadius:ns,borderWidth:fs,isInteractive:As,isFocusable:!1,labelSkipWidth:Yr,labelSkipHeight:as,margin:gs,width:Ft,height:Ut,innerWidth:xs,innerHeight:ms,bars:Ss,legendData:zs,enableLabel:wr,xScale:vs,yScale:Os,tooltip:Ms,getTooltipLabel:bs,onClick:Vs,onMouseEnter:Gs,onMouseLeave:Ws,getColor:Vn}},[ns,fs,As,Yr,as,gs,Ft,Ut,xs,ms,Ss,zs,wr,vs,Os,Ms,bs,Vs,Gs,Ws,Vn]),bv=hn(Ds),xw=he(Kt,(dt=Yt==null?void 0:Yt.reverse)!=null&&dt,br,Mr);reactExports.useEffect(function(){if(Ls.current){Ls.current.width=ds*Bs,Ls.current.height=ys*Bs;var Js=Ls.current.getContext("2d");Js.scale(Bs,Bs),Js.fillStyle=hs.background,Js.fillRect(0,0,ds,ys),Js.translate(gs.left,gs.top),Or.forEach(function(Bn){Bn==="grid"?typeof hs.grid.line.strokeWidth=="number"&&hs.grid.line.strokeWidth>0&&(Js.lineWidth=hs.grid.line.strokeWidth,Js.strokeStyle=hs.grid.line.stroke,dr&&q$1(Js,{width:xs,height:ms,scale:vs,axis:"x",values:mr}),pr&&q$1(Js,{width:xs,height:ms,scale:Os,axis:"y",values:jr})):Bn==="axes"?W$1(Js,{xScale:vs,yScale:Os,width:xs,height:ms,top:rr,right:sr,bottom:ir,left:or,theme:hs}):Bn==="bars"?(a$1(Js,hs.text),Fs.forEach(function(vn){Tr(Js,Q({bar:vn,borderColor:ks(vn),borderRadius:ns,borderWidth:fs,label:tn(vn.data),shouldRenderLabel:Ps(vn),labelStyle:Q({},hs.labels.text,{fill:Rs(vn)})},xw(vn.width,vn.height)))})):Bn==="legends"?zs.forEach(function(vn){var Kl=vn[0],Zn=vn[1];L(Js,Q({},Kl,{data:Zn,containerWidth:xs,containerHeight:ms,theme:hs}))}):Bn==="annotations"?J(Js,{annotations:qo,theme:hs}):Bn==="totals"&&Dn?function(vn,Kl,Zn,$m){$m===void 0&&($m=oe.layout),a$1(vn,Zn.labels.text),vn.textBaseline=$m==="vertical"?"alphabetic":"middle",vn.textAlign=$m==="vertical"?"center":"start",Kl.forEach(function(yv){d(vn,Zn.labels.text,yv.formattedValue,yv.x,yv.y)})}(Js,Zs,hs,Kt):typeof Bn=="function"&&Bn(Js,wo)}),Js.save()}},[ir,or,sr,rr,Fs,ns,fs,qo,dr,pr,ks,tn,Rs,mr,jr,Ht,Ut,ms,xs,wo,Or,Kt,zs,gs.left,gs.top,ys,ds,Bs,Tr,vs,Os,Ps,hs,Ft,Zs,Dn,bv,xw]);var km=reactExports.useCallback(function(Js){if(Ss&&Ls.current){var Bn=kn(Ls.current,Js),vn=Bn[0],Kl=Bn[1],Zn=Fe(Ss,gs,vn,Kl);Zn!==void 0?(No(reactExports.createElement(Ms,Q({},Zn.data,{color:Zn.color,label:Zn.label,value:Number(Zn.data.value)})),Js),Js.type==="mouseenter"&&(Gs==null||Gs(Zn.data,Js))):mo()}},[mo,gs,Gs,Ss,No,Ms]),l0=reactExports.useCallback(function(Js){if(Ss&&Ls.current){mo();var Bn=kn(Ls.current,Js),vn=Bn[0],Kl=Bn[1],Zn=Fe(Ss,gs,vn,Kl);Zn&&(Ws==null||Ws(Zn.data,Js))}},[mo,gs,Ws,Ss]),U2=reactExports.useCallback(function(Js){if(Ss&&Ls.current){var Bn=kn(Ls.current,Js),vn=Bn[0],Kl=Bn[1],Zn=Fe(Ss,gs,vn,Kl);Zn!==void 0&&(Vs==null||Vs(Q({},Zn.data,{color:Zn.color}),Js))}},[gs,Vs,Ss]);return jsxRuntimeExports.jsx("canvas",{ref:Rn(Ls,Ks),width:ds*Bs,height:ys*Bs,style:{width:ds,height:ys,cursor:As?"auto":"normal"},onMouseEnter:As?km:void 0,onMouseMove:As?km:void 0,onMouseLeave:As?l0:void 0,onClick:As?U2:void 0,role:qs})},De=reactExports.forwardRef(function(et,dt){var kt=et.isInteractive,$t=et.renderWrapper,Tt=et.theme,Dt=U(et,Ee);return jsxRuntimeExports.jsx(Fr,{isInteractive:kt,renderWrapper:$t,theme:Tt,animate:!1,children:jsxRuntimeExports.jsx(ze,Q({},Dt,{isInteractive:kt,forwardedRef:dt}))})}),Ae=["defaultWidth","defaultHeight","onResize","debounceResize"],Xe=reactExports.forwardRef(function(et,dt){var kt=et.defaultWidth,$t=et.defaultHeight,Tt=et.onResize,Dt=et.debounceResize,Ft=U(et,Ae);return jsxRuntimeExports.jsx($r,{defaultWidth:kt,defaultHeight:$t,onResize:Tt,debounceResize:Dt,children:function(Ut){var Ht=Ut.width,Kt=Ut.height;return jsxRuntimeExports.jsx(Pe,Q({},Ft,{width:Ht,height:Kt,ref:dt}))}})}),Ye=["defaultWidth","defaultHeight","onResize","debounceResize"];reactExports.forwardRef(function(et,dt){var kt=et.defaultWidth,$t=et.defaultHeight,Tt=et.onResize,Dt=et.debounceResize,Ft=U(et,Ye);return jsxRuntimeExports.jsx($r,{defaultWidth:kt,defaultHeight:$t,onResize:Tt,debounceResize:Dt,children:function(Ut){var Ht=Ut.width,Kt=Ut.height;return jsxRuntimeExports.jsx(De,Q({},Ft,{width:Ht,height:Kt,ref:dt}))}})});function LandingAnalytics(){var Zt,er,rr;const{user:et}=useAuth(),[dt,kt]=reactExports.useState(null),[$t,Tt]=reactExports.useState("7"),[Dt,Ft]=reactExports.useState(null),[Ut,Ht]=reactExports.useState(!0);reactExports.useEffect(()=>{async function sr(){const nr=await axiosInstance.get(`https://themessyattic.com/api/landing-analytics/id/by-user/${et.id}`);kt(nr.data.id)}et!=null&&et.id&&sr()},[et==null?void 0:et.id]),reactExports.useEffect(()=>{dt&&Kt($t)},[$t,dt]);async function Kt(sr){if(dt){Ht(!0);try{const nr=await axiosInstance.get(`https://themessyattic.com/api/landing-analytics/summary/${dt}?days=${sr}`);nr.data&&nr.data.success?Ft({views:nr.data.views||[],clicks:nr.data.clicks||[],downloads:nr.data.downloads||[]}):(console.warn(" Unexpected response shape:",nr.data),Ft({views:[],clicks:[],downloads:[]}))}catch(nr){console.error(" Error fetching analytics:",nr)}finally{Ht(!1)}}}const Yt=[{key:"views",color:"#1f2937",label:"Views"},{key:"clicks",color:"#7bed9f",label:"Clicks"},{key:"downloads",color:"#670fe7",label:"Downloads"}],Jt=(()=>{if(!Dt)return[];const sr=parseInt($t,10)||7,nr=new Date,ir=Array.from({length:sr},(or,cr)=>{const dr=new Date(nr);return dr.setDate(nr.getDate()-(sr-1-cr)),dr.toISOString().slice(0,10)}),lr=(or,cr)=>{var dr;return((dr=or==null?void 0:or.find(ur=>ur.date.slice(0,10)===cr))==null?void 0:dr.total)||0};return ir.map(or=>({date:(()=>{const dr=(typeof or=="string"?or:new Date(or).toISOString()).split("T")[0].split("-"),ur=Number(dr[0]),pr=Number(dr[1])-1,mr=Number(dr[2]);return new Date(ur,pr,mr).toLocaleDateString("en-US",{month:"short",day:"numeric"})})(),Views:lr(Dt.views,or),Clicks:lr(Dt.clicks,or),Downloads:lr(Dt.downloads,or)}))})();return jsxRuntimeExports.jsx("div",{className:`w-full min-h-screen px-4 py-8 pt-24
      text-dashboard-text-light
      dark:text-dashboard-text-dark
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark`,children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h1",{className:`text-xl font-semibold normal-case
            text-dashboard-text-light
            dark:text-dashboard-text-dark`,children:"Views"}),jsxRuntimeExports.jsx(ChartNoAxesColumn,{size:22,className:`mt-[1px] sm:mt-0
            text-dashboard-text-light
            dark:text-dashboard-text-dark`})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["7","14","30","90"].map(sr=>jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(sr),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${$t===sr?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-muted-light dark:text-dashboard-muted-dark border border-dashboard-border-light dark:border-dashboard-border-dark"}`,children:[sr," days"]},sr))})]}),Dt&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-3 sm:grid-cols-3 mb-6",children:Yt.map(sr=>{var nr;return jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center justify-center rounded-xl p-3 sm:p-4 shadow-md
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark`,children:[jsxRuntimeExports.jsx("p",{className:`text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark`,children:sr.label}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-semibold ${sr.key==="views"?"text-dashboard-metric-light dark:text-dashboard-metric-dark dark:drop-shadow-[0_0_10px_rgba(229,240,255,0.35)]":""}`,style:sr.key!=="views"?{color:sr.color}:void 0,children:((nr=Dt[sr.key])==null?void 0:nr.reduce((ir,lr)=>ir+lr.total,0))||0})]},sr.key)})}),Dt&&jsxRuntimeExports.jsxs("div",{className:`rounded-2xl py-8 text-center mb-6
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark`,children:[jsxRuntimeExports.jsx("p",{className:`text-sm uppercase tracking-wide mb-1
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"Total Views"}),jsxRuntimeExports.jsx("h2",{className:`text-5xl font-bold mb-1
              text-dashboard-metric-light
              dark:text-dashboard-metric-dark`,children:Intl.NumberFormat("en-US",{notation:"compact"}).format(((Zt=Dt.views)==null?void 0:Zt.reduce((sr,nr)=>sr+nr.total,0))||0)}),Jt.length>0&&jsxRuntimeExports.jsxs("p",{className:`text-sm mt-1
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark`,children:[new Date(Jt[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ",""," ",new Date(Jt[Jt.length-1].date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),jsxRuntimeExports.jsx("div",{className:`rounded-2xl p-4 h-[400px] shadow-inner mb-8
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark`,children:Ut?jsxRuntimeExports.jsx("p",{className:`text-center mt-20
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"Loading analytics..."}):Dt?jsxRuntimeExports.jsx(Xe,{data:Jt,keys:["Views","Clicks","Downloads"],colors:({id:sr})=>sr==="Views"?"#1f2937":sr==="Clicks"?"#7bed9f":"#670fe7",indexBy:"date",margin:{top:20,right:20,bottom:40,left:50},padding:.25,borderRadius:[4,4,0,0],axisTop:null,axisRight:null,axisLeft:{tickSize:0,tickPadding:8,format:sr=>sr>=1e3?`${sr/1e3}K`:sr,legend:""},axisBottom:{tickSize:0,tickPadding:10,tickRotation:0,legend:"",tickValues:[(er=Jt[0])==null?void 0:er.date,(rr=Jt[Jt.length-1])==null?void 0:rr.date],format:sr=>new Date(sr).toLocaleDateString("en-US",{month:"short",day:"numeric"})},enableLabel:!1,enableGridX:!1,gridYValues:5,theme:{textColor:"#9ca3af",grid:{line:{stroke:"#1f1f1f",strokeWidth:1}},axis:{ticks:{text:{fill:"#9ca3af",fontSize:12}}},tooltip:{container:{background:"#111",color:"#fff",borderRadius:"8px",border:"1px solid #333",boxShadow:"0 2px 8px rgba(0,0,0,0.4)",padding:"8px 10px",fontSize:12}}},tooltip:({id:sr,value:nr,indexValue:ir,color:lr})=>jsxRuntimeExports.jsxs("div",{className:`px-3 py-2 rounded-lg
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark`,children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium",style:{color:lr},children:[sr,": ",nr]}),jsxRuntimeExports.jsx("p",{className:`text-xs
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark`,children:ir})]}),groupMode:"grouped"}):jsxRuntimeExports.jsx("p",{className:`text-center
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"No analytics data yet"})})]})})}function ThankYouModal({visible:et,message:dt,setMessage:kt,onClose:$t,loading:Tt,onMarkSent:Dt}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[999] flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0F1629] border border-gray-700 rounded-xl w-full max-w-3xl shadow-2xl p-0 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-[#1E293B] px-6 py-4 border-b border-gray-700",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"Email Preview"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This is what your thank-you email will look like"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-gray-400 text-xs uppercase tracking-wider",children:"Subject"}),jsxRuntimeExports.jsx("input",{type:"text",value:"Thank you for your purchase!",disabled:!0,className:"w-full mt-1 bg-gray-800 text-gray-200 border border-gray-700 rounded-lg p-2 text-sm opacity-80"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-gray-400 text-xs uppercase tracking-wider",children:"Email Body"}),Tt?jsxRuntimeExports.jsxs("div",{className:"w-full h-72 bg-gray-900 border border-gray-700 rounded-lg flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full animate-bounce [animation-delay:0.15s]"}),jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full animate-bounce [animation-delay:0.3s]"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Writing your message..."})]}):jsxRuntimeExports.jsx("textarea",{value:dt,onChange:Ft=>kt(Ft.target.value),className:"w-full h-72 bg-gray-900 text-white border border-gray-700 rounded-lg p-4 text-sm leading-relaxed resize-none",style:{fontFamily:"ui-sans-serif, system-ui"}})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 bg-[#1E293B] flex justify-end items-center gap-3 border-t border-gray-700",children:[jsxRuntimeExports.jsx("button",{onClick:$t,className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition",children:"Close"}),jsxRuntimeExports.jsx("a",{href:`mailto:?subject=Thank%20you!&body=${encodeURIComponent(dt)}`,className:"px-4 py-2 bg-green text-black font-semibold rounded-lg hover:bg-green/80 transition",children:"Open Email App"}),jsxRuntimeExports.jsx("button",{onClick:Dt,className:"px-4 py-2 bg-blue text-white font-semibold rounded-lg hover:bg-blue/80 transition",children:"Mark as Sent"})]})]})}):null}function SellerDashboard(){const{user:et}=useAuth(),[dt,kt]=reactExports.useState(null),[$t,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(1),[Jt,Zt]=reactExports.useState(1),[er,rr]=reactExports.useState(""),[sr,nr]=reactExports.useState(!1),[ir,lr]=reactExports.useState(!1),[or,cr]=reactExports.useState(null);reactExports.useEffect(()=>{if(!(et!=null&&et.id))return;if(!(et!=null&&et.stripe_connect_account_id)){Ft(!1);return}(async()=>{try{const[jr,Rr,br]=await Promise.all([axiosInstance.get(`/seller/balance/${et.stripe_connect_account_id}`),axiosInstance.get(`/seller/payouts/${et.stripe_connect_account_id}`),axiosInstance.get(`/seller/sales/${et.id}?page=${Kt}&limit=20`)]);kt(jr.data.balance),Tt(Rr.data.payouts||[]),Zt(br.data.pages||1),Ht(br.data.sales||[])}catch(jr){console.error(" Error fetching seller data:",jr),y$4.error("Failed to load seller info.")}finally{Ft(!1)}})()},[et==null?void 0:et.stripe_connect_account_id,Kt]);const dr=async()=>{try{const mr=await axiosInstance.post("/seller/stripe-dashboard",{accountId:et.stripe_connect_account_id});window.open(mr.data.url,"_blank")}catch(mr){console.error("Stripe Dashboard Error:",mr),y$4.error("Unable to open Stripe dashboard.")}},ur=async mr=>{try{lr(!0),nr(!0),cr(mr.id);const jr=await axiosInstance.post("/seller/generate-thank-you",{saleId:mr.id,buyerEmail:mr.buyer_email,productName:mr.product_name});jr.data.success?rr(jr.data.message):rr("AI could not generate a message.")}catch(jr){console.error(jr),rr("AI generation failed.")}finally{lr(!1)}},pr=async mr=>{try{(await axiosInstance.post("/seller/mark-thank-you-sent",{saleId:mr})).data.success?(Ht(Rr=>Rr.map(br=>br.id===mr?{...br,thank_you_sent:1}:br)),y$4.success("Thank-you marked as sent"),nr(!1)):y$4.error("Failed to update status")}catch(jr){console.error(" Error marking thank-you sent:",jr),y$4.error("Server error")}};return Dt?jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen text-gray-400",children:"Loading seller data..."})}):et!=null&&et.stripe_connect_account_id?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:`
      p-8
      text-dashboard-text-light
      dark:text-dashboard-text-dark
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold normal-case",children:"Seller Dashboard"}),jsxRuntimeExports.jsx(Landmark,{size:22,className:`
        text-dashboard-muted-light
        dark:text-green
  `})]}),dt?jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-10",children:[jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg`,children:[jsxRuntimeExports.jsx("h3",{className:`text-dashboard-muted-light
            dark:text-dashboard-muted-dark text-sm mb-1`,children:"Available Balance"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-green",children:["$",(dt.available/100||0).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg`,children:[jsxRuntimeExports.jsx("h3",{className:`text-dashboard-muted-light
            dark:text-dashboard-muted-dark text-sm mb-1`,children:"Pending Balance"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:["$",(dt.pending/100||0).toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:`bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg flex items-center justify-center`,children:jsxRuntimeExports.jsx("button",{onClick:dr,className:"px-6 py-2 bg-green text-black font-semibold rounded-lg hover:opacity-90 transition",children:"Open Stripe Dashboard"})})]}):jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark mb-6",children:"No balance data found for this account."}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg`,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-dashboard-text-light dark:text-dashboard-text-dark mb-4",children:"Recent Payouts"}),$t.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:`min-w-full text-sm text-left text-dashboard-text-light
                dark:text-dashboard-text-dark`,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-700 text-dashboard-muted-light
                  dark:text-dashboard-muted-dark uppercase text-xs`,children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Date"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Amount"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Arrival"})]})}),jsxRuntimeExports.jsx("tbody",{children:$t.map(mr=>jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-800 hover:bg-dashboard-hover-light
                      dark:hover:bg-dashboard-hover-dark`,children:[jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:new Date(mr.created*1e3).toLocaleDateString()}),jsxRuntimeExports.jsxs("td",{className:"py-2 px-3 font-semibold",children:["$",(mr.amount/100).toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-semibold ${mr.status==="paid"?"bg-green-500/10 text-green-400":"bg-yellow-500/10 text-yellow-400"}`,children:mr.status})}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:new Date(mr.arrival_date*1e3).toLocaleDateString()})]},mr.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden space-y-4",children:$t.map(mr=>jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                rounded-xl p-4 shadow-md`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Date"}),jsxRuntimeExports.jsx("span",{children:new Date(mr.created*1e3).toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Amount"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["$",(mr.amount/100).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Status"}),jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-1 rounded ${mr.status==="paid"?"bg-green-500/10 text-green-400":"bg-yellow-500/10 text-yellow-400"}`,children:mr.status})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Arrival"}),jsxRuntimeExports.jsx("span",{children:new Date(mr.arrival_date*1e3).toLocaleDateString()})]})]},mr.id))})]}):jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"No payouts have been made yet."})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-10`,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-dashboard-text-light dark:text-dashboard-text-dark mb-4",children:"Recent Sales"}),Ut.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:`min-w-full text-sm text-left text-dashboard-text-light
                dark:text-dashboard-text-dark`,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-700 text-dashboard-muted-light
                    dark:text-dashboard-muted-dark uppercase text-xs`,children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Product"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Buyer Email"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Date"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Email Sent"})]})}),jsxRuntimeExports.jsx("tbody",{children:Ut.map(mr=>jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx("td",{className:"py-2 px-3 font-semibold",children:mr.product_name}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:mr.buyer_email}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:new Date(mr.delivered_at).toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:mr.thank_you_sent?jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green"}):jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr),className:"text-green hover:text-green/70 underline",children:"Auto-Gen Thank You"})})]},mr.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden space-y-4",children:Ut.map(mr=>jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark rounded-xl p-4 shadow-md`,children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Product"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:mr.product_name})]}),jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Buyer"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-text-light dark:text-dashboard-text-dark break-all",children:mr.buyer_email})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Date"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:new Date(mr.delivered_at).toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Thank You"}),mr.thank_you_sent?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-green text-sm font-semibold",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"}),"Sent"]}):jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr),className:"text-green text-sm font-semibold hover:text-green/70 underline",children:"Auto-Gen"})]})]},mr.id))})]}):jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"No sales yet."})]}),Ut.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-6 mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Yt(mr=>Math.max(1,mr-1)),disabled:Kt===1,className:`px-4 py-2 rounded-lg ${Kt===1?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}`,children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-dashboard-text-light dark:text-dashboard-text-dark text-sm",children:["Page ",Kt," of ",Jt]}),jsxRuntimeExports.jsx("button",{onClick:()=>Yt(mr=>Math.min(Jt,mr+1)),disabled:Kt===Jt,className:`px-4 py-2 rounded-lg ${Kt===Jt?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}`,children:"Next"})]}),jsxRuntimeExports.jsx(ThankYouModal,{visible:sr,message:er,setMessage:rr,onClose:()=>nr(!1),loading:ir,onMarkSent:()=>pr(or)})]}):jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-dashboard-text-light dark:text-dashboard-text-dark",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-3",children:"No Stripe Account Connected"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:["You need to connect your Stripe account in"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Settings"})," to view your seller dashboard and payouts."]}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/settings",className:"px-6 py-3 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Go to Settings"})]})})}function formatPostDate(et){return new Date(et).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function confirmDelete({message:et="Delete this comment?",onConfirm:dt}){y$4(({closeToast:kt})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:et}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-end",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{kt()},className:"px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-100",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{kt(),dt()},className:"px-3 py-1 text-xs rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]}),{autoClose:!1,closeOnClick:!1,closeButton:!1})}const MIN_TIP_DOLLARS=2;function TipModal({open:et,onTip:dt,onClose:kt,loading:$t}){const[Tt,Dt]=reactExports.useState("");if(!et)return null;const Ft=()=>{const Ut=parseFloat(Tt);isNaN(Ut)||Ut<MIN_TIP_DOLLARS||(dt(Math.round(Ut*100)),Dt(""))};return jsxRuntimeExports.jsx("div",{onClick:kt,className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{onClick:Ut=>Ut.stopPropagation(),className:`
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          rounded-2xl
          p-6
          w-full
          max-w-sm
          space-y-5
          shadow-2xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:"Support this writer"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"A small tip goes a long way and lets them know their words mattered."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-3",children:[2,5,10].map(Ut=>jsxRuntimeExports.jsxs("button",{onClick:()=>dt(Ut*100),disabled:$t,className:`
                py-3
                rounded-xl
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                font-medium
                transition
                hover:bg-green/10
                hover:border-green/40
                disabled:opacity-60
                disabled:cursor-not-allowed
              `,children:["$",Ut]},Ut))}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Custom amount (minimum $2)"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"$"}),jsxRuntimeExports.jsx("input",{type:"number",min:MIN_TIP_DOLLARS,step:"0.01",placeholder:"2.00",value:Tt,onChange:Ut=>Dt(Ut.target.value),className:`
                w-full
                pl-7
                pr-3
                py-2.5
                rounded-lg
                bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                text-sm
                focus:outline-none
                focus:ring-2
                focus:ring-green/40
              `})]}),jsxRuntimeExports.jsx("button",{onClick:Ft,disabled:$t||!Tt||parseFloat(Tt)<MIN_TIP_DOLLARS,className:`
              px-4
              rounded-lg
              bg-green
              text-black
              font-medium
              text-sm
              transition
              hover:bg-green/90
              disabled:opacity-50
              disabled:cursor-not-allowed
            `,children:"Send"})]}),Number(Tt)>0&&Number(Tt)<MIN_TIP_DOLLARS&&jsxRuntimeExports.jsx("p",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Minimum tip is $2"})]}),jsxRuntimeExports.jsx("button",{onClick:kt,className:`
            w-full
            text-xs
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
            hover:opacity-80
          `,children:"Maybe later"})]})})}function ButtonSpinner(){return jsxRuntimeExports.jsx("span",{className:`
        inline-block
        w-3 h-3
        border-2
        border-current
        border-t-transparent
        rounded-full
        animate-spin
      `})}function PostHeader({post:et,user:dt,navigate:kt,isStudioPost:$t,isAdmin:Tt,avatarInitial:Dt,toggleSubscribe:Ft,subLoading:Ut,isSubscribed:Ht,formatPostDate:Kt,timeAgo:Yt,togglePostLike:Jt,commentsLocked:Zt,handleShare:er,copied:rr,tipSuccess:sr,openTipModal:nr}){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4 sm:mb-6",children:[jsxRuntimeExports.jsx("button",{title:et.author_has_profile?void 0:"Profile coming soon",onClick:()=>{if((dt==null?void 0:dt.id)!==et.user_id){if(!et.author_has_profile){toast.info("This! author hasnt set up their profile yet");return}kt(`/community/authors/${et.user_id}`)}},className:`group -mt-2.5 ${et.author_has_profile?"cursor-pointer":"cursor-default"}`,children:$t?jsxRuntimeExports.jsx("img",{src:headerLogo,className:"w-12 h-12 rounded-full object-cover",alt:"The Messy Attic"}):et.author_image?jsxRuntimeExports.jsx(Img,{src:et.author_image,loader:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700/40 animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-full border flex items-center justify-center text-xl font-bold bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                      border-dashboard-border-light dark:border-dashboard-border-dark
                      text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:Dt}),decode:!0,alt:"User avatar",className:"w-12 h-12 rounded-full object-cover  shadow-xl transition-opacity duration-300"}):jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-green/90 border border-green flex items-center justify-center text-xl font-bold text-green",children:Dt})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[1px]",children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark text-lg font-semibold",children:et.author}),($t||Tt)&&jsxRuntimeExports.jsx("span",{className:`
                        flex items-center
                        text-dashboard-muted-light dark:text-dashboard-muted-dark
                        text-[10px]
                        px-0.5 py-0.5
                        rounded-full
                      `,children:jsxRuntimeExports.jsx(ShieldCheck,{size:15,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"})})]}),!$t&&(dt==null?void 0:dt.id)!==et.user_id&&jsxRuntimeExports.jsx("button",{onClick:()=>kt(`/community/subscribe/${et.user_id}/choose`,{state:{from:window.location.pathname}}),disabled:Ut,className:`
    text-xs
    px-2
    py-1
    min-w-[88px]
    rounded-md
    border
    transition
    flex
    items-center
    justify-center
    gap-1

    ${Ht?"bg-green/10 text-green border-green/30":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-text-light dark:text-dashboard-text-dark"}

    ${Ut?"opacity-70 cursor-not-allowed":"hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
  `,children:jsxRuntimeExports.jsx("span",{children:Ht?"Subscribed":"Subscribe"})})]}),jsxRuntimeExports.jsxs("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm mt-1 flex items-center flex-wrap gap-1",children:[jsxRuntimeExports.jsx("span",{children:Kt(et.created_at)}),jsxRuntimeExports.jsx("span",{className:"mx-1",children:""}),jsxRuntimeExports.jsx("span",{className:"opacity-80",children:Yt(et.created_at)}),jsxRuntimeExports.jsx("span",{className:"mx-1",children:""}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 opacity-80",children:[jsxRuntimeExports.jsx(Bookmark,{size:12,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark stroke-[2]"}),et.save_count]})]}),jsxRuntimeExports.jsx("div",{className:`
                  sm:hidden
                  mt-2
                  w-full
                  flex items-center
                  justify-between
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm sm:text-xs",children:[jsxRuntimeExports.jsx(Eye,{size:18,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Jt,className:`
                      flex items-center gap-2
                      text-sm
                      active:scale-95
                      transition
                    `,children:[jsxRuntimeExports.jsx(Heart,{size:18,className:et.has_liked?"text-red-500 fill-red-500":"opacity-80"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{var ir;return(ir=document.getElementById("comments"))==null?void 0:ir.scrollIntoView({behavior:"smooth"})},className:`
                      flex items-center gap-2
                      text-sm
                      active:scale-95
                      transition
                    `,children:[Zt?jsxRuntimeExports.jsx(MessageSquareLock,{size:15,className:"opacity-80"}):jsxRuntimeExports.jsx(MessageSquare,{size:15,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:er,className:`
                      flex items-center gap-2
                      text-sm
                      active:scale-95
                      transition
                    `,children:rr?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Check,{size:18,className:"text-green"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Share2,{size:18,className:"opacity-80"})})}),dt&&dt.id!==et.user_id&&(sr?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-green",children:[jsxRuntimeExports.jsx(Check,{size:18}),jsxRuntimeExports.jsx("span",{children:"Sent"})]}):jsxRuntimeExports.jsxs("button",{onClick:nr,className:`
                          flex items-center gap-2
                          text-sm
                          active:scale-95
                          transition
                        `,children:[jsxRuntimeExports.jsx(DollarSign,{size:18,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:"Tip"})]}))]})}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center gap-6 mt-2 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx(Eye,{size:16}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Jt,className:`
                    flex items-center gap-[3px]
                    transition
                    ${et.has_liked?"text-red-500":"opacity-70 hover:opacity-100"}
                  `,children:[jsxRuntimeExports.jsx(Heart,{size:16,fill:et.has_liked?"currentColor":"transparent"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[Zt?jsxRuntimeExports.jsx(MessageSquareLock,{size:15,className:"opacity-80"}):jsxRuntimeExports.jsx(MessageSquare,{size:15,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:er,className:`
                    relative
                    flex items-center gap-1
                     hover:text-sky-400/80
                    transition
                  `,children:rr?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Check,{size:16,className:"text-green"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Share2,{size:16})})}),dt&&dt.id!==et.user_id&&(sr?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-green text-xs",children:[jsxRuntimeExports.jsx(Check,{size:14}),jsxRuntimeExports.jsx("span",{children:"Tip sent!"})]}):jsxRuntimeExports.jsxs("button",{onClick:nr,className:`
                        flex items-center gap-1
                        text-dashboard-muted-light
                        dark:text-dashboard-muted-dark
                        hover:text-green
                        transition
                      `,children:[jsxRuntimeExports.jsx(DollarSign,{size:16}),jsxRuntimeExports.jsx("span",{children:"Tip"})]}))]})]})]})})}function FragmentAudioPlayer({audioUrl:et,audioTitle:dt,durationSeconds:kt,allowDownload:$t=!1}){var ur;const Tt=reactExports.useRef(null),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(0),[Kt,Yt]=reactExports.useState(0),[Jt,Zt]=reactExports.useState(1),[er,rr]=reactExports.useState(!1),sr=[1,1.25,1.5,2,3];reactExports.useEffect(()=>{const pr=Tt.current;if(!pr)return;const mr=()=>{Yt(pr.currentTime),Ht(pr.currentTime/pr.duration*100||0)},jr=()=>Ft(!1);return pr.addEventListener("timeupdate",mr),pr.addEventListener("ended",jr),()=>{pr.removeEventListener("timeupdate",mr),pr.removeEventListener("ended",jr)}},[]),reactExports.useEffect(()=>{const pr=Tt.current;pr&&(pr.playbackRate=Jt)},[Jt]),reactExports.useEffect(()=>{const pr=mr=>{mr.target.closest(".speed-menu-wrapper")||rr(!1)};return document.addEventListener("click",pr),()=>document.removeEventListener("click",pr)},[]);const nr=()=>{const pr=Tt.current;pr&&(Dt?pr.pause():pr.play(),Ft(!Dt))},ir=pr=>{const mr=Tt.current;if(!mr)return;const jr=pr.currentTarget.getBoundingClientRect(),br=(pr.clientX-jr.left)/jr.width;mr.currentTime=br*mr.duration},lr=pr=>{if(!pr||isNaN(pr))return"0:00";const mr=Math.floor(pr),jr=Math.floor(mr/3600),Rr=Math.floor(mr%3600/60),br=mr%60;return jr>0?`${jr}:${Rr.toString().padStart(2,"0")}:${br.toString().padStart(2,"0")}`:`${Rr}:${br.toString().padStart(2,"0")}`},or=()=>{const pr=Tt.current;pr&&(pr.currentTime=Math.min(pr.currentTime+10,pr.duration||kt||0))},cr=()=>{const pr=Tt.current;pr&&(pr.currentTime=Math.max(pr.currentTime-10,0))},dr=async pr=>{var Rr;pr.stopPropagation();const mr=et.split(".com/")[1],jr=await axiosInstance.post("/fragments/sign-audio-download",{key:mr,fileName:dt+".mp3"});(Rr=jr.data)!=null&&Rr.downloadUrl&&(window.location.href=jr.data.downloadUrl)};return jsxRuntimeExports.jsxs("div",{className:`
        mt-4
        rounded-xl
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        p-4
        space-y-3
      `,onClick:pr=>pr.stopPropagation(),children:[jsxRuntimeExports.jsx("audio",{ref:Tt,src:et,preload:"metadata"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark truncate",children:dt||"Audio"}),$t&&jsxRuntimeExports.jsxs("a",{onClick:dr,download:dt||"audio",className:`
              inline-flex items-center gap-1.5
              text-xs font-medium
              px-3 py-1.5
              rounded-full
              bg-green/10
              text-green
              hover:bg-green/20
              transition
            `,children:[jsxRuntimeExports.jsx(Download,{size:14}),"Download"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:cr,className:`
           w-9 h-9
          rounded-full
          flex items-center justify-center
          bg-dashboard-hover-light
          text-dashboard-text-light
          dark:bg-black
          dark:text-green
          hover:bg-dashboard-border-light
          dark:hover:bg-dashboard-hover-dark
          transition
        `,children:jsxRuntimeExports.jsx(RotateCcw,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:nr,className:`
         w-11 h-11
        rounded-full
        flex items-center justify-center
        bg-dashboard-border-light
        text-dashboard-text-light
        dark:bg-black
        dark:text-green
        hover:bg-dashboard-hover-light
        dark:hover:bg-dashboard-hover-dark
        transition
        `,children:Dt?jsxRuntimeExports.jsx(Pause,{size:20}):jsxRuntimeExports.jsx(Play,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:or,className:`
          w-9 h-9
          rounded-full
          flex items-center justify-center
          bg-dashboard-hover-light
          text-dashboard-text-light
          dark:bg-black
          dark:text-green
          hover:bg-dashboard-border-light
          dark:hover:bg-dashboard-hover-dark
          transition
        `,children:jsxRuntimeExports.jsx(RotateCw,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 space-y-1 ml-2",children:[jsxRuntimeExports.jsx("div",{onClick:ir,className:`
        h-2
        rounded-full
        bg-dashboard-border-light
        dark:bg-dashboard-border-dark
        cursor-pointer
        relative
        overflow-hidden
      `,children:jsxRuntimeExports.jsx("div",{className:"h-full bg-green transition-all",style:{width:`${Ut}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:lr(Kt)}),jsxRuntimeExports.jsx("span",{children:lr(kt||((ur=Tt.current)==null?void 0:ur.duration))})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative speed-menu-wrapper",children:[jsxRuntimeExports.jsx("button",{onClick:()=>rr(pr=>!pr),className:`
      w-9 h-9
      rounded-full
      flex items-center justify-center
      bg-dashboard-hover-light
      text-dashboard-text-light
      dark:bg-black
      dark:text-green
      hover:bg-dashboard-border-light
      dark:hover:bg-dashboard-hover-dark
      transition
    `,children:jsxRuntimeExports.jsx(EllipsisVertical,{size:16})}),er&&jsxRuntimeExports.jsx("div",{className:`
        absolute right-0 bottom-full mb-2
        w-28
        rounded-xl
        shadow-lg
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        py-1
        z-50
      `,children:sr.map(pr=>jsxRuntimeExports.jsxs("button",{onClick:()=>{Zt(pr),rr(!1)},className:`
            w-full text-left px-3 py-2 text-sm transition
            ${Jt===pr?"bg-green/10 text-green":"text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
          `,children:[pr,"x"]},pr))})]})]})]})}function PostBody({post:et,isFragment:dt,user:kt,navigate:$t,toggleBookmark:Tt,bookmarkSuccess:Dt,fragmentClasses:Ft,htmlClasses:Ut,timeAgo:Ht}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[!dt&&jsxRuntimeExports.jsx("h2",{className:`
                  not-prose
                  text-3xl sm:text-3xl
                  font-bold
                  tracking-tight
                  leading-tight
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                `,children:et.title}),!dt&&kt&&jsxRuntimeExports.jsx("button",{onClick:Tt,className:`
                  mt-1
                  p-2
                  rounded-lg
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  active:scale-95
                  transition
                `,title:et.is_bookmarked?"Saved":"Save for later",children:Dt?jsxRuntimeExports.jsx(Check,{size:18,className:"text-green"}):jsxRuntimeExports.jsx(Bookmark,{size:18,className:et.is_bookmarked?"text-green stroke-[2.2]":"opacity-80"})})]}),!dt&&et.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                text-base sm:text-lg
                font-normal
                leading-relaxed
                max-w-2xl
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
              `,children:et.subtitle}),et.image_url&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"Post",className:`
                w-full
                max-h-[420px]
                object-cover
                rounded-xl
                mt-12
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
              `})}),jsxRuntimeExports.jsxs("div",{className:dt?Ft:Ut,children:[jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:typeof(et==null?void 0:et.body)=="string"?et.body:""}}),et.has_paid_section===1&&et.viewer_has_paid_subscription===0&&jsxRuntimeExports.jsxs("div",{className:"relative mt-10",children:[jsxRuntimeExports.jsx("div",{className:`
                absolute -top-28 left-0 right-0 h-32
                pointer-events-none
                to-dashboard-sidebar-light
                dark:to-dashboard-sidebar-dark
              `}),jsxRuntimeExports.jsxs("div",{className:`
              relative
              p-6
              rounded-xl
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              text-center
            `,children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold mb-2",children:"This post continues for paid subscribers"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark mb-4",children:"Become a paid subscriber to finish reading and support this writer"}),jsxRuntimeExports.jsx("button",{onClick:()=>$t(`/community/subscribe/${et.user_id}/choose`,{state:{from:window.location.pathname}}),className:`
                px-5 py-2
                rounded-lg
                bg-green
                text-black
                font-medium
                hover:opacity-90
                transition
              `,children:"Become a Paid Subscriber"})]})]}),dt&&et.audio_url&&jsxRuntimeExports.jsx(FragmentAudioPlayer,{audioUrl:et.audio_url,audioTitle:et.audio_title,durationSeconds:et.audio_duration_seconds,allowDownload:et.allow_download}),dt&&et.reshared_id&&jsxRuntimeExports.jsxs("div",{className:`
            mt-6
            mb-4
            rounded-lg
            border border-dashboard-border-light
           dark:border-dashboard-border-dark
           bg-dashboard-sidebar-light
           dark:bg-dashboard-sidebar-dark
            p-4
                `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{if($t&&(kt==null?void 0:kt.id)!==et.reshared_author_id){if(et.reshared_author_has_profile===0){toast.info("This author hasnt set up their profile yet");return}$t(`/community/authors/${et.reshared_author_id}`)}},className:"cursor-pointer",children:et.reshared_author_image?jsxRuntimeExports.jsx("img",{src:et.reshared_author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-border-light dark:bg-dashboard-border-dark"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:et.reshared_author}),et.reshared_author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:14,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Ht(et.reshared_created_at)})]})]}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",children:et.reshared_body})]})]})]})}function ReplyBox({parentComment:et,onReply:dt,onCancel:kt}){const[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(""),er=async nr=>{const ir=nr.target.value;Tt(ir);try{const lr=ir.match(/@([a-zA-Z0-9_]*)$/);if(!lr){Yt(!1),Ht([]);return}const or=lr[1];if(Zt(or),or.length<1)return;const cr=await axiosInstance.get(`/community/users/search?query=${or}`);Ht(cr.data.users||[]),Yt(!0)}catch(lr){console.error(" mention search failed:",lr),Yt(!1)}},rr=nr=>{Tt(ir=>ir.replace(/@([a-zA-Z0-9_]*)$/,`@${nr} `)),Yt(!1),Ht([]),Zt("")},sr=async()=>{if(!$t.trim()||Dt)return;Ft(!0);const nr={body:$t};try{const ir=await axiosInstance.post(`/community/comments/${et.id}/reply`,nr);Tt(""),Yt(!1),Ht([]),Zt(""),dt(ir.data.reply)}catch(ir){console.error("Failed to submit reply:",ir)}finally{Ft(!1)}};return jsxRuntimeExports.jsxs("div",{className:"relative mt-4 -mx-3 -ml-4 sm:mx-0 sm:ml-0",children:[jsxRuntimeExports.jsx("textarea",{value:$t,onChange:er,className:`
          w-full
          min-h-[120px]
          resize-none
          rounded-xl
          p-4
          text-base
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          placeholder-dashboard-muted-light
          dark:placeholder-dashboard-muted-dark
          focus:outline-none
          focus:ring-2
          focus:ring-green/40
        `,placeholder:"Write your reply"}),Kt&&Ut.length>0&&jsxRuntimeExports.jsx("div",{className:`
      absolute
      left-0
      bottom-full
      mb-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
      z-50
    `,children:Ut.map(nr=>{var ir,lr;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr(nr.username),className:`
          w-full
          flex
          items-center
          gap-3
          px-3
          py-2
          text-left
          hover:bg-dashboard-hover-light
          dark:hover:bg-dashboard-hover-dark
          transition
        `,children:[nr.profile_image_url?jsxRuntimeExports.jsx("img",{src:nr.profile_image_url,alt:nr.username,className:"w-7 h-7 rounded-full object-cover border"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold",children:(lr=(ir=nr.username)==null?void 0:ir.charAt(0))==null?void 0:lr.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["@",nr.username]})]},nr.id)})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:kt,className:`
    px-4 py-2
    rounded-lg
    text-sm
    bg-dashboard-hover-light
    dark:bg-dashboard-hover-dark
    text-dashboard-text-light
    dark:text-dashboard-text-dark
    border
    border-dashboard-border-light
    dark:border-dashboard-border-dark
    transition
    hover:opacity-90
    focus:outline-none
    focus:ring-2
    focus:ring-dashboard-border-light
    dark:focus:ring-dashboard-border-dark
  `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:sr,disabled:Dt,className:`
    px-5 py-2
    rounded-lg
    bg-green
    text-black
    font-medium
    transition
    hover:bg-green/90
    disabled:opacity-60
    disabled:cursor-not-allowed
    flex items-center justify-center gap-2
  `,children:Dt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{size:"sm"}),jsxRuntimeExports.jsx("span",{children:"Posting"})]}):"Reply"})]})]})}function MentionCard({user:et,open:dt,onEnter:kt,onLeave:$t}){var Tt;return et?jsxRuntimeExports.jsx("div",{onMouseEnter:kt,onMouseLeave:$t,className:`
        absolute z-50 bottom-full mb-2 w-72
        rounded-xl
        border
        shadow-xl
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border-dashboard-border-light
        dark:border-dashboard-border-dark
        transition-all duration-150 ease-out
        opacity-0 translate-y-1 pointer-events-none
        ${dt?"opacity-100 translate-y-0 pointer-events-auto":""}
        p-3
      `,children:jsxRuntimeExports.jsxs("div",{className:et.author_has_profile?"":"opacity-60",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3 ",children:[et.profile_image_url?jsxRuntimeExports.jsx("img",{src:et.profile_image_url,className:"w-10 h-10 rounded-full object-cover self-start translate-y-[-14px]",alt:et.name}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gray-300 dark:bg-gray-700 text-sm font-semibold",children:((Tt=et.name)==null?void 0:Tt.charAt(0))||"U"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-rows-[auto_auto]",children:[jsxRuntimeExports.jsxs("div",{className:"translate-y-[4px]",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold leading-none text-dashboard-text-light dark:text-dashboard-text-dark",children:et.name}),jsxRuntimeExports.jsxs("p",{className:" -mt-3 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:["@",et.username]})]}),et.bio&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-xs line-clamp-2 text-dashboard-text-light dark:text-dashboard-text-dark",children:et.bio})]})]}),!et.author_has_profile&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-[11px] text-dashboard-muted-light italic",children:"Profile coming soon"})]})}):null}function Mention({username:et}){const[dt,kt]=reactExports.useState(!1),[$t,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),Jt=useNavigate(),Zt=async()=>{if(!($t||Dt)){Ft(!0);try{const rr=await axiosInstance.get(`/community/users/preview/${et}`);Tt(rr.data.user)}catch{}finally{Ft(!1)}}},er=rr=>{rr.stopPropagation(),$t!=null&&$t.author_has_profile&&Jt(`/community/authors/${$t.id}`)};return reactExports.useEffect(()=>{!Ut&&!Kt&&kt(!1)},[Ut,Kt]),jsxRuntimeExports.jsxs("span",{className:"relative inline-block",children:[jsxRuntimeExports.jsxs("span",{onClick:er,onMouseEnter:()=>{Ht(!0),kt(!0),Zt()},onMouseLeave:()=>{Ht(!1)},className:`
        text-sky-400 font-medium
        ${$t&&!$t.author_has_profile?"cursor-default opacity-60":"cursor-pointer hover:underline"}
      `,children:["@",et]}),jsxRuntimeExports.jsx(MentionCard,{user:$t,open:dt,onEnter:()=>Yt(!0),onLeave:()=>Yt(!1)})]})}function renderTextWithLinks(et){try{if(!et)return null;const dt=/\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)/g,kt=/(https?:\/\/[^\s]+)/g,$t=/https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/,Tt=/@([a-zA-Z0-9_]+)/g,Dt=[];let Ft=0;return et.replace(dt,(Ut,Ht,Kt,Yt)=>{Yt>Ft&&Dt.push(et.slice(Ft,Yt)),Dt.push(jsxRuntimeExports.jsx("a",{href:Kt,target:"_blank",rel:"noopener noreferrer",className:`
            underline
            text-dashboard-metric-light dark:text-dashboard-metric-dark
            hover:opacity-80
          `,children:Ht},`md-${Yt}-${Kt}`)),Ft=Yt+Ut.length}),Ft<et.length&&Dt.push(et.slice(Ft)),Dt.flatMap((Ut,Ht)=>typeof Ut!="string"?Ut:Ut.split(kt).flatMap((Kt,Yt)=>{if(Kt.match(kt)){const Jt=Kt.trim(),Zt=Jt.match($t);return Zt?jsxRuntimeExports.jsx("div",{className:"my-6",children:jsxRuntimeExports.jsx("iframe",{className:`
                    w-full aspect-video rounded-xl
                    border border-dashboard-border-light
                    dark:border-dashboard-border-dark
                  `,src:`https://www.youtube.com/embed/${Zt[1]}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},`yt-${Ht}-${Yt}`):jsxRuntimeExports.jsx("a",{href:Jt,target:"_blank",rel:"noopener noreferrer",className:`
                underline
                text-dashboard-metric-light dark:text-dashboard-metric-dark
                hover:opacity-80
              `,children:Jt},`url-${Ht}-${Yt}`)}return Kt.split(Tt).map((Jt,Zt)=>Zt%2===1?jsxRuntimeExports.jsx(Mention,{username:Jt},`mention-${Ht}-${Yt}-${Zt}`):jsxRuntimeExports.jsx("span",{className:"whitespace-pre-wrap",children:Jt},`text-${Ht}-${Yt}-${Zt}`))}))}catch(dt){return console.error(" renderTextWithLinks error:",dt),et}}function CommentThread({comment:et,postOwnerId:dt,depth:kt=0,loadReplies:$t,replies:Tt,setReplies:Dt,replyPages:Ft,timeAgo:Ut,toggleLike:Ht,setActiveReplyBox:Kt,activeReplyBox:Yt,editCommentId:Jt,editBody:Zt,setEditBody:er,setEditCommentId:rr,handleDelete:sr,onReplySubmit:nr,openReplies:ir,toggleReplyVisibility:lr,expandedComments:or,setExpandedComments:cr}){var Pr,Or,kr,Tr;const{user:dr}=useAuth(),ur=Tt[et.id]||[],pr=420,mr=(or==null?void 0:or[et.id])===!0,jr=et.body.length>pr,Rr=!mr&&jr?et.body.slice(0,pr).trim()+"":et.body,br=et.reply_count??(Tt[et.id]?Tt[et.id].length:0),_r=kt>0?1:0,Mr=kt===0;return jsxRuntimeExports.jsxs("div",{id:`comment-${et.id}`,children:[jsxRuntimeExports.jsxs("div",{className:Mr?`
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    border border-dashboard-border-light dark:border-dashboard-border-dark
    rounded-lg
  `:`
    relative
    ml-2 sm:ml-4
    mt-3 sm:mt-4
  `,children:[!Mr&&jsxRuntimeExports.jsx("span",{className:`
      absolute
      left-[-1px]
      top-4
      w-2 h-2
      rounded-full
      bg-dashboard-border-light
      dark:bg-dashboard-border-dark
      z-10
    `}),!Mr&&jsxRuntimeExports.jsx("span",{className:`
      absolute
      left-0
      top-3
      bottom-3
      w-px
      bg-dashboard-border-light/40
      dark:bg-dashboard-border-dark/40
      z-0
    `}),jsxRuntimeExports.jsx("div",{className:Mr?"p-3":"pl-4 sm:pl-5 py-2 sm:py-3",children:Jt===et.id?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:Zt,onChange:xr=>er(xr.target.value),className:"w-full bg-gray-800 border border-gray-700 p-2 rounded text-gray-100 text-sm",rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>nr(et.id),className:"px-3 py-1 bg-blue text-white text-xs rounded hover:bg-blue/90",children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>{rr(null),er("")},className:"px-3 py-1 bg-gray-700 text-gray-300 text-xs rounded hover:bg-gray-600",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx("button",{title:et.author_has_profile?void 0:"Profile coming soon",onClick:()=>{if((dr==null?void 0:dr.id)!==et.user_id){if(!et.author_has_profile){y$4.info("This author hasnt set up their profile yet");return}navigate(`/community/authors/${et.user_id}`)}},className:`flex-shrink-0 ${!et.author_has_profile||et.author_role==="admin"?"cursor-default":"cursor-pointer"}`,children:et.author_image?jsxRuntimeExports.jsx(Img,{src:et.author_image,loader:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700/40 animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-xs font-semibold text-gray-300",children:((Or=(Pr=et.author)==null?void 0:Pr.charAt(0))==null?void 0:Or.toUpperCase())||"U"}),decode:!0,alt:"User avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-700 transition-opacity duration-300"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-xs font-semibold text-gray-300",children:((Tr=(kr=et.author)==null?void 0:kr.charAt(0))==null?void 0:Tr.toUpperCase())||"U"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px] text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:et.author}),et.author_role==="admin"&&jsxRuntimeExports.jsx("span",{className:"p-1",children:jsxRuntimeExports.jsx(ShieldCheck,{size:11,className:"text-green"})})]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:Ut(et.created_at)}),et.updated_at&&new Date(et.updated_at)>new Date(et.created_at)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-[10px] opacity-60",children:"edited"})]})]})]}),et.reply_to_author&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:["Replying to"," ",jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["@",et.reply_to_author]})]}),jsxRuntimeExports.jsx("div",{className:`
            prose prose-sm max-w-none
             dark:prose-invert
             dark:prose-a:text-sky-400
             dark:prose-a:decoration-sky-400
            text-dashboard-text-light dark:text-dashboard-text-dark
             whitespace-pre-wrap mb-2
          `,children:renderTextWithLinks(Rr)}),!mr&&jr&&jsxRuntimeExports.jsx("button",{onClick:()=>cr(xr=>({...xr,[et.id]:!0})),className:"text-xs text-sky-400 mt-1 hover:underline",children:"See more"}),mr&&jr&&jsxRuntimeExports.jsx("button",{onClick:()=>cr(xr=>({...xr,[et.id]:!1})),className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1 hover:underline",children:"See less"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Ht(et,et.parent_id),className:`flex items-center gap-1 ${et.user_liked?"text-red-600":"text-gray-500"} hover:text-red-600/90 transition-transform ${et.user_liked?"scale-110":"scale-100"}`,children:[jsxRuntimeExports.jsx(Heart,{size:12,fill:et.user_liked?"currentColor":"transparent",className:et.user_liked?"animate-pingOnce":""}),et.like_count]}),jsxRuntimeExports.jsx("button",{onClick:()=>Kt(et.id),className:`text-dashboard-text-light dark:text-dashboard-text-dark
                hover:opacity-80
`,children:"Reply"}),dr&&et.user_id===dr.id&&jsxRuntimeExports.jsx("button",{onClick:()=>{rr(et.id),er(et.body)},className:`
                    text-dashboard-muted-light dark:text-dashboard-muted-dark
                    hover:opacity-80
`,children:"Edit"}),dr&&(et.user_id===dr.id||dt===dr.id)&&jsxRuntimeExports.jsx("button",{onClick:()=>sr(et.id,et.parent_id),className:"text-dashboard-muted-light dark:text-dashboard-muted-dark hover:opacity-80",children:"Delete"})]}),Yt===et.id&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(ReplyBox,{parentComment:et,onReply:async xr=>{Kt(null);const wr=et.parent_id||et.id;Dt(zr=>({...zr,[wr]:[...zr[wr]||[],xr]})),await $t(wr)},onCancel:()=>Kt(null)})})]})})]}),br>0&&jsxRuntimeExports.jsx("button",{onClick:()=>lr(et.id),className:`text-xs text-dashboard-text-light dark:text-dashboard-text-dark
    hover:opacity-80
    mt-2 ${_r===1?"ml-4 sm:ml-6":"ml-1"}`,children:ir[et.id]?"Hide replies":`View replies (${br})`}),ir[et.id]&&ur.filter(xr=>xr&&xr.id).map(xr=>jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx(CommentThread,{comment:xr,depth:1,postOwnerId:dt,loadReplies:$t,replies:Tt,replyPages:Ft,timeAgo:Ut,toggleLike:Ht,activeReplyBox:Yt,setActiveReplyBox:Kt,editCommentId:Jt,editBody:Zt,setEditBody:er,setEditCommentId:rr,handleDelete:sr,onReplySubmit:nr,openReplies:ir,toggleReplyVisibility:lr,expandedComments:or,setExpandedComments:cr},xr.id)})),ir[et.id]&&Ft[et.id]&&jsxRuntimeExports.jsx("button",{onClick:()=>$t(et.id,Ft[et.id]),className:"text-xs text-blue hover:text-blue/80 ml-3 mt-1",children:"Show more replies"})]})}function CreateCommentBox({targetType:et="post",targetId:dt,onComment:kt}){const[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(""),er=async nr=>{const ir=nr.target.value;Tt(ir);try{const lr=ir.match(/@([a-zA-Z0-9_]*)$/);if(!lr){Yt(!1),Ht([]);return}const or=lr[1];if(Zt(or),or.length<1)return;const cr=await axiosInstance.get(`/community/users/search?query=${or}`);Ht(cr.data.users||[]),Yt(!0)}catch(lr){console.error(" mention search failed:",lr),Yt(!1)}},rr=nr=>{try{Tt(ir=>ir.replace(/@([a-zA-Z0-9_]*)$/,`@${nr} `)),Yt(!1),Ht([]),Zt("")}catch(ir){console.error(" insertMention error:",ir)}},sr=async()=>{if(!(!$t.trim()||Dt)){Ft(!0);try{const ir=(await axiosInstance.post("/community/comments",{targetType:et,targetId:dt,body:$t})).data.comment;Tt(""),Yt(!1),Ht([]),Zt(""),kt&&ir&&kt(ir)}catch(nr){console.error("Failed to add comment:",nr)}finally{Ft(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("textarea",{value:$t,onChange:er,placeholder:"Write a comment...",className:`
        w-full
        min-h-[100px]
        p-3
        rounded-lg
        bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        text-dashboard-text-light dark:text-dashboard-text-dark
        placeholder-dashboard-muted-light dark:placeholder-dashboard-muted-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        focus:outline-none
        focus:ring-1
        focus:ring-green
      `}),Kt&&Ut.length>0&&jsxRuntimeExports.jsx("div",{className:`
      absolute
      left-0
      bottom-full
      mb-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
      z-50
    `,children:Ut.map(nr=>{var ir,lr;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr(nr.username),className:`
    w-full
    flex
    items-center
    gap-3
    px-3
    py-2
    text-left
    hover:bg-dashboard-hover-light
    dark:hover:bg-dashboard-hover-dark
    transition
  `,children:[nr.profile_image_url?jsxRuntimeExports.jsx("img",{src:nr.profile_image_url,alt:nr.username,className:"w-7 h-7 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}):jsxRuntimeExports.jsx("div",{className:`
        w-7 h-7
        rounded-full
        flex
        items-center
        justify-center
        text-xs
        font-semibold
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border
        border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:(lr=(ir=nr.username)==null?void 0:ir.charAt(0))==null?void 0:lr.toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:["@",nr.username]})})]},nr.id)})}),jsxRuntimeExports.jsx("button",{onClick:sr,disabled:Dt,className:`
    mt-6
    px-5 py-2
    rounded-lg
    transition
    border
    ${Dt?"opacity-50 cursor-not-allowed":"hover:bg-green hover:text-black"}
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    text-dashboard-text-light dark:text-dashboard-text-dark
    border-dashboard-border-light dark:border-dashboard-border-dark
  `,children:Dt?"Posting":"Post"})]})}function CommentsSection({commentsState:et,postState:dt,handlers:kt,uiHelpers:$t}){const{comments:Tt,setComments:Dt,replies:Ft,setReplies:Ut,setOpenReplies:Ht,replyPages:Kt,expandedComments:Yt,setExpandedComments:Jt,openReplies:Zt,activeReplyBox:er,editCommentId:rr,editBody:sr}=et,{post:nr,setPost:ir,commentsLocked:lr,isCommentsPaid:or,targetType:cr}=dt,{toggleLike:dr,toggleReplies:ur,loadReplies:pr,setActiveReplyBox:mr,setEditCommentId:jr,setEditBody:Rr,saveEditedComment:br,handleDelete:_r}=kt,{user:Mr,navigate:Pr,redirectPath:Or,timeAgo:kr,observerRef:Tr}=$t;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:`text-xl font-semibold mb-5
            text-dashboard-text-light dark:text-dashboard-text-dark`,children:"Comments"}),lr?jsxRuntimeExports.jsxs("div",{className:"mb-10 p-4 rounded-lg border border-dashboard-border-light dark:border-dashboard-border-dark text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageSquareLock,{size:16}),jsxRuntimeExports.jsx("span",{children:or?"Comments are for paid subscribers only.":"Comments are private."}),or&&(Mr==null?void 0:Mr.id)!==nr.user_id&&jsxRuntimeExports.jsx("button",{onClick:()=>Pr(`/community/subscribe/${nr.user_id}/choose`,{state:{from:Or}}),className:`
                    text-green
                    text-sm
                    font-medium
                    w-fit
                    hover:underline
                  `,children:"Become a paid subscriber "})]}):Tt.length===0?jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark mb-6",children:"No comments yet."}):null,!lr&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-10",children:[Tt.map(xr=>{var es;const wr=((es=xr.author)==null?void 0:es.charAt(0).toUpperCase())??"U",zr=xr.author_role==="admin",Hr=420,Yr=Yt[xr.id]!==!1,rs=xr.body.length>Hr,as=!Yr&&rs?xr.body.slice(0,Hr).trim()+"":xr.body;return jsxRuntimeExports.jsx("div",{className:`
                    /* mobile */
                    bg-transparent
                    border-b border-dashboard-border-light/50 dark:border-dashboard-border-dark/50
                    rounded-none
                    shadow-none
                    p-3

                    /* desktop */
                    sm:bg-dashboard-sidebar-light
                    sm:dark:bg-dashboard-sidebar-dark
                    sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
                    sm:rounded-lg
                    sm:p-5
                    lg:p-6
                    sm:shadow-inner
                  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("button",{title:xr.author_has_profile?void 0:"Profile coming soon",onClick:()=>{if((Mr==null?void 0:Mr.id)!==xr.user_id){if(!xr.author_has_profile){toast.info("This author hasnt set up their profile yet");return}Pr(`/community/authors/${xr.user_id}`)}},className:`flex-shrink-0 ${xr.author_has_profile?"cursor-pointer":"cursor-default"}`,children:xr.author_image?jsxRuntimeExports.jsx(Img,{src:xr.author_image,loader:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700/40 animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:`
                                w-10 h-10 rounded-full
                                flex items-center justify-center
                                text-sm font-semibold
                                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                                border border-dashboard-border-light dark:border-dashboard-border-dark
                                text-dashboard-muted-light dark:text-dashboard-muted-dark
                              `,children:wr}),decode:!0,alt:"Comment avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-700 transition-opacity duration-300"}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-sm font-semibold text-gray-300",children:wr})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-2 flex items-center gap-[4px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:xr.author}),zr&&jsxRuntimeExports.jsx("span",{className:"px-1",children:jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-dashboard-muted-light dark:text-green"})})]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:kr(xr.created_at)}),xr.updated_at&&new Date(xr.updated_at).getTime()>new Date(xr.created_at).getTime()&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-[10px] opacity-60",children:"edited"})]})]}),rr!==xr.id&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`
                              prose prose-sm max-w-none
                              my-1
                              text-dashboard-text-light dark:text-dashboard-text-dark
                              whitespace-pre-wrap
                              dark:prose-invert
                              dark:prose-a:text-sky-400
                              dark:prose-a:decoration-sky-400
                            `,children:renderTextWithLinks(as)}),!Yr&&rs&&jsxRuntimeExports.jsx("button",{onClick:()=>Jt(Xr=>({...Xr,[xr.id]:!0})),className:"text-xs text-sky-400 mt-1 hover:underline",children:"See more"}),Yr&&rs&&jsxRuntimeExports.jsx("button",{onClick:()=>Jt(Xr=>({...Xr,[xr.id]:!1})),className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1 hover:underline",children:"See less"})]}),rr===xr.id&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("textarea",{value:sr,onChange:Xr=>Rr(Xr.target.value),className:`
                              w-full
                              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                              border border-dashboard-border-light dark:border-dashboard-border-dark
                              p-2 rounded
                              text-dashboard-text-light dark:text-dashboard-text-dark
                              text-sm
                            `,rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>br(xr.id),className:"px-3 py-1 bg-blue text-white text-xs rounded hover:bg-blue/90",children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>{jr(null),Rr("")},className:`
                                px-3 py-1
                                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                                text-dashboard-muted-light dark:text-dashboard-muted-dark
                                border border-dashboard-border-light dark:border-dashboard-border-dark
                                text-xs rounded
                                hover:opacity-80
`,children:"Cancel"})]})]}),rr!==xr.id&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>dr(xr),className:`text-xs ${xr.user_liked?"text-red-600":"text-dashboard-muted-light dark:text-dashboard-muted-dark"} hover:opacity-80`,children:[jsxRuntimeExports.jsx(Heart,{size:12,fill:xr.user_liked?"currentColor":"transparent",className:"inline-block mr-1"}),xr.like_count]}),!lr&&jsxRuntimeExports.jsx("button",{onClick:()=>mr(xr.id),className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:"Reply"}),xr.reply_count>0&&jsxRuntimeExports.jsx("button",{onClick:()=>ur(xr.id),className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:Zt[xr.id]?"Hide replies":`View replies (${xr.reply_count})`}),!Zt[xr.id]&&Mr&&xr.user_id===Mr.id&&jsxRuntimeExports.jsx("button",{onClick:()=>{jr(xr.id),Rr(xr.body)},className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:"Edit"}),!Zt[xr.id]&&Mr&&(xr.user_id===Mr.id||nr.user_id===Mr.id)&&jsxRuntimeExports.jsx("button",{onClick:()=>_r(xr.id),className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:"Delete"})]}),er===xr.id&&jsxRuntimeExports.jsx("div",{className:"mt-3 ml-6",children:jsxRuntimeExports.jsx(ReplyBox,{parentComment:xr,onReply:async Xr=>{Ut(Wr=>({...Wr,[xr.id]:[...Wr[xr.id]||[],Xr]})),Dt(Wr=>Wr.map(cs=>cs.id===xr.id?{...cs,reply_count:(cs.reply_count||0)+1}:cs)),Ht(Wr=>({...Wr,[xr.id]:!0})),setTimeout(()=>mr(null),100)},onCancel:()=>mr(null)})}),Zt[xr.id]&&(Ft[xr.id]||[]).map(Xr=>jsxRuntimeExports.jsx(CommentThread,{postOwnerId:nr.user_id,comment:Xr,depth:1,loadReplies:pr,replies:Ft,setReplies:Ut,replyPages:Kt,timeAgo:kr,toggleLike:dr,activeReplyBox:er,setActiveReplyBox:mr,editCommentId:rr,editBody:sr,setEditBody:Rr,setEditCommentId:jr,handleDelete:_r,onReplySubmit:br,openReplies:Zt,toggleReplyVisibility:ur,expandedComments:Yt,setExpandedComments:Jt},Xr.id))]})]})},xr.id)}),jsxRuntimeExports.jsx("div",{ref:Tr,className:"h-10"})]}),!lr&&jsxRuntimeExports.jsx(CreateCommentBox,{targetType:cr,targetId:nr.id,onComment:xr=>{Dt(wr=>[xr,...wr]),ir(wr=>({...wr,comment_count:(wr.comment_count||0)+1}))}})]})})}function CommunityPost({targetType:et="post"}){var vs,Os,tn;const dt=et==="fragment",{user:kt,authLoading:$t}=useAuth(),{slug:Tt,id:Dt}=useParams(),Ft=dt?Dt:Tt,Ut=useNavigate(),[Ht,Kt]=reactExports.useState(null),[Yt,Jt]=reactExports.useState([]),[Zt,er]=reactExports.useState(1),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(!0),[lr,or]=reactExports.useState({}),[cr,dr]=reactExports.useState({}),[ur,pr]=reactExports.useState(!1),[mr,jr]=reactExports.useState(null),[Rr,br]=reactExports.useState(""),[_r,Mr]=reactExports.useState(null),[Pr,Or]=reactExports.useState(!1),[kr,Tr]=reactExports.useState({}),xr=useLocation(),wr=new URLSearchParams(xr.search),zr=wr.get("comment"),[Hr,Yr]=reactExports.useState(!1),[rs,as]=reactExports.useState(!1),[es,Xr]=reactExports.useState(!1),[Wr,cs]=reactExports.useState(!1),[ns,us]=reactExports.useState({}),[fs,ss]=reactExports.useState(!1),[ps,ls]=reactExports.useState(!1),[js,$s]=reactExports.useState(!1),Ds=`
  post-body-frag
  max-w-none
  text-sm leading-relaxed
  text-dashboard-text-light dark:text-dashboard-text-dark
  whitespace-pre-wrap
`,Ts=`
  post-body
  prose prose-md max-w-none
  prose-p:text-dashboard-text-light
  prose-headings:text-dashboard-text-light
  prose-strong:text-dashboard-text-light
  prose-li:text-dashboard-text-light
  dark:prose-p:text-dashboard-text-dark
  dark:prose-headings:text-dashboard-text-dark
  dark:prose-strong:text-dashboard-text-dark
  dark:prose-li:text-dashboard-text-dark
`,As={post:{fetch:bs=>axiosInstance.get(`/community/posts/${bs}`),fetchComments:(bs,ks,Rs)=>axiosInstance.get(`/community/posts/${bs}/comments?page=${ks}&limit=${Rs}`),idKey:"id",redirectBase:"/community/post"},fragment:{fetch:bs=>axiosInstance.get(`/fragments/${bs}`),fetchComments:(bs,ks,Rs)=>axiosInstance.get(`/community/comments?targetType=fragment&targetId=${bs}&page=${ks}&limit=${Rs}`),idKey:"id",redirectBase:"/community"}},_s=dt?"/community":`/community/post/${Ht==null?void 0:Ht.slug}`;reactExports.useEffect(()=>{Yt.length&&us(bs=>{const ks={...bs};return Yt.forEach(Rs=>{ks[Rs.id]===void 0&&(ks[Rs.id]=Rs.body.length<=420)}),ks})},[Yt]);const Ms=()=>{if(!kt){Ut(`/signup-community?redirect=${_s}`);return}Xr(!0)},Vs=async bs=>{var ks,Rs;if(!Wr){cs(!0);try{const Ps=await axiosInstance.post("/seller-checkout/create-checkout-session",{checkoutType:"tip",targetType:et,targetId:Ht.id,tipAmountInCents:bs});window.location.href=Ps.data.url}catch(Ps){if(((Rs=(ks=Ps.response)==null?void 0:ks.data)==null?void 0:Rs.message)==="Recipient cannot receive tips"){y$4.info("This writer hasnt enabled tips yet. Youll be able to support them once they do."),cs(!1);return}y$4.error("Failed to start tip checkout"),console.error(Ps)}cs(!1)}};reactExports.useEffect(()=>{$t||Ht&&(kt||Ut(`/signup-community?redirect=${_s}`,{replace:!0}))},[kt,$t,Ht,_s]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]);const Gs=async()=>{var bs;try{const ks=await As[et].fetch(Ft),Rs=et==="fragment"?ks.data.fragment:ks.data.post;if(!Rs){console.error("Missing post data:",ks.data);return}if(Kt(Rs),kt!=null&&kt.id&&(Rs!=null&&Rs.user_id)&&kt.id!==Rs.user_id)try{const zs=await axiosInstance.get(`/community/subscriptions/${Rs.user_id}/status`);Yr(zs.data.subscribed),$s(zs.data.has_paid_subscription),ls(zs.data.subscriber_has_paid)}catch(zs){console.error("Failed to load subscription status",zs)}const Ps=await As[et].fetchComments(Rs.id,1,10);Jt(Ps.data.comments||[]),console.log(" COMMENTS FETCH RESULT",{targetType:et,targetId:Rs.id,count:(bs=Ps.data.comments)==null?void 0:bs.length,comments:Ps.data.comments}),er(Ps.data.nextPage||null),ir(!!Ps.data.nextPage)}catch(ks){console.error("Failed to load:",ks)}},Ws=async()=>{if(!rs){if(!kt){Ut(`/signup-community?redirect=${_s}`);return}if(Hr){as(!0);try{await axiosInstance.delete(`/community/subscriptions/${Ht.user_id}/subscribe`),Yr(!1)}catch(bs){console.error("Unsubscribe failed",bs)}as(!1);return}if(!js){as(!0);try{await axiosInstance.post(`/community/subscriptions/${Ht.user_id}/subscribe`),Yr(!0)}catch(bs){console.error("Subscribe failed",bs)}as(!1);return}Ut(`/community/subscribe/${Ht.user_id}/choose`,{state:{from:_s}})}},Xs=async()=>{if(!kt){Ut(`/signup-community?redirect=${_s}`);return}const bs={targetType:et,targetId:Ht.id};try{Ht.has_liked?(await axiosInstance.delete("/community/delete-like",{data:bs}),Kt(ks=>({...ks,has_liked:0,like_count:Math.max(ks.like_count-1,0)}))):(await axiosInstance.post("/community/likes",bs),Kt(ks=>({...ks,has_liked:1,like_count:ks.like_count+1})))}catch{y$4.error("Failed to update like")}},Qs=async()=>{if(!kt){Ut(`/signup-community?redirect=${_s}`);return}Kt(bs=>{const ks=bs.is_bookmarked;return{...bs,is_bookmarked:!ks,save_count:Math.max((bs.save_count||0)+(ks?-1:1),0)}});try{const bs=await axiosInstance.post(`/community/bookmark/${Ht.id}`);Kt(ks=>({...ks,is_bookmarked:bs.data.bookmarked})),bs.data.bookmarked&&(ss(!0),setTimeout(()=>ss(!1),1200))}catch(bs){console.error("Bookmark toggle failed:",bs),Kt(ks=>{const Rs=ks.is_bookmarked;return{...ks,is_bookmarked:!Rs,save_count:Math.max((ks.save_count||0)+(Rs?-1:1),0)}}),y$4.error("Failed to save bookmark")}};reactExports.useEffect(()=>{if(wr.get("tipped")==="1"){Or(!0);const bs=new URL(window.location.href);bs.searchParams.delete("tipped"),window.history.replaceState({},"",bs.pathname),setTimeout(()=>{Or(!1)},1800)}},[]),reactExports.useEffect(()=>{Ft&&Gs()},[Ft,kt]);const Bs=async()=>{if(!(!nr||rr)){sr(!0);try{const bs=await As[et].fetchComments(Ht.id,Zt,10);Jt(ks=>[...ks,...bs.data.comments||[]]),bs.data.nextPage?er(bs.data.nextPage):ir(!1)}catch(bs){console.error("Load more failed:",bs)}sr(!1)}},qs=reactExports.useRef();reactExports.useEffect(()=>{const bs=new IntersectionObserver(ks=>{ks[0].isIntersecting&&Bs()},{threshold:1});return qs.current&&bs.observe(qs.current),()=>bs.disconnect()},[]);const Ks=async(bs,ks=1)=>{try{const Ps=await axiosInstance.get(`/community/comments/${bs}/replies?page=${ks}&limit=5`);let zs=Ps.data.replies||[];zs=zs.filter(Vn=>Vn&&Vn.id);const Zs=[...zs];dr(Vn=>({...Vn,[bs]:ks===1?[...Zs]:[...Vn[bs]||[],...Zs]})),Tr(Vn=>({...Vn,[bs]:Ps.data.nextPage}))}catch(Ps){console.error("Failed to load replies:",Ps)}},yn=bs=>{or(ks=>({...ks,[bs]:!ks[bs]})),cr[bs]||Ks(bs)},Dn=async bs=>{try{const ks=await axiosInstance.put(`/community/comments/${bs}`,{body:Rr}),{body:Rs,updated_at:Ps}=ks.data.comment;Jt(zs=>zs.map(Zs=>Zs.id===bs?{...Zs,body:Rs,updated_at:Ps}:Zs)),dr(zs=>{const Zs={...zs};return Object.keys(Zs).forEach(Vn=>{Zs[Vn]=Zs[Vn].map(Lo=>Lo.id===bs?{...Lo,body:Rs,updated_at:Ps}:Lo)}),Zs}),jr(null),br("")}catch(ks){console.error("Failed to update comment:",ks),y$4.error("Failed to save edit")}},na=(bs,ks=null)=>{confirmDelete({message:"Delete this comment?",onConfirm:async()=>{try{ks?dr(Rs=>({...Rs,[ks]:(Rs[ks]||[]).filter(Ps=>Ps.id!==bs)})):(Jt(Rs=>Rs.filter(Ps=>Ps.id!==bs)),Kt(Rs=>({...Rs,comment_count:Math.max((Rs.comment_count||1)-1,0)}))),await axiosInstance.delete(`/community/comments/${bs}`),y$4.success("Comment deleted")}catch(Rs){console.error(" Delete failed:",Rs),y$4.error("Failed to delete comment")}}})},jo=async(bs,ks=null)=>{try{bs.user_liked?(await axiosInstance.delete(`/community/comments/${bs.id}/like`),bs.like_count-=1,bs.user_liked=0):(await axiosInstance.post(`/community/comments/${bs.id}/like`),bs.like_count+=1,bs.user_liked=1),ks?dr(Rs=>({...Rs,[ks]:[...Rs[ks]]})):Jt([...Yt])}catch(Rs){console.error("Failed to toggle like:",Rs)}};reactExports.useEffect(()=>{zr&&setTimeout(()=>{const bs=document.getElementById(`comment-${zr}`);bs&&(bs.scrollIntoView({behavior:"smooth",block:"center"}),bs.classList.add("ring-2","ring-green","rounded-lg"),setTimeout(()=>{bs.classList.remove("ring-2","ring-green")},3e3))},500)},[Yt,cr]);const Ls=((vs=xr.state)==null?void 0:vs.returnTo)||(dt?"/community":Ht?`/community/topic/${Ht.topic_id}`:"/community");if(reactExports.useEffect(()=>{Ls&&window.history.replaceState({...window.history.state,backTo:Ls},"")},[Ls]),!Ht)return jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Loading post"});const hs={PUBLIC:"public",PAID:"paid",PRIVATE:"private"},Gr=Ht.comments_visibility===hs.PAID,gs=Ht.comments_visibility===hs.PRIVATE,xs=(()=>(kt==null?void 0:kt.id)===Ht.user_id?!1:!!(Ht.comments_locked===1||Gr&&!ps||gs&&!Hr))(),ms=((tn=(Os=Ht.author)==null?void 0:Os.charAt(0))==null?void 0:tn.toUpperCase())??"U",ds=Ht.is_admin_post===1,ys=bs=>{const ks=new Date(bs),Rs=Math.floor((Date.now()-ks)/1e3);if(Rs<60)return"Just now";const Ps=Math.floor(Rs/60);if(Ps<60)return`${Ps}m ago`;const zs=Math.floor(Ps/60);return zs<24?`${zs}h ago`:`${Math.floor(zs/24)}d ago`},ws=Ht.author_role==="admin",Ss=dt?`${window.location.origin}/community/fragments/${Ht.id}`:`${window.location.origin}/p/${Ht.slug}`,Fs=async()=>{try{await navigator.clipboard.writeText(Ss),pr(!0),setTimeout(()=>pr(!1),1500)}catch{y$4.error("Failed to copy link")}};return jsxRuntimeExports.jsxs("div",{className:`
      w-full flex justify-center items-start min-h-screen
      px-0 py-0
      sm:px-6 sm:py-0
      lg:py-0
    `,children:[jsxRuntimeExports.jsx("div",{className:`
        w-full max-w-4xl

        /* mobile */
        bg-transparent
        border-none
        rounded-none
        shadow-none
        p-0
        pt-14

        /* desktop */
        sm:bg-dashboard-sidebar-light
        sm:dark:bg-dashboard-sidebar-dark
        sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
        sm:rounded-xl
        sm:p-8
        lg:p-10
        sm:shadow-xl

        space-y-6 sm:space-y-8 lg:space-y-10
      `,children:jsxRuntimeExports.jsxs("div",{className:"w-full space-y-6 sm:space-y-8 lg:space-y-100",children:[jsxRuntimeExports.jsxs("div",{className:`
            bg-transparent
            border-none
            rounded-none
            shadow-none
            p-0

            sm:bg-dashboard-sidebar-light
            sm:dark:bg-dashboard-sidebar-dark
            sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
            sm:rounded-xl
            sm:p-8
            sm:shadow-lg
          `,children:[jsxRuntimeExports.jsx(PostHeader,{post:Ht,user:kt,navigate:Ut,isStudioPost:ds,isAdmin:ws,avatarInitial:ms,toggleSubscribe:Ws,subLoading:rs,isSubscribed:Hr,formatPostDate,timeAgo:ys,togglePostLike:Xs,commentsLocked:xs,handleShare:Fs,copied:ur,tipSuccess:Pr,openTipModal:Ms}),jsxRuntimeExports.jsx(PostBody,{post:Ht,isFragment:dt,user:kt,navigate:Ut,toggleBookmark:Qs,bookmarkSuccess:fs,fragmentClasses:Ds,htmlClasses:Ts,timeAgo:ys})]}),jsxRuntimeExports.jsx(CommentsSection,{commentsState:{comments:Yt,setComments:Jt,replies:cr,setReplies:dr,setOpenReplies:or,replyPages:kr,expandedComments:ns,setExpandedComments:us,openReplies:lr,activeReplyBox:_r,editCommentId:mr,editBody:Rr},postState:{post:Ht,setPost:Kt,commentsLocked:xs,isCommentsPaid:Gr,targetType:et},handlers:{toggleLike:jo,toggleReplies:yn,loadReplies:Ks,setActiveReplyBox:Mr,setEditCommentId:jr,setEditBody:br,saveEditedComment:Dn,handleDelete:na},uiHelpers:{user:kt,navigate:Ut,redirectPath:_s,timeAgo:ys,observerRef:qs}})]})}),jsxRuntimeExports.jsx(TipModal,{open:es,loading:Wr,onTip:Vs,onClose:()=>Xr(!1)})]})}const timeAgo=et=>{const dt=new Date(et),kt=Math.floor((Date.now()-dt)/1e3);if(kt<60)return"Just now";const $t=Math.floor(kt/60);if($t<60)return`${$t}m ago`;const Tt=Math.floor($t/60);return Tt<24?`${Tt}h ago`:`${Math.floor(Tt/24)}d ago`},formatDate=et=>new Date(et).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});function MobilePostCard({post:et,onOpen:dt,onLike:kt,onShare:$t,isCommentsLocked:Tt,copiedPostId:Dt}){return jsxRuntimeExports.jsxs("div",{onClick:dt,className:`
        rounded-2xl
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        shadow-sm
        overflow-hidden
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 px-4 pt-4",children:[et.author_image?jsxRuntimeExports.jsx("img",{src:et.author_image,alt:"",className:`
              w-8 h-8 rounded-full object-cover
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
            `}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:et.author}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{children:formatDate(et.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:timeAgo(et.created_at)}),et.updated_at&&new Date(et.updated_at)>new Date(et.created_at)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"italic opacity-70",children:"edited"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 mx-4 rounded-xl overflow-hidden",children:[et.image_url?jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:"w-full h-60 object-cover",loading:"lazy"}):jsxRuntimeExports.jsx("div",{className:`
            w-full h-60
            bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
            flex items-center justify-center
          `,children:jsxRuntimeExports.jsx("span",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"No image uploaded"})}),jsxRuntimeExports.jsxs("div",{className:"relative bg-dashboard-sidebar-light dark:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx("div",{className:`
              absolute inset-x-0 -top-28 h-28
              bg-gradient-to-t
              from-dashboard-sidebar-light
              dark:from-dashboard-hover-dark
              to-transparent
              pointer-events-none
            `}),jsxRuntimeExports.jsxs("div",{className:"relative px-4 py-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-light dark:text-dashboard-text-dark line-clamp-2",children:et.title}),et.subtitle&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark line-clamp-1",children:et.subtitle}),jsxRuntimeExports.jsx("p",{className:`
              mt-2
              text-sm
              leading-relaxed
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
              opacity-60
              line-clamp-3
            `,children:et.body_preview}),jsxRuntimeExports.jsx("button",{className:`
              mt-4
              w-full
              rounded-lg
              bg-dashboard-border-light
              dark:bg-white/15
              text-dashboard-text-light
              dark:text-dashboard-text-dark
              font-semibold
              py-2.5
              text-sm
              hover:bg-dashboard-hover-light
              dark:hover:bg-white/25
              transition
            `,children:"Read"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`
        mt-2
        px-6
        flex items-center gap-6
        py-3
        text-sm sm:text-xs
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[2px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:kt,disabled:!kt,className:"flex items-center  gap-[2px] hover:opacity-80 transition disabled:opacity-60 disabled:cursor-default",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:et.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center  gap-[2px] opacity-70",children:[Tt?jsxRuntimeExports.jsx(MessageSquareLock,{size:16}):jsxRuntimeExports.jsx(MessageSquare,{size:16}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:$t,disabled:!$t,className:"flex items-center  gap-[2px] hover:opacity-80 transition disabled:opacity-60 disabled:cursor-default",children:Dt===et.id?jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(Share2,{size:16,className:"opacity-70"})})]})]})}function MobileCreateFAB({open:et,setOpen:dt,onCreatePost:kt,onCreateFragment:$t,containerRef:Tt,className:Dt=""}){return jsxRuntimeExports.jsxs("div",{ref:Tt,className:`
    md:hidden
    fixed bottom-6 right-6 z-50
    transition-all duration-200 ease-out
    ${Dt}
  `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt(Ft=>!Ft),className:`
          w-full
          px-3 py-3
          rounded-xl
          flex items-center justify-center
          bg-green
          text-black
          shadow-xl
          hover:opacity-90
          transition
        `,"aria-label":"Create",children:jsxRuntimeExports.jsx(Plus,{size:26,className:`transition-transform ${et?"rotate-45":""}`})}),et&&jsxRuntimeExports.jsxs("div",{className:`
            absolute bottom-full right-0 mb-3
            w-44
            rounded-xl
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            shadow-2xl
            overflow-hidden
          `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{dt(!1),kt()},className:`
              w-full px-4 py-3 text-left text-sm
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
            `,children:"Post"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(!1),$t()},className:`
              w-full px-4 py-3 text-left text-sm
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
            `,children:"Fragment"})]})]})}function CommunityTopic(){const{topicId:et}=useParams(),dt=useNavigate(),kt=useLocation(),[$t,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState([]),[Ut,Ht]=reactExports.useState(!1),Kt=reactExports.useRef(null),[Yt,Jt]=reactExports.useState(!0),Zt=reactExports.useRef(0);function er(sr){return sr.comments_locked===1||sr.comments_visibility==="paid"&&sr.has_paid_subscription!==1||sr.comments_visibility==="private"&&sr.is_subscribed!==1}const rr=async()=>{try{const sr=await axiosInstance.get(`/community/topics/${et}`);Tt(sr.data.topic),console.log("topic",$t);const nr=await axiosInstance.get(`/community/topics/${et}/posts`);Ft(nr.data.posts)}catch(sr){console.error("Failed to load topic:",sr)}};return reactExports.useEffect(()=>{rr()},[et]),reactExports.useEffect(()=>{Ht(!1)},[et]),reactExports.useEffect(()=>{function sr(){const nr=window.scrollY;nr>Zt.current&&nr>80&&Jt(!1),nr<Zt.current&&Jt(!0),Zt.current=nr}return window.addEventListener("scroll",sr,{passive:!0}),()=>{window.removeEventListener("scroll",sr)}},[]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),$t?jsxRuntimeExports.jsxs("div",{className:"sm:pt-16 px-0 sm:px-6 lg:px-6 max-w-4xl mx-auto pt-14",children:[jsxRuntimeExports.jsxs("div",{className:`
        flex items-start justify-between mb-6
        px-4             
        sm:px-0           
      `,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:`
        text-2xl font-semibold
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:$t.name}),$t.description&&jsxRuntimeExports.jsx("p",{className:`
          mt-1
          text-sm
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
          max-w-2xl
        `,children:$t.description})]}),Dt.length>0&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt("/community/create-post",{state:{topicId:$t.id,topicName:$t.name}}),className:`
      hidden md:flex
      items-center gap-2
      px-3 py-1.5
      rounded-md text-sm
      border border-dashboard-border-light dark:border-dashboard-border-dark
      text-dashboard-text-light dark:text-dashboard-text-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      transition
    `,children:[jsxRuntimeExports.jsx(Plus,{size:18}),"New Post"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Dt.length===0&&jsxRuntimeExports.jsxs("div",{className:`
        mt-16
        px-6
        py-12
        rounded-xl
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        text-center
      `,children:[jsxRuntimeExports.jsxs("h2",{className:`
          text-lg font-semibold
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          mb-2
        `,children:["This is the ",$t.name," room"]}),jsxRuntimeExports.jsxs("p",{className:`
          text-sm
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
          max-w-md
          mx-auto
          leading-relaxed
        `,children:["No one has started a conversation here yet. This space is for ideas, questions, and writing related to ",$t.name,". Be the first to set the tone."]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt("/community/create-post",{state:{topicId:$t.id,topicName:$t.name}}),className:`
          mt-6
          px-5 py-2.5
          rounded-lg
          bg-green text-black
          font-medium
          hover:opacity-90
          transition
        `,children:"Write the first post"})]}),Dt.map(sr=>{const nr=async()=>{try{await axiosInstance.post(`/community/${et}/mark-viewed`)}catch{}dt(`/community/post/${sr.id}`,{state:{from:kt.pathname}})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(MobilePostCard,{post:sr,onOpen:nr,onLike:()=>{},onShare:()=>{},isCommentsLocked:er(sr),copiedPostId:null})}),jsxRuntimeExports.jsx("div",{onClick:nr,className:`
                hidden md:block
                px-4 py-4 sm:px-6
                rounded-lg
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                transition
                cursor-pointer
              `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-6 items-start",children:[jsxRuntimeExports.jsx("div",{className:"min-w-0",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[sr.author_image?jsxRuntimeExports.jsx("img",{src:sr.author_image,alt:"",className:`
                          w-8 h-8 rounded-full object-cover
                          border border-dashboard-border-light
                          dark:border-dashboard-border-dark
                        `}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:sr.author}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:timeAgo(sr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:formatDate(sr.created_at)})]})]}),jsxRuntimeExports.jsx("h3",{className:`
                          text-base sm:text-lg font-semibold
                          line-clamp-2
                          text-dashboard-text-light
                          dark:text-dashboard-text-dark
                          mb-1
                        `,children:sr.title}),sr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                            text-sm sm:text-base
                            line-clamp-2
                            text-dashboard-muted-light
                            dark:text-dashboard-muted-dark
                            mb-2
                          `,children:sr.subtitle}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:sr.views??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:sr.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[er(sr)?jsxRuntimeExports.jsx(MessageSquareLock,{size:16,className:"opacity-70"}):jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:sr.comment_count??0})]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:`
                  w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20
                  rounded-lg
                  flex-shrink-0
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  overflow-hidden
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                `,children:sr.image_url?jsxRuntimeExports.jsx("img",{src:sr.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs opacity-60",children:"No image"})})]})})]},sr.id)})]}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
    transition-all duration-200 ease-out
    ${Yt?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
  `,open:Ut,setOpen:Ht,containerRef:Kt,onCreatePost:()=>dt("/community/create-post",{state:{topicId:$t.id,topicName:$t.name}}),onCreateFragment:()=>dt("/community/fragments/create",{state:{topicId:$t.id,topicName:$t.name}})})]}):null}function FragmentOwnerMenu({fragmentId:et,isOwner:dt,onDeleted:kt}){const[$t,Tt]=reactExports.useState(!1),Dt=useNavigate();if(!dt)return null;function Ft(){const Ut=y$4(({closeToast:Ht})=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Delete this fragment?"}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"This cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:Ht,className:"px-3 py-1.5 text-xs rounded-md border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.delete(`/fragments/${et}`),y$4.dismiss(Ut),y$4.success("Fragment deleted"),kt&&kt(et)}catch{y$4.error("Failed to delete fragment")}},className:"px-3 py-1.5 text-xs rounded-md bg-red-600 text-white",children:"Delete"})]})]}),{closeButton:!1,className:"rounded-xl"})}return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Ut=>{Ut.stopPropagation(),Tt(Ht=>!Ht)},className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:18})}),$t&&jsxRuntimeExports.jsxs("div",{onClick:Ut=>Ut.stopPropagation(),className:`
            absolute right-0 mt-2 z-30
            w-48
            rounded-xl
            bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light dark:border-dashboard-border-dark
            shadow-xl
            overflow-hidden
          `,children:[jsxRuntimeExports.jsxs("button",{onClick:Ut=>{Ut.stopPropagation(),Tt(!1),Dt(`/community/fragments/edit/${et}`)},className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark flex items-center gap-2",children:[jsxRuntimeExports.jsx(Pencil,{size:16}),"Edit"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark"}),jsxRuntimeExports.jsxs("button",{onClick:Ut=>{Ut.stopPropagation(),Tt(!1),Ft()},className:"w-full px-4 py-3 text-sm text-left text-red-500 hover:bg-red-500/10 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Trash2,{size:16}),"Delete"]})]})]})}function FragmentItem({fragment:et,onOpen:dt,onToggleLike:kt}){const{body:$t,created_at:Tt,updated_at:Dt,is_owner:Ft,views:Ut,like_count:Ht,has_liked:Kt,comment_count:Yt,reshare_count:Jt,author:Zt,author_image:er,author_is_verified:rr,reshared_id:sr,audio_url:nr,audio_title:ir,audio_duration_seconds:lr,allow_download:or}=et,cr=useNavigate(),dr=rr===1;return jsxRuntimeExports.jsx("div",{onClick:dt,className:`
    px-4 py-4
    sm:px-6
    rounded-lg
    border
    border-dashboard-border-light
    dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light
    dark:bg-dashboard-sidebar-dark
    hover:bg-dashboard-hover-light
    dark:hover:bg-dashboard-hover-dark
    transition
    cursor-pointer
  `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[er?jsxRuntimeExports.jsx("img",{src:er,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[2px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Zt}),dr&&jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-dashboard-muted-light dark:text-green"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:timeAgo(Tt)}),Dt&&new Date(Dt)>new Date(Tt)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"italic opacity-70",children:"edited"})]})]})]}),jsxRuntimeExports.jsx(FragmentOwnerMenu,{fragmentId:et.id,isOwner:Ft})]}),jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof $t=="string"?$t:""}}),nr&&nr.trim()!==""&&jsxRuntimeExports.jsx(FragmentAudioPlayer,{audioUrl:nr,audioTitle:ir,durationSeconds:lr,allowDownload:or}),sr&&jsxRuntimeExports.jsxs("div",{className:`
              mt-3
              rounded-lg
            border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              p-3
            `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[et.reshared_author_image?jsxRuntimeExports.jsx("img",{src:et.reshared_author_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full bg-dashboard-border-light dark:bg-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:et.reshared_author}),et.reshared_author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:timeAgo(et.reshared_created_at)})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof et.reshared_body=="string"?et.reshared_body:""}})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Ut??0})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:ur=>{ur.stopPropagation(),kt(et.id,Kt)},className:"flex items-center gap-[4px] hover:opacity-80 transition",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:Kt?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Ht})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Yt})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px] cursor-pointer",onClick:ur=>{ur.stopPropagation(),cr(`/community/fragments/create?reshare=${et.id}`)},children:[jsxRuntimeExports.jsx(Repeat,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.reshare_count})]})]})]})]})})}function CommunityHome(){var es;const dt=reactExports.useRef(null),[kt,$t]=reactExports.useState([]),Tt=useNavigate(),[Dt,Ft]=reactExports.useState(new Set),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(0),[Jt,Zt]=reactExports.useState(!0),[er,rr]=reactExports.useState(!1),[sr,nr]=reactExports.useState("all"),[ir,lr]=reactExports.useState(!1),or=reactExports.useRef(null),[cr,dr]=reactExports.useState(!0),ur=reactExports.useRef(0),[pr,mr]=reactExports.useState(!1),jr=reactExports.useRef(null),[Rr,br]=reactExports.useState(null),[_r,Mr]=reactExports.useState({hasActivity:!1,summary:{commentsOnYourPosts:0,repliesToYourComments:0,mentions:0}}),[Pr,Or]=reactExports.useState(!1);async function kr(Xr){try{await axiosInstance.post(`/community/posts/${Xr}/view`)}catch{}Tt(`/community/post/${Xr}`)}const Tr=reactExports.useCallback(async(Xr=!1)=>{if(!er&&!(!Xr&&!Jt))try{rr(!0),Xr&&(Yt(0),Zt(!0));const Wr=await axiosInstance.get("/community/feed",{params:{limit:20,offset:Xr?0:Kt}}),cs=Wr.data.items||[];Ht(ns=>Xr?cs:[...ns,...cs]),Yt(ns=>ns+cs.length),Wr.data.hasMore||Zt(!1)}catch(Wr){console.error("Failed to load feed:",Wr)}finally{rr(!1)}},[20,Kt,Jt,er]);function xr(Xr){return Xr.is_owner===1?!1:Xr.comments_locked===1||Xr.comments_visibility==="paid"||Xr.comments_visibility==="private"&&Xr.is_subscribed!==1}reactExports.useEffect(()=>{function Xr(){const Wr=window.scrollY;Wr>ur.current&&Wr>80&&dr(!1),Wr<ur.current&&dr(!0),ur.current=Wr}return window.addEventListener("scroll",Xr,{passive:!0}),()=>{window.removeEventListener("scroll",Xr)}},[]),reactExports.useEffect(()=>{(async()=>{var Wr;try{const cs=await axiosInstance.get("/community/recap");(Wr=cs.data)!=null&&Wr.hasActivity&&Mr(cs.data)}catch(cs){console.error("Failed to fetch recap:",cs)}})()},[]),reactExports.useEffect(()=>{if(!dt.current)return;const Xr=new IntersectionObserver(Wr=>{Wr[0].isIntersecting&&Jt&&!er&&Tr()},{root:null,rootMargin:"200px",threshold:0});return Xr.observe(dt.current),()=>Xr.disconnect()},[Jt,er,Tr]);const wr=async()=>{Or(!0);try{await axiosInstance.post("/community/mark-seen")}catch{}};reactExports.useEffect(()=>{Tr(!0)},[]),reactExports.useEffect(()=>{function Xr(Wr){jr.current&&!jr.current.contains(Wr.target)&&mr(!1)}return document.addEventListener("mousedown",Xr),()=>{document.removeEventListener("mousedown",Xr)}},[]),reactExports.useEffect(()=>{function Xr(Wr){or.current&&!or.current.contains(Wr.target)&&lr(!1)}return ir&&document.addEventListener("click",Xr),()=>{document.removeEventListener("click",Xr)}},[ir]);const zr=reactExports.useMemo(()=>{const Xr=Ut.filter(Wr=>Wr.type==="post").map(Wr=>Wr.data);return sr==="all"?Xr:Xr.filter(Wr=>Wr.topic_id===sr)},[Ut,sr]),Hr=async(Xr,Wr)=>{Xr.stopPropagation();const cs=`${window.location.origin}/p/${Wr.slug}`;try{await navigator.clipboard.writeText(cs),br(Wr.id),setTimeout(()=>br(null),1500)}catch{y$4.error("Failed to copy link")}},Yr=async(Xr,Wr)=>{if(Xr.stopPropagation(),!!(Wr!=null&&Wr.id))try{Wr.has_liked?await axiosInstance.delete("/community/delete-like",{data:{targetType:"post",targetId:Wr.id}}):await axiosInstance.post("/community/likes",{targetType:"post",targetId:Wr.id}),Ht(cs=>cs.map(ns=>ns.type==="post"&&ns.data.id===Wr.id?{...ns,data:{...ns.data,has_liked:Wr.has_liked?0:1,like_count:Math.max((ns.data.like_count||0)+(Wr.has_liked?-1:1),0)}}:ns))}catch(cs){console.error("Failed to toggle post like:",cs),y$4.error("Failed to update like")}},rs=async Xr=>{try{Xr.has_liked?await axiosInstance.delete("/community/delete-like",{data:{targetType:"fragment",targetId:Xr.id}}):await axiosInstance.post("/community/likes",{targetType:"fragment",targetId:Xr.id}),Ht(Wr=>Wr.map(cs=>cs.type==="fragment"&&cs.data.id===Xr.id?{...cs,data:{...cs.data,has_liked:Xr.has_liked?0:1,like_count:(cs.data.like_count||0)+(Xr.has_liked?-1:1)}}:cs))}catch{y$4.error("Failed to update fragment like")}};function as(Xr){if(!(Xr!=null&&Xr.body_preview))return"";const Wr=Xr.body_preview,cs=Wr.indexOf("data-subscriber-divider");return cs!==-1?Wr.substring(0,cs):Wr}return reactExports.useEffect(()=>{(async()=>{try{const Wr=await axiosInstance.get("/community/views");Ft(new Set(Wr.data.viewedTopics))}catch(Wr){console.error("Failed to load viewed topics:",Wr)}})()},[]),reactExports.useEffect(()=>{(async()=>{try{const Wr=await axiosInstance.get("/community/topics");$t(Wr.data.topics||[])}catch(Wr){console.error("Failed to load topics:",Wr)}})()},[]),jsxRuntimeExports.jsxs("div",{className:`
    w-full min-h-screen
    px-0 py-0
    bg-dashboard-bg-light
    dark:bg-dashboard-bg-dark
  `,children:[jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:`
          w-full max-w-5xl

          /* mobile */
          bg-transparent
          border-none
          rounded-none
          shadow-none
          p-0

          /* desktop */
          sm:bg-dashboard-sidebar-light
          sm:dark:bg-dashboard-sidebar-dark
          sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
          sm:rounded-xl
          sm:p-8
          lg:p-10
          sm:shadow-xl
          sm:backdrop-blur-sm
          flex flex-col
        `,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Messy Attic Logo",width:75,height:75,className:`
              block
              select-none
            `})}),jsxRuntimeExports.jsx("h1",{className:`
          text-3xl font-bold text-center normal-case
          text-dashboard-text-light
          dark:text-dashboard-text-dark mb-2
  `,children:"The Messy Attic"}),jsxRuntimeExports.jsx("p",{className:`
            text-center text-sm sm:text-base
            max-w-xl mx-auto
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
            mb-8
          `,children:"where writers come together"}),jsxRuntimeExports.jsxs("div",{ref:or,className:"hidden md:flex justify-center mb-8 relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Xr=>{Xr.stopPropagation(),lr(Wr=>!Wr)},className:`
              w-full
              px-6 py-4
              rounded-xl

              sm:w-12 sm:h-12
              sm:px-0 sm:py-0
              sm:rounded-xl

              flex items-center justify-center
              font-semibold
              bg-green
              text-black
              hover:opacity-90
              transition
              shadow-sm
            `,"aria-label":"Create",children:jsxRuntimeExports.jsx(Plus,{size:22,className:`transition-transform ${ir?"rotate-45":""}`})}),ir&&jsxRuntimeExports.jsxs("div",{className:`
                absolute top-full mt-2
                w-40
                rounded-lg
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                shadow-xl
                overflow-hidden
                z-50
              `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{lr(!1),Tt("/community/create-post")},className:`
                  w-full px-4 py-3 text-left text-sm
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                `,children:"Post"}),jsxRuntimeExports.jsx("button",{onClick:()=>{lr(!1),Tt("/community/fragments/create")},className:`
                  w-full px-4 py-3 text-left text-sm
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                `,children:"Fragment"})]})]}),_r.hasActivity&&!Pr&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:`
                max-w-4xl mx-auto
                rounded-xl
                border border-dashboard-border-light dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                p-5
                shadow-sm
                flex flex-col gap-3
              `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:"Welcome back"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1",children:"Heres whats happened since your last visit."})]}),jsxRuntimeExports.jsx("button",{onClick:wr,className:`
                    text-xs
                    text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                    hover:opacity-80
                  `,children:"Dismiss"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[_r.summary.commentsOnYourPosts>0&&jsxRuntimeExports.jsxs("button",{onClick:wr,className:"block text-left hover:underline",children:[" ",_r.summary.commentsOnYourPosts," new comment",_r.summary.commentsOnYourPosts>1?"s":""," on your posts"]}),_r.summary.repliesToYourComments>0&&jsxRuntimeExports.jsxs("button",{onClick:wr,className:"block text-left hover:underline",children:[" ",_r.summary.repliesToYourComments," repl",_r.summary.repliesToYourComments>1?"ies":"y"," to your comments"]}),_r.summary.mentions>0&&jsxRuntimeExports.jsxs("button",{onClick:wr,className:"block text-left hover:underline",children:[" You were mentioned ",_r.summary.mentions," time",_r.summary.mentions>1?"s":""]})]})]})}),jsxRuntimeExports.jsxs("div",{ref:jr,className:"relative mb-6 flex-shrink-0 flex justify-center",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>mr(Xr=>!Xr),className:`
              w-full sm:w-64
              h-10
              px-4
              flex items-center justify-between
              rounded-lg
              border border-dashboard-border-light dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              text-sm font-medium
              text-dashboard-text-light dark:text-dashboard-text-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
              transition
            `,children:[jsxRuntimeExports.jsx("span",{children:sr==="all"?"All topics":((es=kt.find(Xr=>Xr.id===sr))==null?void 0:es.name)||"Select topic"}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${pr?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),pr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>mr(!1)}),jsxRuntimeExports.jsxs("div",{className:`
                absolute z-50 mt-2 w-full sm:w-64
                rounded-lg
                border border-dashboard-border-light dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                shadow-xl
                max-h-[400px] overflow-y-auto
              `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{nr("all"),mr(!1)},className:`
                  w-full px-4 py-2 text-left text-sm
                  hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
                `,children:"All topics"}),kt.map(Xr=>jsxRuntimeExports.jsx("button",{onClick:()=>{nr(Xr.id),Tt(`/community/topic/${Xr.id}`),mr(!1)},className:`
                    w-full px-4 py-2 text-left text-sm
                    hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
                  `,children:Xr.name},Xr.id))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full mt-4",children:[jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto space-y-2 px-0 sm:px-6",children:(sr==="all"?Ut:zr.map(Xr=>({type:"post",data:Xr}))).map(Xr=>{if(Xr.type==="post"){const Wr=Xr.data;return jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(MobilePostCard,{post:Wr,onOpen:()=>kr(Wr.id),onLike:cs=>Yr(cs,Wr),onShare:cs=>Hr(cs,Wr),isCommentsLocked:xr(Wr),copiedPostId:Rr})}),jsxRuntimeExports.jsx("div",{className:`
                        hidden md:block
                        px-4 py-4 sm:px-6
                        rounded-lg
                        border border-dashboard-border-light
                        dark:border-dashboard-border-dark
                        bg-dashboard-sidebar-light
                        dark:bg-dashboard-sidebar-dark
                        hover:bg-dashboard-hover-light
                        dark:hover:bg-dashboard-hover-dark
                        transition
                        cursor-pointer
                      `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-6 items-start",children:[jsxRuntimeExports.jsx("div",{onClick:()=>kr(Wr.id),className:"min-w-0 cursor-pointer",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[Wr.author_image?jsxRuntimeExports.jsx("img",{src:Wr.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Wr.author}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:timeAgo(Wr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:formatDate(Wr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:Wr.topic_name})]})]}),jsxRuntimeExports.jsx("h3",{className:`
              text-base sm:text-lg font-semibold
              text-dashboard-text-light dark:text-dashboard-text-dark
              line-clamp-2
              mb-1
            `,children:Wr.title}),Wr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                line-clamp-2
                mb-2
              `,children:Wr.subtitle}),jsxRuntimeExports.jsx("p",{className:`
                                  mb-4
                                  mt-2
                                  text-sm
                                  leading-relaxed
                                  text-dashboard-muted-light
                                  dark:text-dashboard-muted-dark
                                  opacity-60
                                  line-clamp-3
                                `,children:as(Wr)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm  text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Wr.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:cs=>Yr(cs,Wr),className:"flex items-center gap-[4px] hover:opacity-80 transition",children:[jsxRuntimeExports.jsx(Heart,{size:14,className:Wr.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Wr.like_count??0})]}),jsxRuntimeExports.jsxs("button",{onClick:cs=>{cs.stopPropagation(),kr(Wr.id)},className:"flex items-center gap-[4px] hover:opacity-80 transition",children:[xr(Wr)?jsxRuntimeExports.jsx(MessageSquareLock,{size:14,className:"opacity-70"}):jsxRuntimeExports.jsx(MessageSquare,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Wr.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:cs=>Hr(cs,Wr),className:"flex items-center gap-[4px] hover:opacity-80 transition",children:Rr===Wr.id?jsxRuntimeExports.jsx(Check,{size:14,className:"text-green"}):jsxRuntimeExports.jsx(Share2,{size:14,className:"opacity-70"})})]})]})]})}),jsxRuntimeExports.jsx("div",{className:`
        w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20
        rounded-lg
        flex-shrink-0
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        overflow-hidden
        bg-dashboard-hover-light
        dark:bg-dashboard-hover-dark
      `,children:Wr.image_url?jsxRuntimeExports.jsx("img",{src:Wr.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"No image"})})})]})})]},Wr.id)}return Xr.type==="fragment"?jsxRuntimeExports.jsx(FragmentItem,{fragment:Xr.data,onOpen:()=>Tt(`/community/fragments/${Xr.data.id}`),onToggleLike:()=>rs(Xr.data)},Xr.data.id):null})}),er&&Jt&&jsxRuntimeExports.jsx("div",{className:"py-4 text-center text-xs opacity-60 text-dashboard-text-light dark:text-dashboard-text-dark",children:"Loading more"}),jsxRuntimeExports.jsx("div",{ref:dt,className:"h-10"})]})]})}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
    transition-all duration-200 ease-out
    ${cr?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
  `,open:ir,setOpen:lr,containerRef:or,onCreatePost:()=>Tt("/community/create-post"),onCreateFragment:()=>Tt("/community/fragments/create")})]})}function Notifications(){const[et,dt]=reactExports.useState([]),kt=useNavigate();reactExports.useEffect(()=>{(async()=>{try{const Ft=await axiosInstance.get("/notifications");dt(Ft.data.notifications||[])}catch(Ft){console.error("Failed to load notifications",Ft)}})()},[]);const $t=async Dt=>{if(Dt.is_read||await Tt(Dt.id),Dt.type==="subscription"){kt(`/community/authors/${Dt.actor_id}`);return}if(Dt.target_type==="post"){if(Dt.type==="post_like"){kt(`/community/post/${Dt.target_id}`);return}kt(`/community/post/${Dt.target_id}${Dt.reference_id?`?highlight=${Dt.reference_id}`:""}`);return}if(Dt.target_type==="fragment"){kt(`/community/fragments/${Dt.target_id}${Dt.reference_id?`?highlight=${Dt.reference_id}`:""}`);return}console.warn("Unknown notification target:",Dt)},Tt=reactExports.useCallback(async Dt=>{try{await axiosInstance.post("/notifications/mark-read",{ids:[Dt]}),dt(Ft=>Ft.map(Ut=>Ut.id===Dt?{...Ut,is_read:1}:Ut))}catch(Ft){console.error("Failed to mark notification read",Ft)}},[]);return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center items-start min-h-[80vh] px-0 sm:px-0 py-3 sm:py-3",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-2xl

        /* mobile */
        p-4
        rounded-none
        border-none
        shadow-none
        bg-transparent

        /* desktop */
        sm:p-8
        sm:rounded-2xl
        sm:shadow-xl
        sm:bg-dashboard-sidebar-light
        sm:dark:bg-dashboard-sidebar-dark
        sm:border
        sm:border-dashboard-border-light
        sm:dark:border-dashboard-border-dark
      `,children:[jsxRuntimeExports.jsx("h1",{className:`
          text-2xl font-bold mb-6 text-center normal-case
          text-dashboard-text-light
          dark:text-dashboard-text-dark
  `,children:"Notifications "}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[et.length===0&&jsxRuntimeExports.jsx("p",{className:`
              text-center py-6
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
  `,children:"No notifications yet."}),et.map(Dt=>{var Ft,Ut,Ht,Kt;return jsxRuntimeExports.jsxs("button",{onClick:()=>$t(Dt),className:`
              relative
              w-full text-left p-4 sm:p-4 rounded-lg transition
              ${Dt.is_read?"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark opacity-80":"bg-green/10 dark:bg-green/20 border-green/40"}
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              hover:border-green
            `,children:[!Dt.is_read&&jsxRuntimeExports.jsx("span",{className:`
        absolute top-3 right-3
        w-2 h-2 rounded-full
        bg-green
      `}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[Dt.actor_image?jsxRuntimeExports.jsx(Img,{src:Dt.actor_image,loader:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full border border-dashboard-border-light dark:border-dashboard-border-dark animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light dark:text-dashboard-text-dark",children:((Ut=(Ft=Dt.actor_name)==null?void 0:Ft.charAt(0))==null?void 0:Ut.toUpperCase())||"U"}),decode:!0,alt:"User avatar",className:"w-10 h-10 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light dark:text-dashboard-text-dark",children:((Kt=(Ht=Dt.actor_name)==null?void 0:Ht.charAt(0))==null?void 0:Kt.toUpperCase())||"U"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-text-light dark:text-dashboard-text-dark truncate",children:Dt.actor_name?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:Dt.actor_name})," ",Dt.message.replace("Someone","").trim()]}):Dt.message}),Dt.post_title&&jsxRuntimeExports.jsx("p",{className:`
                        text-xs mt-1 truncate
                        text-dashboard-muted-light
                        dark:text-dashboard-muted-dark
                      `,children:Dt.post_title}),jsxRuntimeExports.jsx("p",{className:"text-[11px] mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:new Date(Dt.created_at).toLocaleString([],{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),Dt.post_image&&jsxRuntimeExports.jsx("img",{src:Dt.post_image,alt:"",className:`
        w-12 h-12
        rounded-lg
        object-cover
        flex-shrink-0
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
      `})]})]},Dt.id)})]})]})})}function DocsIndexPage(){const[et,dt]=reactExports.useState(""),$t=[{id:"settings-page",title:"Settings Page",description:"Manage your profile, avatar, Two-Factor Authentication, Passkeys, Stripe payouts, brand identity file, and your default CTA message.",path:"/docs/settings"},{id:"landing-builder",title:"Landing Page Builder",description:"Create landing pages using blocks, templates, Stripe checkout, and custom branding.",path:"/docs/landing-page-builder"},{id:"seller-dashboard",title:"Seller Dashboard",description:"Track sales, payouts, customers, and AI emails with your Stripe-connected dashboard.",path:"/docs/seller-dashboard"},{id:"analytics",title:"Analytics",description:"Track views, clicks, analytics, sales, and sales across your entire system.",path:"/docs/analytics-docs"},{id:"custom-domains",title:"Custom Domains",description:"Connect your own domain to The Messy Attic, verify ownership, and host landing pages under your brand.",path:"/docs/custom-domain"},{id:"authors-assistant",title:"Authors Assistant",description:"Write, revise, finalize, and publish full-length books using a structured, section-based workflow built for serious authors.",path:"/docs/authors-assistant"}].filter(Tt=>Tt.title.toLowerCase().includes(et.toLowerCase())||Tt.description.toLowerCase().includes(et.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:`
      w-full max-w-4xl mx-auto
      py-10 px-6
      text-dashboard-text-light
      dark:text-dashboard-text-dark
    `,children:[jsxRuntimeExports.jsxs("header",{className:"mb-10",children:[jsxRuntimeExports.jsxs("h1",{className:`
          text-3xl font-bold flex items-center gap-3 mb-2 normal-case
          text-dashboard-text-light
          dark:text-dashboard-text-dark
        `,children:[jsxRuntimeExports.jsx(ShieldQuestionMark,{className:"w-8 h-8 text-green"}),"Documentation"]}),jsxRuntimeExports.jsx("p",{className:`
          text-sm
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
        `,children:"Search or browse through all Cre8tly Studio help guides, tutorials, and feature overviews."})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-8",children:[jsxRuntimeExports.jsx(Search,{className:`
          absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
        `}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search documentation...",value:et,onChange:Tt=>dt(Tt.target.value),style:{paddingLeft:"50px"},className:`
          w-full
          px-4 py-3 pl-14
          rounded-xl
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          placeholder-dashboard-muted-light
          dark:placeholder-dashboard-muted-dark
          focus:outline-none
          focus:ring-2 focus:ring-green
        `})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$t.map(Tt=>jsxRuntimeExports.jsxs(Link$2,{to:Tt.path,className:`
            block p-5 rounded-xl transition shadow
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            hover:border-dashboard-muted-light
            dark:hover:border-dashboard-muted-dark
          `,children:[jsxRuntimeExports.jsx("h2",{className:`
              text-lg font-semibold mb-2
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:Tt.title}),jsxRuntimeExports.jsx("p",{className:`
              text-sm leading-relaxed
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
            `,children:Tt.description})]},Tt.id))}),$t.length===0&&jsxRuntimeExports.jsx("p",{className:`
          text-center text-sm mt-10 italic
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
        `,children:"No documents found for your search."})]})}function SettingsDocs(){const et=[{id:"intro",label:"Introduction"},{id:"avatar",label:"Profile Avatar"},{id:"twofa",label:"Two-Factor Authentication"},{id:"passkeys",label:"Passkey Authentication"},{id:"stripe",label:"Stripe Payouts"},{id:"brand-file",label:"Brand Identity File"},{id:"cta",label:"Default Closing Message / CTA"}],dt=kt=>{const $t=document.getElementById(kt);$t&&$t.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Settings,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Settings Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to manage security, payouts, branding, and your default CTA."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map(kt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt(kt.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white transition text-gray-300 text-xs",children:kt.label})},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(Settings,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Settings & Account Management"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Learn how to manage your profile, security, payouts, brand identity, and CTA message."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Time, 2 to 3 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-3 h-3 text-green"}),"Best For, every Messy Attic user"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"The Settings page is where you control your account information, security features, payout connections, branding, and the default CTA that appears at the end of your lead magnets or documents."})]}),jsxRuntimeExports.jsxs("section",{id:"avatar",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. Profile Avatar"}),jsxRuntimeExports.jsx(Image$2,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Your avatar displays inside your dashboard and seller profile. Upload any image and it updates instantly."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Select an image file"}),jsxRuntimeExports.jsx("li",{children:"Click Upload Avatar"}),jsxRuntimeExports.jsx("li",{children:"Cre8tly updates your profile everywhere"})]})]}),jsxRuntimeExports.jsxs("section",{id:"twofa",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. Two-Factor Authentication (2FA)"}),jsxRuntimeExports.jsx(ShieldCheck,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"2FA adds a second layer of protection to your account by requiring a 6-digit code at login."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Click Enable 2FA"}),jsxRuntimeExports.jsx("li",{children:"Scan the QR code using Google Authenticator"}),jsxRuntimeExports.jsx("li",{children:"Enter your 6-digit code to activate"}),jsxRuntimeExports.jsx("li",{children:"You can disable 2FA at any time"})]})]}),jsxRuntimeExports.jsxs("section",{id:"passkeys",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. Passkey Authentication"}),jsxRuntimeExports.jsx(KeyRound,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Passkeys let you sign in using Face ID, Touch ID, Windows Hello, or hardware-based biometric authentication."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Register a passkey from your device"}),jsxRuntimeExports.jsx("li",{children:"Use Sign in with Passkey at login"}),jsxRuntimeExports.jsx("li",{children:"You may remove a passkey anytime"})]})]}),jsxRuntimeExports.jsxs("section",{id:"stripe",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Stripe Payouts"}),jsxRuntimeExports.jsx(CreditCard,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"To receive payment through The Messy Attic, connect a Stripe Express account."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Start Stripe onboarding"}),jsxRuntimeExports.jsx("li",{children:"Complete ID verification"}),jsxRuntimeExports.jsx("li",{children:"Enable payouts"}),jsxRuntimeExports.jsx("li",{children:"If pending, resume setup anytime"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-3",children:"Free trial users must upgrade before connecting payouts."})]}),jsxRuntimeExports.jsxs("section",{id:"brand-file",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Brand Identity File"}),jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Brand Identity File helps the AI understand your tone, writing style, formatting preferences, examples, and personality."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Accepted files, PDF, DOCX, DOC, TXT."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Upload a new brand file anytime"}),jsxRuntimeExports.jsx("li",{children:"Remove your existing file to reset defaults"}),jsxRuntimeExports.jsx("li",{children:"Your brand file applies automatically to new projects"})]})]}),jsxRuntimeExports.jsxs("section",{id:"cta",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This CTA appears at the end of every lead magnet or pro document you create. Add your website, newsletter, signature, or next step."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Customize your closing message"}),jsxRuntimeExports.jsx("li",{children:"Save it once, it applies everywhere"}),jsxRuntimeExports.jsx("li",{children:"You can update it anytime"})]})]})]})})]})}function LandingBuilderDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"What the Landing Page Builder Does"},{id:"layout",label:"Layout and Interface"},{id:"blocks",label:"Block Basics"},{id:"hero-block",label:"Hero Sections"},{id:"feature-blocks",label:"Feature and Benefit Blocks"},{id:"testimonial-blocks",label:"Testimonials and Social Proof"},{id:"offer-pricing",label:"Offer and Pricing Blocks"},{id:"media-blocks",label:"Images and Video Blocks"},{id:"cta-buttons",label:"Buttons and Calls-to-Action"},{id:"branding",label:"Branding, Colors, and Backgrounds"},{id:"stripe",label:"Stripe Checkout Block"},{id:"seo",label:"SEO, URL, and Meta Settings"},{id:"mobile",label:"Mobile Layout and Responsiveness"},{id:"saving",label:"Saving, Previewing, and Publishing"},{id:"analytics",label:"Analytics and Tracking"},{id:"best-practices",label:"Best Practices"},{id:"troubleshooting",label:"Troubleshooting"}],dt=kt=>{const $t=document.getElementById(kt);$t&&$t.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Landing Builder Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to design, brand, and publish high-converting landing pages with The Messy Attic."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map(kt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt(kt.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white transition text-gray-300 text-xs",children:kt.label})},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(PanelsTopLeft,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Landing Page Builder"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"A block-based builder for creating branded, Stripe-ready landing pages that sell your digital products."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Time, 5 to 15 minutes per page"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:"Best For, lead magnets, sales pages, and digital product offers"})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"The Landing Page Builder is where you turn your lead magnets, books, and digital products into a live, shareable experience. It lets you stack pre-designed blocks, connect Stripe checkout, and ship a clean, on-brand page without touching raw HTML or CSS."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"Every landing page you create in The Messy Attic is built from reusable blocks. You can reorder them, change backgrounds, swap images, and customize copy while keeping the layout consistent and conversion-focused."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"The goal, move from I have a product to I have a page that can take payments and capture attention in a single working session."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What the Landing Page Builder Does"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The builder acts as a visual layer on top of your content and product data. It:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Lets you assemble pages using pre-built sections (blocks)"}),jsxRuntimeExports.jsx("li",{children:"Connects directly to Stripe so visitors can purchase without extra tools"}),jsxRuntimeExports.jsx("li",{children:"Applies your brand colors, gradients, and fonts from Settings"}),jsxRuntimeExports.jsx("li",{children:"Generates a public URL for each published landing page"}),jsxRuntimeExports.jsx("li",{children:"Works with templates so you can reuse proven layouts"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Think of it as your front door for each offer, controlled fully inside The Messy Attic."})]}),jsxRuntimeExports.jsxs("section",{id:"layout",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. Layout and Interface"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Landing Page Builder uses an expandable block system. Every block contains its own settings. All editing is done directly inside the block itself."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The interface is made up of three main parts:"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Live Page Preview"}),"  the page is rendered exactly how visitors will see it while you build."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Expandable Blocks"}),"  each block (Image, h1, FAQs, Testimonials, Pricing, Stripe Checkout, etc.) contains its own controls. Click a block to expand it and reveal all editable fields for that section."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Block Actions"}),"  every block includes built-in tools such as:",jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-5 mt-1 text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Move Up / Move Down"}),jsxRuntimeExports.jsx("li",{children:"Delete Block"}),jsxRuntimeExports.jsx("li",{children:"Collapse / Expand"})]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Instead of separating design controls into a right sidebar, the Cre8tly Builder keeps everything together inside the block you're working on. This keeps editing fast, simple, and intuitive without navigating between panels."})]}),jsxRuntimeExports.jsxs("section",{id:"blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. Block Basics"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Everything on your page is a block. Blocks keep your design consistent while giving you room to customize copy and visuals."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Add new blocks from the Add Block or + controls"}),jsxRuntimeExports.jsx("li",{children:"Reorder blocks using drag handles or move up / move down"}),jsxRuntimeExports.jsx("li",{children:"Delete/Remove blocks you no longer need"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Different block types come with different fields, but they all follow the same principle, structured inputs that output a polished section."})]}),jsxRuntimeExports.jsxs("section",{id:"hero-block",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Hero Sections"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The hero block is usually the first section on your landing page. It sets the tone, explains what the visitor is looking at, and gives them a clear next step."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Headline and subheadline"}),jsxRuntimeExports.jsx("li",{children:"Support text or bullet list"}),jsxRuntimeExports.jsx("li",{children:"Primary call-to-action button (e.g. Get Instant Access)"}),jsxRuntimeExports.jsx("li",{children:"Optional supporting image, mockup, or cover"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use your hero to answer, What is this, who is it for, and why should I care right now?"})]}),jsxRuntimeExports.jsxs("section",{id:"feature-blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Feature and Benefit Sections"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Feature sections help you break down what is inside your product or offer. These often appear under the hero section."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Typical fields include:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Section title (e.g. What You Will Get)"}),jsxRuntimeExports.jsx("li",{children:"Subtitle or one-line promise"}),jsxRuntimeExports.jsx("li",{children:"3 to 6 feature items with titles and descriptions"}),jsxRuntimeExports.jsx("li",{children:"Optional icons or checkmarks"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Focus each feature on outcomes, not just components. Instead of 12 videos, write 12 short lessons that you can finish in a weekend."})]}),jsxRuntimeExports.jsxs("section",{id:"testimonial-blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Testimonials and Social Proof"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Testimonial blocks are designed to showcase real results, trust, and proof. They are especially useful before or after your pricing section."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You can usually configure:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Quote text or result summary"}),jsxRuntimeExports.jsx("li",{children:"Customer name and role"}),jsxRuntimeExports.jsx("li",{children:"Optional avatar or image"}),jsxRuntimeExports.jsx("li",{children:"Optional rating stars or badges"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use testimonials that speak to the same pains and goals your heros headline introduces."})]}),jsxRuntimeExports.jsxs("section",{id:"offer-pricing",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"8. Offer and Pricing Blocks"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Offer blocks are where you clearly state the price, what is included, and what buyers receive when they pay."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Plan title (e.g. Business Builder Annual)"}),jsxRuntimeExports.jsx("li",{children:"Price and billing frequency"}),jsxRuntimeExports.jsx("li",{children:"Feature checklist or inclusions list"}),jsxRuntimeExports.jsx("li",{children:"Primary button that connects to Stripe Checkout"}),jsxRuntimeExports.jsx("li",{children:"Guarantee or reassurance text under the button"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Keep this section simple and direct. The only job of this block is to make the decision feel safe and obvious."})]}),jsxRuntimeExports.jsxs("section",{id:"media-blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"9. Images and Video Blocks"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Media blocks are used to show screenshots, mockups, previews, or short embedded videos of your product in action."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Common uses,"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Showing the inside of a lead magnet"}),jsxRuntimeExports.jsx("li",{children:"Previewing the dashboard or builder"}),jsxRuntimeExports.jsx("li",{children:"Demonstrating a process visually"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use clean, high-contrast visuals and avoid overloading this block with text. Let the image or video do the heavy lifting."})]}),jsxRuntimeExports.jsxs("section",{id:"cta-buttons",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"10. Buttons and Calls-to-Action"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"CTA buttons are the bridge between reading and taking action. Throughout your page, you will see buttons that either scroll to the Stripe section, open checkout, or jump to key content."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Best practices for CTAs in the builder:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Use action phrases, Get Instant Access or Start the Trial"}),jsxRuntimeExports.jsx("li",{children:"Match button color to your brands primary accent"}),jsxRuntimeExports.jsx("li",{children:"Repeat CTAs after major sections (story  proof  CTA)"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"In many blocks, the button can be linked to the Stripe Checkout Block."})]}),jsxRuntimeExports.jsxs("section",{id:"branding",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"11. Branding, Colors, and Backgrounds"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Every block in the Landing Page Builder controls its own colors, backgrounds, and visual styling. There is also global text color settings. Each block includes its own collapsible styling panel where you can customize exactly how that section looks."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Most blocks include a background and color panel with options like:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Use No Background"}),"Leaves the block completely transparent so it blends with the page."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Solid Color"}),"Pick a color with the built-in color picker or type a HEX code for an exact match."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Gradient Background"}),"Enable gradient mode and choose:",jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-5 mt-1 text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Start color (picker or HEX input)"}),jsxRuntimeExports.jsx("li",{children:"End color (picker or HEX input)"}),jsxRuntimeExports.jsx("li",{children:"Gradient angle or direction"})]})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Match Main Background"}),"Uses the same color that the top hero or main theme block is using, giving you a consistent banded layout."]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Because each block controls its own styling independently, you can mix transparent sections, solid bands, and gradients on the same page while keeping full control over how every part of your landing page looks."})]}),jsxRuntimeExports.jsxs("section",{id:"stripe",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["12. Stripe Checkout Block",jsxRuntimeExports.jsx(CreditCard,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Stripe Checkout Block is what turns your landing page into a sales engine. Each block connects a single published PDF inside your The Messy Attic account to your Stripe Express account so you can sell digital products securely and instantly."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Messy Attic does not allow outside links, external files, or downloads. You can only sell PDFs you have created and published inside your Cre8tly account. This ensures clean delivery, proper analytics tracking, and secure fulfillment for buyers."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"When you add a Stripe Checkout Block, you choose one of your published PDFs as the product. Cre8tly automatically links it to your Stripe Express account and configures the checkout experience."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The setup includes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Selecting which published PDF to sell"}),jsxRuntimeExports.jsx("li",{children:"Connecting the PDF to your Stripe Express account"}),jsxRuntimeExports.jsx("li",{children:"Choosing the payment type, one-time or subscription"}),jsxRuntimeExports.jsx("li",{children:"Customizing the checkout button label"}),jsxRuntimeExports.jsx("li",{children:"Setting success and cancellation redirects"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You are not limited to one offer. You can add multiple Stripe Checkout Blocks to the same landing page to sell:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Different PDFs"}),jsxRuntimeExports.jsx("li",{children:"Different price points"}),jsxRuntimeExports.jsx("li",{children:"Different subscription tiers"}),jsxRuntimeExports.jsx("li",{children:"Bundles, upgrades, or add-ons"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each Stripe block operates independently, so visitors can choose whichever offer they want. This gives you complete flexibility when designing funnels, upsells, cross-sells, or multi-product pages."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"After purchasing, customers complete payment through Stripes secure checkout and are automatically redirected to a dedicated Thank You page. Their purchased PDF is instantly available for download, and the revenue is deposited directly into your connected Stripe Express account."})]}),jsxRuntimeExports.jsxs("section",{id:"seo",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"13. URL and Public Link"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each landing page in The Messy Attic is published on its own custom subdomain. Instead of managing slugs or manual meta tags, you choose a subdomain name and The Messy Attic handles the rest."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Custom Subdomain,"})," pick a unique name for your page, for example"," ",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"thedigitalstore"}),"."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Public URL,"})," your page is published at"," ",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"https://theblueprint.themessyattic.com"})," ","(using whatever subdomain you chose)."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Automatic Meta Handling,"})," ","The Messy Attic manages the basic metadata and structure behind the scenes so you can focus on your offer and design instead of SEO setup."]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Choose a clear, memorable subdomain that matches your offer or brand name, so when you share the link, people instantly recognize what the page is about."})]}),jsxRuntimeExports.jsxs("section",{id:"mobile",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"15. Mobile Layout and Responsiveness"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Most visitors will see your landing page on a phone. The builder is designed so blocks stack cleanly on smaller screens, with text sizes and spacing adjusted for readability."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Inside the editor, you may have options to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Preview how blocks collapse into a single column"}),jsxRuntimeExports.jsx("li",{children:"Check how long headlines look on narrow screens"}),jsxRuntimeExports.jsx("li",{children:"Ensure buttons stay large enough to tap easily"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Always review your page on mobile before publishing. A great desktop design still needs a frictionless mobile experience."})]}),jsxRuntimeExports.jsxs("section",{id:"saving",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"16. Saving, Previewing, and Version Management"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Messy Attic gives you full control over how your landing page evolves. You can update the live version instantly, or create separate versions to test new layouts, colors, or offers without affecting what your visitors see."}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Live Saving"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Clicking ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Save Changes"})," ","instantly updates the live landing page. Any edits you maketext, layout changes, block settings, colors, or Stripe buttonsbecome visible to the public immediately after saving."]}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Creating Page Versions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Versions let you experiment freely without touching your live design. This is ideal for A/B layouts, new designs, seasonal updates, or major revisions."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"First Time Saving a Version:"})," ","you are prompted to name it manually (for example:",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"Summer Redesign"}),")."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Each version after that"})," ","is automatically numbered, such as",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"Version 2"}),",",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"Version 3"}),", etc."]}),jsxRuntimeExports.jsxs("li",{children:["Versions do ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"not"})," affect the live site until you apply them."]})]}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Applying and Managing Versions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Versions Panel allows you to preview, apply, or delete any saved version."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Preview"})," a version without changing the live site."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Apply"})," a version to load it into the editor so you can continue editing or make it live."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Delete"})," a version if you no longer need it."]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-400 font-semibold mb-4",children:[" Important, after applying a version you must click"," ",jsxRuntimeExports.jsx("span",{className:"underline",children:"Save Changes"})," for it to become the new live public site."]}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Preview Mode"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Preview mode opens your landing page in a clean, visitor-ready display without the editor UI. This is ideal for testing spacing, mobile layout, scrolling behavior, and the full customer flow."}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Publishing / Live Site Behavior"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:["The Messy Attic does not require a separate publishing step. The live site is updated the moment you click"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Save Changes"}),". Applying a version does not go live until you save."]})]}),jsxRuntimeExports.jsxs("section",{id:"analytics",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"17. Analytics and Tracking"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Landing pages feed directly into your Seller Dashboard analytics. Over time, you will see:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Total views and unique visitors"}),jsxRuntimeExports.jsx("li",{children:"Clicks on key buttons and Stripe checkout"}),jsxRuntimeExports.jsx("li",{children:"Conversion insights connected to your products"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use this data to test different headlines, offers, and layouts by duplicating pages and comparing performance."})]}),jsxRuntimeExports.jsxs("section",{id:"best-practices",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["18. Best Practices",jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Keep one main goal per page, download, buy, or book."}),jsxRuntimeExports.jsx("li",{children:"Use one clear CTA repeated multiple times."}),jsxRuntimeExports.jsx("li",{children:"Start with a template, then tweak copy to match your voice."}),jsxRuntimeExports.jsx("li",{children:"Use Testimonials and Proof near your pricing or Stripe section."}),jsxRuntimeExports.jsx("li",{children:"Ensure your hero, offer, and Stripe block all tell the same story."})]})]}),jsxRuntimeExports.jsxs("section",{id:"troubleshooting",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["19. Troubleshooting",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My page is not loading the latest changes"}),jsxRuntimeExports.jsx("p",{children:"Make sure you saved and re-published the landing page. Then refresh the public URL or open it in a private browser tab to avoid cached content."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"Stripe button is not working"}),jsxRuntimeExports.jsx("p",{children:"Confirm your Stripe account is connected in Settings and that a valid price or product ID is configured inside the Stripe Checkout Block."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"Page looks broken on mobile"}),jsxRuntimeExports.jsx("p",{children:"Check for extremely long words, unbroken URLs, or oversized images in your hero or feature blocks. Shorten text and re-upload optimized images if needed."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My page is not showing in analytics yet"}),jsxRuntimeExports.jsx("p",{children:"Analytics update over time. If the page is brand new, visit it from another device or browser to generate initial data, then revisit the Seller Dashboard."})]})]})]})]})})]})}function SellerDashboardDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"Dashboard Overview"},{id:"earnings",label:"Earnings & Payouts"},{id:"orders",label:"Customer Orders"},{id:"emails",label:"AI Email Templates"},{id:"stripe",label:"Stripe Express Integration"},{id:"faq",label:"Troubleshooting"}],dt=kt=>{const $t=document.getElementById(kt);$t&&$t.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Seller Dashboard Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to track sales, payouts, customers, and send emails using your built-in Seller Dashboard."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map(kt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt(kt.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white text-gray-300 text-xs transition",children:kt.label})},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(FileText,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Seller Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Track your sales, payouts, customers, and follow-up emails directly inside The Messy Attic."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Learning Time, under 2 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-green"}),"Best For, creators selling digital products"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3 leading-relaxed",children:"The Seller Dashboard is where you manage your entire sales system. Any PDF purchased from your Cre8tly landing pages appears here instantly, including customer details, the product purchased, and payout information from Stripe Express."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"It mirrors key Stripe Express information while adding creator-specific tools like customer emails, PDF titles purchased, time and date of purchase, and AI-generated templates."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. Dashboard Overview"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Your Seller Dashboard gives you a quick snapshot of your business performance, including:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Pending Balance"}),jsxRuntimeExports.jsx("li",{children:"Available Balance"}),jsxRuntimeExports.jsx("li",{children:"Total revenue earned"}),jsxRuntimeExports.jsx("li",{children:"Recent Payouts"}),jsxRuntimeExports.jsx("li",{children:"Most recent customer purchases"}),jsxRuntimeExports.jsx("li",{children:"Top-selling PDFs"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"Everything updates in real time based on purchases made through your landing pages."})]}),jsxRuntimeExports.jsxs("section",{id:"earnings",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["3. Earnings & Payouts"," ",jsxRuntimeExports.jsx(CreditCard,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"All revenue you earn is paid out through your Stripe Express account. Inside Cre8tly, you can view:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Total earnings"}),jsxRuntimeExports.jsx("li",{children:"Payouts already completed"}),jsxRuntimeExports.jsx("li",{children:"Upcoming payout amounts"}),jsxRuntimeExports.jsx("li",{children:"Estimated payout dates"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Tax documents, bank details, and payout history are fully managed inside Stripe Express."})]}),jsxRuntimeExports.jsxs("section",{id:"orders",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["4. Customer Orders ",jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Every completed purchase through your Stripe Checkout Block appears in your Orders list. You can view:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Customer email address"}),jsxRuntimeExports.jsx("li",{children:"Which PDF they purchased"}),jsxRuntimeExports.jsx("li",{children:"Sale price"}),jsxRuntimeExports.jsx("li",{children:"Date of purchase"}),jsxRuntimeExports.jsx("li",{children:"Download status"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This replaces the need to dig through Stripe manually, everything is visible right inside your dashboard."})]}),jsxRuntimeExports.jsxs("section",{id:"emails",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["5. AI Email Templates ",jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"You can send emails directly from the Seller Dashboard using AI-generated templates. These are automatically personalized using:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"The customers name (when available)"}),jsxRuntimeExports.jsx("li",{children:"The product they purchased"}),jsxRuntimeExports.jsx("li",{children:"Your saved CTA or brand tone"}),jsxRuntimeExports.jsx("li",{children:"Your next-step offer or resource"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"Perfect for thank-you messages, upsells, follow-ups, or support replies, all without leaving your dashboard."})]}),jsxRuntimeExports.jsxs("section",{id:"stripe",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Stripe Express Integration"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3 leading-relaxed",children:"Stripe Express powers your payouts. Cre8tly handles the delivery experience, customer details, and sales tracking, but Stripe handles:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Identity verification"}),jsxRuntimeExports.jsx("li",{children:"Bank transfers"}),jsxRuntimeExports.jsx("li",{children:"Payout scheduling"}),jsxRuntimeExports.jsx("li",{children:"Tax forms (1099, etc.)"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"After a successful purchase:"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Stripe processes the payment"}),jsxRuntimeExports.jsx("li",{children:"You receive the revenue (minus Stripe and The Messy Attic Platform fees)"}),jsxRuntimeExports.jsx("li",{children:"The customer is redirected to your Thank You page"}),jsxRuntimeExports.jsx("li",{children:"The PDF is delivered instantly"}),jsxRuntimeExports.jsx("li",{children:"The order appears inside your dashboard"})]})]}),jsxRuntimeExports.jsxs("section",{id:"faq",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["7. Troubleshooting"," ",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My payout is missing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Check your Stripe Express dashboard, payout timing is fully controlled by Stripe."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"A customer didnt receive their PDF"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Contact support if your customer did not receive their download after purchase."})]})]})]})]})})]})}function LandingAnalyticsDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"What Analytics Track"},{id:"ranges",label:"7, 14, 30, 90 Day Filters"},{id:"unique",label:"Unique Visitors Explained"},{id:"exclusions",label:"Which Views Do NOT Count"},{id:"metrics",label:"Understanding Each Metric"},{id:"charts",label:"Graph & Data Visualization"},{id:"faq",label:"Troubleshooting"}],dt=kt=>{const $t=document.getElementById(kt);$t&&$t.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Analytics Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how Cre8tly tracks views, clicks, downloads, and sales across your landing pages."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map(kt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt(kt.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white text-gray-300 text-xs transition",children:kt.label})},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(ChartNoAxesColumn,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Landing Page Analytics"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Track unique visitors, clicks, downloads, and sales over time."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Learning Time, under 2 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-green"}),"Best For, creators optimizing page performance"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"The Analytics dashboard gives you a clear picture of how your landing page is performing. You can see how many people visit, how many click your CTA, how many download your lead magnet, and how many complete a purchase."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This makes it easy to test designs, measure improvements, and understand how your audience moves through your funnel."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What Analytics Track"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Unique Visitors"}),", people who viewed your landing page"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Clicks"}),", taps or clicks on your main CTA or Stripe button"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Downloads"}),", how many times your PDF was downloaded"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Sales"}),", purchases completed through Stripe Checkout"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"ranges",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. 7, 14, 30, and 90-Day Filters"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You can switch between different time periods to see how your page performs over short or long ranges:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"7 days"}),", perfect for new pages and quick tests"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"14 days"}),", wider snapshot of engagement"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"30 days"}),", a full month of performance"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"90 days"}),", long-term behavior and trends"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"unique",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. How Unique Visitors Are Counted"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Cre8tly tracks"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"unique visitors"})," by counting each device or browser session only once per day. This means:"]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"If the same person visits your page multiple times in one day, it counts as 1 view"}),jsxRuntimeExports.jsx("li",{children:"If they return the next day, it counts as another unique view"}),jsxRuntimeExports.jsx("li",{children:"This prevents inflated numbers and gives clean, accurate data"})]})]}),jsxRuntimeExports.jsxs("section",{id:"exclusions",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Views That Are NOT Counted"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:["To keep your analytics accurate, Cre8tly automatically excludes your own visits when you click"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Visit Live URL"})," inside the Landing Page Builder."]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"This means:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Your own views do not count"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Your own CTA clicks do not count"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Your own downloads do not count"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"Only real visitorsactual potential customersare included."})]}),jsxRuntimeExports.jsxs("section",{id:"metrics",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:"6. Understanding Each Metric"}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Activity,{className:"w-4 h-4 text-gray-400"}),"Unique Views"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"How many individual people saw your landing page during the selected time range."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(MousePointerClick,{className:"w-4 h-4 text-gray-400"}),"Clicks"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Tracks clicks on your CTA button or Stripe Checkout button. This shows how many visitors engaged with your offer."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 text-gray-400"}),"Downloads"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Counts how many times your lead magnet or PDF was downloaded from your page."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(DollarSign,{className:"w-4 h-4 text-gray-400"}),"Sales"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"How many purchases were completed through Stripe Checkout."})]})]})]}),jsxRuntimeExports.jsxs("section",{id:"charts",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Charts & Visual Data"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The bar chart shows a daily breakdown of Views, Clicks, and Downloads across the selected date range. Missing days are automatically filled so the graph always displays a complete timeline."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Hover over any bar to see the exact numbers for that day."})]}),jsxRuntimeExports.jsxs("section",{id:"faq",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["8. Troubleshooting"," ",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My analytics show zero views"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Remember that your own visits are not counted. Have someone else visit your page or share your link publicly to start generating real data."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"The chart has gaps or missing days"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This is normal. Days with no activity are shown as zero so your timeline stays accurate."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My downloads increased but my sales didnt"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"High downloads but low sales often mean your CTA or offer needs clarification or a stronger headline."})]})]})]})]})})]})}function SiteLayout(){const et=useLocation();return reactExports.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[et.pathname]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-black",children:[jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("main",{className:"relative min-h-screen bg-white",children:jsxRuntimeExports.jsx(Outlet,{})}),jsxRuntimeExports.jsx(Footer,{})]})}function LandingInfoPage(){const et=Tt=>({hidden:{opacity:0,x:Tt?60:-60},visible:{opacity:1,x:0,transition:{duration:.6,ease:"easeOut"}}}),dt=Tt=>({hidden:{opacity:0,x:Tt?-60:60,scale:.96},visible:{opacity:1,x:0,scale:1,transition:{duration:.6,ease:"easeOut"}}}),kt={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},$t=[{title:"Build and Publish Landing Pages Instantly",description:"Create high-converting landing pages in minutes and publish them instantly with a free The Messy Attic subdomain you can share anywhere.",image:landing},{title:"Drag, Drop, and Design With Ease",description:"Use a flexible block based builder to structure your page exactly how you want, sections, content blocks, offers, and calls to action.",image:blocks},{title:"Sell Your Book Instantly",description:"Turn landing pages into revenue generators by selling your published books directly from your custom  landing pagepage.",image:downLoadFeature},{title:"Built In Checkout and Payments",description:"Accept payments through secure Stripe Express checkout and receive weekly payouts with no extra setup.",image:stripeCheckout},{title:"AI Powered Content Creation",description:"Generate headlines, descriptions, offers, buttons, and full landing page copy using built-in AI inside your landing page blocks.",image:aiCopy},{title:"Save Versions and Iterate Without Risk",description:"Automatically save versions of your landing page so you can experiment, refine, and improve without losing previous work.",image:versions},{title:"Stay Organized With Section Containers",description:"Group content into containers to keep your landing page clean, structured, and easy to manage as it grows.",image:containers},{title:"Offer Books Youve Already Created",description:"Attach any Book inside The Messy Attic directly to your landing page and turn it into a downloadable or sellable offer.",image:offer},{title:"Fully Custom Brand Control",description:"Apply your brand logo, background themes, font styles, and text colors so every landing page matches your identity perfectly.",image:customBranding},{title:"Real-Time Landing Page Preview",description:"Preview your landing page live as you build so you always know exactly how it will look before publishing.",image:landingPreview},{title:"Flexible Block-Based Builder",description:"Design pages using powerful content blocks including headings, text, images, videos, dividers, FAQs, testimonials, countdown timers, and more.",image:blockFeatures},{title:"Conversion-Focused Offer Blocks",description:"Highlight offers with banners, pricing grids, verified reviews, and feature sections designed to increase trust and conversions.",image:blockConversion},{title:"Secure Checkout and Payments",description:"Accept payments with secure Stripe checkout blocks so customers can purchase directly from your landing page with confidence.",image:secureCheckout},{title:"Built-In Media and Interactive Blocks",description:"Add videos, audio players, social links, calendars, and countdown timers to create engaging, interactive experiences.",image:audioPlayer},{title:"Referral and Growth Tools",description:"Use shareable links to encourage word-of-mouth growth and expand your reach organically.",image:freeSubDomain},{title:"One Dashboard, Everything Connected",description:"Design, publish, track, and update your landing pages from one dashboard without switching between multiple tools..",image:tools}];return jsxRuntimeExports.jsx("main",{className:"w-full bg-white pt-32 pb-32",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-1/2 top-8 bottom-8 w-px bg-gray-300 hidden lg:block"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-32",children:$t.map((Tt,Dt)=>{const Ft=Dt%2===1;return jsxRuntimeExports.jsxs(motion.div,{className:"relative grid grid-cols-1 lg:grid-cols-2 items-center gap-16",initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-120px"},children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.4,ease:"easeOut"},viewport:{once:!0},className:"absolute left-1/2 -translate-x-1/2 w-8 h-8 rounded-full bg-black text-white flex items-center justify-center text-sm font-semibold z-10 hidden lg:flex",children:Dt+1}),jsxRuntimeExports.jsxs(motion.div,{variants:et(Ft),className:`flex flex-col ${Ft?"lg:col-start-2":"lg:col-start-1"}`,children:[jsxRuntimeExports.jsx(motion.h2,{className:"text-3xl font-bold text-black mb-4",children:Tt.title}),jsxRuntimeExports.jsx(motion.p,{className:"text-lg text-gray-600 leading-relaxed max-w-xl",children:Tt.description})]}),jsxRuntimeExports.jsx(motion.div,{variants:dt(Ft),className:`w-full ${Ft?"lg:col-start-1":"lg:col-start-2"}`,children:jsxRuntimeExports.jsx("div",{className:"bg-gray-100 aspect-[16/9] rounded-3xl overflow-hidden shadow-xl",children:jsxRuntimeExports.jsx("img",{loading:"lazy",src:Tt.image,alt:Tt.title,className:"w-full h-full object-cover"})})})]},Dt)})}),jsxRuntimeExports.jsx(motion.section,{className:"mt-48",initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:kt,children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-6",children:jsxRuntimeExports.jsxs(motion.div,{variants:kt,className:`
              relative overflow-hidden
              rounded-3xl
              bg-gradient-to-br from-black via-gray-900 to-black
              px-10 py-16
              shadow-2xl
            `,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_top,rgba(255,255,255,0.12),transparent_60%)]"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.h2,{variants:kt,className:"text-4xl font-bold text-white mb-4",children:"Preview a Real Landing Page"}),jsxRuntimeExports.jsx(motion.p,{variants:kt,className:"text-lg text-gray-300 max-w-2xl mb-10",children:"Explore a fully built, live landing page created with Cre8tly Studio. See the design, flow, and conversion structure in action."}),jsxRuntimeExports.jsxs(motion.button,{variants:kt,type:"button",onClick:()=>window.open("https://theinspirecollective.themessyattic.com/","_blank","noopener,noreferrer"),className:`
                  group inline-flex items-center gap-3
                  rounded-full
                  bg-white text-black
                  px-10 py-5
                  text-lg font-semibold
                  shadow-xl
                  transition-all duration-300
                  hover:shadow-2xl
                  hover:-translate-y-0.5
                  focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black
                `,children:["View Live Landing Page",jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:translate-x-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),jsxRuntimeExports.jsx(motion.span,{variants:kt,className:"mt-4 text-sm text-gray-400",children:"Opens a live example in a new tab"})]})]})})})]})})}const reveal$1={hidden:{y:24},visible:{y:0,transition:{duration:.6,ease:"easeOut"}}},stagger$2={visible:{transition:{staggerChildren:.12}}},Pill=({children:et})=>jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-xs font-semibold tracking-wide text-gray-700",children:et}),Card$1=({className:et="",children:dt})=>jsxRuntimeExports.jsx("div",{className:["rounded-2xl border border-gray-200 bg-white shadow-sm",et].join(" "),children:dt}),RangeButton=({active:et,children:dt,onClick:kt})=>jsxRuntimeExports.jsx("button",{type:"button",onMouseDown:$t=>$t.preventDefault(),onClick:kt,className:["px-4 py-2 min-w-[88px] rounded-full text-sm font-semibold border transition select-none whitespace-nowrap",et?"bg-green text-gray-700 border-green":"bg-white text-gray-600 border-gray-300 hover:bg-gray-100"].join(" "),children:dt}),Stat=({icon:et,label:dt,value:kt,sub:$t,color:Tt})=>jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,whileHover:{y:-6},className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`h-10 w-10 rounded-xl flex items-center justify-center ${Tt}`,children:jsxRuntimeExports.jsx(et,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-500",children:dt}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900",children:kt})]})]}),$t&&jsxRuntimeExports.jsx("div",{className:"mt-3 text-sm text-gray-600",children:$t})]});function formatNumber(et){return new Intl.NumberFormat().format(et)}function AnalyticsFeaturePage(){const et=useNavigate(),dt=Ft=>{const Ut=localStorage.getItem("ref_slug");return et(Ut?`${Ft}?ref=${Ut}`:Ft)},kt=reactExports.useMemo(()=>[{key:"7",label:"7 days",mult:1},{key:"14",label:"14 days",mult:1.6},{key:"30",label:"30 days",mult:2.8},{key:"90",label:"90 days",mult:6.9}],[]),[$t,Tt]=reactExports.useState("30"),Dt=reactExports.useMemo(()=>{const Ht=kt.find(Zt=>Zt.key===$t)||kt[2],Kt=Math.round(1800*Ht.mult),Yt=Math.round(420*Ht.mult),Jt=Math.max(5,Math.min(40,Math.round(Yt/Kt*100)));return{clicks:Kt,downloads:Yt,conversion:Jt,trend:Ht.key==="7"?8:Ht.key==="14"?14:Ht.key==="30"?26:41}},[$t,kt]);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-gray-900 pt-24",children:[jsxRuntimeExports.jsxs("section",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pt-16 pb-14 sm:pt-20 sm:pb-20",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-green sm:rounded-xl"}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger$2,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"relative grid gap-10 lg:grid-cols-2 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-5 text-center lg:text-left px-2 sm:px-0",children:[jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,className:"flex flex-wrap gap-2 justify-center lg:justify-start",children:[jsxRuntimeExports.jsxs(Pill,{children:[jsxRuntimeExports.jsx(ChartColumn,{className:"h-4 w-4"}),"Analytics"]}),jsxRuntimeExports.jsxs(Pill,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}),"Digital product tracking"]}),jsxRuntimeExports.jsxs(Pill,{children:[jsxRuntimeExports.jsx(ShieldCheck,{className:"h-4 w-4"}),"Business ready insights"]})]}),jsxRuntimeExports.jsxs(motion.h1,{variants:reveal$1,className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-gray-700",children:["Analytics help you",jsxRuntimeExports.jsx("span",{className:"block",children:"grow with confidence."})]}),jsxRuntimeExports.jsx(motion.p,{variants:reveal$1,className:"max-w-2xl mx-auto lg:mx-0 text-lg text-gray-700/80",children:"Track views, clicks, and downloads across 7, 14, 30, and 90 day windows so you always know what is working and what to improve."})]}),jsxRuntimeExports.jsx(motion.div,{variants:reveal$1,className:"flex justify-center lg:justify-end pt-2 sm:pt-0",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full bg-black/10 blur-xl"}),jsxRuntimeExports.jsx("div",{className:`
            relative
            flex items-center justify-center
            rounded-full
            bg-white/60
            border border-black/10
            h-28 w-28
            sm:h-36 sm:w-36
            lg:h-64 lg:w-64
          `,children:jsxRuntimeExports.jsx(ChartColumn,{className:"h-14 w-14 sm:h-18 sm:w-18 lg:h-32 lg:w-32 text-gray-700"})})]})})]})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 pb-20 pt-24",children:jsxRuntimeExports.jsx(Card$1,{className:"p-6 sm:p-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Performance snapshot"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Demo preview using sample data"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:kt.map(Ft=>jsxRuntimeExports.jsx(RangeButton,{active:$t===Ft.key,onClick:()=>Tt(Ft.key),children:Ft.label},Ft.key))})]}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger$2,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-4 md:grid-cols-3",children:[jsxRuntimeExports.jsx(Stat,{icon:MousePointerClick,label:"Total clicks",value:formatNumber(Dt.clicks),sub:"All landing page interactions",color:"bg-black"}),jsxRuntimeExports.jsx(Stat,{icon:Download,label:"Total downloads",value:formatNumber(Dt.downloads),sub:"Assets delivered to users",color:"bg-downloadGreen"}),jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,whileHover:{y:-6},className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-xl bg-royalPurple flex items-center justify-center",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Conversion rate"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Dt.conversion,"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs font-semibold text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Momentum"}),jsxRuntimeExports.jsxs("span",{children:["+",Dt.trend,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-gray-200",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full bg-royalPurple",style:{width:`${Dt.trend}%`}})})]})]})]})]})})}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-20",children:[jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-12 max-w-2xl",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-700",children:["Built for growth,",jsxRuntimeExports.jsx("span",{className:"block",children:"not guesswork."})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Analytics turn effort into strategy. When you know what users click and download, you can scale what works and fix what does not."})]}),jsxRuntimeExports.jsx(motion.div,{variants:stagger$2,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[Clock,MousePointerClick,Download,TrendingUp].map((Ft,Ut)=>jsxRuntimeExports.jsx(motion.div,{variants:reveal$1,children:jsxRuntimeExports.jsxs(Card$1,{className:"p-6 hover:-translate-y-1 transition",children:[jsxRuntimeExports.jsx(Ft,{className:"h-5 w-5 text-emerald-600"}),jsxRuntimeExports.jsx("div",{className:"mt-3 font-bold",children:["Time based insights","Track real intent","Clear performance signals","Scale with confidence"][Ut]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Make smarter decisions with real performance data."})]})},Ut))})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 pb-24",children:jsxRuntimeExports.jsxs(Card$1,{className:"relative p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-green rounded-xl"}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"The Messy Attic Analytics"}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-3xl sm:text-4xl font-extrabold text-gray-700 leading-tight",children:"Know more. Convert more."}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-gray-800 max-w-xl",children:"Track performance across time, understand user behavior, and grow your digital products with clarity."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"rounded-xl border border-black/40 px-6 py-3 text-sm font-bold text-gray-700 hover:bg-white/10 transition",children:"Get started for free"})})]})]})})]})}const Card=({className:et="",children:dt})=>jsxRuntimeExports.jsx("div",{className:["rounded-2xl border border-gray-200 bg-white shadow-sm",et].join(" "),children:dt}),reveal={hidden:{y:24},visible:{y:0,transition:{duration:.6,ease:"easeOut"}}},stagger$1={visible:{transition:{staggerChildren:.12}}};function CommunityFeaturePage(){const et=useNavigate(),dt=kt=>{const $t=localStorage.getItem("ref_slug");return et($t?`${kt}?ref=${$t}`:kt)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-gray-900 pt-20",children:[jsxRuntimeExports.jsxs("section",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pt-16 pb-14 sm:pt-20 sm:pb-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black to-neutral-900 sm:rounded-xl"}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"relative grid gap-8 lg:grid-cols-2 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-5 text-center lg:text-left px-2 sm:px-0",children:[jsxRuntimeExports.jsx(motion.div,{variants:reveal,className:"text-sm font-medium tracking-wide text-white/70 uppercase",children:"WRITING-FIRST  SUBSCRIPTION-POWERED"}),jsxRuntimeExports.jsx(motion.h1,{variants:reveal,className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-white",children:"A focused writing community built on real support."}),jsxRuntimeExports.jsx(motion.p,{variants:reveal,className:"max-w-2xl mx-auto lg:mx-0 text-lg text-white/90",children:"Publish free previews. Lock full essays behind a subscriber paywall. Turn readers into paying supporters without algorithms, follower counts, or platforms deciding who gets seen."})]}),jsxRuntimeExports.jsx(motion.div,{variants:reveal,className:"flex justify-center lg:justify-end pt-2 sm:pt-0",children:jsxRuntimeExports.jsx("div",{className:"relative flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:`
      flex items-center justify-center 
      rounded-full
      border border-white/10
      h-28 w-28
      sm:h-36 sm:w-36
      lg:h-64 lg:w-64
    `,children:jsxRuntimeExports.jsx(PenTool,{className:"h-14 w-14 sm:h-18 sm:w-18 lg:h-32 lg:w-32 text-neutral-200"})})})})]})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 py-20",children:jsxRuntimeExports.jsx(motion.div,{variants:stagger$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-6 md:grid-cols-3",children:[{icon:Lock,title:"Free + Paid in one post",desc:"Write a free preview, then lock the rest behind your paywall."},{icon:DollarSign,title:"Subscriber-based access",desc:"Offer paid subscriptions and unlock exclusive posts and discussions."},{icon:Upload,title:"Bring your audience",desc:"Invite readers directly and build a community you actually own."}].map(({icon:kt,title:$t,desc:Tt})=>jsxRuntimeExports.jsxs(motion.div,{variants:reveal,whileHover:{y:-6},className:`
          rounded-2xl
          border border-gray-200
          bg-white
          p-6
          shadow-sm
          transition
        `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md border border-gray-200",children:jsxRuntimeExports.jsx(kt,{className:"h-5 w-5 text-gray-800"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:$t})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-gray-600 leading-relaxed",children:Tt})]},$t))})}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-20",children:[jsxRuntimeExports.jsxs(motion.div,{variants:reveal,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-12 max-w-2xl",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight text-gray-900 leading-tight",children:"Built for writers who care about the work"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"The Messy Attic is designed for writers who want fewer distractions, deeper conversations, and a community that values the work, not the numbers."})]}),jsxRuntimeExports.jsx(motion.div,{variants:stagger$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-8 md:grid-cols-3 items-stretch",children:[{icon:MessageSquare,title:"Real conversation",desc:"Readers engage thoughtfully. Writing rises through discussion, not algorithms."},{icon:Lock,title:"Built-in paywall",desc:"Publish free previews and lock full essays for subscribers in the same post.",highlight:!0},{icon:TrendingUp,title:"Predictable income",desc:"Turn consistent writing into recurring revenue from readers who value your work."}].map(({icon:kt,title:$t,desc:Tt,highlight:Dt})=>jsxRuntimeExports.jsxs(motion.div,{variants:reveal,className:`
        p-8 rounded-2xl transition h-full flex flex-col
        ${Dt?"bg-black text-white border border-black":"bg-white border border-gray-200"}
      `,children:[jsxRuntimeExports.jsx(kt,{className:`h-6 w-6 ${Dt?"text-emerald-400":"text-gray-800"}`}),jsxRuntimeExports.jsx("h3",{className:`mt-4 text-xl font-semibold ${Dt?"text-white":"text-gray-900"}`,children:$t}),jsxRuntimeExports.jsx("p",{className:`mt-3 text-sm leading-relaxed ${Dt?"text-white/80":"text-gray-600"}`,children:Tt})]},$t))})]}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-16",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-14",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:"Free readers or paid supporters"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 max-w-2xl mx-auto",children:"Let anyone discover your writing. Reward subscribers who choose to support it."})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-10 md:grid-cols-2 items-stretch",children:[jsxRuntimeExports.jsxs("div",{className:"p-10 rounded-3xl border border-gray-200 bg-gray-50",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Free Readers"}),jsxRuntimeExports.jsxs("ul",{className:"mt-8 space-y-4 text-sm text-gray-700",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-gray-400"}),"Read previews"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-gray-400"}),"Comment on public posts"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-gray-400"}),"Discover your work"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-10 rounded-3xl bg-black text-white relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black to-neutral-900"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:"Subscribers"}),jsxRuntimeExports.jsxs("ul",{className:"mt-8 space-y-4 text-sm",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-emerald-400"}),"Unlock full essays"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-emerald-400"}),"Access private posts"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-emerald-400"}),"Join paid discussions"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4 text-emerald-400"}),"Support your writing directly"]})]})]})]})]})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 py-24",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-12 lg:grid-cols-2 items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900",children:"Own your audience."}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-lg text-gray-600 leading-relaxed",children:"When someone subscribes, they dont just unlock content. They become part of your publication."}),jsxRuntimeExports.jsxs("ul",{className:"mt-8 space-y-4 text-gray-700",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 text-emerald-500 mt-1"}),"Custom email templates branded to your publication"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 text-emerald-500 mt-1"}),"Automatic email alerts when you publish new work"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 text-emerald-500 mt-1"}),"Notifications when readers comment or engage"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 text-emerald-500 mt-1"}),"A dedicated publication page for all your writing"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-2xl border border-neutral-800 bg-neutral-950 p-8 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"text-white font-semibold",children:"The Inspired"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Writing by David Parsons"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border border-neutral-800 rounded-xl p-6 bg-neutral-900",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-bold text-white",children:"Silent in the woods"}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-sm text-neutral-400",children:"Lost in darkness"}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs text-neutral-500",children:"Feb 9, 2026  David Parsons"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"border-t border-neutral-800 pt-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-white",children:"The seeds we sew"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Jan 26, 2026"})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-neutral-800 pt-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-white",children:"Letting Go"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Jan 23, 2026"})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-neutral-800 pt-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-white",children:"Welcome to paradise"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500",children:"Jan 20, 2026"})]})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 py-24",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-12 lg:grid-cols-2 items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold tracking-wide text-gray-500 uppercase",children:"Long-form audio built in"}),jsxRuntimeExports.jsx("h2",{className:"mt-4 text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900 leading-tight",children:"Publish audio up to 3 hours."}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-lg text-gray-600 leading-relaxed",children:"Record podcasts. Read chapters of your book. Tell stories in your own voice. Upload full-length audio directly to your posts and let subscribers listen without leaving your page."}),jsxRuntimeExports.jsxs("ul",{className:"mt-8 space-y-4 text-gray-700",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 mt-1 text-emerald-500"}),"Upload audio up to 3 hours long"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 mt-1 text-emerald-500"}),"Perfect for podcasting and long-form storytelling"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 mt-1 text-emerald-500"}),"Read your books aloud for your community"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Check,{className:"h-5 w-5 mt-1 text-emerald-500"}),"Offer subscriber-only audio episodes"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-10 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full border border-gray-200",children:jsxRuntimeExports.jsx(AudioWaveform,{className:"h-7 w-7 text-gray-800"})}),jsxRuntimeExports.jsx("div",{className:"text-xl font-semibold text-gray-900",children:"Built for serious creators"})]}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-gray-600 leading-relaxed",children:"This isnt short clips. This is full-length audio publishing. Your voice. Your pace. Your format."}),jsxRuntimeExports.jsxs("div",{className:"mt-8 rounded-xl bg-black text-white p-6",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-white/70",children:"Maximum length"}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-2xl font-bold",children:"3 hours per upload"})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 py-16 pb-24",children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black to-neutral-900 sm:rounded-xl"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20"}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-white/80",children:"The Messy Attic Community"}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-3xl sm:text-4xl font-extrabold text-white leading-tight",children:"Publish freely. Build a paid community."})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt("/signup-community"),className:"rounded-xl bg-white px-6 py-3 text-sm font-bold text-gray-900 shadow-lg hover:bg-gray-100 transition",children:"Join the community"})})]})]})})]})}const fadeUp={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7,ease:"easeOut"}}},stagger={visible:{transition:{staggerChildren:.12}}},floatSlow={animate:{y:[0,-12,0],transition:{duration:6,repeat:1/0,ease:"easeInOut"}}};function StripePayments(){const et=useNavigate(),dt=kt=>{const $t=localStorage.getItem("ref_slug");return et($t?`${kt}?ref=${$t}`:kt)};return jsxRuntimeExports.jsxs("main",{className:"relative w-full min-h-screen bg-white pt-32 pb-32 px-6",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute -top-40 left-1/2 -translate-x-1/2 w-[1000px] h-[1000px] rounded-full bg-green/10 blur-3xl pointer-events-none",variants:floatSlow,animate:"animate"}),jsxRuntimeExports.jsxs(motion.section,{variants:stagger,initial:"hidden",animate:"visible",className:"max-w-6xl mx-auto text-center mb-32",children:[jsxRuntimeExports.jsx(motion.h1,{variants:fadeUp,className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold text-black design-text mb-6",children:"Accept payments instantly with Stripe"}),jsxRuntimeExports.jsx(motion.p,{variants:fadeUp,className:"max-w-2xl mx-auto text-black/80 text-lg mb-10",children:"The Messy Attic connects Stripe directly to your products so you can get paid without friction."}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>dt("/plans"),variants:fadeUp,whileHover:{scale:1.06},whileTap:{scale:.96},className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-black text-white font-semibold text-lg shadow-lg",children:["Start selling with Stripe",jsxRuntimeExports.jsx(ArrowRight,{className:"h-5 w-5"})]})]}),jsxRuntimeExports.jsxs("section",{className:"relative max-w-6xl mx-auto mb-40",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-green/10 via-transparent to-transparent blur-3xl rounded-[40px]"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:jsxRuntimeExports.jsx(Zap,{}),title:"Launch faster",text:"Create an offer and start accepting payments the same day.",accent:"from-green to-emerald-400"},{icon:jsxRuntimeExports.jsx(CreditCard,{}),title:"Checkout that converts",text:"Stripe Checkout is trusted worldwide and optimized for sales.",accent:"from-indigo-500 to-purple-500"},{icon:jsxRuntimeExports.jsx(Banknote,{}),title:"Automatic payouts",text:"Funds are deposited directly into your bank account.",accent:"from-emerald-400 to-green"},{icon:jsxRuntimeExports.jsx(ShieldCheck,{}),title:"Enterprise security",text:"Fraud protection and compliance handled by Stripe.",accent:"from-slate-600 to-slate-800"},{icon:jsxRuntimeExports.jsx(Globe,{}),title:"Sell globally",text:"Accept payments worldwide without extra setup.",accent:"from-cyan-500 to-blue-600"},{icon:jsxRuntimeExports.jsx(Zap,{}),title:"Instant delivery",text:"Products are delivered automatically after purchase.",accent:"from-green to-lime-400"}].map((kt,$t)=>jsxRuntimeExports.jsxs(motion.div,{initial:"hidden",whileInView:"visible",variants:fadeUp,viewport:{once:!0},whileHover:{y:-10,scale:1.02},transition:{duration:.5},className:"group relative rounded-[28px] p-[1px] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${kt.accent} opacity-40 group-hover:opacity-100 transition`}),jsxRuntimeExports.jsxs("div",{className:"relative h-full rounded-[27px] bg-black text-white p-8 flex flex-col justify-between",children:[jsxRuntimeExports.jsx(motion.div,{className:"flex items-center justify-center h-14 w-14 rounded-2xl bg-white/10 text-green mb-6",animate:{rotate:[0,2,-2,0]},transition:{duration:6,repeat:1/0},children:kt.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold mb-3",children:kt.title}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:kt.text})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 h-[2px] w-0 bg-green group-hover:w-full transition-all duration-500"})]})]},$t))})]}),jsxRuntimeExports.jsxs("section",{className:"relative max-w-6xl mx-auto mb-40",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-24 left-1/2 -translate-x-1/2 w-[900px] h-[400px] bg-green/10 blur-3xl rounded-full -z-10"}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"text-center mb-20",children:[jsxRuntimeExports.jsx(motion.h2,{variants:fadeUp,className:"text-4xl sm:text-5xl font-extrabold text-black mb-4",children:"Create an offer. Connect Stripe. Get paid."}),jsxRuntimeExports.jsx(motion.p,{variants:fadeUp,className:"max-w-3xl mx-auto text-lg text-black/70",children:"Build your offer, add it to your landing page, connect Stripe Express, and start accepting payments in minutes."})]}),jsxRuntimeExports.jsx(motion.div,{variants:stagger,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[{step:"01",title:"Create your offer",text:"Set pricing, upload content, and define what buyers receive."},{step:"02",title:"Add it to your page",text:"Drop the offer onto your landing page instantly."},{step:"03",title:"Connect Stripe Express",text:"Fast onboarding with secure identity and bank setup."},{step:"04",title:"Get paid automatically",text:"Stripe processes payments and deposits funds directly."}].map((kt,$t)=>jsxRuntimeExports.jsxs(motion.div,{variants:fadeUp,whileHover:{y:-8},className:"group relative rounded-3xl p-[1px] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green via-emerald-400 to-lime-300 opacity-30 group-hover:opacity-60 transition"}),jsxRuntimeExports.jsxs("div",{className:"relative h-full rounded-[22px] bg-white p-8 text-left shadow-md hover:shadow-xl transition",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-3",children:["STEP ",kt.step]}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-black mb-3",children:kt.title}),jsxRuntimeExports.jsx("p",{className:"text-black/70 leading-relaxed",children:kt.text})]})]},$t))}),jsxRuntimeExports.jsxs("div",{className:"mt-20 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg text-black/80 mb-4",children:"Your money never sits in The Messy Attic"}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl mx-auto text-black/60",children:"Stripe handles payments and deposits funds directly to your bank. Standard payouts arrive in 2 to 3 business days."})]})]}),jsxRuntimeExports.jsx("section",{className:"max-w-6xl mx-auto text-center",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-black text-white px-10 py-20",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Ready to start getting paid"}),jsxRuntimeExports.jsx("p",{className:"max-w-xl mx-auto text-white/80 mb-10",children:"Connect Stripe once and sell every product you create inside Cre8tly Studio."}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>dt("/plans"),whileHover:{scale:1.07},whileTap:{scale:.95},animate:{boxShadow:["0 0 0 rgba(0,0,0,0)","0 0 30px rgba(34,197,94,0.6)","0 0 0 rgba(0,0,0,0)"]},transition:{duration:3,repeat:1/0},className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-green text-black font-semibold text-lg",children:["Get started for free",jsxRuntimeExports.jsx(ArrowRight,{className:"h-5 w-5"})]})]})})]})}function AuthorsAssistant(){const et=useNavigate(),dt=kt=>{const $t=localStorage.getItem("ref_slug");return et($t?`${kt}?ref=${$t}`:kt)};return jsxRuntimeExports.jsx("section",{className:"w-full bg-white",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-28",children:[jsxRuntimeExports.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-500 text-sm font-medium mb-6 tracking-wide",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}),"AI Writing Assistant"]}),jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-[56px] font-semibold text-gray-900 leading-[1.1] tracking-tight",children:"Write, Finalize, and Publish Books With Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-[17px] text-gray-500 max-w-2xl mx-auto leading-relaxed",children:"Create, organize, and complete full-length books with an AI system built for serious authors. Authors Assistant structures your work into sections, preserves every revision, and gives you full control over when your book is finalized and published. It does not write books for you. It supports clear thinking, intentional editing, and real completion, so you can produce finished, publishable work without compromising your voice."})]}),jsxRuntimeExports.jsx("div",{className:"mt-20 w-full rounded-2xl bg-white overflow-hidden border border-gray-200",children:jsxRuntimeExports.jsx("div",{className:"aspect-[16/9] w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-lg font-medium",children:jsxRuntimeExports.jsx("img",{src:bookFeature,alt:"The Messy Attic platform preview",className:"w-full h-full object-cover shadow-sm"})})})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-8 pt-24",children:[jsxRuntimeExports.jsx(Feature,{icon:BookOpen,iconColor:"text-blue bg-blue/10",title:"Section Based Book Writing",text:"Write your book in structured sections instead of one long document, making complex ideas easier to manage."}),jsxRuntimeExports.jsx(Feature,{icon:PenTool,iconColor:"text-blue bg-blue/10",title:"Endless Editing and Revisions",text:"Rewrite, expand, shorten, or refine any section as many times as you want without starting over."}),jsxRuntimeExports.jsx(Feature,{icon:FileText,iconColor:"text-blue bg-blue/10",title:"Save Drafts Automatically",text:"Your progress is always saved. Come back anytime and continue writing exactly where you left off."}),jsxRuntimeExports.jsx(Feature,{icon:Upload,iconColor:"text-blue bg-blue/10",title:"Upload PDFs and Documents",text:"Import existing manuscripts, notes, outlines, or research from PDFs or text documents."}),jsxRuntimeExports.jsx(Feature,{icon:Sparkles,iconColor:"text-blue bg-blue/10",title:"AI Assisted Section Refinement",text:"Improve clarity, flow, and structure while keeping your original meaning and voice intact."}),jsxRuntimeExports.jsx(Feature,{icon:BookOpen,iconColor:"text-blue bg-blue/10",title:"Long Form Memory Per Project",text:"Authors Assistant understands your book as a whole, not just isolated prompts."}),jsxRuntimeExports.jsx(Feature,{icon:FileText,iconColor:"text-blue bg-blue/10",title:"Upload Your Own Book Cover",text:"Bring your own professionally designed cover and attach it to your book before export."}),jsxRuntimeExports.jsx(Feature,{icon:PenTool,iconColor:"text-blue bg-blue/10",title:"Built for Nonfiction and Fiction",text:"Works with real world material or storytelling without inventing facts or altering intent."}),jsxRuntimeExports.jsx(Feature,{icon:Download,iconColor:"text-blue bg-blue/10",title:"Export and Publish When You Are Ready",text:"Download individual chapters as PDFs during writing, then publish your completed book as a single EPUB when finished."}),jsxRuntimeExports.jsx(Feature,{icon:Lock,iconColor:"text-blue bg-blue/10",title:"Finalize and Lock Your Book",text:"Explicitly finalize your book when it is complete. Once finalized, chapters are locked to preserve a canonical version ready for publishing."}),jsxRuntimeExports.jsx(Feature,{icon:Book,iconColor:"text-blue bg-blue/10",title:"Publish a Complete EPUB Book",text:"Combine all finalized chapters into a single EPUB file, compatible with Kindle and major ebook platforms."}),jsxRuntimeExports.jsx(Feature,{icon:CircleCheckBig,iconColor:"text-blue bg-blue/10",title:"Structured Publishing Workflow",text:"Move from draft to finished book through a clear process: write, revise, finalize, and publish, without accidental changes or broken exports."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-28 text-center border-t border-gray-200 pt-16",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-extrabold text-gray-900",children:"Turn Finished Manuscripts Into Publishable Books"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 max-w-xl mx-auto",children:"Authors Assistant is more than a writing tool. It is a complete book creation and publishing workflow, designed to help serious authors finish what they start."}),jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-center gap-4",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"px-8 py-4 rounded-lg bg-blue text-white font-medium hover:bg-blue/90 transition",children:"Try Authors Assistant"})})]})]})})}function Feature({icon:et,title:dt,text:kt}){return jsxRuntimeExports.jsxs("div",{className:"group relative rounded-2xl border border-gray-200 bg-white p-6 transition-all duration-200 hover:border-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-gray-200 to-transparent opacity-0 group-hover:opacity-100 transition"}),jsxRuntimeExports.jsx("div",{className:"mb-4 flex h-9 w-9 items-center justify-center rounded-lg bg-blue/10 text-blue",children:jsxRuntimeExports.jsx(et,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("h4",{className:"text-[15px] font-semibold text-gray-900 tracking-tight",children:dt}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-500 leading-relaxed",children:kt})]})}function SettingsDomains(){const[et,dt]=reactExports.useState([]),[kt,$t]=reactExports.useState(""),[Tt,Dt]=reactExports.useState(!1),[Ft,Ut]=reactExports.useState(null),Ht=useNavigate(),Kt=async()=>{try{const rr=await axiosInstance.get("/domains");dt(rr.data.domains||[])}catch(rr){console.error(rr),y$4.error("Failed to load domains")}};reactExports.useEffect(()=>{Kt()},[]);const Yt=async()=>{var rr,sr;if(!kt.trim()){y$4.warning("Enter a domain name");return}Dt(!0);try{await axiosInstance.post("/domains/add",{domain:kt.trim().toLowerCase()}),y$4.success("Domain added. Please verify ownership."),$t(""),Kt()}catch(nr){console.error(nr),y$4.error(((sr=(rr=nr==null?void 0:nr.response)==null?void 0:rr.data)==null?void 0:sr.message)||"Failed to add domain")}finally{Dt(!1)}},Jt=async rr=>{Ut(rr);try{(await axiosInstance.post("/domains/verify",{domain:rr})).data.verified?(y$4.success("Domain verified successfully!"),Kt()):y$4.info("Verification not found yet. Try again shortly.")}catch(sr){console.error(sr),y$4.error("Verification failed")}finally{Ut(null)}},Zt=async rr=>{if(window.confirm("Remove this domain?"))try{await axiosInstance.delete(`/domains/remove/${rr}`),y$4.info("Domain removed"),Kt()}catch(sr){console.error(sr),y$4.error("Failed to remove domain")}},er=async rr=>{try{await axiosInstance.post("/domains/set-primary",{domain:rr}),y$4.success("Primary domain updated"),Kt()}catch(sr){console.error(sr),y$4.error("Failed to set primary domain")}};return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ht("/settings"),className:"mb-4 px-4 py-2 rounded-lg bg-gray-800 text-gray-300 text-sm hover:bg-gray-700 hover:text-white transition",children:" Back to Settings"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Custom Domains"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 max-w-xl",children:"Connect your own domain to host landing pages under your brand. Domain ownership verification is required."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-xl p-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Add New Domain"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Enter a root domain you own, for example yourdomain.com"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"yourdomain.com",value:kt,onChange:rr=>$t(rr.target.value),className:"flex-1 px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:ring-2 focus:ring-green outline-none"}),jsxRuntimeExports.jsx("button",{onClick:Yt,disabled:Tt,className:"px-6 py-2 rounded-lg bg-royalPurple text-white font-semibold hover:opacity-90 disabled:opacity-60 transition",children:Tt?"Adding...":"Add Domain"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Subdomains like www will be handled automatically."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-xl p-6 shadow-lg mt-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Domains"}),et.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"No domains connected yet."}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:et.map(rr=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-900/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-white",children:rr.domain}),rr.verified&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-green/10 text-green font-semibold",children:"Verified"}),rr.is_primary&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-blue/10 text-blue font-semibold",children:"Primary"})]}),!rr.verified&&jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-400 mt-2",children:"Add this TXT record to your DNS to verify ownership"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[!rr.verified&&jsxRuntimeExports.jsx("button",{onClick:()=>Jt(rr.domain),disabled:Ft===rr.domain,className:"px-4 py-1.5 text-sm rounded-md bg-amber-500 text-black font-semibold hover:opacity-90",children:Ft===rr.domain?"Verifying...":"Verify"}),rr.verified&&!rr.is_primary&&jsxRuntimeExports.jsx("button",{onClick:()=>er(rr.domain),className:"px-4 py-1.5 text-sm rounded-md bg-gray-800 text-gray-300 hover:border-green border border-gray-700",children:"Set Primary"}),jsxRuntimeExports.jsx("button",{onClick:()=>Zt(rr.domain),className:"px-4 py-1.5 text-sm rounded-md bg-red-600 text-white hover:bg-red-700",children:"Remove"})]})]}),!rr.verified&&jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-black/60 border border-gray-700 rounded-lg p-3 text-xs font-mono text-gray-200",children:[jsxRuntimeExports.jsx("div",{children:"Type: TXT"}),jsxRuntimeExports.jsx("div",{children:"Host: @"}),jsxRuntimeExports.jsxs("div",{className:"break-all",children:["Value: cre8tly-domain-verification=",rr.verification_token]})]}),rr.verified&&!rr.is_primary&&jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-[#0B1220] border border-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-white mb-2",children:"Step 2: Point your domain to Cre8tly"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Add ONE of the following DNS records with your domain provider"}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-green mb-1",children:"Option A (recommended)"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/60 rounded-md p-3 text-xs font-mono text-gray-200 space-y-1",children:[jsxRuntimeExports.jsx("div",{children:"Type: CNAME"}),jsxRuntimeExports.jsx("div",{children:"Host: @"}),jsxRuntimeExports.jsx("div",{children:"Value: domains.themessyattic.com"}),jsxRuntimeExports.jsx("div",{children:"Proxy: ON (orange cloud)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-blue mb-1",children:"Option B (if @ is not allowed)"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/60 rounded-md p-3 text-xs font-mono text-gray-200 space-y-1",children:[jsxRuntimeExports.jsx("div",{children:"Type: CNAME"}),jsxRuntimeExports.jsx("div",{children:"Host: www"}),jsxRuntimeExports.jsx("div",{children:"Value: domains.themessyattic.com"}),jsxRuntimeExports.jsx("div",{children:"Proxy: ON (orange cloud)"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"DNS changes may take a few minutes to propagate"})]})]},rr.domain))})]}),jsxRuntimeExports.jsx("div",{className:"bg-black/40 border border-gray-700 rounded-xl p-5 mt-10",children:jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"By connecting a domain, you confirm that you own or control this domain and have permission to use it. The Messy Attic reserves the right to suspend or remove domains used for impersonation, abuse, copyright infringement, or unlawful activity."})})]})})}function CustomDomainsDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"What Custom Domains Do"},{id:"add",label:"Adding a Domain"},{id:"verify",label:"Verifying Ownership"},{id:"point",label:"Pointing Your Domain"},{id:"primary",label:"Primary Domains"},{id:"propagation",label:"DNS Propagation"},{id:"faq",label:"Troubleshooting"}],dt=kt=>{const $t=document.getElementById(kt);$t&&$t.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Custom Domains Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to connect and verify your own domain with The Messy Attic."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map(kt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt(kt.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white text-gray-300 text-xs transition",children:kt.label})},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(Globe,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Custom Domains"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Host your landing pages on your own branded domain."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Learning Time, under 2 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-green"}),"Best For, creators building branded funnels"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"Custom Domains allow you to publish your Cre8tly landing pages under your own domain instead of a Cre8tly subdomain."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This builds trust, improves conversions, and gives your brand full control over how your pages appear to visitors."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What Custom Domains Do"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Host landing pages on your own domain"}),jsxRuntimeExports.jsx("li",{children:"Remove Cre8tly branding from page URLs"}),jsxRuntimeExports.jsx("li",{children:"Improve trust and professionalism"}),jsxRuntimeExports.jsx("li",{children:"Enable consistent branding across funnels"})]})]}),jsxRuntimeExports.jsxs("section",{id:"add",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. Adding a Domain"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["To add a domain, navigate to"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Settings  Domains"})," and enter the root domain you own."]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Enter only the root domain, example, yourdomain.com"}),jsxRuntimeExports.jsx("li",{children:"Do not include https or paths"}),jsxRuntimeExports.jsx("li",{children:"Subdomains like www are handled automatically"})]})]}),jsxRuntimeExports.jsxs("section",{id:"verify",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["4. Verifying Domain Ownership",jsxRuntimeExports.jsx(ShieldCheck,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"After adding a domain, Cre8tly generates a verification token. This ensures you actually own or control the domain."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"You must add a TXT record to your DNS provider:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Type, TXT"}),jsxRuntimeExports.jsx("li",{children:"Host, @"}),jsxRuntimeExports.jsx("li",{children:"Value, cre8tly-domain-verification=your-token"})]})]}),jsxRuntimeExports.jsxs("section",{id:"point",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["5. Pointing Your Domain",jsxRuntimeExports.jsx(Link$1,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Once verified, you must point your domain to Cre8tly using a CNAME record."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Type, CNAME"}),jsxRuntimeExports.jsx("li",{children:"Host, @ or www"}),jsxRuntimeExports.jsx("li",{children:"Value, domains.themessyattic.com"}),jsxRuntimeExports.jsx("li",{children:"Proxy must be ON if using Cloudflare"})]})]}),jsxRuntimeExports.jsxs("section",{id:"primary",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Primary Domains"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"If you connect multiple domains, you can set one as your primary domain. This is the default domain used when publishing landing pages."})]}),jsxRuntimeExports.jsxs("section",{id:"propagation",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["7. DNS Propagation",jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"DNS changes are not instant. Depending on your provider, it may take a few minutes up to 24 hours for changes to fully propagate."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"If verification fails immediately, wait a few minutes and try again."})]}),jsxRuntimeExports.jsxs("section",{id:"faq",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["8. Troubleshooting",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My domain will not verify"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Double-check that the TXT record is added correctly and wait for DNS propagation before retrying verification."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My domain points correctly but pages do not load"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Ensure your CNAME record points to domains.themessyattic.com and that proxy mode is enabled if using Cloudflare."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"Can I remove a domain later"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Yes. Domains can be removed at any time from Settings. Any pages using that domain will stop resolving."})]})]})]})]})})]})}function AuthorsAssistantDocs(){const et=[{id:"intro",label:"Introduction"},{id:"what-it-is",label:"What Authors Assistant Is"},{id:"what-it-is-not",label:"What It Is Not"},{id:"projects",label:"Books and Projects"},{id:"sections",label:"Section-Based Writing"},{id:"editing",label:"Editing and Revisions"},{id:"uploads",label:"Uploading Existing Material"},{id:"memory",label:"Long-Form Memory"},{id:"drafts",label:"Draft Saving and Safety"},{id:"covers",label:"Book Covers"},{id:"finalizing",label:"Finalizing a Book"},{id:"exporting",label:"Exporting and Publishing"},{id:"workflow",label:"Recommended Workflow"},{id:"best-practices",label:"Best Practices"},{id:"troubleshooting",label:"Troubleshooting"}],dt=kt=>{const $t=document.getElementById(kt);$t&&$t.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(FilePen,{className:"w-4 h-4 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Authors Assistant Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Learn how to write, revise, finalize, and publish full-length books using a structured workflow built for serious authors."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-xs",children:et.map(kt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt(kt.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white transition text-gray-300",children:kt.label})},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[jsxRuntimeExports.jsx(FilePen,{className:"w-6 h-6 text-green"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Authors Assistant"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 ml-9",children:"A structured writing and publishing system for completing real books without compromising your voice."})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Authors Assistant is a long-form writing and publishing system designed to help you finish real books. It is built for authors who value structure, revision control, and intentional completion."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Every book is treated as a project, every chapter as a deliberate section, and every revision as part of a clear process."})]}),jsxRuntimeExports.jsxs("section",{id:"what-it-is",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What Authors Assistant Is"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Section-based book writing"}),jsxRuntimeExports.jsx("li",{children:"Unlimited revisions per section"}),jsxRuntimeExports.jsx("li",{children:"Project-level long-form memory"}),jsxRuntimeExports.jsx("li",{children:"Draft preservation and safety"}),jsxRuntimeExports.jsx("li",{children:"Finalization and EPUB publishing"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"It supports clear thinking, deliberate editing, and real completion."})]}),jsxRuntimeExports.jsxs("section",{id:"what-it-is-not",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. What It Is Not"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Authors Assistant does not write books for you."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"It does not invent facts, overwrite intent, or replace your thinking. The AI exists to refine and support what you write, not to generate disposable content."})]}),jsxRuntimeExports.jsxs("section",{id:"projects",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. Books and Projects"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each book is its own project with isolated memory and structure."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Title and metadata"}),jsxRuntimeExports.jsx("li",{children:"Sections and chapters"}),jsxRuntimeExports.jsx("li",{children:"Uploaded reference material"}),jsxRuntimeExports.jsx("li",{children:"Finalization state"})]})]}),jsxRuntimeExports.jsxs("section",{id:"sections",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Section-Based Writing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Writing is broken into sections so you can focus deeply without being overwhelmed by a single document."})]}),jsxRuntimeExports.jsxs("section",{id:"editing",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Editing and Revisions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each section can be rewritten, expanded, shortened, or refined independently."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Revisions do not affect other sections, allowing safe, focused editing."})]}),jsxRuntimeExports.jsxs("section",{id:"uploads",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Uploading Existing Material"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"PDF manuscripts"}),jsxRuntimeExports.jsx("li",{children:"Text documents"}),jsxRuntimeExports.jsx("li",{children:"Outlines and notes"})]})]}),jsxRuntimeExports.jsxs("section",{id:"memory",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"8. Long-Form Memory"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Authors Assistant maintains awareness of your entire book, not just isolated prompts."})]}),jsxRuntimeExports.jsxs("section",{id:"drafts",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"9. Draft Saving and Safety"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"All progress is saved automatically. You can leave and return at any time without losing work."})]}),jsxRuntimeExports.jsxs("section",{id:"covers",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"10. Book Covers"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Upload a custom cover to include it in your final EPUB export."})]}),jsxRuntimeExports.jsxs("section",{id:"finalizing",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"11. Finalizing a Book"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Finalizing locks all sections and creates a canonical version ready for publishing."})]}),jsxRuntimeExports.jsxs("section",{id:"exporting",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"12. Exporting and Publishing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Export individual sections as PDFs during writing."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Once finalized, export a complete EPUB compatible with Kindle and major ebook platforms."})]}),jsxRuntimeExports.jsxs("section",{id:"workflow",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"13. Recommended Workflow"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Create a book project"}),jsxRuntimeExports.jsx("li",{children:"Write sections"}),jsxRuntimeExports.jsx("li",{children:"Revise intentionally"}),jsxRuntimeExports.jsx("li",{children:"Upload a cover"}),jsxRuntimeExports.jsx("li",{children:"Finalize the book"}),jsxRuntimeExports.jsx("li",{children:"Export EPUB"})]})]}),jsxRuntimeExports.jsxs("section",{id:"best-practices",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"14. Best Practices"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Write one section at a time"}),jsxRuntimeExports.jsx("li",{children:"Finalize only when complete"}),jsxRuntimeExports.jsx("li",{children:"Use AI to refine, not replace"})]})]}),jsxRuntimeExports.jsxs("section",{id:"troubleshooting",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"15. Troubleshooting"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"If a section cannot be edited, check whether the book has been finalized. Finalized books are locked by design."})]})]})})]})}function SignupCommunity(){const{login:et}=useAuth(),[dt,kt]=reactExports.useState(!1),$t=useNavigate(),[Tt,Dt]=reactExports.useState({name:"",username:"",email:"",password:""}),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(""),[Yt]=useSearchParams(),Jt=Yt.get("ref");reactExports.useEffect(()=>{if(Ht){const rr=setTimeout(()=>Kt(""),5e3);return()=>clearTimeout(rr)}},[Ht]);const Zt=rr=>{const{name:sr,value:nr}=rr.target;Dt({...Tt,[sr]:sr==="username"?nr.toLowerCase():nr})},er=async rr=>{var sr,nr;rr.preventDefault(),Ut(!0),Kt("");try{const ir=Tt.username.trim();if(!/^[a-zA-Z0-9_]{3,20}$/.test(ir)){Kt("Username must be 320 characters and contain only letters, numbers, or underscores."),Ut(!1);return}const lr={name:Tt.name,email:Tt.email,password:Tt.password,username:ir,...Jt&&{refSlug:Jt}},or=await axios$1.post("https://themessyattic.com/api/auth/signup-community",lr);or.status===201?(await et(Tt.email,Tt.password),$t("/community")):Kt(or.data.message||"Something went wrong")}catch(ir){(nr=(sr=ir.response)==null?void 0:sr.data)!=null&&nr.message?Kt(ir.response.data.message):Kt("Signup failed. Please try again later.")}finally{Ut(!1)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Join the community"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"font-semibold hover:underline",children:"Log in"})]})]}),Ht&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3 mb-4 text-center",children:Ht}),jsxRuntimeExports.jsxs("form",{onSubmit:er,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:Tt.name,onChange:Zt,placeholder:"Full Name",required:!0,className:"w-full h-[48px] px-4 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",value:Tt.username,onChange:Zt,placeholder:"Username",required:!0,autoComplete:"username",className:"w-full h-[48px] px-4 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"320 characters, letters, numbers, underscores only"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Tt.email,onChange:Zt,placeholder:"Email Address",required:!0,className:"w-full h-[48px] px-4 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:Tt.password,onChange:Zt,placeholder:"Password",required:!0,className:"w-full h-[48px] px-4 pr-12 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ft,className:"w-full bg-black text-white font-semibold py-3 rounded-lg",children:Ft?"Joining Community...":"Join the Community"})]})]})})})}function MyPosts(){const et=useNavigate(),[dt,kt]=reactExports.useState([]),[$t,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState([]),{postId:Ut}=useParams(),Ht=!!Ut,[Kt,Yt]=reactExports.useState(Ht),[Jt,Zt]=reactExports.useState(""),[er,rr]=reactExports.useState(!1),sr=reactExports.useRef(null),[nr,ir]=reactExports.useState(!0),lr=reactExports.useRef(0),[or,cr]=reactExports.useState(!0),dr="w-full px-4 py-3 text-sm text-left flex items-center gap-3 transition-colors";reactExports.useEffect(()=>{pr(),ur()},[]),reactExports.useEffect(()=>{function br(){Tt(null)}return window.addEventListener("click",br),()=>window.removeEventListener("click",br)},[]),reactExports.useEffect(()=>{if(!Ht)return;async function br(){try{const Mr=(await axiosInstance.get(`/community/posts/${Ut}`)).data.post;setTitle(Mr.title||""),setSubtitle(Mr.subtitle||""),setBody(Mr.body||""),setImagePreview(Mr.image_url||null),setSelectedTopicId(Mr.topic_id||""),setRelatedTopicIds(Mr.related_topic_ids||[])}catch(_r){console.error("Failed to load post:",_r),et("/community/my-posts")}finally{Yt(!1)}}br()},[Ut,Ht]);async function ur(){try{const br=await axiosInstance.get("/community/topics");Ft(br.data.topics||[])}catch(br){console.error("Failed to fetch topics:",br)}}async function pr(){try{cr(!0);const br=await axiosInstance.get("/community/posts/user");kt(br.data.posts||[])}catch(br){console.error("Failed to fetch posts:",br)}finally{cr(!1)}}reactExports.useEffect(()=>{function br(_r){sr.current&&!sr.current.contains(_r.target)&&rr(!1)}return er&&document.addEventListener("click",br),()=>{document.removeEventListener("click",br)}},[er]),reactExports.useEffect(()=>{function br(){const _r=window.scrollY;_r>lr.current&&_r>80&&ir(!1),_r<lr.current&&ir(!0),lr.current=_r}return window.addEventListener("scroll",br,{passive:!0}),()=>{window.removeEventListener("scroll",br)}},[]);function mr(br){const _r=y$4(({closeToast:Mr})=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Delete this post?"}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:Mr,className:`
              px-3 py-1.5 text-xs rounded-md
              border border-dashboard-border-light
              hover:bg-dashboard-hover-light
            `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.delete(`/community/posts/${br}`),kt(Pr=>Pr.filter(Or=>Or.id!==br)),Tt(null),y$4.dismiss(_r),y$4.success("Post deleted")}catch(Pr){console.error("Failed to delete post:",Pr),y$4.error("Failed to delete post")}},className:`
              px-3 py-1.5 text-xs rounded-md
              bg-red-600 text-white
              hover:bg-red-700
            `,children:"Delete"})]})]}),{closeButton:!1,className:"rounded-xl"})}function jr(br){const _r=`${window.location.origin}/p/${br.slug}`;navigator.clipboard.writeText(_r).then(()=>y$4.success("Link copied to clipboard"),()=>y$4.error("Failed to copy link")),Tt(null)}const Rr=reactExports.useMemo(()=>{if(!Jt.trim())return dt;const br=Jt.toLowerCase();return dt.filter(_r=>{var Mr,Pr;return((Mr=_r.title)==null?void 0:Mr.toLowerCase().includes(br))||((Pr=_r.subtitle)==null?void 0:Pr.toLowerCase().includes(br))})},[dt,Jt]);return Kt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading post"})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"My Posts"}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/community/create-post"),className:`
    hidden md:inline-flex
    px-3 py-2 rounded-lg text-sm font-medium
    bg-dashboard-text-light dark:bg-dashboard-text-dark
    text-dashboard-bg-light dark:text-dashboard-bg-dark
    hover:opacity-90
    transition
  `,children:"Create new"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-4 py-4 pb-24 max-w-3xl mx-auto space-y-2",children:[or&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading posts"}),!or&&Rr.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:Jt?"No posts match your search.":"You havent posted anything yet."}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto",children:jsxRuntimeExports.jsx("input",{value:Jt,onChange:br=>Zt(br.target.value),placeholder:"Search your posts by title or subtitle",className:`
        w-full
        px-4 py-2.5
        rounded-lg
        text-sm
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        placeholder:text-dashboard-muted-light
        dark:placeholder:text-dashboard-muted-dark
        focus:outline-none
        focus:ring-2
        focus:ring-green
      `})}),Rr.map(br=>jsxRuntimeExports.jsxs("div",{className:`
              flex items-center gap-4 p-4 rounded-xl
              border border-dashboard-border-light dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
            `,children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-md overflow-hidden bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex-shrink-0",children:br.image_url?jsxRuntimeExports.jsx("img",{src:br.image_url,alt:"",loading:"lazy",decoding:"async",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-50",children:""})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold line-clamp-1",children:jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${br.id}`,className:`
                    hover:underline
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                  `,children:br.title})}),br.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                    mt-0.5
                    text-xs
                    leading-snug
                    line-clamp-1
                    text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                  `,children:br.subtitle}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs opacity-60",children:new Date(br.created_at).toLocaleDateString()}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:br.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:br.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(MessageCircle,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:br.comment_count??0})]}),br.is_pinned===1&&jsxRuntimeExports.jsx("span",{children:"Pinned"}),br.is_locked===1&&jsxRuntimeExports.jsx("span",{children:"Locked"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:br.views}),jsxRuntimeExports.jsx("span",{children:"views"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{onClick:_r=>{_r.stopPropagation(),Tt($t===br.id?null:br.id)},className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:18})}),$t===br.id&&jsxRuntimeExports.jsxs("div",{onClick:_r=>_r.stopPropagation(),className:`
                      absolute left-1/2 mt-2 -translate-x-1/2 z-30
                      w-56
                      rounded-xl
                      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                      border border-dashboard-border-light dark:border-dashboard-border-dark
                      shadow-xl
                      overflow-hidden
                    `,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>jr(br),className:`${dr} hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark text-sm`,children:[jsxRuntimeExports.jsx(Link$1,{size:16,className:"opacity-80"}),"Copy link"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark my-1"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Tt(null),et(`/community/edit-post/${br.id}`)},className:`${dr} hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark text-sm`,children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"opacity-80"}),"Edit"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark my-1"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Tt(null),mr(br.id)},className:`${dr} text-red-500 hover:bg-red-500/10 text-sm`,children:[jsxRuntimeExports.jsx(Trash2,{size:16}),"Delete"]})]})]})]})]})]},br.id))]}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
          md:hidden
          transition-all duration-200 ease-out
          ${nr?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
        `,open:er,setOpen:rr,containerRef:sr,onCreatePost:()=>{rr(!1),et("/community/create-post")},onCreateFragment:()=>{rr(!1),et("/community/fragments/create")}})]})}function AddSubscribersModal({open:et,onClose:dt,onSuccess:kt}){const[$t,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState(!1);if(!et)return null;function Kt(){const er=Dt.trim().toLowerCase();if(er){if($t.includes(er)){y$4.info("Email already added");return}Tt(rr=>[...rr,er]),Ft("")}}function Yt(er){Tt(rr=>rr.filter(sr=>sr!==er))}function Jt(er){var nr;const rr=(nr=er.target.files)==null?void 0:nr[0];if(!rr)return;const sr=new FileReader;sr.onload=()=>{const lr=sr.result.split(/\r?\n/).map(or=>or.trim()).filter(Boolean).map(or=>{var cr;return(cr=or.split(",")[0])==null?void 0:cr.trim().toLowerCase()}).filter(Boolean);Tt(or=>[...new Set([...or,...lr])])},sr.readAsText(rr)}async function Zt(){if(!$t.length){y$4.error("Add at least one email");return}try{Ht(!0),await axiosInstance.post("/community/subscriptions/invites",{emails:$t}),y$4.success("Invites sent"),kt==null||kt(),dt()}catch{y$4.error("Failed to send invites")}finally{Ht(!1)}}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-lg
        mx-4 sm:mx-6 md:mx-0
        rounded-2xl
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        p-6
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"Add subscribers"}),jsxRuntimeExports.jsx("button",{onClick:dt,children:jsxRuntimeExports.jsx(X$5,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-3",children:[jsxRuntimeExports.jsx("input",{value:Dt,onChange:er=>Ft(er.target.value),placeholder:"email@example.com",autoComplete:"off",autoCorrect:"off",spellCheck:!1,className:"flex-1 rounded-lg px-3 py-2 text-sm border bg-dashboard-bg-light dark:bg-dashboard-bg-dark",onKeyDown:er=>{er.key==="Enter"&&(er.preventDefault(),Kt())}}),jsxRuntimeExports.jsx("button",{onClick:Kt,className:"px-3 rounded-lg bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer opacity-80 hover:opacity-100 mb-4",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Upload CSV",jsxRuntimeExports.jsx("input",{type:"file",accept:".csv",onChange:Jt,className:"hidden"})]}),$t.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:$t.map(er=>jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:[er,jsxRuntimeExports.jsx("button",{onClick:()=>Yt(er),children:jsxRuntimeExports.jsx(X$5,{size:12})})]},er))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"text-sm px-4 py-2 rounded-lg border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Zt,disabled:Ut,className:"text-sm px-4 py-2 rounded-lg bg-blue text-white disabled:opacity-50",children:Ut?"Sending":"Send invites"})]})]})})}function PendingInvites({refreshKey:et}){const[dt,kt]=reactExports.useState([]),[$t,Tt]=reactExports.useState(!0);async function Dt(){try{Tt(!0);const Ht=await axiosInstance.get("/community/subscriptions/invites");kt(Ht.data.invites||[])}catch{y$4.error("Failed to load invites")}finally{Tt(!1)}}reactExports.useEffect(()=>{Dt()},[et]);async function Ft(Ht){try{await axiosInstance.post(`/community/subscriptions/invites/${Ht}/resend`),y$4.success("Invite resent")}catch{y$4.error("Failed to resend invite")}}async function Ut(Ht){if(window.confirm("Cancel this invite?"))try{await axiosInstance.delete(`/community/subscriptions/invites/${Ht}`),kt(Kt=>Kt.filter(Yt=>Yt.id!==Ht)),y$4.success("Invite cancelled")}catch{y$4.error("Failed to cancel invite")}}return $t?jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading invites"}):dt.length?jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold mb-3",children:"Pending invites"}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"p-3 text-left",children:"Email"}),jsxRuntimeExports.jsx("th",{className:"p-3 text-left",children:"Sent"}),jsxRuntimeExports.jsx("th",{className:"p-3"})]})}),jsxRuntimeExports.jsx("tbody",{children:dt.map(Ht=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("td",{className:"p-3",children:Ht.email}),jsxRuntimeExports.jsx("td",{className:"p-3",children:new Date(Ht.created_at).toLocaleDateString()}),jsxRuntimeExports.jsxs("td",{className:"p-3 flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ft(Ht.id),className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",title:"Resend",children:jsxRuntimeExports.jsx(RotateCcw,{size:14})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ut(Ht.id),className:"p-2 rounded-md hover:bg-red-500/10 text-red-500",title:"Cancel",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]})]},Ht.id))})]})})]}):null}const GRID_COLS$1="grid-cols-[48px_2.2fr_140px_160px_160px_120px_48px]";function Subscriptions(){const et=useNavigate(),[dt,kt]=reactExports.useState(null),[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState([]),[Ut,Ht]=reactExports.useState(0),[Kt,Yt]=reactExports.useState(!0),[Jt,Zt]=reactExports.useState(!1),[er,rr]=reactExports.useState(0);function sr(mr){kt(jr=>jr===mr?null:mr)}function nr(mr){return new Date(mr).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}async function ir(){try{Yt(!0);const mr=await axiosInstance.get("/community/subscriptions/me");Ft(mr.data.subscribers||[]),Ht(mr.data.count||0)}catch(mr){console.error("Failed to fetch subscribers",mr)}finally{Yt(!1)}}reactExports.useEffect(()=>{ir()},[]);const lr=Dt.filter(mr=>mr.email.toLowerCase().includes($t.toLowerCase())),or=Dt.reduce((mr,jr)=>jr.type==="monthly"?mr+(jr.revenue||0)*12:jr.type==="annual"||jr.type==="vip"?mr+(jr.revenue||0):mr,0),cr=or/12;function dr(mr){navigator.clipboard.writeText(mr),y$4.success("Email copied"),kt(null)}function ur(mr){y$4.info(`Message flow for ${mr} (next step)`),kt(null)}async function pr(mr){try{await axiosInstance.delete(`/community/subscriptions/${mr}`),Ft(jr=>jr.filter(Rr=>Rr.id!==mr)),y$4.success("Subscriber removed")}catch{y$4.error("Failed to remove subscriber")}kt(null)}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 border-b border-dashboard-border-light dark:border-dashboard-border-dark px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Subscribers"}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:[Ut," subscribers"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Zt(!0),className:"hidden md:inline-flex px-3 py-2 rounded-lg text-sm bg-blue text-white hover:opacity-90",children:"Add subscribers"})]})}),jsxRuntimeExports.jsx("div",{className:"px-0 pt-4 max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:`
          grid grid-cols-1 sm:grid-cols-2 gap-3
          rounded-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          p-4
        `,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide opacity-60",children:"Gross ARR"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-green font-semibold tabular-nums",children:["$",or.toFixed(2)]}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-50 mt-1",children:"Annualized recurring revenue before fees"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide opacity-60",children:"Gross monthly"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold tabular-nums",children:["$",cr.toFixed(2)]}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-50 mt-1",children:"Derived from active subscriptions"})]})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-0 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsx("button",{onClick:()=>Zt(!0),className:`
      w-full
      py-2.5
      rounded-lg
      text-sm
      font-medium
      bg-blue
      text-white
      hover:opacity-90
    `,children:"Add subscribers"})}),jsxRuntimeExports.jsx("div",{className:"px-0 py-4 max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50"}),jsxRuntimeExports.jsx("input",{value:$t,onChange:mr=>Tt(mr.target.value),placeholder:"Search by name or email...",autoComplete:"off",autoCorrect:"off",spellCheck:!1,className:`
              w-full pl-9 pr-3 py-2 rounded-lg text-sm
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              outline-none
            `})]})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block px-4 max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:`
          grid ${GRID_COLS$1}
          items-center
          px-4 py-3
          text-xs
          font-medium
          text-white/50
          bg-dashboard-hover-light
          dark:bg-dashboard-hover-dark
          rounded-t-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-white/30 bg-transparent accent-white/70"})}),jsxRuntimeExports.jsx("div",{children:"Subscriber"}),jsxRuntimeExports.jsx("div",{children:"Type"}),jsxRuntimeExports.jsx("div",{className:"text-center",children:"Activity"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:"Start date"}),jsxRuntimeExports.jsx("div",{className:"text-right",children:"Revenue"}),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-1",children:lr.map(mr=>jsxRuntimeExports.jsxs("div",{className:`
              grid ${GRID_COLS$1}
              items-center
              px-4 py-3
              rounded-xl
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border
              border-dashboard-border-light
              dark:border-dashboard-border-dark
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
              transition
            `,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-white/30 bg-transparent accent-white/70"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[jsxRuntimeExports.jsx("button",{onClick:jr=>{if(jr.stopPropagation(),!mr.has_profile){y$4.info("This author hasnt set up their profile yet");return}et(`/community/authors/${mr.id}`)},className:`
                  flex-shrink-0`,children:mr.profile_image_url?jsxRuntimeExports.jsx("img",{src:mr.profile_image_url,alt:mr.email,className:`
                      w-8 h-8
                      rounded-full
                      object-cover
                      border
                      border-dashboard-border-light
                      dark:border-dashboard-border-dark
                    `}):jsxRuntimeExports.jsx("div",{className:`
                      w-8 h-8
                      rounded-full
                      bg-dashboard-hover-light
                      dark:bg-dashboard-hover-dark
                      flex
                      items-center
                      justify-center
                      text-xs
                    `,children:mr.email.charAt(0).toUpperCase()})}),jsxRuntimeExports.jsx("span",{className:"text-sm truncate",children:mr.email})]}),jsxRuntimeExports.jsx("div",{children:mr.paid?jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${mr.type==="monthly"?"bg-green/20 text-green":mr.type==="annual"?"bg-blue/20 text-blue":mr.type==="vip"?"bg-purple/20 text-purple":"bg-gray-500/20"}`,children:mr.type==="monthly"?"Monthly Paid":mr.type==="annual"?"Annual Paid":mr.type==="vip"?"VIP":"Paid"}):jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-500/20 text-gray-400",children:"Free"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-0.5",children:[1,2,3,4,5].map(jr=>jsxRuntimeExports.jsx(Star,{size:10,className:jr<=mr.activity?"text-yellow fill-yellow":"opacity-30"},jr))}),jsxRuntimeExports.jsx("div",{className:"text-sm text-white/70",children:nr(mr.created_at)}),jsxRuntimeExports.jsxs("div",{className:"text-sm tabular-nums text-right text-white/70",children:["$",mr.revenue.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{onClick:jr=>jr.stopPropagation(),className:"relative flex justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>sr(mr.id),className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:16})}),dt===mr.id&&jsxRuntimeExports.jsxs("div",{className:`
                absolute
                top-10
                right-0
                w-44
                rounded-xl
                shadow-xl
                z-50
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                transition-all duration-150
              `,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>dr(mr.email),className:"w-full px-4 py-2 flex items-center gap-2 text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx(Copy,{size:14}),"Copy email"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ur(mr.email),className:"w-full px-4 py-2 flex items-center gap-2 text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx(MessageCircle,{size:14}),"Send message"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>pr(mr.id),className:"w-full px-4 py-2 flex items-center gap-2 text-sm text-red-500 hover:bg-red-500/10",children:[jsxRuntimeExports.jsx(Trash2,{size:14}),"Remove"]})]})]})]},mr.id))}),dt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>kt(null)})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-0 space-y-3",children:lr.map(mr=>jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:jr=>{if(jr.stopPropagation(),!mr.has_profile){y$4.info("This author hasnt set up their profile yet");return}et(`/community/authors/${mr.id}`)},className:`
                    flex-shrink-0`,children:mr.profile_image_url?jsxRuntimeExports.jsx("img",{src:mr.profile_image_url,alt:mr.email,className:`
                        w-8 h-8
                        rounded-full
                        object-cover
                        border
                        border-dashboard-border-light
                        dark:border-dashboard-border-dark
                      `}):jsxRuntimeExports.jsx("div",{className:`
                        w-8 h-8
                        rounded-full
                        bg-dashboard-hover-light
                        dark:bg-dashboard-hover-dark
                        flex
                        items-center
                        justify-center
                        text-xs
                      `,children:mr.email.charAt(0).toUpperCase()})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:mr.email}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:["Started ",nr(mr.created_at)]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"mt-2 flex gap-0.5",children:[1,2,3,4,5].map(jr=>jsxRuntimeExports.jsx(Star,{size:10,className:jr<=mr.activity?"text-yellow fill-yellow":"opacity-30"},jr))}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-xs",children:["Revenue $",mr.revenue.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{onClick:jr=>jr.stopPropagation(),className:"mt-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>sr(mr.id),className:`
                w-full
                flex
                items-center
                justify-center
                gap-2
                py-2
                rounded-lg
                text-sm
                bg-dashboard-hover-light
                dark:bg-dashboard-hover-dark
                hover:opacity-90
                transition-all duration-150
              `,children:[jsxRuntimeExports.jsx(Ellipsis,{size:16}),"Options"]}),dt===mr.id&&jsxRuntimeExports.jsxs("div",{className:`
                  mt-2
                  w-full
                  rounded-xl
                  shadow-xl
                  bg-dashboard-sidebar-light
                  dark:bg-dashboard-sidebar-dark
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  overflow-hidden
                `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>dr(mr.email),className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"Copy email"}),jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr.email),className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"Send message"}),jsxRuntimeExports.jsx("button",{onClick:()=>pr(mr.id),className:"w-full px-4 py-3 text-sm text-left text-red-500 hover:bg-red-500/10",children:"Remove"})]})]})]},mr.id))}),jsxRuntimeExports.jsx("div",{className:"px-4 max-w-6xl mx-auto mt-10",children:jsxRuntimeExports.jsx(PendingInvites,{refreshKey:er})}),jsxRuntimeExports.jsx(AddSubscribersModal,{open:Jt,onClose:()=>Zt(!1),onSuccess:()=>{ir(),rr(mr=>mr+1)}})]})}function PreviewSubscribeModal({open:et,onClose:dt,onConfirm:kt}){return et?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:dt}),jsxRuntimeExports.jsxs("div",{className:`
          relative
          w-full max-w-md
          rounded-2xl
          bg-white dark:bg-[#0f1216]
          p-6
          shadow-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Preview subscription page?"}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 mb-5",children:"You have unsaved changes. The preview will show your last saved subscription settings, not your current edits."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:dt,className:`
              px-4 py-2
              rounded-lg
              text-sm
              border
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
            `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:kt,className:`
              px-4 py-2
              rounded-lg
              text-sm
              bg-blue
              text-white
              hover:opacity-90
            `,children:"Preview anyway"})]})]})]}):null}const inputClass=`
  w-full rounded-xl px-4 py-3 text-sm
  bg-white dark:bg-[#0f1216]
  text-dashboard-text-light dark:text-dashboard-text-dark
  border border-dashboard-border-light dark:border-[#23272f]
  placeholder:text-dashboard-muted-light dark:placeholder:text-gray-500
  focus:outline-none focus:ring-2 focus:ring-blue/40
`;function ProfileSettings(){const et=reactExports.useRef(""),[dt,kt]=reactExports.useState(!0),[$t,Tt]=reactExports.useState(!1),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState(""),[Kt,Yt]=reactExports.useState(""),[Jt,Zt]=reactExports.useState(""),[er,rr]=reactExports.useState([]),[sr,nr]=reactExports.useState([]),[ir,lr]=reactExports.useState([]),[or,cr]=reactExports.useState(""),[dr,ur]=reactExports.useState(""),[pr,mr]=reactExports.useState(""),[jr,Rr]=reactExports.useState(""),[br,_r]=reactExports.useState(null),[Mr,Pr]=reactExports.useState({new_free_subscriber:!0,canceled_free_subscription:!0,post_comments:!0}),[Or,kr]=reactExports.useState(!1),[Tr,xr]=reactExports.useState(!1),[wr,zr]=reactExports.useState(null),[Hr,Yr]=reactExports.useState(null),[rs,as]=reactExports.useState(""),[es,Xr]=reactExports.useState(""),[Wr,cs]=reactExports.useState(!1),[ns,us]=reactExports.useState(""),[fs,ss]=reactExports.useState(""),[ps,ls]=reactExports.useState(""),[js,$s]=reactExports.useState([]),[Ds,Ts]=reactExports.useState(""),[As,_s]=reactExports.useState(!1),[Ms,Vs]=reactExports.useState([]),[Gs,Ws]=reactExports.useState([]),[Xs,Qs]=reactExports.useState(""),[Bs,qs]=reactExports.useState(""),[Ks,yn]=reactExports.useState(!1);function Dn(ms){Pr(ds=>({...ds,[ms]:!ds[ms]}))}reactExports.useEffect(()=>{na(),hs()},[]);async function na(){try{kt(!0);const ds=(await axiosInstance.get("/community/authors/me")).data.profile||{};cs(!!ds.subscriptions_enabled),Ft(ds.username||""),Ht(ds.bio||""),Yt(ds.about||""),Zt(ds.current_employment||""),rr(ds.interests||[]),nr(ds.services||[]),lr(ds.media_links||[]),zr(ds),Yr(ds.publication_logo_url||null),as(ds.publication_name||""),et.current=ds.publication_name||"",_r(ds.id),_s(!!ds.stripe_connect_account_id),cs(!!ds.subscriptions_enabled),us(typeof ds.monthly_price=="number"?ds.monthly_price.toFixed(2):""),ss(typeof ds.annual_price=="number"?ds.annual_price.toFixed(2):""),Vs(ds.monthly_benefits||[]),Ws(ds.annual_benefits||[]),ls(typeof ds.vip_price=="number"?ds.vip_price.toFixed(2):""),$s(ds.vip_benefits||[])}catch{y$4.error("Failed to load profile")}finally{kt(!1)}}const jo=As||Wr;async function Ls(ms){if(!(!ms||!br))try{const ds=new FileReader;ds.onloadend=async()=>{const ys=await axiosInstance.post("/upload-data/upload-avatar",{userId:br,profileImage:ds.result,target:"publication"});Yr(ys.data.profileImage),y$4.success("Publication logo updated")},ds.readAsDataURL(ms)}catch(ds){console.error("Publication logo upload failed",ds),y$4.error("Failed to upload logo")}}async function hs(){try{const ms=await axiosInstance.get("/community/authors/me/notifications");Pr({new_free_subscriber:!!ms.data.preferences.new_free_subscriber,canceled_free_subscription:!!ms.data.preferences.canceled_free_subscription,post_comments:!!ms.data.preferences.post_comments}),kr(!0)}catch(ms){console.error("fetchNotificationPrefs error",ms),y$4.error("Failed to load notification preferences")}}async function Gr(){var ms,ds;try{if(Tt(!0),!/^[a-zA-Z0-9_]{3,20}$/.test(Dt)){y$4.error("Username must be 320 characters and contain only letters, numbers, or underscores.");return}await axiosInstance.post("/community/authors/me",{username:Dt,bio:Ut,about:Kt,current_employment:Jt,interests:er,services:sr,media_links:ir,publication_logo_url:Hr,publication_name:rs,monthly_benefits:Ms,annual_benefits:Gs,vip_benefits:js}),await axiosInstance.post("/community/authors/me/subscription-pricing",{subscriptions_enabled:Wr,monthly_price_cents:Wr&&ns?Math.round(Number(ns)*100):void 0,annual_price_cents:Wr&&fs?Math.round(Number(fs)*100):void 0,vip_price_cents:ps?Math.round(Number(ps)*100):void 0}),await axiosInstance.post("/community/authors/me/update-notifications",Mr),y$4.success("Profile updated"),Xr("")}catch(ys){const ws=((ds=(ms=ys==null?void 0:ys.response)==null?void 0:ms.data)==null?void 0:ds.message)||(ys==null?void 0:ys.message)||"Failed to save profile";y$4.error(ws)}finally{Tt(!1)}}function gs(){!pr||!jr||(lr([...ir,{label:pr,url:jr}]),mr(""),Rr(""))}function xs(ms){lr(ir.filter((ds,ys)=>ys!==ms))}return dt?jsxRuntimeExports.jsx("p",{className:"p-6 opacity-60",children:"Loading settings"}):jsxRuntimeExports.jsxs("div",{className:"h-screen flex flex-col bg-dashboard-bg-light dark:bg-dashboard-bg-dark overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 sticky top-3 z-20 border-b border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"px-3 sm:px-4 py-3 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Author Settings"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:Gr,disabled:$t||!Or,className:`
          px-4 py-2 rounded-lg text-sm font-medium
          bg-blue text-white
          hover:opacity-90 disabled:opacity-50
        `,children:$t?"Saving":"Save"})})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsx("button",{onClick:Gr,disabled:$t,className:`
      w-full
      py-3
      rounded-lg
      text-sm
      font-medium
      bg-blue
      text-white
      hover:opacity-90
      disabled:opacity-50
    `,children:$t?"Saving":"Save changes"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"px-0 sm:px-4 py-4 sm:py-6 max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[jsxRuntimeExports.jsxs(Section$1,{title:"Username",description:"Your public @username. This will appear on your posts and profile.",children:[Tr&&jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-yellow-600",children:"Usernames cant be changed once set."}),jsxRuntimeExports.jsx("input",{value:Dt,onChange:ms=>Ft(ms.target.value.toLowerCase()),placeholder:"@username",disabled:Tr,className:`${inputClass} disabled:opacity-60`}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Letters, numbers, and underscores only"})]}),jsxRuntimeExports.jsxs(Section$1,{title:"Publication name",description:"This is the public name of your writing publication.",children:[jsxRuntimeExports.jsx("input",{value:rs,onChange:ms=>{const ds=ms.target.value;as(ds);const ys=ds.trim();if(!ys){Xr("");return}if(ys===et.current.trim()){Xr("");return}ys.length<3?Xr("Publication name must be at least 3 characters"):ys.length>120?Xr("Publication name cant exceed 120 characters"):Xr("Publication names must be unique and cant be shared with other writers")},placeholder:"The Messy Attic",maxLength:120,className:inputClass}),es?jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-yellow-600",children:es}):jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 opacity-60",children:"If left blank, your name will be used."})]}),jsxRuntimeExports.jsx(Section$1,{title:"Publication logo",description:"This image appears on your author page and publication header.",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:Hr||defaultBrandLogo,alt:"Publication logo",className:"w-20 h-20 rounded-xl object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsxs("label",{className:"cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:ms=>{var ys;const ds=(ys=ms.target.files)==null?void 0:ys[0];ds&&Ls(ds)}}),jsxRuntimeExports.jsx("span",{className:`
                  inline-flex items-center
                  px-4 py-2
                  rounded-lg
                  text-sm font-medium
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  hover:opacity-90
                  transition
                `,children:"Upload logo"})]})]})}),jsxRuntimeExports.jsx(Section$1,{title:"Bio",description:"Short one-line summary",children:jsxRuntimeExports.jsx("textarea",{value:Ut,onChange:ms=>Ht(ms.target.value),rows:5,className:`${inputClass} resize-none`})}),jsxRuntimeExports.jsx(Section$1,{title:"About",description:"Writer introduction",children:jsxRuntimeExports.jsx("textarea",{value:Kt,onChange:ms=>Yt(ms.target.value),rows:15,className:inputClass})}),jsxRuntimeExports.jsx(Section$1,{title:"Current Employment",children:jsxRuntimeExports.jsx("input",{value:Jt,onChange:ms=>Zt(ms.target.value),className:inputClass})}),jsxRuntimeExports.jsx(TagSection,{title:"Interests",value:or,setValue:cr,list:er,setList:rr}),jsxRuntimeExports.jsx(TagSection,{title:"Services Provided",value:dr,setValue:ur,list:sr,setList:nr}),jsxRuntimeExports.jsxs(Section$1,{title:"Media Links",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-3",children:[jsxRuntimeExports.jsx("input",{placeholder:"Label",value:pr,onChange:ms=>mr(ms.target.value),className:inputClass}),jsxRuntimeExports.jsx("input",{placeholder:"URL",value:jr,onChange:ms=>Rr(ms.target.value),className:inputClass}),jsxRuntimeExports.jsx("button",{onClick:gs,className:`
                  px-4 rounded-xl
                  bg-dashboard-hover-light dark:bg-[#1b1f27]
                  border border-dashboard-border-light dark:border-[#2a2f38]
                `,children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:ir.map((ms,ds)=>jsxRuntimeExports.jsxs("div",{className:`
                    flex items-center justify-between
                    rounded-xl p-4
                    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                    border border-dashboard-border-light dark:border-dashboard-border-dark
                  `,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:ms.label}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-60",children:ms.url})]}),jsxRuntimeExports.jsx("button",{onClick:()=>xs(ds),children:jsxRuntimeExports.jsx(X$5,{size:16})})]},ds))})]}),jsxRuntimeExports.jsxs(Section$1,{title:"Paid subscriptions",description:jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{children:"Let readers support you with a recurring subscription."}),!As&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-yellow-500",children:["Youll need to"," ",jsxRuntimeExports.jsx(Link$2,{to:"/settings",className:"underline hover:opacity-80",children:"set up billing"})," ","before enabling paid subscriptions."]})]}),children:[jsxRuntimeExports.jsx("div",{className:"w-full mb-6 sm:flex sm:justify-end",children:Wr&&br&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>yn(!0),className:`
                  w-full
                  sm:w-auto
                  text-xs
                  px-4
                  py-3
                  sm:py-2
                  rounded-lg
                  border
                  text-center
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  transition
                `,children:"Preview page"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-green",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",disabled:!jo,checked:Wr,onChange:ms=>cs(ms.target.checked)}),"Enable paid subscriptions"]}),Wr&&jsxRuntimeExports.jsxs("div",{className:`
                  rounded-xl
                  p-4
                  sm:p-5
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  space-y-5
                `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-blue/20 text-mediaBlue",children:"Standard"}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-60",children:"Monthly and annual subscriptions"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs opacity-60",children:"Monthly price (USD)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",step:"0.01",value:ns,onChange:ms=>us(ms.target.value),className:inputClass,placeholder:"7.50"})]}),jsxRuntimeExports.jsx(BenefitEditor,{title:"Monthly subscription benefits",benefits:Ms,setBenefits:Vs,newValue:Xs,setNewValue:Qs})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs opacity-60",children:"Annual price (USD)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",step:"0.01",value:fs,onChange:ms=>ss(ms.target.value),className:inputClass,placeholder:"50.00"})]}),jsxRuntimeExports.jsx(BenefitEditor,{title:"Annual subscription benefits",benefits:Gs,setBenefits:Ws,newValue:Bs,setNewValue:qs})]})]}),Wr&&jsxRuntimeExports.jsxs("div",{className:`
      rounded-xl
      p-4
      sm:p-5
      bg-dashboard-hover-light
      dark:bg-dashboard-hover-dark
      border
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      space-y-4
    `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-purple/20 text-purple",children:"VIP Founder"}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-60",children:"Premium, limited tier"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-50",children:"Annual only"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs opacity-60",children:"Price (USD / year)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",step:"0.01",value:ps,onChange:ms=>ls(ms.target.value),className:inputClass,placeholder:"240.00"})]}),jsxRuntimeExports.jsx(BenefitEditor,{title:"VIP Founder benefits",benefits:js,setBenefits:$s,newValue:Ds,setNewValue:Ts})]})]})]}),jsxRuntimeExports.jsx(Section$1,{title:"Unlock more tools",description:"Upgrade your plan to access premium writing and publishing features.",children:jsxRuntimeExports.jsxs("div",{className:`
              flex flex-col sm:flex-row
              items-start sm:items-center
              justify-between
              gap-4
              rounded-xl
              p-4
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              border
              border-dashboard-border-light
              dark:border-dashboard-border-dark
            `,children:[jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80 max-w-xl",children:"Authors Assistant is available on paid plan."}),jsxRuntimeExports.jsx(Link$2,{to:"/plans",children:jsxRuntimeExports.jsx("button",{className:`
                  px-4 py-2
                  rounded-lg
                  text-sm font-medium
                  bg-blue
                  text-white
                  hover:opacity-90
                  whitespace-nowrap
                `,children:"View plans"})})]})}),jsxRuntimeExports.jsx(Section$1,{title:"Notifications",description:"Control which activity you want to be notified about",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(NotificationRow,{title:"New free subscriber",description:"When someone subscribes for free",enabled:Mr.new_free_subscriber,onToggle:()=>Dn("new_free_subscriber")}),jsxRuntimeExports.jsx(NotificationRow,{title:"Canceled free subscription",description:"When someone cancels a free subscription",enabled:Mr.canceled_free_subscription,onToggle:()=>Dn("canceled_free_subscription")})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsx(NotificationRow,{title:"Comments on your posts",description:"When someone comments on a post you published",enabled:Mr.post_comments,onToggle:()=>Dn("post_comments")})})]})})]})}),jsxRuntimeExports.jsx(PreviewSubscribeModal,{open:Ks,onClose:()=>yn(!1),onConfirm:()=>{yn(!1),window.open(`/community/subscribe/${br}/choose?preview=1`,"_blank")}})]})}function Section$1({title:et,description:dt,children:kt}){return jsxRuntimeExports.jsxs("div",{className:`
        /* mobile */
        p-4
        rounded-none
        border-none
        shadow-none
        bg-transparent

        /* desktop */
        sm:p-6
        sm:rounded-2xl
        sm:bg-dashboard-sidebar-light
        sm:dark:bg-dashboard-sidebar-dark
        sm:border
        sm:border-dashboard-border-light
        sm:dark:border-dashboard-border-dark
        sm:shadow-sm
      `,children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold",children:et}),dt&&jsxRuntimeExports.jsx("div",{className:"text-xs opacity-60 mt-1",children:dt})]}),kt]})}function Toggle({enabled:et,onChange:dt}){return jsxRuntimeExports.jsx("button",{type:"button",onClick:dt,className:`
        relative inline-flex h-6 w-11 items-center rounded-full transition
        ${et?"bg-indigo-500":"bg-gray-400/40"}
      `,children:jsxRuntimeExports.jsx("span",{className:`
          inline-block h-5 w-5 transform rounded-full bg-white transition
          ${et?"translate-x-5":"translate-x-1"}
        `})})}function NotificationRow({title:et,description:dt,enabled:kt,onToggle:$t}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:et}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:dt})]}),jsxRuntimeExports.jsx(Toggle,{enabled:kt,onChange:$t})]})}function TagSection({title:et,value:dt,setValue:kt,list:$t,setList:Tt}){function Dt(){if(!dt.trim())return;const Ft=dt.split(",").map(Ut=>Ut.trim()).filter(Boolean).filter(Ut=>!$t.includes(Ut));Ft.length&&Tt([...$t,...Ft]),kt("")}return jsxRuntimeExports.jsxs(Section$1,{title:et,children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-3",children:[jsxRuntimeExports.jsx("input",{value:dt,onChange:Ft=>kt(Ft.target.value),onKeyDown:Ft=>{Ft.key==="Enter"&&(Ft.preventDefault(),Dt())},placeholder:"Type tags separated by commas",className:inputClass}),jsxRuntimeExports.jsx("button",{onClick:Dt,className:`
            px-4 rounded-xl
            bg-dashboard-hover-light dark:bg-[#1b1f27]
            border border-dashboard-border-light dark:border-[#2a2f38]
          `,children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:$t.map(Ft=>jsxRuntimeExports.jsxs("span",{className:`
              flex items-center gap-1
              px-3 py-1 rounded-full text-xs font-medium
              bg-dashboard-hover-light dark:bg-[#1b1f27]
              border border-dashboard-border-light dark:border-[#2a2f38]
            `,children:[Ft,jsxRuntimeExports.jsx("button",{onClick:()=>Tt($t.filter(Ut=>Ut!==Ft)),children:jsxRuntimeExports.jsx(X$5,{size:12})})]},Ft))})]})}function BenefitEditor({title:et,benefits:dt,setBenefits:kt,newValue:$t,setNewValue:Tt}){const Ft=dt.length>=10,[Ut,Ht]=reactExports.useState(null);function Kt(Zt){Ht(Zt)}function Yt(Zt){Zt.preventDefault()}function Jt(Zt){if(Ut===null||Ut===Zt)return;const er=[...dt],[rr]=er.splice(Ut,1);er.splice(Zt,0,rr),kt(er),Ht(null)}return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:et}),jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-60",children:[dt.length,"/",10]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{value:$t,onChange:Zt=>Tt(Zt.target.value),placeholder:Ft?"Maximum benefits reached":"Add a benefit",disabled:Ft,className:`${inputClass} ${Ft?"opacity-60":""}`}),jsxRuntimeExports.jsx("button",{disabled:Ft,onClick:()=>{!$t.trim()||Ft||(kt([...dt,$t.trim()]),Tt(""))},className:`
            px-4 rounded-xl
            bg-dashboard-hover-light dark:bg-[#1b1f27]
            disabled:opacity-50
          `,children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),Ft&&jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-500",children:"You can add up to 10 benefits per subscription tier."}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:dt.map((Zt,er)=>jsxRuntimeExports.jsxs("li",{draggable:!0,onDragStart:()=>Kt(er),onDragOver:Yt,onDrop:()=>Jt(er),className:`
              flex items-center justify-between gap-3
              rounded-xl p-3
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              cursor-move
            `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"opacity-50 cursor-grab",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:Zt})]}),jsxRuntimeExports.jsx("button",{onClick:()=>kt(dt.filter((rr,sr)=>sr!==er)),children:jsxRuntimeExports.jsx(X$5,{size:14})})]},er))})]})}function ProfilePostCarousel({posts:et}){return et!=null&&et.length?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold opacity-80",children:"More from this author"}),jsxRuntimeExports.jsx("div",{className:`
          flex gap-4 overflow-x-auto pb-2
          snap-x snap-mandatory
          no-scrollbar
        `,children:et.map(dt=>jsxRuntimeExports.jsxs(Link$2,{to:`/community/post/${dt.id}`,className:`
              min-w-[220px] max-w-[220px]
              snap-start
              rounded-xl
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              hover:opacity-90
              transition
            `,children:[jsxRuntimeExports.jsx("div",{className:"h-28 w-full rounded-t-xl overflow-hidden bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:dt.image_url?jsxRuntimeExports.jsx("img",{src:dt.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-40",children:""})}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold line-clamp-2",children:dt.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-xs opacity-60",children:[jsxRuntimeExports.jsxs("span",{children:[dt.views," views"]}),jsxRuntimeExports.jsxs("span",{children:[dt.comment_count," comments"]})]})]})]},dt.id))})]}):null}const BADGE_DEFS={helpful:{label:"Helpful Creator",icon:HandHeart,color:"text-green",bg:"bg-green/10"},great_listener:{label:"Great Listener",icon:Ear,color:"text-blue",bg:"bg-blue/10"},posted_regularly:{label:"Posted Regularly",icon:PenLine,color:"text-royalPurple",bg:"bg-royalPurple/10"},quality_content:{label:"Quality Content",icon:Sparkles,color:"text-amber-500",bg:"bg-amber-500/10"}};function Profile(){var cr,dr,ur,pr,mr,jr;const[et,dt]=reactExports.useState(!0),[kt,$t]=reactExports.useState(null),{user:Tt}=useAuth(),{userId:Dt}=useParams(),Ft=useNavigate(),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState([]),[er,rr]=reactExports.useState(!1),sr=!Dt||(Tt==null?void 0:Tt.id)===Dt;reactExports.useEffect(()=>{kt!=null&&kt.id&&Tt&&(sr||nr())},[kt,Tt,sr]);async function nr(){try{const Rr=await axiosInstance.get(`/community/subscriptions/${kt.id}/status`);Ht(Rr.data.subscribed),rr(Rr.data.has_paid_subscription)}catch(Rr){console.error("Failed to load subscription status",Rr)}}reactExports.useEffect(()=>{ir(),lr()},[Dt]);async function ir(){try{dt(!0);const Rr=await axiosInstance.get(Dt?`/community/authors/${Dt}`:"/community/authors/me");$t(Rr.data.profile)}catch{console.error("Failed to load author profile")}finally{dt(!1)}}async function lr(){try{const Rr=sr||!Dt?"/badges/my-badges":`/badges/user-badges/${Dt}`,br=await axiosInstance.get(Rr);Zt(br.data.badges||[])}catch(Rr){console.error("Failed to load badges",Rr)}}function or(){if(kt!=null&&kt.id){if(!Tt){Ft(`/signup-community?redirect=/community/subscribe/${kt.id}/choose`);return}Ft(`/community/subscribe/${kt.id}/choose`,{state:{from:`/community/authors/${kt.id}`}})}}return et?jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Loading profile"}):kt?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-0 py-2 sm:py-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"rounded-2xl p-6 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden mb-4 bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:kt.profile_image_url?jsxRuntimeExports.jsx("img",{src:kt.profile_image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl font-semibold opacity-40",children:(cr=kt.name)==null?void 0:cr.charAt(0)})}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:kt.name}),jsxRuntimeExports.jsxs("p",{children:["@",kt.username]}),!sr&&jsxRuntimeExports.jsx("button",{onClick:or,disabled:Kt,className:`
    mt-4
    text-sm px-4 py-2 rounded-lg border transition
    flex items-center justify-center gap-2
    ${Ut?"bg-green/10 text-green border-green/30 hover:bg-green/20":"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark border-dashboard-border-light dark:border-dashboard-border-dark hover:opacity-80"}
    disabled:opacity-50
  `,children:Kt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{size:14}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Please wait"})]}):Ut?"Manage Subscription":"Subscribe"}),kt.bio&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm opacity-70 leading-relaxed text-left",children:kt.bio}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ft(sr?"/community/subscriptions/subscribers":`/community/authors/${kt.id}/subscribers`)},className:`
                  mt-4 w-full
                  flex items-center justify-center
                  rounded-lg
                  bg-dashboard-hover-light dark:bg-dashboard-hover-dark
                  px-4 py-2
                  text-sm
                  text-dashboard-text-light dark:text-dashboard-text-dark
                  hover:opacity-80
                  transition
                `,children:[jsxRuntimeExports.jsx("span",{children:kt.subscriber_count.toLocaleString()}),jsxRuntimeExports.jsxs("span",{className:"ml-1 opacity-70",children:["subscriber",kt.subscriber_count===1?"":"s"]})]}),Jt.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 w-full",children:jsxRuntimeExports.jsx("div",{className:`
                      grid grid-cols-3 gap-3 justify-items-center
                      sm:flex sm:flex-wrap sm:justify-center
                    `,children:Jt.map(Rr=>jsxRuntimeExports.jsx(ProfileBadge,{badge:Rr},Rr.key_name))})})]})}),((dr=kt.media_links)==null?void 0:dr.length)>0&&jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-5 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Links"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:kt.media_links.map((Rr,br)=>jsxRuntimeExports.jsxs("a",{href:Rr.url,target:"_blank",rel:"noreferrer",className:`
                        flex items-center justify-between
                        px-3 py-2 rounded-lg text-sm
                        bg-dashboard-hover-light dark:bg-dashboard-hover-dark
                        hover:opacity-80 transition
                      `,children:[jsxRuntimeExports.jsx("span",{children:Rr.label}),jsxRuntimeExports.jsx(ExternalLink,{size:14})]},br))})]}),((ur=kt.posts)==null?void 0:ur.length)>0&&jsxRuntimeExports.jsx("div",{className:"rounded-2xl p-5 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[kt.publication_logo_url&&jsxRuntimeExports.jsx("img",{src:kt.publication_logo_url,alt:kt.publication_name,className:"w-10 h-10 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"leading-tight",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold",children:kt.publication_name||"Publication"}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:["Writing by ",kt.name]})]})]}),kt.publication_description&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 leading-relaxed",children:kt.publication_description}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ft(`/community/authors/${kt.id}/publication`),className:`
          mt-1
          w-full
          flex items-center justify-between
          px-4 py-2
          rounded-lg
          bg-dashboard-hover-light dark:bg-dashboard-hover-dark
          text-sm
          text-dashboard-text-light dark:text-dashboard-text-dark
          hover:opacity-80
          transition
        `,children:[jsxRuntimeExports.jsxs("span",{children:["Read ",kt.publication_name||"publication"]}),jsxRuntimeExports.jsx(ChevronRight,{size:16,className:"mt-[1px]"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 space-y-8",children:[kt.about&&jsxRuntimeExports.jsx(Section,{title:"About",children:jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed opacity-80 whitespace-pre-wrap",children:kt.about})}),kt.current_employment&&jsxRuntimeExports.jsx(Section,{title:"Current Employment",children:jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80",children:kt.current_employment})}),((pr=kt.interests)==null?void 0:pr.length)>0&&jsxRuntimeExports.jsx(Section,{title:"Interests",children:jsxRuntimeExports.jsx(TagGrid,{tags:kt.interests})}),((mr=kt.services)==null?void 0:mr.length)>0&&jsxRuntimeExports.jsx(Section,{title:"Services Provided",children:jsxRuntimeExports.jsx(TagGrid,{tags:kt.services})}),((jr=kt.posts)==null?void 0:jr.length)>0&&jsxRuntimeExports.jsx(Section,{title:"Posts",children:jsxRuntimeExports.jsx(ProfilePostCarousel,{posts:kt.posts})})]})]})})}):jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Profile not found"})}function Section({title:et,children:dt}){return jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-6 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold mb-3",children:et}),dt]})}function ProfileBadge({badge:et}){const dt=BADGE_DEFS[et.key_name];if(!dt)return null;const kt=!!et.earned,$t=dt.icon;return jsxRuntimeExports.jsxs("div",{title:et.description,className:`
        flex flex-col items-center
        w-16
        text-center
        transition
        ${kt?"opacity-100":"opacity-40 grayscale"}
      `,children:[jsxRuntimeExports.jsx("div",{className:`
          w-10 h-10 rounded-full
          flex items-center justify-center
          border
          ${dt.bg}
          ${kt?dt.color:""}
          border-dashboard-border-light dark:border-dashboard-border-dark
        `,children:jsxRuntimeExports.jsx($t,{size:18})}),jsxRuntimeExports.jsx("span",{className:"mt-1 text-[10px] leading-tight",children:dt.label})]})}function TagGrid({tags:et}){return jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:et.map(dt=>jsxRuntimeExports.jsx("span",{className:`
            px-2.5 py-0.5
            rounded-full
            text-[11px] font-medium tracking-wide
            bg-dashboard-hover-light/70
            dark:bg-[#1b1f27]/70
            border border-dashboard-border-light/60
            dark:border-[#2a2f38]/60
            opacity-80
          `,children:dt},dt))})}function InviteAccept(){const{token:et}=useParams(),dt=useNavigate(),{user:kt}=useAuth(),[$t,Tt]=reactExports.useState(!0),[Dt,Ft]=reactExports.useState(null);reactExports.useEffect(()=>{Ut()},[]);async function Ut(){try{const Kt=await axiosInstance.get(`/community/subscriptions/invites/${et}`);Ft(Kt.data.invite)}catch{y$4.error("Invite not found or expired")}finally{Tt(!1)}}async function Ht(){if(!kt){dt(`/signup-community?email=${encodeURIComponent(Dt.email)}&invite=${et}`);return}try{dt(`/signup-community?email=${encodeURIComponent(Dt.email)}&invite=${et}`),y$4.success("Subscription activated"),dt("/community")}catch{y$4.error("Failed to accept invite")}}return $t?jsxRuntimeExports.jsx("div",{className:"p-10 text-center",children:"Loading"}):Dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-white dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white dark:bg-dashboard-sidebar-dark border border-gray-200 dark:border-dashboard-border-dark shadow-xl p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-6",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-16 mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold tracking-wide text-gray-700 dark:text-gray-300",children:"yThe Messy Attic Community"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border border-gray-200 shadow-sm",children:jsxRuntimeExports.jsx("img",{src:Dt.author_avatar||defaultImage,alt:Dt.author_name,className:"w-full h-full object-cover"})})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Youve been invited"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:Dt.author_name})," ","has invited you to join a private community for writers, authors, and readers."]}),jsxRuntimeExports.jsx("button",{onClick:Ht,className:"w-full py-3 rounded-xl bg-primary text-black font-semibold hover:opacity-90 transition",children:"Accept invitation"}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-xs text-gray-400",children:"Youll be asked to sign in or create an account if needed."})]})}):jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Invite not available"})}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:et}){return["img",mergeAttributes(this.options.HTMLAttributes,et)]},parseMarkdown:(et,dt)=>dt.createNode("image",{src:et.href,title:et.title,alt:et.text}),renderMarkdown:et=>{var dt,kt,$t,Tt,Dt,Ft;const Ut=(kt=(dt=et.attrs)==null?void 0:dt.src)!=null?kt:"",Ht=(Tt=($t=et.attrs)==null?void 0:$t.alt)!=null?Tt:"",Kt=(Ft=(Dt=et.attrs)==null?void 0:Dt.title)!=null?Ft:"";return Kt?`![${Ht}](${Ut} "${Kt}")`:`![${Ht}](${Ut})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:et,minWidth:dt,minHeight:kt,alwaysPreserveAspectRatio:$t}=this.options.resize;return({node:Tt,getPos:Dt,HTMLAttributes:Ft,editor:Ut})=>{const Ht=document.createElement("img");Object.entries(Ft).forEach(([Jt,Zt])=>{if(Zt!=null)switch(Jt){case"width":case"height":break;default:Ht.setAttribute(Jt,Zt);break}}),Ht.src=Ft.src;const Kt=new ResizableNodeView({element:Ht,editor:Ut,node:Tt,getPos:Dt,onResize:(Jt,Zt)=>{Ht.style.width=`${Jt}px`,Ht.style.height=`${Zt}px`},onCommit:(Jt,Zt)=>{const er=Dt();er!==void 0&&this.editor.chain().setNodeSelection(er).updateAttributes(this.name,{width:Jt,height:Zt}).run()},onUpdate:(Jt,Zt,er)=>Jt.type===Tt.type,options:{directions:et,min:{width:dt,height:kt},preserveAspectRatio:$t===!0}}),Yt=Kt.dom;return Yt.style.visibility="hidden",Yt.style.pointerEvents="none",Ht.onload=()=>{Yt.style.visibility="",Yt.style.pointerEvents=""},Kt}},addCommands(){return{setImage:et=>({commands:dt})=>dt.insertContent({type:this.name,attrs:et})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:et=>{const[,,dt,kt,$t]=et;return{src:kt,alt:dt,title:$t}}})]}}),index_default$1=Image$1,YOUTUBE_REGEX=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,YOUTUBE_REGEX_GLOBAL=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,isValidYoutubeUrl=et=>et.match(YOUTUBE_REGEX),getYoutubeEmbedUrl=(et,dt)=>dt?"https://www.youtube-nocookie.com/embed/videoseries?list=":et?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",getEmbedUrlFromYoutubeUrl=et=>{const{url:dt,allowFullscreen:kt,autoplay:$t,ccLanguage:Tt,ccLoadPolicy:Dt,controls:Ft,disableKBcontrols:Ut,enableIFrameApi:Ht,endTime:Kt,interfaceLanguage:Yt,ivLoadPolicy:Jt,loop:Zt,modestBranding:er,nocookie:rr,origin:sr,playlist:nr,progressBarColor:ir,startAt:lr,rel:or}=et;if(!isValidYoutubeUrl(dt))return null;if(dt.includes("/embed/"))return dt;if(dt.includes("youtu.be")){const mr=dt.split("/").pop();return mr?`${getYoutubeEmbedUrl(rr)}${mr}`:null}const dr=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(dt);if(!dr||!dr[2])return null;let ur=`${getYoutubeEmbedUrl(rr,dr[1]==="list")}${dr[2]}`;const pr=[];return kt===!1&&pr.push("fs=0"),$t&&pr.push("autoplay=1"),Tt&&pr.push(`cc_lang_pref=${Tt}`),Dt&&pr.push("cc_load_policy=1"),Ft||pr.push("controls=0"),Ut&&pr.push("disablekb=1"),Ht&&pr.push("enablejsapi=1"),Kt&&pr.push(`end=${Kt}`),Yt&&pr.push(`hl=${Yt}`),Jt&&pr.push(`iv_load_policy=${Jt}`),Zt&&pr.push("loop=1"),er&&pr.push("modestbranding=1"),sr&&pr.push(`origin=${sr}`),nr&&pr.push(`playlist=${nr}`),lr&&pr.push(`start=${lr}`),ir&&pr.push(`color=${ir}`),or!==void 0&&pr.push(`rel=${or}`),pr.length&&(ur+=`${dr[1]==="list"?"&":"?"}${pr.join("&")}`),ur},Youtube=Node3.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:et=>({commands:dt})=>isValidYoutubeUrl(et.src)?dt.insertContent({type:this.name,attrs:et}):!1}},addPasteRules(){return this.options.addPasteHandler?[nodePasteRule({find:YOUTUBE_REGEX_GLOBAL,type:this.type,getAttributes:et=>({src:et.input})})]:[]},renderHTML({HTMLAttributes:et}){const dt=getEmbedUrlFromYoutubeUrl({url:et.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:et.start||0,rel:this.options.rel});return et.src=dt,["div",{"data-youtube-video":""},["iframe",mergeAttributes(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},et)]]},...createAtomBlockMarkdownSpec({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),index_default=Youtube;function LinkModal({open:et,onClose:dt,onSubmit:kt}){const[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState("click here");return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark p-6 rounded-xl w-full max-w-sm border border-dashboard-border-light dark:border-dashboard-border-dark shadow-xl",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4 text-dashboard-text-light dark:text-dashboard-text-dark",children:"Insert link"}),jsxRuntimeExports.jsx("input",{value:Dt,onChange:Ut=>Ft(Ut.target.value),placeholder:"Link text",className:"w-full mb-3 p-2 rounded border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark"}),jsxRuntimeExports.jsx("input",{value:$t,onChange:Ut=>Tt(Ut.target.value),placeholder:"https://...",className:"w-full mb-4 p-2 rounded border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"text-sm opacity-70",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{$t&&(kt({url:$t,text:Dt}),Tt(""),Ft("click here"),dt())},className:"px-3 py-1 bg-green text-black rounded",children:"Insert"})]})]})}):null}function VideoModal({open:et,onClose:dt,onInsert:kt}){const[$t,Tt]=reactExports.useState("");return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-xl bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark p-6 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:"Insert YouTube Video"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"hover:opacity-80",children:jsxRuntimeExports.jsx(X$5,{size:20})})]}),jsxRuntimeExports.jsx("input",{placeholder:"https://youtube.com/watch?v=...",value:$t,onChange:Dt=>Tt(Dt.target.value),className:"w-full p-3 rounded-lg bg-dashboard-bg-light dark:bg-dashboard-bg-dark border border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-4 py-2 rounded-lg border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{$t&&(kt($t),Tt(""),dt())},className:"px-4 py-2 rounded-lg bg-green text-black",children:"Insert"})]})]})}):null}const MentionMark=Mark.create({name:"mention",inclusive:!1,addAttributes(){return{username:{default:null}}},parseHTML(){return[{tag:"span[data-mention]"}]},renderHTML({HTMLAttributes:et}){return["span",mergeAttributes(et,{"data-mention":"",class:"mention-inline"}),0]}}),SubscriberDivider=Node3.create({name:"subscriberDivider",group:"block",atom:!0,selectable:!0,isolating:!0,defining:!0,parseHTML(){return[{tag:'div[data-subscriber-divider="true"]'}]},renderHTML({HTMLAttributes:et}){return["div",{...et,"data-subscriber-divider":"true",contenteditable:"false",class:"subscriber-divider-wrapper"},["div",{class:"subscriber-divider-inner"},["div",{class:"subscriber-divider-top"}," Free Content Above"],["hr",{class:"subscriber-divider-line"}],["div",{class:"subscriber-divider-bottom"}," Paid Content Below"]]]}}),CommunityPostEditor=reactExports.forwardRef(({value:et,onChange:dt,onMention:kt},$t)=>{const Tt=reactExports.useRef(null),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(0),er=useEditor({autofocus:!1,extensions:[index_default$9.configure({link:!1,underline:!1,blockquote:!1,heading:{levels:[1,2,3,4,5]},codeBlock:!0}),index_default$d,index_default$a,index_default$c,SubscriberDivider,index_default$b.configure({openOnClick:!1,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer"}}),index_default$4.configure({types:["heading","paragraph"]}),index_default$1.configure({inline:!1,allowBase64:!1}),index_default.configure({controls:!0,nocookie:!0,modestBranding:!0}),index_default$3.configure({placeholder:"Write your post..."}),MentionMark],editorProps:{attributes:{class:"prose prose-lg max-w-none focus:outline-none text-dashboard-text-light dark:text-dashboard-text-dark"}},onUpdate({editor:nr}){const ir=nr.getHTML(),or=nr.state.doc.textBetween(0,nr.state.doc.content.size," ").length;if(Zt(or),!ir||ir.trim()==="<p></p>"||ir===et)return;const{from:cr}=nr.state.selection,ur=nr.state.doc.textBetween(Math.max(0,cr-50),cr," ").match(/@([a-zA-Z0-9_]*)$/);ur&&ur[1].length>0?kt==null||kt(ur[1]):kt==null||kt(null),dt(ir)}}),rr=nr=>{if(!er)return;const{from:ir,to:lr,empty:or}=er.state.selection;if(or)return;const cr=er.state.doc.textBetween(ir,lr," ");er.chain().focus().deleteRange({from:ir,to:lr}).insertContent({type:"heading",attrs:{level:nr},content:[{type:"text",text:cr}]}).run()},sr=()=>{er&&er.chain().focus().setParagraph().run()};return reactExports.useImperativeHandle($t,()=>({insertImage:nr=>{er&&er.chain().focus().createParagraphNear().setImage({src:nr}).run()},insertMention:nr=>{if(!er)return;const{state:ir}=er,{from:lr}=ir.selection,cr=ir.doc.textBetween(Math.max(0,lr-50),lr," ").match(/@([a-zA-Z0-9_]*)$/);if(!cr)return;const dr=lr-cr[0].length;er.chain().focus().deleteRange({from:dr,to:lr}).insertContent({type:"text",text:`@${nr}`,marks:[{type:"mention",attrs:{username:nr}}]}).insertContent(" ").run()}})),reactExports.useEffect(()=>{if(!Kt)return;const nr=ir=>{Tt.current&&(Tt.current.contains(ir.target)||Yt(!1))};return document.addEventListener("mousedown",nr),()=>document.removeEventListener("mousedown",nr)},[Kt]),reactExports.useEffect(()=>{!er||!et||!et.trim()||er.getHTML()===et||er.commands.setContent(et,!1)},[er,et]),er?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsxs("div",{className:`
          flex items-center gap-2
          px-3 py-2
          border-b border-dashboard-border-light dark:border-dashboard-border-dark

          overflow-x-auto  
          overflow-y-visible
          whitespace-nowrap

          md:overflow-visible
          md:whitespace-normal
          no-scrollbar
        `,children:[jsxRuntimeExports.jsxs("div",{ref:Tt,className:"shrink-0 relative hidden md:block",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Yt(nr=>!nr),className:`
              shrink-0
              flex items-center justify-between
              min-w-[140px]
              px-3 py-2
              rounded-md
              text-sm font-medium
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            `,children:[jsxRuntimeExports.jsx("span",{children:"Body"}),jsxRuntimeExports.jsx(ChevronDown,{size:14,className:"opacity-70"})]}),Kt&&jsxRuntimeExports.jsxs("div",{className:`
                absolute left-0 mt-1 z-20
                w-44
                rounded-md
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                shadow-lg
                overflow-hidden
              `,children:[jsxRuntimeExports.jsx("button",{onClick:sr,className:"w-full px-4 py-2 text-left text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"Body"}),jsxRuntimeExports.jsx("div",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark"}),[1,2,3,4,5].map(nr=>jsxRuntimeExports.jsxs("button",{onClick:()=>rr(nr),className:"w-full px-4 py-2 text-left text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:["Heading H",nr]},nr))]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 shrink-0 md:hidden",children:[jsxRuntimeExports.jsx("button",{onClick:sr,className:`
      px-3 py-2 text-sm rounded
      border border-dashboard-border-light dark:border-dashboard-border-dark
      bg-dashboard-bg-light dark:bg-dashboard-bg-dark
      text-dashboard-text-light dark:text-dashboard-text-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
    `,children:"Body"}),[1,2,3,4,5,6].map(nr=>jsxRuntimeExports.jsxs("button",{onClick:()=>rr(nr),className:`
        px-3 py-2 text-sm rounded shrink-0
        border border-dashboard-border-light dark:border-dashboard-border-dark
        bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        text-dashboard-text-light dark:text-dashboard-text-dark
        hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      `,children:["H",nr]},nr))]}),jsxRuntimeExports.jsx("button",{onClick:()=>{er.chain().focus().insertContent({type:"subscriberDivider"}).run()},className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",title:"Subscriber Only Divider",children:jsxRuntimeExports.jsx(Lock,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleBold().run(),className:`
              shrink-0
            p-2 rounded
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark 
            ${er.isActive("bold")?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}
          `,children:jsxRuntimeExports.jsx(Bold$1,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleItalic().run(),className:`
            shrink-0
            p-2 rounded
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            ${er.isActive("italic")?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}
          `,children:jsxRuntimeExports.jsx(Italic$1,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleBlockquote().run(),className:`
            shrink-0
            p-2 rounded
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            ${er.isActive("blockquote")?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}
          `,title:"Quote",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().setHorizontalRule().run(),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Minus,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft(!0),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Link2,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().unsetLink().run(),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Unlink,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ht(!0),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(SquarePlay,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleCodeBlock().run(),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Code$1,{size:16})}),jsxRuntimeExports.jsxs("label",{className:"shrink-0 p-2 rounded cursor-pointer hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx(Image$2,{size:16}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:async nr=>{var lr,or;const ir=(lr=nr.target.files)==null?void 0:lr[0];if(ir)try{const cr=new FormData;cr.append("image",ir);const ur=(or=(await axiosInstance.post("/community/upload-image",cr,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:or.image_url;if(!ur)return;er.chain().focus().createParagraphNear().setImage({src:ur}).run()}catch(cr){console.error("Image upload failed:",cr)}finally{nr.target.value=""}}})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:er,className:`
          p-4
          min-h-[240px]
          max-h-[45vh]
          overflow-y-auto
          post-body
          prose prose-lg max-w-none

          prose-headings:mt-6 prose-headings:mb-2
          prose-p:my-3

          prose-strong:text-inherit
          prose-strong:font-semibold

          prose-a:underline
          prose-a:underline-offset-2
          prose-a:font-medium
          prose-a:text-blue
          prose-a:decoration-blue

          dark:prose-invert
          dark:prose-strong:text-inherit
          dark:prose-a:text-sky-400
          dark:prose-a:decoration-sky-400
        `}),jsxRuntimeExports.jsxs("div",{className:`
    flex justify-end
    px-4 py-2
    text-xs

    bg-dashboard-hover-light
    dark:bg-dashboard-hover-dark

    text-dashboard-muted-light
    dark:text-dashboard-muted-dark

    border-t
    border-dashboard-border-light
    dark:border-dashboard-border-dark

    rounded-b-xl
  `,children:[Jt," words"]})]}),jsxRuntimeExports.jsx(LinkModal,{open:Dt,onClose:()=>Ft(!1),onSubmit:({url:nr,text:ir})=>{if(!nr)return;const{empty:lr}=er.state.selection;lr?er.chain().focus().insertText(ir||"click here").setLink({href:nr,target:"_blank",rel:"noopener noreferrer"}).run():er.chain().focus().setLink({href:nr,target:"_blank",rel:"noopener noreferrer"}).run()}}),jsxRuntimeExports.jsx(VideoModal,{open:Ut,onClose:()=>Ht(!1),onInsert:nr=>{er.chain().focus().setYoutubeVideo({src:nr,width:640,height:360}).run()}})]}):null});function renderEmailPreview({subject:et,bodyHtml:dt},kt={}){let $t=et||"",Tt=dt||"";return Object.entries(kt).forEach(([Dt,Ft])=>{const Ut=`{{${Dt}}}`;$t=$t.split(Ut).join(Ft??""),Tt=Tt.split(Ut).join(Ft??"")}),{subject:$t,html:Tt}}function EmailPreview({subject:et,bodyHtml:dt,creatorName:kt}){const[$t,Tt]=reactExports.useState("desktop"),Ft=renderEmailPreview({subject:et,bodyHtml:dt},{subscriber_name:"John Doe",author_name:kt});return jsxRuntimeExports.jsxs("div",{className:"sticky top-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold text-gray-300",children:"Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Tt("desktop"),className:`px-2 py-1 text-xs rounded ${$t==="desktop"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"}`,children:"Desktop"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt("mobile"),className:`px-2 py-1 text-xs rounded ${$t==="mobile"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"}`,children:"Mobile"})]})]}),jsxRuntimeExports.jsxs("div",{className:`
    mx-auto rounded-lg
    border border-dashboard-border-light dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    text-dashboard-text-light dark:text-dashboard-text-dark
    ${$t==="desktop"?"max-w-xl":"max-w-sm"}
  `,children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Subject"}),jsxRuntimeExports.jsx("p",{className:"font-medium",children:Ft.subject||"(No subject)"})]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-4 prose prose-sm max-w-none post-body",dangerouslySetInnerHTML:{__html:Ft.html||"<p></p>"}})]})]})}function SendTestEmailModal({open:et,email:dt,onCancel:kt,onConfirm:$t}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-sm rounded-xl
        bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        p-6
      `,children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Send test email?"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark mb-6",children:["This will send a test email to ",jsxRuntimeExports.jsx("strong",{children:dt}),"."]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:kt,className:"px-4 py-2 rounded-md border border-dashboard-border-light dark:border-dashboard-border-dark",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:$t,className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"Send"})]})]})}):null}const EMAIL_HTML_WARN_LIMIT=1e5,EMAIL_HTML_BLOCK_LIMIT=15e4;function EmailTemplates(){const{user:et}=useAuth(),[dt,kt]=reactExports.useState(""),[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(!1),er=($t==null?void 0:$t.length)||0,rr=er>EMAIL_HTML_BLOCK_LIMIT,sr=er>EMAIL_HTML_WARN_LIMIT,nr=Kt||!dt.trim()||!$t.trim()||rr;reactExports.useEffect(()=>{ir()},[]);async function ir(){var cr,dr,ur;try{const pr=await axiosInstance.get("/community/authors/me/email-templates/free_subscriber_welcome");(cr=pr==null?void 0:pr.data)!=null&&cr.template&&(kt(pr.data.template.subject||""),Tt(pr.data.template.body_html||""))}catch(pr){console.error("Failed to load email template",(dr=pr==null?void 0:pr.response)==null?void 0:dr.status,((ur=pr==null?void 0:pr.response)==null?void 0:ur.data)||pr.message)}finally{Ft(!1)}}async function lr(){try{Ht(!0),await axiosInstance.post("/community/authors/me/email-templates",{type:"free_subscriber_welcome",subject:dt,body_html:$t}),y$4.success("Template saved")}catch(cr){console.error("Failed to save email template",cr),y$4.error("Failed to save template")}finally{Ht(!1)}}async function or(){var cr,dr;try{Yt(!0),await axiosInstance.post("/community/authors/test",{type:"free_subscriber_welcome"}),y$4.success("Test email sent")}catch(ur){if(((cr=ur==null?void 0:ur.response)==null?void 0:cr.status)===429){const pr=(dr=ur.response.data)==null?void 0:dr.retry_after_seconds,mr=pr?Math.ceil(pr/60):null;y$4.warning(mr?`Too many test emails. Try again in ${mr} minute${mr>1?"s":""}.`:"Too many test emails. Please try again later.")}else console.error("Failed to send test email",ur),y$4.error("Failed to send test email")}finally{Yt(!1)}}return Dt?jsxRuntimeExports.jsx("div",{className:"p-6 text-gray-400",children:"Loading email template"}):jsxRuntimeExports.jsx("div",{className:"h-full overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 sm:p-6 max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx(MailCheck,{className:"w-6 h-6 text-gray-300"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-white",children:"Email Templates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Customize the welcome email sent to new free subscribers."})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Subject"}),jsxRuntimeExports.jsx("input",{value:dt,onChange:cr=>kt(cr.target.value),placeholder:"Welcome {{subscriber_name}}",className:`
              w-full rounded-md px-4 py-2
              bg-[#0b1220] text-white
              border border-gray-700
              focus:outline-none focus:ring-2 focus:ring-indigo-500
            `}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Variables: ","{{subscriber_name}}",", ","{{author_name}}"]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Email Body"}),jsxRuntimeExports.jsx(CommunityPostEditor,{value:$t,onChange:Tt})]}),sr&&!rr&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-yellow-500",children:" This email is very long and may be truncated or rejected by some email clients."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:lr,disabled:Ut,className:`
            px-4 py-2 rounded-md
            bg-indigo-600 text-white
            hover:bg-indigo-700
            disabled:opacity-50
          `,children:Ut?"Saving":"Save Template"}),jsxRuntimeExports.jsx("button",{onClick:()=>Zt(!0),disabled:nr,className:`
            px-4 py-2 rounded-md
            bg-gray-700 text-white
            hover:bg-gray-600
            disabled:opacity-50
          `,children:Kt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Sending"]}):"Send Test"})]}),!Kt&&!dt.trim()&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Add a subject and email body to send a test."}),!Kt&&rr&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-2",children:"This email is too large to send."})]}),jsxRuntimeExports.jsx(EmailPreview,{subject:dt,bodyHtml:$t,creatorName:(et==null?void 0:et.name)||""}),jsxRuntimeExports.jsx(SendTestEmailModal,{open:Jt,email:et.email,onCancel:()=>Zt(!1),onConfirm:async()=>{Zt(!1),await or()}})]})})}const OPTIONS=[{value:"public",label:"Public",description:"Anyone can comment",icon:Eye},{value:"private",label:"Subscribers",description:"Any subscriber (Free or Paid) can comment",icon:Users},{value:"paid",label:"Paid subscribers",description:"Paying subscribers only",icon:Lock}];function CommentVisibilityDropdown({value:et="public",onChange:dt}){const[kt,$t]=reactExports.useState(!1),Tt=reactExports.useRef(null),Dt=OPTIONS.find(Ft=>Ft.value===et)||OPTIONS[0];return reactExports.useEffect(()=>{function Ft(Ut){Tt.current&&!Tt.current.contains(Ut.target)&&$t(!1)}return document.addEventListener("mousedown",Ft),()=>document.removeEventListener("mousedown",Ft)},[]),jsxRuntimeExports.jsxs("div",{ref:Tt,className:"relative mt-6",children:[jsxRuntimeExports.jsx("label",{className:`
          block mb-1
          text-sm font-medium
          text-dashboard-text-light
          dark:text-dashboard-text-dark
        `,children:"Comment access"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>$t(Ft=>!Ft),className:`
          w-full
          p-3
          rounded-lg
          flex items-center justify-between
          border
          bg-dashboard-bg-light dark:bg-dashboard-bg-dark
          border-dashboard-border-light dark:border-dashboard-border-dark
          text-dashboard-text-light dark:text-dashboard-text-dark
          hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
          focus:outline-none focus:ring-2 focus:ring-green
        `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Dt.icon,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:Dt.label}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70",children:Dt.description})]})]}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${kt?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),kt&&jsxRuntimeExports.jsx("div",{className:`
            mt-2 w-full
            rounded-lg
            border
            bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
            border-dashboard-border-light dark:border-dashboard-border-dark
            shadow-xl
            overflow-hidden
          `,children:OPTIONS.map(Ft=>{const Ut=Ft.icon,Ht=Ft.value===et;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{dt(Ft.value),$t(!1)},className:`
                  w-full px-4 py-3 text-left
                  flex items-start gap-3
                  transition
                  ${Ht?"bg-green/10 text-green":"hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
                `,children:[jsxRuntimeExports.jsx(Ut,{size:16,className:"mt-0.5 opacity-80"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:Ft.label}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70",children:Ft.description})]})]},Ft.value)})}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Subscribers can comment on subscriber-only posts. Paid posts require an active paid subscription."})]})}function CreatePostPage({post:et=null,topicId:dt}){var us,fs;const kt=useNavigate(),$t=reactExports.useRef(null),{postId:Tt}=useParams(),Dt=!!Tt,[Ft,Ut]=reactExports.useState((et==null?void 0:et.title)||""),[Ht,Kt]=reactExports.useState((et==null?void 0:et.subtitle)||""),[Yt,Jt]=reactExports.useState((et==null?void 0:et.body)||""),[Zt,er]=reactExports.useState([]),rr=useLocation(),sr=((us=rr.state)==null?void 0:us.topicId)||null,nr=((fs=rr.state)==null?void 0:fs.topicName)||null,[ir,lr]=reactExports.useState(sr||""),[or,cr]=reactExports.useState(""),[dr,ur]=reactExports.useState([]),[pr,mr]=reactExports.useState(!1),[jr,Rr]=reactExports.useState(null),[br,_r]=reactExports.useState((et==null?void 0:et.image_url)||null),[Mr,Pr]=reactExports.useState(!1),Or=3,[kr,Tr]=reactExports.useState([]),[xr,wr]=reactExports.useState((et==null?void 0:et.comments_visibility)||"public"),zr=reactExports.useMemo(()=>dt?Zt.find(ss=>ss.id===dt):ir?Zt.find(ss=>ss.id===ir):null,[dt,ir,Zt]),Hr=sr||dt||ir||null,rs=reactExports.useMemo(()=>{var ss,ps;return((ps=(ss=Yt==null?void 0:Yt.replace(/<[^>]*>/g," "))==null?void 0:ss.replace(/\s+/g," "))==null?void 0:ps.trim())||""},[Yt]).length,as=501,es=rs<as,Xr=rs>0,Wr=async()=>{var ps;if(!Ft.trim()){y$4.error("Title is required");return}if(!((ps=Yt==null?void 0:Yt.replace(/<[^>]*>/g,""))==null?void 0:ps.trim())){y$4.error("Post body cannot be empty");return}if(!Dt&&!dt&&!ir){y$4.error("Please select a topic");return}if(!Dt&&rs<as){y$4.error(`Posts require at least ${as} characters. This looks like a fragment.`);return}try{let ls=null;if(jr){Pr(!0);const js=new FormData;js.append("image",jr),ls=(await axiosInstance.post("/community/upload-image",js,{headers:{"Content-Type":"multipart/form-data"}})).data.image_url}if(Dt){const js={title:Ft,subtitle:Ht,body:Yt,comments_visibility:xr};ls&&(js.image_url=ls),await axiosInstance.put(`/community/posts/${Tt}`,js)}else{const js=sr||ir;await axiosInstance.post(`/community/topics/${js}/posts`,{title:Ft,subtitle:Ht,body:Yt,image_url:ls,relatedTopicIds:kr,comments_visibility:xr})}Dt?(y$4.success("Post updated"),kt("/community/posts")):(y$4.success("Post published"),kt("/community"))}catch(ls){console.error("Failed to create post:",ls)}finally{Pr(!1)}},cs=async ss=>{if(!ss){mr(!1),ur([]);return}try{const ps=await axiosInstance.get(`/community/users/search?query=${ss}`);ur(ps.data.users||[]),mr(!0)}catch(ps){console.error("mention search failed",ps)}},ns=ss=>{var ps;(ps=$t.current)==null||ps.insertMention(ss),mr(!1),ur([]),cr("")};return reactExports.useEffect(()=>{(async()=>{try{const ps=await axiosInstance.get("/community/topics");er(ps.data.topics||[])}catch(ps){console.error("Failed to load topics:",ps)}})()},[]),reactExports.useEffect(()=>{if(!Dt||!Tt)return;async function ss(){try{const ls=(await axiosInstance.get(`/community/posts/${Tt}`)).data.post;Ut(ls.title),Kt(ls.subtitle||""),Jt(ls.body),lr(ls.topic_id),wr(ls.comments_visibility||"public"),Tr((ls.related_topic_ids||[]).filter(js=>js!==ls.topic_id)),ls.image_url&&_r(ls.image_url)}catch(ps){console.error("Failed to load post",ps)}}ss()},[Dt,Tt]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-dashboard-bg-light dark:bg-dashboard-bg-dark flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:`
    sticky top-0 z-20
    h-14
    px-4 sm:px-6
    flex items-center justify-between
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    border-b border-dashboard-border-light dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>kt(-1),className:"text-sm font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Cancel"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:Dt?"Edit Post":"Create Post"}),jsxRuntimeExports.jsx("button",{onClick:Wr,disabled:Mr||!Dt&&Xr&&es,className:`
      px-3 py-1.5 rounded-md text-sm font-medium
      bg-green text-black
      disabled:opacity-50
    `,children:Mr?"Saving":Dt?"Save":"Post"})]}),jsxRuntimeExports.jsx("main",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-6",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto w-full max-w-3xl space-y-6",children:[!Dt&&!sr&&Zt.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-1 mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Topic"}),jsxRuntimeExports.jsxs("select",{value:ir,onChange:ss=>lr(ss.target.value),className:`
                w-full p-3 rounded-lg
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                text-dashboard-text-light dark:text-dashboard-text-dark
                focus:outline-none focus:ring-2
              `,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a topic"}),Zt.filter(ss=>!ss.is_locked).map(ss=>jsxRuntimeExports.jsx("option",{value:ss.id,children:ss.name},ss.id))]})]}),(sr||Dt)&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wide text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Posting in"}),jsxRuntimeExports.jsx("div",{className:`
        mt-1 inline-flex items-center px-3 py-1 rounded-full
        bg-dashboard-hover-light dark:bg-dashboard-hover-dark
        text-sm font-medium
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:nr||(zr==null?void 0:zr.name)})]}),jsxRuntimeExports.jsx(CommentVisibilityDropdown,{value:xr,onChange:wr}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:`
              text-sm font-medium
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:"Title"}),jsxRuntimeExports.jsx("input",{value:Ft,onChange:ss=>Ut(ss.target.value),placeholder:"Give your post a clear title",className:`
              w-full p-3 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              placeholder:text-dashboard-muted-light
              dark:placeholder:text-dashboard-muted-dark
              focus:outline-none focus:ring-2 focus:ring-green
            `})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 mt-4",children:[jsxRuntimeExports.jsx("label",{className:`
              text-sm font-medium
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:"Subtitle (optional)"}),jsxRuntimeExports.jsx("input",{value:Ht,onChange:ss=>Kt(ss.target.value),placeholder:"Add context or a short summary",className:`
              w-full p-3 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              placeholder:text-dashboard-muted-light
              dark:placeholder:text-dashboard-muted-dark
              focus:outline-none focus:ring-2 focus:ring-green
            `})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 md:mt-8",children:br?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:br,className:`
                w-full max-h-[240px] object-cover rounded-lg
                border border-dashboard-border-light dark:border-dashboard-border-dark
              `}),jsxRuntimeExports.jsx("button",{onClick:()=>{Rr(null),_r(null)},className:`
                absolute top-2 right-2
                px-2 py-1 text-xs rounded
                bg-black/60 text-white
                hover:opacity-80
              `,children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:`
              flex flex-col items-center justify-center gap-2
              w-full p-6 cursor-pointer rounded-lg
              border border-dashed border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-muted-light dark:text-dashboard-muted-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
              transition
            `,children:[jsxRuntimeExports.jsx(Image$2,{size:28,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Add Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:ss=>{const ps=ss.target.files[0];ps&&(Rr(ps),_r(URL.createObjectURL(ps)))}})]})}),!Dt&&jsxRuntimeExports.jsxs("div",{className:`
              mb-3
              rounded-lg
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              px-4 py-3
              text-xs sm:text-sm
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
              space-y-2
            `,children:[jsxRuntimeExports.jsx("p",{children:"This community works best when people show up as themselves. Share something real, ask a genuine question, or offer a perspective that might help someone else."}),jsxRuntimeExports.jsx("p",{className:"opacity-80",children:"This isnt a place for quick promos or low-effort posts. Those may be removed so the space stays thoughtful and worth showing up for."})]}),jsxRuntimeExports.jsxs("div",{className:`
    -mt-2
    mb-2
    text-xs
    text-dashboard-muted-light
    dark:text-dashboard-muted-dark
    flex items-center gap-1
  `,children:[jsxRuntimeExports.jsx("span",{className:"opacity-80",children:"Tip, you can mention other writers by typing"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:"@username"})]}),jsxRuntimeExports.jsx(CommunityPostEditor,{ref:$t,value:Yt,onChange:Jt,onMention:cs}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-right transition-colors",children:[jsxRuntimeExports.jsx("span",{className:rs>=as?"text-green font-medium":"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:rs}),jsxRuntimeExports.jsxs("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[" ","/ ",as," characters minimum"]})]}),pr&&dr.length>0&&jsxRuntimeExports.jsx("div",{className:`
      relative
      z-50
      mt-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
    `,children:dr.map(ss=>{var ps,ls;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>ns(ss.username),className:`
                  w-full
                  flex
                  items-center
                  gap-3
                  px-3
                  py-2
                  text-left
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  transition
                `,children:[ss.profile_image_url?jsxRuntimeExports.jsx("img",{src:ss.profile_image_url,alt:ss.username,className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold",children:(ls=(ps=ss.username)==null?void 0:ps.charAt(0))==null?void 0:ls.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["@",ss.username]})]},ss.id)})}),!Dt&&Xr&&es&&jsxRuntimeExports.jsxs("div",{className:`
              mt-3
              rounded-lg
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              px-4 py-3
              text-sm
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
            `,children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Keep going  longer posts work best here."}),jsxRuntimeExports.jsxs("p",{className:"mt-1 opacity-80",children:["Posts need at least ",as," characters. Short pieces belong as fragments."]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt("/community/fragments/create"),className:"mt-2 text-green text-sm font-medium hover:underline",children:"Post a fragment "})]}),kr.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wide text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Tags"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:kr.map(ss=>{const ps=Zt.find(ls=>ls.id===ss);return ps?jsxRuntimeExports.jsxs("span",{className:`
              inline-flex items-center gap-1
              px-2.5 py-1
              rounded-full
              text-xs font-medium
              bg-dashboard-hover-light dark:bg-dashboard-hover-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
            `,children:[ps.name,jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tr(ls=>ls.filter(js=>js!==ss)),className:"opacity-60 hover:opacity-100",children:""})]},ss):null})})]}),!Dt&&Zt.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 space-y-2",children:[jsxRuntimeExports.jsx("label",{className:`
                text-sm font-medium
                text-dashboard-text-light
                dark:text-dashboard-text-dark
              `,children:"Related topics (optional)"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:["Help readers find this post. Choose up to ",Or,"."]}),jsxRuntimeExports.jsx("p",{className:"text-[11px] italic text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Related topics are locked after publishing to keep discovery consistent."}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Zt.filter(ss=>!ss.is_locked&&ss.id!==Hr).map(ss=>{const ps=kr.includes(ss.id);return jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Tr(ls=>ps?ls.filter(js=>js!==ss.id):ls.length>=Or?(y$4.info(`You can select up to ${Or} related topics`),ls):[...ls,ss.id])},className:`
                         px-3 py-1.5 rounded-full text-xs font-medium transition
                        ${ps?"bg-green text-black":"border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light dark:text-dashboard-text-dark"}
                      `,children:ss.name},ss.id)})})]})]})})]})}function CommunitySubscribers(){const et=useNavigate(),{userId:dt}=useParams(),{user:kt}=useAuth(),$t=dt??kt.id,[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState([]);reactExports.useEffect(()=>{Dt(!0),Ht()},[dt]);async function Ht(){try{const Kt=dt?`/community/subscriptions/authors/${$t}/subscribers`:"/community/subscriptions/all-user-subscribers",Yt=await axiosInstance.get(Kt);Ut(Yt.data.subscribers||[])}catch(Kt){console.error("Failed to load subscribers",Kt),y$4.error("Failed to load subscribers")}finally{Dt(!1)}}return Tt?jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Loading subscribers"}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-0 py-14 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{et(dt?`/community/authors/${dt}`:"/community/profile")},className:"flex items-center gap-1 text-sm opacity-70 hover:opacity-100 transition",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),"Back"]}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Subscribers"})]}),Ft.length===0&&jsxRuntimeExports.jsx("div",{className:"opacity-60 text-sm",children:dt?"This author doesnt have any subscribers yet.":"You dont have any subscribers yet."}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Ft.map(Kt=>{var Yt;return jsxRuntimeExports.jsxs("button",{onClick:()=>{if(!Kt.has_profile){y$4.info("This user hasnt set up a profile yet");return}et(`/community/authors/${Kt.id}`)},className:`
                w-full
                flex items-center gap-4
                p-4
                rounded-xl
                text-left
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                transition
              `,children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex items-center justify-center",children:Kt.profile_image_url?jsxRuntimeExports.jsx("img",{src:Kt.profile_image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold opacity-50",children:(Yt=Kt.name)==null?void 0:Yt.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:Kt.name}),Kt.has_subscription===1&&jsxRuntimeExports.jsxs("span",{title:"Paid supporter",className:`
                      inline-flex items-center gap-1
                      px-2 py-0.5
                      rounded-full
                      text-[10px]
                      font-semibold
                      bg-green/10
                      text-green
                      border border-green/30
                      tracking-wide
                    `,children:[jsxRuntimeExports.jsx(Crown,{size:12}),"Paid"]})]}),Kt.username&&jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-60",children:["@",Kt.username]})]})]},Kt.id)})})]})})}function getShareUrl(et,dt="post"){return dt==="fragment"?`${window.location.origin}/community/fragments/${et.id}`:`${window.location.origin}/p/${et.slug}`}function Saved(){const et=useNavigate(),[dt,kt]=reactExports.useState([]),[$t,Tt]=reactExports.useState(!0),[Dt,Ft]=reactExports.useState(1),[Ut,Ht]=reactExports.useState(!0),[Kt,Yt]=reactExports.useState(null);reactExports.useEffect(()=>{Jt()},[]);async function Jt(){if(Ut)try{Tt(!0);const nr=await axiosInstance.get(`/community/saved-user-bookmarks?page=${Dt}`);kt(ir=>[...ir,...nr.data.posts||[]]),nr.data.nextPage?Ft(nr.data.nextPage):Ht(!1)}catch(nr){console.error("Failed to load saved posts:",nr)}finally{Tt(!1)}}async function Zt(nr){try{await axiosInstance.post(`/community/posts/${nr}/view`)}catch{}et(`/community/post/${nr}`)}const er=async(nr,ir)=>{if(nr.preventDefault(),nr.stopPropagation(),!ir)return;const lr=getShareUrl(ir,"post");try{await navigator.clipboard.writeText(lr),Yt(ir.id),setTimeout(()=>Yt(null),1500)}catch{toast.error("Failed to copy link")}},rr=async(nr,ir)=>{nr.stopPropagation();try{ir.has_liked?(await axiosInstance.delete(`/community/${ir.id}/like`),kt(lr=>lr.map(or=>or.id===ir.id?{...or,has_liked:0,like_count:Math.max((or.like_count||1)-1,0)}:or))):(await axiosInstance.post(`/community/${ir.id}/like`),kt(lr=>lr.map(or=>or.id===ir.id?{...or,has_liked:1,like_count:(or.like_count||0)+1}:or)))}catch{toast.error("Failed to update like")}};function sr(nr){return nr.is_owner===1?!1:nr.comments_locked===1||nr.comments_visibility==="paid"||nr.comments_visibility==="private"&&nr.is_subscribed!==1}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto",children:jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Saved"})})}),jsxRuntimeExports.jsxs("div",{className:"px-0 py-4 pb-24 max-w-3xl mx-auto space-y-2",children:[$t&&dt.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading saved posts"}),!$t&&dt.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Posts you save to read later will show up here."}),dt.map(nr=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(MobilePostCard,{post:nr,onOpen:()=>Zt(nr.id),onLike:ir=>rr(ir,nr),onShare:ir=>er(ir,nr),isCommentsLocked:sr(nr),copiedPostId:Kt})}),jsxRuntimeExports.jsx("div",{className:`
        hidden md:block
        px-4 py-4 sm:px-6
        rounded-lg
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        hover:bg-dashboard-hover-light
        dark:hover:bg-dashboard-hover-dark
        transition
        cursor-pointer
      `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-6 items-start",children:[jsxRuntimeExports.jsxs("div",{onClick:()=>Zt(nr.id),className:"min-w-0 cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[nr.author_image?jsxRuntimeExports.jsx("img",{src:nr.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:nr.author}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:timeAgo(nr.created_at)})]})]}),jsxRuntimeExports.jsx("h3",{className:`
              text-base sm:text-lg font-semibold
              text-dashboard-text-light dark:text-dashboard-text-dark
              line-clamp-2
              mb-1
            `,children:nr.title}),nr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                line-clamp-2
                mb-3
              `,children:nr.subtitle}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Eye,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:nr.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:ir=>rr(ir,nr),className:"flex items-center gap-1.5 hover:opacity-80 transition",children:[jsxRuntimeExports.jsx(Heart,{size:14,className:nr.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:nr.like_count??0})]}),jsxRuntimeExports.jsxs("button",{onClick:ir=>{ir.stopPropagation(),Zt(nr.id)},className:"flex items-center gap-1.5 hover:opacity-80 transition",children:[sr(nr)?jsxRuntimeExports.jsx(MessageSquareLock,{size:14,className:"opacity-70"}):jsxRuntimeExports.jsx(MessageSquare,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:nr.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:ir=>er(ir,nr),className:"flex items-center gap-1.5 hover:opacity-80 transition",children:Kt===nr.id?jsxRuntimeExports.jsx(Check,{size:14,className:"text-green-500"}):jsxRuntimeExports.jsx(Share2,{size:14,className:"opacity-70"})})]})]}),jsxRuntimeExports.jsx("div",{className:`
            w-16 h-16
            rounded-lg
            overflow-hidden
            flex-shrink-0
            bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
          `,children:nr.image_url?jsxRuntimeExports.jsx("img",{src:nr.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"No image"})})})]})})]},nr.id)),Ut&&!$t&&jsxRuntimeExports.jsx("button",{onClick:Jt,className:"w-full py-3 text-sm opacity-60 hover:opacity-100 transition",children:"Load more"})]})]})}function CreateFragment(){const kt=reactExports.useRef(null),$t=useNavigate(),[Tt]=useSearchParams(),Dt=Tt.get("reshare"),[Ft,Ut]=reactExports.useState(""),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(!1),[Zt,er]=reactExports.useState(null),[rr,sr]=reactExports.useState([]),[nr,ir]=reactExports.useState(!1),[lr,or]=reactExports.useState(""),[cr,dr]=reactExports.useState(!1),[ur,pr]=reactExports.useState(null),[mr,jr]=reactExports.useState(null),[Rr,br]=reactExports.useState(""),[_r,Mr]=reactExports.useState(null),[Pr,Or]=reactExports.useState(null),[kr,Tr]=reactExports.useState(null),{fragmentId:xr}=useParams(),wr=!!xr,zr=!!Dt&&!wr;function Hr(Wr){return new Promise((cs,ns)=>{const us=document.createElement("audio");us.preload="metadata",us.onloadedmetadata=()=>{URL.revokeObjectURL(us.src),us.duration>10800?ns(new Error("Audio exceeds the 3 hour maximum")):cs(us.duration)},us.onerror=()=>{ns(new Error("Unable to read audio metadata"))},us.src=URL.createObjectURL(Wr)})}const Yr=async Wr=>{var cs;try{Jt(!0);const ns=await Hr(Wr);console.log({fileName:Wr.name,mimeType:Wr.type});const us=await axiosInstance.post("/fragments/sign-audio-upload",{fileName:Wr.name,mimeType:Wr.type});if(!((cs=us.data)!=null&&cs.success))throw new Error("Failed to get upload URL");const{uploadUrl:fs,publicUrl:ss}=us.data;if(!(await fetch(fs,{method:"PUT",body:Wr,headers:{"Content-Type":Wr.type,"x-amz-acl":"public-read"}})).ok)throw new Error("Upload to storage failed");pr(Wr),jr(ss),br(Wr.name.replace(/\.[^/.]+$/,"")),Mr(Math.floor(ns)),Or(Wr.size),Tr(Wr.type),y$4.success("Audio uploaded")}catch(ns){console.error(" handleAudioUpload failed:",ns),y$4.error(ns.message||"Audio upload failed")}finally{Jt(!1)}},rs=async()=>{const Wr=Ft.trim();if(!Wr&&!zr&&!mr){y$4.error("Fragment cannot be empty");return}if(Wr.length>500){y$4.error("Fragments must be 500 characters or less");return}if(mr&&!Rr.trim()){y$4.error("Audio title is required");return}try{Kt(!0),wr?await axiosInstance.put(`/fragments/${xr}`,{body:Ft,audio_url:mr,audio_title:Rr,audio_duration_seconds:_r,audio_file_size:Pr,audio_mime_type:kr,allow_download:cr?1:0}):await axiosInstance.post("/fragments",{body:Ft,reshareFragmentId:zr?Dt:null,audio_url:mr,audio_title:Rr,audio_duration_seconds:_r,audio_file_size:Pr,audio_mime_type:kr,allow_download:cr?1:0}),y$4.success("Fragment published"),$t("/community")}catch(cs){console.error("Failed to create fragment:",cs),y$4.error("Failed to publish fragment")}finally{Kt(!1)}};reactExports.useEffect(()=>{if(!zr)return;async function Wr(){try{const cs=await axiosInstance.get(`/fragments/${Dt}`);er(cs.data.fragment)}catch{y$4.error("Original fragment not found"),$t("/community")}}Wr()},[zr,Dt]);const as=()=>{$t(wr?"/community/my-fragments":"/community")};reactExports.useEffect(()=>{if(!wr)return;async function Wr(){try{const ns=(await axiosInstance.get(`/fragments/${xr}`)).data.fragment;if(ns.reshared_id&&er({id:ns.reshared_id,body:ns.reshared_body,created_at:ns.reshared_created_at,author:ns.reshared_author,author_image:ns.reshared_author_image,author_is_verified:ns.reshared_author_is_verified}),Ut(ns.body||""),ns.audio_url&&(jr(ns.audio_url),br(ns.audio_title||""),Mr(ns.audio_duration_seconds||null),Or(ns.audio_file_size||null),Tr(ns.audio_mime_type||null)),dr(!!ns.allow_download),ns.reshare_fragment_id){const us=await axiosInstance.get(`/fragments/${ns.reshare_fragment_id}`);er(us.data.fragment)}}catch(cs){console.error("Failed to load fragment:",cs),$t("/community/my-fragments")}}Wr()},[xr,wr]);const es=async Wr=>{const cs=Wr.target.value,ns=Wr.target.selectionStart,us=cs.slice(0,500);Ut(us);const ss=us.slice(Math.max(0,ns-50),ns).match(/@([a-zA-Z0-9_]*)$/);if(!ss){ir(!1),sr([]);return}const ps=ss[1];if(/\s/.test(ps)){ir(!1);return}if(or(ps),!(ps.length<1))try{const ls=await axiosInstance.get(`/community/users/search?query=${ps}`);sr(ls.data.users||[]),ir(!0)}catch(ls){console.error(" fragment mention search failed:",ls),ir(!1)}},Xr=Wr=>{const cs=kt.current;if(!cs)return;const ns=cs.selectionStart,fs=Ft.slice(0,ns).match(/@([a-zA-Z0-9_]*)$/);if(!fs)return;const ss=ns-fs[0].length,ps=Ft.slice(0,ss),ls=Ft.slice(ns),js=`${ps}@${Wr} ${ls}`;Ut(js),ir(!1),sr([]),or(""),requestAnimationFrame(()=>{const $s=ss+Wr.length+2;cs.setSelectionRange($s,$s),cs.focus()})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-dashboard-bg-light dark:bg-dashboard-bg-dark flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:`
          sticky top-0 z-20
          h-14
          px-4 sm:px-6
          flex items-center justify-between
          bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
          border-b border-dashboard-border-light dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:as,className:"text-sm font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Cancel"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:wr?"Edit Fragment":zr?"Reshare Fragment":"Post Fragment"}),jsxRuntimeExports.jsx("button",{onClick:rs,disabled:Ht||Yt,className:`
          hidden sm:inline-flex
          px-3 py-1.5
          rounded-md
          text-sm font-medium
          bg-green text-black
          disabled:opacity-50
        `,children:Ht?"Saving":wr?"Save Changes":"Post Fragment"})]}),jsxRuntimeExports.jsxs("main",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-6",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto w-full max-w-3xl space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:`
                text-sm font-medium
                text-dashboard-text-light
                dark:text-dashboard-text-dark
              `,children:zr?"Add a thought (optional)":"Fragment"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("textarea",{ref:kt,value:Ft,onChange:es,placeholder:"Write a thought, a line, or something unfinished use @ to mention other users in your fragment",rows:6,className:`
              w-full p-4 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              placeholder:text-dashboard-muted-light
              dark:placeholder:text-dashboard-muted-dark
              focus:outline-none focus:ring-2 focus:ring-green
              resize-y
            `}),jsxRuntimeExports.jsxs("div",{className:`flex justify-end text-xs ${Ft.length>=500?"text-red-500":"text-dashboard-muted-light dark:text-dashboard-muted-dark pb-4"}`,children:[Ft.length,"/",500," characters max"]}),nr&&rr.length>0&&jsxRuntimeExports.jsx("div",{className:`
                relative
                z-50
                mt-2
                w-full
                max-h-56
                overflow-y-auto
                rounded-xl
                border
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                shadow-2xl
              `,children:rr.map(Wr=>{var cs,ns;return jsxRuntimeExports.jsxs("button",{type:"button",onMouseDown:us=>{us.preventDefault(),Xr(Wr.username)},onTouchStart:us=>{us.preventDefault(),Xr(Wr.username)},className:`
                    w-full
                    flex
                    items-center
                    gap-3
                    px-3
                    py-2
                    text-left
                    hover:bg-dashboard-hover-light
                    dark:hover:bg-dashboard-hover-dark
                    transition
                  `,children:[Wr.profile_image_url?jsxRuntimeExports.jsx("img",{src:Wr.profile_image_url,alt:Wr.username,className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:(ns=(cs=Wr.username)==null?void 0:cs.charAt(0))==null?void 0:ns.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["@",Wr.username]})]},Wr.id)})})]}),jsxRuntimeExports.jsxs("div",{className:`
              mt-6
              rounded-2xl
              border border-dashboard-border-light dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              p-6
              space-y-5
            `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-base font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:["Add Audio"," ",jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark font-normal",children:"(optional  max 3 hours)"})]}),mr&&jsxRuntimeExports.jsx("button",{type:"button",className:`
                    text-xs
                    text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                    hover:text-red-500
                    transition
                  `,children:"Remove"})]}),!mr&&!Yt&&jsxRuntimeExports.jsxs("label",{className:`
                  flex items-center justify-center
                  h-24
                  rounded-lg
                  border-2 border-dashed
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  text-sm
                  cursor-pointer
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  transition
                `,children:[jsxRuntimeExports.jsx("span",{className:"opacity-70",children:"Click to upload audio"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"audio/*",disabled:Ht||Yt,onChange:Wr=>{const cs=Wr.target.files[0];cs&&(Yr(cs),Wr.target.value="")},className:"hidden"})]}),Yt&&jsxRuntimeExports.jsxs("div",{className:`
                  rounded-lg
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  p-4
                  flex items-center gap-3
                `,children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-green border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Uploading audio"})]}),!Yt&&mr&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-medium mb-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Audio Title"}),jsxRuntimeExports.jsx("input",{value:Rr,onChange:Wr=>br(Wr.target.value),maxLength:255,className:`
                      w-full
                      px-3 py-2.5
                      rounded-lg
                      bg-dashboard-bg-light
                      dark:bg-dashboard-bg-dark
                      border border-dashboard-border-light
                      dark:border-dashboard-border-dark
                      text-sm
                      text-dashboard-text-light
                      dark:text-dashboard-text-dark
                      focus:outline-none
                      focus:ring-2
                      focus:ring-green
                      transition
                    `}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-right opacity-60 mt-1",children:[Rr.length,"/255"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:cr,onChange:Wr=>dr(Wr.target.checked),className:"h-4 w-4 accent-green"}),jsxRuntimeExports.jsx("label",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Allow users to download this audio"})]})]}),jsxRuntimeExports.jsx(FragmentAudioPlayer,{audioUrl:mr,audioTitle:Rr,durationSeconds:_r,allowDownload:cr})]})]}),Zt&&jsxRuntimeExports.jsxs("div",{className:`
                mt-4
                rounded-lg
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                p-4
              `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[Zt.author_image?jsxRuntimeExports.jsx("img",{src:Zt.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:Zt.author}),Zt.author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:14,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:timeAgo(Zt.created_at)})]})]}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",children:Zt.body})]})]})}),jsxRuntimeExports.jsx("div",{className:`
    sm:hidden
    sticky bottom-0
    w-full
    border-t border-dashboard-border-light dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    px-4 py-3
  `,children:jsxRuntimeExports.jsx("button",{onClick:rs,disabled:Ht||Yt,className:`
            w-full
            py-3
            rounded-lg
            text-sm font-semibold
            bg-green text-black
            disabled:opacity-50
          `,children:Ht?"Saving":wr?"Save Changes":"Post Fragment"})})]})]})}function MyFragments(){const et=useNavigate(),[dt,kt]=reactExports.useState([]),[$t,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(""),[Kt,Yt]=reactExports.useState(!1),Jt=reactExports.useRef(null),[Zt,er]=reactExports.useState(!0),rr=reactExports.useRef(0),sr="w-full px-4 py-3 text-sm text-left flex items-center gap-3 transition-colors";reactExports.useEffect(()=>{nr()},[]),reactExports.useEffect(()=>{function or(){Tt(null)}return window.addEventListener("click",or),()=>window.removeEventListener("click",or)},[]);async function nr(){try{Ft(!0);const or=await axiosInstance.get("/fragments/my-fragments");kt(or.data.fragments||[])}catch(or){console.error("Failed to fetch fragments:",or)}finally{Ft(!1)}}function ir(or){const cr=y$4(({closeToast:dr})=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Delete this fragment?"}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"This cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:dr,className:"px-3 py-1.5 text-xs rounded-md border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.delete(`/fragments/${or}`),kt(ur=>ur.filter(pr=>pr.id!==or)),y$4.dismiss(cr),y$4.success("Fragment deleted")}catch{y$4.error("Failed to delete fragment")}},className:"px-3 py-1.5 text-xs rounded-md bg-red-600 text-white",children:"Delete"})]})]}),{closeButton:!1,className:"rounded-xl"})}reactExports.useEffect(()=>{function or(cr){Jt.current&&!Jt.current.contains(cr.target)&&Yt(!1)}return Kt&&document.addEventListener("click",or),()=>{document.removeEventListener("click",or)}},[Kt]),reactExports.useEffect(()=>{function or(){const cr=window.scrollY;cr>rr.current&&cr>80&&er(!1),cr<rr.current&&er(!0),rr.current=cr}return window.addEventListener("scroll",or,{passive:!0}),()=>{window.removeEventListener("scroll",or)}},[]);const lr=reactExports.useMemo(()=>{if(!Ut.trim())return dt;const or=Ut.toLowerCase();return dt.filter(cr=>{var dr,ur;return((dr=cr.body)==null?void 0:dr.toLowerCase().includes(or))||((ur=cr.author)==null?void 0:ur.toLowerCase().includes(or))})},[dt,Ut]);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"My Fragments"}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/community/fragments/create"),className:`
              hidden md:inline-flex
              px-3 py-2 rounded-lg text-sm font-medium
              bg-dashboard-text-light dark:bg-dashboard-text-dark
              text-dashboard-bg-light dark:text-dashboard-bg-dark
            `,children:"Write Fragment"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-0 py-4 pb-24 max-w-3xl mx-auto space-y-2",children:[Dt&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading fragments"}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto",children:jsxRuntimeExports.jsx("input",{value:Ut,onChange:or=>Ht(or.target.value),placeholder:"Search your posts by title or subtitle",className:`
        w-full
        px-4 py-2.5
        rounded-lg
        text-sm
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        placeholder:text-dashboard-muted-light
        dark:placeholder:text-dashboard-muted-dark
        focus:outline-none
        focus:ring-2
        focus:ring-green
      `})}),!Dt&&lr.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:Ut?"No fragments match your search.":"You havent posted anything yet."}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3"}),lr.map(or=>{var cr,dr;return jsxRuntimeExports.jsx("div",{onClick:()=>et(`/community/fragments/${or.id}`),className:`
      px-4 py-4 sm:px-6
      rounded-lg
      border border-dashboard-border-light dark:border-dashboard-border-dark
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      transition
      cursor-pointer
    `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[or.author_image?jsxRuntimeExports.jsx("img",{src:or.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:`
            w-8 h-8 rounded-full
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            flex items-center justify-center
            text-xs font-semibold
            text-dashboard-muted-light dark:text-dashboard-muted-dark
          `,children:(dr=(cr=or.author)==null?void 0:cr.charAt(0))==null?void 0:dr.toUpperCase()}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:or.author}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:formatDate(or.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:timeAgo(or.created_at)}),or.updated_at&&new Date(or.updated_at).getTime()-new Date(or.created_at).getTime()>6e4&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"italic opacity-50",children:"edited"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:ur=>{ur.stopPropagation(),Tt($t===or.id?null:or.id)},className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:18})}),$t===or.id&&jsxRuntimeExports.jsxs("div",{onClick:ur=>ur.stopPropagation(),className:`
                  absolute right-0 mt-2 z-30
                  w-56
                  rounded-xl
                  bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                  border border-dashboard-border-light dark:border-dashboard-border-dark
                  shadow-xl
                  overflow-hidden
                `,children:[jsxRuntimeExports.jsxs("button",{onClick:ur=>{ur.stopPropagation(),Tt(null),et(`/community/fragments/edit/${or.id}`)},className:`${sr} hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark`,children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"opacity-80"}),"Edit"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark my-1"}),jsxRuntimeExports.jsxs("button",{onClick:ur=>{ur.stopPropagation(),Tt(null),ir(or.id)},className:`${sr} text-red-500 hover:bg-red-500/10`,children:[jsxRuntimeExports.jsx(Trash2,{size:16}),"Delete"]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm leading-relaxed  text-dashboard-text-light dark:text-dashboard-text-dark whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:typeof(or==null?void 0:or.body)=="string"?or.body:""}}),or.audio_url&&jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx(FragmentAudioPlayer,{audioUrl:or.audio_url,audioTitle:or.audio_title,durationSeconds:or.audio_duration_seconds,allowDownload:or.allow_download})}),or.reshared_id&&jsxRuntimeExports.jsxs("div",{className:`
                    mt-4
                    rounded-lg
                    border border-dashboard-border-light
                    dark:border-dashboard-border-dark
                    bg-dashboard-sidebar-light
                    dark:bg-dashboard-sidebar-dark
                    p-4
                  `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[or.reshared_author_image?jsxRuntimeExports.jsx("img",{src:or.reshared_author_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:or.reshared_author}),or.reshared_author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:jsxRuntimeExports.jsx("span",{children:timeAgo(or.reshared_created_at)})})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof(or==null?void 0:or.reshared_body)=="string"?or.reshared_body:""}})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:or.views??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:or.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:or.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageCircle,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:or.comment_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Repeat,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:or.reshare_count??0})]})]})]})]})},or.id)})]}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
    md:hidden
    transition-all duration-200 ease-out
    ${Zt?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
  `,open:Kt,setOpen:Yt,containerRef:Jt,onCreatePost:()=>{Yt(!1),et("/community/create-post")},onCreateFragment:()=>{Yt(!1),et("/community/fragments/create")}})]})}function SubscribeChoicePage(){var Mr,Pr,Or,kr;const{authorId:et}=useParams(),dt=useLocation(),[kt]=useSearchParams(),$t=kt.get("preview")==="1",Tt=useNavigate(),Dt=((Mr=dt.state)==null?void 0:Mr.from)||`/community/authors/${et}`,[Ft,Ut]=reactExports.useState(null),[Ht,Kt]=reactExports.useState(!0),[Yt,Jt]=reactExports.useState(!1),[Zt,er]=reactExports.useState(!1),[rr,sr]=reactExports.useState(!1);reactExports.useEffect(()=>{nr()},[]);async function nr(){try{const[Tr,xr]=await Promise.all([axiosInstance.get(`/community/authors/${et}`),axiosInstance.get(`/community/subscriptions/${et}/status`)]);Ut(Tr.data.profile),er(xr.data.has_paid_subscription),sr(xr.data.subscribed)}catch{y$4.error("Failed to load author"),Tt(Dt)}finally{Kt(!1)}}const ir=!!(Ft!=null&&Ft.monthly_price),lr=!!(Ft!=null&&Ft.annual_price),or=typeof(Ft==null?void 0:Ft.vip_price)=="number",cr=typeof(Ft==null?void 0:Ft.vip_price)=="number"?Ft.vip_price:null,dr=typeof(Ft==null?void 0:Ft.monthly_price)=="number"?Ft.monthly_price:null,ur=typeof(Ft==null?void 0:Ft.annual_price)=="number"?Ft.annual_price:null,pr=dr&&ur?ur/12:null,mr=dr&&ur?dr*12-ur:null,jr=mr!==null&&mr>0;async function Rr(){if(!Yt){Jt(!0);try{await axiosInstance.post(`/community/subscriptions/${et}/subscribe`),y$4.success("Subscribed"),Tt(Dt)}catch{y$4.error("Failed to subscribe")}finally{Jt(!1)}}}async function br(){if(!Yt){Jt(!0);try{await axiosInstance.delete(`/community/subscriptions/${et}/subscribe`),y$4.success("Unsubscribed"),Tt(Dt)}catch{y$4.error("Failed to unsubscribe")}finally{Jt(!1)}}}async function _r(Tr){if(!Yt){Jt(!0);try{const xr=await axiosInstance.post("/seller-checkout/create-author-subscription-checkout",{authorUserId:et,billingInterval:Tr});window.location.href=xr.data.url}catch{y$4.error("Failed to start checkout"),Jt(!1)}}}return Ht?jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Loading subscription options"}):Ft?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-0 py-10 space-y-8",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{if($t){window.close();return}Tt(Dt)},className:"flex items-center gap-2 text-sm opacity-70 hover:opacity-100",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),$t?"Close preview":"Back"]}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-3",children:[jsxRuntimeExports.jsx("img",{src:Ft.profile_image_url||defaultImage,alt:Ft.name,className:"w-20 h-20 rounded-full mx-auto object-cover"}),jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold",children:["Subscribe to ",Ft.name]}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 max-w-md mx-auto",children:"Choose how youd like to follow and support this writer."})]}),$t&&jsxRuntimeExports.jsx("div",{className:"rounded-lg border border-yellow-300 bg-yellow-50 text-yellow-800 px-4 py-2 text-sm text-center",children:"Youre previewing your subscription page as others see it."}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Free"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm space-y-2 opacity-80",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," New public post"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Comment and engage"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Send tips"]})]}),jsxRuntimeExports.jsx("button",{type:"button",disabled:Yt,onClick:rr?br:Rr,className:`
    w-full mt-4 py-3 rounded-lg
    border
    transition
    flex items-center justify-center gap-2
    ${Yt?"opacity-70 cursor-not-allowed":"hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
  `,children:Yt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{size:16}),"Updating"]}):rr?"Unsubscribe":"Subscribe for free"})]}),ir&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Monthly"}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-2 opacity-80",children:((Pr=Ft.monthly_benefits)==null?void 0:Pr.length)>0?Ft.monthly_benefits.map((Tr,xr)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"mt-[2px] shrink-0"}),Tr]},xr)):jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Support the writer"]})}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Yt,onClick:()=>_r("monthly"),className:`
              w-full mt-4 py-3 rounded-lg
              bg-blue text-white
              hover:opacity-90
              transition
            `,children:["Subscribe  $",Ft.monthly_price.toFixed(2)]})]}),lr&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["Annual",jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green/10 text-green",children:"Best value"})]}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-2 opacity-80",children:((Or=Ft.annual_benefits)==null?void 0:Or.length)>0?Ft.annual_benefits.map((Tr,xr)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"mt-[2px] shrink-0"}),Tr]},xr)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Everything in Monthly"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Save with annual billing"]})]})}),pr&&jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-70",children:["$",pr.toFixed(2),"/month, billed annually"]}),jr&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green",children:["Save $",mr.toFixed(2)," per year"]}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Yt,onClick:()=>_r("annual"),className:`
              w-full mt-4 py-3 rounded-lg
              bg-blue/90 text-white
              hover:opacity-90
              transition
            `,children:["Subscribe  $",Ft.annual_price.toFixed(2)]})]}),or&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["VIP Founder",jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-500/10 text-brightPurple",children:"Limited"})]}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-2 opacity-80",children:((kr=Ft.vip_benefits)==null?void 0:kr.length)>0?Ft.vip_benefits.map((Tr,xr)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"mt-[2px] shrink-0"}),Tr]},xr)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Founder level access"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Direct support of the writer"]})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"Billed annually"}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Yt,onClick:()=>_r("vip"),className:`
        w-full mt-4 py-3 rounded-lg
        bg-brightPurple text-white
        hover:opacity-90
        transition
      `,children:["Subscribe  $",cr.toFixed(2)]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Author not found"})}const GRID_COLS="grid-cols-[2.5fr_120px_160px_48px]";function MySubscriptions(){const et=useNavigate(),[dt,kt]=reactExports.useState(null),[$t,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState([]),[Ut,Ht]=reactExports.useState(!0),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(null);function er(lr){kt(or=>or===lr?null:lr)}function rr(lr){return new Date(lr).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}async function sr(){try{Ht(!0);const lr=await axiosInstance.get("/community/subscriptions/my");Ft(lr.data.subscriptions||[])}catch(lr){console.error("Failed to fetch subscriptions",lr),y$4.error("Failed to load subscriptions")}finally{Ht(!1)}}reactExports.useEffect(()=>{sr()},[]);const nr=Dt.filter(lr=>lr.author_name.toLowerCase().includes($t.toLowerCase())||lr.author_username.toLowerCase().includes($t.toLowerCase()));function ir(lr){et(`/subscriptions/${lr.author_user_id}/cancel`,{state:lr})}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 border-b border-dashboard-border-light dark:border-dashboard-border-dark px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"My Subscriptions"}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:[Dt.length," active subscription",Dt.length!==1?"s":""]})]})}),jsxRuntimeExports.jsx("div",{className:"px-0 py-4 max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50"}),jsxRuntimeExports.jsx("input",{value:$t,onChange:lr=>Tt(lr.target.value),placeholder:"Search by author...",autoComplete:"off",autoCorrect:"off",spellCheck:!1,className:`
              w-full pl-9 pr-3 py-2 rounded-lg text-sm
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              outline-none
            `})]})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block px-4 max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:`
          grid ${GRID_COLS}
          items-center
          px-4 py-3
          text-xs font-medium
          text-white/50
          bg-dashboard-hover-light
          dark:bg-dashboard-hover-dark
          rounded-t-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("div",{children:"Author"}),jsxRuntimeExports.jsx("div",{children:"Plan"}),jsxRuntimeExports.jsx("div",{children:"Renews"}),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-1",children:nr.map(lr=>{const or=lr.paid_subscription===1;return jsxRuntimeExports.jsxs("div",{className:`
                grid ${GRID_COLS}
                items-center
                px-4 py-3
                rounded-xl
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                transition
              `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>et(`/community/authors/${lr.author_user_id}`),className:"flex-shrink-0",children:lr.author_image_url?jsxRuntimeExports.jsx("img",{src:lr.author_image_url,alt:lr.author_name,className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex items-center justify-center text-xs",children:lr.author_name.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium truncate",children:lr.author_name}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60 truncate",children:["@",lr.author_username]})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${lr.paid_subscription?lr.type==="monthly"?"bg-green/20 text-green":lr.type==="annual"?"bg-blue/20 text-blue":"bg-purple/20 text-purple":"bg-gray-500/20 text-gray-400"}`,children:lr.paid_subscription?lr.type==="monthly"?"Monthly":lr.type==="annual"?"Annual":"VIP":"Free"})}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-70",children:lr.paid_subscription?lr.cancel_at_period_end?`Ends ${rr(lr.current_period_end)}`:"Renews monthly":""}),jsxRuntimeExports.jsxs("div",{onClick:cr=>cr.stopPropagation(),className:"relative flex justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>er(lr.id),className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:16})}),dt===lr.id&&jsxRuntimeExports.jsxs("div",{className:`
                    absolute right-0 top-10
                    w-44
                    rounded-xl
                    shadow-xl
                    z-50
                    bg-dashboard-sidebar-light
                    dark:bg-dashboard-sidebar-dark
                    border
                    border-dashboard-border-light
                    dark:border-dashboard-border-dark
                  `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{kt(null),et(`/community/authors/${lr.author_user_id}`)},className:"w-full px-4 py-2 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"View author"}),or&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{onClick:()=>{kt(null),Zt(lr),Yt(!0)},className:"w-full px-4 py-2 text-sm text-left text-red-500 hover:bg-red-500/10",children:"Cancel subscription"})})]})]})]},lr.id)})}),dt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>kt(null)})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-0 space-y-3",children:nr.map(lr=>{const or=lr.paid_subscription===1;return jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>et(`/community/authors/${lr.author_user_id}`),children:lr.author_image_url?jsxRuntimeExports.jsx("img",{src:lr.author_image_url,alt:lr.author_name,className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex items-center justify-center text-xs",children:lr.author_name.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium truncate",children:lr.author_name}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-60",children:lr.paid_subscription?`${lr.type==="monthly"?"Monthly":lr.type==="annual"?"Annual":"VIP"}  ${lr.cancel_at_period_end?`Ends ${rr(lr.current_period_end)}`:"Renews monthly"}`:"Free"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>er(lr.id),className:"w-full py-2 rounded-lg bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Ellipsis,{size:16}),"Options"]}),dt===lr.id&&jsxRuntimeExports.jsxs("div",{className:"mt-2 rounded-xl overflow-hidden border border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{kt(null),et(`/community/authors/${lr.author_user_id}`)},className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"View author"}),or&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{onClick:()=>{kt(null),Zt(lr),Yt(!0)},className:"w-full px-4 py-2 text-sm text-left text-red-500 hover:bg-red-500/10",children:"Cancel subscription"})})]})]})]},lr.id)})}),Ut&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60 px-4 py-6",children:"Loading subscriptions"}),Kt&&Jt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-sm rounded-xl bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"Cancel subscription?"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm opacity-70",children:"Youll keep access until the end of the current billing period."}),jsxRuntimeExports.jsxs("div",{className:"mt-6 flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Yt(!1),className:"flex-1 py-2 rounded-lg border",children:"Keep subscription"}),jsxRuntimeExports.jsx("button",{onClick:()=>{ir(Jt),Yt(!1),Zt(null)},className:"flex-1 py-2 rounded-lg bg-red-600 text-white",children:"Cancel anyway"})]})]})})]})}function PublicationHeader({profile:et}){return et?jsxRuntimeExports.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-center gap-3 sm:gap-4 pb-6",children:[et.publication_logo_url&&jsxRuntimeExports.jsx("img",{src:et.publication_logo_url,alt:"Publication logo",className:`
              w-12 h-12
              rounded-lg
              object-cover
              opacity-95
            `}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold leading-tight",children:et.publication_name||et.name})]}),et.publication_tagline&&jsxRuntimeExports.jsx("p",{className:"mt-2 opacity-70 max-w-xl mx-auto sm:mx-0",children:et.publication_tagline})]}):null}function PublicationListItem({post:et,authorName:dt,authorId:kt,onLike:$t,onShare:Tt,copiedPostId:Dt}){return jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${et.id}`,state:{returnTo:`/community/authors/${kt}/publication`},className:"block hover:opacity-90 transition",children:jsxRuntimeExports.jsxs("article",{className:`
          rounded-2xl
          bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light dark:border-dashboard-border-dark
          p-4

          sm:border-none sm:bg-transparent sm:p-0 sm:rounded-none
        `,children:[jsxRuntimeExports.jsxs("div",{className:`
            flex flex-col gap-4

            sm:grid
            sm:grid-cols-[1fr_96px]
            sm:gap-6
            sm:items-start
          `,children:[et.image_url&&jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:`
                w-full
                h-[180px]
                rounded-xl
                object-cover

                sm:hidden
              `}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold leading-snug",children:et.title}),et.subtitle&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 mt-1 leading-relaxed",children:et.subtitle}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-50 mt-2",children:[new Date(et.created_at).toLocaleDateString(),"  ",dt]})]}),et.image_url?jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:`
                hidden sm:block
                w-[96px]
                h-[96px]
                rounded-xl
                object-cover
                justify-self-end
              `}):jsxRuntimeExports.jsx("div",{className:"hidden sm:block w-[96px]"})]}),jsxRuntimeExports.jsx("div",{className:`
    mt-3
    pt-3
    border-t
    border-dashboard-border-light
    dark:border-dashboard-border-dark

    flex items-center justify-between
    text-sm sm:text-xs
    text-dashboard-muted-light
    dark:text-dashboard-muted-dark

    sm:hidden
  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Ft=>{Ft.preventDefault(),Ft.stopPropagation(),$t(Ft,et)},className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:et.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:Ft=>{Ft.preventDefault(),Ft.stopPropagation(),Tt(Ft,et)},className:"flex items-center gap-[4px]",children:Dt===et.id?jsxRuntimeExports.jsx(Check,{size:16,className:"text-green"}):jsxRuntimeExports.jsx(Share2,{size:16,className:"opacity-70"})})]})})]})})}function FeaturedPost({post:et,authorName:dt,authorId:kt,onLike:$t,onShare:Tt,copiedPostId:Dt}){const Ft=`/community/authors/${kt}/publication`;return jsxRuntimeExports.jsxs("article",{className:"space-y-5",children:[et.image_url&&jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${et.id}`,state:{returnTo:Ft},className:"block group",children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:`
              w-full
              h-[220px] sm:h-[300px] lg:h-[420px]
              object-cover
              rounded-2xl
              transition
              group-hover:opacity-95
            `})}),jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${et.id}`,state:{returnTo:Ft},className:"block w-fit",children:jsxRuntimeExports.jsx("h2",{className:`
            text-xl sm:text-2xl lg:text-3xl
            font-semibold
            leading-tight
            hover:underline
          `,children:et.title})}),et.subtitle&&jsxRuntimeExports.jsx("p",{className:"text-sm sm:text-base opacity-70",children:et.subtitle}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-50",children:[new Date(et.created_at).toLocaleDateString(),"  ",dt]}),jsxRuntimeExports.jsx("div",{className:`
    pt-3
    border-t
    border-dashboard-border-light
    dark:border-dashboard-border-dark

    flex items-center justify-between
    text-sm sm:text-sm
    text-dashboard-muted-light
    dark:text-dashboard-muted-dark

    sm:hidden
  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Ut=>{Ut.preventDefault(),Ut.stopPropagation(),$t(Ut,et)},className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:et.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:Ut=>{Ut.preventDefault(),Ut.stopPropagation(),Tt(Ut,et)},className:"flex items-center gap-[4px]",children:Dt===et.id?jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(Share2,{size:16,className:"opacity-70"})})]})})]})}function MyPublication(){const{userId:et}=useParams(),[dt,kt]=reactExports.useState(null),[$t,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(null),Kt=10,[Yt,Jt]=reactExports.useState(0),[Zt,er]=reactExports.useState(!0),[rr,sr]=reactExports.useState(!1),nr=reactExports.useRef(null);reactExports.useEffect(()=>{Tt([]),Jt(0),er(!0),ir(!0)},[et]);async function ir(ur=!1){if(!(!Zt&&!ur)){ur?Ft(!0):sr(!0);try{const pr=await axiosInstance.get(`/community/authors/${et}/publication`,{params:{limit:Kt,offset:ur?0:Yt}});ur?(kt(pr.data.profile),Tt(pr.data.posts||[]),Jt(pr.data.posts.length)):(Tt(mr=>[...mr,...pr.data.posts]),Jt(mr=>mr+pr.data.posts.length)),er(pr.data.hasMore)}catch{console.error("Failed to load publication")}finally{Ft(!1),sr(!1)}}}reactExports.useEffect(()=>{if(!Zt||rr)return;const ur=new IntersectionObserver(([pr])=>{pr.isIntersecting&&ir(!1)},{rootMargin:"200px"});return nr.current&&ur.observe(nr.current),()=>ur.disconnect()},[Zt,rr,Yt]);const lr=async(ur,pr)=>{if(ur.preventDefault(),ur.stopPropagation(),!!(pr!=null&&pr.id))try{pr.has_liked?await axiosInstance.delete("/community/delete-like",{data:{targetType:"post",targetId:pr.id}}):await axiosInstance.post("/community/likes",{targetType:"post",targetId:pr.id}),Tt(mr=>mr.map(jr=>jr.id===pr.id?{...jr,has_liked:pr.has_liked?0:1,like_count:Math.max((jr.like_count||0)+(pr.has_liked?-1:1),0)}:jr))}catch(mr){console.error("Failed to toggle like:",mr),toast.error("Failed to update like")}},or=async(ur,pr)=>{if(ur.preventDefault(),ur.stopPropagation(),!pr)return;const mr=getShareUrl(pr,"post");try{await navigator.clipboard.writeText(mr),Ht(pr.id),setTimeout(()=>Ht(null),1500)}catch{toast.error("Failed to copy link")}};if(Dt)return jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Loading"});if(!$t.length)return jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"No posts yet"});const cr=$t[0],dr=$t.slice(1);return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-0 py-8",children:[jsxRuntimeExports.jsx(PublicationHeader,{profile:dt}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[3fr_2fr] gap-10 sm:gap-12",children:[jsxRuntimeExports.jsx(FeaturedPost,{post:cr,authorName:dt==null?void 0:dt.name,authorId:dt.id,onLike:lr,onShare:or,copiedPostId:Ut}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[dr.map(ur=>jsxRuntimeExports.jsx(PublicationListItem,{post:ur,authorId:dt.id,authorName:dt==null?void 0:dt.name,onLike:lr,onShare:or,copiedPostId:Ut},ur.id)),Zt&&jsxRuntimeExports.jsx("div",{ref:nr,className:"h-10"}),rr&&jsxRuntimeExports.jsx("p",{className:"text-xs opacity-50 text-center",children:"Loading more articles"})]})]})]})})}const AnimatedRoutes=()=>{const et=useLocation(),dt=localStorage.getItem("theme")||"dark";return document.documentElement.classList.add(dt),jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:et,children:[jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(SiteLayout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(Landing,{})})}),jsxRuntimeExports.jsx(Route,{path:"contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"landing",element:jsxRuntimeExports.jsx(LandingInfoPage,{})}),jsxRuntimeExports.jsx(Route,{path:"plans",element:jsxRuntimeExports.jsx(PlansPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup-community",element:jsxRuntimeExports.jsx(SignupCommunity,{})}),jsxRuntimeExports.jsx(Route,{path:"analytics",element:jsxRuntimeExports.jsx(AnalyticsFeaturePage,{})}),jsxRuntimeExports.jsx(Route,{path:"community-feature",element:jsxRuntimeExports.jsx(CommunityFeaturePage,{})}),jsxRuntimeExports.jsx(Route,{path:"stripe-payments",element:jsxRuntimeExports.jsx(StripePayments,{})}),jsxRuntimeExports.jsx(Route,{path:"authors-assistant",element:jsxRuntimeExports.jsx(AuthorsAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/community/invites/:token",element:jsxRuntimeExports.jsx(InviteAccept,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/settings/domains",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SettingsDomains,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/community",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityHome,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community-alerts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Notifications,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/topic/:topicId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityTopic,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/post/:slug",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityPost,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/subscriptions",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Subscriptions,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/my-subscriptions",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MySubscriptions,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/subscriptions/subscribers",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunitySubscribers,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/subscribe/:authorId/choose",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SubscribeChoicePage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/authors/:userId/subscribers",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunitySubscribers,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(ProfileSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/profile",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Profile,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/profile/:userId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Profile,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/authors/:userId/publication",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MyPublication,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/bookmarks",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Saved,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/my-fragments",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MyFragments,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/fragments/edit/:fragmentId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreateFragment,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/fragments/create",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreateFragment,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/fragments/:id",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityPost,{targetType:"fragment"})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/authors/:userId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Profile,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/posts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MyPosts,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/email-templates",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(EmailTemplates,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/create-post",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreatePostPage,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/edit-post/:postId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreatePostPage,{isEdit:!0})})})})}),jsxRuntimeExports.jsx(Route,{path:"/seller-dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["marketer","admin","customer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SellerDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/landing-page-builder",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingPageBuilder,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/landing-analytics",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingAnalytics,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DocsIndexPage,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SettingsDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/landing-page-builder",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingBuilderDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/seller-dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SellerDashboardDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/analytics-docs",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingAnalyticsDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/custom-domain",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CustomDomainsDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/authors-assistant",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(AuthorsAssistantDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},et.pathname)})},RootApp=()=>{const{maintenance:et,loading:dt}=useMaintenance();return dt?null:et?jsxRuntimeExports.jsx(MaintenanceScreen,{}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsxs(BookProvider,{children:[jsxRuntimeExports.jsx(Lt$1,{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})},container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));export{commonjsGlobal as c,getAugmentedNamespace as g};
